[ {
  "filePath" : "Hands-on Wireless Sensing with Wi-Fi_A Tutorial(OCR).pdf",
  "fileName" : "Hands-on Wireless Sensing with Wi-Fi_A Tutorial(OCR).pdf",
  "parentDir" : "",
  "fileType" : "PDF",
  "title" : "Hands-on Wireless Sensing with Wi-Fi_A Tutorial(OCR).pdf",
  "contentText" : "Haanndds-so-onn WWirierleelses sSSeennssiinngg witithh Wi-iF-Fii::AA TTuuttoorriiaall\nZHHENEGN YGANYGA,NTsGin, gThsiunag hUunaiUvneirvseirstiyty,,CChhiina\nYII ZHANAGN,TGs,iTngsihnugah uUanUivneivresristity, Chhiina\nGGUUOXOUAXNU ACHNI,CTsHiIn,gThsuinag hUunaiUvneirvseirstiyty,,CChhiinnaa\nGGUUIDIODNOG NZGHAZNGH,ATsNiGng,hTusianUgnhiuvaeUrnsivterys,it yC, hCihninaa\nWitithh tthee rapiid developmenetn tooff wirireelless commmunuincaictaitoino ntetechcnhonloolgoyg,y ,wwirierleelesss acccceessss points((APP) ) anndd iintternett\nooff things((IIoT)) deviices have been widideellyy ddeeppllooyyeedd iinn oouurr ssuurrrrouunndidningsg.sV.aVrairoiuosu stytpyepse sofo fwwirierleelesss ssiignaalls\n(ee..gg.,.,WWii-Fi,,LoRRaa,,LTLET)Ear)ea rfeilfillilinngg oouut toouur rlliiving andd wworokriknign gspsapcaecse.s .PPrerveivoiousu sreresesearacrhcehse srerevveaela ltthhee ffact\nthatt radio waavvese saarere mmodoudlautleadt ebdy btyhet hsepastpiaatli asltsrturcutcutruer edudruinrign gthteh perpopraogpaatgiaonti opnropcerossc e(ses.g(e..,g .r, erfelfleeccttiionn,,\ndiiffffrraaccttiioonn,,and scatterinng) aannd ssuuperimpposoesde dono nthteh ererceecievievre.r . Thhisis obbsseerrvvaatitioonn aalllows suuss tto reconnssttrruucctt the\nsurrrouunnddining geenvnivriornomnemnte nbtasbeads eodn ornecreicveeidv ewdirweilreeslse ssisginganlasl,s ,ccaallled\"“wwirierleelesss sseennssiingg\"”..WWirierleelses ssseennsisningg iiss\narXiv:2206.09532vl [eess.SP] 20Jun 2022 aann eemmeregrigning gtteecchhnonloolgoyg ythtahta teennabalbelse saa wwididee rraanngge eooff aapppplliiccaattiioonnss,,ssuucchh aass ggeessttuurree rreeccooggnniittiioonn foforrh uhummaann--\ncommpuptuerte rinitnetrearcatcitoion,n ,vviittal ssiiggnns  mmonniittorriingg for healthh ccaaree, a nandd inintrturussioionnd deetteecctitoinonf ofrors esceucruirtiytmy amannaaggemeennt.t.\nCoommpapraerde dwiwthit hotohtehre rsesnesnisning gpparaaraddigigmms,ss,uscuhc hasa svivsiisoionn-b-baasseedd aanndd IIMMU-Ub-absaesde dsesnesnisnign,g ,wwirierelleessss sensing\nsolutioonns hhave unique advaannttaaggeess ssuucchh aass hiigh covveerraaggee,, pervassivenesss, llow ccoosstt,, and robustness undeerr\naddvveerrssee llight and texture scenarios. Beessiiddeess,,wwirierleelesss sseennssiinngg ssoolluuttiionnss aarree geenneerraallly ligghhtweeiighhtt in teermmss of\nbootthh coommpuptuataitoino novoevrehrehade aadnda nddevdiecvei cseizseiz.e .ThTihsi sttuuttoorriiaall taakes WWii--FFii sensing as aann eexxampplele..IItt inntrooducess\nbootthh tthee theoorreettiical pprinncippleess aanndd tthhee ccooddee iimmplemeentnattaitoionn1 1ofo fdadtaat accololleeccttiionn,, siggnal pproocessinng, featurress\nexttraccttion,,aannd dmomdoeld edledsiegsnig.Inn. Ianddaidtdioitni,o nt,htihs istuttuotroiraila lhhiigghhliligghhttss sstate-of-thhe-art ddeeep leeaarnninng moodedlesl(se(.eg..g,.,\nCCNNN,N ,RRNNN,N a,nadn dadavdervsearrsiaarila llleeaarrnniinngg mmodoedlesl)sa)nadn dthtehieri raappplpilcicaattiioonnss iinn wwiirreelleesssss esnenssininggs yssytsetmemss..WWee hhooppee tthhiiss\nttuuttoorriiaall wwiillllh heellppp peeooppllee iinn ootthheerr rreesseeaarrcchh fifeiledlsdst otob rberaekaki nitnotow iwrierleelsesssse snesnisnigngr erseesaeracrhcha nadndl elaeranrnm moorree aabboouutt\niittss tthheeoorriieess,,ddeessiiggnnss,,aanndd iimmplpelmeemnteanttiaotni osnkislklisll,s ,pprroommotointign gprposropesrpietryi tyini nthteh ewiwreirleelsess ssseensnisning grerseesaeracrhc hfifieelldd..\n1 WWIRIREELLEESSSS SSEENNSSIINNGGB ABCACKKGGRROOUND\n1.11 WWhaht aitsis Wirierelleessss Sensing\nVaarriiouss sensors aannd sseennsor nneettwworks have thhoroughhlly extendeedd huummana npeprecrecpetpitoino nofo ftthee phhyyssiiccaall\nwoorrlldd..NNowoawdaydsa,y sn,unmeurmouesro suesnseonrso hrsavhea vbeebne ednepdleopyelody teod tcoomcpolmetpel evtearviaoruiso ussensseinnsgin tgatsaksk,s ,rreessuulltt-\ninng iinn aas isginginfiicfaincatndte pdleopylmoyemnentta nadndm maaiinntteennaannce oovveerhhead.  TThhiss pprroobblleemm bbecomeess iincreasingly\ntroubllesome ewwhehne na alalargrge esseennssiinngg ssccaalle issi nind edmemaannd. Taakkiinngg iinddoooor rppeerrssoonn ttrrackkiingg as an exampplele,,\na sppecialiizzeedd trtarcakckinigngs yssytsetmem oonnlyy ccoovvers  aa roroomm-level  aarreeaa,,w whhicchh isist otooos msmaall lc ocmomppaareedd ww ith\nthe moovvining grreeggioionn dduruirning gaa ppeersrsoon'ns’ sddaaiilly liffee..MMuullttiplee ttrraacckkiinngg ssyysstteemms aaree nneeeded to aachieve\npprraaccttiiccaall sseennssiinngg ccoovveerraaggee iinn rereaalilsitsictilciv ilnigvienng veirnovinrmonemnetnst,se,.eg..,gh.,ohuosuesse,sc,acammppuusseess,, mmaarrkkeettss,,aaiirrppoorrttss,,\nandd offfificceess,,and the cost iinneevvittaabbllyy rarammps up..\nGiivveenn tthhee ccoostst limmiitationss of tthhee sseennsors, maanyn ypipoinoeneerse rtsrtireide dttoo ffiigurree ouutt an alternative sooluutioonn\ndduurriinngg tthhee ppaasstt ddeeccaaddee..  NNoowwaaddayasy,s ,vvaarriioouuss ttyyppeess ooff ssiiggnnaallss((ee..gg.,.,WWii--FFii,,LLooRRaa,,LLTET)Ea)rea rfeifilllliinngg oouutt\nourr liivviningg aanndd wworking spaces foor  wwireelleesssc ocmommuunnicicaattiionn,, whhiicchh ccaann bbee lleveragedd to capture\nthe enviroonmeenntatall channggeess wiitthoouutt caussiing extraa oovveerrhhead. Accccoorrddiingg to thhe eelelcetcrtormomaaggnetissmm\ntheory, tthhee rardadioios isginganlaslesm eimtitetdtebdy btyh ethter atnrsamnsitmtietrt(eTrx(T)xe)xepxepreireinecnecev avrairoiuosusp hpyhsyisciaclaplh pehneonmomeenna\nsucchh aass reflfleeccttioionn,,ddifffrfarcatcitoino,na,nandd ssccaattetreirnigngddurinng tthhe pprroopagattion proceessss and form iintto muultltiiplle\npprrooppaaggataitioonn ppaathths.sI. nIn tthhiiss wwaayy,,ththe essuupepreirmimpopseods emdulmtiupltaitpha tshigsnigalnsa lcsoclollelcetcetde dbby ytthhe erreecceeiivveerr ccaarrrryy\nspaattial  ininfoformrmatioonn aabboout tthhees isgingnaallp rporpoapgagaattioinone nenvviriornonmmentt.RReellyyiinngg oonnllyy onn the ambbieiennt t wirireellesss\nssiiggnnaallss aanndd uubbiiqquuiittoouuss ccoommmmunuincaictaitoino ndedveivciecse,s ,wwirireelleessss sseennssiinngg eemmeerrggeess aass aa nnoovveell ppaarraaddiiggmm ffoorr\neennvviirroonnmmenetn tsseennssiinngg..\nIn recentt years,  wwireleessss sseennssiinngg tteecchhnnoloogy hass attraacteedd mmaannyy rreesseeaarrcchh iinntteerreessttss to brinng\nwwiirreelleessss sseennssiinngg ffrroomm tthhee iimmaaggiinnaattiioonn iinnttoo rreeaallitiyt,yb,ybyb boooossttininggs esnenssinigngg grarnanuullaarritiyt,yi,mimpprroovviinngg\n11Cooded eaandn ddadtaat aaraere aavvaaililaabbllee at hhtttpp:://t/nns.tthhsss.t.stisnignhguhuaa.e.deduu..ccnn//wwst  aannd hhtttpp:://tnns.tthhsss.tssiinngghua..edu..cn//wididaar3r3.0.0..\narXiv:2206.09532v1  [eess.SP]  20 Jun 2022\n22 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n个今为店可O\nData Collection and Dataset Preprocessing Feature Algorithm\nExtraction and Model\nFiig.  11.. CCompparairsisiionn ooff vissiioonn--bbaased seensinng aand RFF--bbaasseedd sseennssiinngg pprroocceessseess..\nsysstem rroobbuustsntneses,s , anndd eexxpplloorriinngg aapppplilicaattion scenarrios.  MManyy ooff their  wworkss on wiirreelless sseennsinng\nhaavvee been ppubliisshheeddi ninfl afglsahgipshciopn fceornefnecreesnacneds jaonudr njaolsu,rsnuaclhs,assuAchC MasS IAGCMC OSIMGMCO,MAM,CAMCMM MobiCCom,,\nACCMM MMoboibSiSyyss,,IIEEEIINNFFOOCOCMO,MUS, EUNSIEXN INXSDNIS,DIIE,EIEE/EAC/AMC TMoNT,oINE,EIE EJESJASCA,C ,aanndd IEEE TTMMC..IIn\nadddiition,  mmannyy ffaammouosu scocmopmanpiaens ieasrea raelsaols oexepxlporloirnign gthteh eprpordoudcuticztiaztaitoino nofo fsseennsosrolrelesss sseennssiingg,,\nlauncchhiinngg vvaarriiouss IoT devices ffoorrh huumman--ccoommpuptuetre rininteterraaccttiionn,, securittyy mmoniitorinng, andd heeaallth\nccaarree..\n1.22 CComopmarpiasroisno nofo fWiWreirleelsess sSSeennssiinngg aanndd CCoompmupteurte VriVsisoionn\nTyyppiiccaall RF siggnalss(300 kHzz-3-0300 0GHGz)H za)nda nvdisviibslibel eliligghhtt signalls ((338800 TTHHz--75705 0THTzH) za)raer eesesesnetnitaiallly\nelectrroommagnneettic((EMM)w)awveasv.e sW. hWenh epnroppraogpaatgiantgi nign inouoru rphpyhsyisciacla lwworolrdld,, thhe EEMM waavveess exppeerriience\na varriety of pphyssiical pphenoommenean saucshu cahs arsefrleeflcetcitoino,n ,didfifffrraaccttiion,, and scatttering. MMuullttiipatth signaalls\nare eventtuaallly ssuuperimppoosesde daannd drerececieviveed dbby ytthhee rreecceeiiveerr. TTherefore,  ththeer erceecievievdeds uspupeerrimimpposed\nssiiggnnaallss ccaarrrryy tthhee pphhyyssiiccaall iinnffoorrmmaattiioonn ooff tthhee ssiiggnnaall  pprrooppaaggaattiioonn ssppaaccee..\nBootthh tthee RFF--bbaasesde daandn dthteh evivsisiioonn-b-basaesde dsesnesnisnign galaglgoroirtithhmsm shsahraer esismiimlailra rpprorcoecsessesse.s .TThehye yfifirrsstt\nannaallyyzzee tthhee rreecceeiivveedd ssiiggnnalasls ((radiio signaall at tthhee aannteennaa orr viisiblee lligihghtta ta t htehec acmameerraa lelennss)), ,ffrroomm\nwwhihcihc hththe effeeaattuureres srreeffllectinng tthhe pproopagaattiion spaaccee arre extracted and ffiinnalllyy rreessoolvlveedd bbyy aalglgoorriiththmms\nto reealiizzeet htehes esnesnisnigngo fofth tehseu srurorruonudnidnignge nenvvirioronnmmentt..\nCoommpapraerde dwiwthit hvivsisoion-nb-absaesde dsseennsisningg,w, iwrierleelses ssseennssiingg sollutioons hhave uuniqque advanttageess such\nas high covveerraaggee [[33]],, pervasiveneessss,, looww cost,  aannd rroobustness unddeerr aaddvveerrssee llightt and texture\nsscceennarairoios s[[44]]..\n1.3 WWireirleelsess sSSeennsisningg AApplpilcicaattiionnss\nWWirierleelessss sseennssiinngg ssyysstteemmss aarree ccaappaabbllee ooff ppeerrcceeiivvininggc hchaannggeess inins usurrroruounnddiinngg eennvviirroonnmmeenntsts,,oobbjejeccttss,,\naanndd hhuummana nbobdoidesie.sI.nI nththisis ssuubbsseeccttiioonn,,  wwee ttaakkee ppaasssisvieveh uhmumaann sesnensisnigagapplpilciactaitioonnss aass aann eexxaammppllee,,\nwhhicichh rreeffeerrss to a hhumaan-nc-ecnetnetreerde dsesnesnisnign gapapplpilciactaitoion nththata tddooesens'nt’ trreqquuiirree the user too ccaarrrryy aannyy\ndeevviice. TTherefore, such an senssing appllicatiioonn isisa laslostoe rtmeremdeda sasd edveicvei-cfer-eferseeen ssienngsionrgn noonn--ininvvaassivieve\nsensinngg.PPasasisivvee hhuummana nsesnesnisnign geneanbalbelse sa awwidied eraranngeg eofo faappplilicatioons, inncluuddinngg ssmmart hhomeess,,\nsecurriity surveiillaannce, andd hheeaalltthh caarree..\nIIn smaratr thhomoem aeppalpipclaitciaotinosn,sp,apssaissviev ehuhmuamn asnensseinnsgi nrgecreogcnoigzneisz eas apepresrosno'ns’ sbbeheahvaivoiro roorr intentioon\nbbaasseedd oonn tthhee uusseerr'’s physsiical llooccaattioinonss, ,ggeessttuurreess,,aannd postures.  PPaassssiviveeh huumman senssiingg brringss a\nbbeetttteerr uusseerr eexxppeerriieennccee wwiitthhoouutt iimmppoossiinngg rreessttrriiccttioionnsso onnt htheeu suesre.rF.oForre xeaxmamppllee,,uusseerrss ccaann rreemmootteellyy\nccoonnttrrooll eelleeccttrriiccaalld deevviciceess, ,ee.g.g.,.t,e lteevliesvioisni,ocno,m cpomuptuetr,ero,rorw awsahsheer,r,b ybym meerreelylyp peerrfoforrmmiinngg ggeessttuurreess\niinn tthhee aaiirr[ 1[,1,3300]]. .L iLkiekwewisies,ew, hwehennp plalyayininggv vidiedoeog agammeess,,uusseerrss ccaann iinntteerraaccttw wiitthh ththeec ocmomppuutteerr bbyy\npeerrfforrmminign gdidfifffeerreennt tppoostsutureres s[[1111]]..\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 33\nIIn securriity surveeiillanccee apppllicatioonns,,trraaddiititoinonaallm meeththooddss aaddooppt i nifnrfarraerdedo roRrRGGB cameerraass to\nmonointiotro riilleeggal  inivnvaassioionnss,,p rportoetcetcvta vluaalubaleblper opproeprteiretsi,easn,dandde adleawli twhitehm emrgeregnecniceise.sH.oHowwever,  ccaammeras\narre conssttrraaiineedd bbyy tthhee llimiittedd ffiieldd ooffv vieiwew oor  bblloocckkage of oopaquuee oorr mmeteatlallilicc objjectts,  rreennderinng\ntheessee metehthodosd stot offaaiill wwhheenn tthhee ttarrggeett is  nnoot  inint hteheL iLnien-eo-fo-fS-iSgihgtht((LLooSS) area of tthhee ssuurrvveeillalnancceec acammera\noorr hhiiddddeenn bbeehihnidn dotohtehre robojbejcetcst.s . IInn ccoonnttrraasstt ttoo vviissuuaall ssuurrvveeiilllalnacnec,e,wwiirreelleesssss esnenssiningg tetcehchnnoollooggyy\nleverageess radio siiggnnalss,,w whhicchh pprroovidde oommnniiddiirreeccttionaall coverraggee arrouunnd dtthhee wwirierelelesss deevviicceess andd are\nless ppronee to bbloockageess..FFoor reexxamapmlep,l ew,iwreirlelsess sisgignanlasl sccaan nbeb euusesde dtoto ddeteetectc tiilleeggal ininttrruussiioonns [16,,2211]]..\nBeessiiddeess,,tthheey yccaan nalaslsoo bbee uusseed dttoo ddeetteecctt if  pprroopertieess hhaavve bbeen moovevde dfrforom mthtehieri roroirgigininala lppllaacceess..\nIn heaalltthh ccaarree aapppliliccaattiionnss,,ppaassisvivee hhuumamna snesnesninsgin cgacna bneblevlervaegreadg etod tdoetdeectte cvtivtiatla lssiignnaallss such as\nhuummana nrersepsipriartaitoion,n ,hheearatrbtbeaeta,t,gagiati,t,aandn dacacicdiednetnatla lffaalll. Speecciiffiiccaalllyy, ,ssoommee researcheerrss havee expplloiited\nWi-iF-iF issiignaalls too ddeteecctt hhuummaann rreessppiiratioon [220]  ffoorrs lseleepepm moonnittoorriningg..S oSmome oothher wworrkss [22, 28]]\nhaavvee eexxttrraacctteedd gaaiit ppatteerrnns ffroromm Wi-i-FFii siggnals ttoor erceocoggnnizzee hhuummaann iideennttiity. RRecently, Wi-i-FFii signalls\nhhaavve ebbeene nfufrutrhtehre rusuesde dtot odedteetcetc tacacicdiednetnatla lfafalllss to rreeliieevvee ththee nneeeedd ffoorr wwearabblle senssoorrss [9,1133]]..\n2 UUNNDDERESRTSTAANNDIDNINGG CCSSII\nChhananenle lssttaattee informaattiionn(C(CSIS)I )llayss the foouundaattion of mmosstt wiireless  sseennssiinngg tetcehchnniiqquueess,,iinncclluuddinngg\nWi-iF-Fi i senssing,LLTTEE sseennsisinngg,,anadn dsoso oonn.C. SCIS Iprporvoivdiedse spphhysyiscicaall channneell meeaassuureremmenetnst sinin ssuubbccaarrriier-\nlevel  ggrraannulariittyy, ,a nadndi ticta cnanb ebe aesailsyilayc caecscseesdsefdr ofmrotmh ethceo cmommodityy WWii--Fi netwoorrkk iintterface\nccoonnttrroolller((NIICC))..\nCCSSI Iddeessccrriibbeess tthhee pprrooppaaggaattiioonn pprroocceessss oofftthhee wwirireelleessss ssiiggnnaall aanndd tthheerreeffoorree ccoonnttaaiinnss ggeeoommeettrriicc\ninformaattiionn off thhe pprroopagatioon ssppace. T Thhuus, u unnddeerssttaannddinng tthhee mmappiingg relaatiioonnsshhipp bbeettwween CSSII\naanndd ssppaattiiaall ggeeoommetertriicc ppaarraammeteetresr sllaayyss tthhee ffoouunnddaattiioonn ffoorr ffeeaattuurree eexxttrraaccttioionn aanndd sseennssiinngg aallggoorriiththmm\ndeessiign..\nTThhisis sectioon ffooccuuses  oonn ttwwo mmaaiinsstream CCSSI Immodoedlesl:st:hteh erraayy-t-trraacciingg modoedle laannd dtthhee ssccaattterinng\nmmodoedle.l .TThhe ettwwo ommodoeldse lsaraer ebbasaesde doon nttwwo opepresrpsepcetcitvivese sooff unnddeerrssttaannddiinngg tthee signal pprroopagatioon\npprroocceessss.. TThhuuss,, tthheeyy hhaavvee uunniiqquuee aaddvvanatnatgaegse sanadn dapapplpy lytot odidfifffeerreenntt sscceennaarriiooss..\n2.1 RRaya-yt-trraacciing Mooddeell\nIn typical iinnddoor enviironnmmenetns,tsa, saisginganl aslesnetn tbyb ythteh etrtarnasnmsimttiettre rararrirvievse saat ttthee rrecceeiiveerr viia muultltiiplle\npaatthhss dduuee ttoo tthee refflleectiioonn oof  ththeer araddioiow wave.  AAlong eacchh ppaatthh,, the signall experriencceess a certain\natttenuuaattiionn aannd dpphahsaes eshsihfitf.t. Thhee rreecceeiivveedd ssiiggnnala liis thhe suuperrimpposoistiitioonn oof fmmulutlitpiplele aalliias versionss of\nthe traansmiitttted siggnal.  TThherefoore, t htehec ocmomplex bbasebandd ssignaall strreenngth meeaassuurered daat ttthee receiver\nat aa ssppecifificct itmimee ccaann bbe wrriitten as folloowss [∑︁266]]::\uD835\uDC41\n\uD835\uDC49 = ∥\uD835\uDC49\uD835\uDC5B ∥\uD835\uDC52−\uD835\uDC57\uD835\uDF19\uD835\uDC5B , (1)\n\uD835\uDC5B=1\nwhhereree +\uD835\uDC49=\uD835\uDC5Banadn dq=\uD835\uDF19a\uD835\uDC5Braer eththe eaammplpiltituuddee andd phaasse of  ththee\uD835\uDC5B=\uD835\uDC61Cℎmumlutlitpipaatthh ccommpopnoennetn(tn(ontoet eththaatt the\nmodoudlualtaitoion nsscchhemeem oefo fthteh essiiggnnaal l is iimmplicciitltylyc ocnosnisdiedreerde)d,)a,nadnd\uD835\uDC41# is tthhee tototatlaln unmumbber  ooffc ocmomponeennttss..\nOnn tthhisis baassiis, tthhee rreecciieevvee ssigingnaalls tsrternegngththi nidndiciactaotror((R(RSSSI)  ccaann bbee wwrittteenn aass ththeer erceeceivieveddp poowweerr indeecciibeells((dBB))::\nRSSIE= 1100llog2 k∥+\uD835\uDC49k∥22”\n)\n. (2)\nAAss tthee supeerrimppoosistitiion ofmmulutlitippaatthh commpopnoennetns,tsR,SRSIS SnIonto otnolnyl yvavraireiess rrappiidly wiith pproopagatioon\ndiistanccee chaanngigning gata ttthhee oorrddeer rooff thee signall waavveelelenngtght hbubtu talaslsoo fflluccttuaatteess ovveerr timee,, evenn forr a\nssttaattiicc llininkk..AA sslliigghhttc chhaannggee iinn ssppeecciififcicm muullttipipaaththc ocommppoonneentnst smmaya yrerseuslutl tiinn ssiiggnniiffiiccaanntt ccoonnssttrruuccttiivvee\noorr deessttruccttive muultltiipaatth commpopnoentesn,t sl,elaedaidnign gtot occonosnisdiedrearbalbel eflfluuccttuuaattiioonnss iin RSSSSII..\nThhee eessseenntitiaall drawbabcakc kofoRfSRSIS SiIs isthteh efafaililuurree to reflfleeccttt htehem muulttipipaatthhe efffefcetc.tT.Thhee wwirreelleesssc hchaannnel\nis mmooddeelleedd aass aa linnear teemmppoorraall ffiiltteerrt otof uflulyllcyh cahrarcatcetreizreizien diinvdiidvuiadluapla tphast,hks,nkonwownn aass cchhaannell\n4From RSSI to CSI: Indoor Localization via Channel RZhheeensngpg oYnasnegg,,YYii ZZhang, Guuooxxuuaann Chhii, and Guidong 2ZZ5h:a7ng\nChannel lmpulse Resporse\nOriginal Signal LOSPath\n.Path2\nPath2 Path3 Time\nTime Amplitude-Frequency Response\nTransmiltter LOS path Recelver\nDelayed,AteruatedMultijpath Signals\nFreqeuncy\nPath3 Phase-Frequency Response\nTime\nFrequenxy\nFig. 4. Multipath propagations, received signals, and channel responses.\nFFiigg..22..MMulutiltpiaptaht hprporpoapgaagtiaotniosn, sr, erececieviveedd ssiiggnnaallss,, aanndd cchhaannnneell rreessppoonnsseess..\ntime-invariant assumption, CIR h(τ ) is denoted as:\niimmppuulslsee rreessppoonnssee(C(CIRIR).)U. nUdnedr etrhteh eteitimme-ei-ninv∑︁∑vaNrairaianntt aassssuummptpitoionn,C, ICRI Rh1ℎt(?\uD835\uDC61i)si srreeppreresseenntetedd aass::h(τ ) = aie− jθ\n\uD835\uDC41 i δ(τ − τi), (4)\nℎ(\uD835\uDC61) = \uD835\uDEFC\uD835\uDC5B\uD835\uDC52\n−\uD835\uDC57\uD835\uDF19\ni=-1 \uD835\uDC5B\uD835\uDEFFe(\uD835\uDC61 − \uD835\uDF0F\uD835\uDC5B), ((3)\n\uD835\uDC5B=1\nwhere ai, θi, and τi are the amplitude, phase, and time delay of the ith path, respectively.\nwwhNehreiers eαt\uD835\uDEFCh\uD835\uDC5B=e,φ\uD835\uDF19t\uD835\uDC5Bo=,t,aanlndn \uD835\uDF0Fut\uD835\uDC5B=marbee trthheoefc ocmommupllteixp aaantnhteenanunadtioδo(nτ, )phisaassteeh,,aeannDdd ittriamcee ddeelltaay ofufnthcetni\uD835\uDC5BCo\uD835\uDC61pnℎa.tpEha,ta hcr,hersepismepceptciutvilveselelyy..\nN\uD835\uDC41r eiisps rtehsee tnoottsaallan dnuuemmlabeyerre dofm muulllttipatthh acnoddm δ\uD835\uDEFFp(1o·0)niiesntththe,e mDDiuriralatcic pddleielelttda bfuyntchteiocno.r ErEaecshp oimnmdpuuilnlssgee arempprelisteuntdtsse a\ndaeelnladyepdh mausulelt.tipath ccoomppoonnenetn,tm, umlutiltpilpilieedd byththee ccoorrreesspoonnddiinngg aammplpiltituuddee aanndd pphhaassee..\nIIIn nthtehffrreequfureeenncqycu yeddonmocamyina,idn ot,mhthea emimunl,utilttpihapetaht hccocanaususestser suffcrrteeiqqvuueeenncaycn-ysd-esleedlecectstiitvvreeu fcatdivineg,p wwhhaiicshe sissachlsaroracccttaeuriszeed\nbbyfyrcehcaqhnuanneelnn ecflyrf-ersqeeuqleueneccntyi cvryeersepfsoapndosienn(sgCeF,(RC)w.FhCRFi)Rc. hCiFsi Rsesischensatsrieaanlctlitayel rltyihzteeh deFoFuaorsuiertrihe rtertraCannshfsaofornmrnm eoflo fCFCIrRIe.RIq.tuI teccnooncnsyissistRtsse o- f\nbsoptohntshee (aCmFpRlit)u. dCeFrRespcoonnsseisatnsdotfhaemphpalisteurdees-pforneqseu.eFnigc.y2rdeesmpoonnssteraatneda pmhualtsiep-aftrheqscueennacryio,rteh-e\nts\no\nrap\nth\nno\n \nsnmse it.teFdi\npglsu\nit\nigrne\nde\na4\n \nl,s\nr\nthheowonres\nse\ncea\n \nivm\nan\neu\nd \ndltst\nh\niigp\ne \nna\np\nat\nh\nlh\nas\n, ap\ne\nnr\n \ndo\nrpestha\np\neg\no\nia\nns\nllt\ne\nuin\n. \nstg\nFi\nracto\n.\nivn\n2\ned\n \ncit\ne\nhi\nm\nao\no\nnn\nns\nn,\nt\net\nrhal re\nte\net\n \nsr\na\npa\n \non\nmu\nnslsem\nti\ns.it\np\nBt\na\noe\nt\ntd\nh \nhssCi\ncgeIRn\nnaaral\ni\nns\no,\nda\n \nCnFdthesrietceeidv esdi sniagln, atlhs, arencdeiivlelud sstirgantiv,e acnhda tnhne eillrleusstproantisvees .cGhainvneenl irnesfipnonitseesb.a Bnodthw iCdIRth a,nCd ICRFR\ndieesppieiccqtt uai vssmamlaaellnl-tscctaoleCe mFmuRllt.iAppaanthdh eCefffFefeRccttia snadnthda eraerFeuo suuesrdeidef orfrotrfir anfnei-nsgefr-oagrirmnaeindoefcdhC caIhnRan.enellm meeaassuureemeenntt.. Noottee thaatt\nthe BcootmhpplCelexIx RaammaplnpidltituCuddeFesR saadnnded paaincnttteentnhuneautsaimtoiona nlal-arserce acclooenncmceerunrlnetdei pdiainnt hCCIeIRRf faeancndtd CaCFnRFd,R ,awwhriehliwel eiadanenoltoyhtheures reppadairifro rof\nppacarhraaammnetneeterelsr smiinen attseeurrmrmses mooffe tnhtthe.esN isgointgaenlatplh oapwotweCerrIi sRiPsao nwPodewrCerDF eDRlealayaryPe rPowrfioiltfehi(lPreeD(sPPpD)Pea)cnatndtdoP Pocowowmeerrp SSlpepexeccattrmruummp lDDiteeunnsdsieitt,yy\n((PwShD)il).e. another pair of parameters in terms of signal power is Power Delay Profile (PDP)\naCnCIdIRR Paoanwnd deCrFCRSF pRaeracert ermueamseuaDrseuednr esbdiyt ybdye(PcdoSeucDpol)ui.npgli ntghet hteratnrsamnistmteitdt esdigsniganl afl rformo mthteh ererceecievievde dsisgignnala.l.\nSppeecTcioiffiicsaulmlyy,,uinnp t,thhceeh tatiminmnee ddlormeaaisnipn,o ,nthseee riescetioveRd SsSigInawall h\uD835\uDC5Fra(1\uD835\uDC61tt)?aiis rttahhien cbcooonwvoolilsuttitioon aoffs utrrnaabnesmaimtitt,edwd hsiegrneaall\ns\uD835\uDC60c1(ot\uD835\uDC61)?m aapnnodn cehnatnsnneoelfl dimmifppfueulrlsseeen rtewspaovnnsesele ehnℎ1g(t\uD835\uDC61t?)h::s are separated. Channel response possesses finer-\ngrained frequency resolution and equivalently higher time resolution to distinguish\nmultipath components, yet at the cr\uD835\uDC5Fo1(s\uD835\uDC61t)?o=fs\uD835\uDC60s1(l\uD835\uDC61ti)g?⊗ht1ℎtm(?\uD835\uDC61)o,,dification of firmware or hardwar((e44))\nwwhoihncihco hfifni-ndtihdcieac-tasethse setlthfhepe rlraeectcifioeevrvemedd ss,siijgunnsaaltl aiss gtgheneeprarttiesdm fruosme dtthhteeo ttdriasnpssmemirtis tessiitghnneaalsl uafntelirg ihitttp .rpTorapopabaglgeaatIiinonggff fefrrrosomm\nmmualubtlitripipeaatfthch ocmhaapnnannerelisl..on of channel response and RSSI. Note that although CIR resembles a\nseSqimueilnacrelyo, finRtShSeIf,rethqueeunncdyedrolymianign,ttimheerreecseoivleudtisoingnisalmspuecchtrhuimgher, and thus differs from\nRSSiSmiIlsaerqlyu,einn cteh-be afsreedquleonccayl idzoamtaioinn,[tFhea nrgecaenivdeLd isnig2n0a1l0 s].pOecntrtuhme \uD835\uDC45Ro1(tf\uD835\uDC53hi)esi rsthhthae enmdmu,luittlitpiisplilpiccoaasttsiioiobnnl eooff\ntthoe otrbratanansismnm irtattewedd rsesigicngeanival les pdsepsceitgcrutnrmaulm\uD835\uDC46p (So\uD835\uDC531w)faeanrndda ttththe echPaHnnnYeells afrrmeeqqpuuleinncgyr raeetsesppwonitshe \uD835\uDC3BaH1(mf\uD835\uDC53?)o::dified wireless\nadapter [Golden and Bateman 200R\uD835\uDC4571(]\uD835\uDC53.f)?T=oS\uD835\uDC46a1(v\uD835\uDC53fo)Hi\uD835\uDC3Bd1(fa\uD835\uDC53.m) .biguity, we restrict the concept o(f5)\nRSSI as the value reported from the MAC layer in this survey.\nNootete tthaatt thhe \uD835\uDC45R(1\uD835\uDC53fa)nadn Sd1\uD835\uDC46f?( \uD835\uDC53a)raer ethteh eFFouoruireire rttranssfforrm ooff the reecieevveedd ssigignnaall\uD835\uDC5Fr(1\uD835\uDC61t)?andd the trraannsmiitted\ns3ig.4n.aalDl \uD835\uDC60es(1r\uD835\uDC61itv)?i rnregesspCpeehccattinvivneleylly.R.InIenst hptiohsinsws eawayy,,E qEnqn..44 aanndd EEqn.. 55 ffoorrmms a bbeeautiffuull“ s\"ysymmmeetrtriicc\"”rreellaattiionnsshhiipp..\nInAsts hdeeemtmoimnosnetsrdtaroatmetedad iiinn, Ethqnen..4r4e acanendidv eEEqdqnns.i5.g,5nC,IaCRlI Rrc(atcn)a nibsebt ehdeedretirevimveedpd offrraolm ctothhneev odleucctoinnovnvoololuuftttiiroann ospmeerirtatteiodon\nosffi grencaelivvse(dt) aannd dtrcahnasnmintiettleedid mssipigunlaaslles,raaennsdpd CoCFnRFs Recachna (ntb)e:b terteraetaetde dasa sththe erraattiioo off the reeceivved and the\ntransmiittted spectrums.s. Coommpapraedre dwiwthi tmhulmtuipltliipclaictaitoino,n ,tthhee ccoonnvovloultuitoionn opoepreartaitoionn isis ggeenneerraallly\ntimmee--ccoonnssuumimngin. gT.hTehrefroerfoe,r ei, nin mmosots tcacsaessre,(s t,)tth=ee sd(eetvv)ii⊗ccee hf(otc)u.sseess on calculatinng tthhee CCFR,, aand thhe (C5CI)R\ncan Abceec ofurrdtihnegr ldyd,ertihvveedr fefrcroeommiv tehhde CsCiFgRn auslsiisngpg etchter uinnmverRs(e fFF)ouisriseirm ttrparlanynssftfohorrmem[m[114u4]]l:t: iplication of the\ntransmitted signal spectrum Sh( f ) and the channel frequency response H( f ) in the\nℎ1(\uD835\uDC61o)= 1\n=1F \uD835\uDD091+−1s{ \uD835\uDC461∗f(\uD835\uDC53o)R\uD835\uDC45f(e\uD835\uDC53g)}., ((6)\n\uD835\uDC43\uD835\uDC60\nACM Computing Surveys, Vol. 46, No. 2, Article 25, Publication date: November 2013.\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 55\nwhheerree F\uD835\uDD09 −11dedneontoetse stthhee inverse FFoouurriieerrt ratnrasnfosrfmor,m∗, isisth ethceo ncjoungjautgeaotpe eorapteorra,taonrd, \uD835\uDC43a\uD835\uDC60nadp?proximaattes\nthe traansmiitttted siggnal ppoweerr..\nAlltthoouugghh tthhee ddeerriivaattion of CCIRR aand CFRR iis innddependeenntt of thhee mmodduullaattion schemee,,itit coulld\nbee moorere ccoonnvveneineinetn tttoo impplleemmenetn t hthe epprroocceesss oonn ccoommmemrceiraclia ldedveivciecse swwitihth ssppeecciiffiic mmodduullaattion\nschemmese.s . Forr thhe wwireelleessss tsatnadnadradrdw whheerreet hteheo rotrhtohgoognonaallf refqreuqeunecnycyd idvisviosniomn omdoudlualtaiotnio(nO(OFFDDM))\nis aaddoopted((ee..g.,,802.1111a/gg/nn/aac/aaxx),,tthhee aammpllituude aannd phase samppleledd oonn eeaacchh ssuubbccaarrriieerr can be\ntreated aass aas asmamppleedd vveerrssioionn oofft htehes igsniganlaslp escptercutmrum\uD835\uDC46((1\uD835\uDC535)°. O.Onn ththisisb absaisi, sa,saa msapmlpeldedv evresrisoinonooff\uD835\uDC3B 1(5\uD835\uDC53°)\ncan bee easilyy ggeettf rformom ththeeO OFFDDM rreecceeiivveerrss..\nReecceennt taaddvvaanncecse siinn the wiirreless ccoommmmunuintiyt ymamkae kieti tpposossisbiblele to get tthhee ssaammpled versioonn ooffC CFFRR\nfrom ccoommmemrceiraclia-lo-fofff--tthhee--sshheellff((CCOOTST)S W)iW-Fi- FNiINCsIC. sT.hTeh exetxratrcatcetde dCFCRF Rarea reofotfetne nrerfeeferreedd ttoo ass a\nseries ooffc ocommplex numbebresr,s ,wwhihcihc hddepeipcitcsts tthee amplpiltituuddee aanndd pphahsaes eoof feeaacchh ssuubbccararriieerr::\n\uD835\uDC3B1(5\uD835\uDC53°\uD835\uDC57 ) ==jj| | \uD835\uDC3B15(9\uD835\uDC53°\uD835\uDC57 ) |j|j\uD835\uDC524∠\uD835\uDC3B15(°\uD835\uDC53\uD835\uDC57 )., (7)\nw{hhereere 1\uD835\uDC3B59(°\uD835\uDC53\uD835\uDC57 )isis a saammpplle aattt htehe\uD835\uDC57 \uD835\uDC61ℎ ssuubbccaarrrrier,,ww ithh\\∠ \uD835\uDC3B15(°\uD835\uDC53\uD835\uDC58 )dedneontoetse siitts pphase. Moossttrreesseeaarrch paperttreat tthhee CCFR at saampplleedd} aatt diffffeerreenntts usubbccaarrrieiresrsa sasth tehCe SCISdI adtat, aw, hwichhiccha cnanb ebwe rwirtitetnteans a\uD835\uDC6Fs N==\n\uD835\uDC3B1(5\uD835\uDC53\uD835\uDC57°) |j\uD835\uDC5792∈外[1?,N\uD835\uDC3D,],w\uD835\uDC57he∈rNe d, ewnhoetres\uD835\uDC3D tdheneo teosttahle tnoutamlbneur mobfe rsoufbscuabrcraireriresrs..\nThhee rraayy--ttrraacciingg mmodoedle lesetsatablbilisshheess tthee relatioonnship betweeeenn ggeeomoemtreitcri cprporpoepretirteise soof ftthhee ssignaall\nprroppaaggataitioonn ssppaacce eaannd dtthhee CCSIS Iddaatata..ThTehoeroetreitciaclallyly,,byb yanaanlaylzyiznign gththe emmulutiltpiaptaht hsisgignnala,l, varriouss types\noff geommetertircic iinnffoorrmmataitoino(ne.(ge.g,. ,tthhee pprroopapgaagtaitoino ndidsitsatnacnec,e ,tthhe erreeffllecttion pooiinttss)) can be deerriivedd..\nThheerreeffoorree,, the ray--tracing moodedle liiss widideleyly aaddopotpetde dini nwiwreirleelsess sloloccalailizzaattiion anndd ttrraacckkiinngg ttaasskkss..\nIn addiitioon,  mmanyy wwirireelleessss dettection and senssiingg sysstems saallssoo exttract ggeometertriicc features based\nonn thee ray-tracinng mmooddelesls,, and further pput tthheemm into mmaacchhiinnee llearrniingg mmodoedlesl sffoorr rreggrreessssiion orr\nclassiffiiccatioon..\nA ssiigniiffiiccaantddrraawwbabcakc kofo fthteh eraray-yt-rtraacciinngg mmodoedl eilsi stthhaatt it  isisb absaesdedo nona as imsipmplelee nevnviriornonmmenttall\nassummptpitoion.n .TThhereerfeofroer,ei, nin aa ccoommplpelxe xenevnivriornomnemnte nwhtewreh etrhee thsiegsniagln aulnduenrdgoeergs odeisfdfriffacrtaicotino noro risi sddiiss--\nturrbeedd bbyy vvaariroiousu sttyypepse sofonfonisoei,s ei,tit beeccoomems edsidffiffiiccuultl ttto accurraatteellyy reccoovveer raalll tthhe ssppatiaalli nifnofromrmatioon\nbyy onnllyy llimiitted CSSII daattaa..\n2.2 SSccaa ttereirinngg MModoedlel\nTThhee aabboovve-em-menetniotinoende drarya-yt-rtarcaicnign gmomdeold eclhcahraacratecrteirziezse sssiiggnnaallss wwiitthh mmulutltiippllee pprrooppaaggaattiioonn ppaatthhss,,\nwhhicichh mmaya ynonto tapaplpyl ytoto rriich--scatterinngg eennvirroonnmeenntsts.. To enablle wwiireleessss sesennssininggi ninm moorreec ocommplex\nscenaarriios, some ewworokrsk s[2[2,22,72]7 ]esetsatabblilish the sccaatttteerrinigngm moodel  foforrC CSSIIm meeaassuureemmeennttss wiitth Wi-i-FFii..\nTThhee CCSIS Iddaattaa rreeppoorrtteedd bbyy ccoommmmoodidtityy WWi-iF-Fi NIC can be modeled as:\n∑︁i NIC can be modeled as:\uD835\uDC41\n\uD835\uDC3Bs(\uD835\uDC53 ,.\uD835\uDC61) =e-\uD835\uDEFC\uD835\uDC5Bu(\uD835\uDC53 ,5\uD835\uDC61)\uD835\uDC52c−\uD835\uDC57\uD835\uDF19s\uD835\uDC5B (\uD835\uDC53 ,e\uD835\uDC61 ) , ((88))\n\uD835\uDC5B=1\nwwhehreer#e \uD835\uDC41is isthteh etotottaall nummbebre roof frrefflleeccttioionnp paaththss, ,\uD835\uDEFCU\uD835\uDC5B is tthheea mampliittuuddee aattetneunuaatitoinono fofppaatthh\uD835\uDC5B=, q\uD835\uDF19=\uD835\uDC5Bisis the\ncorresponddiingg phhaassee..\nAss sshoowwn nini nFFigig.3. ,3t,hteh essccaattteerriingg modoedle lttrreeaattss all the oobjectss inini nidnodoorre nenvvirioronnmmennttss as ssccaattteererresrs\nthaatt diffffuusee tthhee ssiiggnnalss totoa all ld irdeirceticotniosn.sT.h TeheC SCISIo bosbesrevrveedd bbyy tthhee rreecceeiivveerr isisa daddeedd uupp wwiith the\npoorrttiionnss ccoonntrtriibbuutetedd bby ytthhe essttaattiic (ffuurnnituure, waallls, eettcc.).)a nadndd ydynnaamiicc(a(arrmms,sl,elgesg, s,etect.c).)scsactateterreerrss..\nIntuiitivvelyy,,e aeacchh scscaattetreri sidse deememeedd aassa av ivritrutaulaTl xT.xS.uSucchh mmoddeelliingg caann bbee aapppplilieedd tto typiicall iinnddoorr\nsscceennaarriiooss,, wwhehreer etthhee rroooomms saraer eccrroowwdedde dwiwthi thfufrunrintiutruer,ea,nadn dsisginganlasl sccoouludld pprrooppagaagtaet eiinn aallmmosots taallll\nddiirreeccttiioonnss..OOn nththisi sbbaassiiss,, wwee ccaann ddiissmmisiss stthhee ssppeeccififiicc ssiiggnnaall pprrooppaaggaattiioonn ppaatthh aannd donolnyl ystsatatitissttiiccaallllyy\ninvesstigate tthhee rerelaltaitoinosnhsihpipb ebtewtweeenn ththeeo obbsseerrvveedd CCSI  aanndd tthhee mmoviing speeedd..\n6 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nStatici c\nSccaattterer\nDyynamiic \nSSccaattteerrerr\nTx\nNLOS\nNLOS\nRx\nFig. 3. Wi-i-FFi i signaalls inn rricihch-s-csacatttetreirnignge nevnivriornomnment\nWWe eddeceocmopmospeo stehet hoebsoebrsveerdv eCdSIC iSnItion tto∑︁heth peoprtoirotinosn csocnotnr∑︁itrbiubtuetde dbyb yinidnidviivdiudaula lscsactattteerreerrss::\n\uD835\uDC3B (5\uD835\uDC53·, \uD835\uDC61) ==∑。\uD835\uDC3B1\uD835\uDC5C5(\uD835\uDC53·, \uD835\uDC61) +C.∑1\uD835\uDC3B5\uD835\uDC5D·(\uD835\uDC53 , \uD835\uDC61e), ((99))\n\uD835\uDC5C∈Ω\uD835\uDC60 (\uD835\uDC61 ) \uD835\uDC5D∈Ω\uD835\uDC51 (\uD835\uDC61 )\nwhhereere sΩ'C\uD835\uDC60 (\uD835\uDC61a)nda nad1CΩ \uD835\uDC51ar(\uD835\uDC61e) tahre tsheetss eotsf osftsataitcic aanndd ddyynnamaimci cscscaattterers, \uD835\uDC3Bp1\uD835\uDC5D5(·\uD835\uDC53 ,C\uD835\uDC61i)si stthhee ppoorrttiion of\noobbsseerrvveedd CCSIS Iccoontnrtiribbuutetedd bbyy ?\uD835\uDC5Dt\uD835\uDC61hℎ ddyynnamaimc icscsactatteterreerr.. For eeaach ssccaattteerreer,r,ththeed idffifufsuesdedc ocmomppoonentts\nunnddeergrgo oaannonoynmyoumso pursoparogaptaigoant ipornocpersosceess saensd aenvdenetvueanltluya alldyd audpd autp tahtet hrecreicveeirv.e rT. rTyr ytot oaa tthrreeee--\ndiimenesnisoinoanl aclocoorodirndaitnea tweitwh itihtsi tosroigrigni nata t hteh e?t\uD835\uDC5Dh\uD835\uDC61 ℎscsactattetreerre raandn ditists zz--aaxxiiss align wiitthh tthee sscaatttterrerr'’s\nmmovoivnign gdidrireeccttiioonn,,tthhee rreepprreesseenn∫ttaattiioonn ooff \uD835\uDC3Bp\uD835\uDC5D15(·\uD835\uDC53 ,C\uD835\uDC61i)si sffuurrtthheerr ddeeccoommpopsoesde dasa sfofolllloowws s[[2277]]::2\uD835\uDF0B ∫ \uD835\uDF0B\n\uD835\uDC3B1\uD835\uDC5D (5\uD835\uDC53·, \uD835\uDC61)c=-厂\"J。”ℎp\uD835\uDC5DU(\uD835\uDEFC·, \uD835\uDEFDv,.\uD835\uDC535, \uD835\uDC61°) epxp'( −9\uD835\uDC57:\uD835\uDC585\uD835\uDC63\uD835\uDC5D,ccooss(S\uD835\uDEFCU)\uD835\uDC61C)ad\uD835\uDEFCuda\uD835\uDEFDv,. (10)\n0 0\nwhhereere:=\uD835\uDC582C=·2_\uD835\uDF0Ba/n\uD835\uDF06d a_nids \uD835\uDF06thise thsiegsniagln awlawvealveenlgetnhg,thE , i\uD835\uDC63s\uD835\uDC5D itshteh espsepeede dofo ftthee?\uD835\uDC5Dth\uD835\uDC61ℎ ddyynnaammici cssccaattterer,,\uD835\uDEFCU\naanndd V\uD835\uDEFDaraer etthhee aazziimmuuthth aannd deelleevvaattiioonn aanngglleess,,  eexxpp(1−9:\uD835\uDC57\uD835\uDC58F \uD835\uDC63c\uD835\uDC56 ocso1sU(C\uD835\uDEFC )r\uD835\uDC61e)prreepsreenstesn ttsheth pehpahsea ssehsihfitf tooff tthhee\nssiiggnnaall oonn ddiirreeccttioinon( \uD835\uDEFC'U,·\uD835\uDEFD)V..ℎp\uD835\uDC5D1(U\uD835\uDEFC·, \uD835\uDEFDV·, \uD835\uDC535,°\uD835\uDC61)Gitshteh epoprotritoion noof foobbsseerrvveedd CCSIS Iccoonntrtriibbuutteedd bbyy?t\uD835\uDC5Dh\uD835\uDC61 ℎssccaatttteerreerr\noonn ddiirreeccttiioonn ('\uD835\uDEFCU,·\uD835\uDEFD)9..IInnhheerriitteedd frformom ththeep phhyyssiiccaal lp rporpoepretrietsieosf EofM EwM awvaevses[ 8[],8ℎ],\uD835\uDC5Dp('\uD835\uDEFCU,·\uD835\uDEFD,V\uD835\uDC53·, \uD835\uDC615)9cCaann bbee\nvieewwed as aac icricruclaurllayr-lsy-msmymemterticriGca uGsasuisasniarann rdaonmdovma rviarbilea.bFloer. ∀F\uD835\uDC5Do,r\uD835\uDC5E 8∈?·Ω\uD835\uDC51@ adnadnd( \uD835\uDEFC'1U,·\uD835\uDEFD1V)?≠<1(U\uD835\uDEFC·2,V\uD835\uDEFD°2),,\nℎp\uD835\uDC5D'(u\uD835\uDEFC·1,V\uD835\uDEFDY1·, \uD835\uDC535,·\uD835\uDC61)Giissi nidndeeppeennddeenntt ooffℎ \uD835\uDC5Eq1(U\uD835\uDEFC·2,V\uD835\uDEFD·2, 5\uD835\uDC53·, \uD835\uDC61℃).\nBBaasseedd oon nEqEnq.n9. a9nadn EdqnE.q n1.0,1w0e, waree aarbelae btleo tdoerdievrei vtehteh setsattaitsisttiiccaall pprrooppeerrttyy bbyy aannaallyyzziinngg tthhee\nauttocorrrelatiioonn fufnuncctitoinon((AACCF) ooff\uD835\uDC3B 1(5\uD835\uDC53·, \uD835\uDC61C)[[88]]::\nda'5·∑Cgov,[\uD835\uDC3BC(c\uD835\uDC53 ,o\uD835\uDC61),y\uD835\uDC3B>(\uD835\uDC535, \uD835\uDC61-+ \uD835\uDF0F)5]\uD835\uDF0C\uD835\uDC3B (\uD835\uDC53 , \uD835\uDF0F) ≜ Cov[\uD835\uDC3B (\uD835\uDC53 , \uD835\uDC61), \uD835\uDC3B (\uD835\uDC53 , \uD835\uDC61)]\n2\n2\uD835\uDC5D∈2Ω ssmc(\uD835\uDC58\uD835\uDC63c\uD835\uDF0F)\n(11)\n\uD835\uDC51 \uD835\uDC5D\n= ∑\uD835\uDF0E (\uD835\uDC53 ) in\n2 ≈Esinc(\uD835\uDC58e (11)\n\uD835\uDC63\uD835\uDF0F),\n\uD835\uDC5D∈Ω \uD835\uDF0E\uD835\uDC5D (\uD835\uDC53 )\uD835\uDC51\nwwhehreer eCCovo》v[··, ·]asis tthhee ccoovvaarriiaannccee bbeettwweeeennttwwo oraranndodmo mvavriaarbialbelse,sf,2\uD835\uDF0E12\uD835\uDC5D5(°\uD835\uDC53 i)si stthhee vvaarriiaannccee ooffℎ p\uD835\uDC5D'(U\uD835\uDEFC·, \uD835\uDEFDV,·\uD835\uDC53 5, \uD835\uDC61°),,C\nssiinncc1(:Eg°=sismink(r\uD835\uDC58°\uD835\uDC63\uD835\uDF0F,)\uD835\uDC58\uD835\uDC63\uD835\uDF0F) = a, nadngd i\uD835\uDF0Fsi sththe ettiimmee llaagg..\uD835\uDC58\uD835\uDC63\uD835\uDF0F\nFFoorr somme ehhumuamn aanctaicvtivtiteiess llike faallla nadndw waallkkiningg,,wwe can assumee tthhaatt the dynaammici cssccaattterers\nare maaiinlly on thhe ttoorrssooa nandd hhaavvee sismimiilalrars psepeedesds\uD835\uDC63 . ET hTuhus,s,EEqqnn. 11 issa papprrooxximimateedd wwithh aa mmuch\nsimpplleerr foormm::d\uD835\uDF0CH\uD835\uDC3B15(·\uD835\uDC53 ,g\uD835\uDF0F )si≈ncs1in:Ecg(°\uD835\uDC58\uD835\uDC63.\uD835\uDF0FU)s.iUngsi ntghitsh ifsofromrumlautliaotino,nw,e wheavhea vqeuaqnutaintatittiavtievleyl yesetsatabblilisheedd the\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 7\nSpeed(m/s) 454 WWalaklkiing Faalll\n3\n2\n1\n0\n100000 20000 33000  440000 550000 660000\nTiime((mss))\n0  \nTime Lag(ms) 02品子品0品吕 Fiirst PPeakk-\n40 \n60 \n80 \n100\n10000 20000 33000  440000 550000 660000\nTimme(mss))\nFFiigg.. 44.. TThhee eessttiimmaatteedd ssppeeeedd aanndd tthhee AACCF Fofo fCCSIS Issiiggnnaallss\nrelatiioonnship bbetwweeeenn tthee huuaammn nspsepeede adnadn tdheth AeCAF CoFf oCfSIC SInI. Ipnrapcrtaictei,c et,hteh espsepede do \uD835\uDC63isis exttracted by\nmatacthcihnign gthteh efifirrsstt peakk off thhe sinnc(1\uD835\uDC65x?) fuunctioon and the ffiirrssttp epeaakk ooffA ACCF:\n\uD835\uDC650 \uD835\uDC650\uD835\uDF06\n\uD835\uDC63°= = , (12)\n\uD835\uDC58=\uD835\uDF0F0ko2=\uD835\uDF0B\uD835\uDF0F20\nwwhehreer exo\uD835\uDC65 0isis tthhee ccoonnssttaannt tvvaalluuee rreepprreesseentnitning gththe ellooccaatitioonn oof ftthhee ffiirrssttp peeaakk ooff ssinincc(1\uD835\uDC65x)?ffuunnccttiioonn,,T\uD835\uDF0Fo0 iiss\nthe timmee lag correspoonnddining gtoto tthhee ffiirst  ppeeaak of tthhee AACFF..\nAss aa straigghhtfoorrwwaarrdd exaammplpel,ew,ew leelte ta avvooluluntnetere rttoo wwalaklk aannd dffaalll inn aah heeaavviilylyf ufrunrinsihsehdedr oroomm\nandd eexxttrraacctt thhe ssppeed wiith thhe CCSI ccoollleecctteeddf rformom aaW W i-Fi  lilniknkl olcoactaetdedin iann aontohtehrero roomom..AAs iisss hsohowwn\nin Figg. 4,  eevveenn wwithh nnon-linnee-oof--ssigighhtt(NNLooSS)) occcllusionss andd mulutltiippaatthh ppoollluttion, tthhee wwalkinng ssppeed\nandd ffall  ssppeeeedd aarree eesstitmimaatteedd ccoonnsisstteennttlyly, ,ddeemmoonnssttrraattiinggititss robuussttnneesss tto envviironnmmenetnatla ldidviveresristityy..\nTThhe essccaattteerriingg modoedle lisis geenneerraallly appplliicablle too vvaarriioouus  ssppeeeed-orieennted sseensinng Thee scatterinng\nmmodoedle lgegneenrearlallyl yaapplpileiess tto varriiouss speeedd--oorriienntteedd sseennssiinngg ttasskss suchh ass inntrruusioon ddeteectiioonn aannd\nfall  ddeetteeccttioinon..AAs a ssttaattisitsitciaclaml omdodeel,li,tith ahsasu nuinqiuqeuea davdvaanntaagges iinn ccoommppllexx scenaarriioss..\nHHowoewvevr,etr,hteh escsactatteterriinngg mmodoedle lffaaiils  totoconstruuct  aac ocrorersepsopnonddeennccee bbeettwween CSI aannd ggeomeettrriic\npaarraammetetresr sdidriercetcltyly, , anndd tthhuus siiss geenneerarlallyy nnoot taapppliliccaabblele ttoo prreecciissee locallizatioon and trackiingg ttaskss..\n3 CCSSII DATA CCOOLLECTIOON\nCSSII ddaattaa ccoolllection is  tthhee fifrisrtsts testpepto twoawardrdt htheei mimppleemmeennttaattiionn ooff a prraaccttical wwiireless  sseennsinng\nsysstem.. Thhiiss sectioonn iinnttrorodduuccees  oonne ooffthhe mmoosstt faamoouus sWWi-iF-iF isseennssiinngg ddaattaasseettss,,tthee Widiadra3r 3ddataataseset,t,\nso that beginneerrss cann qquuiicckkllyy ggeett sstart wwiith wiirreless seensinng wiitth mininimimala lefefffoorrtt.. Thiis sectioon\nallso inntrrooducceess threee off thhe mmoosstt famouosu sCSCIS cIoclollelcetcitoionn ttoolosls tthaatt researrcchheerrss ccaann uussee ttoo try outt\ncollleectiinngg CCSSI  ddaattaaw wiiththC COOTSS NIICCss..\n3.11 WWidiadra3r 3DDataatasseett\nOppene ndadtaatsaestests aarree essential  totop rporvovidiedec ocmompprehenssive knowwleleddgeg effoorr mmodoedle lttrraaiinniingg aanndd aa unniiffiied\nbbeenncchhmamrakr kfofro rmmodoedle cl ocmopmarpiasroisno.nOp. eOnp deantdasaetatsse tasrea reeveevne nmomreo rneenceescseasrsya ryini nththe ewwirierelleessss sseennssiinngg\nffiieelldd bbeeccaauussee RRFF ssigignnaallssa raerem moorrees esnenssitiitvieveto tdoe vdeicveisceasn dandde pdleopylmoyemnentte nevnviriornonmments.  HHoweevveer,r,\nthe absennccee ooff high--quuaalliity and large-scale ddaataasseetss hhaassb beeccoommee the botttleeneck that hhinndered the\npprrooggreress sooffwiwreirleelsess ssseennsisning gtetecchnhonloolgoyg.y E. xEixsitsitning gwiwrierleelses ssseennsisning gddataatsaestests ssuufffferr frroom smalall scales\nandd llimiited scenaarriios inn 2200119 wwheenn wwe estsatarrtteedd tto buiild tthhe WWiiddaarr33 daattaasseett.WWidiadra3r23 2isis aa wirireellessss\n22hhttttpp::////ttnnss.t.htshss..ttssiningghhuuaa..eedduu..ccnn//wwiiddaarr33..00\nTime Lag(ms)\nSpeed(m/s)\n8 Zheng Yang, Yi  ZZhhaanngg,,GGuoxuan Chi, and GGuiddoonng ZZhhanng\nsenssiing dattaset ffoorrh huummaann accttivittyy rreeccooggnnittioionn..IItti sicso lcloelcltecdtferdo mfrocmo mcommmooddiitytyW Wi--FFiiNIICss in thhe\nform oof fRRSSIS Iaannd dCSCIS.I .IItt connssiists of 22558,00000 iinnssttaannces oof  hhaand gesturress wiitth a duurraattiionn ooff 8,620\nmininuutetess aanndd ffrom 7755 ddoommaianisn.sW.iWdarid3a ri3s isos ofafra rtthhee llargest aannd mmoosstt compprerehhenesnisvive eddaatatasseett in\nthis fifeieldlda nanddr erceeceivievessw wiiddeessppreead attteenntiioonn ffrroomm researcheerrss all  oovveerr ththeew worldd.  WWiidarr33 daattasseett\niiss ppuubblliiccllyy aavvaaiillaabbllee aattI EIEEEEE DDaattaaPPoorrtt((oofffificciiaalld daattaar erpepoossiitotorryy))a nanddc coonnttiinnuueess eevvoollvviinngg ttoo ccoonnttaaiinn\nmoroer etytpyepse sofo facatcitviivtiitieess..\n3.22 PPiiccooSScceenneess Platffoorrmm\nPPiiccooSScceenense s[1[12]2 ]iiss a versatilleea nandd ppoowweerrffull miiddddlleewwaraer efofor rCCSIS-Ib-basaesde dWiW-Fii- Fsiesnesnisnign grerseesaeracrhc.h I. tI tiis\nonnee ooff the very few ttooollss that suppoorrtt the laateestt 880022..111aacc//aaxx pprrootoocols. I tItsu spuppoporrtstsm maanny prevallentt\ncommmerecricaiall NIICss,,iincludinng QQualcoommm AAththereoross AARR939030(0Q(CQAC93A0903)0,0I)n,tIenlt eWl iWreirlelses sLLiinkk 5300\n(IWWLL553030)0,),IInntteell AXX2200 0aannd dIInntteell AAX221100..PiPcicooScSecneense sssuuppoprotrst suupp ttoo 27 NIICss to wworrk conccuurrrrenttly\nfor ppacket iinnjejecctitoinona nadndC CSSIIm meeaassuureemmeenntt..\nPPiiccooSScecneense issi saracrhcihtietcetcutruarlallyl yvevresrastaitliele aannd dflfleexxiibbllee.. It  eenncapssuullaatteess alll tthhee llooww -levell feeatures innto\nuunniiffiieedd aanndd hhaarrddwwaarree--iinnddeeppeenndednetn tAAPIPsI saandn dexepxopsoesse sththeme mtot oththe euupppepre-rl-elevveell pplluuggiinn llaayyeerr..AAss aa\nrressullt,  uusseerrssc acnanq uquicikcklylyp rportoottoytpypeet htehierior wonwnm meeasuremeennt tpplluuggiinnss..\nTThhee ddaattaa rreeppoorrtteedd bbyy PPiiccooSScceenneess ccaann bbee ppaarrsseedd iinn MMAATTLALBA aBs aas astsrturcutc,t , ccoonnttaaiinniinngg tthhee CCSSII ddaattaa\noff diffffeerreenntt ppaacckkets,,subccaarrrriiers,  aannd aantennaass.. Thhee ssttrucctt alssoo iinncclluuddes oothher hhelppfuul  ininfoforrmmation\nsucchh aass timmeessttampsp,s ,RRSSIS,I , anndd tthee signaall-to-noiise rraattiioo(SSNRR))..\nThhee hhoomempeagpea3g eo3f otfhtihsi sttoool lccaann bbee acccceesssseedd for moorree ddeettaaiiled innfoorrmmaattion..\n3.3 IInntteell 5300 NIIC CSSII Toooll\nTThhiiss CCSSII TTooooll [[77]] isisb ubiulitlutp oupnonth tehIen tIenltWel iFWiiFWi irWeilreeslseLssin Lki5nk3 05038000820.121.n11Mn IMMIMOO rraaddiiooss,,uussiinngg\na moodidfiifieedd ffiirmmwwaraer eanadn dthteh eopoepne-nso-suorcuer cLeinLuixn uwxirwelireeslse sdsridvreirv.e rI. tIt iincclluddeess alll  tthhee ssoofftwtwaaree aannd\nscrriptts requiirredd tto colllect,  rreeaadd,  aannd parse CSSII..\nThhee IIWL5L350300 0prporvoivdeidse s80820.21.1n1 nCSCIS oIfo f303 0ssuubcbacraririeerr grrouuppss.. Each grrouupp ccoonnttaaiinnss 2 adjacent\nsubccaarrrriers  ggiviveenn2 020M MHHz bandwwididtthh oorr 4 ggivveenn 4400 MMHzz baannddwwiditdht.h .EEaacchh CCSSI I samplpele iis aa ccoommplex\nnuummbebre,r ,wwitithh aa siggned 8-bittr erseosloultuitoinonfo rfobro tbhotrhe arleaanld ainmda igminagairnyaprya rtpsa.rOtsn.eOnCeS ICSreIc orercdoirsda i\uD835\uDC34s ×a 3300\nmatartriixx,,wwhehreer\"e i\uD835\uDC40s itshteh enunmubemrb oefr opfaiprasi rsofo fttrraannssmmitittiinngg aanndd rreecceeiiving antennnaass..\nThhee hhoomempaegpea?g eo4f otfhiths istotolo lccaann bbe eaaccecsesesde dffoorr ddeettaaiilled innformaattiionn..\n3.4 AAththereoros sCCSSII Toooll\nAtthheerrooss CSSII Tooooll[[2233]]isi saann ooppeenn-s-soouurcrec e880022..1111nn mmeaesausruermeemnte natnadn edxepxerpiemreimnteanttiaotni otnootol.o l.IItt enablles\nthe extraactiioonn ooffd edteatialeidlePd HPYHYw wiirerelelsesssc ocmommuniicatioon iinnffoorrmmatioon frroomm thhe AAtheros WiiFFii NIICss,,\nincluding thhee CChanneell Staatee InIfnofromrmaattioionn(CCSI),,thhe rreecceeivieveddp apacckkeettppaylooad, andd other innffoorrmmatioon\n(the tiimme stampp, , thee RSSSI Iooff eacchh aanntteennan,a ,tthhe eddataat arraattee,, etc.))..AAtherross--CCSIS-I-TToolo liiss buuiillt oon toop of\nath9kk,,aann ooppene-ns-osuorucrec eLLininuxu xkekrenrenle lddrriivveerr supppoorrttiingg Atthheerrooss 880022..11nn PCCI/I/PPCCI-I-EE cchhiippss..TThuhsu,s ,tthhiiss\ntooll thheoreticcaallylys uspuppoorttssa all tly ptyepseos foAf thAtehreorso8s 0820.12.11n1nW WiiFFiicchhippsetss..WWee hhaavve etteessttedd it  oonn AAtheros\nARR99558800,,AAR9R59509,0A,RA93R4943,4a4n,da nQdCAQ9C55A89.5F5u8r.tFhuertmhoerrem,Aotreh,eArotsh eCroSIs CTSoIolT oiosl iospoepne nsosuorucrec,ea, nadn daalll\nfunccttiionaallitieessa arerei mimpplleemmentted in softtwware wiithoouutt annyy mmodoidfificcaatitioonn ttoo the fifirrmmwaarree.. Thheerreeffoorree,,\noonnee ccaann eexxtteenndd tthhee ffuunnccttiioonnaalliittiieessooff AAtthheerrooss CCSSII TTooooll wwiitthh tthheeiirr oowwnn ccooddeess uunnddeerr tthhee GGPPL Llliicceennssee..\nAAththeeroros-s-CCSIS-IT-Toolo lwworokrsk soon nvvarairioouuss LLiinnuuxx ddiisstribbuutiioonnss,,ee..gg.,.U,Ubbuuntu,  OOpenWRTR,TLi, nLiinoin, oe,tect.c..\nDDififffeerreenntt LLiinnuuxx ddiissttrribiubutitoinonw woorrkkssw wiiththd diffifeerernentth ahradrwdwaarree..U Ubbuunnttuu wwoorrkkss ffoorr ppeerrssoonnaallc ocommppuutteerrss\nlliikkeellaappttooppssoorr ddeesskkttooppss..OOppeennWWRTR wTorwkosr kfsorfo ermebmedbdeeddd eddevdiecveisc essuscuhcahs aWsiWFii Frioruotuetresr.s. LLiinniinnoo wwoorrkkss\n33hhtttppss::////pss..zppjj..io\n?4hhttttppss::////ddhhaallppeerrii..ggiitthhuubb..iioo//lilniunuxx--8800221111nn--ccssiittooooll\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 99\nffoorrIIooTT ddeevviicceess,,ssuucchh aass AArrdduuinino oYYUNU.N T.hTe hoeffoifficicaiall wweebbsistitee pprroovviiddeess tthhee ssoouurrccee ccooddee ffoorr ththeeU Ubbuunnttuu\nvveerrssiioonn aanndd OOppeennWWRT RvTervseirosnio onfo tfhteh eAAthtehreorso sCCSIS Ittooooll..\nThhee hhoomempaegpea?g eo5f otfhiths istotolo lccaann bbe eaaccecsesesde dffoorr ddeettaaiilled innformaattiionn..\n4 CCSSII FFEEAATTUURRE  EEXXTTRRAACCTTIOIONN\nTThhe eCCSIS Ifefeatauturerse sllaayy tthhee ffuunnddataitoion nofo fwwirierleelesss ssseennsisning.gI.nI npapratritciuclualra,r,fofor rddififffeerreenntt sseennssiinngg ttaasskkss,,\nchoooossiinnggthteh emomsto satpapprpoproripartiaet efefaetauturerse sccaann eeffffectivvelyy imimprove thhe ssyysstteemm performaanncec.eI. nIn aadddititiionn,,\nthee quuaalliity of tthhee eexxtrraacctteedd ffeeaattuurreess ddeetteerrmmiineess the effffeectiivveenness oof  tthhee sseennssiinngg ssyysteemm..\nFFoorr eaasseeofo fiilluustrraattioionn,,c ocdodeei mimpplleemmenttattion used for ffeeaattuurreee exxtrtaracctitoinoni sipsr oprvoidviededb ebloelwo,ww,which\niiss aa mmaaiinn ffuunnccttiioonn ttoo ccaalllld diffifefreernetntf ufnucnctitoinoni nint htehef oflollolwowiningg ssuubbsseeccttiioonnss..\n%%{\ncCSI Feature Extraction ffor Wi-FFi sseennssiing..\n- Input:cscsii ddaattaa uusseedd ffoorr ccaalliibbrraattion,,anadn dcscis idadtaat athtahtat neneedd ttoo bbee ssaanniittiizzeedd..\n- Output:ssaanniittiizzeedd ccssii ddaattaa..\nTo use this  scriipptt,,yyoouu nneeeed to:\n1.MaMkaek esusruere thtehe cscsii ddaattaa hhaavvee bbeeenn ssaavveedd aass ..mmaatt ffiilleess..\n2. Check the .mat file to mmaake ssuurre tthheeyy aarree iinn tthhee ccoorrrreecctt ffoorrmm..\n3. Set the parameters.\nNNoote tthat in this algorithm ,tthhee ccssii ddaattaa sshhoouulldd bbee aa 44--DD tteennssoorr wwiith the size\nof [T S AA LL]]::\n--T Tinidnidciactaetse sthtehe nnuummbbeerr ooff ccssii ppaacckkeettss;;\n-S Sinidnidcicaatteess tthhee nnuummbbeerr ooff ssuubbccaarrrriers;\n--A Ainidnidciacatteess tthhee nnuummbbeerr ooff aantennas((ii..ee..,,thteh eSTSST Snunmubmebre rini naa MMIIMMOO ssyysstteemm));;\n-L Linidnidciacatteess tthhee nnuummbbeerr ooff HHTT--LLTTFFss iinn aa ssiinngglle PPPPDU;\nSay if  we  coolllleecctt aa 1010s esceocnodnsdsc scisid adtatast esatmeaamt a1t k1H zkHsza msplaemprlaet era(tTe(=T=1100*\n1000), ffrroom a 3-anteennnnaa AAPP(A== 33)),,witwhi t8h0820.21.11n1 nstsatnadnadarrdd(S( S= =575 7susbubccaarrrriieer)\n,wwiitthhoouutt aany extra  spaattiiaall ssoouundnidnigng((LL==1)1,)t,heth edadtat asisziez eshsohuoulldd bbee [[1100000\n57 3 11]]..\n%%}}\nclear aallll;;\naddpath((ggeennppaatthh((ppwwdd))));;\np%0%.0 .SeSte tpapraarmameetteerrss..\nP%atPhat hofo fthteh erarwa wCSCSII ddaattaa..\nsrc_file_name =''..//ddaattaa//ccssii__ssrrcc__tteesstt..mmaatt'';;\nS%peSpeede dofo flilgighhtt..\nglobal cc;;\nc= =phpyhsycsocnonsstt((''LLiigghhttSSppeeedd''));;\n�% aBnadndwwiiddtthh..\nglobal bbww;;\nbw = 2200ee66;;\nS%ubScubacrarrireire rfrferqequueennccyy..\nglobal ssuubbccaarrrriieerr__ffrreeqq;;\nsubcarrier_freq  =  liinnssppaaccee((55..88115533e9e,9,5.8347e99,,5577));;\nS%ubScubacrarrireire rwawvaveelleennggtth.\nglobal ssuubbccaarrrriieerr__llaammbbddaa;;\nsubcarrier_lammbbddaa ==cc./. /susbucbacrarriieerr__ffrreeqq;;\n�% nAtnetnennaa aarrraannggeemmeennt.\n?5htttps://w/wands.ssgg//rreesseeaarrchch/W/WiFi//AAthheroosCSI\n10 Zheenngg Yang, Yi ZZhhang, Guooxxuuaann Chhii, and Guidong ZZhang\nantennnnaa_l_olcoc= =[0[,0,00,,0; 00..00514666655,,0, 00;;0,0,0.0.50154146665 ,0]0]'';;\nS%etS ethet hleinlienaera r arnagneg eofo fthteh eCSCIS Iphpahsaes,e ,whwihcihc hvavrariieess wwiitthh NNIICC ttyyppeess..\nlinear_intervvaall ==((2200::3388)'';\np%1%.R1e.adRe atdhet hcesic sdiatda tfaorf orcaclailbirbartaitoino nanadn dsasnaintiitizzaattiioonn..\nL%oaLoda dthteh erarwa wCCSSII ddaatta.\ncsi_src== llooaadd((ssrrcc__ffiillee__nnaammee))..ccssii;; R%aRwa wCSCSII..\np%2%.P2.erPfeorfmo rvmarviaoruisou swiwrierleelsess ssesnesnisinngg ttaasskkss..\nT%esTte setxaemxpamlpel e1:1a:ngalneg/ldei/rdeicrteicotnio nesetsitmiamtaitoino nwiwtiht himipmeperrffeecctt CCSSII..\n[packet_nnuumm,,ssuubcarrier__nnuumm,,aanntenna_numm, ~~]]= =sisziez(ec(scsii__ssrrcc));;\naoa_mat  =  naiivvee__aaooaa((ccssii_s_rscr,c,anteennnnaa__lloocc,,zeros(3, 11))));;\naoa_ggtt == [[0;0;0;;11]];\nerror = mean(acos(aoaa__ggtt''** aaooaa__mmaatt))));;\ndisp(\"Angle  estimaattiioonn eerrrroorr::\"+ +nunmum22ssttrr((eerrroorr))));;\nT%esTte setxaexmapmlpel e2:2d:isdtiasntcanec e setsitmiamtaitoino nwiwitthh CCSSII..\ntof_mat = naive_tof(ccssii_src));;\nest_distt == mmeeaann((ttooff__mamtat* *c, ''aallll''));\ndisp(\"The ground  truth  distancee is: 1100 mm\"\"));;\ndisp(\"\"TThhee eessttimiamtaetdedd idsitsatnacencies :is\":\"++ nnuumm2s2tsrt(re(sets_td_idsits)t+)+\" mm\"\"));;\n4.1 TTimime eofo fFFllight\nPPaatthh  1\nRx\nChhaannneel l Immpullse RResponse\nLOsS\nPaatth  2\nTime\nTx\nFig. 5. Thee relaatiioonnsshhipp bbeettwween ToF andd CIIRR..\nTooFFisi stthhee ttimee dduurartaitoion ntthhe essiiggnnaal l prrooppagaagtaetse sfrfroom mthteh etrtarnasnmsimttiettre rtot otthhe erreecceeiivveer raallonngg aa sspeecciiffiic\npaatth.. Giiven the freequenccyy 5\uD835\uDC53,, the phasse shiftti nitnrtordoduucceedd bbyy tthhee TTooFFg\uD835\uDF0Fisis::\nq\uD835\uDF19ToFF== −2\uD835\uDF0Bc\uD835\uDC535\uD835\uDF0Fg (13)\nAss the supeerriimpposoistitiioonn ooff muultltiipaatth signalls, CSS∑︁II can be reepresented based on the rraayy-trraacciinngg mmodeell:\uD835\uDC41\n\uD835\uDC3B-(\uD835\uDC53 ) =4\uD835\uDEFC\uD835\uDC5B\uD835\uDC525−\uD835\uDC572\uD835\uDF0B \uD835\uDC53 \uD835\uDF0F\uD835\uDC5B ((1144))\n\uD835\uDC5B=1\nwwhehreer#e \uD835\uDC41is isthteh ettoottaall nummbebre rooff mulutltiippaatthh,, and \uD835\uDEFCU\uD835\uDC5B aanndd g\uD835\uDF0F \uD835\uDC5Baraer etthhee ccoommplpelxe xaattteennuuaatitioonn ffactor aannd\ntimmee off flfligihghtt((TTooF) for thhe=\uD835\uDC5BC\uD835\uDC61 ℎpaptaht,hr,ersepsepcteicvtievleyl.yT.hTeohreeotriectailclayl,ly ,tthhe eTTooF Foof faalll ppathhs ccaannbbee identtiiffiieedd\niin CIIR,, whhiicchh ccaann bbee ccaallccuullated by apppllyiingg the inverse Fourier ttrraannssffoorrmm too CCSI ssaammpplles of\nall  ssuubbccarriieerrss. .H Hoowweverr, ssince the trraannsmiittter aannd thhe rreecceeivveerr lalcakcks ysynncchhrroonizatiioonn, n noonn-zzeeroo\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 111\ntempoproarla lsshhififttss exiist iinn CCIRR,  aanndd tthhee aabbssooluutee TTooF iss tytyppiiccaallylyn onotta caccucuraratetee nenoouuggh. TThe liimmiteed\nbaannddwwiditdht halasloso ccoonsntsrtaraininss tthee timmee resolutioon,  ccaauusiinngg mmetter-leevvel  TTooFF aammbiiguuiity Thee relatioonnship\nbeettweene nsisiggnnala lpprrooppaagagtaitoionn ppatahth, ,TTooFF,, andd CIIRR iis shhownn iinn FFiiguurree 5.\nTThhe efofolllloowwinign gfufnucntcitoino nnaniaviev_et_otfo finintetnednsd stot oexetxrtarcatc ttthhee TTooF Fofo ftthhee ssttrroonnggesets tppaathth ((ttyyppiiccaallllyy tthhee\nshoorrtteesstt path)) based on inverrse Fouurriierr traansform..\nfunction  [tof_mat] == nnaaiivvee__ttooff((ccssii__ddaata)\nn%aniaviev_et_tooff\nI%nIpnuptut::\n?%csi-_dcastia_ daitsa tihset hceSIC SuIsuesde dfofror rraannging;;[[T S AA EE]\n?%iff-t_ipfofitn_tp oaindt banwd abrwe atrhee tIheFFITF FaTnda nbdanbdawndiwditdht hpapraarmaemetteerrss;;\nO%uOtuptuputt::\n?%tof-_mtaotf _imsa ttihse trhoeugrho utghimtei-moef--ofl-iflgihgth tesetsitmiamattiioonn rresult; [[TT AA]\nglobal  cc,,bbww;;\n[pakcet__nnuumm,,ssuubcarrier_nnuumm,,aanntteenna_num ,eexxttrraa__nnuumm]]= =siszieze((ccssii__ddaattaa));;\nifft_point = power(2, cceeiill((lloogg22((ssuubbccaarrriieerr__nnuumm))))));;\nG%etG eCtIRC IRfrformo meaecahc hpapcakcekte tanadn deaecahc hanatnetennnaa bbyy iiffftt((CCFFRR));;\ncir_sequenccee == zzeerrooss((ppaacckkeet_tn_unmu,m,antennnnaa__nnuumm,,eextra_num ,iiffftt__ppooiinntt));;\nfor p = 1: packet_num\nffor a = 1: antenna_num\nffor e== 11::eexxttrraa__nnuum\ncir_seeqquueencnec(ep(,p,aa,,e, ::))= =ififftt((ccsi_dattaa((pp,,:, aa,,e)e,)i,fifftf_tp_opioinntt));;\nend\nend\nend\ncir_sequenccee == ssqquueeezez(em(emaena(nc(icri_rs_esqeuqenuceen,ce4,)4););%[T[ Tififtf_t_ppooiinntt AA]]\nhalf_point  =  ifft_pooiinntt //22;;\nhalf_seeqquueennccee == cicri_rs_esqeuqeunecnec(:e,(:1,:1h:ahlafl_fp_opinoti,nt:,):;);%[T[ Thahlafl_f_ppooiinntt AA]]\npeak_inddiicceess ==z ezreorso(sp(apcakectk_entu_mn,uma,natenntnean_nnau_mn)u;m%);[?T AA]]\nfor  pp==1:1p:apakkcceett__num\nffor a = 1: antenna_num\n[~, ppeeaakk__iindices(pp,,aa)]= =mmaaxx((hhaallf_sequeennccee,, [],22));;\nend\nend\n�% aCallccuullaattee TTooFF;;\ntof_mat  == ppeeaakk__iinnddiicecses. *.*s usbucbacrarrireire_rn_umnu.m/ .(/i(fifftf_tp_opionitnt. *.*bw )b;w)%;[[TT AA]]\nend\n44..22 AnAgnlgel eofo fAArrrriivvaall aanndd AAnnggllee ooff DDeeppaarrttuurree\nWhehne na aNINCI Ceqeuqiupeips ewsiwthi thmumltuilptlipe leanatnetnennans,aas , laolcoacla lccoorodridniantaet eaatt the device ccaann bbe ccrreeaatteedd..AAs\nshoowwn nini nFFigiguurer e66,,fofor raa transsmmititteerr, tthhee aanngglee ooffd edeppaarrttuurree(AAoDD)φ) \uD835\uDF11rerperperseesnetns tsthteh edidrireeccttiioonn iin the\nlocall coorrdiinaattee aallonngg wwhihcihc hthteh etrtarnasnmsimttietdt esdigsnigaln ails isemeimttiettde.d F.oFro ra arerceecievievre,r ,tthhee aannglgele oof faarrrriivaall\n(AooAA)θ) \uD835\uDF03 rreepprreesesentnst stthhee ddiirreeccttiionn iin the loocal ccooordinate aloong whhicich hththe erreecceeiviveed dsisiggnnala liiss captturreedd..\nSiinccee the antennnaass aarree spaattiallyy sseeppaarraatteedd, n noonn-zzeeroo pphase shifttssb beetwtweeen antennnaass aarree introducceedd..\nThhee pphhaassee sshhiifts ddeeppend on thhe AAoA//AAoDo.DS.peScpiefciicfiaclallyly,,ssuuppopsoes eththe erreellaattive llooccaattioionnb beetwtweeen ttwwo\nanttennnaass is \uD835\uDEABI\uD835\uDC8D=1=G~(°Δ\uD835\uDC65a,nΔd \uD835\uDC66t)haen udntihte duinrietcdiitroenc ivtoenctvoerc toofr AoofAA iosA eis=1\uD835\uDC86co=sθ(\uD835\uDC50,\uD835\uDC5Cs\uD835\uDC60\uD835\uDF03in,θsin°\uD835\uDF03,)t,hteh epphahsaes esshhiifft\nbeettweeen ntthhee ttwoo aanntetennansa siiss::\nd =22\uD835\uDF0B\uD835\uDF19AoA = \uD835\uDEAB1\uD835\uDC8D ·e\uD835\uDC86 ((15))\n\uD835\uDF06\n12 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n心 θ\nφ Y2 Yz\nY1\nRxx  antennas\nTx  anteennnas\nFFiigg.. 66..AAngnlgel eofo fAArrrriivvaall aanndd AAnnggllee ooff DDeeppaarrttuurree..\nThheenn CCSIS Iccaann bee moodedleeledd aass:: ∑︁\uD835\uDC41\n\uD835\uDC3B (\uD835\uDC58) \uD835\uDEFC\uD835\uDC5B\uD835\uDC52\n−\uD835\uDC57 2\uD835\uDF0B= \uD835\uDEAB\uD835\uDC8D ·\uD835\uDC86\n\uD835\uDF06 ((1166))\n\uD835\uDC5B=1\nwhhereere:r\uD835\uDC58eprreepsrenstesn ttshteh:eCa\uD835\uDC58n\uD835\uDC61ℎteannntae nanta tahte threcreeicveeivr.e r.TTheh esasamem emomdeold ealpapplpielise sttoo the AooDD aatt the\ntrasmiittter ssiiddee aanndd tthhee 33DD ssppace wwiith azimmuutthh aanndd eelleevvaattiionn aannggleless..\nIIn practiiccee, ,aalglogroirtihtmhmsss uscuhcha saCsCaappoonn[2] aannd MMUSSIICC[1[91]9 ]ccaann bbee ussed too eesstitmimaatetet hteheA oAAoA/A/AooDD\nof mmuullttiple ppaths f·frroomm the CSSII of tthhe aannteennaa array.MUSUISCI Cananlyasleys etshteh einicnicdiednetn tsisgignanlasl soonn mmulutiltpilpele aanntetennansa stot offiindd ouutt the AooAA ofo feeaacchh ssiiggnnaall..\nSpecififciacllayl, lsuy,pspuopsepo\uD835\uDC37sesi gsniaglnsa\uD835\uDC39l1,s· ·1· , \uD835\uDC39·\uD835\uDC37  ararrivreivfreo mfrdoimre cdtiornesct\uD835\uDF03i1,o·n·s·\\,1\uD835\uDF03·\uD835\uDC37 a\\t \uD835\uDC40at\">i \uD835\uDC37anatnetennnaass..\nTThhee rreecceeiived siggnnal at tthhee:\uD835\uDC58C\uD835\uDC61ℎ aanntteennnna aeelleemmenetn,td,edneontoetde dasa-s:\uD835\uDC4B,i\uD835\uDC58s, ias alilinneeaarr commbibninataitioonn ooff the \uD835\uDC37\ninciddent wwavefronts aannd nnoissee\uD835\uDC4A,:\uD835\uDC58:: \n \uD835\uDC4B1 \n \n \uD835\uDC4B2  [ ]  \n2  \n .  = \uD835\uDC82(  \uD835\uDC391\n\uD835\uDC39\n\uD835\uDF031) \uD835\uDC82(\uD835\uDF032) . . . \uD835\uDC82(\uD835\uDF03\uD835\uDC37 )  \n.  \uD835\uDC4A1 \n\uD835\uDC4A2\n+\n..   .\n\uD835\uDC39   \n .. \n\uD835\uDC4B \n\uD835\uDC40  a2⋯  \n \n \uD835\uDC37   \n .. \n\uD835\uDC4A \n\uD835\uDC40 \nor\n^\uD835\uDC7F== G\uD835\uDC68L\uD835\uDC6D,+]\uD835\uDC7E ((17))\nwhhereer ea1a\\(:\uD835\uDF03O\uD835\uDC58i)s isthteh earararya ystseteerirning gvvecetcotro rtthhaat tcchhaarraactceterriizzeess addddeed dpphahsaes(ere(lreatlaitviev etoto tthhee ffiirst  aannteennna))\nooff each receivviinngg ccoommponneenntt at thhee:\uD835\uDC58C\uD835\uDC61 ℎaanntetennan.aG. \uD835\uDC68isi stthhee mmatartirxix ooff steeeerr vveecctotorsr.sA.Ass shshoowwn inn\nFFiigguurree 66,,ffoorr aa llinineeaarra anntteennnnaa aarrrraayy wwiitthh eelleemmeennttss wweellll ssyynncchhrroonniizzeedd,, 1 \n − 2\n\uD835\uDEAB\uD835\uDC8D 1 ·\n \uD835\uDC52 \uD835\uDC57 \uD835\uDF0B ( ) \uD835\uDC86 \n\uD835\uDF06 \n\uD835\uDC82(\uD835\uDF03 ) =  2\n \uD835\uDC52−\uD835\uDC57\n\uD835\uDF0B\n\uD835\uDEAB\uD835\uDC8D (2) ·\uD835\uDC86 \n\uD835\uDF06 \n  (18)\n .\n ..\n\uD835\uDF0B\n\uD835\uDC52−\uD835\uDC57\n2\n\uD835\uDEAB\uD835\uDC8D (\uD835\uDC74−1) ·\uD835\uDC86\n\uD835\uDF06 \nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 13\nSSuuppppoossee,\uD835\uDC4A:~\uD835\uDC58#(∼Of\uD835\uDC412)(,0,a\uD835\uDF0End2) ,:ainsd a\uD835\uDC39 \uD835\uDC58wisdae-wsiednes-es enstseatsitaotniaornya rpyrporcoecsess swwitithh zero mmean vvalluuee,,ththee\uD835\uDC40\"××\"\uD835\uDC40\ncovvaarriiaannccee mmatartirxix ooff the received siggnal vveectoor  \uD835\uDC7FXiiss::\nS\uD835\uDC7A =x\uD835\uDC7Fx\uD835\uDC7FHH\n=A\uD835\uDC68F\uD835\uDC6DF\uD835\uDC6DHH\uD835\uDC68AHH+\uD835\uDC7Ew\uD835\uDC7EwHH ((19))\n=A\uD835\uDC68P\uD835\uDC77A\uD835\uDC68HH++f2\uD835\uDF0E2I\uD835\uDC70\nwwhehreer eP\uD835\uDC77isi stthhee ccoovvaarriianccee maattrriix of  trtarnansmsmisssioinonv evcetcotror\uD835\uDC6D .FT.Thheen noottaatitoinon((·)HH representssconjjuggaatte\ntranspose aannd(()·r)erperperseesnetnst seexxppeeccttaattiion..\nTThhee covariiaanncceem maatrtixri\uD835\uDC7AxhSa sh\uD835\uDC40as\"e igeeingveanlvuaelsu\uD835\uDF06e1s, _· ·1·⋯, \uD835\uDF06·\uD835\uDC40_asssoocciaitaetdewd itwhit\uD835\uDC40h\"e igeeingveencvteocrtso\uD835\uDC86r1,s\uD835\uDC86e21,e·z·⋯· ,e\uD835\uDC86u\uD835\uDC40..\nSorrted inn aan ononn--ddeesscceennddinngg oorrddeerr, ,ththees msmaallelsets\uD835\uDC40t\"-− e\uD835\uDC37igeeignveanlvuaelsu ecsocrorrersepsopnodn tdot othteh ennoiosisee whihlilee the\nrest  \uD835\uDC37cocrorrersepsopnodn dtot otthhee i\uD835\uDC37ncindceindte nstisginganlasl.s .IIn other wword, tthhee\uD835\uDC40\"--ddiimmenesnisoion nssppaacec eccaann bbee divided\niinto twwo orthhogonaall ssuubspace,  thtehen oniosiesesu sbusbpsapcaec\uD835\uDC6Ce \uD835\uDC41E#e xepxapnanddeedd bbyye iegiegnevnveecctotrosrs\uD835\uDC86 1e,1· · ·⋯, \uD835\uDC86·\uD835\uDC40e−\"\uD835\uDC37-,,aannd\ntthe siiggnnaalls usbusbpsapcaec\uD835\uDC6Ce \uD835\uDC46Ee(x peaxnpdanedebdy beyig enivgenctvoercst\uD835\uDC86o\uD835\uDC40rs− \uD835\uDC37e+\"1-,+·1·⋯· ,e\uD835\uDC86(\uD835\uDC40or(o erqeuqiuviavlaelennttlly \uD835\uDC37ararrarya ysstteeeerring\nvector \uD835\uDC82a(\uD835\uDF0311))⋯, · · ··, \uD835\uDC82a(\uD835\uDF03 \uD835\uDC37)))..\nToo sollve foor tthhee aarrarayys tsetereirnigngv evcetcotrosrs(t(htuhussA AooAA), MUSUISCI Cplpoltost sththe erreecciipprrooccaal l off squared distance\n&\uD835\uDC44(\\(\uD835\uDF03)f)ofro rpopionitnst saalloonng gtthhee\\ \uD835\uDF03cocnotnitniuneu etot oththe ennoiosisee ssuubbssppacaec eaas saa funccttion of\\\uD835\uDF03::\n\uD835\uDC44 ( 1\n&\uD835\uDF03)) == (20\n\uD835\uDC82aH (\uD835\uDF03 )\uD835\uDC6CE\uD835\uDC41 \uD835\uDC6CaH )\n\uD835\uDC82)(\uD835\uDF03 ) (20)\n\uD835\uDC41\nThhiiss yieldds ppeeaks iinn&\uD835\uDC44(()\uD835\uDF03at) attheth beebareianrgin ogfo ifnicnicdiednetn tssiiggnnalasls..IItt iss ssimimiilalrart otoa papplpylyM MUUSSICC alggooritthhmm\nfor AAoD sspeeccttrumm eessttiimaattiionn..\nTThhee ffoolllloowwiinngg ffuunncctitioonn nnaaiivvee__aaooaa iinntteennddss ttoo eessttimimaattee tthhee 33DD AAooAA bbaasseedd oonn tthhee pphhasaes eddififffeerreennccee,,\nwwhihcihc hisis simiillar ttoo EEqqn. 15.NNotoet etthhaatt thee folllooww ing algorithhm onnllyy connssiiddeerrss onee paatthh,, and thus\nccaannnnoto tbbe eaappplpileiedd ttoo mmutultilpipatahth ssiiggnnalasls..\nfunction [aoa_mat]  =  naiivvee__aaooaa((ccssii__ddaattaa,,antenna_locc, eesstt__rrccoo))\nn%aniaviev_ea_aooaa\nI%nIpnuptut::\n?%csi-_dcastia_ daitsa tihse tCheSIC SuIseuds edfofro ranagnlglee eessttimatioonn;;[T S AA EE]\n?%ante-nannat_elnonca _ilso cthise tahneteannntae nlnoacaltociaotni oanrraarnrgaenmgemnetn twiwtiht hthteh efifirrsstt aanntteennna\nas a referenccee;;[[33 AA]]\n?%st_-rceos ti_src othies etshetiemsattiemdat erdadriaod iochcahiani nofoffsseet;[A[A 11]]\nO%uOtuptuputt::\n?%aoa-_maota _imsat tihse tahneglaneg leesteismtiamtaitoino nreressuullt;[3[3 TT]]\nglobal subccaarrrriieerr__llaammbbddaa;;\n[[ppaacckkeett__nnuumm,, ssuubbccaarrrriieerr__nunmum,,aanntteennnnaa__nnuumm,,eexxttrraa__nnuumm]]= =sisizzee((ccssii__ddaattaa));;\ncsi_phasee == uunnwwrraapp((aannggllee((cscis_id_adtaat)a,),[[]],,22); ?% [ST SAAE]E]\nG%etG etheth eanatnetnennan avevcetcotro ranadnd iittss lleennggtthh..\nant_ddiifff ==a natnetnennan_lao_cl(o:c,(:2,:2en:de)nd-)-a natnentnean_nlao_cl(:o,c(1:),;1)%;?[3 AA--11]]\nant_difff__lleennggtthh == vevcenconromr(ma(natn_td_idffi)f;f)%;[[11 AA--11]\naant_diff_normmaalliizzee == aanntt__didfif f. /./a natn_td_idfiff_fl_elngetnhg;th%;[[33 AA--11]\n�% aClaclcuullaattee tthhee pphhaassee ddiiffffeerreence.\nphasee__ddiifff= =c scis_ip_hapshea(s:e,(:,:2,:2e:nedn,d,:):)-  ccssii__pphahsaes(e:(,:,::,,1, ::))- -peperrmmuutte(\nest_rrccoo(2(:2e:nedn,d:,):,),[[443 311 2]2)];);%? [TS SA-A1-1 EE]]\nphase_difff == uunnwwrraapp((pphhaases_ed_idfiff,f,[]],,22));;\nphase_diiffff == mmoodd((pphahsaes_ed_idfifff+ +p ip,i,22*  pi))-- ppi;\n�% rBoraodacdacsatstiinngg iiss ppeerr foorrmmeedd,,ggeett tthhee vvaalue of cos(theta)ffoorr eeaacchh ppaacckkeett aanndd\neach aanntteennna ppaaiirr..\ncos_mat  =  suubbccaarrrriieerr__llamabmdbada.*  phhaassee__ddiifff ..//(2  .*  pii..** ppeerrmute(\nant__ddiiff_fl_elnegnthg,th[,3[3112 ]2)])););%?[ TS SA-A-11 EE]]\ncos_matt__mmeeaann == ssquqeuezeez(em(emaena(nc(osc_omsa_tm,at[,2[24 ]4)]));)%;[[TT AA--11]\n14 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nS%ymSbyomlbiolci cnonolnilnienaera ropotpitmiimziaztaitoionn aarree ppeerrffoorrmmeedd..\nsyms x y\n�% oaao_as_oslol == [[xx;;yy;;((11--ssqqrt(x^2 + yy^^22))))]];;\naoa_init = [sqrt((1/3);;ssqqrrtt((11//33));;ssqqrrtt((11//33))]];;\naoa_mat_sol  = zeros(3, ppaacckkeett__nnuumm));;\noptions  =  optiimmooppttiioonnss((''llsqsnqonnolnilni'n,',''AAllggoorriithtmh'm,','leevveennbbeerrgg--mmaarrquqauradrtd't,','\nDisplay ',''nnoonnee''));;\nparfor p = 1: packet_num\ncur_nonlinear_funncc == @@((aaooaa__ssooll))aanntt__ddiifff_n_onromramlailziez'e'*  aoaa__ssooll --ccooss__mat_mean\n(p, ::))'';;\ncur_aoa_sooll == l1ssqqnnoonnlilni(nc(ucru_rn_onnolnilnienaera_rfu_nfcu,nca,oaao_ai_niinti,t,[[]],,[],ooppttiioonnss));;\naoa_matt__ssooll((::,, p)= =cucru_r_aaooaa__ssooll;;\nend\naoa_mat  =  aaooaa__mmaat_ts_oslol. /./v evcenconrmo(ramo(a_omaa_tm_asto_ls);ol%);[?3 TT]]\nend\n4.33 PPhhaassee ShiftftSSpectrruumm\nP1P1\nPP2\n40\nP2\nP3 Doppler FrequencyrHz 品品言 P3\n0\n-10\n-20\nLOS 30\n40 P1\n0 500 100015002000\nTx Rx Time/ms\nFFiig..77.. PPhhasaes esshhififtt spectrum ((orr Doopplpelerr ssppeeccttrruumm) )oof ftthrreeee diiffffeerreennt  mmovviingg paatthh..\nNoon-nz-ezreoro pphahsaes eshsihfiftt qΔ \uD835\uDF19acarcorsoss sdidfifffeerreenntt paacckkeettss is ccaauused by thhe rreellaatitvievem moovveemeenntt off the\ntranssmmititteerr,, rreecceivveer,,or oobjeectss inint htehep rporoppaaggatioonn ppath oftthee signaall.IIt eequalls tthhe cchhangiingg rraatte of\nthe path lleennggthh oofft htehes igsinganla. lW.Whhen mmuulltiplee ppaacckketssa arerer erceecievievdedinins esqeuqeuennccee,,tthhee CCSSI c ocorrersepspoonnddinng\nto tthhee8\uD835\uDC56\uD835\uDC61 ℎrerecceeiivveeddpapcakcekte tisis:: ∑︁\uD835\uDC41\n\uD835\uDC3B (田\uD835\uDC56) = =\uD835\uDEFCu\uD835\uDC5B (?\uD835\uDC56)\uD835\uDC528\uD835\uDC57\uD835\uDF19\uD835\uDC5B4(\uD835\uDC56) , (21)\n\uD835\uDC5B=1\nwhhereere q\uD835\uDF19=\uD835\uDC5Bisisthtehpehpahsea seofo ftthhee=C\uD835\uDC5B \uD835\uDC61pℎaptaht h[4[]4.]. Extract  thtehepphhaseeof tthheet htehe\uD835\uDC5B=\uD835\uDC61Cℎ pathh ininpacket  \uD835\uDC568aannd \uD835\uDC568+,1\nrreessppeeccttiivveellyy,,aannd dcaclaclcuulalatete tthhee pphhasaes eshsihfitft aass::\nΔq\uD835\uDF19=\uD835\uDC5B1(\uD835\uDC568)==q\uD835\uDF19=\uD835\uDC5B1(8\uD835\uDC56,+1°1) −q=\uD835\uDF191\uD835\uDC5B8(\uD835\uDC56”) . ((2222))\nIInttuiitivveellyy,,t htehep hpahsaesed idffiefrfenrecnecien diincdaitceasteths etdheis tdainscteancchea nchgaengoef tohfe t\uD835\uDC5Bh\uD835\uDC61eℎ=Cp aptahthb ebtewtweeenn ttwwo\nccoonnsseeccuutitvievpeac kpeatsc:kΔe\uD835\uDC51t\uD835\uDC5Bs(:\uD835\uDC56)3=1Δ8\uD835\uDF19=\uD835\uDC5B (-\uD835\uDC56)= 2 8\uD835\uDF06-.\uD835\uDF0B\nTTaakke eaa sstteepp ffuurrtthheerr,,aanndd aappppllyy tthhee sshhoorrtt--ttimimee FFoouurriieerrttrraannssffoorrmm ((SSTTFFTT)) wwiitthhiinn aa ssllididininggw wiinnddooww,,\nwee ccaann ggeett the spectrum aass shoowwn ninin FFiigguurree 77..TTheh efrfereqqueunecnyc yaxaixsi srreevveeaalsls the changgee rraatte of\nconnsseeccuutitivvee CCSSI Iddaattaa,,aannd diimmplpilciictitlly conttaaiinss the path leenngth cchhanggee rate.  FFiigguurree 77d deemmonssttrates\ntthhee pphhaassee sshhiifftt ssppeeccttrruumm(o(orr tthhee DDooppplpelre rSSppecetcrtruum)m )fofor rtthhrreeee ddiiffffeerreenntt mmoovviinngg ppaatthhss..\nTThhe effoolllowwinign gfufnucntcitoino nnaniaviev_es_tsfttf tccaalclcuulalatteess tthee shoorrtt--timee FFoouurireierr ttranssffoorrmm ofo faa sseerriies of CCSI\nddaattaa.. TThhee ggeenneerraatteedd ssppeeccttrruumm cacna nbeb eusuesde defefffeecctitivveellyy ffoorr mmaannyy wwirierleelessss sseennssiinngg ttaasskkss,,lliikkee ggeessttuurree\nrecooggnnititiioonn aannd dfafalll deetteccttion..\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 115\nLLiink #1\nNNoorrmaall DDFFS \nDDiirectioonn PrPorfoifile\nLLiink #3\nVVy\nVv3 u1 uu2\nuu3 u4 v2\nBBooddyy-- uus5 Vv1 u6\nCoooddririnate\nVVeelolocciity\nPPrrooifille VVAx\nULink #2\nFiig. 8.  Relatioonnshipp bbeettwween thhe BBVVP and Doopppplelerr spectrum..EEacahc hvveelloocciity ccoomppoonennetn tiinn BVVPPisi spprroojjeeccttedd ontto\ntthee noorrmmala lddirireeccttiionn off a llininkk,,aannd contribbutes ttoo ththeep poowwer oof  ththeec ocorrersepspoonnddinng rraaddiaallv evleolcoictiytyc ocmomppoonnent\nin tthhe DDopppller ssppectrruumm..\nfunction stft_mat = naive_spectrum(csi_ddaattaa,  sammppllee__rraattee,,vviissaabbllee))\nn%ainaviev_es_psepeccttrruum\nI%nIpnuputt::\n?%csi-_dcastia_ daitsa tihse tcheSIC SuIseuds edfofro rSTSFTFTT ssppeectrum  geenneerrataitoino;n;[[TTS SAALL]\n?%sam-plsea_mrpaltee_ rdaetetedremtienremsi ntehse thre sroelsuotliuotni onofo fthteh etitmieme-d-odommaaiinn aannd\n�% refqrueeqnucenyc-yd-odmoamaiinn;;\nO%uOtuptuputt::\n?%stf-t_smtaftt _imsat tihse tgheenegreanetreadt eSdTFST FTspsepcetcrturmu;m[;s[asmapmlpel_er_arattee//22 TT]]\n�% oCnojnujguagattee mmuullttiipplliiccaattiioon.\ncsi_dataa == mmeeaann((ccssii__dadtaata. *  coonnjj((ccssii__ddaatat)a,),[2  3344]]));;\n�% aClacluclualtaet ethtehe STSTFFTT aanndd vviissuuaalliizzaattiioonn..\nstft_mat = stft(csi_data , ssaammpple_rate));;\nV%isViusaulailziaztaitioonn(o(potpitoinonaall))..\nif visabllee\nstft(csi_data , ssaammppllee__rraattee));;\nend\nend\n4.4 BBodoyd-yc-ocoorodirdnaintea teVeVleolcoictiyt yPProrofifille\nTThhee lliimmiittaattioionno offt htehaef oarfeomreemnetniotinoendesdp sepcetrcutmrumis iths att,haetv,e netvheen stpheec tsrpuemctcrourmr ecsoprornedsipnogndtiontgh eto the\nsame eaaccttiivity ww illlb ebed idffie reernetntw hwheenn ththeeu usesrerm moovvees  aattd idffie reernetntlo lcoactiaotniosnosr orroiernietantiaotnisonrse larteilvaetive\nttoo tthhee WWii--FFiil ilniknsk.sT.o Troe sorelvseoltvheis tphriosb lpermo,bWleimd,a rW3i.d0a[r330.]0pq roprpoopsoesseas dao mdoaminai-inn-dienpdeenpednednetnsti gsniaglnal\nfeature BBVVP((bbooddy-yc-ocorodridninataete vveellocciity pprroofi lee))t otoc hcahrarcatcetriezreizheu mhuamnana caticvtiitiveist.ies.\nThhee basicci diedaeoa foBfV PBViPsissh oswhonwiniFni gF.i8g..A8.BAVBPVB\uD835\uDC7D qiusaqnutainzteizde dasa saa disccrreetetem maatrtirxiwx itwhitdhim deinmseinosnion\nas vveellooccitiytyc ocmopmopnoneenntstsd edceocmomppoosseedda laolnognge aecahcahx iasxoifs thoef btohdey bcoodoyr dcinooartedsi.nFaotresc.o nFvoern icenoncve,enience,\nwe eeessttabbllishh tthhee lolcoaclalb obdoydyc ocoorodridniantaetsews hwohsoeseo roirgingiins tihse tlhoec altoiocnatoifonth oefp etrhseo npearnsodnp aonsdit ipvoesitive\nx-axis aalligingnssw wiiththt hteheo roireinetantiaotnioonf othf etpher spoenrs. oTnh.e Tpher spoenrs’sonlo'sc altioocnatainodn oarnide notraiteionntasthionu ldshould\nbee proviided maannuaulallyly.. Cuurrrrennttly,  ititis iass sausmsuemdedt htahtath ethgel ogblaolblaolc altoicoantiaonnd aonrdie nortaietinotnatoifonth oef the\nppeerrssonn are aavvailalbablel.eT. hTehnenth ethken okwnonwng lgolboablallo claoticoantsioonfsw oifre lweisrsetlreasnss cterivanesrsceciavnerbse tcran sbfeo rtmreadnsformed\n16 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\ninto the loocal  bboody cooorrddiinnaatetes.s . Thhusu,sf,ofro rbebtettetre rccllaarriitty,aalll llooccaatiioonns aannd orientationss usedd in the\nfolloowiingg ddeerriivaattiion arre inn tthhee loloccaallb oboddyy ccoooorddinnates. Supppposoes etthhe ellooccaattiionnss ooff the trraannsmiittter aand\ntthe reecceeivievrero fotfh et\uD835\uDC56h\uD835\uDC61ℎe linCk lairnek® (\uD835\uDC56a)re= x(c\uD835\uDC56),y)(,\uD835\uDC56)\uD835\uDC59\uD835\uDC61 = (\uD835\uDC65\uD835\uDC61 , \uD835\uDC66\uD835\uDC61 Z)8, =((\uD835\uDC56x) A?,(yA(\uD835\uDC568)),r(\uD835\uDC56e)\uD835\uDC59®\uD835\uDC5F = \uD835\uDC65\uD835\uDC5F , \uD835\uDC66\uD835\uDC5F s),preecstpievcetilvye,ltyh, ethne nanayn yvevleolocciitty\ncommpopnoennetns tsi=\uD835\uDC63®(=UG,(\uD835\uDC630\uD835\uDC65~,)\uD835\uDC63a\uD835\uDC66r)ouanrdo utnhde thhuemahnu mboadny(bio.dey, (tih.ee. , othriegoirni)g iwni)lwl ilclocnotnritrbiubtuet eititss siggnnal  ppoowwer\ntto somee ffrequennccyy commpopnoennetn,dt,ednoetneodt eads afs?\uD835\uDC53(0(\uD835\uDC56)),(\uD835\uDC63i®n), tinhet hDeopDpolpepr lesrpescptercutmru omf otfhteh eiC\uD835\uDC56 \uD835\uDC61ℎlilnink k[[1155]]::\nf\uD835\uDC53 (?\uD835\uDC56) ( 0)=a(\uD835\uDC56)0G a(\uD835\uDC568)\uD835\uDC63®) = \uD835\uDC4E\uD835\uDC65 \uD835\uDC63\uD835\uDC65 + \uD835\uDC4E\uD835\uDC66 \uD835\uDC630\uD835\uDC66 . ((2233))\nag(a\uD835\uDC56)nda nad8 a(r\uD835\uDC56e)\uD835\uDC4E\uD835\uDC65 \uD835\uDC4E\uD835\uDC66  acroeefcioceiffienctiesn dtsetdeertmeirnmedin beyd lboycalotciaotniso nosf otfhteh etrtarnasnmsimttitetre raannd dththe erreecceeiiveerr::\n8(\uD835\uDC56=(\uD835\uDC56)\n(\uD835\uDC56) 1 )\n\uD835\uDC65\uD835\uDC61 \uD835\uDC65\uD835\uDC5F\n\uD835\uDC4E\uD835\uDC65 = ( ® +\n\uD835\uDF06 ∥ (\uD835\uDC56) ( ),\n\uD835\uDC59\uD835\uDC61 ∥ \uD835\uDC56)\n2 ∥\uD835\uDC59®\uD835\uDC5F ∥2\n-( ( )\n\uD835\uDC56) (\uD835\uDC56) (24)\n(\uD835\uDC56) 1 \uD835\uDC66\uD835\uDC61 \uD835\uDC66\uD835\uDC5F\n\uD835\uDC4E\uD835\uDC66 = ( ®( + ( ),\n\uD835\uDF06 ∥ \uD835\uDC56) \uD835\uDC56)\n\uD835\uDC59\uD835\uDC61 ∥2 ∥\uD835\uDC59®\uD835\uDC5F ∥2\nwwhehreer eλ\uD835\uDF06 iiss ththeew waavveelleennggtthh ooff WWii--FFii sisgingnaal.lA.Ass stsattaitcicco mcopmpoonneennttss wwiitthh zzeeroroD Doopppplleerr ssppeeccttrurumm\n((ee..gg..,,t htehel inlieneo fosfi gshigthsti gsniganlaslasn adndd odmomiinnaanntt rreefflleeccttiioonnss ffrroomm ssttaattiicc oobbjjeeccttss)) aarree fifilltetereredd oouutt bbeeffoorree\nthe Doopplpelre rssppecetcrturmu marea rceaclaculcluatlaetde,d ,onolnyl ysisginganlasl srereflfleeccttedd bbyy tthee ppeerrssoonn aarere rreettaaiineedd. . Beessiiddeess,,\nwhhene nththe epperesrosno nisis ccllossee to tthhe WWii--Fi llininkk,,o nonlylys isginganlaslsw iwtihtho noen-et-itmiemer erfleefcleticotniohna vhaevpeproromminentt\nmagangintiutduedse s[1[17]7.]. Thhuus,s,EqEnq.n2.32 h3ohlodsld svavlaildid ffoorr the gesture rreeccooggnitiioonn sscceennaarriioo..FFrroomm the ggeomeettrriic\nviiew,,EEqnq.n2.32 m3emanesa nthsath athtet h2e-D2 -vDelvoecliotcyi tvyecvteocrtōor \uD835\uDC63i®si spprorjoejectcetedd oon naa lline whhosoes edidrireeccttiioonn vveeccttoorr iis\nd\uD835\uDC85?(=\uD835\uDC56)(-a?,aG()\uD835\uDC56.) Su(p\uD835\uDC56p)= (−\uD835\uDC4E\uD835\uDC66 , \uD835\uDC4E\uD835\uDC65 )o.sSeu tphpeo speetrhseonpiesr son aisno enlalnipesleli pcsuercvue rvwehowseh ofsoecfioacriea rteheth tertarnasnmsimtitteterr andd the\nrreecceeiivveerr off tthhei\uD835\uDC56C\uD835\uDC61ℎ llink,,tthheenn d\uD835\uDC51? (\uD835\uDC56i)si siinndedede dthteh eavaevreargaeg edidriercetcitoion noof ftthee elllippssee aatttthheppeerrssoonn's’s lloccaattiion..\nFig. 8 sshhowss an examppllee whheerree the ppersoon ggeenneraatteesst htrhereeev evloecliotcyictoym cpoompnoenetnst\uD835\uDC63®s\uD835\uDC57 ,ō\uD835\uDC57 =gj1=,12,,233,,aand\npprroojjeeccttion of tthhe vveelloocciitytyc ocmomponneenntsts oonn tthee Doopplpelre rssppeectcrtruum mofo fththrere elliinkkss..\nSSiinnccee ccooeefffificcieiennttss (a\uD835\uDC56e)  and a?\uD835\uDC56)\uD835\uDC4E  only depend on the location ofthei\uD835\uDC61 ℎ\uD835\uDC65 and (\n\uD835\uDC4E\uD835\uDC66 only depend on the location of the \uD835\uDC56 lilinnkk,t, hthe erreellaattiioonn ooffpprroojjeeccttiioonn\noofftthhee BBVVP Pono nththeieC\uD835\uDC56 \uD835\uDC61lℎilnikn kisis ffiixxeedd..SSppeecciiffiic{caalllyl,ya,n aans saisgsnimgnemnetntm maatrtirxix\uD835\uDC68 (G\uD835\uDC56&) #2caann bbee ddeeffiinneedd::\uD835\uDC39×\uD835\uDC41 2 c\nA(=\uD835\uDC56) 1e1l\uD835\uDC53\uD835\uDC57 =e\uD835\uDC53\n(\uD835\uDC56)\nf(\uD835\uDC63®))\uD835\uDC34 \uD835\uDC58\n=\n\uD835\uDC57,\uD835\uDC58 0 else , (25)\nwhhereere f\uD835\uDC53gis h  j\uD835\uDC61Cℎ\uD835\uDC57 is the \uD835\uDC57  frreeqquuency saampplliing point iinnt hteheD oDopppplleerrs psepcetcrturmum,,aanndü\uD835\uDC63®\uD835\uDC58 is  vveeloloccitiytyc ocmomppoonnent\ncorresponddiingg to tthhee \uD835\uDC58k\uD835\uDC61ℎC eelleemment oof the vveecttoorriziezdedB BVVPP\\\uD835\uDC7D..TThuhsu,s ,tthhee relaattioionnb beetwtweeeenn DDoppller\nssppeeccttrruumm pprorofifillee ooff ththee\uD835\uDC56i\uD835\uDC61Cℎ lliinnkk aanndd tthhee BBVVPP ccaann bbee mmooddeeleledd aass::\nJ\uD835\uDC6B?(\uD835\uDC56)==c\uD835\uDC50?(\uD835\uDC56G)\uD835\uDC68?(\uD835\uDC56\\)\uD835\uDC7D ((26))\nwwhehreer ec?\uD835\uDC50 (i\uD835\uDC56)s itshteh escsaclailnign gfafcatcotro rddueu etot opprorpoapgagtiaotnio lnolsoss sofo fththe erereflfleecctteedd ssiignnaall..\nDDueu etoto tthhee ssppaarrssiittyy ooff BBVVPP,, ccoommpprreesssseedd sseennssiinngg [[66]] tteecchhnniiqquuee ccaann bbee aaddoopptteedd ttoo ffoorrmmuullaattee tthhee\nestimmaattiion off BVPP aass an l\uD835\uDC590o oopptiimmizat∑︁iioonn pproobleemm::eu\uD835\uDC40\nmin\uD835\uDC49 c|EMnD( \uD835\uDC68(\uD835\uDC56)H\uD835\uDC7D ,\uD835\uDC6Bo\uD835\uDC56 ) | +N\uD835\uDF02∥\uD835\uDC49e∥0, (27)\n\uD835\uDC56=1\nwwhehreer eM\uD835\uDC40 isi stthhee nnuumbmebr eorfo fWiW-Fii- Fliilninkks.s . Thhee ssppaarrssiitty of tthhee nnuumbbeerr ooff thhe vveloocittyyc ocommponneenntsts iis\nccooeerrcceedd bby ytthhe etteerrmm η\uD835\uDF02l∥l\uD835\uDC49Vl∥l0o,,whheerere η\uD835\uDF02 rreeppresents tthhe ssppaarsittyy ccooeeffiffciiceinetnstas nadnd∥|· ∥l0loisist htehen unmumber of\nnnoonn-z-zeerroo veellocityy ccoommpoonneenntsts..\nEEMMD(D,)(i·,s· )tihset hEearEtahr tMhoMveor'vse rD’sisDtiasntacen c[e1[81]8 ]bebtewteweene ntwtow doidsitsrtirbibuutitioonnss.. The seleeccttioinono fofE MEMDD\nratheerr thhan Euccllideann diistanccee iss mmainly ddue ttoo twtwo rreeaassoons. First,,tthhee qquuantizzatiioonn ooffB BVVP iinnttrroodduces\naapppprrooxximimataitoino nererrroorr,,ii..ee,., pprroojjeeccttioionno offvveelloocciitytyc ocmomppoonneennttss ttoo tthhee DDoopppplleerr ssppeeccttrruumm bbiinn mmiigghhtt bbee\nadjacentt too tthheet rtureueo nonee. .SSuucchh qquanttizatiioonn eerrroorrc acnanb beer erleielvievdedb ybyE MEMDD, whhicichh ttaakkeess thee distaannce\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 117\nbbeettweene nbbininss iinto considderaatiioonn..SSeecoond, there aree uunnknownn ssccaalling faaccttoorrssb beetwtweeeenn tthheeB BVVP aannd\nDoopplpelre rssppeecctrtruumm, ,mmakaikngin tghteh eEuEculicdliedaena ndidsitsatnacnec eininapaplpilciacbalbele..\n5 CCSISI SANIITIZZATIOON\nThhee wwirierelleesss senssiingg modoedlesl saannd dfefeaatutureres sddeessccrriibbeedd iin prreviiouuss sections are ccoonnsisstteennt  wwitthh ththeeE EMM\npprrooppaaggataitioonn tthheeoorryy aanndd ggeeoomemtertyr.y .HHowoewveerv,etrh,etyh edyond'otn ’ctocnosnidseidre rthteh evavrairoiouus sttyyppeess ooff nnooiissee ccaauusseedd\nby immppeerrffeecctt immppllemenetnattaitoionns sooff transceiver hhardwaarree[2[32,32,42]4.] .TThihsi ssseeccttion focuses on varioous\nCSSII errrorr sourrcess andd the corresponnddining geerrroorr ccaanncceelllaattion algorithhmss..\nFFoorr eeaassee ooff illluussttrraattioinon,,c ocdodeei mimppleemmeennttaattiioonn ffoorr saniitizatioon iissp prroovviiddeed, whhicihc hisis a main ffuunction\ntto calll ddifffefreerenntte rerororrc acnancceellaltaitoinonf ufnunccttioionnss aanndd tteessttt htheeirirp eprefrofromrmanccee..\n%%{\nCCSSII SSaanniittiizzaattiion AAllggoorriitthhm ffoorr WWi--FFii sseennssiinngg..\n-- IInput:cscis idadtataa uusseedd ffoorr ccaalliibbrraattiioon,,anadn dcscis idadtaat athtahta tneneedd ttoo bbee ssaanniittiizzeedd..\n- Output:ssaanniittiizzeedd ccssii ddaatta.\nTTo use this script , yyoouu nneeeedd ttoo::\n1.MMaakkee ssuurree tthhee ccssii ddaattaa hhaavvee bbeeenn ssaavveedd aass ..mmaatt ffiilleess..\n2. Check the .mat file to mmaake ssuurre tthheeyy aarree iinn tthhee ccoorrrreecctt ffoorrmm..\n3. Set the ppaarraammeetteerrs..\nNote that in this algorithm ,tthhee ccssii ddaattaa sshhoouulldd bbee aa 44--DD tteennssoorr wwiitthh tthhee ssiizze\nof [T  S AA LL]]::\n--T Tinidnidciactaetse sthtehe nnuummbbeerr ooff ccssii ppaacckkeettss;;\n-S Sinidnidciacatteess tthhee nnuummbbeerr ooff ssuubbccaarrrriieerrss;;\n-A Ainidndiiccaatteess tthhee nnuummbbeer of antennas ((ii..ee..,,thteh eSTSST Snunmubmebre rinin aa MMIIMMOO ssyysstteemm));;\n-L Linidnidciactateess ththee nnuummbbeerr ooff HHTT--LLTTFFss iinn aa ssiinnggllee PPPPDDUU;;\nSSay if we collectt aa 1100 sseeccoonnddss ccsisid adtaatas tsetaemama tat1 1k HkzHzs asmpalmeplrea treat(eT(T== 1100 *\n1000), ffrroom a 3-anteennnnaa AAPP(A == 33),witwiht h80820.21.1n1 nssttaannddaard(S(S ==575 7susbucbacrarriieerr))\n,wwiitthhoouutt oonnllyy oone spatial  strreeaamm((L= =1)1,)t,hteh edadtat asisziez eshsohuoludld bbee [[110000000 5577 3\n1]..\n%}\nclear all;;\naddpath(genpath(pwd));\np%0%. 0.SeSte tpapraarmaemetteerrss..\nP%aPtaht hofo fthteh ecaclailbirbraattiioonn ddaattaa;;\ncalib_file_name  =''..//ddaattaa//ccssii__ccaalliibb__tteesst..mmat';\nP%atPha tfhorf orstsotroirnign gthteh egegneenreartaetde dcaclailbirbartaitoionn tetemmppllaatteedd..\ncalib_template_name  = ''..//ddaattaa//ccaalliibb__tteemmppllaattee__tteesstt..mmaatt'';;\nP%atPhat hofo fthteh erarwa wCSCSII ddaattaa..\nsrc_file_name =''..//ddaattaa//ccssii__ssrrcc__tteesstt..mmaatt'';;\nP%atPha thfofro rstsotroirnign gthteh esasnaintiitzizeedd CCSSII ddaattaa..\ndst_file_name =''..//ddaattaa//ccssii__ddsstt__tteesstt..mmaatt'';;\nS%peSepede dofo flilgighhtt..\nglobal c;\nc= =phpyhsycsoconnsstt((''LLiigghhttSSppeeeedd''));;\n�% aBnadndwwiiddtthh..\nglobal bbww;;\nbw = 20ee66;;\n %SuSbucbcaarrriieerr ffrreequency.\nglobal subcarrier_freq;\nsubcarrier_freq  =  liinnssppaaccee((55..88115533e9e,9,5.8347e99,,5577));;\nS%ubScubacrarrireire rwawvaevleelennggtthh..\n18 ZZhheenngg YYaanngg,, YYii ZZhhaanngg,,GGuuooxxuuaann CChhii,, aanndd GGuuiiddoonngg ZZhhaanngg\nglobal subcarrier_lambda;;\nsubcarrier_lambda = c ./ subcarrier_freq;\n�% nAtnetnennaa aarrraannggeemmeenntt..\nantennnaa__lolcoc= =[ 0[,00,,0,00;;0.05511446656,5,00,, 0;00,,0.00.505114466665 ,00]]'';;\nS%etS ethet hleinleinaera r arnagneg eofo fthteh eCSCIS Iphpahsaes,e ,whwihcihc hvavraireises wiwitthh NNIICC ttyyppeess..\nlinear_intervvaall ==((2200::3388)'';\np%1%.R1e.aRde atdhet hcesic sdiatda tfaorfo rcaclailbirbartaitoino nanadn dsasnaniittiizzaattiioonn..\nL%oaLdoa dthteh ecaclailbirbartaitioonn ddaattaa..\ncsi_calibb== llooaadd((ccalib_file_namee))..ccssii;;�% SCIS Ifofror ccaalliibbrraattiioonn..\nL%oaLdoa dthteh erarwa wCSCISI ddaattaa..\ncsi_src == llooaadd((ssrrcc__ffiillee__nnaammee))..ccssii;; R%aRwa wCSCSII..\np%2%.C2h.oCohsoeo sdeifdfiefrfeenrte nftunfcutncitoinosn sacaccocrodridnign gtoto yyoouurr ttaasskk..\nU%sUes ecacsaseess::\nM%akMeak ecaclailbirbartaitoino ntetemmppllaattee..\ncsi_calib_templattee == sseett__tteemmppllaattee((ccssii__ccaallibib,,linear_intervvaall, ccaalliibb__tteemmppllaattee__nname)\n;\n�% iDriercetcltyl ylolaodad ththee ggeenneerraatteedd tteemmppllaattee..\ncsi_calib_template = llooad((ccaalliibb__tteemmppllaattee__nnaammee))..ccssii;;\nR%eRmeomvoev ethteh enonnolnilnineeaarr eerrroorr..\ncsi_remove_nonlinear  =  nonlinear_ccaalliibb((ccssii__ssrrcc,,ccssii__ccaalliibb__tteemmplate);\nR%emRoevmoev ethteh eSTSOT(Oa.(ka.ak .aSFS0F Oanadn dPBPDB)Db)y bycocnojnujguagtaet emumluiltiptlpliiccaattiioonn..\ncsi_remove_sto = sstto_calib_mul(ccssi_src);\nR%eRmeomvoev ethteh eSTSOT(Oa.(ak.ka. aSFS0F Oanadn dPBPDBD))byb ycocnojnujguagtaet edidivviissiioonn..\ncsi_remove_sto == ssttoo__ccaalliibb__ddiivv((ccssii__ssrrcc));;\n�% sEtsitmiamtaet ethtehe CFCFOO bbyy ffrreeqquueennccyy ttrraacckkiinngg..\nest_cfo = cfo_calib(csi_src);\n�% sEsttiimmaattee tthhee RRCCOO..\nest_rco = rrccoo__ccaalliibb((ccssii__ccaalliibb));;\np%3%.3 .SaSvaev ethteh esasnaintiitziezde ddadtataa aass nneeeddeedd..\ncsi = csi_remove_sto;;\nsave(dst_file_naammee, ''ccssii''));;\np%4%.P4.erPfeorfmo rvmarviaoruiso uswiwrierlelsess ssesnesnisningg ttaasskkss..\nT%esTte setxaemxpalmpel e1:1a:ngalneg/ldei/rdeicrteicotni oensteismtaitmiaotni ownitwhi tihmpiempre rffeecctt CCSSII..\n[packett__nnuumm,, subcarrierr__nnuumm,,aantenna_nuumm,,~~]]= =siszieze((ccssii__ssrrcc));;\nest_rco = rco_calib((ccssii__ccaalliibb));;\nzero_rco = zeros(antennnaa__nnuumm,,11));;\naoa_mat_error  =  naivvee__aaooaa((ccssii__ssrrcc,, antenna_loc ,zezerroo__rrccoo));;\naoa_mat  =  naivee__aaooaa((ccssii__ssrrcc,, antenna_loc ,eesstt__rrccoo));;\naoa_gt  == [[00;;0; 11]];;\nerror_1 = mean(accooss((aaooaa__ggtt''*aoaao_a_mmaatt__eerrroorr))));;\nerror_2 == mmeeaan(acos(aoa__ggtt'' *aoaao_a_mmaatt)));;\ndisp(\"Angle  esttiimmaattiioonn eerrroror(in  degg))wwiitthhout RCO removall::\"\"+ +nunmu2ms2tsrt(re(rerroorr__11))));;\ndisp(\"Angllee eessttiimmaattiioonn ererorror(inn ddeegg))wwith RCO removaall::\"\"+ +nunmu2ms2tsrtr((eerrroorr__22))));;\nT%esTte stexeaxmapmlpel e2:2i:ntirnutsriusoino ndedteetcetcitoino nwiwtithh CCSSII..\ncsi_sto_calib == ssttoo__ccaalliibb__ddiivv((ccssii__ssrrcc));;\nintrusion_flag_raw  =  naive_intrussiioonn((cssii__ssrrcc,,33));;\nintrusion_flag_sanitized  =  naive_inttrruussiioonn((ccssii__ssttoo__ccaalliibb,,33));;\ndisp(\" Inttrruussiioonn ddeetteeccttiioonn rreessuultlt wiwtihtohuotutS FSOF/0P/DPDDDr ermeomvoavla:l:\"\" + num2str(\nintrusion_flag_rraaww))));;\nddiisspp((\" I\"nItnrtusriuosniodent edcetitoenctreisounl trweistuhlStF Ow/iPDtDh rSeFmoOv/aPlD:D\" r+enmuomv2astlr:(\"+ num2str(\nintrusion_flag_sanitizedd))));;\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 119\n5.11 NNoonlnilinneeaarr Amplpilittudee and Phase\nThhee nnoonnlilinneeaarr aammplpiltituudde eaannd dpphahsaes eererororsrs aarree causseedd byy the immppeerrffeecctt analog domaianin ffiiltteerrimmpplle--\nmenetnattaitoion nininsisdidee tthhee hhaarrddwawrae.re S. pSepceicfificcaalllyy,, iittc acuausseesst htehee xetxrtarcatcetdedC CSSIIa mampliittuuddee aannd pphassee to be\neeqquuiivvaalleennttllyy pprroocceesssseedd bbyy aa nnoonnlliinneeaarr ffuunnccttiioonn.. LLeett\uD835\uDC53 5((·)-)aanndd \uD835\uDC546((·)) bbee tthhee nnoonnlliinneeaarr mmooddeess ooff CCSSII\naammplpiltituudde eaannd dpphahsaes,e ,rreessppeectcitivveellyy,,tthhee ∑︁eerrrroorroouuss CCSSI Iccaann bbee wwrirtittteenn aass::\uD835\uDC41\n\uD835̃\uDC3B1(\uD835\uDC568,-\uD835\uDC57,9\uD835\uDC58))==95(\uD835\uDC53L(\uD835\uDEFC) −\uD835\uDC57 ( \uD835\uDC5B \uD835\uDC56\n\uD835\uDC5B4)\uD835\uDC52-9\uD835\uDC546\uD835\uDF199-( 0, \uD835\uDC57,\uD835\uDC589)0) ++#\uD835\uDC41((\uD835\uDC568,-\uD835\uDC57,9\uD835\uDC58)9. (28)\n\uD835\uDC5B=1\nSSppeecciiffiiccaalllyl,yd,duurrininggt hteheO OFFDDMM mmodoudluatlaitoino nprporcoecsess,s ,eeaacchh ssuubbccaarrrriieerr ooff sshhoouulldd hhaavvee tthhees asmamee\ngaaiin.. Inn oothher wworrddss,, thhe aampplliituddee--ffrequueenncyc ychcahraarcatcetreirsitsitcic ooff CSSII shoouuldld bbee aa hoorriizzoonntatall straight\nlinne wwheenn aa coaaxxiiaall cable iissu suesdedt otoc ocnonneeccttt htehet rtarnasncsecievievrerp oprotrst. sH. oHwoweevveerr, ,a catcutaulaml emaesausureremments\nshooww thtahta teevevne nwiwthitohuto uttheth meumltuipltaitpha trhadriaod icohacnhnaenl,n etlh,etrhee ries istsitlill a simmiilar \"\"ffrreeqquuencyy sellective\nfading\"\" chaarraacctterristiicc,,ii.e..e,.t,h ethgea ignaionf oefa cehacfhr efqrueeqnuecnycyb abnadndi sisd idffiefrfeenrte,nsth, oswhoinwignga nanM M--sshhaapped\namplpiltituudde-ef-frreeqquuenecnyc ychcahrarcatcerteirsitsitcic ccuurrvvee.. Siimiillarrly,  wwheenn uussiingg aa cooaaxxiiaall cable too ccoonnnecctt thhe\ntransceiiver porrt,  tthhee CCSI  pphhase-frreeqquenccyy cchhaarraactceterriissttics oobtainned by the NIIC aarree nnoott aann iideeaall\nstraight liinnee wwithh ssllooppe, b buutta ann SS--sshhaapped curvee witithh cceerrttaaiin noonnlilinneeaarirtityy..\nAfftterr extensivve rreesseeaarrcchh aanndd eexxpperimmentts, we ehhaavev eoobsbesrevrevde dtwtwo ofafcatcsts..\n●• FFiirrsstt, for aaspeecciiffiic ttyyppe ooffN NIICC, the nnonllineaarr amplpilittuudde/ep/phahsaes ererrorro roof fCCSSI Iiis fifxixeedd..T Thhiissm meeaans\nthaatt thhe ccoorrrreeccttioinont atsakskc acnanb ebae caccocmomppllisihsehdedi fiwfweeu usseea akknnownn llenggtthh coaaxxiiaall ccaabblee ccoonnnnected\nto the trraannsceivver pport..Before performining gtthhee sseennsisinngg ttaasskk,, meeasausruer ea arreeppreresseentnattaitvivee sseett of\nCSSII amplpiltituuddee aannd dpphahsaes,e ,rreeccoorrdd tthhee nnoonnlilinneeaar rcchhaararactceterriissttics, andd ellimmiinaattee the nonnlliineaarriity\nin thhe suubsequueennt tssttepss..\n●• SSeeccoondn,d ,wwe eobosbesrevrev tehtaht athteh emimddilded lpearpta rotfo tfhteh esusbucbacrrairerrie risi sffrreee off nonnlliineeaarr eerrrrorrss,, aand the\nnoonnlilinneaera rcchharaarcatcetreirsitsiticcss off botth sides areaallssoo ffiixed..\nThheerreeffoorree,,tthheefufuncntcitoion nbbeleoloww ththe eccoodde eppeerrffoorrmms stthhee ffollloowiingg steps ttootacklee ththeeCSIInnoonnlilinneeaarriitty::\n(1) Reaadd iin a set ooff CCSSI  ddaattaa mmeassuurreedd uussiinng gaa ccooaaxixaila lccaabbllee..\n(22) GGete tiits aammpllituude and phaassee..\n((33))NNoromramliazleiz eitists aammplpiltiutuded eanadn drerceocrodr ditit aass tthhee aammpplliittuuddee tteemmpplalattee..\n(44) UUnwnrwapr atphet hpehapsheass,e st,hethn epnerpfeorrfmo ram lainleianre afritfi tttoo tthhee mmididldel epparatr tooff its  ssuubbcarrieerrss..SSubttract\nthee linnearr fifittr erseusultltt oto botbatianint htehen onnonllinineeaarr pphhase error tteemmppllaattee..\nFFiinaalllyy, thhe nnoonliinneeaarrampplliitude and nonllinear pphhase ccoommpoonneenntsts aarre saved iinn ththeef ofromrmof  \uD835\uDEFCU\uD835\uDC524\uD835\uDC579\uD835\uDF199,\nwwhihcihc hinindidciactaetse stthhee nnoonlnilnineaera rereroror rtteemmplpaltaet eofo faa ssppeecciiffiic tyype of NNIC..\nfunction [csi_calib_template]  =  set_temmppllaattee((ccssii__ccaalliibb,,lliinneeaarr__iinterval ,\ncalib_template_name)\ns%este_tt_etmemppllaate\nI%nIpnuptut::\n?%si_-caclsib_ cailsi bthies trheeferreefnercen ccesic siata tgigvievnen ddiissttance  aanndd aangnlgel;e;[[TTS SA LL]\n-%line-alri_nienatre_rivnatler viasl tihse tlhienleianre arranrgaen geofo fthteh ecscisi pphhaasse,,whwihcichh vvaarriies\nacross different types of NICs;\n?%cali-bc_atleimbp_ltaetmep_lnataem_en aimse tihse tshaevesadv epdatpha tohf otfheth egegnenreartaetde dtetmemppllaattee;;\nO%uOtuptuputt::\n?%csi-_ccaslii_bc_atleibm_ptleamtpel aitse itshet hgeengernaertaetde dtetmepmlpalattee ffoorr csi caliibbrraattioino;n;[[11 SSA\nLL]\n[packet__nnuumm,,ssuubbcarrier_nuumm, aanntteennna_num ,exexttrraa__nnuumm]]= =sisziez(ec(scis_i_ccaalliibb));;\ncsi_amp = abs(csi_calib); ?% [ST SA ALL]]\ncsi_phase  =  uunnwwrraapp((aannggllee((ccssi_ic_aclailbi)b,),[[]],,22));; [%T[ T SSAALL]]\ncsi_aammpp__ttemepmlpaltaete= m=e amne(acns(i_casmip_a.m/p me.a/n (mcesain_a(mcps,i_2a)m,p,1)2;),%1)[;1?S SA LL]]\nnonlinear_phase_error = zeros(ssiize((ccssii__ccaalliibb))));; ?% [ST AS ALL]]\n220 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nfor p == 11::ppaacckkeett__num\nffor a = 1: antenna_num\nfor e== 11::eexxttrraa__nnuum\nlinear_model = fit(linear_interval , ssqquueeeezze((ccssii__pphhaassee((pp,,\nlinear_iinntteerrvavla,l,a, ee))))'','p'opollyy11''));;\nnonlinneeaarr_p_hpahsaes_e_rerorr(opr,(p:,:a,,a,e )e)== cscis_ip_hpahsae(spe,(p:,,:,aa,,e) --\nlinear_model((1:ssuubbccaarrrriieerr__nnuumm))'';;\nend\neend\nend\ncsi_phassee__tteemmplpaltaete= =m emane(ano(nloinnleianr_epahra_speh_aesrreo_re,rr1o)r;,1%);[1[1S SAALL]]\ncsi__pphhaassee_t_etmepmlpaltaet(1e,(1l,ilnienaera_irn_tienrtvearlv,al:,::,):)==00;\ncsi_calliibb__tteemmplpaltaete= =c scis_ia_map_mtpe_mtpelmaptleat.e* .ex*pe(x1pi(1*i*ccssii__phpahsaes_et_etmepmlpaltea)t;e)%;[[11 SS\nA L]\ncsi== ccssii__ccaalliibb__tteemmppllaattee;;\nsavee((ccaallibi_bt_etmepmlaptlea_tnea_men,am'ec,s'ic's);i'%);[[11 SSA LL]]\neend\nAfftteerr geetttinng the nonnlliineeaarr errrorr tempplalattee,, the sanitizzaattioionn pprrooccess  bbeeginns.  FFoorr tthhee rraaww CSSII\nddaattaa ccssii__ddaattaa ccoolllleecctteedd iinn rreeaall ttimimee,, wwee ddiivviiddee iittb byy tthhee eerrrroorr tetemmppllaattee ccssii__ccaalliibb..T Thhiiss ooppeerraattiioonn\nis eeqquivvaleennt  ttoo“ d\"idviivdiidnigngt hteheo roigringianlaalm apmlpitluidtuedbe ybtyh ethne onromramalilziezdedn onnonlilnienaerara mamppllitiutdued”e\"aannd\n“ssuubbtrraaccttiinngg tthhee oorriiggiinnaallp phhaassee ffrroomm the nonnlliineeaarr pphhasaes”e”, so thatt thhe rreetuurned CSSI Iddaattaa ccssii__pproc\nhhaass ssaanniittiizzeedd aammpplliittuuddee aanndd pphhaassee..\nfunction [csi_remove_nonlliinneeaarr]]== nnoonnlliinnear_calib(csi_calib , ccssii__ccaalliibb__tteemmppllaattee))\nn%onolnilnienaera_r_ccaalliibb\nI%nIpnuptut::\n?%csi-_scrsci _isrsc tihse trheawr acwsic siwhwihcihc hneneeddss tto be  caalliibbrartaetde;d;[[TTS SAALL]\n?%csi-_ccaslii_bc_altiebm_ptleamtpela ties itshet hererfeefreernecncee ccssii for  calliibbrrataitoino;n;[[11S SA LL]]\nO%uOtuptuputt::\n-%csi_-rcesmio_vree_mnoovnel_inonnelairn eiasr tihse tchesic sdiatdaa tian iwnhiwhcihc hthteh enonnolnilnineeaarr eerrrroor has\nbeen eliminatteedd;;[[TT SS AA LL]\ncsi_amp = aabs((ccssii__ccaalliibb));; ?%  [ST AS ALL]]\ncsi_phaassee == uunnwwrraapp((aannggllee((ccssii__caclailbi)b,),[], 22));; [%T[ T SSAALL]]\ncsi_unwrap  =  cssii__aammpp ..** eexxpp((11ii*cscsii__pphhaassee));; ?% [ST AS AL]L]\n�% rBoraodacdacsasttiinngg iiss ppeerrffoorrmmeedd..\nccssii__rreemove_nonlinear == ccssii__uunnwwrrap ..// ccssii__ccaalliibb__tteemmppllaattee;;\nend\n55..22 AAutuotmoamtiacti cGGaiani nCConotnrtorlo lUUnncceerrttaaiinnttyy\nAuuttoommataitcic ggaaiinn connttrroll((AGGC)C )inindducuecse saa ∑︁rranddoomm gagiani nVi\uD835\uDEFDni neaecahc hrerceecieviveedd CCSIS Ippaacckkeett..\uD835\uDC41\n\uD835̃\uDC3B-(\uD835\uDC56, \uD835\uDC57, \uD835\uDC58) = \uD835\uDEFD4\uD835\uDF19 , )\n\uD835\uDC56\uD835\uDEFC\n− ( ,\n\uD835\uDC5B\uD835\uDC52\n\uD835\uDC57 \uD835\uDC5B \uD835\uDC56 \uD835\uDC57 \uD835\uDC58 ,+#\uD835\uDC4118(·\uD835\uDC56, \uD835\uDC579, \uD835\uDC58?)?. ((2299))\n\uD835\uDC5B=1\nTThhereere aarree twoo wwayasy sttoo eellimiinaatte thhe AAGCC eerrroorr::11))DiDsiasbalbel etthhee AGGC Cfufnucntcitoino nofo ftthhee wirireelless\ndrriver; 2) CComppenesnastaet etthhee ammplpilittuuddee ooff thhe mmeassurreedd CSSII based on the rreeppoorteedd AAGC..\nfunction [csi_removvee__aaggcc]]== aaggc_calib(csi_srcc, ccssii__aaggcc))\nr%croc_oc_aclaliibb\nI%nIpnuptut::\n?%si_-srccs ii_sr cthies rthaew rcaswi cswihiwchhi cnheneedesd stoto bbee ccalibrraatteedd;;[TT SSALL]]\n?%csi-_acgsci _iagsc tihse tAhGeCA GaCmpalmiptliutdued ererpeoporrtteedd by thee NNIICC;;[T,,11]\nO%uOtuptuputt::\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 221\n?%csi_-recmsio_vree_maogvce _iasg cthise tchsei cdsaitad aitan iwnhiwchhi cthhet hAeGACG Cunucnecretratianitntyy hhaass bbeeeen\neliminaatteedd;;[T S AA LL]]\n�% rBoraodacdacsasttiinngg iiss ppeerrffoorrmmeedd..\nccssii__rreemove_agc == ccssii__ssrrcc ..// ccssii__aaggcc;;\neend\n5.3 RRadaidoio CChahianin OOffffsseett\nRRaaddiioo cchhaaiinn offffseet (RCOO)i)si stthhee randdoomm phpahsaes evavrairaitaitioonn n\uD835\uDF16g\uD835\uDF19 introducedd bettweeenn ddiifffferent TTx/RRx\ncchhaaiinnss(t(trraannsscceeiivveerr aanntteennnnaa ppaaiirrss)).. TThhee RRCCO Oisi srreesseett eeaacchh ttiimmee tthhee NNIICC iiss ppoowweerreedd uupp..\nq\uD835\uDF19\uD835\uDC5B=(1\uD835\uDC56,8\uD835\uDC57,·\uD835\uDC58)9==22\uD835\uDF0Bc(\uD835\uDC531\uD835\uDC505+,Δ5\uD835\uDC53,\uD835\uDC57 +5°\uD835\uDC53\uD835\uDC37 )g\uD835\uDF0F\uD835\uDC5B1(\uD835\uDC568,·\uD835\uDC57, \uD835\uDC589) +n·\uD835\uDF16\uD835\uDF19 , ((30))\nRCCO Oinidnudcuecse as abibaisats tooff the phaassee--ffrequeennccy ycchharaarcatcetreirsisttiic curve. IIttu nunddeerrmmines thhe aaccccuuracy of\nfeatures such as AooAA oro rTToFo.F .FFoortrutunantaetleyl,y ,wwe effoouundn dthtahta t hthisis ttyppee ooff phhaassee ddeevviaiattiioonn iis conssiistent\nbeettweene neaecahc hsuscuccecsessisvive eppacakcekte tsseennt taanndd tthheerreeffoorree ddooeessnn't’t affffeect  ththeep peerrfoformrmance of tteemmpoorraall\ntrackiingg orr senssiingg,,aandn dthtahta ttthhisis typpee ooff error can be eliimm inattedd byy tthee folloowiingg sstteppss::\n((1)OOncnec ethtehNeINC IpCowpeorw-uepr,- ucpo,ncnoenctn etchtet hteratnrascnesicveeivr eproprotr tusuisning gaa ccooaaxxiiaall cablee ooffk nknoowwn leenngth\nanndd rreeccoorrdd tthee phhaassee iinfforrmataitoionn ccaalliibb__pphhaassee..\n(2) dduurriing subsequeenntt meeaassuurreemmenetnst,ss, usbutbrtaraccttiingg thiss pphhaasseei nifnofromrmaatitoinonf rofrmomtthheem measuureedd\nphhaasese ccssii__pphhaassee..\nfunction [est_rco] == rrccoo__ccaalliibb((ccssii__ccaalliibb))\nr%croc_oc_aclaliibb\nI%nIpnuputt::\n?%si_-caclsib_ cailsi bthies trheeferreefnercen ccesic siata tgigvievnen ddiissttance  aanndd aangnlgel;e;[[TTS SA LL]\nO%uOtuptuputt::\n?%est-_recsot_ ricso tihset heesteistmiamtaetded RRCCOO;[[AA 11]]\nantenna_num  =  size(csii__ccaalliibb,,33));;\ncsi_phase  =  unnwwrraapp((aannggllee((ccssii__ccalailbi)b,),[], 11));; ?% [STAS AL]L]\navg_phase  =  zeros(anteennnnaa__nnuumm,,11));;\nfor a = 1: antenna_num\naavg_phaassee((aa,,1) == mean(cssii__pphhasaes(e:(,:,::,,a, 11)),,'a'lall''));;\nend\nest_rco  =  avvgg__pphhaassee --avg_phase(11,,11));;\neend\n5.4 CCenetnrtarla l Frrequueennccyy OOffffsseett\nCeenntrtraall freequenccyy offffset (CFFOO),), whhicichh iis caused by the ffrreeqquuency desyncchhrroonnizizaattiioonn oonn bbootthh ssiides\noff thhe trraannsceiver,  lelaedadsst otor arnadndoomm freequeennccyy sshhififtt \uD835\uDF16n?\uD835\uDC53  of eeaach received CSSII..\nq\uD835\uDF19=\uD835\uDC5B1(\uD835\uDC568,·\uD835\uDC57, \uD835\uDC589):==2\uD835\uDF0Bc(1\uD835\uDC53\uD835\uDC505,+5Δ,\uD835\uDC535\uD835\uDC57 ,+n\uD835\uDC535\uD835\uDC37°+ \uD835\uDF16g\uD835\uDC531)8\uD835\uDF0F\uD835\uDC5B·(\uD835\uDC56,9\uD835\uDC57=, \uD835\uDC58q)==18\uD835\uDF19·\uD835\uDC5B (\uD835\uDC569, :\uD835\uDC57,,\uD835\uDC58n)?+g\uD835\uDF16-\uD835\uDC531\uD835\uDF0F\uD835\uDC5B8(·\uD835\uDC56, \uD835\uDC579, \uD835\uDC58”) . ((311))\nTThhe eCCFOF Oindinudceusc easn aenxterxat rbaiabsia s(i(.i.ee..,  aann ooveralllu upp aanndd ddownn sshhiifft) oof  tthhee pphhaasee-ffrreeqquueenncy\nchaarraaccteterriissttiic curvee..\nTToo eellimmiinatte CCFO,, wee neeeedd to iinnsseerrttm muulltitpilpelHe TH-TL-TLTFFssi ninth tehsea msaemeP PPDPDUU (Wi-i-FFii data ffrarmame),,aannd\nttheerrefore obtainninngg mmulltipplleeC CSSIIm meeaassuureemmeennttss..SSiinccee the tiimme iinntteerrvvaallb ebtewtweeenn mmultiippleleH HTT--LLTTFs\nis ssttrricitcltylyc ocnotnrtorloleldletdo t4o\uD835\uDF07 \uD835\uDC604Baaccccording too tthhee 880022.1111 pprroottooccol,,t htehep hphaasseed diffifefrernecneceb ebtewtweeeenn ttwwo\nHHT-TL-TLFTsF siissiinndduucecde dbbyy tthe CFOO wwitithhiin ΔC=\uD835\uDC614=B.4 \uD835\uDF07T\uD835\uDC60h.uTs,h utsh,eth aepapprporxoixmiamtea tevavlauleu eoof f the CCFO can be\nrrecovveerred..\n222 Zheenngg Yang, Yi ZZhhang, Guooxxuaann Chhii, and Guidong ZZhang\nfunction  [esstt__ccffoo]] =cfcof_oc_aclaliibb((ccssii__ssrrcc))\n�% fcofo__ccaalliibb\nI%nIpnuptut::\n?%csi-_scrsci_ sirsc tihset hcesic sdiadtaat awiwitthh ttwo HTT--LLTTFsF;s;[[TT SSA LL]]\nO%uOtuptuputt::\n?%est_-cefsot _icsf othies ethsetiemsattiemda tfedrefqrueqnuceyn coyf offsseett;;\ndelta_time == 44ee--66;;\nphase__11 == aanngglel(ec(scis_is_rscr(c:(,:,:,:,:, 11))));\nphase_22 == aannggllee(c(scis_is_rscr(c:(,:,::,,:, 22))));;\nphasee__ddifif f== mmeeana(np(hpahsaes_2e_-2-p hpahsea_s1e,_13,)3;)%;[[TT SAA 11]]\nest_cfo = mean(phase_diffff .// ddeellttaa__ttiimmee,,22));;\nend\n5.5 SSaammplpilnign gFrFerqeuqeunecnyc yOfOfsffeste taanndd PPaacckkete t Deetteeccttiion Deellay\nThe sampplling frreeqquueennccyy ooff sseett( S(FSOF)O,)w, hwihcihcahp appepaersartso bteo abne earnr oerrirnorfr eiqnu efnrceyqudeonmcya idno, maarien, are\ngenerrallyy ccoonnssidideererdeda sasa naenq ueqivuailveanltentitm teismhei fsthdiufet todufer etqou efnrceyquaesnycnyc harsoyncyh. rTohney.p aTchkee tpdaectkeectt iodentection\ndeellay((PDDD)Di)sias atitimme eddeellaayy..TThheerereffoorree,,ddeessppiite tthheeirird isdtiisntcitnccatu sceasu,stehse,y atrheyo faterne doifstceuns sdeidstcougsestehde rtogether\nas aa “tiimme ooff set” together.\nq\uD835\uDF19=\uD835\uDC5B (1\uD835\uDC56,8\uD835\uDC57·, \uD835\uDC58)9=:=2\uD835\uDF0B2(c\uD835\uDC531\uD835\uDC50 5+,Δ5\uD835\uDC53,\uD835\uDC57 +5°\uD835\uDC53\uD835\uDC37 )1(g\uD835\uDF0F\uD835\uDC5B?(8\uD835\uDC56,·\uD835\uDC57, \uD835\uDC589),+ \uD835\uDF16n\uD835\uDC61 )c=°\uD835\uDF19=\uD835\uDC5B (q\uD835\uDC56,=\uD835\uDC571, \uD835\uDC588)·+ 29\uD835\uDF0B:(,\uD835\uDC53\uD835\uDC502+c1Δ5\uD835\uDC53\uD835\uDC57,+5g\uD835\uDC53\uD835\uDC37,)5\uD835\uDF16\uD835\uDC61n.c\"(3(322)\nThhiiss type of  eerrororri sicsr ictriciatlibcaelc abuesceatuhse ttimhee tdiemlea ydeclaany bceacno bnefu csoendfwusiethd rweiatlh TroeFala nTdoFt haunsd thus\na ffeecctt thhe aaccccuuraaccyyooff thhe rraanngginngg aaccccuuaarrccyy..SSpecifi calllyy, ,ththisisd edveivaitiaotniown ilwliblel cbhea rcahcatrearciztedriiznedth ien the\nphhaassee--ffrequeennccyy chaarraacctteristticicc ucruvrevea saas cah acnhganegien islno psel,ospien,c esitnhcise ttimhies dteivmiea tidoenvicaatuisoens dcaiffuseeresn dti erent\nphaassee changeess wiith ddiiff eerreenntts usbu-bb-abnadndssΔ5g\uD835\uDC53\uD835\uDC57..\nCuurrreenntltlyy,, tthheerree isisn ono“ ppeerrffeecctta laglogroirthitmhm” ttoo sosolvlevet htihsitsy pteypoef oefrr oer.rCoro.nCjoungjaugteatme umlutilptliipclaiticoantion\nand divviisisoinona raertehteheo nolynltyw otwmo emthetohdosdtso etloi meilniamtientahtee StFhOeSaFnOd aPnDdD P.DTDh.e Tchoed ecodfeb ootfh obfothe mof atrheem are\nliisstetdedb ebelolwow..BBy applinng tthhee ccoonnjuugate mmulltippliciacatitoinono rord idvisviosni,otnh, et\uD835\uDF16h\uD835\uDC61eis  eelilmimiinnaatteedd,,aat  ththeec ocsotsto fof\nloossiningga basbosloulteutTeo FTomFe amseuarseumrenmet.nt.\nfunction [csi_remove_sto] = ssttoo__ccaalliibb__mmuul((ccssii__ssrrcc))\ns%tost_oc_aclailbib__mmuull\nI%nIpnuptut::\n?%csi-_scrsci_ sirsc tishet hcescis idadtataa wwith  ssttoo;;[TT SSA LL]]\nO%uOtuptuputt::\n?%csi-_rcesmio_vrem_osvteo_ stios itsheth ecscis idadattaa wwithouutt sstot;o;[[TT SSA LL]]\nantenna_num  =  size(csi__ssrrcc,,33));;\ncsi_remove_sto = zzeerrooss((ssiizzee((ccssii__ssrrcc))));;\nfor a = 1: antenna_num\na_nxt  =  mmoodd((aa,,anteennnnaa__nunmu)m)++11;;\nccsi_reemmoovve_es_tsot(o:(,::,,:,aa,, :)== ccssii_src(::,,:,aa,,:):.)* .*cocnojn(jc(scsii__ssrrc(:, ::,,\na_nxt , ::))));;\nend\nend\nfunction [csi_remove_sto] == ssttoo__ccaalliibb__ddiivv((ccssii__ssrrcc))\ns%tost_oc_aclailbib__ddiiv\nI%nIpnuptut::\n?%si_-srccsi _issr ctihse tchesic sdiadtaat awwiitth stoo;;[T  SSALL]]\nO%uOtuptuputt::\n?%csi-_rcesmio_vrem_osvteo_ stios itsheth ecscis idadattaa wwithouutt sstot;o;[[TT SSA LL]]\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 223\nPuusshh  &P Pulull SSwweeeepp CCllap\nSSllide Drraww  CCiirrclee DDrraaww  ZZiiggzzaagg\nFig. 9. SSkektecthcehse sofo fggeessttuurreess evaalluaatteedd in thhe eexxperimmeenntt..\naantenna_num = size(csii__ssrrcc,,33));;\ncsi_remove_sto = zeros(ssize((ccssii__ssrrcc))));;\nfor a = 1: antenna_num\na_nxt  =  mmoodd((aa,,anteennnnaa__nunmu)m)++11;;\ncsi_reemmoovve_es_tsot(o:(,::,,:,aa,,:) == csi_srrcc((::,,:,, a,::))./. /cscsii__ssrrc(:, ::,,a_an_nxxtt,,\n:);\nend\nend\nToo summ uup,p ,tthheerree arre various foormmss of eerrrroorrss ininW Wi--FFiiC CSSIIm measuremeenntst,s,ininclculuddining gffiixeedd bbiias\nandd rraannddoom mererrorosr.s .EEacahc hofo ftthheemm hahvaev edidfifffeerreennt tiimpapcatcst soon nththe ellooccaalliizatioon,  ttraracckkiningg,,aand sensing\nttaskss.. TThe e∑︁rroneoouuss CCSSIfIofromr mcacna nbeb feifinanlallyly wwrirtitteenn aass::\uD835\uDC41\n\uD835̃\uDC3B-(\uD835\uDC56, \uD835\uDC57, \uD835\uDC589) =-\uD835\uDEFD \uD835\uDC57 ( \uD835\uDC56 \uD835\uDC58\n\uD835\uDC56 \uD835\uDC53_(\uD835\uDEFC \uD835\uDC5B \uD835\uDC57\n\uD835\uDC5B)\uD835\uDC52s− \uD835\uDC54 \uD835\uDF19u( , , )),+#\uD835\uDC411(8\uD835\uDC56,·\uD835\uDC57,9\uD835\uDC58:),q\uD835\uDF19=\uD835\uDC5B1(8\uD835\uDC56,·\uD835\uDC57, \uD835\uDC589)==2c21\uD835\uDF0B5(,\uD835\uDC53\uD835\uDC505+,Δ5,\uD835\uDC53\uD835\uDC57n+5\uD835\uDC53°\uD835\uDC37+1\uD835\uDF16g\uD835\uDC53-)1(\uD835\uDF0F8\uD835\uDC5B·(\uD835\uDC56,9\uD835\uDC57:, \uD835\uDC58n)c+°\uD835\uDF16\uD835\uDC61 ),+n\uD835\uDF16”\uD835\uDF19 .\n\uD835\uDC5B=1\n(33)\n6 WWIRIREELLEESSS SENSINNG WWITTHH DDEEEEPPL ELAERARNNINIGNG\nTThhisis secttion inntrrooduceess a sseerriieessoof  lelaearnrniningga alglogorritihtmhms, especialllyy ththeep rpervevaalelennttd edeeppn neeuurraalln neetwtwork\nmmodoedlesl sssuuchc haassCNCNN aNnda nRNdNR, NaNnd, atnhdeitrh eaiprpalpipcalitciaotnios nisni nwiwreirleelses ssseennssiinngg..TThihsi ssseeccttiion also pprrooposes\naa complpelexx-v-vaalluueedd nneeuurarla l neettwoorkrtkot oacacocmopmlipslhis hlelaeranrinning gaannd diinnffeerreennccee baasseedd onnwiwrierleelsess ffeatures\nefffificienttlly..\n6.1 CConovnovloultuitoinoanla lNNeueruarla lNNetewtworokrk\nCCoonnvovloulutitioonnaall NNeeuurarall NNeettwworokr(kC(NCN)N Nco)nctornitbruitbeust etsot oththe erreecceenntt aaddvvaanncceess iinn uunnddeerrssttaannddiinngg iimmaaggeess,,\nvideos, aanndd aauudioos..Somee wworokrsk s[[111,,292,93,03]0 ]hhavaev eeexxplpoloititeedd CNN Nfofro rwwirierleelesss signal uunderstanding\nin wiireless sseennsiinngg ttaasskkssa anndd aacchhiieevveedd pprroomiising performaancnec.e .TThihsis sseeccttion wiilll pprreesseennt  aaw working\nexaammplpel ettoo demmonosntsrtartaete hhooww toto aappplyly CCNN Nfofro rwiwrierleelses ssseennssiingg..SSppeceicfifiicallyy,,w weeu usesec ocmommmooddiitty\nWi-iF-Fiitoto rreeccooggninziez essiixx huummana ngegsetsutruerse.s .TTheh egegsetsutruerse saarree iilluussttrraatteeddi ninF iFgi.g9..9W.We ddeploy a WWii--Fii\ntranssmmititteerr andd ssiix receivers inn aa tytyppiiccaallc lcalsassrsoroomom, a anndd tthhee ddeevviiccee sseetutupp isiss ksektecthceheddi ninF iFgi.g1.100..TThe\nusseerrss are asked toppeerrffoorrmm gegsetsutruerse sata ttthhee ffiive mmaarrkkeedd llooccaattiionnss anndd ttoo ffiivve oorriieennttaattioionnss..TThee datta\nssaammplpelsecsacna nbeb efofuonudn dini nouoru rrerelleeaasseedd ddaattaasseett [[2255]]..WWee eexxttrraacctt DDFFSS ffrroomm rraaww CCSIS Issiiggnnaallss aanndd ffeeeedd\nthem iintto a CNNN nentewtowrokr.k T. hTeh enentewtowrko rakrachrcihteitcetcutruer eiiss showwn ninin FFiig..1111..\nWWe enonwo winitnrtordoudcuec ethteh eimimplpelmeemnteanttiaotnio ncocdoed ieni ndedteatialil..\n224 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n不0.5m上 ←-00..99mm→|0.55mm\n→0.5m TTxx\nA B\n2\n1 3 Rx\n2m E 44 -0.9m LLoc\n5\nD C\nSensi Orriient\nSensing \nArreaa\n22mm - —→|0.55mmk\nFiig. 1100.  TThe setupp off WiFiFi iddeevviciceess ffoorr geesstturree recooggnnititiioonn ttaasskk..\n116@1166**1166*26 116@88**88*26\n992288(*T(T--44))\n66*121*T 2256 1128\nnn__dcalassss\n1166@55**33*6 22*2*2\n Max Pooling ae →\n3D Conv Max Pooling Flatten FFC FFC Softmax\nFi1g6.@ 1411*1.1.1 6CConvolluttion1a6ll@ NN2*e5uu8rraall Neettwworo1kr8 k5a6arcrchhitite1e2cc8ttuurree..\n6*121\n64\n16@3*6 2*2\nFFiirst,,s tos1mome nneecees2sDsa aCrroynyv ppaacckkages aaMrreaex iPmooplpionorgrtteedd.. Wee Fuluaststee nKKeerraasFsC [[5] AFPPCII wiith TenssoorrFFllow aass the\nbacckeenndd tto demoonsntsrtraattee howw ttoo imppllemmenetn ttthhee neeuurraall netwoorrkk..\nGRU\nimport os,sys 16@4*116 16@2*58 1856\n128\nimport nump6y*1 2a1s np 64\nimport scipy.io a1s6 @s3*c6io 2*2\nimport tte2nsorflow as tf 64\n2D Conv Max Pooling Flatten FC FC n_class\nimport keras GRU\nfrom keraass..llaayyeersrsi mipmoprotrtI nIpnutp,utG,RGUR,U,DDeennssee,,Flatttteenn,, Dropoutt, CCoonnv2D ,CoConSnvovf3t3mDDa,x,\nMaxPoolinngg22DD,,MMaaxPoolingg33DD,,TTiimmeDistributteedd,,BBiiddirectionaall,,MMuulltiply ,PPeerrmmuuttee,,\nRepeatVVeeccttoorr,,Concatteennaattee,,Dot , LLaammbbda\nfrom keras.models  import  Moddeell,,llooaadd__mmooddeell\n16@4*116 16@2*58\nimport keras.backend as K 1856 GRU\n128\n6*121\nfrom sklearn.metrics import confusion_matrix 64\nfrom kkeerraass..bbaacckkeennd1d.6.@tt3e*en6n sorflow_bac2k*2end import set_sessioonn\ntn\nfrom ssklearn.mmooddee2llD_ Csonevlection iimmMppaox rPto olitntrgraaiinn__tteesstFtl_a_tstsepnpllit FC FC\nThheenn wwe eddefeifinnee somme eppaararammetetresr,si,nicnlculudidningtghteh ehyhpyeprpearrpamreatmereste rasnda ntdheth deadtat apaptaht.h .TTheh effrraaccttion\nooff tteessttiinngg ddaattaa iissd deefifniendeda ass0 .01..1T.Too ssimimpplliifyfyt htheep prroobblleemm,, wwee oonnllyy uussee ssiixx ggeessttuurree ttyyppeess iinn tthhee\nwiiddaarr33.0.0 daattaasseett..\nLabel \n# PParameters Prediction\n64 64\nfraction_for_test = 0.1\n32\ndata_dir = 'widar30dataset/DFS /20181130/ ' n_class\nALL_MOTION = [1,,2,,3,,4,,5,,66]\n6*121*T FC FC Softmax\nN_MOTION = len(AALLLL_MOTION)\nCNN+RNN\n64 64\n32\nn_domain\nFC FC Softmax\nDomain \nDiscriminator\nSEN\nx4\n2m 0.5m\n0.9m 0.5m\nttaannhh\nCCoommpplleexx  FFCC\nttaannhh\nCCoommpplleexx  FFCC\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 225\nT_MAXX== 0\nn_epochs = 200\nf_dropout_ratio = 0.5\nn_gru_hidden_units = 64\nn_batch_size = 32\nf_learning_rate == 00..000011\nThhee pprrooggrraamm bebgeignisn swiwthit hlolaodaidnign gdadtaat awiwtiht hththe epprerededfeifinneed dffuunnctcitioonn llooaadd__ddaattaa. TThe looaded data\narre spllit  ininttoo trtarianina nandd tetessttb ybyc acallilnigngt hteheA APPIIf ufunnccttiioonn ttrraaiinn__tteesstt__ssplit. Thhee llabbeellss off the trainninng\ndaatta are encoddeedd iintto the one--hoott formaat twwitithh tthee prreeddeeffiineedd ffunnccttiionn oonehot_encoding.\n# Load ddaatta\ndata ,lalbaebell == llooaadd__ddaattaa((ddaattaa__ddiirr))\nprint('\\\\nnLLooaadeddedd adtaatsaesteotf o'f'++ ssttrr(l(albaeble.ls.hsahpea[p0e][)0]+)+''sampplleess,,each  siizzeedd'++ ssttrr\n(dataa[[00,,::,,::,,:,::,]:.]s.hsahpaep)e+)+'\\nn''))\n# SSplit ttrraaiinn aanndd tteesstt\n[data_trainn, ddaattaa__test ,lalbaebell__ttrraaiinn,,lalbaeble_lt_etsets]t ]== ttrraaiinn__tteesstt__ssplit(data ,llaabbeell,,\ntest_size=ffrraaccttiioonn__ffoorr__tteesstt))\nprint('\\nTTrraaiinn onon' ++ ssttrr(label_trraaiinn..sshhaapep[e0[]0)])++'' samples\\nn''++\\\n'Test  onn''+ +stsrtr((llaabbeell__tteest.shape [0]]))++' 'sasmapmplleess\\\\nn''))\n## OOnne--hhoott eennccoodding ffor ttrain data\nlabel_train = onehot_encoding(labell__ttrraaiinn,,NN__MMOOTTIIOONN))\nAfftterr looading andd formaatttiingg tthee trainninng and testiinngg ddataa,,w wee ddefifinneedd tthhee mmodeell wiitth the\nprreeddeeffiineedd ffunnccttiionn bbuuiilldd__mmooddeel.AAftfteerr thaatt, wwe traainn tthhee mmodeell by calliinngg ththeeA APPI  ffuunncctiioonn ffiitt..TThe\ninpuutt ddaattaa aanndd llaabbeel l arree speecciiffiied inn tthhe pparameetetersrs.. Thhe effrraaccttiionn ooffvavlaildidataitoion ndadtaat aisis ssppeecciiffiied as\n00..1..\n# TTrraain MMooddeell\nmmoodel = build_mmooddeell((iinnppuut_ts_hsahpaep=e(=T(_TM_AMXA,X,66,,121, 11)),,n_nc_lcalsas=sN=_N_MMOOTTIIOONN))\nmodel.summary ()\nmodel.fit({'name_model_inpuutt'::ddaattaa__ttrraaiinn}},,{{''nnaamme_model_output ':llaabbeell__ttrraaiinn}},,\nbatch_size=nn_batch_size,,\nepochs=n_epochs,,\nverbose==11,,\nvalidation_split =0.11,,sshhuuffffllee==TTrruuee))\nAAftfteerr tthee trainninng processs, wwee evaalluaatte the moodedle lwwitiht hththe etetesstt daattaasseett. TThee prreddiictions are\nccoonnvveretrteedd ffrromm onoen-eh-ohto tfofromramta tot oininteteggeersrs aanndd aarree uusseedd ttoo callculate tthhee ccoonnfuusiioonn mmattrixx aannd\naaccccuurraaccyy..\n# TTeessttiinngg......\nprint('Testing ...')\nlabel_test_pred = model.predict(data_test)\nlabel_testt__pprreedd == npn.pa.ragrmgamxa(xl(albaebl_etle_stte_sptr_epdr,eda,xaisxi=s -=1-)1)++11\n# Confusion Matrix\ncm = confusion_matrix(label_tesstt, llaabbeell__tteesstt__pprreedd))\nprint((ccmm))\ncm = cm.astype('float ')/cm.sum(axis =1)[:, nnpp..nneewwaaxxiiss]]\ncm = np.around(cm , ddeecciimmaallss==22)\nprint((ccmm))\n# AAccccuurraaccyy\ntest_accuracy  =  np.summ((labbeell__tteesstt ==== llaabbeell__tteesstt__pprreedd))/(l(albaeblel__tteesstt..sshhaappee[[00]]))\n226 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nprint(tteesstt__aaccccuracy))\nTThhee pprreeddefeifinnede dononeehhoott__eennccooddiinngg ffuunnccttiioonn ccoonnvevretr ttthhee llaabbeell ttoo oonnee--hhoott ffoorrmmaatt..\ndef onehot_encoding(labeell, nnuumm__ccllaassss))::\n# label(ndarray)=>_label(ndarray): [[NN,,]]==>>[[NN,,nnuumm__ccllaass]]\nlabel = np.array(label).astype(''iinntt32''))\nlabel = np.squeeze(llaabbeel))\n__label = np.eeye(nnuumm__class))[[llaabel--11]\nreturn __llaabbeell\nThhe epprerdeedfeifinnede dlolaoda_dd_adtaat affuunnctcitoion nisis uusseedd ttoo lloaadd aalll ddata ssaampplleess aanndd llaabbeellss from aa ddiirreeccttoorryy..\nEEaacchh ffii le inn tthhee ddiirerecctotoryryc ocorrerespspoonnds ttoo aa ssininggleled adtaatas asmampplee..E Eaacchh ddaattaa sasammple iissn noorrmmallized\nwiitthh tthee prreeddeefifinneedd nnoorrmmaalliizzee__ddaattaa ffuunnctcitioonn. .IIt iissw woorthh nnotinng that tthhe ddataa ssaammpplleess haavvee ddiifffferentt\ntimmee duurraattiionss..WWe eusues ea aprperdeedfeifinnede dzezreor_op_apdaddiinngg ffunnccttiionn tto maakke etthheeiirr duurraattiionss the samee aass the\nlongeesstt onee..\nddeeff llooaadd__ddaattaa((ppaatthh__ttoo__ddaattaa))::\nglobal T_MAX\ndata = []\nlabel  ==[[]\nfor data_rooott, ddaattaa__ddiirs,,dadtaat_af_iflielse sini nosos..wwaallkk((ppaatthh__ttoo__ddaattaa))::\nfor data_file_name iin ddaattaa__ffiilleess::\nfile_path = os.path.jjoin((ddaattaa_root,,ddaattaa__ffiillee__nnaammee))\nttrry::\ndata_1  =  sscciioo..llooaaddmamta(tf(ifliel_ep_aptaht)h[)'[d'odpoplpeprl_esrp_escptercutmr'u]m']## [[66,,112211,,T\n]\nlabel_1 = int(ddaatta_file_name..sspplliitt((''--''))[[11]]))\nlocation = int(data_file_name..sspplliit((''--''))[[22]]))\norientation = int(dattaa__ffiillee__nnaammee..sspplliitt((''--''))[[33]]))\nrepetition = int(data_file_name.split('-'')[[44])\n# Downsample\ndata_1== ddaattaa__11[[::,,::,,00::::1100]]\n## SSeellect MMootion\nif(l(albaeblel__11 nnoott iinn AALLL__MMOOTTIIOONN))::\ncontinue\n## NNoorrmmaallization\ndata_normed_1 = nnoorrmmaalliizzee__ddaattaa((ddaattaa__11))\n# Update T_MAX\nif T_MAX< <npnp..aarrraayy((ddaattaa__11))..sshhaappee[[22]]::\nT_MAX = np.aarrrray((ddaattaa__11))..sshhaappee[[22]]\nexcept EExxcceeppttiioonn::\ncontinue\n# Save List\nddaata..aappppeend((ddaattaa__nnoorrmmeedd_1..ttoolliisstt(())))\nllaabbel..aappppeennd((llaabbeell__11))\n# Zero -padding\ndata = zero_paddiinngg((ddaattaa,,TT__MMAX)\n# SSwwap aaxxeess\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 227\ndata  == nnpp..sswwapaapxaexse(sn(pn.ps.wsapwaxpeasx(edsa(tada,t1a, 13,)3,),22,,3) # [#N,[6N,162,12,1T,_TM_AMXA]X=]>=>[[NN,,\nT_MAX ,6 ,121]\ndata  =  np.expanndd__ddiimmss((ddaattaa,,aaxxiiss==--11) # [N,TT__MAX,,66,,112211]]==>>[[NN,,\nT_MAX ,6,121,1]\n# CCoonvert llaabel tto nnddaarrray\nlabel = np.aarray((llaabbeell))\n# data(ndarraayy))::[[N,T_MAX ,6,121,11]],,llaabbel(ndarray): [[NN,,]]\nreturn  dataa, llaabbeell\nThhee nnoorrmmaalliizzee__ddata fuunctioon iss uusseedd toton noorrmmalizzee ththeel olaodadeedd ddaattaas asmamples. E Eaacchh ddaattaa ssaammplle has\naa dimeennssiioonn ooff x[6,112211),/\uD835\uDC47in] , winhiwchh itchet hneumnbuerm b\"6e\"r \"r6e\"prreepsreenstesn tshteh enunmubmerb eorf oWfiW-Fi- Frierceecievievresr,s , the\nnnuummbebre\"r12\"1\"2 1r\"erperperseesnetnst stthhee ffrequeennccyy bbiinss,,aanndd tthee\"\"TT\"r\"erperperseesnetnst stthhee timmee duratioons. To normaalliize\na sampplele,,wwe escsaclael etthhee ddaattaa to be inn ththeer arnanggee ooff[x0,-1]/ffor each timme snapsshhoott..\ndef nnoorrmmaalliizzee__ddaattaa((ddaattaa__11))::\n# data(ndarray)=>data_norm(ndarraayy))::[[66,,112211,,TT]]==>>[[6,,121,T]\ndata_1_max = np.amax(data_1 ,(0,1),keepdims=True) ## [[66,,11221,,TT]]==>>[[1,,1,TT]]\ndata_1_min = np.amin(data_1 ,(0,1),keepdims=True) ## [[66,,112211,,TT]]==>>[[11,,11,,TT]]\ndata_1_max_rep = np.tile(data_1_max ,( data_1.shape[0],ddata_1.sshhape[[1],,11)))##\n[1,1,T]=>[6,,121,,TT]]\ndata_1_min_rep = np.tile(data_1_min ,( data_1.shape[0],ddata_1.sshhape[[1],,11)))##\n[1,1,T]=>[6,,121,,TT]]\nddata_1_norm  = ((ddaattaa__11 -- ddata_1_min_rep) //(d(adtaat_a1__1m_amxa_xr_erepp -- ddaattaa__11__mmiinn__rep +\nsys.ffllooaat_info..mmiinn))\nreturn  ddaattaa__11__norm\nThhe ezzeerroo__ppaaddddiinngg funccttion is uused too aalligignn aall lth tehde adtatsaa msapmplelsest otoh ahvaevet htehes asmamee dduuratioonn.  TThhe\npaaddddede dlelenngtght hisis ssppeecciiffiied by the parameteetre rTT__MMAAXX..\ndef zero_padding(dattaa,,TT__MMAAXX))::\n# data(list)=>data_pad(ndarray):[[66,,112211,,TT11//TT22//.....]]==>>[[66,,112211,,TT__MMAAXX]]\ndata_padd ==[[]\nfor i in range((lleenn((ddaattaa))))::\nt= =npnp..aarrraayy((ddaattaa[[ii]]))..sshhaappee[[22]]\ndata_pad.appppeenndd((nnpp..ppada(dd(adtaat[ai[]i,],((((00,,00)),,((00,0,)0,)(,T(_TM_AMXAX-- t,0)),''ccoonnssttaanntt'',,\nconstant_valueess ==00))..ttoolliisstt(())))\nreturn np.array(data_pad))\nIn this  ffuunnctiioonn,  wwe deffiinne tthhee nnetwwoorrkk ssttrucctturree.. Thee iinppuutt llayeerr is ssppecififeiedd wwitthh tthhee AAPI\nfunccttion Input,  wwhich has thhe pparameetteerrss to defifinnee tthhee ininppuutts hshaappee,,data ttyyppe, andd the laayer nnamee..\nFoolllowiinnggthteh eininpuptu tllaayyeerr,,wwe euuses eaa tthrreee--diimeensnisoionanla lccoonnvovloultuitoionanla lllayeerr, aam max-pooolling laayyer,,and\ntwoo ffuullly connneecctteedd llayyeerrss.. Thee ouuttppuut tllayeerr is ssppeecififeidedw wiitthht htheeA APPI  fufunnccttioionn Oouuttpputu,t,wwhich has\nthe parrammeteetresr sttoo ddeeffiinee the activvaatiioonn ffuunnctiioonn, t htehed idmimeennsioon, andd tthee naamme.eA.tA ltalsats,t ,wwe efifinnaalliize\nthe moodedle lwwitiht hththe eAAPIP fIufnucntcitoino nMoMdoedle lanadn dcocmopmipliel.e . Thhe eooptpitmimiziezre risis ssppeecciiffiied too RRMMSSpprroopp,,aannd thhe\nloss is  ssppecififieedd ttoo ccaatteeggoorriical_crossentrrooppyy..\ndef build_model(input_sshhaappee,,nn__ccllaassss))::\nmmodel_input = Input(shape=inppuutt__sshhaappee,,ddttyype='float32 ',nanammee==''nnaammee__mmooddeell__iinnppuutt\n') #(@#,T(_@M,AT_XM,A6X ,61,2112,11,1))\n# CNN\nx = CConv3D (16,kkeernel_size =(5,3,,6),aacctivation='rrelu',ddaata_format='cchhannels_last\n',\\\ninput_shaappee==iinnppuutt__sshhapaep)e()m(omdoedle_li_nipnuptu)t)#(#@(,@T,_TM_AMXA-X4-,46,,61,2112,11,)1)==>>((@@,,TT__MMAAX\n-4,4,116,16)\n16@16*16*26 16@8*8*26\n928*(T-4)\n6*121*T 256 128\nn_class\n16@5*3*6 2*2*2\n3D Conv Max Pooling Flatten FC FC Softmax\n228 ZZhheenngg YYaanngg,, YYii ZZhhaanngg,,GGuuooxxuuaann CChhii,, aanndd GGuuiiddoonngg ZZhhaanngg\n116@44**1116 16@22**558 1856 1128\n66**1121 664\nt 16@3*6 22*2\nt1 →\n2D  Conv MMaxa x PPoooolliinngg FFllatten FFC FFC\n4*1 2* GGRRU\n16@4*116 16@2*58 118856\n6*12 1128\n6*121 664\n16@3*6 22*2\nt2 ax Pool n Haten 664\n2D Conv Max Pooling Flatten FC FC U nn__ccllass\nGRU\nSSoftmmax\n16@44**116 116@22**58 11856 1 GRU\n128\n6*121 664\n16@\nt 33*6 2*2\ntn 2*2\n2D CConv MaaxxP Pooooiling Flatten FC-F1C\nFig. 12. Reeccuurrreenntt Neeuurarall Neettwworokr karacrhcihtiteeccttuurree..\nLabel \nPrediction\n64 64\nXx= =MaMxaPxoPoloilningg33DD((ppoooll__ssiizzee==((22,,22,,22))))((xx)) ##(@(,@T,_TM_AMXAX-4-,44,4,1,1166,,1166))==>>((@@,,TT__MMAX\n32\n-4,2,,5588,,1166)) n_class\n6*121*T FC FC Softmax\nx= =FlFalattteenn(())((xx)) #(@(,@T,_TM_MAAXX-4-4,2,2,5,588,,1166))==>>((@@,,((TT__MMAAXX\n-4)**22**5588**1166))\nx= =DeDennssee((225566,,aaccttiivvaCatNtiioNon+n==R''NrreNelluu''))((xx)) ##(@(,@(,T(_TM_AMAXX-4-4))**22**5588**1166))==>>((@@,,225566))\n64 64\nx= =DrDrooppoouutt((ff__ddrrooppoouutt__rratio)(x)\n32\nx= =DeDennssee((112288,,aaccttiivvaattiioonn==''rreelluu''))((xx)) #(@(,@2,52566))==>n>(_(d@o@,m,1a1i2n288))\nx= =DrDorpoopuoutt((ff__ddrrooppoouutt__rraattiioo))((xx))\nmodel_output = Dense(n_class , activationF=C'softFmC\nSoftmax\n  s activation='sof tmaaxx'',,nnaammee==''nnaammee__mmooddeell__ooutput'')(\nx)#(#@,(1@2,81)28=)>=(>@(,@n,_nc_cllaassss)) Domain \nDiscriminator\n# Model compiling\nmodel = Model(inputs=model_input , outputs=model_output)\nmmodel.ccoommppile((ooppttiimmiizzeerr==kkeerraass..ooppttiimmiizzeerrss..RRMMSSpprroopp((Ilrr==ff__lleeaarrnniinngg__rraattee)),,\nloss='ccaatteeggoorriiccaall__ccrroosssseennttrrooppyy'',,\nmetrics =['accuracy ']\nSEN\n))\nx4\nreturn model\n6.22 RReeccuurrrrent NNeuraallNNetwwork\nReeccurrrent  NNeeuuraallN Netewtwoorrkk((RRNNN)) iissd edseigsnigednefdo rfmoro dmeolidneglitenmg ptoermaplodryanla mdyicnsamoifcsse qoufe nsceqsuaenndces and\niis ccoommmonolnyly uusseedd ffor tiimme sseerrieisesd adtatan anlyasliyssliks elsipkee cshperecho grneictioognniatnidonn aatnudr anlaltaunrgaula gleanguage\nprocessinngg. W Wirreelelses si gsniaglnsaalrse ahrige hhlyigcholryr eclaotrerdeloavteerdt imoveera ntdicmaen abned pcraonc ebses epdrwocitehssReNd Nw.iStohm ReNN. Some\nwoorrkkss[1[1,13,03 0h]ahvae vdeedmeomnsotnrsatreadt etdhteh epoptoetnetnitaial l of RRNNN fforr wiireleesssss esnensisnigngt atsaksk. sIn. tIhni stsheicst iosnec, tion,\nwee wwilill pprreesesnentta wa owrokriknignegx aemxapmlpeloef coofm cboimnbiinngiCngN NCNaNn danRdN RNNNt otpoe rpfeorrfmorgme sgtuesreturreec orgenciotigonnition\nwiitth Wi-i-FFii.  TThhee eexxppeerrimimeennttaalls estteitntgisnagrse athre stahmeseaamsei nasS eicn. 6S.1e.cW.6e.1a.lsWoe eaxltsraoc texDtFrSacfrto mDFSth efrroamw the raw\nCCSSl I ass thhe iinnppuut  fefaetautruereo fotfh ethnee tnwetowrokr.kT.h Tehnee tnwetowrokrka racrhcitheictteucrteurise sihso wshnowin Fiing .F1i2g.  12.\nWWe ennowo winintrtroodduucec etthhee imppllemeenntatattiion code inn ddeetatiali. l.\nttaannhh\nCCoommpplleexx  FFCC\nttaannhh\nCCoommpplleexx  FFCC\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 229\nMosots toof ftthee cooddee iis thhe ssaamee aass in Sec. 6.1 eexceptt foor  tthhee mmodeell deffiinnittiioonn..To deffiine thhe mmooddeel,l,\nwwe euussee ttwo-od-dimimenesnisoinoanla cl ocnovnovloutluitoinoanla l alayyeerr aanndd mmaxa-xp-opooloinlign glalayeyre roonn tthhee ddiimenesnisoionanla leexxcceeppt tfforr\nthe timme dimeennsisioonn ooff the data. We eadaodpotp t hthe eGGRUR Ulaylaeyr earsa sththe erreeccuurrerentn tllayyeerr..\nddeeff bbuuild_model(input_shaappee, nn__ccllaassss))::\nmmodel_input = Input(shappee==iinnppuutt__sshhaappee,, dtype='float32 ',nnaammee==''nnaammee__mmooddeell__iinnput\n') #(@#,T(_@M,AT_XM,A6X ,61,2112,11,1))\n# CNN+RNN\nx = TTiimmeDistributed(CConv2D (16,kkeernel_size =(3,6),aacctivation='rrelu',ddaata_format=\n'channeellss__llaasstt'',,\\\ninput_shape=input_shape))(model_input) #(@(,@T,_T_MMAAXX,,66,,112211,,11))==>>(\n@,T_MAX ,4,,1116,,16)\nxx= =TiTmimeeDDiissttrriibbuutteedd((MMaaxxPPoooolliinngg22DD((ppooolo_ls_isziez=e(=2(,22,)2))))(x))(x)##(@(,@T,_TM_AMXAX,4,4,,111166,,1166))\n=>(@,T_MAX,,22,,5588,,1166))\nx= =TiTmiemDeiDsitstrriibbuutteedd((FFllaattteenn(())))((xx)) #((@@,,TT__MMAAXX,,22,,5588,,1166))==>>(\n@,T_MAX,,22**5588**1166))\nx= =TiTmiemDeiDsitsrtirbiubutteedd((DeDennssee((112288,,aaccttiivvaattiioonn==''rreelluu''))))((xx)) ##(@(,@T,_TM_AMAXX,,22**5588**1166))==>>(\n@,T_MAX,,112288))\nx= =TiTmiemDeiDsitsrtirbibuutteedd((DDrrooppoouutt((ff__ddrrooppoouutt__rraattiioo))))((xx))\nx= =TiTmiemDeiDsitsrtiribbuutteedd((DDeennssee((6644,,aaccttiivvaattiioonn==''rreelluu''))))(x) #(@(,@T,_TM_MAAXX,,112288))==>>((@@,,\nT_MAX,,6644))\nx = GRU(n_gruu__hhiiddddeenn__uunniitsts,,rreetturunr_ns_esqeuqeunecnecse=sF=aFlasles)e()x()x) #((@@,,TT__MMAAXX,,6644))==>>((@@,,664)\nx= =DrDoroppoouutt((ff__ddrrooppoouutt__rraattiioo))((xx))\nmodel_output  = Dense(n_claassss, aaccttiivvaattiioonn==''ssooff ttmmaaxx'',,nnaamme==''nnaammee_model_output ')(\nx)#(#@,(6@4,)6=4)>=(>@(,@n,_nc_lclaassss))\n# Model compiling\nmodel = Model(inputs=model_input , outputs=model_output)\nmmodel.ccoompile(ooppttiimmizer==kkeerraas..ooppttiimmiizzeerrs..RRMMSSpprroopp((Ilrr==ff__lleeaarrnniinngg__rraattee)),,\nloss='categorical_crossentropy'',,\nmetrics =['accuracy ']\n))\nreturn model\n66..33 AAdvdevresrasrairaiall LLeeaarrnniinngg\nExxcceepptt for tthhee bbaassicicn enueuraral ln entewtwoorrkkcompponoennetnst,ss,osmoem heighhi-glhe-vlevl enl entewtowrko rakracrhcihteitcetcutruerse saallssoo pllay\nessennttiiall roolees  ininw wirreelleessss esennssiinngg. S Simimillaarrt otoc ocmomputterr visioon taasks, wirireelleessss senssiingg aallsso suffffer\nffrom ddoommaiani nmimsaislailgignmnemnte nptrporbolbemle.mWi.rWeliersesle ssigsniganlsa lscacna nbeb erereffllected bytthee surrounnddiinngg oobbjjeecctts\nduurriingg pprrooppaaggataitioonn aannd dwiwlill lbbee ffllooodedd witithh ttargett-irrrreelelevvaanntts isgingnaallc ocmompponenttss. TThe sensing\nsysstem ttrraiineedd in one deplloyymmenetn tenevnivriornomnemnte ncatnc ahnarhdalryd lbye baeppalpipeldi edirdeicretclytl yinin ooththere rsseettttings\nwiitthhoouut taaddaapptattaitioonn. . Soomme ewowrkosr[k1s0[]1 0tr]yt rtyo toadaodpot patdavdervsearrsiaarlia lelearanrinnign gtetechcnhinqiuqeuse stot otataccklkele tthhiis\nprrobbllem aannd daacchhieievve epprroommisisnign gpeprefrofromramnacen.c eT.hTihs is escetcitoionn wwilill give aann eexxamppllee of hhow tto applly\nthis tteecchhniquee in wiireless sseensing taasks. Sppeecciiffiicallyy,,w wee bbuuilldda ag egesstuturerer erceocoggnniittioionns ysysstetemm wwiith\nWi-iF-iF,i,sisimmilialarr tto thhat iinnS Seecc..66.1.1. .WW e try ttoo aacchhiieevvee ccoonnssiisstetnenttp eprefrofromrmaannce aacrooss  ddiifffefreernetnth uhmumaan\nllocaattionss andd orriienttations. TThe netwoorrkk aarrcchhititeecctturree is sshhoownn iin Fig. 133..\nWWe enonwo winitnrtordoudcuec ethteh eimimplpelmeemnteanttiaotnio ncocdoed ieni ndedteatialil..\nIIn the Widiadra3r.30. 0ddataatsaeste t[[2255],], we eccoollleecctt gesstturree daattaa whehne nthteh eusuesresr s tsatnadn data tdidfifffeerreenntt llocaattionss..\nAss diiscussed inn SSeec. 4.33,,h uhumman loocatiioonns  hhaavve ssigignniififciacnatntim ipmapcatcto nont htehDe FDSFSm meeaassuurreemmeennttss.. TTo\nmititiigaattee this imimpactt, wee ttrreaatt hummana nlolocactaitoionsn saas sddiifffferent ddomaainins saannd dbbuuilildd aann addvveerrssaaririaall leeaarning\nneettwworokr ktoto rreeccoognginziez eggesetsuturerse siirrrresspeeccttiivee of ddomaianins.s . In thhe pprogram,w,ew feifirsrts tlloadd daattaa,,llabbeells,\n16@16*16*26 16@8*8*26\n928*(T-4)\n6*121*T 256 128\nn_class\n16@5*3*6 2*2*2\n3D Conv Max Pooling Flatten FC FC Softmax\n16@4*116 16@2*58 1856\n128\n6*121\n64\n16@3*6 2*2\nt1\n2D Conv Max Pooling Flatten FC FC\nGRU\n16@4*116 16@2*58 1856\n128\n6*121\n64\n16@3*6 2*2\nt2 64\n2D Conv Max Pooling Flatten FC FC n_class\nGRU\nSoftmax\n16@4*116 16@2*58 1856 GRU\n128\n6*121\n64\n16@3*6 2*2\ntn\n2D Conv Max Pooling Flatten FC FC\n330 ZZhheenngg YYaanngg,,YYii ZZhhaanngg,, GGuuooxxuuaann CChhii,, aanndd GGuuiiddoonngg ZZhhaanngg\n一 LLaabbeell \nPrreeddiiccttioon\n64 664\n332 nn__ccllasss\n6*121*TT FFC FC Softmax\nCNN+RNN\n664 664一332 一nn__ddoommaaiinn\nFC FC Softmax\nDoommaaiin \nDDiissccrriimiinaattorr\nFFiigg.. 1133..AAddvevresrasrairaial l lleeaarrnniinngg nneettwwoorkrk aarrcchhititeeccttuurree..\nandd ddoommaianisn sfrformo mthteh edadtatsaeste tanadn dspslpiltit them iinnttoo train aandS tEeesNt..B oBoththl albaeblela nadndd odmomainn aarree eennccooded\ninto thhe oone-hott foormmaatt.. x4\n# Load data\ndata ,lalabbeell,,dodmoamiani n= =lolaoda_dd_adattaa((ddaattaa__ddiirr))\nprint('\\\\nnLLooaadeddedd adtaatsaesteotf o'f'++ ssttrr(l(albaeble.s.hsahpea[p0e][)0]+)+''sampplleess,,each  siizzeedd'++ ssttrr\n(data [0,:,::,,::,,::]]..sshhapaep)e)+ ''\\\\nn''))\n## SSpplliitt ttrraaiin aannd tteest\n[data_trraaiinn,, data_teesstt,,llabel_traaiinn,,llabel_tesstt,,ddoomain_traaiinn,,ddoomain_tesstt]]==\ntrain_test__sspplliitt((ddaattaa,,label ,ddoommaaiinn,,tetsets_ts_isziez=ef=rfarcatcitoinon__ffoorr__tteesstt))\nprint('\\nnTTrraaiinn onon' ++ ssttr(label_ttrraaiinn..sshhapaep[e0[]0)])++ ' sampleess\\\\nn''+\\\n'Test  onn''+ +stsrtr((llaabbeell__tteest.shape [0]]))++' 'sasmapmplleess\\\\nn''))\n# One -hot encoding for train data\nlabel_train = onehot_encoding(labell__ttrraaiinn,,NN__MMOOTTIIOONN))\ndomain_train = onehot_encoding(domainn__ttrraaiinn,,NN__LLOOCCAATTIIOONN))\nAAftfteerr loadiing andd fforrmataitinnggdadta,ta ,wew ebubiultil ttthhee nneettwworokr kanadn dtrtarianinede ditit from ssccrraattch.. Thee trainninng\nddaattaa,,llaabbeell,,aanndd ddoomamian inaraer epapsassesde dtot otthhee AAPIP Iffuunnctcitoionn ffiitt forttrraaiiniing..\n# TTrraain MMooddeell\nmodel  =  buiilldd__mmooddele(li(nipnuptu_ts_hsahpaep=e(=T_(MTA_XM,AX6,,6,112211,,1),nn__ccllaassss=N_MOTIONN, nn__ddoomain=\nN__LLOOCCAATTIIOONN))\nmodel.summary ()\nmode1l.fit({'name_model_iinnppuutt''::ddaattaa__ttrrain },{'name_model_output_laabbeell''::llaabbeell__train\n,'n'anmaem_em_mooddeell__oouuttppuutt__ddomain ':dodmoamaiinn__ttrraaiinn}},,\nbatch_size=nn_batch_size,,\nepochs=n_epochs,,\nverbose==11,,\nvalidation_split =0.11,,sshhuuffffllee==TTrruuee))\nAAfftteerr tthhee ttrraaiinniinngg pprroocceessss fifninisihsheess, ,w weee vevaaluluaatteet htehen entewtwoorrkk wwiitthh tthhee tteesstts asmampplleess..NNoottee tthhaatt tthhee\naaddvveerrssaarriiaall nneettwwoorrkk hhaass bbootthh llaabbeell aanndd ddoommaaiinn pprreeddiiccttiioonn oouuttppuuttss..WWe eonolnyl yusues etthhee llaabbeell oouuttppuutt\nfor accuracy evaalluaattiion..\n# TTeessttiinngg......\nprint('Testing ...')\nttaannhh\nCCoommpplleexx  FFCC\nttaannhh\nCCoommpplleexx  FFCC\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 331\n[label_test_pred ,_] = model.predict(data_test)\nlabel_teesstt__pprreedd ==n pn.pa.ragrmgamxa(xl(albaelb_etle_stte_sptr_epdr,eda,xaisxi=s -=1-)1)++ 1\n# CCoonnffuusion MMaattrriixx\ncm = confusion_matrix(label__tteesstt,,llaabbeell__tteesstt__pred)\nprint((ccmm))\ncm = cm.astype('float ')/cm.sum(axiss=11))[[::,,nnpp..nneewwaaxxiis]]\ncm = np.around(cm , ddeecciimmaallss==22)\nprint((ccmm))\n# AAccccuurraaccyy\ntest_accuracy = np.sum(labell__tteesstt ==== llaabbeell__tteesstt__pprreedd))/((lalabbeell__tteesstt..sshhaappee[[00]]))\nprint(test_accuracy))\nDiifffferentt frroomm thatt inn SSeec. 6.11, w we llooaadd ddaataa,,laabbel,,and dommaiani ninin tthhee llooaadd__ddaata fuunction. TThe\ndoommaiani nisis deeffiinedd as thhe llooccaattioionno offt hteheh uhmuman, whihcichh iiss embbedededde dini nththe effii le nnamee..\ndef llooad_data((ppaatthh__ttoo__ddaattaa))::\ngglobal T_MAX\ndata = [[]]\nlabel  ==[[]\ndomainn ==[[]\nfor data_rooott, ddaattaa__ddiirs,,dadtaat_af_iflielse sini nosos..wwaallkk((ppaatthh__ttoo__ddaattaa))::\nfor data_file_name in data_files:\nfile_path = os.path.jjoin((ddaattaa_root,,ddaattaa__ffiillee__nnaammee))\ntry:\ndata__11== scio.loadmmaatt((ffiillee_p_aptaht)h[)'[d'odpopplpelr_esrp_escptercutmr'u]m']## [[66,,1121,T\n]\nlabel_1 = int(ddaatta_file_name..sspplliitt((''--''))[[11]]))\nlocation_1 = int(data_file_name.split('-'')[[22])\norientation_1 = int(ddaata_file_name..sspplliit((''--''))[[33]]))\nrepetition_1 = int(ddaattaa__ffile_name..sspplliitt((''--''))[[44]]))\n# Downsample\ndata_1 = data_1 [:,,::,,00::::1100]]\n# Select Motion\nif(l(albaeblel__11 nnoott iinn AALLL__MMOOTTIIOONN))::\ncontinue\n# Normalization\ndata_normed_1 = nnoorrmmaalliizzee__ddaattaa((ddaattaa__11))\n# Update TT_MAX\nif T_MAX< <npnp..aarrraayy((ddaattaa__11))..sshhaappee[[22]]::\nTT__MMAAX == nnpp..aarrrraay((ddaattaa_1))..sshhaape[[22]\nexcept EExxcceeppttiioonn::\ncontinue\n## SSave List\nddaata..aappppeend((ddaattaa__nnoorrmmeedd_1..ttoolliisstt(())))\nlabel.append(llaabbeell__11))\nddoommaain..aappppeenndd((llooccaattiioonn__11))\n# Zero -ppadding\ndata = zero_paddingg(daattaa,,TT__MMAAX)\n332 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n# SSwwap aaxxeess\ndata  == nnpp..sswwapaapxaexse(sn(pn.ps.waspwaxpeasx(edsa(tad,at1a,,13,)3,),22,,3) # [#N,[6N,61,212,1T,_TM_AMXA]X ]==>>[[NN,,\nT_MAX ,6,,112211]]\ndata = np.expand_dims(dattaa, aaxxiiss==--11)) ## [[NN,,TT__MMAX,,66,,112211]]==>>[[NN,,\nT_MAX ,6,121,,11]]\n# CConvert llabel and ddomain to nndarray\nlabel = np.array(label)\ndomain = np.array(ddoommaain))\n# data(ndarrrraayy))::[N,T_MAXX,66,,112211,,11]],,labell((nnddaarrraayy))::[N,],,ddoommain(ndarrayy))::[[NN\n,]\nreturn  ddaattaa,,label , ddoommaaiinn\nToo deeffiine thhe nnetwoorrkk,, wee uussee a CNNN Nlalyaeyre ranadn dana nRNRNN lNayleary ears atshteh efefaetautruer eeexxtrtraaccttoorr,, whhiicchh iis\nsimiillar too tthhaatti ninS eSce.c6.6.2..2I.nInt hteheg egsetsutruerer erceocgongniziezrera nadndd odommain dissccrriimminator, wee uussee ttwwo offuulllyy--\nconnnnecetceted dllaayyeerrss aanndd aann oouutptputu tllaayyeerr accttivated by softmax ffuunnctiioonn,,reespectivvelyy..WWee uussee cattegoorriicall\ncross-entropyy loss ffoorrb bootthhl albaeblelp rperdeidcitciotnioann adnd odmomaaininp prereddicitcitoinono uotuptuputst.sT.Thhe ddoomaaiinn prreeddiiccttion\nlloossss iissw weeiigghhtteedd wwiitthh lloossss__wweeiigghhtt__ddoommaaiinn aanndd ssuubbttrraacctteedd ffrroomm ththe ellaabbele lpprreeddicicttiioonn lloossss..\ndef build_model(inppuutt__sshhaappee,, n_class ,nn__ddoommaaiinn))::\nmmodel_input = Input(shappee==iinnppuutt__sshhaappee,, dtype='float32 ',nnaammee==''nnaammee__mmooddeell__iinnput\n') #(@#,T(_@M,TA_XM,A6X ,61,2112,1,11))\n# CNN+RNN+Adversarial\nx = TTimeDistributed(Conv2D (16, kernel_size =(3,6),activation='relu',data_format=\n'channels_last ',\\\niinnppuutt_shape==iinnppuutt__sshhaappe))))((mmooddeell__iinnppuutt)) #((@@,,TT__MMAAXX,,66,,112211,,11))==>>(\n@,T_MAX,,44,,111166,,1166))\nx = TimeDiissttrriibbuutteedd((MMaaxPxoPoloilnign2gD2(Dp(opoolo_ls_isziez=(e2=,(2),)2)()x))(x)##(@(,@T,_TM_MAAXX,,44,,11166,,1166))\n=>(@,T_MAX,,22,,5588,,1166))\nx= =TiTmiemDeiDsitstrriibbuutteedd((FFllaattteenn(())))((xx)) #(@(,@T,_T_MMAAXX,,22,,5588,,1166))==>>(\n@,T_MAX,,22**5588**1166))\nx= =TiTmiemDeiDsitsrtirbiubutteedd((DeDennssee((112288,,aaccttiivvaattiioonn==''rreelluu''))))((xx)) ##(e(,@T,_TM_AMAXX,,22**5588**1166))==>>(\n@,T_MAX,,112288))\nx= =TiTmiemDeiDsitsrtirbibuutteedd((DDrrooppoouutt((ff__ddrrooppoouutt__rraattiioo))))((xx))\nx= =TiTmiemDeDiissttrriibbuutteedd((DDeennssee((6644,,aaccttiivvaattiioonn==''rreellu'')))(x) ##(@(,@T,_TM_MAAXX,,112288))==>>((@@,,\nT_MAX,,6644))\nx = GRU(n_gruu__hhiiddddeenn__uunniitsts,,rreetturunr_ns_esqeuqeunecnecse=sF=aFlasles)e()x()x) #((@@,,TT__MMAAXX,,6644))==>>((@@,,664)\nxx_feat = DDrropout(ff__ddrroopout_ratio)(x)\n# LLabel pprrediction part\nx_1 = Dense(64, aaccttiivvaattiioonn==''rreelluu''))((xx__ffeeaatt)) #(@(@,,6644))==>>((@@,,6644)\nx_1 = Dense(32, aaccttiivvaattiioonn==''rreellu'')(x_1) ##(@(,@6,46)4)==>>((@@,,3322))\nmodel_output_laabbeell == DDeennssee((nn__ccllaasss,,activation='softtmmaaxx'',,nnaamme==''\nname_model_output_label'')(xx_1)) #(@(,@3,232))==>>((@@,,nn__ccllaassss))\n# Domain prediction part\nx_2 = Dense(64, aaccttiivvaattiioonn==''rreelluu''))((xx__ffeeaatt)) #(@(,@6,644))==>>((@@,,6644))\nx_2== DDeennssee((3322,,acatcitviavtatiioonn==''rreelluu''))((xx_2) ##(@(,@6,46)4)==>>((@@,,3322))\nmmodel_output_domain  =  Deennssee((nn__ddoommaaiinn,, activation='softmaxx',,nnaammee==''\nname_moddeell__oouuttpputu_td_odmoamiani'n)'()x(_x2_)2)##(@(,@3,23)2=)>=(>@(,@n,_n_ddoommaaiinn))\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 333\nmodel = Model(inputs=model_input , outputs =[mmooddel_output_label,,\nmodel_output_domain]])\nmodel.compile(optimizer=keras.optimizers.RMSprop(Ilr=f_learning_rate),\nloss  = {{''nnaammee__mmooddeell__oouuttppuutt__llaabbel''::ccuusstom_loss_label (), '\nname_model_output_domain ':ccuussttoomm__lloossss__ddoommaaiinn(())}},,\nloss_weights ={'name_model_output_label ':1, ''nnaammee__mmooddeell__oouuttppuutt__ddoommaaiinn''\n:-1* loss_weight_domain}},,\nmmeettrrics ={'name_modell__oouuttppuutt__llaabeble'l:'':a'cacucruarcayc'y,','\nname_model_output_domain ':'accuracy '}\n))\nreturn model\nTThhe epprer-ed-edfeifinnede dcucsutsotmo_ml_olsoss_sl_albaeble laannd dcucsutsotmom__lloossss__ddoommaaiinn aarree ccaatteeggoorriiccaall ccrroosssseennttrrooppyy lloosssseess ffoorr\nbootthh labell ppredictiioonn aannd ddomaainin pprreeddicicttiionn..\nddeeff ccuussttoomm__lloossss__llaabbeell(())::\ndef lossfn(y_ttrruuee,,yy__pprreed)):\nmmyloss_batchh ==--11*K*.sKu.ms(umy(_yt_rtureu*eK*.Kl.olgo(gy(_yp_rpreedd++KK..eeppssiillon ()),axaxiiss==--11,,\nkeepdims=False)\nmyloss  =  K.meaann((mmyylloossss__bbaattcchh,,axis=-1, kkeeeppddiimmss==FFaallssee))\nreturn myloss\nreturn lossfn\ndef ccuussttoomm__lloossss__ddoommaaiinn(())::\ndef lossfn(y_truee, yy__pprreedd))::\nmyloss_baattcchh ==--1*K*.Ks.usmu(my(_yt_rtureu*eK*.Kl.olgo(g(yy__pprreedd++KK..eeppssilon ()), aaxxiiss==--11,,\nkeepdims=FFaallsse))\nmmyloss = K.mean(mylloossss__bbaattcchh,, axis=-1,kkeeeppddiimmss==FFaallssee))\nreturn myloss\nreturn lossfn\n6.44 CCoommplpelxe-xv-vaalluueedd Neeuurraall NNetwwork\nIInn tthhiiss sseecctitoinon, ,wwee wwiillllp preresesenntta am moorreec ocommpplliiccaatteedd wwiirreelleesssss esnesnisnigngt atsakskw iwtihthd edeepeple laernarinnign.gM.Maannyy\nwiirreelless sseennsinngg aappproachess empploloyy FFaasstt Fouurriier Transform(F(FTF)To)n oan taitmiem seesreireise sooff RFF ddaattaa to\nobbttaaiin timmee--ffrequueenncyc yssppecetcrtorogrgarmasm osfo hfuhmuanm acntiavcititviietsie. s.FFTF Tsusfuffferesr sffrroomm ererorrosr sdduue ettoo aann eeffffect\nknnoowwn nasa sleleaakkagaeg,e ,wwhehne nthteh eblbolcokc kofo fddataata iis nott perioodicc (the moosstt commomno cnascea sieni nprparcatcitciec)e,),\nwwhihcihc hrerseuslutlsts iinn aa ssmmeeaarreedd ssppeectcrtruum mofo fthteh eoroirgigininala lssiiggnnaall aanndd ffuurrtthheerr lleeaaddss ttoo mmiisslleeaaddiinngg ddaattaa\nrepresenttatioon foorr lelaeranrninigng-b-baasseedds esnenssiningg..CClaassssiiccaalla paprporaoacchheessr erdeduucceel elaekaakgageeb byyw winnddowiingg,,\nwwhihcihc hcacnanonto etleilmiminiantaet elelaekaakgaeg enetnitrierleyl.yC. oCnosindseidrienrgin tgheth seisginginfificcanatn tffiittinng ccaappabiliittyyo offd edepepnneurall\nneettwoorkrsk,sw, ew ecacna ndedseisging na assiiggnnaalpl rporcoecsessisning gnentewtowrokr ktot oleleaarrnn aann ooppttiimala lffunnccttiion to mmiinimiizzee or\nneeaarrlly eliimminnatee ththeel elaekaakgaegea nadnde nehnhaannccee thtehes psepcetcrturmumss,,wwhiich wee call  thteheS iSginganlalE nEhnahnancceemment\nNeettwwoorkrk ((SENN))..\nTThhe essiiggnnaall pprroocceessssiinngg nneettwwoorkrk ttaakkeess aass iinnppuutt aa ssppeeccttrrooggrraamm ttrraannssffoorrmmeedd ffrroomm wwirierleelessss ssiiggnnaallss\nvviiaa SSTTFFTT,, rreemmoovvese stthhee ssppeeccttrraall lleeaakkaaggee iinn tthhee ssppeeccttrrooggrraamm,, aanndd rreeccoovveerrss tthhee uunnddeerrllyyiinngg aaccttuuaall\nfrequenccyy commpopnoennetns.ts .FFigig..116 6sshhoowws sththe ettrraaiining process oof  ththeen entewtwoorrkk..As shownn iin the uppeerr\npaarrt oof  FFigig. .1166,,wwe raanndomlyly ggeenneerraattee ideal ssppeeccttrruumms wwiith 11 toto5 5f refqreuqeunecnycyc ocmompponentts,  wwhose\namplpiltituuddees,sp, hpahsaese,s ,aannd dfrfreeqqueunecniceise saarere uunnififoorrmmlyl ydrdarwanw fnrofrmo mthetihre irarnagnegs eosfo finintetreerestst.. Theenn,, the\niideaall spectrum iis conveerrttedd to thhe lleeaakkeedd ssppectrruum folloowiingg thee procceessss in tthhee ffoollolwowiinngg eeqquatioon\ntto simmullate tthhee wwinndowiinngg eeffffect  aanndd rraannddoomm complpelexx nnooisiseess::\nSŝ==AAs,sn+·n, ((34)\n16@16*16*26 16@8*8*26\n928*(T-4)\n6*121*T 256 128\nn_class\n16@5*3*6 2*2*2\n3D Conv Max Pooling Flatten FC FC Softmax\n16@4*116 16@2*58 1856\n128\n6*121\n64\n16@3*6 2*2\nt1\n2D Conv Max Pooling Flatten FC FC\nGRU\n16@4*116 16@2*58 1856\n128\n6*121\n64\n16@3*6 2*2\nt2 64\n2D Conv Max Pooling Flatten FC FC n_class\nGRU\nSoftmax\n16@4*116 16@2*58 1856 GRU\n128\n6*121\n64\n16@3*6 2*2\ntn\n2D Conv Max Pooling Flatten FC FC\n334 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nLabel \nPrediction\n64 b64\nx wx 32\nn_class\n6*121*T w\nFC FC Softmax\nx'=σ∑wx+b)\nCNN+RNN ((aa))\n(b?,b?)\nx 64 64\ny w?x w?y x'\nw? 团 32\n② n_domain\nRReeaall Ilmmag x'=a(Z(w?x-w?y)+b?)\nFC yF=Ca(Z(w?yS+owftzmx)a+xb?)\nLd\nw? Domain \nWzx W?y -wzy wzx Discriminator\n((b)\nFig. 1 414. .C Coommpaarrison betweeeenn(a(a) ) real-vvaaluueedd aannd((b)) ccoompplleexx--vallued neurronnss..\nSEN\nxx4\nComplex FC tanh Complex FC tanh\nFFiigg.. 1155..CCoommplpelxe-xv-avlauluede dnenueruarla lnneetwtworokr karacrhcihtieteccttuurree..\nwwhehreer essanadn dSaŝraer ethtehiediedaela laandn desetsitimmataetde dffrreeqquueencnyc yspspecetcrturum,mre, srepespcteicvteivleyl,yn, nrerperperseesnetnst stthhee aaddddititiive\nGGaauusssisaiann nnooisisee vveeccttoorr,,aanndd AA iiss tthhee ccoonnvvoolluuttiioonn mmaattrriixx ooff ththeew wiinnddoowwiinngg ffuunnccttiioonn iinn tthhee ffrereqquueennccyy\ndommaianin.. Thee8\uD835\uDC56 \uD835\uDC61cℎocloulmunm onfo Af Aisis::\nA1(j:,io) =FFFTTs(°\uD835\uDF1B) X∗1\uD835\uDEFF8(”\uD835\uDC56) . ((3355))\nwhhereeres \uD835\uDF1Brerperperseesnetnst stthhee wininddowoiwnign gfufnucntcitoion nooff FFFTT iin tiimme ddomaaiinn..\nThhee aammplpiltiutuded eofo ftthhee nnoiosisee ffolllowss aa Gaauussisaiann ddisisttrributtion andd its  pphhase foollolowws aa uunniffoorrmm\nddiissttrriibbuuttioinoni nin[002, 2c/\uD835\uDF0BT]h.eT hneetnweotrwk otrakkteask etsheth leelaekaekde dspsepcetcrtruumm asa siinnppuutt aanndd oouuttppuuttss tthhee eennhhaanncceedd\nssppeeccttrruumm cclloossee ttoo thtehei diedaelaoln eo.nTe.h uTsh,uws,ewme imniinmimiziezeth teh\uD835\uDC3Fe2!2lo lssos\uD835\uDC3Fs!==j|S|SEENNs°(ŝ )s−jis?| |d2udruirnign gtrtraaiinniinngg..\nDuuririnngg iinfference, tthhee spspeecctrturumms mmeasurred froom real-wworrld sscceennariooss aareren onromrmaliziezeddt oto[ 0>,011]/and\nfed inntoo tthheen neettwwork too oobbttaaiinn ththeee nenhhaannced ssppectrruum..\nWe ennowo wprpersesnetn thteh eimimplpelmeemnteanttiaotnio cnocdoe dieni ndedteatiali.l.\nDDififfferentffrom pprreevviiouuss sectioonns, wee use tthheeP PyyTToorcchh ppllaatftofromrmt otoim ipmlpelmemeennt t htehen entewtwoorrkk..PPyyTorch\npprroovviiddeess the iinntteerrfafcaecet otiom ipmlpelmemeennttc ucsutsotmom lalyaeyresr,sw, hwihcihchm amakkeesst hteheim ipmlpelmemeennttaattioinono fofth tehCe VCNVNNN\nmucuhc hmomroe recocnovnenvieennite.n tW. eW feifirsrtst imppoortr tssomme enneceecsesasrayr yppacakcakgaegse sasa sffoolllowss..\nimport os,sys ,math ,scipy ,imp\nimport numpy as np\nimport scipy.io as scio\nimport  torcchh,,ttoorrcchhvvision\nimport torch.nn as nnn\nfrom sscipy iimmppoort ssiiggnnaall\nttaannhh\nCCoommpplleexx  FFCC\nttaannhh\nCCoommpplleexx  FFCC\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 335\nDaatta Syntthesiis\nLeaked IIdeal\nAmplitude Spectrruumm Amplitude Sppeectruumm\nRandom\nGenerator\nFFrrequency ⋯⋯F\" Frrequency\nMSE Loss\nXLeaked Windowi -x for amplitude\nWindowing\n+N(,0) SEN\nXmeasured y\nMMeeaassuurred SEN Ennhhaanncceed \nx4\nInference S\nInput Amplitude Sppeeccttruumm\nwhn Complex FC tanh comph E tanh Amplitude SSppeeccttruumm Inference\nOutput\nFFrreeqquueennccyy FFrrequenccy\nMMoodedle l TTrraaiinniinngg\nFiig. 1166.  TThe traainninng pprocess of tthhee ssigignnaallp prroocceessssiinngg nneetwworrkk..\nf rroomm mmaatthh import  sqrt ,log ,pi\nfrom torch.fft import fft ,ifft\nffrroomm ttoorrcchh..nnnn..ffuunnccttiioonnaall iimmppoorrtt rreelluu,, ssooffttmmaaxx,,ccrroossss__eennttrrooppyy\nfrom torch import sigmoid ,tanh\nfrom torch.nn import MSELoss as MSE\nSoomme epapraarmaemteertse rasrea rdeedfeinfiende dini nthtihsi sppaartrt..\n# Definition\nwind_len = 125\nwind_type = 'gaussian '\nn_max_freq_component = 3\nAWGN_amp == 00..0011\nstr_modellnnaammee__pprreeffiixx =='./ SEN__RReessuullttss//SSEEN_N_''+  wind__ttyyppee + '_W'++ ssttrr((wwiinndd__lleen)\nstr_model_namee__pprreettrraaiinneedd == ssttrr__mmoodedlenlanmaem_ep_rperfeifxix++''__EE110000.pt'\nfeature_len = 121\npadded_len = 1000\ncrop_len = feature_len\nblur_matriixx__lleefftt == []\n# HHyperparameters\nn_begin_epoch = 1\nn_epoch = 10000\nn_itr_per_epoch = 500\nnn__bbaatt cchh__ssize  = 64\nn_test_size = 200\nf_learning_rate = 0.001\nTThhe epprorogrgarma mbebgeingsin wsiwthi ththteh efoflollolowwinign gcocdoed.e .WeW feifirsrtst geenneerraattee thee convvoolluuttiionn matartirixx ooff thhe\nwininddowoiwnign gfufnucntcitoino(nEq(En.q3n5.)3w5i)thw itthe thpreep-rde-fdienfiedn efdunfuctnicotnio ngegneenreartaet_e_bblluurr__mmatrix_coommpplleexx, ,wwhich\nwiilll  bbee initnrtordouducceedds hsohorrtltyl.yT.hTheennw we ddeefifnineet hteheS ESNENm moodel  aanndd mmovee ittt otot htehGeGPPU processor wiith\ntthhee AAPPI Iffuunnccttiioonn ccuuddaa..AAftfteerr tthhee mmoodedle lddeeffiinniittiioonn,,  wwee ttrraaiinn ththeem mooddeell wwiitthh ssyynntthheettiicc ssppeeccttrrooggrraammss,,\nduurriingg whhicichh pprroocceesss we essaavvee tthee traainneed mmoddeell every 500 eepochss. TThe trraainineedd aanndd ssaavveedd mmodeell\nccaann bbee ddiirreeccttllyy loloaaddeedd aanndd uusseedd ttooe nenhhaannccee ssppeeccttrrooggrraammss..\nAAAAAAmmmmmmpppppplllllliiiiiittttttuuuuuuddddddeeeeee\ntttaaannnhhh\nCCCooommmpppllleeexxx   FFFCCC\ntttaaannnhhh\nCCCooommmpppllleeexxx   FFFCCC\nAAAAAAmmmmmmpppppplllllliiiiiittttttuuuuuuddddddeeeeee\nAAAAAmmmmmpppppllllliiiiitttttuuuuudddddeeeee AAAAAmmmmmpppppllllliiiiitttttuuuuudddddeeeee\n336 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nif __name____====\"_\"_m_amaiinn___\"\"::\n# GGeenneerraate bblluurr mmaattrriixx\nblur_matrix_right = generate_blur_matrix_compleexx(wind_ttyyppee==wiinndd__ttyyppee,,wwiinndd__lleenn\n=wind_len ,ppaadddeedd__lleenn==ppaaddded_len ,crcoropp__lleenn==ccrroopp__lleenn))\n# DDeeffiinne mmooddeell\nprint('Model bbuuiillddiinngg......''))\nmodel = SEN(feature_len==ffeeaattuurree__lleenn))\nmodel.ccuuddaa(())\n# TTrraaiinn mmooddeell\nprint('Model training....''))\ntrain(model=moddeell,,bblluurr__mmaatrix_right=blur_matriixx__rriigghhtt,,ffeeaattuure_len=\nfeature_lenn, nn__eeppoocchh==nn__epoch ,n_ni_tirtr__ppeerr__eeppoocchh==nn__iittr_per_epoch , nn__bbaattcchh__ssiizze==\nn_batch_size , ooppttiimmiizzeerr==ttoorrcchh..oopptim.RMSprop(model.parameetteerrss(()),,Ilrr==\nf_learning_rate))\nThhiiss ggeenerate_blur_mattrriixx__ccoommpplleexxf ufnunccttioionn isisu suesdedt otog geenneerraattee ththee ccoonnvolutioon maattrriix off the\nwwinindodwoiwngin fgunfuctnicotnio. nT.hTeh ceocroe riediedae abebheihnidn dthtihsi sffuuncntcitoionn iiss to eenumereartaet eaalll thhe ffrreeqquueencies, applly\ntthhee wwiinnddooww fufnucntcitoionn oon nththee ssiinnuussooiidd ssiiggnnaall,,aanndd ggeenneerraattee tthhee ccoorrrreessppoonnddiinngg ssppeeccttrruummss wwiitthh\nFFTT..AAftfeterr oobbttaaiiniingg the convoolluttion maattrriix, wwe eccaann bbrriiddggee tthee gapp beettweeen ntthhee iideeaall and the\nleaked spectrogramss wwitithh EEqqnn.3. 43.4I.nI notohthere rwworodrsd,sw,ew ceanc adnidreircetcltyl yggete ttthee leeaked spectroogramss byy\nmmulutltiippllyyiinngg tthhee iiddeeaa ssppeeccttroroggrraammss wwiitthh tthheeccoonnvvoolluuttiioonn mmaatrtriixx..\ndef generate_blur_matrixx__ccoommpplleexx((wwiinndd__ttyyppee,,wind_len =251, ppaadddeedd__lleenn==11000000,,\ncrop_len =121))::\n# GGeenerate mmaatrix uussed tto iinnttrrooduce ssppeec lleeaakkaage iinn ccoommpplleexx ddoommaaiinn\n# ret:((nnddaarrraayy..ccoommpplex128)[[ccrroopp__lleen,,crcorpo_pl_elenn]]((rrooww ffiirrsstt))\n## RRooww ffiirrst:eaecahc hrorwo wrerperperseesennttss tthhee ssppeeccttrruumm ooff oonnee ssiinnggllee ccaarrrriieer\n## SStteeps:cacrarireire/rw/iwnidnodowwiinngg//ppaadd//ffftt//ccrroopp//uunnwwrraapp//nnoorm\n# PPaarameters oofffloading\nfs = 1000\nn_f_bins = ccrroopp__lleenn\nf_high = int(nn__ff__bins//22))\nf_low  = --11 ** ff__hhigh\ninit__pphhaassee ==0\n# CCarrier\nt_= =npn.pa.raarnagngee((00,,wwiinndd__lleenn))..rreesshhaappee((11,,wwiinndd_len)/fs ## [[11,wind_lenn]]((00~\nwind_len/fs sseeccoonds))\nfreq =  np.araannggee((ff__llooww,,ff__hhigihg+h1+,11,)1.)r.ersehsahpaep(en(_nf_fb_ibnsin,s1),1)# [n_f__bbiinnss,,11]]((ff_low~\nf_high HHz))\nphasee == 22* pi  **ffrreq *tt__+ +iniinti_t_pphhaassee # [n_f_bins ,wwiind_len]\nsignal = np.exp(1j*pphhaasse)) # [n_f_bins ,wwiinndd__len\n]~[121,,225511]]\n# Windowing\nif wind_type  == ''ggaauussssiiaann'':\nwindow = scipy.signal.windows.gausssiiaann((wwiinndd__lleenn,,((wwiinndd_len--1)/ssqrt (8*log\n(2000)))),,sym=Trruuee))# #[w[iwnidnd__lleenn,,]\nelse::\nwindow = scipy.signal.get_window(wwind_type,, wwiinndd__lleen))\nsig_wind = signal * window # [n_f_bins,,wwiinndd__lleenn]]**[[wwiinndd__lleenn,,]]==[[nn__ff__bbiinnss,,\nwind_len]]~~[[121,,225511]]\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 337\n# Pad/FFT\nsig_wind_pad  = np.concatenatee((sigg__wwiinndd,,nnpp..zzeerrooss((((nn__ff__bins ,ppaadded_len -\nwind_len))),axis =1))# #[n[_nf__fb_ibnisn,sw,iwnidn_dl_elenn]]==>>[[nn__ff__bbiinnss,,ppaaddddeedd__len]\nsig_wind_pad_fffftt == nnpp..fffftt..fffftt((ssiigg__wwiinndd__ppaadd,,aaxis=-1) ## [[nn__ff__bbiinns,,ppaaddddeedd_len\n]~[121,,11000000]]\n# Crop\nn_freq__ppooss == ff_h_ihgihgh++11\nn_freq_neg = aabs((ff__llooww))\nsig_wind_pad_fft_crop  =  np.concatteennaattee((((ssiigg__wwiinndd__ppaadd__ffftt[[::,,::nn__ffrreeqq__ppooss]],,\\\nssiig_wind_pad_fft [:,-1* n_freq_nneegg:]])),,aaxxiiss==11)) # [nn_f_bins ,ccrop_len\n]~[121 ,121]\n# Unwrap\nn_shift = n_freq_nneegg\nssiigg__wwiinndd__ppaadd__fffftt__ccrroopp__uunnwwrraapp == nnpp..rroollll((ssiigg__wwiinndd__ppaadd__fffftt__ccrroopp,,sshhiifftt==nn__sshhiifftt,,\naxis =1)## [[nn__ff__bbiinnss,,ccrroopp__lleenn]]~~[[112211,,112211]\n# Norm((aammpp__mmaaxx==11))\n_sig_amp = np.abs(sig_wind_pad_fft_croopp__uunnwwrraapp))\n_sig_ang = np.angle(sig_wind_pad_fft_crop_unwrap))\n__mmaaxx == nnpp..ttiillee((__ssiigg__aammpp..mmaaxx((aaxxiiss==11,,kkeeeeppddiimmss==TTrruuee)),,((11,,ccrroopp__lleenn))))\n_min = np.tile(_sig_amp.min(axis=1,keepdimmss=Truuee)),,((11,,ccrroopp__lleenn))))\n_sig_amp_normm == __ssiigg__aammpp // _max\nsig_wind_pad_fft_crop_unwrap_norm = _sig_amp_norm * np.exp(1j*_sig_ang)\n# Return\nret = sig_wind_pad_fft_crop_unwrap_norm\nreturn ret\nThhiiss funccttiion is ttoog geenneerraatee oonne bbaatcchh ooffs pspeeccttrrooggrraammss inn bboth tthhe lleeaakkeedd ffoorrmm and the iddea ffoorrmm..\nTThhee pprroocecsess siiss tthhee ssaammee aass tthhaattiilllluussttrraatteedd iinn EEqqnn.. 3344..\ndef syn_one_batch_compplleexx((bblluurr__mmaattrriixx__rriigghtht,,feature_lenn, nn__bbaattcchh))::\n# Syn.HiHiFFii,,blbulrurrerde danadn dAWAGWNG Nsisgingnaall iinn ccoommpplleexx ddoomain\n# ret:((nnddaarrraayy..ccoommpplex128)[[e@,,ffeeaattuurree__llen]\n# blur_matrix_right: RRooww ffiirrsstt(e(aecahc hrorwo wrerperperseesnetntss tthhee ssppeeccttrruumm ooff oonnee ssiinnggle\ncarrierr))\n# Syn. xx[@[,@f,efaetautruree__lleenn]]\nx= =npn.pz.ezrerooss(((nn__bbaattcchh,,fefaetautruer_el_elne)n)*)*nnpp..eexxpp((11jj**00))\nfor i in range(nn__bbaattcchh))::\nnnuumm__carrier = iinnt((nnp..rraannddom..rraannddiint((0,,nn__mmaaxx__ffrreeq_component,,11))))\nidx_carrier = np.random.permutation(ffeeaature_len))[[:nnuumm__ccaarrrriieerr]]\nx[i,idx_carrierr]  == nnpp..rraannddoomm..rraandn(d1(,1n,unmu_mc_acrarrireire)r)** np.exp(1j*( 22**ppii**nnpp..\nrandom.randd((11,,nnuumm__ccaarrireire)r)-  ppii))))\n# Syn. x_blur [@,feature_len]\nx_blur  = xx@ @blbulru_rm_amtatrriixx__rriigghhtt\n# Syn.x_xt_itillddee [[@@,,ffeeaattuurree__lleenn]]\nx_tilde  =  x_blurr ++22**AAWWGGNN__aamp**(np.random.random(x_blurr..shhaappee))--00..55))**\\\nnp.exp(1j*( 22**ppii**nnp.random.randdoomm((xx__bblluurr..sshahpaep)e)-  ppii))))\nreturn  xx,,xx_blur ,xx__ttiillddee\n338 Zheenngg Yang, Yi ZZhhang, Guooxxuaann Chhii, and Guidong ZZhang\nThhiiss part  ddeemmonsstrateess ththeec ocdoedeo nonh ohwowt otoi mipmlpelmemeennttt hteheS ESNENn neetwtwoorrkk..Accorrdingttoo the APPII\nof PPyTorch,, bboth tthhee__init__ andd tthee forwarrdd inintetrefrafcaecsesh sohuoludldb ebiem ipmlpelmemeenntteedd wwitthh ccuussttoommized\nalgoritthhmss..IInn tthee __init__ffunnccttiionn,, wee ddeeffiineedd ffiive compplelexx--vvaalulueed dffuullly--connnnecetceted dllaayyeerrss.. In\nthe forward  ffuunnctiioonn, w we ddeefifinneedd tthhee nneettwworrk structure by conccaatteennaattiinngg tthee ffiive FFC layers aand\nspecciifying the innputt and ouuttppuut tllayeerrss..\nclass SSEENN((nnnn..MMoodduullee))::\ndef __init__(self , ffeeaattuurree__lleenn))::\nssuper(SEN ,sseellff))..___iinniitt____(()\nself.feature_len = ffeeaattuurree__lleen\nself.fc_1 = m_Linear(featuree__lleenn, ffeeaattuurree__lleenn))\nself.fc_2 == mm__LLiinneeaarr((ffeeature_len ,ffeeaattuurree__lleenn))\nself.fc_3 == mm__LLiinneeaarr((ffeeature_len ,ffeeaattuurree__lleenn))\nself.fc_4 == mm__LLiinneeaarr((ffeeature_len ,ffeeaattuurree__lleenn))\nself.fc_out = m_Linear(featurree__lleenn,,ffeeaattuurree__lleenn))\ndef forward(seellff,,xx))::\nh = xx #(#@,(@*,*2,,2,HH))\nhh == ttaannhh((sseellff..ffcc__11((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\nh = ttaanh(sseelf..ffcc_2((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\nh = ttaanh(sseelf..ffcc_3((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\nh = ttaanh(sseelf..ffcc_4((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\noutput = tanh(self.ffcc__oouutt((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\nreturn output\nThhiiss m_Linear ccllaassssl elveevreargageesst htehei nitnetrefrafcaecoe foPfy PTyoTrocrhcht otod edfienfienteh ethceu sctuosmtoimziezdedc ocmomppleexx-vvaluued\nfullyy-connneecctteedd llayyeerr,, whhiicchh iis the immppllemmenetnataitoino nofo fththe ennetewtowrok rsktsrturcutcurtue rielillulustsrtraatteedd iin Fiig..1144..\nclass mm__LLiinneeaarr((nnnn..MMoodduullee))::\ndef __init__(self , size_in , ssiizzee__oouutt))::\nsuper ().__init__ ()\nself.size_iinn, sseellff..ssiizzee_out = size_in , ssiizzee__oouutt\n# CCrreation\nself.weights_real  = nn.Parameterr(torcchh..raannddnn((ssiizzee__iinn,,ssiizzee_out,, ddttype=\ntorch.float32))\nsseellff..wweeiigghhttss__iimmaagg == nnnn..PPaarraammeetteerr((ttoorrcchh..rraandnnd(ns(isziez_ei_ni,n,ssiizzee__oouutt,,ddttyyppee==\ntorch.float32))\nsself.bias = nn.Parameter(torrcchh..rraannddnn((22,,ssiize_out ,dtdytpyepe==totorrcchh..ffllooaatt3322))))\n# IInniittiiaalliizzaattiioonn\nnn.init.xavier_uniform_(self.weights__rreeaall, ggaaiinn==11))\nnn.init.xavier_uniform_(self.weights__iimmaagg, ggaaiinn==11))\nnn.init.zzeerros_((sseellff..bbiiaass))\ndef swap_real_imag(seellff,,xx))::\n# [[@,,**,,22,,HHoouutt]]\n## [real , iimmaag]=>=>[-[1-*1i*miamgag,, rreeaall]]\nh =xx ## [[@@,,**,,22,,HHoouutt]]\nhh = h.flipp((ddiimmss==[[-2-]2)])# #[@[,@*,*,,22,,HHoouutt] [real ,iimmaagg ]=>[[iimmaagg,,rreeal]\nhh == h.transposee((--22,,--11))# #[[@@,,**,,HHoouutt,,22]\nhh ==h*h t*ortocrhc.ht.etnesnosro(r[(-[1-,11,]1]))..ccuuddaa(()) ## [@,*,Houtt,22]][[iimag ,rereaall]]==>>[[--11**\nimag , rreeaall]]\nhh == h.transposee((--22,,--11))# #[[@@,,**,,22,,HHoouut]\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 339\nreturn h\ndef forward(sellff, xx))::\n# x:[[@@,,**,,22,,HHiin]\nh = xx ## [[@@,,**,,22,,HHiinn]]\nh1 = torch.matmmuull((hh,,sseellf.weights_real) ## [[@@,,**,,22,,HHoouutt]]\nh2 = torch.matmul(h, self.weights_imagg) ## [[@@,,**,,22,,HHoouutt]]\nh2= =seslefl f.swap_rreeaall__iimmaagg((hh22)) ## [[@@,,*,,2,,HHoouut]]\nh== hh11 ++ hh2 ## [[@@,,*,,2,,HHoouut]]\nh = torch.add(h, sseellff..bbiiaass)) ## [[@@,,**,,22,,HHoouutt]]++[[22,,HoHuotu t]=>[@@,,**,,22,,\nHout]]\nreturn h\nTThhisis lloossss__function defifinnees  tthhee lloosssf ufunnccttioinon oofft hteheS SEENN netwoorkrk. . TThhe elolosss iiss deeffiined ass the\nEEuucclliideann diistance betwweeenn the iddea ssppectrruumm and the netwrrookk pprreeddiiccted spectruum.. Onnllyy the\namplpiltituuddee ooff the spectrumss aarree connssiideerreedd..\nddeef lloss_function(xx,,yy))::\n## x,y:[[@@,,**,,22,,H]\nx= =totrocrchh..lliinnaallgg..nnoorrmm((xx,,ddiim=--2)# #[@[@,*,*,,22,,HH]]==>>[[@@,,**,,HH]]\ny= =totrorcchh..lliinnaallgg..nnorm(y,dim=-2))##[@[,@*,,*2,,2H,]H]==>>[[@@,,**,,HH]]\n# MSE loss for Amp\nloss_recon  =  MSE(reducttiioonn==''mmeeaann''))((xx,,yy))\nrreturn loss_recon\nIInn tthhiiss ttrraaiinn fufunnccttioionn,,w wee imimpplleemmeennt ttthhee ttrraaiinniinngg pprroocceessss ooff SSEENN asa stthhaatt ddeessccrriibbeedd iinn FFiigg..1166..\nIn each epoocchh, , we eggeneenreartaet eanadn dtrtarainin tthhee nneettwworokr kwiwthit hmumltuilptlipe leitietrearatitioonnss..FoFro reaecahc hitieterraattiionn,,\nwee ggeennerearatete aa batch ofssyynntthheettiic spectrumss iin leeaakked foorrmmaatt. EEaach lleeaakkeedd ssppeeccttrruumm havee an idea\nssppeeccttrruumm asa sththe ellaabbeel.l.\ndef train(moddeell,,bblluur_matrix_riigghhtt,,ffeeaature_len ,nn__eeppoocchh,,n_ni_tirt_rp_eperr__eeppoocchh,,\nn_batch_size ,ooppttiimmiizzeerr))::\nfor i_epoch  in  range(n_beginn__eeppoocchh,,nn__eeppoocchh++11))::\nmodel.ttrraaiinn(())\ntotal_loss_thhiiss__eeppoocchh == 0\nfor i_itr in range(nn__iittrr__ppeerr__eeppoocchh))::\nx,_,_x,_txi_ltidled e= =sysny_no_noen_eb_abtacthc_hc_ocmompplleexx((bblluurr__mmaattrriixx__right=\nblur_matrix_right , feature_len=feature__lleenn, nn__bbaattcchh==nn__bbaattcchh__ssiizzee))\nxx= =cocmopmlpelxe_xa_rarrarya_yt_ot_ob_ibcihcahnanenle_lf_lfolaota_tt_etne nsor(x)\nxx__ttiilde == ccoommpplleexx__aarrrraayy__ttoo__bbiicchhaannnneell__ffllooaatt__ttensor((xx__ttiillddee))\nXx==X.xc.ucdudaa(())\nx_tilde = xx__ttiillddee..ccuuddaa(())\noptimizer.zero_grad ()\nyy == mmooddel((xx__ttiilde))\nlloss = loss_functioonn((xx,,yy))\nloss.backward ()\nooppttiimmiizzeer..sstteepp(())\ntotal_loss_this_epoch ++== lloossss..iitteemm(())\nif i_itr  %�100 === 00::\nprint('----------->> EEppoocchh::{}/{}  lossss::{{::..4f} [itr:{{}}//{{}}]]''..ffoorrmmat(\ni_epoch+11,,nn__epoch ,lloosss..iitteem()/ /n_n_bbaattcchh__size ,i_ii_ittrr++11,,\nn_itr_per_epoocchh)),,eenndd==''\\\\rr'')\n440 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n# VVaalidate\nmmoodel..eevvaal(())\nx,_,_x,_txi_ltdield e= =sysny_no_noen_eb_abtacthc_hc_ocmopmlpelxe(xb(lbulru_rm_amtartirxi_xr_irgighhtt==bblluurr__mmaattrriixx__rriigghht,,\nfeature_len=featuurree__lleenn,,nn__bbaattcchh==nn__bbaattch_size)\nXx= =cocmopmlpelxex__aarrraayy__ttoo__bbiicchhaannnneell__ffllooaatt__tteennssor((xx)\nx_tilde = complex_array_too__bbiicchhaannnneell__ffllooaatt__tteennssoorr((xx__ttiillddee))\nx== xx..ccuuddaa(())\nx_tilde  = xx__ttiillddee..ccuudda(()\ny= =momdodeell((xx__ttiillddee))\ntotal_valid_loss  =  losss__ffuunnccttiioonn((xx,, y)\npprint('==========>> EEppoocchh::{{}/{} Loss:{{::..44ff}}''..ffoorrmmat(i_epoch+1, nn__eeppoocchh,,\ntotaall__vavlaildi_dlo_slso)ss+)'+'''+ winndd__tytpyepe++'_'' + strr((wwiindn_dl_elne)n+)+''*'*2200))\nif  i__eeppoochch% P500 0=== 00::\ntorch.save(model ,ssttrr__mmooddeellnnaammee__pprreeffiixx++''__EE''++ssttrr((ii__eeppoocchh))++''..pptt''))\nThhiiss funccttiion connvveertrtss the complpelxe-xv-avlauleude dararraryasy stot oddouobulbel echcahnannenl erleraela-lv-avlauleude dararraryasy.s .TThihsi siis\nbeeccaauussee tthee GPPU Uonolny lysuspuppoprtosr ttshteh ecaclacluclualtaitioonns sooff real nnumbberesr.sW. eW ueseu sae aliltittlle trriicckkt otoi mimpplelmement\nthe complpelex-xv-valauluede dnentewtowrko rbkyb syespearpatriantgin tghteh ereraela laannd dimimagaignianrayr ypaprtasr tsinintot ottwwo oreraela laarrrraayyss..\ndef ccoommpplleexx__aarrrraayy__ttoo__bbiicchhaannneell__fflolaota_tt_etne nsor(xx))::\n## x:(n(dnadarrraayy..ccoommplex128) [[@@,,**,,HH]\n# ret:((tteennssoorr..ffloat32) [[@@,,**,,22,,HH]\nx= =x.xa.sasttyyppee((''ccoommpplleexx64 ')\nx_reall ==xx..rreal ##[@[,@,**,,HH]]\nx_imag  = xx..iimag # [@,*,H]\nret = np.stack((x_rreeaall,,xx__iimmaagg)),,aaxis=-2) ## [[@@,,**,,HH]]==>>[[@@,,*,,2,H]\nrreett == ttoorrcchh..tteenn sor(ret)\nreturn ret\nTThhisis funccttionccoonvnevretrst stthhee doouubblele chhaannnele lrreaall-valued arraays iinnttoocompplelexx--vvaalluueedd aarrraayyss..\nddeeff bbiicchhaannneell__ffllooaatt__tteenn sor_to_complex_array((xx))::\n# x:((tteennssoorr..ffloat32) [[@@,,**,,22,H]\n# ret:((nnddaarrrraayy..ccoomplex64) [[@@,,**,,HH]]\nx==x.xn.unmupmpyy(())\nx== nnpp..mmoovveeaaxis(x,-2,0) # #[@[,@*,,*2,,2H,]H]==>>[[22,,@@,,**,,HH]\nx_real  = xx[[00,,::]\nxx_imag =×x[1,:]\nret  = xx__rreal +11jj**xx__iimag\nreturn ret\nAAftfteerr ttrraaiinniinngg ththeeS ESENN nneettwwoorrkk wwiitthh ssuuffiffciiceinetneteppoocchhss,,wwee tteessttt htehep eprefrofromrmaannccee wwiitthhs pspeecctrtoroggrraammss\ncolllected ffrroomm Wi-i-FFii..\nFFiirst,,wee deffiinne  ssoomme parameetteerrs. Thhee SSTTFFTT wwinidnodwo widwtihd tihs is este ttto 125, andd the wiindooww ttyyppee iis\nsseett ttoo “ggaauussssiiaann”. T.Thhee ppaatthh ttoo tthhee pprree--ttrraaiinneedd mmoodedle lanadn dthteh eCSCI SfIifilele iiss sseelleecctteedd..\nW== 112255\nwind_type =''ggaauusssiiaann''\nstr_modell__nnaammee =='./ SENN__RReessuultlst/sS/ESNE_N'_'++ wwiindn_dt_ytpyepe+ +''__WW''+  sttrr((WW))+'_'_EE55000..pptt''\nfile_path_csii=='W'iWdiadra3r_3d_adtaat/a2/0210811813103/0/usueserr11//uusseerr11--11--11--11--11..mmaatt''\nTThhee pprrooggrraamm bebgeignisn swiwthit hloloadaidning gththe epprere--ttrraaiinneedd mmodoedle.l. TThheenn, , tthhee CCSSII ddaattaa iiss loloaaddeedd aanndd\nttrraannssffoorrmmede dtoto ssppeeccttrrooggrraamms swiwthit hthteh eprperdeedfeifinende dfufnucntcitoion ncscis_i_ttoo__ssppeecc..AAftfeterr tthhaatt,, tthhee ccoommpplleexx--\nvalluedd speeccttrogrramms saarree ttranssfformede dttoo ddoouublbele rreeaall-valued channnneel l tenssorrss and procceessssedd wiitth the\nSEENN mmodoeld.eTlh. eT hresruelstusl tasnadn tdhteh erarwa wspsepctercotgroragmrsa marsea rsetosrteodr eidn infifilleess..\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 441\nif __name____====\"_\"_m_amaiinn___\"\"::\n# LLoad ttrraaiinned mmooddeell\nprint('Loading model.....''))\nmmooddeell == ttoorrcchh .load(str_model_name))\nprint('Testing model ...')\nmodel.eval()\nwith torch.no_grad(()::\n# IImport raw spectrogram\ndata_1 == ccssii__ttoo__ssppeecc(())\n# EEnhance spectrogram\nxx_tilde  =  commpplleexx__aarrraay_yt_ot_ob_ibcihcahnannenle_lf_lofalto_ate_ntseonrs(odra(tdaa_t1a)_1)# [[66,,11221,T\n]=>[6,121,2,T]\nx_tilde =xx__ttiillddee..ppeerrmmuuttee((00,,33,,22,,11)) #[6[,61,21211,,22,,TT]]==>>[[66,,TT,,22,,112211]]\nyy == mmooddeell((xx__ttiillddee..ccuuddaa(())))..ccppu(()) #[6[,6T,T,,22,,112211]]\ny = bbiicchhaannel_float_tensor_to_complex_array(y) ## [[66,,TT,,11221]\nyy == nnpp..ttrraannssppoossee((yy,,((00,,22,,11)))) # [6,T,,112211]=>>[[66,,112211,,TT]]\nscio.saveemmaatt((''SSEENN__tteests_tx__xt_itlidled_ec_ocmopmlpelx_eWx'_W+'+s tsrt(rW()W)++'.mat', {{''xx__ttiilldde ':\ndataa__11}}))\nscio.saveemmaatt((''SSEENN__tetsets_ty__yc_ocmopmlpelxe_xW_'W+'+s tsrt(rW()W)++ '.mat',{{''yy''::yy}}))\nThhiiss funccttion fifirrssttt rtarnasnfsofromrmsst hteheC CSSIId adtaatain itnotsop sepcetrcotrgorgarmamssa nanddc rcorpopsst htehec ocnoncceerrnneedd frferqequueenncy\nrangee betweeeenn》[6−06600,/6H0z].H Tzh.eTnh,ietn ,uitnwurnawpsr atphset hferefrqeuqeunceyn cbyibnsin sanadn dpeprefroformrms snonromramlailziaztaitioonnss..\ndef ccssii__ttoo__ssppeecc(())::\ngglobal ffiillee__ppaatthh__ccssii\nglobal Ww\nssignal = scio.loadmat(file_path_csi)['csi_mmaatt'']]..ttrraannssppoossee(())## [[6,,TT]] ccoomplex\n# STFT\n_,spspeecc == SSTTFFT(signal , ffss==11000,ststrriiddee==11,,wiwnidn_dw_wiidd==WW,,dfdtf_tw_iwdid==110000,,\nwindow_type='gaussian ') ## [[66,,11000000,,TT]]jj\n# Crop\nspec_crop  =  npp..ccoonnccaatteennaattee(((ssppecec[:[:,:,6:16]1,],speecc[[::,,--6600::]])),, axis =1)## [[11,,1100000,,TT]]jj\n=>>[1,121,T]j\n# UUnnwrap\nsspec_crop_unwrraapp == nnpp..rroolll((sspepce_cc_rcorpo,p,shhiifftt==6600,,axis =1) ## [[11,,112211,,TT]]jj\n# Normalize\nspec_crop_unwrap_norm = normalize_data(spec_crop_unwrap) #[6[,61,12211,,TT]]\ncomplex\nif np.sum(np.isnan(ssppeecc__ccrroopp__uunnwwrraapp__nnoorrmm))))::\npprrint((''>>>>>>>>>>>>>>>>>> NNaaNN ddeetteecctteedd!!''))\nret = spec_crop_unwrap_norm\nreturn ret\nTThhiiss ffuunnccttiioonn ttrraannssffoorrmmss tthhee titmimeed doommaaiinn CCSSII ddaattaa initnotof rferqeuqeunecnycyd odmomaaiinn ssppeeccttrrooggrraammss wwiitthh\nthee APPI Iffunncctitioonn sscciippyy..ssiiggnnaall..ssttfftt..\ndef STFT(siiggnnaall,,fs=1,ssttrriiddee==11,wiwnidn_d_wwiidd==55,,dfdtf_tw_iwdi=d5=5,,wiwnidnodwo_wt_ytpyep=e'=g'aguausssiiaann''))::\nassert dft_wid >>== wwiinndd__wwid and wind_wid >>0 0anadn dstsrtirdied e<=< =wiwnindd__wwiidd aanndd ssttrriidde\n>00\\\\\nand isinstannccee((ssttrriidede,,int) aanndd iissiinstance(windd__wwiidd,, int)anandd iissiinnssttaance(\ndft_wwiidd,,intt))\\\nand  isiinnssttaancnec(ef(sf,s,iinntt))and  ffss >>0\nif window_type == 'gaussian ':\n42 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n品导品 60\nFrequency/Hz 00 Frequency/Hz早吕\n0\n-20\n40\n60 60\n0250 500 750 1000 1250 1500 0250 500 750 1000 1250 1500\nTime/ms Time/ms\n(a) (b)\nFFiigg..1177.. IIlllluussttraratitoinono fofth tehsep sepcetrcotgrorgarmamo fofa pa upsuhsihnignga nadndp upulllinligngg egsetustruer. e(a.()aT)h eThme emaesausruerdeds psepcetcrtorgorgarmam aanndd\n(bb)  ththeee nehnhaanncceedd ssppeeccttrrooggrraamm frroomm thhe SSEN..\nwindow = scipy.signal.windows.gausssiiaann((wwiinndd__wwiidd,,((wwiinndd_wid--1)/ssqrt (8*log\n(200)), ssyymm==TTrruue))\nelif window_type == 'rect':\nwindow = np.ones((wind_wid ,))\nelse::\nwindow = scipy.signal.get_winddooww((wiinnddooww__ttyyppee,,wwiinndd__wwid)\nf_bins , t_binnss,  stftt__ssppeeccttrruumm == sscciippyy..ssiiggnnala.l.stsfttf(tx(=xs=isginganla,l,ffss==ffss,,wwiinnddow=\nwindow ,nnppeerrsseegg==wwiinndd_wid ,nonvoeverrllaapp==wwiinndd__wwid--sstride ,nfnfftt==ddfftt__wwiid,,\\\\\naxis=-1, ddeettrreenndd==FFaalse , return_onesiiddeedd==FFaallssee,, boundary='zerooss'',,ppaaddded=\nTrue))\nreturn f_bins , stft_spectrum\nTThhiiss ffuunnccttiioonn ssccaalleesst htehes psepcetcrtorgorgarmamsst oton onromrmaalliziezet htehve avluaeluseisn tiont[0o, 10]1.%\nddeeff nnoorrmmaalliizzee__ddaattaa((ddaattaa__11))::\n# mmax==11\n## ddaattaa((nnddaarray.complex)=>data_norm(ndarray.compleexx)::[[66,,112211,,TT]]==>>[[66,,1121,T]\ndata_1_abs = abs(ddaattaa__11))\ndata_1_max = data_1_abs.max(axis =(1,2),keepdims=True) ## [[66,,112211,,TT]]==>>[[6,,1,,1]\ndata_1_max_rep = np.tile(data_1_max ,(1, data_1_abs.shape[1], data_1_abs.shape\n[2])))# [#6,[16,,1],=1]>=[>6[,61,12211,,TT]\nddata_1_norm = data_1 // ddaattaa__11__mmaaxx__rep\nreturn  ddaattaa_1_norm\nFFiig.1177 demonosntsrtartaetess the rawanadn denehnahnacnecde sdpsepcetcrtorgorgarmasm osf opfupsuhsihngin ganadn dpuplulillning gggesetsuturreess..\nREFERREENNCCEESS\n[1] Heebbaa AAbbdedlenlnaassseerr,,MMouosutsatfaaf aYYoouussseeff,,aanndd KKhhalaeleddA AHaHrraarsr.a2s.02150.1W5i. gWesitg:eAs t:ubAiquubiitqouuitso uwisfwi-ifiba-bsaesde dgegsetsutruer erreeccooggnnititiion\nsysteemm. Inn PProrcoeceedeindgisnogfst hoefI EtEhEe INIFEOEEC OIMNF.OCOM\n[22]  JJ..CCapon. 1996699..HHigigh-hr-eressoolluuttion frreeqquueenncy-wwaveennuummbebre rssppeectctrruumm aannalaylyssiiss. PPrroocc..IEIEEE1(1996699))..\n[[33]] GGuuooxxuuaann CChih,i,JJiinnggaaoo XXuu,,JJiiaalliinnZ Zhhaanngg,,QQiiaann ZZhhaanngg,, QQiiaanngg MMaa,,aannd dZZhehnegn gYaYnagn.g2.022012.1L.oLcoatcaet,eT,eTlell,l, aanndd GGuuiiddee:: EEnnaabblliinngg\nPPuubblliic CCameerraas too NNaavviiggaatetetthheeP uPubblilci. cI.EIEEEET raTnrasancstaiocntisoonsM oonb iMleobCiolme pCuotminpgut(n2g012)1.).\n[4]  GGuoxuuaann Chhii, ZhheennggYaYnagn,gJ,iJningagoa oXXu,uC,hCehnesnhsuh uWuW,Jui,aJliailni nZZhahnagn,gJ,iJaiannzzhhee Liiang, andd Yunhhaaoo Liu. 2022. Wi-i-ddrroonnee::\nWWi-iF-Fii--baassed 6-DDoF Trackinng ffoorrIInnddooor  DDroonne FFlligihgthtC oCnotnrtorlo. lIn.IPnr oPcreoedceinegdsinogfst hoefA tChMe MACoMb iMSoybs.iSys\n[[55]] FFrraanncçooiiss CChhoolllleett eett aall..22001155..KKeerraas.s. hhttttppss::////ggiitthhuubb..ccoomm//ffcchhoolllleett//kkeerraass..\n[6] Daavviid LLDDoonnohooh.o2.020060.6C.oCmpormespsredss esdensseinnsgin.gIE. EIE ETErTanrasnacsatcitoinons soonn infoorrmmatioonnt htehoerdyan(2g0066))..\n[7] Daanniieell Haallperin, Wenejnujun nHHu,uA,nAmonlm SohleSth,eathnd,  aDnadviDda vWeidthWereatlhle.r2a0ll1.12.0 1T1o.olT oroel reealseea:s eG:aGthaethrienrign g80820.21.1 1nn ttrraces wiith\nchanneel sstattaetien fionrmfoartmioant.ioAnC.MACSMI GSCIOGCMOMM cocmomppuutteerrc ocmommmuunniciactaiotniornev ireewvi(2e0M11))..\n[[88]] DDaavivdid AA.H.iHlli.ll .22000099.. EElleeccttrroommagangenteitci cffiieellddss iinnccaavviittiieess:: ddeetteerrmmiinniisstticica nandds tsattaitsitisctailctahle othreieosr.ieJso.hJnohWn iWleiyle&y S&Soonns((22000099).).\n[99]] YYuuqiaann HHuu, Feng ZZhang, Chheennsshhuu WWu,uB,eBibeiebie iWWanagn,ga,nadn Kd.KJ. RJ.aRy aLyiLui.u2.022002.0A.WAiFWi-iBFais-Beda sePdasPsaisvseiv FeaFlall l Deetteecctioonn\nSSyyssttem..IIn Proocceedeidnignsgosf tohfe ItEhEeE ICEEAES SIPC.ASSP\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 443\n[10]  Weennjjun Jiaanngg,,CChenglinnM Miaaoo,,FFeenngglloonnggM Ma, Shuochao Yao, Yaqinng WWangg,,YYee Yuan,, HHongfei X Xuuee,,CChen SSoong, Xin\nMa,a,DDimiimtirtriioss Koutsonikkoolaass, ,WWenyaoXXu,ua, nadn dLLuu SSuu..22001188..TTowoawradrsd sEEnvnivriroonnmmenetn tIInnddeeppeennddeenntt Deevviice FFrreeeeH Huumman\nAccttivittyyR eRceocgongnitiotnio. nIn.IPnr oPcereodcienegdsionfgAs CoMf MACoMb iCMobmi.Com\n[11] Weennjjuunn JJianng, Hoonnggffeeii XXue,  CChheenngliinnM Miiaaoo, ,SShhiyiyaannggW Wang, Sen Linn,,Chongg Tiian, SrinnivvaassaannM Murali,iH,Haaoocchheenn HHu, Zhii\nSSuunn,,aanndd LLuu Su. 2020. TToowwaradrdss 3D Huummana nPoPsoes eCConosntsrtruuccttion UUsiinnggW Wifif.iI.nIPn roPcreoecdeinegdsinogfsth oefA CthMe MAoCbMi CMombi.Com\n[12]  ZZhippiinnggJ iJainagn, gT,oTmomH HLLuuan, Xincheng RRenn, Donggttao LLvv,,HHan HHao, Jinngg WWang, Kunn Zhaaoo,,WWeie i Xii, Yueshen Xu, and\nRRuui iLLii..22002211.. EElliimmiinnaattiinngg tthhee BBaarrrriieersr:sD: eDmemyyssttifiyfiynigngW Wii--FFiiB aBsaesbeabanndd DDeessiiggnn aanndd IInnttrorodduucciinnggtthhee PPiiccooSScceenneess WWii--FFii\nSenssiing Plaattffoormrm. IEEEE IInntterenrentetof oTfh iTnhgisnJgosuJronuarlna(2002211))..\n[13] Sameereara PPaalliipanaa,,DDavaivdi dRRojoajas,s,PiPyiyusuhs hAgArgarwaawl,a l,anadn dDiDrikr kPePsecshc.h2.021091.9 .FaFlallDlDeFeiF:i:UbUibqiuqiutiotuosu sFFalall Deettectioon UUsing\nCoommmomdoidtiyt yWWi-iF-Fii Deviceess..InInP rPorceoecdeiendgisnogfst hoefA CthMe IMACWM UITM.WUT\n[[1144]] NNeeaal l PPaattwwaarrii aanndd SSnneehhaa KK..KKaasseerraa..22000077..RoRboubsuts tLoLcoactaitoionn DDisisttiinnccttiioonn UUssiinngg TTeemmppoorraall LLiinnkk SSiiggnnaattuurreess. .InInP rPorcoeceedeidnignsgs\nof  thtehAe CAMCMM oMboibCioCmo.m\n[[15] Kuunn Qiian,,CChheennshshu uWWu,uZ,hZenhge nYgaYnagn,Ygu, nYhuanoh aLoiuL,iuan, da nKdyKleyJleamJaimesioesno.n20. 12701.7W.idWarid:aDre:cDimeectimere-teLre-vLeelv ePlaPsassisvivee Trracking\nvia VVeellooccitiytMy oMnonitiotroinrginwg itwhitChoCmommodittyyW Wi--FFi.iI.nInP rPocreoecdeiendgisnogfst hoefA tChMe MACoMb iMHoobci.Hoc\n[[16] Kuunn Qiian,,CChheennshshu uWWu,uZ,hZenhge nYgaYnga,nYgu,nYhuanoh aLoiuL,iaun,da nZdimZuim ZuhoZuh.o2u0.1240.1P4A.DSP:APDasSs: iPvaes sidveetedceteicotnio nofo fmmovoivnign gtatarrggeetts\nwwitith dynaammicic speed uusiinnggPHYY llayer iinnfofrommaattioino.nI.nInP rPorceoecdeiendgisnogfst hoef IEtEhEe IICEPEAED ISC.PADS\n[17]  KKun QQiann, Chenshu Wuu,,YYi i Zhhaanngg,,GGuiudidoonngg ZZhhaanngg,,ZZhehnegn gYYanang,ga, nadn dYYuunhnahoa oLLiiuu..22001188..WWidiadra2r2..00::PPaasssivvee hhuumman\nttracking wiithaa single wwi--fifili nlki.nkP.r oPcreeodcienegdsinogfst hoefA tChMe AMCoMb MiSoybsiS(2ya081)8.).\n[18] Yosssi RRuubner aannd CCarloo TToommasi..22001. Thhee earth mmovveerr'’s ddiistsatnacnec.e.InInP ePrecrecpetuptaulaMl eMtreitcrsifcosr Ifmoarg eImDaagtea bDasteabNaasvei gNaatvioinga. tion\nSpprriinggeerr..\n[19] R. Schmmididtt..11998866..MuMltuilptilpel eeemmititteer looccaattioinona nadnds isginganlapla rpaamraemterteers tiemstaitimoant.ioInE.EIEEETEr aTnrsancstiaocntsionsA nonte nAnatesnannads and\nPrropagatioonn1(1998866))..\n[[20]  HHaoWWanagn,gD,aDqaiqnign gZZhhanang,gJ, uJunnyyii Maa,,YYaassha Waanngg,,YYuuxxiiang Waanngg,,DDaann WWu,uT,aToa oGGu,ua,nadn dBBiinngg Xiie. 20166..H Huumman\nRReessppiirratioon DDetectiioonnw wiiththC Coommmooddiitty Wififi DDeveivciceess::DDo oUUsesre rLLooccaattiion and Boddyy Orriienttatioonn MMatteerr??..IInnP rPorcoeceedeidnignsgs\nof thteheA CAMCMU bUibciocmopm.p\n[21] Cheensshuu Wu,uZ, hZehnegn gYaYnagn,gZ,iZmium ZuhZouh,oXuu,eXfuenefge nLgiuL,iYuu, nYhuanoh aLoiuL,iaun, da nJdiJainanonnogn gCaCoa.o2.021051.5N.oNn-oInn-vInasviavsiev eDeDteetcetcitionn of\nMMovoivningagnadn dStSattaitionnaarry Huummana nWWitiht hWWiFiF.i.IEIEE EJJoouurrnnaall oonn SSeleelcetecdteAdr eAarseiansC oimn mCoumnmicuantiicoantsi(o2n0s1)5)..\n[22]  Chensshuu Wu,u , Fengg Zhaanngg,,YYuuqqiaiann HHuu,a, nadn dKK.J..J.RaRya yLLiuiu..22002200..GaGiatiWtWaya:yM:oMniotnoirtionrgin ganadn dReRceocgonginzizningg GGaiatit Speed\nThhrroouugghh tthee Waallls.  IEIEEET rTarnasnascatciotnisonosn Mono bMiolebiCloem Cpoumtpinugti(n2g0o2)0.).\n[23] Yaxiong Xie, Zheennjjiang Li,,aannd MMoo Li. 2018. Prrecise ppoowwer ddelaayy pprorofiflinlginwg itwhitcho mcmomomdoidtiytWy Wi-iF-iF. iI.EIEEEEET rTarnasnascaticotnisons\non MoobileeC Comomppuuttinigng(0210188))..\n[[2244]] YYaaxxiioonngg XXiiee,,JJiiee XXiioonngg,.MMoo LLii,,aanndd KKyyllee JJaammiieessoonn..22001199..mDm-DTr-aTcrka:cLke:vLeervaegrianggi nmgulmtiu-ltdii-mdeimnseinosniaolniatlyit yfofro rppaassssiivvee iinnddoooorr\nWi-i-FFii ttrracakciknign.gI.nInP roPcreoecdeinedgisnogfst hoefA CthMe MACoMb iCMombi.Com\n[25] Zheenngg Yaanngg,,YYii Zhhaanngg,,GGuiudiodnogn gZhZahnagn, ga, nadn dYuYeu eZZhehnegn.g2.0202.0W.idWarid a3r.03:.0W:iWFii-Fbia-bseadse dAcAticvtivtiytyReRceocgongintitoion nDDataatsaesett..\nhtttps:///ddooi.o.orrgg//1100.2.12122277//77zznnff--qqpp86\n[[2266]] ZZhheennggYaYnagn,gZ,iZmium ZuhZouh,o ua,nadn dYuYnuhnahoa oLiLui.u2.021031.3F.rFormo mRSRSIS StIot oCCSIS:I:IInnddoooorr LLooccaalliizzaattioinonv ivaiCa hCahnannenleRl eRspesopnosnes. eA.CACMM\nCoommpuptu.t. Surv.N(oNvoevmebmerb e2r021031)3,)2,52:51:-12–52:53:322..\n[27]  Feng ZZhangg,,CChehne nCChehne,n ,BBeiebibeeii Wanagn,ga,nadn dK.KJ. JR.aRya yLiLui.u2.021081.8W.iWSpeiSepde:eAd S: tAatSitsatisctiacla lEElleeccttromaaggnneteiticc Apppprrooaacchh ffor\nDeevviiccee--FrreeIInnddooor rSSppeeedd EEssttimaattiion.IIEEEEE Internneettof  TThhiinnggssJ oJuorunrarl{a(2b01188))..\n[28] Yi ZZhhang, Yuee Zheengg,, GGuidong Zhangg,,KKuun nQQiaiann,C, hCehne nQiQaina,na,nadn dZhZehnegn YgaYnagn.g20. 20.2G0a. iGtaIiDt:ID R:oRboubsuts tWiW-Fi-iF iBBaasseedd Gaaiitt\nRReeccooggnniittion. Inn PPrroocecedeidnignsgosf tohfe Stphrei nSgperiWngAeSrA W. ASA\n[29]  MM ingmiin Zhao, Yonggllong TTiaann,,HHang ZZhao, Moohhaammamd aAdbAu bAulAshlsehiekihk,hT,iTainahnohnognLgi,LRi,uRmuemn eHnriHsrtiostvo,vZ,aZcahcahrayr yKKabaeblealacc,,\nDDiinnaa Kaattabi, and AAntonioo TToorrarlablab.a2.021081.8R.FR-FB-aBsaesded3 D3DS kSekleetloentso.nIns.PIrno cPeredoicnegesdoifngthse oAfC MtheSI GACMO MSIMGC. OMM\n[30]  YYuue  ZZhheenngg, Yi  ZZhhaanngg,,KKun Qian, Guiidong Zhang, Yuunnhhaaoo Liiu, Chheennsshhuu Wu,ua, nadn dZZhehnegn gYYanang.g2. 021091.9Z. eZreor-oE-fEfffoorrtt\nCCrroosss--Doommaianin GGesesttuurree Recognitiioonnw wiiththWWii-Fi..InInP rPorcoecedeiendgisnogfs thoef AtChMe AMCoMb iMSoybsi. Sys\n",
  "size" : 3016626,
  "modifiedAt" : 1764639821602,
  "id" : "Hands-on Wireless Sensing with Wi-Fi_A Tutorial(OCR).pdf",
  "content" : "Haanndds-so-onn WWirierleelses sSSeennssiinngg witithh Wi-iF-Fii::AA TTuuttoorriiaall\nZHHENEGN YGANYGA,NTsGin, gThsiunag hUunaiUvneirvseirstiyty,,CChhiina\nYII ZHANAGN,TGs,iTngsihnugah uUanUivneivresristity, Chhiina\nGGUUOXOUAXNU ACHNI,CTsHiIn,gThsuinag hUunaiUvneirvseirstiyty,,CChhiinnaa\nGGUUIDIODNOG NZGHAZNGH,ATsNiGng,hTusianUgnhiuvaeUrnsivterys,it yC, hCihninaa\nWitithh tthee rapiid developmenetn tooff wirireelless commmunuincaictaitoino ntetechcnhonloolgoyg,y ,wwirierleelesss acccceessss points((APP) ) anndd iintternett\nooff things((IIoT)) deviices have been widideellyy ddeeppllooyyeedd iinn oouurr ssuurrrrouunndidningsg.sV.aVrairoiuosu stytpyepse sofo fwwirierleelesss ssiignaalls\n(ee..gg.,.,WWii-Fi,,LoRRaa,,LTLET)Ear)ea rfeilfillilinngg oouut toouur rlliiving andd wworokriknign gspsapcaecse.s .PPrerveivoiousu sreresesearacrhcehse srerevveaela ltthhee ffact\nthatt radio waavvese saarere mmodoudlautleadt ebdy btyhet hsepastpiaatli asltsrturcutcutruer edudruinrign gthteh perpopraogpaatgiaonti opnropcerossc e(ses.g(e..,g .r, erfelfleeccttiionn,,\ndiiffffrraaccttiioonn,,and scatterinng) aannd ssuuperimpposoesde dono nthteh ererceecievievre.r . Thhisis obbsseerrvvaatitioonn aalllows suuss tto reconnssttrruucctt the\nsurrrouunnddining geenvnivriornomnemnte nbtasbeads eodn ornecreicveeidv ewdirweilreeslse ssisginganlasl,s ,ccaallled\"“wwirierleelesss sseennssiingg\"”..WWirierleelses ssseennsisningg iiss\narXiv:2206.09532vl [eess.SP] 20Jun 2022 aann eemmeregrigning gtteecchhnonloolgoyg ythtahta teennabalbelse saa wwididee rraanngge eooff aapppplliiccaattiioonnss,,ssuucchh aass ggeessttuurree rreeccooggnniittiioonn foforrh uhummaann--\ncommpuptuerte rinitnetrearcatcitoion,n ,vviittal ssiiggnns  mmonniittorriingg for healthh ccaaree, a nandd inintrturussioionnd deetteecctitoinonf ofrors esceucruirtiytmy amannaaggemeennt.t.\nCoommpapraerde dwiwthit hotohtehre rsesnesnisning gpparaaraddigigmms,ss,uscuhc hasa svivsiisoionn-b-baasseedd aanndd IIMMU-Ub-absaesde dsesnesnisnign,g ,wwirierelleessss sensing\nsolutioonns hhave unique advaannttaaggeess ssuucchh aass hiigh covveerraaggee,, pervassivenesss, llow ccoosstt,, and robustness undeerr\naddvveerrssee llight and texture scenarios. Beessiiddeess,,wwirierleelesss sseennssiinngg ssoolluuttiionnss aarree geenneerraallly ligghhtweeiighhtt in teermmss of\nbootthh coommpuptuataitoino novoevrehrehade aadnda nddevdiecvei cseizseiz.e .ThTihsi sttuuttoorriiaall taakes WWii--FFii sensing as aann eexxampplele..IItt inntrooducess\nbootthh tthee theoorreettiical pprinncippleess aanndd tthhee ccooddee iimmplemeentnattaitoionn1 1ofo fdadtaat accololleeccttiionn,, siggnal pproocessinng, featurress\nexttraccttion,,aannd dmomdoeld edledsiegsnig.Inn. Ianddaidtdioitni,o nt,htihs istuttuotroiraila lhhiigghhliligghhttss sstate-of-thhe-art ddeeep leeaarnninng moodedlesl(se(.eg..g,.,\nCCNNN,N ,RRNNN,N a,nadn dadavdervsearrsiaarila llleeaarrnniinngg mmodoedlesl)sa)nadn dthtehieri raappplpilcicaattiioonnss iinn wwiirreelleesssss esnenssininggs yssytsetmemss..WWee hhooppee tthhiiss\nttuuttoorriiaall wwiillllh heellppp peeooppllee iinn ootthheerr rreesseeaarrcchh fifeiledlsdst otob rberaekaki nitnotow iwrierleelsesssse snesnisnigngr erseesaeracrhcha nadndl elaeranrnm moorree aabboouutt\niittss tthheeoorriieess,,ddeessiiggnnss,,aanndd iimmplpelmeemnteanttiaotni osnkislklisll,s ,pprroommotointign gprposropesrpietryi tyini nthteh ewiwreirleelsess ssseensnisning grerseesaeracrhc hfifieelldd..\n1 WWIRIREELLEESSSS SSEENNSSIINNGGB ABCACKKGGRROOUND\n1.11 WWhaht aitsis Wirierelleessss Sensing\nVaarriiouss sensors aannd sseennsor nneettwworks have thhoroughhlly extendeedd huummana npeprecrecpetpitoino nofo ftthee phhyyssiiccaall\nwoorrlldd..NNowoawdaydsa,y sn,unmeurmouesro suesnseonrso hrsavhea vbeebne ednepdleopyelody teod tcoomcpolmetpel evtearviaoruiso ussensseinnsgin tgatsaksk,s ,rreessuulltt-\ninng iinn aas isginginfiicfaincatndte pdleopylmoyemnentta nadndm maaiinntteennaannce oovveerhhead.  TThhiss pprroobblleemm bbecomeess iincreasingly\ntroubllesome ewwhehne na alalargrge esseennssiinngg ssccaalle issi nind edmemaannd. Taakkiinngg iinddoooor rppeerrssoonn ttrrackkiingg as an exampplele,,\na sppecialiizzeedd trtarcakckinigngs yssytsetmem oonnlyy ccoovvers  aa roroomm-level  aarreeaa,,w whhicchh isist otooos msmaall lc ocmomppaareedd ww ith\nthe moovvining grreeggioionn dduruirning gaa ppeersrsoon'ns’ sddaaiilly liffee..MMuullttiplee ttrraacckkiinngg ssyysstteemms aaree nneeeded to aachieve\npprraaccttiiccaall sseennssiinngg ccoovveerraaggee iinn rereaalilsitsictilciv ilnigvienng veirnovinrmonemnetnst,se,.eg..,gh.,ohuosuesse,sc,acammppuusseess,, mmaarrkkeettss,,aaiirrppoorrttss,,\nandd offfificceess,,and the cost iinneevvittaabbllyy rarammps up..\nGiivveenn tthhee ccoostst limmiitationss of tthhee sseennsors, maanyn ypipoinoeneerse rtsrtireide dttoo ffiigurree ouutt an alternative sooluutioonn\ndduurriinngg tthhee ppaasstt ddeeccaaddee..  NNoowwaaddayasy,s ,vvaarriioouuss ttyyppeess ooff ssiiggnnaallss((ee..gg.,.,WWii--FFii,,LLooRRaa,,LLTET)Ea)rea rfeifilllliinngg oouutt\nourr liivviningg aanndd wworking spaces foor  wwireelleesssc ocmommuunnicicaattiionn,, whhiicchh ccaann bbee lleveragedd to capture\nthe enviroonmeenntatall channggeess wiitthoouutt caussiing extraa oovveerrhhead. Accccoorrddiingg to thhe eelelcetcrtormomaaggnetissmm\ntheory, tthhee rardadioios isginganlaslesm eimtitetdtebdy btyh ethter atnrsamnsitmtietrt(eTrx(T)xe)xepxepreireinecnecev avrairoiuosusp hpyhsyisciaclaplh pehneonmomeenna\nsucchh aass reflfleeccttioionn,,ddifffrfarcatcitoino,na,nandd ssccaattetreirnigngddurinng tthhe pprroopagattion proceessss and form iintto muultltiiplle\npprrooppaaggataitioonn ppaathths.sI. nIn tthhiiss wwaayy,,ththe essuupepreirmimpopseods emdulmtiupltaitpha tshigsnigalnsa lcsoclollelcetcetde dbby ytthhe erreecceeiivveerr ccaarrrryy\nspaattial  ininfoformrmatioonn aabboout tthhees isgingnaallp rporpoapgagaattioinone nenvviriornonmmentt.RReellyyiinngg oonnllyy onn the ambbieiennt t wirireellesss\nssiiggnnaallss aanndd uubbiiqquuiittoouuss ccoommmmunuincaictaitoino ndedveivciecse,s ,wwirireelleessss sseennssiinngg eemmeerrggeess aass aa nnoovveell ppaarraaddiiggmm ffoorr\neennvviirroonnmmenetn tsseennssiinngg..\nIn recentt years,  wwireleessss sseennssiinngg tteecchhnnoloogy hass attraacteedd mmaannyy rreesseeaarrcchh iinntteerreessttss to brinng\nwwiirreelleessss sseennssiinngg ffrroomm tthhee iimmaaggiinnaattiioonn iinnttoo rreeaallitiyt,yb,ybyb boooossttininggs esnenssinigngg grarnanuullaarritiyt,yi,mimpprroovviinngg\n11Cooded eaandn ddadtaat aaraere aavvaaililaabbllee at hhtttpp:://t/nns.tthhsss.t.stisnignhguhuaa.e.deduu..ccnn//wwst  aannd hhtttpp:://tnns.tthhsss.tssiinngghua..edu..cn//wididaar3r3.0.0..\narXiv:2206.09532v1  [eess.SP]  20 Jun 2022\n22 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n个今为店可O\nData Collection and Dataset Preprocessing Feature Algorithm\nExtraction and Model\nFiig.  11.. CCompparairsisiionn ooff vissiioonn--bbaased seensinng aand RFF--bbaasseedd sseennssiinngg pprroocceessseess..\nsysstem rroobbuustsntneses,s , anndd eexxpplloorriinngg aapppplilicaattion scenarrios.  MManyy ooff their  wworkss on wiirreelless sseennsinng\nhaavvee been ppubliisshheeddi ninfl afglsahgipshciopn fceornefnecreesnacneds jaonudr njaolsu,rsnuaclhs,assuAchC MasS IAGCMC OSIMGMCO,MAM,CAMCMM MobiCCom,,\nACCMM MMoboibSiSyyss,,IIEEEIINNFFOOCOCMO,MUS, EUNSIEXN INXSDNIS,DIIE,EIEE/EAC/AMC TMoNT,oINE,EIE EJESJASCA,C ,aanndd IEEE TTMMC..IIn\nadddiition,  mmannyy ffaammouosu scocmopmanpiaens ieasrea raelsaols oexepxlporloirnign gthteh eprpordoudcuticztiaztaitoino nofo fsseennsosrolrelesss sseennssiingg,,\nlauncchhiinngg vvaarriiouss IoT devices ffoorrh huumman--ccoommpuptuetre rininteterraaccttiionn,, securittyy mmoniitorinng, andd heeaallth\nccaarree..\n1.22 CComopmarpiasroisno nofo fWiWreirleelsess sSSeennssiinngg aanndd CCoompmupteurte VriVsisoionn\nTyyppiiccaall RF siggnalss(300 kHzz-3-0300 0GHGz)H za)nda nvdisviibslibel eliligghhtt signalls ((338800 TTHHz--75705 0THTzH) za)raer eesesesnetnitaiallly\nelectrroommagnneettic((EMM)w)awveasv.e sW. hWenh epnroppraogpaatgiantgi nign inouoru rphpyhsyisciacla lwworolrdld,, thhe EEMM waavveess exppeerriience\na varriety of pphyssiical pphenoommenean saucshu cahs arsefrleeflcetcitoino,n ,didfifffrraaccttiion,, and scatttering. MMuullttiipatth signaalls\nare eventtuaallly ssuuperimppoosesde daannd drerececieviveed dbby ytthhee rreecceeiiveerr. TTherefore,  ththeer erceecievievdeds uspupeerrimimpposed\nssiiggnnaallss ccaarrrryy tthhee pphhyyssiiccaall iinnffoorrmmaattiioonn ooff tthhee ssiiggnnaall  pprrooppaaggaattiioonn ssppaaccee..\nBootthh tthee RFF--bbaasesde daandn dthteh evivsisiioonn-b-basaesde dsesnesnisnign galaglgoroirtithhmsm shsahraer esismiimlailra rpprorcoecsessesse.s .TThehye yfifirrsstt\nannaallyyzzee tthhee rreecceeiivveedd ssiiggnnalasls ((radiio signaall at tthhee aannteennaa orr viisiblee lligihghtta ta t htehec acmameerraa lelennss)), ,ffrroomm\nwwhihcihc hththe effeeaattuureres srreeffllectinng tthhe pproopagaattiion spaaccee arre extracted and ffiinnalllyy rreessoolvlveedd bbyy aalglgoorriiththmms\nto reealiizzeet htehes esnesnisnigngo fofth tehseu srurorruonudnidnignge nenvvirioronnmmentt..\nCoommpapraerde dwiwthit hvivsisoion-nb-absaesde dsseennsisningg,w, iwrierleelses ssseennssiingg sollutioons hhave uuniqque advanttageess such\nas high covveerraaggee [[33]],, pervasiveneessss,, looww cost,  aannd rroobustness unddeerr aaddvveerrssee llightt and texture\nsscceennarairoios s[[44]]..\n1.3 WWireirleelsess sSSeennsisningg AApplpilcicaattiionnss\nWWirierleelessss sseennssiinngg ssyysstteemmss aarree ccaappaabbllee ooff ppeerrcceeiivvininggc hchaannggeess inins usurrroruounnddiinngg eennvviirroonnmmeenntsts,,oobbjejeccttss,,\naanndd hhuummana nbobdoidesie.sI.nI nththisis ssuubbsseeccttiioonn,,  wwee ttaakkee ppaasssisvieveh uhmumaann sesnensisnigagapplpilciactaitioonnss aass aann eexxaammppllee,,\nwhhicichh rreeffeerrss to a hhumaan-nc-ecnetnetreerde dsesnesnisnign gapapplpilciactaitoion nththata tddooesens'nt’ trreqquuiirree the user too ccaarrrryy aannyy\ndeevviice. TTherefore, such an senssing appllicatiioonn isisa laslostoe rtmeremdeda sasd edveicvei-cfer-eferseeen ssienngsionrgn noonn--ininvvaassivieve\nsensinngg.PPasasisivvee hhuummana nsesnesnisnign geneanbalbelse sa awwidied eraranngeg eofo faappplilicatioons, inncluuddinngg ssmmart hhomeess,,\nsecurriity surveiillaannce, andd hheeaalltthh caarree..\nIIn smaratr thhomoem aeppalpipclaitciaotinosn,sp,apssaissviev ehuhmuamn asnensseinnsgi nrgecreogcnoigzneisz eas apepresrosno'ns’ sbbeheahvaivoiro roorr intentioon\nbbaasseedd oonn tthhee uusseerr'’s physsiical llooccaattioinonss, ,ggeessttuurreess,,aannd postures.  PPaassssiviveeh huumman senssiingg brringss a\nbbeetttteerr uusseerr eexxppeerriieennccee wwiitthhoouutt iimmppoossiinngg rreessttrriiccttioionnsso onnt htheeu suesre.rF.oForre xeaxmamppllee,,uusseerrss ccaann rreemmootteellyy\nccoonnttrrooll eelleeccttrriiccaalld deevviciceess, ,ee.g.g.,.t,e lteevliesvioisni,ocno,m cpomuptuetr,ero,rorw awsahsheer,r,b ybym meerreelylyp peerrfoforrmmiinngg ggeessttuurreess\niinn tthhee aaiirr[ 1[,1,3300]]. .L iLkiekwewisies,ew, hwehennp plalyayininggv vidiedoeog agammeess,,uusseerrss ccaann iinntteerraaccttw wiitthh ththeec ocmomppuutteerr bbyy\npeerrfforrmminign gdidfifffeerreennt tppoostsutureres s[[1111]]..\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 33\nIIn securriity surveeiillanccee apppllicatioonns,,trraaddiititoinonaallm meeththooddss aaddooppt i nifnrfarraerdedo roRrRGGB cameerraass to\nmonointiotro riilleeggal  inivnvaassioionnss,,p rportoetcetcvta vluaalubaleblper opproeprteiretsi,easn,dandde adleawli twhitehm emrgeregnecniceise.sH.oHowwever,  ccaammeras\narre conssttrraaiineedd bbyy tthhee llimiittedd ffiieldd ooffv vieiwew oor  bblloocckkage of oopaquuee oorr mmeteatlallilicc objjectts,  rreennderinng\ntheessee metehthodosd stot offaaiill wwhheenn tthhee ttarrggeett is  nnoot  inint hteheL iLnien-eo-fo-fS-iSgihgtht((LLooSS) area of tthhee ssuurrvveeillalnancceec acammera\noorr hhiiddddeenn bbeehihnidn dotohtehre robojbejcetcst.s . IInn ccoonnttrraasstt ttoo vviissuuaall ssuurrvveeiilllalnacnec,e,wwiirreelleesssss esnenssiningg tetcehchnnoollooggyy\nleverageess radio siiggnnalss,,w whhicchh pprroovidde oommnniiddiirreeccttionaall coverraggee arrouunnd dtthhee wwirierelelesss deevviicceess andd are\nless ppronee to bbloockageess..FFoor reexxamapmlep,l ew,iwreirlelsess sisgignanlasl sccaan nbeb euusesde dtoto ddeteetectc tiilleeggal ininttrruussiioonns [16,,2211]]..\nBeessiiddeess,,tthheey yccaan nalaslsoo bbee uusseed dttoo ddeetteecctt if  pprroopertieess hhaavve bbeen moovevde dfrforom mthtehieri roroirgigininala lppllaacceess..\nIn heaalltthh ccaarree aapppliliccaattiionnss,,ppaassisvivee hhuumamna snesnesninsgin cgacna bneblevlervaegreadg etod tdoetdeectte cvtivtiatla lssiignnaallss such as\nhuummana nrersepsipriartaitoion,n ,hheearatrbtbeaeta,t,gagiati,t,aandn dacacicdiednetnatla lffaalll. Speecciiffiiccaalllyy, ,ssoommee researcheerrss havee expplloiited\nWi-iF-iF issiignaalls too ddeteecctt hhuummaann rreessppiiratioon [220]  ffoorrs lseleepepm moonnittoorriningg..S oSmome oothher wworrkss [22, 28]]\nhaavvee eexxttrraacctteedd gaaiit ppatteerrnns ffroromm Wi-i-FFii siggnals ttoor erceocoggnnizzee hhuummaann iideennttiity. RRecently, Wi-i-FFii signalls\nhhaavve ebbeene nfufrutrhtehre rusuesde dtot odedteetcetc tacacicdiednetnatla lfafalllss to rreeliieevvee ththee nneeeedd ffoorr wwearabblle senssoorrss [9,1133]]..\n2 UUNNDDERESRTSTAANNDIDNINGG CCSSII\nChhananenle lssttaattee informaattiionn(C(CSIS)I )llayss the foouundaattion of mmosstt wiireless  sseennssiinngg tetcehchnniiqquueess,,iinncclluuddinngg\nWi-iF-Fi i senssing,LLTTEE sseennsisinngg,,anadn dsoso oonn.C. SCIS Iprporvoivdiedse spphhysyiscicaall channneell meeaassuureremmenetnst sinin ssuubbccaarrriier-\nlevel  ggrraannulariittyy, ,a nadndi ticta cnanb ebe aesailsyilayc caecscseesdsefdr ofmrotmh ethceo cmommodityy WWii--Fi netwoorrkk iintterface\nccoonnttrroolller((NIICC))..\nCCSSI Iddeessccrriibbeess tthhee pprrooppaaggaattiioonn pprroocceessss oofftthhee wwirireelleessss ssiiggnnaall aanndd tthheerreeffoorree ccoonnttaaiinnss ggeeoommeettrriicc\ninformaattiionn off thhe pprroopagatioon ssppace. T Thhuus, u unnddeerssttaannddinng tthhee mmappiingg relaatiioonnsshhipp bbeettwween CSSII\naanndd ssppaattiiaall ggeeoommetertriicc ppaarraammeteetresr sllaayyss tthhee ffoouunnddaattiioonn ffoorr ffeeaattuurree eexxttrraaccttioionn aanndd sseennssiinngg aallggoorriiththmm\ndeessiign..\nTThhisis sectioon ffooccuuses  oonn ttwwo mmaaiinsstream CCSSI Immodoedlesl:st:hteh erraayy-t-trraacciingg modoedle laannd dtthhee ssccaattterinng\nmmodoedle.l .TThhe ettwwo ommodoeldse lsaraer ebbasaesde doon nttwwo opepresrpsepcetcitvivese sooff unnddeerrssttaannddiinngg tthee signal pprroopagatioon\npprroocceessss.. TThhuuss,, tthheeyy hhaavvee uunniiqquuee aaddvvanatnatgaegse sanadn dapapplpy lytot odidfifffeerreenntt sscceennaarriiooss..\n2.1 RRaya-yt-trraacciing Mooddeell\nIn typical iinnddoor enviironnmmenetns,tsa, saisginganl aslesnetn tbyb ythteh etrtarnasnmsimttiettre rararrirvievse saat ttthee rrecceeiiveerr viia muultltiiplle\npaatthhss dduuee ttoo tthee refflleectiioonn oof  ththeer araddioiow wave.  AAlong eacchh ppaatthh,, the signall experriencceess a certain\natttenuuaattiionn aannd dpphahsaes eshsihfitf.t. Thhee rreecceeiivveedd ssiiggnnala liis thhe suuperrimpposoistiitioonn oof fmmulutlitpiplele aalliias versionss of\nthe traansmiitttted siggnal.  TThherefoore, t htehec ocmomplex bbasebandd ssignaall strreenngth meeaassuurered daat ttthee receiver\nat aa ssppecifificct itmimee ccaann bbe wrriitten as folloowss [∑︁266]]::\uD835\uDC41\n\uD835\uDC49 = ∥\uD835\uDC49\uD835\uDC5B ∥\uD835\uDC52−\uD835\uDC57\uD835\uDF19\uD835\uDC5B , (1)\n\uD835\uDC5B=1\nwhhereree +\uD835\uDC49=\uD835\uDC5Banadn dq=\uD835\uDF19a\uD835\uDC5Braer eththe eaammplpiltituuddee andd phaasse of  ththee\uD835\uDC5B=\uD835\uDC61Cℎmumlutlitpipaatthh ccommpopnoennetn(tn(ontoet eththaatt the\nmodoudlualtaitoion nsscchhemeem oefo fthteh essiiggnnaal l is iimmplicciitltylyc ocnosnisdiedreerde)d,)a,nadnd\uD835\uDC41# is tthhee tototatlaln unmumbber  ooffc ocmomponeennttss..\nOnn tthhisis baassiis, tthhee rreecciieevvee ssigingnaalls tsrternegngththi nidndiciactaotror((R(RSSSI)  ccaann bbee wwrittteenn aass ththeer erceeceivieveddp poowweerr indeecciibeells((dBB))::\nRSSIE= 1100llog2 k∥+\uD835\uDC49k∥22”\n)\n. (2)\nAAss tthee supeerrimppoosistitiion ofmmulutlitippaatthh commpopnoennetns,tsR,SRSIS SnIonto otnolnyl yvavraireiess rrappiidly wiith pproopagatioon\ndiistanccee chaanngigning gata ttthhee oorrddeer rooff thee signall waavveelelenngtght hbubtu talaslsoo fflluccttuaatteess ovveerr timee,, evenn forr a\nssttaattiicc llininkk..AA sslliigghhttc chhaannggee iinn ssppeecciififcicm muullttipipaaththc ocommppoonneentnst smmaya yrerseuslutl tiinn ssiiggnniiffiiccaanntt ccoonnssttrruuccttiivvee\noorr deessttruccttive muultltiipaatth commpopnoentesn,t sl,elaedaidnign gtot occonosnisdiedrearbalbel eflfluuccttuuaattiioonnss iin RSSSSII..\nThhee eessseenntitiaall drawbabcakc kofoRfSRSIS SiIs isthteh efafaililuurree to reflfleeccttt htehem muulttipipaatthhe efffefcetc.tT.Thhee wwirreelleesssc hchaannnel\nis mmooddeelleedd aass aa linnear teemmppoorraall ffiiltteerrt otof uflulyllcyh cahrarcatcetreizreizien diinvdiidvuiadluapla tphast,hks,nkonwownn aass cchhaannell\n4From RSSI to CSI: Indoor Localization via Channel RZhheeensngpg oYnasnegg,,YYii ZZhang, Guuooxxuuaann Chhii, and Guidong 2ZZ5h:a7ng\nChannel lmpulse Resporse\nOriginal Signal LOSPath\n.Path2\nPath2 Path3 Time\nTime Amplitude-Frequency Response\nTransmiltter LOS path Recelver\nDelayed,AteruatedMultijpath Signals\nFreqeuncy\nPath3 Phase-Frequency Response\nTime\nFrequenxy\nFig. 4. Multipath propagations, received signals, and channel responses.\nFFiigg..22..MMulutiltpiaptaht hprporpoapgaagtiaotniosn, sr, erececieviveedd ssiiggnnaallss,, aanndd cchhaannnneell rreessppoonnsseess..\ntime-invariant assumption, CIR h(τ ) is denoted as:\niimmppuulslsee rreessppoonnssee(C(CIRIR).)U. nUdnedr etrhteh eteitimme-ei-ninv∑︁∑vaNrairaianntt aassssuummptpitoionn,C, ICRI Rh1ℎt(?\uD835\uDC61i)si srreeppreresseenntetedd aass::h(τ ) = aie− jθ\n\uD835\uDC41 i δ(τ − τi), (4)\nℎ(\uD835\uDC61) = \uD835\uDEFC\uD835\uDC5B\uD835\uDC52\n−\uD835\uDC57\uD835\uDF19\ni=-1 \uD835\uDC5B\uD835\uDEFFe(\uD835\uDC61 − \uD835\uDF0F\uD835\uDC5B), ((3)\n\uD835\uDC5B=1\nwhere ai, θi, and τi are the amplitude, phase, and time delay of the ith path, respectively.\nwwhNehreiers eαt\uD835\uDEFCh\uD835\uDC5B=e,φ\uD835\uDF19t\uD835\uDC5Bo=,t,aanlndn \uD835\uDF0Fut\uD835\uDC5B=marbee trthheoefc ocmommupllteixp aaantnhteenanunadtioδo(nτ, )phisaassteeh,,aeannDdd ittriamcee ddeelltaay ofufnthcetni\uD835\uDC5BCo\uD835\uDC61pnℎa.tpEha,ta hcr,hersepismepceptciutvilveselelyy..\nN\uD835\uDC41r eiisps rtehsee tnoottsaallan dnuuemmlabeyerre dofm muulllttipatthh acnoddm δ\uD835\uDEFFp(1o·0)niiesntththe,e mDDiuriralatcic pddleielelttda bfuyntchteiocno.r ErEaecshp oimnmdpuuilnlssgee arempprelisteuntdtsse a\ndaeelnladyepdh mausulelt.tipath ccoomppoonnenetn,tm, umlutiltpilpilieedd byththee ccoorrreesspoonnddiinngg aammplpiltituuddee aanndd pphhaassee..\nIIIn nthtehffrreequfureeenncqycu yeddonmocamyina,idn ot,mhthea emimunl,utilttpihapetaht hccocanaususestser suffcrrteeiqqvuueeenncaycn-ysd-esleedlecectstiitvvreeu fcatdivineg,p wwhhaiicshe sissachlsaroracccttaeuriszeed\nbbyfyrcehcaqhnuanneelnn ecflyrf-ersqeeuqleueneccntyi cvryeersepfsoapndosienn(sgCeF,(RC)w.FhCRFi)Rc. hCiFsi Rsesischensatsrieaanlctlitayel rltyihzteeh deFoFuaorsuiertrihe rtertraCannshfsaofornmrnm eoflo fCFCIrRIe.RIq.tuI teccnooncnsyissistRtsse o- f\nbsoptohntshee (aCmFpRlit)u. dCeFrRespcoonnsseisatnsdotfhaemphpalisteurdees-pforneqseu.eFnigc.y2rdeesmpoonnssteraatneda pmhualtsiep-aftrheqscueennacryio,rteh-e\nts\no\nrap\nth\nno\n \nsnmse it.teFdi\npglsu\nit\nigrne\nde\na4\n \nl,s\nr\nthheowonres\nse\ncea\n \nivm\nan\neu\nd \ndltst\nh\niigp\ne \nna\np\nat\nh\nlh\nas\n, ap\ne\nnr\n \ndo\nrpestha\np\neg\no\nia\nns\nllt\ne\nuin\n. \nstg\nFi\nracto\n.\nivn\n2\ned\n \ncit\ne\nhi\nm\nao\no\nnn\nns\nn,\nt\net\nrhal re\nte\net\n \nsr\na\npa\n \non\nmu\nnslsem\nti\ns.it\np\nBt\na\noe\nt\ntd\nh \nhssCi\ncgeIRn\nnaaral\ni\nns\no,\nda\n \nCnFdthesrietceeidv esdi sniagln, atlhs, arencdeiivlelud sstirgantiv,e acnhda tnhne eillrleusstproantisvees .cGhainvneenl irnesfipnonitseesb.a Bnodthw iCdIRth a,nCd ICRFR\ndieesppieiccqtt uai vssmamlaaellnl-tscctaoleCe mFmuRllt.iAppaanthdh eCefffFefeRccttia snadnthda eraerFeuo suuesrdeidef orfrotrfir anfnei-nsgefr-oagrirmnaeindoefcdhC caIhnRan.enellm meeaassuureemeenntt.. Noottee thaatt\nthe BcootmhpplCelexIx RaammaplnpidltituCuddeFesR saadnnded paaincnttteentnhuneautsaimtoiona nlal-arserce acclooenncmceerunrlnetdei pdiainnt hCCIeIRRf faeancndtd CaCFnRFd,R ,awwhriehliwel eiadanenoltoyhtheures reppadairifro rof\nppacarhraaammnetneeterelsr smiinen attseeurrmrmses mooffe tnhtthe.esN isgointgaenlatplh oapwotweCerrIi sRiPsao nwPodewrCerDF eDRlealayaryPe rPowrfioiltfehi(lPreeD(sPPpD)Pea)cnatndtdoP Pocowowmeerrp SSlpepexeccattrmruummp lDDiteeunnsdsieitt,yy\n((PwShD)il).e. another pair of parameters in terms of signal power is Power Delay Profile (PDP)\naCnCIdIRR Paoanwnd deCrFCRSF pRaeracert ermueamseuaDrseuednr esbdiyt ybdye(PcdoSeucDpol)ui.npgli ntghet hteratnrsamnistmteitdt esdigsniganl afl rformo mthteh ererceecievievde dsisgignnala.l.\nSppeecTcioiffiicsaulmlyy,,uinnp t,thhceeh tatiminmnee ddlormeaaisnipn,o ,nthseee riescetioveRd SsSigInawall h\uD835\uDC5Fra(1\uD835\uDC61tt)?aiis rttahhien cbcooonwvoolilsuttitioon aoffs utrrnaabnesmaimtitt,edwd hsiegrneaall\ns\uD835\uDC60c1(ot\uD835\uDC61)?m aapnnodn cehnatnsnneoelfl dimmifppfueulrlsseeen rtewspaovnnsesele ehnℎ1g(t\uD835\uDC61t?)h::s are separated. Channel response possesses finer-\ngrained frequency resolution and equivalently higher time resolution to distinguish\nmultipath components, yet at the cr\uD835\uDC5Fo1(s\uD835\uDC61t)?o=fs\uD835\uDC60s1(l\uD835\uDC61ti)g?⊗ht1ℎtm(?\uD835\uDC61)o,,dification of firmware or hardwar((e44))\nwwhoihncihco hfifni-ndtihdcieac-tasethse setlthfhepe rlraeectcifioeevrvemedd ss,siijgunnsaaltl aiss gtgheneeprarttiesdm fruosme dtthhteeo ttdriasnpssmemirtis tessiitghnneaalsl uafntelirg ihitttp .rpTorapopabaglgeaatIiinonggff fefrrrosomm\nmmualubtlitripipeaatfthch ocmhaapnnannerelisl..on of channel response and RSSI. Note that although CIR resembles a\nseSqimueilnacrelyo, finRtShSeIf,rethqueeunncdyedrolymianign,ttimheerreecseoivleudtisoingnisalmspuecchtrhuimgher, and thus differs from\nRSSiSmiIlsaerqlyu,einn cteh-be afsreedquleonccayl idzoamtaioinn,[tFhea nrgecaenivdeLd isnig2n0a1l0 s].pOecntrtuhme \uD835\uDC45Ro1(tf\uD835\uDC53hi)esi rsthhthae enmdmu,luittlitpiisplilpiccoaasttsiioiobnnl eooff\ntthoe otrbratanansismnm irtattewedd rsesigicngeanival les pdsepsceitgcrutnrmaulm\uD835\uDC46p (So\uD835\uDC531w)faeanrndda ttththe echPaHnnnYeells afrrmeeqqpuuleinncgyr raeetsesppwonitshe \uD835\uDC3BaH1(mf\uD835\uDC53?)o::dified wireless\nadapter [Golden and Bateman 200R\uD835\uDC4571(]\uD835\uDC53.f)?T=oS\uD835\uDC46a1(v\uD835\uDC53fo)Hi\uD835\uDC3Bd1(fa\uD835\uDC53.m) .biguity, we restrict the concept o(f5)\nRSSI as the value reported from the MAC layer in this survey.\nNootete tthaatt thhe \uD835\uDC45R(1\uD835\uDC53fa)nadn Sd1\uD835\uDC46f?( \uD835\uDC53a)raer ethteh eFFouoruireire rttranssfforrm ooff the reecieevveedd ssigignnaall\uD835\uDC5Fr(1\uD835\uDC61t)?andd the trraannsmiitted\ns3ig.4n.aalDl \uD835\uDC60es(1r\uD835\uDC61itv)?i rnregesspCpeehccattinvivneleylly.R.InIenst hptiohsinsws eawayy,,E qEnqn..44 aanndd EEqn.. 55 ffoorrmms a bbeeautiffuull“ s\"ysymmmeetrtriicc\"”rreellaattiionnsshhiipp..\nInAsts hdeeemtmoimnosnetsrdtaroatmetedad iiinn, Ethqnen..4r4e acanendidv eEEqdqnns.i5.g,5nC,IaCRlI Rrc(atcn)a nibsebt ehdeedretirevimveedpd offrraolm ctothhneev odleucctoinnovnvoololuuftttiiroann ospmeerirtatteiodon\nosffi grencaelivvse(dt) aannd dtrcahnasnmintiettleedid mssipigunlaaslles,raaennsdpd CoCFnRFs Recachna (ntb)e:b terteraetaetde dasa sththe erraattiioo off the reeceivved and the\ntransmiittted spectrums.s. Coommpapraedre dwiwthi tmhulmtuipltliipclaictaitoino,n ,tthhee ccoonnvovloultuitoionn opoepreartaitoionn isis ggeenneerraallly\ntimmee--ccoonnssuumimngin. gT.hTehrefroerfoe,r ei, nin mmosots tcacsaessre,(s t,)tth=ee sd(eetvv)ii⊗ccee hf(otc)u.sseess on calculatinng tthhee CCFR,, aand thhe (C5CI)R\ncan Abceec ofurrdtihnegr ldyd,ertihvveedr fefrcroeommiv tehhde CsCiFgRn auslsiisngpg etchter uinnmverRs(e fFF)ouisriseirm ttrparlanynssftfohorrmem[m[114u4]]l:t: iplication of the\ntransmitted signal spectrum Sh( f ) and the channel frequency response H( f ) in the\nℎ1(\uD835\uDC61o)= 1\n=1F \uD835\uDD091+−1s{ \uD835\uDC461∗f(\uD835\uDC53o)R\uD835\uDC45f(e\uD835\uDC53g)}., ((6)\n\uD835\uDC43\uD835\uDC60\nACM Computing Surveys, Vol. 46, No. 2, Article 25, Publication date: November 2013.\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 55\nwhheerree F\uD835\uDD09 −11dedneontoetse stthhee inverse FFoouurriieerrt ratnrasnfosrfmor,m∗, isisth ethceo ncjoungjautgeaotpe eorapteorra,taonrd, \uD835\uDC43a\uD835\uDC60nadp?proximaattes\nthe traansmiitttted siggnal ppoweerr..\nAlltthoouugghh tthhee ddeerriivaattion of CCIRR aand CFRR iis innddependeenntt of thhee mmodduullaattion schemee,,itit coulld\nbee moorere ccoonnvveneineinetn tttoo impplleemmenetn t hthe epprroocceesss oonn ccoommmemrceiraclia ldedveivciecse swwitihth ssppeecciiffiic mmodduullaattion\nschemmese.s . Forr thhe wwireelleessss tsatnadnadradrdw whheerreet hteheo rotrhtohgoognonaallf refqreuqeunecnycyd idvisviosniomn omdoudlualtaiotnio(nO(OFFDDM))\nis aaddoopted((ee..g.,,802.1111a/gg/nn/aac/aaxx),,tthhee aammpllituude aannd phase samppleledd oonn eeaacchh ssuubbccaarrriieerr can be\ntreated aass aas asmamppleedd vveerrssioionn oofft htehes igsniganlaslp escptercutmrum\uD835\uDC46((1\uD835\uDC535)°. O.Onn ththisisb absaisi, sa,saa msapmlpeldedv evresrisoinonooff\uD835\uDC3B 1(5\uD835\uDC53°)\ncan bee easilyy ggeettf rformom ththeeO OFFDDM rreecceeiivveerrss..\nReecceennt taaddvvaanncecse siinn the wiirreless ccoommmmunuintiyt ymamkae kieti tpposossisbiblele to get tthhee ssaammpled versioonn ooffC CFFRR\nfrom ccoommmemrceiraclia-lo-fofff--tthhee--sshheellff((CCOOTST)S W)iW-Fi- FNiINCsIC. sT.hTeh exetxratrcatcetde dCFCRF Rarea reofotfetne nrerfeeferreedd ttoo ass a\nseries ooffc ocommplex numbebresr,s ,wwhihcihc hddepeipcitcsts tthee amplpiltituuddee aanndd pphahsaes eoof feeaacchh ssuubbccararriieerr::\n\uD835\uDC3B1(5\uD835\uDC53°\uD835\uDC57 ) ==jj| | \uD835\uDC3B15(9\uD835\uDC53°\uD835\uDC57 ) |j|j\uD835\uDC524∠\uD835\uDC3B15(°\uD835\uDC53\uD835\uDC57 )., (7)\nw{hhereere 1\uD835\uDC3B59(°\uD835\uDC53\uD835\uDC57 )isis a saammpplle aattt htehe\uD835\uDC57 \uD835\uDC61ℎ ssuubbccaarrrrier,,ww ithh\\∠ \uD835\uDC3B15(°\uD835\uDC53\uD835\uDC58 )dedneontoetse siitts pphase. Moossttrreesseeaarrch paperttreat tthhee CCFR at saampplleedd} aatt diffffeerreenntts usubbccaarrrieiresrsa sasth tehCe SCISdI adtat, aw, hwichhiccha cnanb ebwe rwirtitetnteans a\uD835\uDC6Fs N==\n\uD835\uDC3B1(5\uD835\uDC53\uD835\uDC57°) |j\uD835\uDC5792∈外[1?,N\uD835\uDC3D,],w\uD835\uDC57he∈rNe d, ewnhoetres\uD835\uDC3D tdheneo teosttahle tnoutamlbneur mobfe rsoufbscuabrcraireriresrs..\nThhee rraayy--ttrraacciingg mmodoedle lesetsatablbilisshheess tthee relatioonnship betweeeenn ggeeomoemtreitcri cprporpoepretirteise soof ftthhee ssignaall\nprroppaaggataitioonn ssppaacce eaannd dtthhee CCSIS Iddaatata..ThTehoeroetreitciaclallyly,,byb yanaanlaylzyiznign gththe emmulutiltpiaptaht hsisgignnala,l, varriouss types\noff geommetertircic iinnffoorrmmataitoino(ne.(ge.g,. ,tthhee pprroopapgaagtaitoino ndidsitsatnacnec,e ,tthhe erreeffllecttion pooiinttss)) can be deerriivedd..\nThheerreeffoorree,, the ray--tracing moodedle liiss widideleyly aaddopotpetde dini nwiwreirleelsess sloloccalailizzaattiion anndd ttrraacckkiinngg ttaasskkss..\nIn addiitioon,  mmanyy wwirireelleessss dettection and senssiingg sysstems saallssoo exttract ggeometertriicc features based\nonn thee ray-tracinng mmooddelesls,, and further pput tthheemm into mmaacchhiinnee llearrniingg mmodoedlesl sffoorr rreggrreessssiion orr\nclassiffiiccatioon..\nA ssiigniiffiiccaantddrraawwbabcakc kofo fthteh eraray-yt-rtraacciinngg mmodoedl eilsi stthhaatt it  isisb absaesdedo nona as imsipmplelee nevnviriornonmmenttall\nassummptpitoion.n .TThhereerfeofroer,ei, nin aa ccoommplpelxe xenevnivriornomnemnte nwhtewreh etrhee thsiegsniagln aulnduenrdgoeergs odeisfdfriffacrtaicotino noro risi sddiiss--\nturrbeedd bbyy vvaariroiousu sttyypepse sofonfonisoei,s ei,tit beeccoomems edsidffiffiiccuultl ttto accurraatteellyy reccoovveer raalll tthhe ssppatiaalli nifnofromrmatioon\nbyy onnllyy llimiitted CSSII daattaa..\n2.2 SSccaa ttereirinngg MModoedlel\nTThhee aabboovve-em-menetniotinoende drarya-yt-rtarcaicnign gmomdeold eclhcahraacratecrteirziezse sssiiggnnaallss wwiitthh mmulutltiippllee pprrooppaaggaattiioonn ppaatthhss,,\nwhhicichh mmaya ynonto tapaplpyl ytoto rriich--scatterinngg eennvirroonnmeenntsts.. To enablle wwiireleessss sesennssininggi ninm moorreec ocommplex\nscenaarriios, some ewworokrsk s[2[2,22,72]7 ]esetsatabblilish the sccaatttteerrinigngm moodel  foforrC CSSIIm meeaassuureemmeennttss wiitth Wi-i-FFii..\nTThhee CCSIS Iddaattaa rreeppoorrtteedd bbyy ccoommmmoodidtityy WWi-iF-Fi NIC can be modeled as:\n∑︁i NIC can be modeled as:\uD835\uDC41\n\uD835\uDC3Bs(\uD835\uDC53 ,.\uD835\uDC61) =e-\uD835\uDEFC\uD835\uDC5Bu(\uD835\uDC53 ,5\uD835\uDC61)\uD835\uDC52c−\uD835\uDC57\uD835\uDF19s\uD835\uDC5B (\uD835\uDC53 ,e\uD835\uDC61 ) , ((88))\n\uD835\uDC5B=1\nwwhehreer#e \uD835\uDC41is isthteh etotottaall nummbebre roof frrefflleeccttioionnp paaththss, ,\uD835\uDEFCU\uD835\uDC5B is tthheea mampliittuuddee aattetneunuaatitoinono fofppaatthh\uD835\uDC5B=, q\uD835\uDF19=\uD835\uDC5Bisis the\ncorresponddiingg phhaassee..\nAss sshoowwn nini nFFigig.3. ,3t,hteh essccaattteerriingg modoedle lttrreeaattss all the oobjectss inini nidnodoorre nenvvirioronnmmennttss as ssccaattteererresrs\nthaatt diffffuusee tthhee ssiiggnnalss totoa all ld irdeirceticotniosn.sT.h TeheC SCISIo bosbesrevrveedd bbyy tthhee rreecceeiivveerr isisa daddeedd uupp wwiith the\npoorrttiionnss ccoonntrtriibbuutetedd bby ytthhe essttaattiic (ffuurnnituure, waallls, eettcc.).)a nadndd ydynnaamiicc(a(arrmms,sl,elgesg, s,etect.c).)scsactateterreerrss..\nIntuiitivvelyy,,e aeacchh scscaattetreri sidse deememeedd aassa av ivritrutaulaTl xT.xS.uSucchh mmoddeelliingg caann bbee aapppplilieedd tto typiicall iinnddoorr\nsscceennaarriiooss,, wwhehreer etthhee rroooomms saraer eccrroowwdedde dwiwthi thfufrunrintiutruer,ea,nadn dsisginganlasl sccoouludld pprrooppagaagtaet eiinn aallmmosots taallll\nddiirreeccttiioonnss..OOn nththisi sbbaassiiss,, wwee ccaann ddiissmmisiss stthhee ssppeeccififiicc ssiiggnnaall pprrooppaaggaattiioonn ppaatthh aannd donolnyl ystsatatitissttiiccaallllyy\ninvesstigate tthhee rerelaltaitoinosnhsihpipb ebtewtweeenn ththeeo obbsseerrvveedd CCSI  aanndd tthhee mmoviing speeedd..\n6 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nStatici c\nSccaattterer\nDyynamiic \nSSccaattteerrerr\nTx\nNLOS\nNLOS\nRx\nFig. 3. Wi-i-FFi i signaalls inn rricihch-s-csacatttetreirnignge nevnivriornomnment\nWWe eddeceocmopmospeo stehet hoebsoebrsveerdv eCdSIC iSnItion tto∑︁heth peoprtoirotinosn csocnotnr∑︁itrbiubtuetde dbyb yinidnidviivdiudaula lscsactattteerreerrss::\n\uD835\uDC3B (5\uD835\uDC53·, \uD835\uDC61) ==∑。\uD835\uDC3B1\uD835\uDC5C5(\uD835\uDC53·, \uD835\uDC61) +C.∑1\uD835\uDC3B5\uD835\uDC5D·(\uD835\uDC53 , \uD835\uDC61e), ((99))\n\uD835\uDC5C∈Ω\uD835\uDC60 (\uD835\uDC61 ) \uD835\uDC5D∈Ω\uD835\uDC51 (\uD835\uDC61 )\nwhhereere sΩ'C\uD835\uDC60 (\uD835\uDC61a)nda nad1CΩ \uD835\uDC51ar(\uD835\uDC61e) tahre tsheetss eotsf osftsataitcic aanndd ddyynnamaimci cscscaattterers, \uD835\uDC3Bp1\uD835\uDC5D5(·\uD835\uDC53 ,C\uD835\uDC61i)si stthhee ppoorrttiion of\noobbsseerrvveedd CCSIS Iccoontnrtiribbuutetedd bbyy ?\uD835\uDC5Dt\uD835\uDC61hℎ ddyynnamaimc icscsactatteterreerr.. For eeaach ssccaattteerreer,r,ththeed idffifufsuesdedc ocmomppoonentts\nunnddeergrgo oaannonoynmyoumso pursoparogaptaigoant ipornocpersosceess saensd aenvdenetvueanltluya alldyd audpd autp tahtet hrecreicveeirv.e rT. rTyr ytot oaa tthrreeee--\ndiimenesnisoinoanl aclocoorodirndaitnea tweitwh itihtsi tosroigrigni nata t hteh e?t\uD835\uDC5Dh\uD835\uDC61 ℎscsactattetreerre raandn ditists zz--aaxxiiss align wiitthh tthee sscaatttterrerr'’s\nmmovoivnign gdidrireeccttiioonn,,tthhee rreepprreesseenn∫ttaattiioonn ooff \uD835\uDC3Bp\uD835\uDC5D15(·\uD835\uDC53 ,C\uD835\uDC61i)si sffuurrtthheerr ddeeccoommpopsoesde dasa sfofolllloowws s[[2277]]::2\uD835\uDF0B ∫ \uD835\uDF0B\n\uD835\uDC3B1\uD835\uDC5D (5\uD835\uDC53·, \uD835\uDC61)c=-厂\"J。”ℎp\uD835\uDC5DU(\uD835\uDEFC·, \uD835\uDEFDv,.\uD835\uDC535, \uD835\uDC61°) epxp'( −9\uD835\uDC57:\uD835\uDC585\uD835\uDC63\uD835\uDC5D,ccooss(S\uD835\uDEFCU)\uD835\uDC61C)ad\uD835\uDEFCuda\uD835\uDEFDv,. (10)\n0 0\nwhhereere:=\uD835\uDC582C=·2_\uD835\uDF0Ba/n\uD835\uDF06d a_nids \uD835\uDF06thise thsiegsniagln awlawvealveenlgetnhg,thE , i\uD835\uDC63s\uD835\uDC5D itshteh espsepeede dofo ftthee?\uD835\uDC5Dth\uD835\uDC61ℎ ddyynnaammici cssccaattterer,,\uD835\uDEFCU\naanndd V\uD835\uDEFDaraer etthhee aazziimmuuthth aannd deelleevvaattiioonn aanngglleess,,  eexxpp(1−9:\uD835\uDC57\uD835\uDC58F \uD835\uDC63c\uD835\uDC56 ocso1sU(C\uD835\uDEFC )r\uD835\uDC61e)prreepsreenstesn ttsheth pehpahsea ssehsihfitf tooff tthhee\nssiiggnnaall oonn ddiirreeccttioinon( \uD835\uDEFC'U,·\uD835\uDEFD)V..ℎp\uD835\uDC5D1(U\uD835\uDEFC·, \uD835\uDEFDV·, \uD835\uDC535,°\uD835\uDC61)Gitshteh epoprotritoion noof foobbsseerrvveedd CCSIS Iccoonntrtriibbuutteedd bbyy?t\uD835\uDC5Dh\uD835\uDC61 ℎssccaatttteerreerr\noonn ddiirreeccttiioonn ('\uD835\uDEFCU,·\uD835\uDEFD)9..IInnhheerriitteedd frformom ththeep phhyyssiiccaal lp rporpoepretrietsieosf EofM EwM awvaevses[ 8[],8ℎ],\uD835\uDC5Dp('\uD835\uDEFCU,·\uD835\uDEFD,V\uD835\uDC53·, \uD835\uDC615)9cCaann bbee\nvieewwed as aac icricruclaurllayr-lsy-msmymemterticriGca uGsasuisasniarann rdaonmdovma rviarbilea.bFloer. ∀F\uD835\uDC5Do,r\uD835\uDC5E 8∈?·Ω\uD835\uDC51@ adnadnd( \uD835\uDEFC'1U,·\uD835\uDEFD1V)?≠<1(U\uD835\uDEFC·2,V\uD835\uDEFD°2),,\nℎp\uD835\uDC5D'(u\uD835\uDEFC·1,V\uD835\uDEFDY1·, \uD835\uDC535,·\uD835\uDC61)Giissi nidndeeppeennddeenntt ooffℎ \uD835\uDC5Eq1(U\uD835\uDEFC·2,V\uD835\uDEFD·2, 5\uD835\uDC53·, \uD835\uDC61℃).\nBBaasseedd oon nEqEnq.n9. a9nadn EdqnE.q n1.0,1w0e, waree aarbelae btleo tdoerdievrei vtehteh setsattaitsisttiiccaall pprrooppeerrttyy bbyy aannaallyyzziinngg tthhee\nauttocorrrelatiioonn fufnuncctitoinon((AACCF) ooff\uD835\uDC3B 1(5\uD835\uDC53·, \uD835\uDC61C)[[88]]::\nda'5·∑Cgov,[\uD835\uDC3BC(c\uD835\uDC53 ,o\uD835\uDC61),y\uD835\uDC3B>(\uD835\uDC535, \uD835\uDC61-+ \uD835\uDF0F)5]\uD835\uDF0C\uD835\uDC3B (\uD835\uDC53 , \uD835\uDF0F) ≜ Cov[\uD835\uDC3B (\uD835\uDC53 , \uD835\uDC61), \uD835\uDC3B (\uD835\uDC53 , \uD835\uDC61)]\n2\n2\uD835\uDC5D∈2Ω ssmc(\uD835\uDC58\uD835\uDC63c\uD835\uDF0F)\n(11)\n\uD835\uDC51 \uD835\uDC5D\n= ∑\uD835\uDF0E (\uD835\uDC53 ) in\n2 ≈Esinc(\uD835\uDC58e (11)\n\uD835\uDC63\uD835\uDF0F),\n\uD835\uDC5D∈Ω \uD835\uDF0E\uD835\uDC5D (\uD835\uDC53 )\uD835\uDC51\nwwhehreer eCCovo》v[··, ·]asis tthhee ccoovvaarriiaannccee bbeettwweeeennttwwo oraranndodmo mvavriaarbialbelse,sf,2\uD835\uDF0E12\uD835\uDC5D5(°\uD835\uDC53 i)si stthhee vvaarriiaannccee ooffℎ p\uD835\uDC5D'(U\uD835\uDEFC·, \uD835\uDEFDV,·\uD835\uDC53 5, \uD835\uDC61°),,C\nssiinncc1(:Eg°=sismink(r\uD835\uDC58°\uD835\uDC63\uD835\uDF0F,)\uD835\uDC58\uD835\uDC63\uD835\uDF0F) = a, nadngd i\uD835\uDF0Fsi sththe ettiimmee llaagg..\uD835\uDC58\uD835\uDC63\uD835\uDF0F\nFFoorr somme ehhumuamn aanctaicvtivtiteiess llike faallla nadndw waallkkiningg,,wwe can assumee tthhaatt the dynaammici cssccaattterers\nare maaiinlly on thhe ttoorrssooa nandd hhaavvee sismimiilalrars psepeedesds\uD835\uDC63 . ET hTuhus,s,EEqqnn. 11 issa papprrooxximimateedd wwithh aa mmuch\nsimpplleerr foormm::d\uD835\uDF0CH\uD835\uDC3B15(·\uD835\uDC53 ,g\uD835\uDF0F )si≈ncs1in:Ecg(°\uD835\uDC58\uD835\uDC63.\uD835\uDF0FU)s.iUngsi ntghitsh ifsofromrumlautliaotino,nw,e wheavhea vqeuaqnutaintatittiavtievleyl yesetsatabblilisheedd the\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 7\nSpeed(m/s) 454 WWalaklkiing Faalll\n3\n2\n1\n0\n100000 20000 33000  440000 550000 660000\nTiime((mss))\n0  \nTime Lag(ms) 02品子品0品吕 Fiirst PPeakk-\n40 \n60 \n80 \n100\n10000 20000 33000  440000 550000 660000\nTimme(mss))\nFFiigg.. 44.. TThhee eessttiimmaatteedd ssppeeeedd aanndd tthhee AACCF Fofo fCCSIS Issiiggnnaallss\nrelatiioonnship bbetwweeeenn tthee huuaammn nspsepeede adnadn tdheth AeCAF CoFf oCfSIC SInI. Ipnrapcrtaictei,c et,hteh espsepede do \uD835\uDC63isis exttracted by\nmatacthcihnign gthteh efifirrsstt peakk off thhe sinnc(1\uD835\uDC65x?) fuunctioon and the ffiirrssttp epeaakk ooffA ACCF:\n\uD835\uDC650 \uD835\uDC650\uD835\uDF06\n\uD835\uDC63°= = , (12)\n\uD835\uDC58=\uD835\uDF0F0ko2=\uD835\uDF0B\uD835\uDF0F20\nwwhehreer exo\uD835\uDC65 0isis tthhee ccoonnssttaannt tvvaalluuee rreepprreesseentnitning gththe ellooccaatitioonn oof ftthhee ffiirrssttp peeaakk ooff ssinincc(1\uD835\uDC65x)?ffuunnccttiioonn,,T\uD835\uDF0Fo0 iiss\nthe timmee lag correspoonnddining gtoto tthhee ffiirst  ppeeaak of tthhee AACFF..\nAss aa straigghhtfoorrwwaarrdd exaammplpel,ew,ew leelte ta avvooluluntnetere rttoo wwalaklk aannd dffaalll inn aah heeaavviilylyf ufrunrinsihsehdedr oroomm\nandd eexxttrraacctt thhe ssppeed wiith thhe CCSI ccoollleecctteeddf rformom aaW W i-Fi  lilniknkl olcoactaetdedin iann aontohtehrero roomom..AAs iisss hsohowwn\nin Figg. 4,  eevveenn wwithh nnon-linnee-oof--ssigighhtt(NNLooSS)) occcllusionss andd mulutltiippaatthh ppoollluttion, tthhee wwalkinng ssppeed\nandd ffall  ssppeeeedd aarree eesstitmimaatteedd ccoonnsisstteennttlyly, ,ddeemmoonnssttrraattiinggititss robuussttnneesss tto envviironnmmenetnatla ldidviveresristityy..\nTThhe essccaattteerriingg modoedle lisis geenneerraallly appplliicablle too vvaarriioouus  ssppeeeed-orieennted sseensinng Thee scatterinng\nmmodoedle lgegneenrearlallyl yaapplpileiess tto varriiouss speeedd--oorriienntteedd sseennssiinngg ttasskss suchh ass inntrruusioon ddeteectiioonn aannd\nfall  ddeetteeccttioinon..AAs a ssttaattisitsitciaclaml omdodeel,li,tith ahsasu nuinqiuqeuea davdvaanntaagges iinn ccoommppllexx scenaarriioss..\nHHowoewvevr,etr,hteh escsactatteterriinngg mmodoedle lffaaiils  totoconstruuct  aac ocrorersepsopnonddeennccee bbeettwween CSI aannd ggeomeettrriic\npaarraammetetresr sdidriercetcltyly, , anndd tthhuus siiss geenneerarlallyy nnoot taapppliliccaabblele ttoo prreecciissee locallizatioon and trackiingg ttaskss..\n3 CCSSII DATA CCOOLLECTIOON\nCSSII ddaattaa ccoolllection is  tthhee fifrisrtsts testpepto twoawardrdt htheei mimppleemmeennttaattiionn ooff a prraaccttical wwiireless  sseennsinng\nsysstem.. Thhiiss sectioonn iinnttrorodduuccees  oonne ooffthhe mmoosstt faamoouus sWWi-iF-iF isseennssiinngg ddaattaasseettss,,tthee Widiadra3r 3ddataataseset,t,\nso that beginneerrss cann qquuiicckkllyy ggeett sstart wwiith wiirreless seensinng wiitth mininimimala lefefffoorrtt.. Thiis sectioon\nallso inntrrooducceess threee off thhe mmoosstt famouosu sCSCIS cIoclollelcetcitoionn ttoolosls tthaatt researrcchheerrss ccaann uussee ttoo try outt\ncollleectiinngg CCSSI  ddaattaaw wiiththC COOTSS NIICCss..\n3.11 WWidiadra3r 3DDataatasseett\nOppene ndadtaatsaestests aarree essential  totop rporvovidiedec ocmompprehenssive knowwleleddgeg effoorr mmodoedle lttrraaiinniingg aanndd aa unniiffiied\nbbeenncchhmamrakr kfofro rmmodoedle cl ocmopmarpiasroisno.nOp. eOnp deantdasaetatsse tasrea reeveevne nmomreo rneenceescseasrsya ryini nththe ewwirierelleessss sseennssiinngg\nffiieelldd bbeeccaauussee RRFF ssigignnaallssa raerem moorrees esnenssitiitvieveto tdoe vdeicveisceasn dandde pdleopylmoyemnentte nevnviriornonmments.  HHoweevveer,r,\nthe absennccee ooff high--quuaalliity and large-scale ddaataasseetss hhaassb beeccoommee the botttleeneck that hhinndered the\npprrooggreress sooffwiwreirleelsess ssseennsisning gtetecchnhonloolgoyg.y E. xEixsitsitning gwiwrierleelses ssseennsisning gddataatsaestests ssuufffferr frroom smalall scales\nandd llimiited scenaarriios inn 2200119 wwheenn wwe estsatarrtteedd tto buiild tthhe WWiiddaarr33 daattaasseett.WWidiadra3r23 2isis aa wirireellessss\n22hhttttpp::////ttnnss.t.htshss..ttssiningghhuuaa..eedduu..ccnn//wwiiddaarr33..00\nTime Lag(ms)\nSpeed(m/s)\n8 Zheng Yang, Yi  ZZhhaanngg,,GGuoxuan Chi, and GGuiddoonng ZZhhanng\nsenssiing dattaset ffoorrh huummaann accttivittyy rreeccooggnnittioionn..IItti sicso lcloelcltecdtferdo mfrocmo mcommmooddiitytyW Wi--FFiiNIICss in thhe\nform oof fRRSSIS Iaannd dCSCIS.I .IItt connssiists of 22558,00000 iinnssttaannces oof  hhaand gesturress wiitth a duurraattiionn ooff 8,620\nmininuutetess aanndd ffrom 7755 ddoommaianisn.sW.iWdarid3a ri3s isos ofafra rtthhee llargest aannd mmoosstt compprerehhenesnisvive eddaatatasseett in\nthis fifeieldlda nanddr erceeceivievessw wiiddeessppreead attteenntiioonn ffrroomm researcheerrss all  oovveerr ththeew worldd.  WWiidarr33 daattasseett\niiss ppuubblliiccllyy aavvaaiillaabbllee aattI EIEEEEE DDaattaaPPoorrtt((oofffificciiaalld daattaar erpepoossiitotorryy))a nanddc coonnttiinnuueess eevvoollvviinngg ttoo ccoonnttaaiinn\nmoroer etytpyepse sofo facatcitviivtiitieess..\n3.22 PPiiccooSScceenneess Platffoorrmm\nPPiiccooSScceenense s[1[12]2 ]iiss a versatilleea nandd ppoowweerrffull miiddddlleewwaraer efofor rCCSIS-Ib-basaesde dWiW-Fii- Fsiesnesnisnign grerseesaeracrhc.h I. tI tiis\nonnee ooff the very few ttooollss that suppoorrtt the laateestt 880022..111aacc//aaxx pprrootoocols. I tItsu spuppoporrtstsm maanny prevallentt\ncommmerecricaiall NIICss,,iincludinng QQualcoommm AAththereoross AARR939030(0Q(CQAC93A0903)0,0I)n,tIenlt eWl iWreirlelses sLLiinkk 5300\n(IWWLL553030)0,),IInntteell AXX2200 0aannd dIInntteell AAX221100..PiPcicooScSecneense sssuuppoprotrst suupp ttoo 27 NIICss to wworrk conccuurrrrenttly\nfor ppacket iinnjejecctitoinona nadndC CSSIIm meeaassuureemmeenntt..\nPPiiccooSScecneense issi saracrhcihtietcetcutruarlallyl yvevresrastaitliele aannd dflfleexxiibbllee.. It  eenncapssuullaatteess alll tthhee llooww -levell feeatures innto\nuunniiffiieedd aanndd hhaarrddwwaarree--iinnddeeppeenndednetn tAAPIPsI saandn dexepxopsoesse sththeme mtot oththe euupppepre-rl-elevveell pplluuggiinn llaayyeerr..AAss aa\nrressullt,  uusseerrssc acnanq uquicikcklylyp rportoottoytpypeet htehierior wonwnm meeasuremeennt tpplluuggiinnss..\nTThhee ddaattaa rreeppoorrtteedd bbyy PPiiccooSScceenneess ccaann bbee ppaarrsseedd iinn MMAATTLALBA aBs aas astsrturcutc,t , ccoonnttaaiinniinngg tthhee CCSSII ddaattaa\noff diffffeerreenntt ppaacckkets,,subccaarrrriiers,  aannd aantennaass.. Thhee ssttrucctt alssoo iinncclluuddes oothher hhelppfuul  ininfoforrmmation\nsucchh aass timmeessttampsp,s ,RRSSIS,I , anndd tthee signaall-to-noiise rraattiioo(SSNRR))..\nThhee hhoomempeagpea3g eo3f otfhtihsi sttoool lccaann bbee acccceesssseedd for moorree ddeettaaiiled innfoorrmmaattion..\n3.3 IInntteell 5300 NIIC CSSII Toooll\nTThhiiss CCSSII TTooooll [[77]] isisb ubiulitlutp oupnonth tehIen tIenltWel iFWiiFWi irWeilreeslseLssin Lki5nk3 05038000820.121.n11Mn IMMIMOO rraaddiiooss,,uussiinngg\na moodidfiifieedd ffiirmmwwaraer eanadn dthteh eopoepne-nso-suorcuer cLeinLuixn uwxirwelireeslse sdsridvreirv.e rI. tIt iincclluddeess alll  tthhee ssoofftwtwaaree aannd\nscrriptts requiirredd tto colllect,  rreeaadd,  aannd parse CSSII..\nThhee IIWL5L350300 0prporvoivdeidse s80820.21.1n1 nCSCIS oIfo f303 0ssuubcbacraririeerr grrouuppss.. Each grrouupp ccoonnttaaiinnss 2 adjacent\nsubccaarrrriers  ggiviveenn2 020M MHHz bandwwididtthh oorr 4 ggivveenn 4400 MMHzz baannddwwiditdht.h .EEaacchh CCSSI I samplpele iis aa ccoommplex\nnuummbebre,r ,wwitithh aa siggned 8-bittr erseosloultuitoinonfo rfobro tbhotrhe arleaanld ainmda igminagairnyaprya rtpsa.rOtsn.eOnCeS ICSreIc orercdoirsda i\uD835\uDC34s ×a 3300\nmatartriixx,,wwhehreer\"e i\uD835\uDC40s itshteh enunmubemrb oefr opfaiprasi rsofo fttrraannssmmitittiinngg aanndd rreecceeiiving antennnaass..\nThhee hhoomempaegpea?g eo4f otfhiths istotolo lccaann bbe eaaccecsesesde dffoorr ddeettaaiilled innformaattiionn..\n3.4 AAththereoros sCCSSII Toooll\nAtthheerrooss CSSII Tooooll[[2233]]isi saann ooppeenn-s-soouurcrec e880022..1111nn mmeaesausruermeemnte natnadn edxepxerpiemreimnteanttiaotni otnootol.o l.IItt enablles\nthe extraactiioonn ooffd edteatialeidlePd HPYHYw wiirerelelsesssc ocmommuniicatioon iinnffoorrmmatioon frroomm thhe AAtheros WiiFFii NIICss,,\nincluding thhee CChanneell Staatee InIfnofromrmaattioionn(CCSI),,thhe rreecceeivieveddp apacckkeettppaylooad, andd other innffoorrmmatioon\n(the tiimme stampp, , thee RSSSI Iooff eacchh aanntteennan,a ,tthhe eddataat arraattee,, etc.))..AAtherross--CCSIS-I-TToolo liiss buuiillt oon toop of\nath9kk,,aann ooppene-ns-osuorucrec eLLininuxu xkekrenrenle lddrriivveerr supppoorrttiingg Atthheerrooss 880022..11nn PCCI/I/PPCCI-I-EE cchhiippss..TThuhsu,s ,tthhiiss\ntooll thheoreticcaallylys uspuppoorttssa all tly ptyepseos foAf thAtehreorso8s 0820.12.11n1nW WiiFFiicchhippsetss..WWee hhaavve etteessttedd it  oonn AAtheros\nARR99558800,,AAR9R59509,0A,RA93R4943,4a4n,da nQdCAQ9C55A89.5F5u8r.tFhuertmhoerrem,Aotreh,eArotsh eCroSIs CTSoIolT oiosl iospoepne nsosuorucrec,ea, nadn daalll\nfunccttiionaallitieessa arerei mimpplleemmentted in softtwware wiithoouutt annyy mmodoidfificcaatitioonn ttoo the fifirrmmwaarree.. Thheerreeffoorree,,\noonnee ccaann eexxtteenndd tthhee ffuunnccttiioonnaalliittiieessooff AAtthheerrooss CCSSII TTooooll wwiitthh tthheeiirr oowwnn ccooddeess uunnddeerr tthhee GGPPL Llliicceennssee..\nAAththeeroros-s-CCSIS-IT-Toolo lwworokrsk soon nvvarairioouuss LLiinnuuxx ddiisstribbuutiioonnss,,ee..gg.,.U,Ubbuuntu,  OOpenWRTR,TLi, nLiinoin, oe,tect.c..\nDDififffeerreenntt LLiinnuuxx ddiissttrribiubutitoinonw woorrkkssw wiiththd diffifeerernentth ahradrwdwaarree..U Ubbuunnttuu wwoorrkkss ffoorr ppeerrssoonnaallc ocommppuutteerrss\nlliikkeellaappttooppssoorr ddeesskkttooppss..OOppeennWWRTR wTorwkosr kfsorfo ermebmedbdeeddd eddevdiecveisc essuscuhcahs aWsiWFii Frioruotuetresr.s. LLiinniinnoo wwoorrkkss\n33hhtttppss::////pss..zppjj..io\n?4hhttttppss::////ddhhaallppeerrii..ggiitthhuubb..iioo//lilniunuxx--8800221111nn--ccssiittooooll\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 99\nffoorrIIooTT ddeevviicceess,,ssuucchh aass AArrdduuinino oYYUNU.N T.hTe hoeffoifficicaiall wweebbsistitee pprroovviiddeess tthhee ssoouurrccee ccooddee ffoorr ththeeU Ubbuunnttuu\nvveerrssiioonn aanndd OOppeennWWRT RvTervseirosnio onfo tfhteh eAAthtehreorso sCCSIS Ittooooll..\nThhee hhoomempaegpea?g eo5f otfhiths istotolo lccaann bbe eaaccecsesesde dffoorr ddeettaaiilled innformaattiionn..\n4 CCSSII FFEEAATTUURRE  EEXXTTRRAACCTTIOIONN\nTThhe eCCSIS Ifefeatauturerse sllaayy tthhee ffuunnddataitoion nofo fwwirierleelesss ssseennsisning.gI.nI npapratritciuclualra,r,fofor rddififffeerreenntt sseennssiinngg ttaasskkss,,\nchoooossiinnggthteh emomsto satpapprpoproripartiaet efefaetauturerse sccaann eeffffectivvelyy imimprove thhe ssyysstteemm performaanncec.eI. nIn aadddititiionn,,\nthee quuaalliity of tthhee eexxtrraacctteedd ffeeaattuurreess ddeetteerrmmiineess the effffeectiivveenness oof  tthhee sseennssiinngg ssyysteemm..\nFFoorr eaasseeofo fiilluustrraattioionn,,c ocdodeei mimpplleemmenttattion used for ffeeaattuurreee exxtrtaracctitoinoni sipsr oprvoidviededb ebloelwo,ww,which\niiss aa mmaaiinn ffuunnccttiioonn ttoo ccaalllld diffifefreernetntf ufnucnctitoinoni nint htehef oflollolwowiningg ssuubbsseeccttiioonnss..\n%%{\ncCSI Feature Extraction ffor Wi-FFi sseennssiing..\n- Input:cscsii ddaattaa uusseedd ffoorr ccaalliibbrraattion,,anadn dcscis idadtaat athtahtat neneedd ttoo bbee ssaanniittiizzeedd..\n- Output:ssaanniittiizzeedd ccssii ddaattaa..\nTo use this  scriipptt,,yyoouu nneeeed to:\n1.MaMkaek esusruere thtehe cscsii ddaattaa hhaavvee bbeeenn ssaavveedd aass ..mmaatt ffiilleess..\n2. Check the .mat file to mmaake ssuurre tthheeyy aarree iinn tthhee ccoorrrreecctt ffoorrmm..\n3. Set the parameters.\nNNoote tthat in this algorithm ,tthhee ccssii ddaattaa sshhoouulldd bbee aa 44--DD tteennssoorr wwiith the size\nof [T S AA LL]]::\n--T Tinidnidciactaetse sthtehe nnuummbbeerr ooff ccssii ppaacckkeettss;;\n-S Sinidnidcicaatteess tthhee nnuummbbeerr ooff ssuubbccaarrrriers;\n--A Ainidnidciacatteess tthhee nnuummbbeerr ooff aantennas((ii..ee..,,thteh eSTSST Snunmubmebre rini naa MMIIMMOO ssyysstteemm));;\n-L Linidnidciacatteess tthhee nnuummbbeerr ooff HHTT--LLTTFFss iinn aa ssiinngglle PPPPDU;\nSay if  we  coolllleecctt aa 1010s esceocnodnsdsc scisid adtatast esatmeaamt a1t k1H zkHsza msplaemprlaet era(tTe(=T=1100*\n1000), ffrroom a 3-anteennnnaa AAPP(A== 33)),,witwhi t8h0820.21.11n1 nstsatnadnadarrdd(S( S= =575 7susbubccaarrrriieer)\n,wwiitthhoouutt aany extra  spaattiiaall ssoouundnidnigng((LL==1)1,)t,heth edadtat asisziez eshsohuoulldd bbee [[1100000\n57 3 11]]..\n%%}}\nclear aallll;;\naddpath((ggeennppaatthh((ppwwdd))));;\np%0%.0 .SeSte tpapraarmameetteerrss..\nP%atPhat hofo fthteh erarwa wCSCSII ddaattaa..\nsrc_file_name =''..//ddaattaa//ccssii__ssrrcc__tteesstt..mmaatt'';;\nS%peSpeede dofo flilgighhtt..\nglobal cc;;\nc= =phpyhsycsocnonsstt((''LLiigghhttSSppeeedd''));;\n�% aBnadndwwiiddtthh..\nglobal bbww;;\nbw = 2200ee66;;\nS%ubScubacrarrireire rfrferqequueennccyy..\nglobal ssuubbccaarrrriieerr__ffrreeqq;;\nsubcarrier_freq  =  liinnssppaaccee((55..88115533e9e,9,5.8347e99,,5577));;\nS%ubScubacrarrireire rwawvaveelleennggtth.\nglobal ssuubbccaarrrriieerr__llaammbbddaa;;\nsubcarrier_lammbbddaa ==cc./. /susbucbacrarriieerr__ffrreeqq;;\n�% nAtnetnennaa aarrraannggeemmeennt.\n?5htttps://w/wands.ssgg//rreesseeaarrchch/W/WiFi//AAthheroosCSI\n10 Zheenngg Yang, Yi ZZhhang, Guooxxuuaann Chhii, and Guidong ZZhang\nantennnnaa_l_olcoc= =[0[,0,00,,0; 00..00514666655,,0, 00;;0,0,0.0.50154146665 ,0]0]'';;\nS%etS ethet hleinlienaera r arnagneg eofo fthteh eCSCIS Iphpahsaes,e ,whwihcihc hvavrariieess wwiitthh NNIICC ttyyppeess..\nlinear_intervvaall ==((2200::3388)'';\np%1%.R1e.adRe atdhet hcesic sdiatda tfaorf orcaclailbirbartaitoino nanadn dsasnaintiitizzaattiioonn..\nL%oaLoda dthteh erarwa wCCSSII ddaatta.\ncsi_src== llooaadd((ssrrcc__ffiillee__nnaammee))..ccssii;; R%aRwa wCSCSII..\np%2%.P2.erPfeorfmo rvmarviaoruisou swiwrierleelsess ssesnesnisinngg ttaasskkss..\nT%esTte setxaemxpamlpel e1:1a:ngalneg/ldei/rdeicrteicotnio nesetsitmiamtaitoino nwiwtiht himipmeperrffeecctt CCSSII..\n[packet_nnuumm,,ssuubcarrier__nnuumm,,aanntenna_numm, ~~]]= =sisziez(ec(scsii__ssrrcc));;\naoa_mat  =  naiivvee__aaooaa((ccssii_s_rscr,c,anteennnnaa__lloocc,,zeros(3, 11))));;\naoa_ggtt == [[0;0;0;;11]];\nerror = mean(acos(aoaa__ggtt''** aaooaa__mmaatt))));;\ndisp(\"Angle  estimaattiioonn eerrrroorr::\"+ +nunmum22ssttrr((eerrroorr))));;\nT%esTte setxaexmapmlpel e2:2d:isdtiasntcanec e setsitmiamtaitoino nwiwitthh CCSSII..\ntof_mat = naive_tof(ccssii_src));;\nest_distt == mmeeaann((ttooff__mamtat* *c, ''aallll''));\ndisp(\"The ground  truth  distancee is: 1100 mm\"\"));;\ndisp(\"\"TThhee eessttimiamtaetdedd idsitsatnacencies :is\":\"++ nnuumm2s2tsrt(re(sets_td_idsits)t+)+\" mm\"\"));;\n4.1 TTimime eofo fFFllight\nPPaatthh  1\nRx\nChhaannneel l Immpullse RResponse\nLOsS\nPaatth  2\nTime\nTx\nFig. 5. Thee relaatiioonnsshhipp bbeettwween ToF andd CIIRR..\nTooFFisi stthhee ttimee dduurartaitoion ntthhe essiiggnnaal l prrooppagaagtaetse sfrfroom mthteh etrtarnasnmsimttiettre rtot otthhe erreecceeiivveer raallonngg aa sspeecciiffiic\npaatth.. Giiven the freequenccyy 5\uD835\uDC53,, the phasse shiftti nitnrtordoduucceedd bbyy tthhee TTooFFg\uD835\uDF0Fisis::\nq\uD835\uDF19ToFF== −2\uD835\uDF0Bc\uD835\uDC535\uD835\uDF0Fg (13)\nAss the supeerriimpposoistitiioonn ooff muultltiipaatth signalls, CSS∑︁II can be reepresented based on the rraayy-trraacciinngg mmodeell:\uD835\uDC41\n\uD835\uDC3B-(\uD835\uDC53 ) =4\uD835\uDEFC\uD835\uDC5B\uD835\uDC525−\uD835\uDC572\uD835\uDF0B \uD835\uDC53 \uD835\uDF0F\uD835\uDC5B ((1144))\n\uD835\uDC5B=1\nwwhehreer#e \uD835\uDC41is isthteh ettoottaall nummbebre rooff mulutltiippaatthh,, and \uD835\uDEFCU\uD835\uDC5B aanndd g\uD835\uDF0F \uD835\uDC5Baraer etthhee ccoommplpelxe xaattteennuuaatitioonn ffactor aannd\ntimmee off flfligihghtt((TTooF) for thhe=\uD835\uDC5BC\uD835\uDC61 ℎpaptaht,hr,ersepsepcteicvtievleyl.yT.hTeohreeotriectailclayl,ly ,tthhe eTTooF Foof faalll ppathhs ccaannbbee identtiiffiieedd\niin CIIR,, whhiicchh ccaann bbee ccaallccuullated by apppllyiingg the inverse Fourier ttrraannssffoorrmm too CCSI ssaammpplles of\nall  ssuubbccarriieerrss. .H Hoowweverr, ssince the trraannsmiittter aannd thhe rreecceeivveerr lalcakcks ysynncchhrroonizatiioonn, n noonn-zzeeroo\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 111\ntempoproarla lsshhififttss exiist iinn CCIRR,  aanndd tthhee aabbssooluutee TTooF iss tytyppiiccaallylyn onotta caccucuraratetee nenoouuggh. TThe liimmiteed\nbaannddwwiditdht halasloso ccoonsntsrtaraininss tthee timmee resolutioon,  ccaauusiinngg mmetter-leevvel  TTooFF aammbiiguuiity Thee relatioonnship\nbeettweene nsisiggnnala lpprrooppaagagtaitoionn ppatahth, ,TTooFF,, andd CIIRR iis shhownn iinn FFiiguurree 5.\nTThhe efofolllloowwinign gfufnucntcitoino nnaniaviev_et_otfo finintetnednsd stot oexetxrtarcatc ttthhee TTooF Fofo ftthhee ssttrroonnggesets tppaathth ((ttyyppiiccaallllyy tthhee\nshoorrtteesstt path)) based on inverrse Fouurriierr traansform..\nfunction  [tof_mat] == nnaaiivvee__ttooff((ccssii__ddaata)\nn%aniaviev_et_tooff\nI%nIpnuptut::\n?%csi-_dcastia_ daitsa tihset hceSIC SuIsuesde dfofror rraannging;;[[T S AA EE]\n?%iff-t_ipfofitn_tp oaindt banwd abrwe atrhee tIheFFITF FaTnda nbdanbdawndiwditdht hpapraarmaemetteerrss;;\nO%uOtuptuputt::\n?%tof-_mtaotf _imsa ttihse trhoeugrho utghimtei-moef--ofl-iflgihgth tesetsitmiamattiioonn rresult; [[TT AA]\nglobal  cc,,bbww;;\n[pakcet__nnuumm,,ssuubcarrier_nnuumm,,aanntteenna_num ,eexxttrraa__nnuumm]]= =siszieze((ccssii__ddaattaa));;\nifft_point = power(2, cceeiill((lloogg22((ssuubbccaarrriieerr__nnuumm))))));;\nG%etG eCtIRC IRfrformo meaecahc hpapcakcekte tanadn deaecahc hanatnetennnaa bbyy iiffftt((CCFFRR));;\ncir_sequenccee == zzeerrooss((ppaacckkeet_tn_unmu,m,antennnnaa__nnuumm,,eextra_num ,iiffftt__ppooiinntt));;\nfor p = 1: packet_num\nffor a = 1: antenna_num\nffor e== 11::eexxttrraa__nnuum\ncir_seeqquueencnec(ep(,p,aa,,e, ::))= =ififftt((ccsi_dattaa((pp,,:, aa,,e)e,)i,fifftf_tp_opioinntt));;\nend\nend\nend\ncir_sequenccee == ssqquueeezez(em(emaena(nc(icri_rs_esqeuqenuceen,ce4,)4););%[T[ Tififtf_t_ppooiinntt AA]]\nhalf_point  =  ifft_pooiinntt //22;;\nhalf_seeqquueennccee == cicri_rs_esqeuqeunecnec(:e,(:1,:1h:ahlafl_fp_opinoti,nt:,):;);%[T[ Thahlafl_f_ppooiinntt AA]]\npeak_inddiicceess ==z ezreorso(sp(apcakectk_entu_mn,uma,natenntnean_nnau_mn)u;m%);[?T AA]]\nfor  pp==1:1p:apakkcceett__num\nffor a = 1: antenna_num\n[~, ppeeaakk__iindices(pp,,aa)]= =mmaaxx((hhaallf_sequeennccee,, [],22));;\nend\nend\n�% aCallccuullaattee TTooFF;;\ntof_mat  == ppeeaakk__iinnddiicecses. *.*s usbucbacrarrireire_rn_umnu.m/ .(/i(fifftf_tp_opionitnt. *.*bw )b;w)%;[[TT AA]]\nend\n44..22 AnAgnlgel eofo fAArrrriivvaall aanndd AAnnggllee ooff DDeeppaarrttuurree\nWhehne na aNINCI Ceqeuqiupeips ewsiwthi thmumltuilptlipe leanatnetnennans,aas , laolcoacla lccoorodridniantaet eaatt the device ccaann bbe ccrreeaatteedd..AAs\nshoowwn nini nFFigiguurer e66,,fofor raa transsmmititteerr, tthhee aanngglee ooffd edeppaarrttuurree(AAoDD)φ) \uD835\uDF11rerperperseesnetns tsthteh edidrireeccttiioonn iin the\nlocall coorrdiinaattee aallonngg wwhihcihc hthteh etrtarnasnmsimttietdt esdigsnigaln ails isemeimttiettde.d F.oFro ra arerceecievievre,r ,tthhee aannglgele oof faarrrriivaall\n(AooAA)θ) \uD835\uDF03 rreepprreesesentnst stthhee ddiirreeccttiionn iin the loocal ccooordinate aloong whhicich hththe erreecceeiviveed dsisiggnnala liiss captturreedd..\nSiinccee the antennnaass aarree spaattiallyy sseeppaarraatteedd, n noonn-zzeeroo pphase shifttssb beetwtweeen antennnaass aarree introducceedd..\nThhee pphhaassee sshhiifts ddeeppend on thhe AAoA//AAoDo.DS.peScpiefciicfiaclallyly,,ssuuppopsoes eththe erreellaattive llooccaattioionnb beetwtweeen ttwwo\nanttennnaass is \uD835\uDEABI\uD835\uDC8D=1=G~(°Δ\uD835\uDC65a,nΔd \uD835\uDC66t)haen udntihte duinrietcdiitroenc ivtoenctvoerc toofr AoofAA iosA eis=1\uD835\uDC86co=sθ(\uD835\uDC50,\uD835\uDC5Cs\uD835\uDC60\uD835\uDF03in,θsin°\uD835\uDF03,)t,hteh epphahsaes esshhiifft\nbeettweeen ntthhee ttwoo aanntetennansa siiss::\nd =22\uD835\uDF0B\uD835\uDF19AoA = \uD835\uDEAB1\uD835\uDC8D ·e\uD835\uDC86 ((15))\n\uD835\uDF06\n12 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n心 θ\nφ Y2 Yz\nY1\nRxx  antennas\nTx  anteennnas\nFFiigg.. 66..AAngnlgel eofo fAArrrriivvaall aanndd AAnnggllee ooff DDeeppaarrttuurree..\nThheenn CCSIS Iccaann bee moodedleeledd aass:: ∑︁\uD835\uDC41\n\uD835\uDC3B (\uD835\uDC58) \uD835\uDEFC\uD835\uDC5B\uD835\uDC52\n−\uD835\uDC57 2\uD835\uDF0B= \uD835\uDEAB\uD835\uDC8D ·\uD835\uDC86\n\uD835\uDF06 ((1166))\n\uD835\uDC5B=1\nwhhereere:r\uD835\uDC58eprreepsrenstesn ttshteh:eCa\uD835\uDC58n\uD835\uDC61ℎteannntae nanta tahte threcreeicveeivr.e r.TTheh esasamem emomdeold ealpapplpielise sttoo the AooDD aatt the\ntrasmiittter ssiiddee aanndd tthhee 33DD ssppace wwiith azimmuutthh aanndd eelleevvaattiionn aannggleless..\nIIn practiiccee, ,aalglogroirtihtmhmsss uscuhcha saCsCaappoonn[2] aannd MMUSSIICC[1[91]9 ]ccaann bbee ussed too eesstitmimaatetet hteheA oAAoA/A/AooDD\nof mmuullttiple ppaths f·frroomm the CSSII of tthhe aannteennaa array.MUSUISCI Cananlyasleys etshteh einicnicdiednetn tsisgignanlasl soonn mmulutiltpilpele aanntetennansa stot offiindd ouutt the AooAA ofo feeaacchh ssiiggnnaall..\nSpecififciacllayl, lsuy,pspuopsepo\uD835\uDC37sesi gsniaglnsa\uD835\uDC39l1,s· ·1· , \uD835\uDC39·\uD835\uDC37  ararrivreivfreo mfrdoimre cdtiornesct\uD835\uDF03i1,o·n·s·\\,1\uD835\uDF03·\uD835\uDC37 a\\t \uD835\uDC40at\">i \uD835\uDC37anatnetennnaass..\nTThhee rreecceeiived siggnnal at tthhee:\uD835\uDC58C\uD835\uDC61ℎ aanntteennnna aeelleemmenetn,td,edneontoetde dasa-s:\uD835\uDC4B,i\uD835\uDC58s, ias alilinneeaarr commbibninataitioonn ooff the \uD835\uDC37\ninciddent wwavefronts aannd nnoissee\uD835\uDC4A,:\uD835\uDC58:: \n \uD835\uDC4B1 \n \n \uD835\uDC4B2  [ ]  \n2  \n .  = \uD835\uDC82(  \uD835\uDC391\n\uD835\uDC39\n\uD835\uDF031) \uD835\uDC82(\uD835\uDF032) . . . \uD835\uDC82(\uD835\uDF03\uD835\uDC37 )  \n.  \uD835\uDC4A1 \n\uD835\uDC4A2\n+\n..   .\n\uD835\uDC39   \n .. \n\uD835\uDC4B \n\uD835\uDC40  a2⋯  \n \n \uD835\uDC37   \n .. \n\uD835\uDC4A \n\uD835\uDC40 \nor\n^\uD835\uDC7F== G\uD835\uDC68L\uD835\uDC6D,+]\uD835\uDC7E ((17))\nwhhereer ea1a\\(:\uD835\uDF03O\uD835\uDC58i)s isthteh earararya ystseteerirning gvvecetcotro rtthhaat tcchhaarraactceterriizzeess addddeed dpphahsaes(ere(lreatlaitviev etoto tthhee ffiirst  aannteennna))\nooff each receivviinngg ccoommponneenntt at thhee:\uD835\uDC58C\uD835\uDC61 ℎaanntetennan.aG. \uD835\uDC68isi stthhee mmatartirxix ooff steeeerr vveecctotorsr.sA.Ass shshoowwn inn\nFFiigguurree 66,,ffoorr aa llinineeaarra anntteennnnaa aarrrraayy wwiitthh eelleemmeennttss wweellll ssyynncchhrroonniizzeedd,, 1 \n − 2\n\uD835\uDEAB\uD835\uDC8D 1 ·\n \uD835\uDC52 \uD835\uDC57 \uD835\uDF0B ( ) \uD835\uDC86 \n\uD835\uDF06 \n\uD835\uDC82(\uD835\uDF03 ) =  2\n \uD835\uDC52−\uD835\uDC57\n\uD835\uDF0B\n\uD835\uDEAB\uD835\uDC8D (2) ·\uD835\uDC86 \n\uD835\uDF06 \n  (18)\n .\n ..\n\uD835\uDF0B\n\uD835\uDC52−\uD835\uDC57\n2\n\uD835\uDEAB\uD835\uDC8D (\uD835\uDC74−1) ·\uD835\uDC86\n\uD835\uDF06 \nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 13\nSSuuppppoossee,\uD835\uDC4A:~\uD835\uDC58#(∼Of\uD835\uDC412)(,0,a\uD835\uDF0End2) ,:ainsd a\uD835\uDC39 \uD835\uDC58wisdae-wsiednes-es enstseatsitaotniaornya rpyrporcoecsess swwitithh zero mmean vvalluuee,,ththee\uD835\uDC40\"××\"\uD835\uDC40\ncovvaarriiaannccee mmatartirxix ooff the received siggnal vveectoor  \uD835\uDC7FXiiss::\nS\uD835\uDC7A =x\uD835\uDC7Fx\uD835\uDC7FHH\n=A\uD835\uDC68F\uD835\uDC6DF\uD835\uDC6DHH\uD835\uDC68AHH+\uD835\uDC7Ew\uD835\uDC7EwHH ((19))\n=A\uD835\uDC68P\uD835\uDC77A\uD835\uDC68HH++f2\uD835\uDF0E2I\uD835\uDC70\nwwhehreer eP\uD835\uDC77isi stthhee ccoovvaarriianccee maattrriix of  trtarnansmsmisssioinonv evcetcotror\uD835\uDC6D .FT.Thheen noottaatitoinon((·)HH representssconjjuggaatte\ntranspose aannd(()·r)erperperseesnetnst seexxppeeccttaattiion..\nTThhee covariiaanncceem maatrtixri\uD835\uDC7AxhSa sh\uD835\uDC40as\"e igeeingveanlvuaelsu\uD835\uDF06e1s, _· ·1·⋯, \uD835\uDF06·\uD835\uDC40_asssoocciaitaetdewd itwhit\uD835\uDC40h\"e igeeingveencvteocrtso\uD835\uDC86r1,s\uD835\uDC86e21,e·z·⋯· ,e\uD835\uDC86u\uD835\uDC40..\nSorrted inn aan ononn--ddeesscceennddinngg oorrddeerr, ,ththees msmaallelsets\uD835\uDC40t\"-− e\uD835\uDC37igeeignveanlvuaelsu ecsocrorrersepsopnodn tdot othteh ennoiosisee whihlilee the\nrest  \uD835\uDC37cocrorrersepsopnodn dtot otthhee i\uD835\uDC37ncindceindte nstisginganlasl.s .IIn other wword, tthhee\uD835\uDC40\"--ddiimmenesnisoion nssppaacec eccaann bbee divided\niinto twwo orthhogonaall ssuubspace,  thtehen oniosiesesu sbusbpsapcaec\uD835\uDC6Ce \uD835\uDC41E#e xepxapnanddeedd bbyye iegiegnevnveecctotrosrs\uD835\uDC86 1e,1· · ·⋯, \uD835\uDC86·\uD835\uDC40e−\"\uD835\uDC37-,,aannd\ntthe siiggnnaalls usbusbpsapcaec\uD835\uDC6Ce \uD835\uDC46Ee(x peaxnpdanedebdy beyig enivgenctvoercst\uD835\uDC86o\uD835\uDC40rs− \uD835\uDC37e+\"1-,+·1·⋯· ,e\uD835\uDC86(\uD835\uDC40or(o erqeuqiuviavlaelennttlly \uD835\uDC37ararrarya ysstteeeerring\nvector \uD835\uDC82a(\uD835\uDF0311))⋯, · · ··, \uD835\uDC82a(\uD835\uDF03 \uD835\uDC37)))..\nToo sollve foor tthhee aarrarayys tsetereirnigngv evcetcotrosrs(t(htuhussA AooAA), MUSUISCI Cplpoltost sththe erreecciipprrooccaal l off squared distance\n&\uD835\uDC44(\\(\uD835\uDF03)f)ofro rpopionitnst saalloonng gtthhee\\ \uD835\uDF03cocnotnitniuneu etot oththe ennoiosisee ssuubbssppacaec eaas saa funccttion of\\\uD835\uDF03::\n\uD835\uDC44 ( 1\n&\uD835\uDF03)) == (20\n\uD835\uDC82aH (\uD835\uDF03 )\uD835\uDC6CE\uD835\uDC41 \uD835\uDC6CaH )\n\uD835\uDC82)(\uD835\uDF03 ) (20)\n\uD835\uDC41\nThhiiss yieldds ppeeaks iinn&\uD835\uDC44(()\uD835\uDF03at) attheth beebareianrgin ogfo ifnicnicdiednetn tssiiggnnalasls..IItt iss ssimimiilalrart otoa papplpylyM MUUSSICC alggooritthhmm\nfor AAoD sspeeccttrumm eessttiimaattiionn..\nTThhee ffoolllloowwiinngg ffuunncctitioonn nnaaiivvee__aaooaa iinntteennddss ttoo eessttimimaattee tthhee 33DD AAooAA bbaasseedd oonn tthhee pphhasaes eddififffeerreennccee,,\nwwhihcihc hisis simiillar ttoo EEqqn. 15.NNotoet etthhaatt thee folllooww ing algorithhm onnllyy connssiiddeerrss onee paatthh,, and thus\nccaannnnoto tbbe eaappplpileiedd ttoo mmutultilpipatahth ssiiggnnalasls..\nfunction [aoa_mat]  =  naiivvee__aaooaa((ccssii__ddaattaa,,antenna_locc, eesstt__rrccoo))\nn%aniaviev_ea_aooaa\nI%nIpnuptut::\n?%csi-_dcastia_ daitsa tihse tCheSIC SuIseuds edfofro ranagnlglee eessttimatioonn;;[T S AA EE]\n?%ante-nannat_elnonca _ilso cthise tahneteannntae nlnoacaltociaotni oanrraarnrgaenmgemnetn twiwtiht hthteh efifirrsstt aanntteennna\nas a referenccee;;[[33 AA]]\n?%st_-rceos ti_src othies etshetiemsattiemdat erdadriaod iochcahiani nofoffsseet;[A[A 11]]\nO%uOtuptuputt::\n?%aoa-_maota _imsat tihse tahneglaneg leesteismtiamtaitoino nreressuullt;[3[3 TT]]\nglobal subccaarrrriieerr__llaammbbddaa;;\n[[ppaacckkeett__nnuumm,, ssuubbccaarrrriieerr__nunmum,,aanntteennnnaa__nnuumm,,eexxttrraa__nnuumm]]= =sisizzee((ccssii__ddaattaa));;\ncsi_phasee == uunnwwrraapp((aannggllee((cscis_id_adtaat)a,),[[]],,22); ?% [ST SAAE]E]\nG%etG etheth eanatnetnennan avevcetcotro ranadnd iittss lleennggtthh..\nant_ddiifff ==a natnetnennan_lao_cl(o:c,(:2,:2en:de)nd-)-a natnentnean_nlao_cl(:o,c(1:),;1)%;?[3 AA--11]]\nant_difff__lleennggtthh == vevcenconromr(ma(natn_td_idffi)f;f)%;[[11 AA--11]\naant_diff_normmaalliizzee == aanntt__didfif f. /./a natn_td_idfiff_fl_elngetnhg;th%;[[33 AA--11]\n�% aClaclcuullaattee tthhee pphhaassee ddiiffffeerreence.\nphasee__ddiifff= =c scis_ip_hapshea(s:e,(:,:2,:2e:nedn,d,:):)-  ccssii__pphahsaes(e:(,:,::,,1, ::))- -peperrmmuutte(\nest_rrccoo(2(:2e:nedn,d:,):,),[[443 311 2]2)];);%? [TS SA-A1-1 EE]]\nphase_difff == uunnwwrraapp((pphhaases_ed_idfiff,f,[]],,22));;\nphase_diiffff == mmoodd((pphahsaes_ed_idfifff+ +p ip,i,22*  pi))-- ppi;\n�% rBoraodacdacsatstiinngg iiss ppeerr foorrmmeedd,,ggeett tthhee vvaalue of cos(theta)ffoorr eeaacchh ppaacckkeett aanndd\neach aanntteennna ppaaiirr..\ncos_mat  =  suubbccaarrrriieerr__llamabmdbada.*  phhaassee__ddiifff ..//(2  .*  pii..** ppeerrmute(\nant__ddiiff_fl_elnegnthg,th[,3[3112 ]2)])););%?[ TS SA-A-11 EE]]\ncos_matt__mmeeaann == ssquqeuezeez(em(emaena(nc(osc_omsa_tm,at[,2[24 ]4)]));)%;[[TT AA--11]\n14 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nS%ymSbyomlbiolci cnonolnilnienaera ropotpitmiimziaztaitoionn aarree ppeerrffoorrmmeedd..\nsyms x y\n�% oaao_as_oslol == [[xx;;yy;;((11--ssqqrt(x^2 + yy^^22))))]];;\naoa_init = [sqrt((1/3);;ssqqrrtt((11//33));;ssqqrrtt((11//33))]];;\naoa_mat_sol  = zeros(3, ppaacckkeett__nnuumm));;\noptions  =  optiimmooppttiioonnss((''llsqsnqonnolnilni'n,',''AAllggoorriithtmh'm,','leevveennbbeerrgg--mmaarrquqauradrtd't,','\nDisplay ',''nnoonnee''));;\nparfor p = 1: packet_num\ncur_nonlinear_funncc == @@((aaooaa__ssooll))aanntt__ddiifff_n_onromramlailziez'e'*  aoaa__ssooll --ccooss__mat_mean\n(p, ::))'';;\ncur_aoa_sooll == l1ssqqnnoonnlilni(nc(ucru_rn_onnolnilnienaera_rfu_nfcu,nca,oaao_ai_niinti,t,[[]],,[],ooppttiioonnss));;\naoa_matt__ssooll((::,, p)= =cucru_r_aaooaa__ssooll;;\nend\naoa_mat  =  aaooaa__mmaat_ts_oslol. /./v evcenconrmo(ramo(a_omaa_tm_asto_ls);ol%);[?3 TT]]\nend\n4.33 PPhhaassee ShiftftSSpectrruumm\nP1P1\nPP2\n40\nP2\nP3 Doppler FrequencyrHz 品品言 P3\n0\n-10\n-20\nLOS 30\n40 P1\n0 500 100015002000\nTx Rx Time/ms\nFFiig..77.. PPhhasaes esshhififtt spectrum ((orr Doopplpelerr ssppeeccttrruumm) )oof ftthrreeee diiffffeerreennt  mmovviingg paatthh..\nNoon-nz-ezreoro pphahsaes eshsihfiftt qΔ \uD835\uDF19acarcorsoss sdidfifffeerreenntt paacckkeettss is ccaauused by thhe rreellaatitvievem moovveemeenntt off the\ntranssmmititteerr,, rreecceivveer,,or oobjeectss inint htehep rporoppaaggatioonn ppath oftthee signaall.IIt eequalls tthhe cchhangiingg rraatte of\nthe path lleennggthh oofft htehes igsinganla. lW.Whhen mmuulltiplee ppaacckketssa arerer erceecievievdedinins esqeuqeuennccee,,tthhee CCSSI c ocorrersepspoonnddinng\nto tthhee8\uD835\uDC56\uD835\uDC61 ℎrerecceeiivveeddpapcakcekte tisis:: ∑︁\uD835\uDC41\n\uD835\uDC3B (田\uD835\uDC56) = =\uD835\uDEFCu\uD835\uDC5B (?\uD835\uDC56)\uD835\uDC528\uD835\uDC57\uD835\uDF19\uD835\uDC5B4(\uD835\uDC56) , (21)\n\uD835\uDC5B=1\nwhhereere q\uD835\uDF19=\uD835\uDC5Bisisthtehpehpahsea seofo ftthhee=C\uD835\uDC5B \uD835\uDC61pℎaptaht h[4[]4.]. Extract  thtehepphhaseeof tthheet htehe\uD835\uDC5B=\uD835\uDC61Cℎ pathh ininpacket  \uD835\uDC568aannd \uD835\uDC568+,1\nrreessppeeccttiivveellyy,,aannd dcaclaclcuulalatete tthhee pphhasaes eshsihfitft aass::\nΔq\uD835\uDF19=\uD835\uDC5B1(\uD835\uDC568)==q\uD835\uDF19=\uD835\uDC5B1(8\uD835\uDC56,+1°1) −q=\uD835\uDF191\uD835\uDC5B8(\uD835\uDC56”) . ((2222))\nIInttuiitivveellyy,,t htehep hpahsaesed idffiefrfenrecnecien diincdaitceasteths etdheis tdainscteancchea nchgaengoef tohfe t\uD835\uDC5Bh\uD835\uDC61eℎ=Cp aptahthb ebtewtweeenn ttwwo\nccoonnsseeccuutitvievpeac kpeatsc:kΔe\uD835\uDC51t\uD835\uDC5Bs(:\uD835\uDC56)3=1Δ8\uD835\uDF19=\uD835\uDC5B (-\uD835\uDC56)= 2 8\uD835\uDF06-.\uD835\uDF0B\nTTaakke eaa sstteepp ffuurrtthheerr,,aanndd aappppllyy tthhee sshhoorrtt--ttimimee FFoouurriieerrttrraannssffoorrmm ((SSTTFFTT)) wwiitthhiinn aa ssllididininggw wiinnddooww,,\nwee ccaann ggeett the spectrum aass shoowwn ninin FFiigguurree 77..TTheh efrfereqqueunecnyc yaxaixsi srreevveeaalsls the changgee rraatte of\nconnsseeccuutitivvee CCSSI Iddaattaa,,aannd diimmplpilciictitlly conttaaiinss the path leenngth cchhanggee rate.  FFiigguurree 77d deemmonssttrates\ntthhee pphhaassee sshhiifftt ssppeeccttrruumm(o(orr tthhee DDooppplpelre rSSppecetcrtruum)m )fofor rtthhrreeee ddiiffffeerreenntt mmoovviinngg ppaatthhss..\nTThhe effoolllowwinign gfufnucntcitoino nnaniaviev_es_tsfttf tccaalclcuulalatteess tthee shoorrtt--timee FFoouurireierr ttranssffoorrmm ofo faa sseerriies of CCSI\nddaattaa.. TThhee ggeenneerraatteedd ssppeeccttrruumm cacna nbeb eusuesde defefffeecctitivveellyy ffoorr mmaannyy wwirierleelessss sseennssiinngg ttaasskkss,,lliikkee ggeessttuurree\nrecooggnnititiioonn aannd dfafalll deetteccttion..\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 115\nLLiink #1\nNNoorrmaall DDFFS \nDDiirectioonn PrPorfoifile\nLLiink #3\nVVy\nVv3 u1 uu2\nuu3 u4 v2\nBBooddyy-- uus5 Vv1 u6\nCoooddririnate\nVVeelolocciity\nPPrrooifille VVAx\nULink #2\nFiig. 8.  Relatioonnshipp bbeettwween thhe BBVVP and Doopppplelerr spectrum..EEacahc hvveelloocciity ccoomppoonennetn tiinn BVVPPisi spprroojjeeccttedd ontto\ntthee noorrmmala lddirireeccttiionn off a llininkk,,aannd contribbutes ttoo ththeep poowwer oof  ththeec ocorrersepspoonnddinng rraaddiaallv evleolcoictiytyc ocmomppoonnent\nin tthhe DDopppller ssppectrruumm..\nfunction stft_mat = naive_spectrum(csi_ddaattaa,  sammppllee__rraattee,,vviissaabbllee))\nn%ainaviev_es_psepeccttrruum\nI%nIpnuputt::\n?%csi-_dcastia_ daitsa tihse tcheSIC SuIseuds edfofro rSTSFTFTT ssppeectrum  geenneerrataitoino;n;[[TTS SAALL]\n?%sam-plsea_mrpaltee_ rdaetetedremtienremsi ntehse thre sroelsuotliuotni onofo fthteh etitmieme-d-odommaaiinn aannd\n�% refqrueeqnucenyc-yd-odmoamaiinn;;\nO%uOtuptuputt::\n?%stf-t_smtaftt _imsat tihse tgheenegreanetreadt eSdTFST FTspsepcetcrturmu;m[;s[asmapmlpel_er_arattee//22 TT]]\n�% oCnojnujguagattee mmuullttiipplliiccaattiioon.\ncsi_dataa == mmeeaann((ccssii__dadtaata. *  coonnjj((ccssii__ddaatat)a,),[2  3344]]));;\n�% aClacluclualtaet ethtehe STSTFFTT aanndd vviissuuaalliizzaattiioonn..\nstft_mat = stft(csi_data , ssaammpple_rate));;\nV%isViusaulailziaztaitioonn(o(potpitoinonaall))..\nif visabllee\nstft(csi_data , ssaammppllee__rraattee));;\nend\nend\n4.4 BBodoyd-yc-ocoorodirdnaintea teVeVleolcoictiyt yPProrofifille\nTThhee lliimmiittaattioionno offt htehaef oarfeomreemnetniotinoendesdp sepcetrcutmrumis iths att,haetv,e netvheen stpheec tsrpuemctcrourmr ecsoprornedsipnogndtiontgh eto the\nsame eaaccttiivity ww illlb ebed idffie reernetntw hwheenn ththeeu usesrerm moovvees  aattd idffie reernetntlo lcoactiaotniosnosr orroiernietantiaotnisonrse larteilvaetive\nttoo tthhee WWii--FFiil ilniknsk.sT.o Troe sorelvseoltvheis tphriosb lpermo,bWleimd,a rW3i.d0a[r330.]0pq roprpoopsoesseas dao mdoaminai-inn-dienpdeenpednednetnsti gsniaglnal\nfeature BBVVP((bbooddy-yc-ocorodridninataete vveellocciity pprroofi lee))t otoc hcahrarcatcetriezreizheu mhuamnana caticvtiitiveist.ies.\nThhee basicci diedaeoa foBfV PBViPsissh oswhonwiniFni gF.i8g..A8.BAVBPVB\uD835\uDC7D qiusaqnutainzteizde dasa saa disccrreetetem maatrtirxiwx itwhitdhim deinmseinosnion\nas vveellooccitiytyc ocmopmopnoneenntstsd edceocmomppoosseedda laolnognge aecahcahx iasxoifs thoef btohdey bcoodoyr dcinooartedsi.nFaotresc.o nFvoern icenoncve,enience,\nwe eeessttabbllishh tthhee lolcoaclalb obdoydyc ocoorodridniantaetsews hwohsoeseo roirgingiins tihse tlhoec altoiocnatoifonth oefp etrhseo npearnsodnp aonsdit ipvoesitive\nx-axis aalligingnssw wiiththt hteheo roireinetantiaotnioonf othf etpher spoenrs. oTnh.e Tpher spoenrs’sonlo'sc altioocnatainodn oarnide notraiteionntasthionu ldshould\nbee proviided maannuaulallyly.. Cuurrrrennttly,  ititis iass sausmsuemdedt htahtath ethgel ogblaolblaolc altoicoantiaonnd aonrdie nortaietinotnatoifonth oef the\nppeerrssonn are aavvailalbablel.eT. hTehnenth ethken okwnonwng lgolboablallo claoticoantsioonfsw oifre lweisrsetlreasnss cterivanesrsceciavnerbse tcran sbfeo rtmreadnsformed\n16 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\ninto the loocal  bboody cooorrddiinnaatetes.s . Thhusu,sf,ofro rbebtettetre rccllaarriitty,aalll llooccaatiioonns aannd orientationss usedd in the\nfolloowiingg ddeerriivaattiion arre inn tthhee loloccaallb oboddyy ccoooorddinnates. Supppposoes etthhe ellooccaattiionnss ooff the trraannsmiittter aand\ntthe reecceeivievrero fotfh et\uD835\uDC56h\uD835\uDC61ℎe linCk lairnek® (\uD835\uDC56a)re= x(c\uD835\uDC56),y)(,\uD835\uDC56)\uD835\uDC59\uD835\uDC61 = (\uD835\uDC65\uD835\uDC61 , \uD835\uDC66\uD835\uDC61 Z)8, =((\uD835\uDC56x) A?,(yA(\uD835\uDC568)),r(\uD835\uDC56e)\uD835\uDC59®\uD835\uDC5F = \uD835\uDC65\uD835\uDC5F , \uD835\uDC66\uD835\uDC5F s),preecstpievcetilvye,ltyh, ethne nanayn yvevleolocciitty\ncommpopnoennetns tsi=\uD835\uDC63®(=UG,(\uD835\uDC630\uD835\uDC65~,)\uD835\uDC63a\uD835\uDC66r)ouanrdo utnhde thhuemahnu mboadny(bio.dey, (tih.ee. , othriegoirni)g iwni)lwl ilclocnotnritrbiubtuet eititss siggnnal  ppoowwer\ntto somee ffrequennccyy commpopnoennetn,dt,ednoetneodt eads afs?\uD835\uDC53(0(\uD835\uDC56)),(\uD835\uDC63i®n), tinhet hDeopDpolpepr lesrpescptercutmru omf otfhteh eiC\uD835\uDC56 \uD835\uDC61ℎlilnink k[[1155]]::\nf\uD835\uDC53 (?\uD835\uDC56) ( 0)=a(\uD835\uDC56)0G a(\uD835\uDC568)\uD835\uDC63®) = \uD835\uDC4E\uD835\uDC65 \uD835\uDC63\uD835\uDC65 + \uD835\uDC4E\uD835\uDC66 \uD835\uDC630\uD835\uDC66 . ((2233))\nag(a\uD835\uDC56)nda nad8 a(r\uD835\uDC56e)\uD835\uDC4E\uD835\uDC65 \uD835\uDC4E\uD835\uDC66  acroeefcioceiffienctiesn dtsetdeertmeirnmedin beyd lboycalotciaotniso nosf otfhteh etrtarnasnmsimttitetre raannd dththe erreecceeiiveerr::\n8(\uD835\uDC56=(\uD835\uDC56)\n(\uD835\uDC56) 1 )\n\uD835\uDC65\uD835\uDC61 \uD835\uDC65\uD835\uDC5F\n\uD835\uDC4E\uD835\uDC65 = ( ® +\n\uD835\uDF06 ∥ (\uD835\uDC56) ( ),\n\uD835\uDC59\uD835\uDC61 ∥ \uD835\uDC56)\n2 ∥\uD835\uDC59®\uD835\uDC5F ∥2\n-( ( )\n\uD835\uDC56) (\uD835\uDC56) (24)\n(\uD835\uDC56) 1 \uD835\uDC66\uD835\uDC61 \uD835\uDC66\uD835\uDC5F\n\uD835\uDC4E\uD835\uDC66 = ( ®( + ( ),\n\uD835\uDF06 ∥ \uD835\uDC56) \uD835\uDC56)\n\uD835\uDC59\uD835\uDC61 ∥2 ∥\uD835\uDC59®\uD835\uDC5F ∥2\nwwhehreer eλ\uD835\uDF06 iiss ththeew waavveelleennggtthh ooff WWii--FFii sisgingnaal.lA.Ass stsattaitcicco mcopmpoonneennttss wwiitthh zzeeroroD Doopppplleerr ssppeeccttrurumm\n((ee..gg..,,t htehel inlieneo fosfi gshigthsti gsniganlaslasn adndd odmomiinnaanntt rreefflleeccttiioonnss ffrroomm ssttaattiicc oobbjjeeccttss)) aarree fifilltetereredd oouutt bbeeffoorree\nthe Doopplpelre rssppecetcrturmu marea rceaclaculcluatlaetde,d ,onolnyl ysisginganlasl srereflfleeccttedd bbyy tthee ppeerrssoonn aarere rreettaaiineedd. . Beessiiddeess,,\nwhhene nththe epperesrosno nisis ccllossee to tthhe WWii--Fi llininkk,,o nonlylys isginganlaslsw iwtihtho noen-et-itmiemer erfleefcleticotniohna vhaevpeproromminentt\nmagangintiutduedse s[1[17]7.]. Thhuus,s,EqEnq.n2.32 h3ohlodsld svavlaildid ffoorr the gesture rreeccooggnitiioonn sscceennaarriioo..FFrroomm the ggeomeettrriic\nviiew,,EEqnq.n2.32 m3emanesa nthsath athtet h2e-D2 -vDelvoecliotcyi tvyecvteocrtōor \uD835\uDC63i®si spprorjoejectcetedd oon naa lline whhosoes edidrireeccttiioonn vveeccttoorr iis\nd\uD835\uDC85?(=\uD835\uDC56)(-a?,aG()\uD835\uDC56.) Su(p\uD835\uDC56p)= (−\uD835\uDC4E\uD835\uDC66 , \uD835\uDC4E\uD835\uDC65 )o.sSeu tphpeo speetrhseonpiesr son aisno enlalnipesleli pcsuercvue rvwehowseh ofsoecfioacriea rteheth tertarnasnmsimtitteterr andd the\nrreecceeiivveerr off tthhei\uD835\uDC56C\uD835\uDC61ℎ llink,,tthheenn d\uD835\uDC51? (\uD835\uDC56i)si siinndedede dthteh eavaevreargaeg edidriercetcitoion noof ftthee elllippssee aatttthheppeerrssoonn's’s lloccaattiion..\nFig. 8 sshhowss an examppllee whheerree the ppersoon ggeenneraatteesst htrhereeev evloecliotcyictoym cpoompnoenetnst\uD835\uDC63®s\uD835\uDC57 ,ō\uD835\uDC57 =gj1=,12,,233,,aand\npprroojjeeccttion of tthhe vveelloocciitytyc ocmomponneenntsts oonn tthee Doopplpelre rssppeectcrtruum mofo fththrere elliinkkss..\nSSiinnccee ccooeefffificcieiennttss (a\uD835\uDC56e)  and a?\uD835\uDC56)\uD835\uDC4E  only depend on the location ofthei\uD835\uDC61 ℎ\uD835\uDC65 and (\n\uD835\uDC4E\uD835\uDC66 only depend on the location of the \uD835\uDC56 lilinnkk,t, hthe erreellaattiioonn ooffpprroojjeeccttiioonn\noofftthhee BBVVP Pono nththeieC\uD835\uDC56 \uD835\uDC61lℎilnikn kisis ffiixxeedd..SSppeecciiffiic{caalllyl,ya,n aans saisgsnimgnemnetntm maatrtirxix\uD835\uDC68 (G\uD835\uDC56&) #2caann bbee ddeeffiinneedd::\uD835\uDC39×\uD835\uDC41 2 c\nA(=\uD835\uDC56) 1e1l\uD835\uDC53\uD835\uDC57 =e\uD835\uDC53\n(\uD835\uDC56)\nf(\uD835\uDC63®))\uD835\uDC34 \uD835\uDC58\n=\n\uD835\uDC57,\uD835\uDC58 0 else , (25)\nwhhereere f\uD835\uDC53gis h  j\uD835\uDC61Cℎ\uD835\uDC57 is the \uD835\uDC57  frreeqquuency saampplliing point iinnt hteheD oDopppplleerrs psepcetcrturmum,,aanndü\uD835\uDC63®\uD835\uDC58 is  vveeloloccitiytyc ocmomppoonnent\ncorresponddiingg to tthhee \uD835\uDC58k\uD835\uDC61ℎC eelleemment oof the vveecttoorriziezdedB BVVPP\\\uD835\uDC7D..TThuhsu,s ,tthhee relaattioionnb beetwtweeeenn DDoppller\nssppeeccttrruumm pprorofifillee ooff ththee\uD835\uDC56i\uD835\uDC61Cℎ lliinnkk aanndd tthhee BBVVPP ccaann bbee mmooddeeleledd aass::\nJ\uD835\uDC6B?(\uD835\uDC56)==c\uD835\uDC50?(\uD835\uDC56G)\uD835\uDC68?(\uD835\uDC56\\)\uD835\uDC7D ((26))\nwwhehreer ec?\uD835\uDC50 (i\uD835\uDC56)s itshteh escsaclailnign gfafcatcotro rddueu etot opprorpoapgagtiaotnio lnolsoss sofo fththe erereflfleecctteedd ssiignnaall..\nDDueu etoto tthhee ssppaarrssiittyy ooff BBVVPP,, ccoommpprreesssseedd sseennssiinngg [[66]] tteecchhnniiqquuee ccaann bbee aaddoopptteedd ttoo ffoorrmmuullaattee tthhee\nestimmaattiion off BVPP aass an l\uD835\uDC590o oopptiimmizat∑︁iioonn pproobleemm::eu\uD835\uDC40\nmin\uD835\uDC49 c|EMnD( \uD835\uDC68(\uD835\uDC56)H\uD835\uDC7D ,\uD835\uDC6Bo\uD835\uDC56 ) | +N\uD835\uDF02∥\uD835\uDC49e∥0, (27)\n\uD835\uDC56=1\nwwhehreer eM\uD835\uDC40 isi stthhee nnuumbmebr eorfo fWiW-Fii- Fliilninkks.s . Thhee ssppaarrssiitty of tthhee nnuumbbeerr ooff thhe vveloocittyyc ocommponneenntsts iis\nccooeerrcceedd bby ytthhe etteerrmm η\uD835\uDF02l∥l\uD835\uDC49Vl∥l0o,,whheerere η\uD835\uDF02 rreeppresents tthhe ssppaarsittyy ccooeeffiffciiceinetnstas nadnd∥|· ∥l0loisist htehen unmumber of\nnnoonn-z-zeerroo veellocityy ccoommpoonneenntsts..\nEEMMD(D,)(i·,s· )tihset hEearEtahr tMhoMveor'vse rD’sisDtiasntacen c[e1[81]8 ]bebtewteweene ntwtow doidsitsrtirbibuutitioonnss.. The seleeccttioinono fofE MEMDD\nratheerr thhan Euccllideann diistanccee iss mmainly ddue ttoo twtwo rreeaassoons. First,,tthhee qquuantizzatiioonn ooffB BVVP iinnttrroodduces\naapppprrooxximimataitoino nererrroorr,,ii..ee,., pprroojjeeccttioionno offvveelloocciitytyc ocmomppoonneennttss ttoo tthhee DDoopppplleerr ssppeeccttrruumm bbiinn mmiigghhtt bbee\nadjacentt too tthheet rtureueo nonee. .SSuucchh qquanttizatiioonn eerrroorrc acnanb beer erleielvievdedb ybyE MEMDD, whhicichh ttaakkeess thee distaannce\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 117\nbbeettweene nbbininss iinto considderaatiioonn..SSeecoond, there aree uunnknownn ssccaalling faaccttoorrssb beetwtweeeenn tthheeB BVVP aannd\nDoopplpelre rssppeecctrtruumm, ,mmakaikngin tghteh eEuEculicdliedaena ndidsitsatnacnec eininapaplpilciacbalbele..\n5 CCSISI SANIITIZZATIOON\nThhee wwirierelleesss senssiingg modoedlesl saannd dfefeaatutureres sddeessccrriibbeedd iin prreviiouuss sections are ccoonnsisstteennt  wwitthh ththeeE EMM\npprrooppaaggataitioonn tthheeoorryy aanndd ggeeoomemtertyr.y .HHowoewveerv,etrh,etyh edyond'otn ’ctocnosnidseidre rthteh evavrairoiouus sttyyppeess ooff nnooiissee ccaauusseedd\nby immppeerrffeecctt immppllemenetnattaitoionns sooff transceiver hhardwaarree[2[32,32,42]4.] .TThihsi ssseeccttion focuses on varioous\nCSSII errrorr sourrcess andd the corresponnddining geerrroorr ccaanncceelllaattion algorithhmss..\nFFoorr eeaassee ooff illluussttrraattioinon,,c ocdodeei mimppleemmeennttaattiioonn ffoorr saniitizatioon iissp prroovviiddeed, whhicihc hisis a main ffuunction\ntto calll ddifffefreerenntte rerororrc acnancceellaltaitoinonf ufnunccttioionnss aanndd tteessttt htheeirirp eprefrofromrmanccee..\n%%{\nCCSSII SSaanniittiizzaattiion AAllggoorriitthhm ffoorr WWi--FFii sseennssiinngg..\n-- IInput:cscis idadtataa uusseedd ffoorr ccaalliibbrraattiioon,,anadn dcscis idadtaat athtahta tneneedd ttoo bbee ssaanniittiizzeedd..\n- Output:ssaanniittiizzeedd ccssii ddaatta.\nTTo use this script , yyoouu nneeeedd ttoo::\n1.MMaakkee ssuurree tthhee ccssii ddaattaa hhaavvee bbeeenn ssaavveedd aass ..mmaatt ffiilleess..\n2. Check the .mat file to mmaake ssuurre tthheeyy aarree iinn tthhee ccoorrrreecctt ffoorrmm..\n3. Set the ppaarraammeetteerrs..\nNote that in this algorithm ,tthhee ccssii ddaattaa sshhoouulldd bbee aa 44--DD tteennssoorr wwiitthh tthhee ssiizze\nof [T  S AA LL]]::\n--T Tinidnidciactaetse sthtehe nnuummbbeerr ooff ccssii ppaacckkeettss;;\n-S Sinidnidciacatteess tthhee nnuummbbeerr ooff ssuubbccaarrrriieerrss;;\n-A Ainidndiiccaatteess tthhee nnuummbbeer of antennas ((ii..ee..,,thteh eSTSST Snunmubmebre rinin aa MMIIMMOO ssyysstteemm));;\n-L Linidnidciactateess ththee nnuummbbeerr ooff HHTT--LLTTFFss iinn aa ssiinnggllee PPPPDDUU;;\nSSay if we collectt aa 1100 sseeccoonnddss ccsisid adtaatas tsetaemama tat1 1k HkzHzs asmpalmeplrea treat(eT(T== 1100 *\n1000), ffrroom a 3-anteennnnaa AAPP(A == 33),witwiht h80820.21.1n1 nssttaannddaard(S(S ==575 7susbucbacrarriieerr))\n,wwiitthhoouutt oonnllyy oone spatial  strreeaamm((L= =1)1,)t,hteh edadtat asisziez eshsohuoludld bbee [[110000000 5577 3\n1]..\n%}\nclear all;;\naddpath(genpath(pwd));\np%0%. 0.SeSte tpapraarmaemetteerrss..\nP%aPtaht hofo fthteh ecaclailbirbraattiioonn ddaattaa;;\ncalib_file_name  =''..//ddaattaa//ccssii__ccaalliibb__tteesst..mmat';\nP%atPha tfhorf orstsotroirnign gthteh egegneenreartaetde dcaclailbirbartaitoionn tetemmppllaatteedd..\ncalib_template_name  = ''..//ddaattaa//ccaalliibb__tteemmppllaattee__tteesstt..mmaatt'';;\nP%atPhat hofo fthteh erarwa wCSCSII ddaattaa..\nsrc_file_name =''..//ddaattaa//ccssii__ssrrcc__tteesstt..mmaatt'';;\nP%atPha thfofro rstsotroirnign gthteh esasnaintiitzizeedd CCSSII ddaattaa..\ndst_file_name =''..//ddaattaa//ccssii__ddsstt__tteesstt..mmaatt'';;\nS%peSepede dofo flilgighhtt..\nglobal c;\nc= =phpyhsycsoconnsstt((''LLiigghhttSSppeeeedd''));;\n�% aBnadndwwiiddtthh..\nglobal bbww;;\nbw = 20ee66;;\n %SuSbucbcaarrriieerr ffrreequency.\nglobal subcarrier_freq;\nsubcarrier_freq  =  liinnssppaaccee((55..88115533e9e,9,5.8347e99,,5577));;\nS%ubScubacrarrireire rwawvaevleelennggtthh..\n18 ZZhheenngg YYaanngg,, YYii ZZhhaanngg,,GGuuooxxuuaann CChhii,, aanndd GGuuiiddoonngg ZZhhaanngg\nglobal subcarrier_lambda;;\nsubcarrier_lambda = c ./ subcarrier_freq;\n�% nAtnetnennaa aarrraannggeemmeenntt..\nantennnaa__lolcoc= =[ 0[,00,,0,00;;0.05511446656,5,00,, 0;00,,0.00.505114466665 ,00]]'';;\nS%etS ethet hleinleinaera r arnagneg eofo fthteh eCSCIS Iphpahsaes,e ,whwihcihc hvavraireises wiwitthh NNIICC ttyyppeess..\nlinear_intervvaall ==((2200::3388)'';\np%1%.R1e.aRde atdhet hcesic sdiatda tfaorfo rcaclailbirbartaitoino nanadn dsasnaniittiizzaattiioonn..\nL%oaLdoa dthteh ecaclailbirbartaitioonn ddaattaa..\ncsi_calibb== llooaadd((ccalib_file_namee))..ccssii;;�% SCIS Ifofror ccaalliibbrraattiioonn..\nL%oaLdoa dthteh erarwa wCSCISI ddaattaa..\ncsi_src == llooaadd((ssrrcc__ffiillee__nnaammee))..ccssii;; R%aRwa wCSCSII..\np%2%.C2h.oCohsoeo sdeifdfiefrfeenrte nftunfcutncitoinosn sacaccocrodridnign gtoto yyoouurr ttaasskk..\nU%sUes ecacsaseess::\nM%akMeak ecaclailbirbartaitoino ntetemmppllaattee..\ncsi_calib_templattee == sseett__tteemmppllaattee((ccssii__ccaallibib,,linear_intervvaall, ccaalliibb__tteemmppllaattee__nname)\n;\n�% iDriercetcltyl ylolaodad ththee ggeenneerraatteedd tteemmppllaattee..\ncsi_calib_template = llooad((ccaalliibb__tteemmppllaattee__nnaammee))..ccssii;;\nR%eRmeomvoev ethteh enonnolnilnineeaarr eerrroorr..\ncsi_remove_nonlinear  =  nonlinear_ccaalliibb((ccssii__ssrrcc,,ccssii__ccaalliibb__tteemmplate);\nR%emRoevmoev ethteh eSTSOT(Oa.(ka.ak .aSFS0F Oanadn dPBPDB)Db)y bycocnojnujguagtaet emumluiltiptlpliiccaattiioonn..\ncsi_remove_sto = sstto_calib_mul(ccssi_src);\nR%eRmeomvoev ethteh eSTSOT(Oa.(ak.ka. aSFS0F Oanadn dPBPDBD))byb ycocnojnujguagtaet edidivviissiioonn..\ncsi_remove_sto == ssttoo__ccaalliibb__ddiivv((ccssii__ssrrcc));;\n�% sEtsitmiamtaet ethtehe CFCFOO bbyy ffrreeqquueennccyy ttrraacckkiinngg..\nest_cfo = cfo_calib(csi_src);\n�% sEsttiimmaattee tthhee RRCCOO..\nest_rco = rrccoo__ccaalliibb((ccssii__ccaalliibb));;\np%3%.3 .SaSvaev ethteh esasnaintiitziezde ddadtataa aass nneeeddeedd..\ncsi = csi_remove_sto;;\nsave(dst_file_naammee, ''ccssii''));;\np%4%.P4.erPfeorfmo rvmarviaoruiso uswiwrierlelsess ssesnesnisningg ttaasskkss..\nT%esTte setxaemxpalmpel e1:1a:ngalneg/ldei/rdeicrteicotni oensteismtaitmiaotni ownitwhi tihmpiempre rffeecctt CCSSII..\n[packett__nnuumm,, subcarrierr__nnuumm,,aantenna_nuumm,,~~]]= =siszieze((ccssii__ssrrcc));;\nest_rco = rco_calib((ccssii__ccaalliibb));;\nzero_rco = zeros(antennnaa__nnuumm,,11));;\naoa_mat_error  =  naivvee__aaooaa((ccssii__ssrrcc,, antenna_loc ,zezerroo__rrccoo));;\naoa_mat  =  naivee__aaooaa((ccssii__ssrrcc,, antenna_loc ,eesstt__rrccoo));;\naoa_gt  == [[00;;0; 11]];;\nerror_1 = mean(accooss((aaooaa__ggtt''*aoaao_a_mmaatt__eerrroorr))));;\nerror_2 == mmeeaan(acos(aoa__ggtt'' *aoaao_a_mmaatt)));;\ndisp(\"Angle  esttiimmaattiioonn eerrroror(in  degg))wwiitthhout RCO removall::\"\"+ +nunmu2ms2tsrt(re(rerroorr__11))));;\ndisp(\"Angllee eessttiimmaattiioonn ererorror(inn ddeegg))wwith RCO removaall::\"\"+ +nunmu2ms2tsrtr((eerrroorr__22))));;\nT%esTte stexeaxmapmlpel e2:2i:ntirnutsriusoino ndedteetcetcitoino nwiwtithh CCSSII..\ncsi_sto_calib == ssttoo__ccaalliibb__ddiivv((ccssii__ssrrcc));;\nintrusion_flag_raw  =  naive_intrussiioonn((cssii__ssrrcc,,33));;\nintrusion_flag_sanitized  =  naive_inttrruussiioonn((ccssii__ssttoo__ccaalliibb,,33));;\ndisp(\" Inttrruussiioonn ddeetteeccttiioonn rreessuultlt wiwtihtohuotutS FSOF/0P/DPDDDr ermeomvoavla:l:\"\" + num2str(\nintrusion_flag_rraaww))));;\nddiisspp((\" I\"nItnrtusriuosniodent edcetitoenctreisounl trweistuhlStF Ow/iPDtDh rSeFmoOv/aPlD:D\" r+enmuomv2astlr:(\"+ num2str(\nintrusion_flag_sanitizedd))));;\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 119\n5.11 NNoonlnilinneeaarr Amplpilittudee and Phase\nThhee nnoonnlilinneeaarr aammplpiltituudde eaannd dpphahsaes eererororsrs aarree causseedd byy the immppeerrffeecctt analog domaianin ffiiltteerrimmpplle--\nmenetnattaitoion nininsisdidee tthhee hhaarrddwawrae.re S. pSepceicfificcaalllyy,, iittc acuausseesst htehee xetxrtarcatcetdedC CSSIIa mampliittuuddee aannd pphassee to be\neeqquuiivvaalleennttllyy pprroocceesssseedd bbyy aa nnoonnlliinneeaarr ffuunnccttiioonn.. LLeett\uD835\uDC53 5((·)-)aanndd \uD835\uDC546((·)) bbee tthhee nnoonnlliinneeaarr mmooddeess ooff CCSSII\naammplpiltituudde eaannd dpphahsaes,e ,rreessppeectcitivveellyy,,tthhee ∑︁eerrrroorroouuss CCSSI Iccaann bbee wwrirtittteenn aass::\uD835\uDC41\n\uD835̃\uDC3B1(\uD835\uDC568,-\uD835\uDC57,9\uD835\uDC58))==95(\uD835\uDC53L(\uD835\uDEFC) −\uD835\uDC57 ( \uD835\uDC5B \uD835\uDC56\n\uD835\uDC5B4)\uD835\uDC52-9\uD835\uDC546\uD835\uDF199-( 0, \uD835\uDC57,\uD835\uDC589)0) ++#\uD835\uDC41((\uD835\uDC568,-\uD835\uDC57,9\uD835\uDC58)9. (28)\n\uD835\uDC5B=1\nSSppeecciiffiiccaalllyl,yd,duurrininggt hteheO OFFDDMM mmodoudluatlaitoino nprporcoecsess,s ,eeaacchh ssuubbccaarrrriieerr ooff sshhoouulldd hhaavvee tthhees asmamee\ngaaiin.. Inn oothher wworrddss,, thhe aampplliituddee--ffrequueenncyc ychcahraarcatcetreirsitsitcic ooff CSSII shoouuldld bbee aa hoorriizzoonntatall straight\nlinne wwheenn aa coaaxxiiaall cable iissu suesdedt otoc ocnonneeccttt htehet rtarnasncsecievievrerp oprotrst. sH. oHwoweevveerr, ,a catcutaulaml emaesausureremments\nshooww thtahta teevevne nwiwthitohuto uttheth meumltuipltaitpha trhadriaod icohacnhnaenl,n etlh,etrhee ries istsitlill a simmiilar \"\"ffrreeqquuencyy sellective\nfading\"\" chaarraacctterristiicc,,ii.e..e,.t,h ethgea ignaionf oefa cehacfhr efqrueeqnuecnycyb abnadndi sisd idffiefrfeenrte,nsth, oswhoinwignga nanM M--sshhaapped\namplpiltituudde-ef-frreeqquuenecnyc ychcahrarcatcerteirsitsitcic ccuurrvvee.. Siimiillarrly,  wwheenn uussiingg aa cooaaxxiiaall cable too ccoonnnecctt thhe\ntransceiiver porrt,  tthhee CCSI  pphhase-frreeqquenccyy cchhaarraactceterriissttics oobtainned by the NIIC aarree nnoott aann iideeaall\nstraight liinnee wwithh ssllooppe, b buutta ann SS--sshhaapped curvee witithh cceerrttaaiin noonnlilinneeaarirtityy..\nAfftterr extensivve rreesseeaarrcchh aanndd eexxpperimmentts, we ehhaavev eoobsbesrevrevde dtwtwo ofafcatcsts..\n●• FFiirrsstt, for aaspeecciiffiic ttyyppe ooffN NIICC, the nnonllineaarr amplpilittuudde/ep/phahsaes ererrorro roof fCCSSI Iiis fifxixeedd..T Thhiissm meeaans\nthaatt thhe ccoorrrreeccttioinont atsakskc acnanb ebae caccocmomppllisihsehdedi fiwfweeu usseea akknnownn llenggtthh coaaxxiiaall ccaabblee ccoonnnnected\nto the trraannsceivver pport..Before performining gtthhee sseennsisinngg ttaasskk,, meeasausruer ea arreeppreresseentnattaitvivee sseett of\nCSSII amplpiltituuddee aannd dpphahsaes,e ,rreeccoorrdd tthhee nnoonnlilinneeaar rcchhaararactceterriissttics, andd ellimmiinaattee the nonnlliineaarriity\nin thhe suubsequueennt tssttepss..\n●• SSeeccoondn,d ,wwe eobosbesrevrev tehtaht athteh emimddilded lpearpta rotfo tfhteh esusbucbacrrairerrie risi sffrreee off nonnlliineeaarr eerrrrorrss,, aand the\nnoonnlilinneaera rcchharaarcatcetreirsitsiticcss off botth sides areaallssoo ffiixed..\nThheerreeffoorree,,tthheefufuncntcitoion nbbeleoloww ththe eccoodde eppeerrffoorrmms stthhee ffollloowiingg steps ttootacklee ththeeCSIInnoonnlilinneeaarriitty::\n(1) Reaadd iin a set ooff CCSSI  ddaattaa mmeassuurreedd uussiinng gaa ccooaaxixaila lccaabbllee..\n(22) GGete tiits aammpllituude and phaassee..\n((33))NNoromramliazleiz eitists aammplpiltiutuded eanadn drerceocrodr ditit aass tthhee aammpplliittuuddee tteemmpplalattee..\n(44) UUnwnrwapr atphet hpehapsheass,e st,hethn epnerpfeorrfmo ram lainleianre afritfi tttoo tthhee mmididldel epparatr tooff its  ssuubbcarrieerrss..SSubttract\nthee linnearr fifittr erseusultltt oto botbatianint htehen onnonllinineeaarr pphhase error tteemmppllaattee..\nFFiinaalllyy, thhe nnoonliinneeaarrampplliitude and nonllinear pphhase ccoommpoonneenntsts aarre saved iinn ththeef ofromrmof  \uD835\uDEFCU\uD835\uDC524\uD835\uDC579\uD835\uDF199,\nwwhihcihc hinindidciactaetse stthhee nnoonlnilnineaera rereroror rtteemmplpaltaet eofo faa ssppeecciiffiic tyype of NNIC..\nfunction [csi_calib_template]  =  set_temmppllaattee((ccssii__ccaalliibb,,lliinneeaarr__iinterval ,\ncalib_template_name)\ns%este_tt_etmemppllaate\nI%nIpnuptut::\n?%si_-caclsib_ cailsi bthies trheeferreefnercen ccesic siata tgigvievnen ddiissttance  aanndd aangnlgel;e;[[TTS SA LL]\n-%line-alri_nienatre_rivnatler viasl tihse tlhienleianre arranrgaen geofo fthteh ecscisi pphhaasse,,whwihcichh vvaarriies\nacross different types of NICs;\n?%cali-bc_atleimbp_ltaetmep_lnataem_en aimse tihse tshaevesadv epdatpha tohf otfheth egegnenreartaetde dtetmemppllaattee;;\nO%uOtuptuputt::\n?%csi-_ccaslii_bc_atleibm_ptleamtpel aitse itshet hgeengernaertaetde dtetmepmlpalattee ffoorr csi caliibbrraattioino;n;[[11 SSA\nLL]\n[packet__nnuumm,,ssuubbcarrier_nuumm, aanntteennna_num ,exexttrraa__nnuumm]]= =sisziez(ec(scis_i_ccaalliibb));;\ncsi_amp = abs(csi_calib); ?% [ST SA ALL]]\ncsi_phase  =  uunnwwrraapp((aannggllee((ccssi_ic_aclailbi)b,),[[]],,22));; [%T[ T SSAALL]]\ncsi_aammpp__ttemepmlpaltaete= m=e amne(acns(i_casmip_a.m/p me.a/n (mcesain_a(mcps,i_2a)m,p,1)2;),%1)[;1?S SA LL]]\nnonlinear_phase_error = zeros(ssiize((ccssii__ccaalliibb))));; ?% [ST AS ALL]]\n220 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nfor p == 11::ppaacckkeett__num\nffor a = 1: antenna_num\nfor e== 11::eexxttrraa__nnuum\nlinear_model = fit(linear_interval , ssqquueeeezze((ccssii__pphhaassee((pp,,\nlinear_iinntteerrvavla,l,a, ee))))'','p'opollyy11''));;\nnonlinneeaarr_p_hpahsaes_e_rerorr(opr,(p:,:a,,a,e )e)== cscis_ip_hpahsae(spe,(p:,,:,aa,,e) --\nlinear_model((1:ssuubbccaarrrriieerr__nnuumm))'';;\nend\neend\nend\ncsi_phassee__tteemmplpaltaete= =m emane(ano(nloinnleianr_epahra_speh_aesrreo_re,rr1o)r;,1%);[1[1S SAALL]]\ncsi__pphhaassee_t_etmepmlpaltaet(1e,(1l,ilnienaera_irn_tienrtvearlv,al:,::,):)==00;\ncsi_calliibb__tteemmplpaltaete= =c scis_ia_map_mtpe_mtpelmaptleat.e* .ex*pe(x1pi(1*i*ccssii__phpahsaes_et_etmepmlpaltea)t;e)%;[[11 SS\nA L]\ncsi== ccssii__ccaalliibb__tteemmppllaattee;;\nsavee((ccaallibi_bt_etmepmlaptlea_tnea_men,am'ec,s'ic's);i'%);[[11 SSA LL]]\neend\nAfftteerr geetttinng the nonnlliineeaarr errrorr tempplalattee,, the sanitizzaattioionn pprrooccess  bbeeginns.  FFoorr tthhee rraaww CSSII\nddaattaa ccssii__ddaattaa ccoolllleecctteedd iinn rreeaall ttimimee,, wwee ddiivviiddee iittb byy tthhee eerrrroorr tetemmppllaattee ccssii__ccaalliibb..T Thhiiss ooppeerraattiioonn\nis eeqquivvaleennt  ttoo“ d\"idviivdiidnigngt hteheo roigringianlaalm apmlpitluidtuedbe ybtyh ethne onromramalilziezdedn onnonlilnienaerara mamppllitiutdued”e\"aannd\n“ssuubbtrraaccttiinngg tthhee oorriiggiinnaallp phhaassee ffrroomm the nonnlliineeaarr pphhasaes”e”, so thatt thhe rreetuurned CSSI Iddaattaa ccssii__pproc\nhhaass ssaanniittiizzeedd aammpplliittuuddee aanndd pphhaassee..\nfunction [csi_remove_nonlliinneeaarr]]== nnoonnlliinnear_calib(csi_calib , ccssii__ccaalliibb__tteemmppllaattee))\nn%onolnilnienaera_r_ccaalliibb\nI%nIpnuptut::\n?%csi-_scrsci _isrsc tihse trheawr acwsic siwhwihcihc hneneeddss tto be  caalliibbrartaetde;d;[[TTS SAALL]\n?%csi-_ccaslii_bc_altiebm_ptleamtpela ties itshet hererfeefreernecncee ccssii for  calliibbrrataitoino;n;[[11S SA LL]]\nO%uOtuptuputt::\n-%csi_-rcesmio_vree_mnoovnel_inonnelairn eiasr tihse tchesic sdiatdaa tian iwnhiwhcihc hthteh enonnolnilnineeaarr eerrrroor has\nbeen eliminatteedd;;[[TT SS AA LL]\ncsi_amp = aabs((ccssii__ccaalliibb));; ?%  [ST AS ALL]]\ncsi_phaassee == uunnwwrraapp((aannggllee((ccssii__caclailbi)b,),[], 22));; [%T[ T SSAALL]]\ncsi_unwrap  =  cssii__aammpp ..** eexxpp((11ii*cscsii__pphhaassee));; ?% [ST AS AL]L]\n�% rBoraodacdacsasttiinngg iiss ppeerrffoorrmmeedd..\nccssii__rreemove_nonlinear == ccssii__uunnwwrrap ..// ccssii__ccaalliibb__tteemmppllaattee;;\nend\n55..22 AAutuotmoamtiacti cGGaiani nCConotnrtorlo lUUnncceerrttaaiinnttyy\nAuuttoommataitcic ggaaiinn connttrroll((AGGC)C )inindducuecse saa ∑︁rranddoomm gagiani nVi\uD835\uDEFDni neaecahc hrerceecieviveedd CCSIS Ippaacckkeett..\uD835\uDC41\n\uD835̃\uDC3B-(\uD835\uDC56, \uD835\uDC57, \uD835\uDC58) = \uD835\uDEFD4\uD835\uDF19 , )\n\uD835\uDC56\uD835\uDEFC\n− ( ,\n\uD835\uDC5B\uD835\uDC52\n\uD835\uDC57 \uD835\uDC5B \uD835\uDC56 \uD835\uDC57 \uD835\uDC58 ,+#\uD835\uDC4118(·\uD835\uDC56, \uD835\uDC579, \uD835\uDC58?)?. ((2299))\n\uD835\uDC5B=1\nTThhereere aarree twoo wwayasy sttoo eellimiinaatte thhe AAGCC eerrroorr::11))DiDsiasbalbel etthhee AGGC Cfufnucntcitoino nofo ftthhee wirireelless\ndrriver; 2) CComppenesnastaet etthhee ammplpilittuuddee ooff thhe mmeassurreedd CSSII based on the rreeppoorteedd AAGC..\nfunction [csi_removvee__aaggcc]]== aaggc_calib(csi_srcc, ccssii__aaggcc))\nr%croc_oc_aclaliibb\nI%nIpnuptut::\n?%si_-srccs ii_sr cthies rthaew rcaswi cswihiwchhi cnheneedesd stoto bbee ccalibrraatteedd;;[TT SSALL]]\n?%csi-_acgsci _iagsc tihse tAhGeCA GaCmpalmiptliutdued ererpeoporrtteedd by thee NNIICC;;[T,,11]\nO%uOtuptuputt::\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 221\n?%csi_-recmsio_vree_maogvce _iasg cthise tchsei cdsaitad aitan iwnhiwchhi cthhet hAeGACG Cunucnecretratianitntyy hhaass bbeeeen\neliminaatteedd;;[T S AA LL]]\n�% rBoraodacdacsasttiinngg iiss ppeerrffoorrmmeedd..\nccssii__rreemove_agc == ccssii__ssrrcc ..// ccssii__aaggcc;;\neend\n5.3 RRadaidoio CChahianin OOffffsseett\nRRaaddiioo cchhaaiinn offffseet (RCOO)i)si stthhee randdoomm phpahsaes evavrairaitaitioonn n\uD835\uDF16g\uD835\uDF19 introducedd bettweeenn ddiifffferent TTx/RRx\ncchhaaiinnss(t(trraannsscceeiivveerr aanntteennnnaa ppaaiirrss)).. TThhee RRCCO Oisi srreesseett eeaacchh ttiimmee tthhee NNIICC iiss ppoowweerreedd uupp..\nq\uD835\uDF19\uD835\uDC5B=(1\uD835\uDC56,8\uD835\uDC57,·\uD835\uDC58)9==22\uD835\uDF0Bc(\uD835\uDC531\uD835\uDC505+,Δ5\uD835\uDC53,\uD835\uDC57 +5°\uD835\uDC53\uD835\uDC37 )g\uD835\uDF0F\uD835\uDC5B1(\uD835\uDC568,·\uD835\uDC57, \uD835\uDC589) +n·\uD835\uDF16\uD835\uDF19 , ((30))\nRCCO Oinidnudcuecse as abibaisats tooff the phaassee--ffrequeennccy ycchharaarcatcetreirsisttiic curve. IIttu nunddeerrmmines thhe aaccccuuracy of\nfeatures such as AooAA oro rTToFo.F .FFoortrutunantaetleyl,y ,wwe effoouundn dthtahta t hthisis ttyppee ooff phhaassee ddeevviaiattiioonn iis conssiistent\nbeettweene neaecahc hsuscuccecsessisvive eppacakcekte tsseennt taanndd tthheerreeffoorree ddooeessnn't’t affffeect  ththeep peerrfoformrmance of tteemmpoorraall\ntrackiingg orr senssiingg,,aandn dthtahta ttthhisis typpee ooff error can be eliimm inattedd byy tthee folloowiingg sstteppss::\n((1)OOncnec ethtehNeINC IpCowpeorw-uepr,- ucpo,ncnoenctn etchtet hteratnrascnesicveeivr eproprotr tusuisning gaa ccooaaxxiiaall cablee ooffk nknoowwn leenngth\nanndd rreeccoorrdd tthee phhaassee iinfforrmataitoionn ccaalliibb__pphhaassee..\n(2) dduurriing subsequeenntt meeaassuurreemmenetnst,ss, usbutbrtaraccttiingg thiss pphhaasseei nifnofromrmaatitoinonf rofrmomtthheem measuureedd\nphhaasese ccssii__pphhaassee..\nfunction [est_rco] == rrccoo__ccaalliibb((ccssii__ccaalliibb))\nr%croc_oc_aclaliibb\nI%nIpnuputt::\n?%si_-caclsib_ cailsi bthies trheeferreefnercen ccesic siata tgigvievnen ddiissttance  aanndd aangnlgel;e;[[TTS SA LL]\nO%uOtuptuputt::\n?%est-_recsot_ ricso tihset heesteistmiamtaetded RRCCOO;[[AA 11]]\nantenna_num  =  size(csii__ccaalliibb,,33));;\ncsi_phase  =  unnwwrraapp((aannggllee((ccssii__ccalailbi)b,),[], 11));; ?% [STAS AL]L]\navg_phase  =  zeros(anteennnnaa__nnuumm,,11));;\nfor a = 1: antenna_num\naavg_phaassee((aa,,1) == mean(cssii__pphhasaes(e:(,:,::,,a, 11)),,'a'lall''));;\nend\nest_rco  =  avvgg__pphhaassee --avg_phase(11,,11));;\neend\n5.4 CCenetnrtarla l Frrequueennccyy OOffffsseett\nCeenntrtraall freequenccyy offffset (CFFOO),), whhicichh iis caused by the ffrreeqquuency desyncchhrroonnizizaattiioonn oonn bbootthh ssiides\noff thhe trraannsceiver,  lelaedadsst otor arnadndoomm freequeennccyy sshhififtt \uD835\uDF16n?\uD835\uDC53  of eeaach received CSSII..\nq\uD835\uDF19=\uD835\uDC5B1(\uD835\uDC568,·\uD835\uDC57, \uD835\uDC589):==2\uD835\uDF0Bc(1\uD835\uDC53\uD835\uDC505,+5Δ,\uD835\uDC535\uD835\uDC57 ,+n\uD835\uDC535\uD835\uDC37°+ \uD835\uDF16g\uD835\uDC531)8\uD835\uDF0F\uD835\uDC5B·(\uD835\uDC56,9\uD835\uDC57=, \uD835\uDC58q)==18\uD835\uDF19·\uD835\uDC5B (\uD835\uDC569, :\uD835\uDC57,,\uD835\uDC58n)?+g\uD835\uDF16-\uD835\uDC531\uD835\uDF0F\uD835\uDC5B8(·\uD835\uDC56, \uD835\uDC579, \uD835\uDC58”) . ((311))\nTThhe eCCFOF Oindinudceusc easn aenxterxat rbaiabsia s(i(.i.ee..,  aann ooveralllu upp aanndd ddownn sshhiifft) oof  tthhee pphhaasee-ffrreeqquueenncy\nchaarraaccteterriissttiic curvee..\nTToo eellimmiinatte CCFO,, wee neeeedd to iinnsseerrttm muulltitpilpelHe TH-TL-TLTFFssi ninth tehsea msaemeP PPDPDUU (Wi-i-FFii data ffrarmame),,aannd\nttheerrefore obtainninngg mmulltipplleeC CSSIIm meeaassuureemmeennttss..SSiinccee the tiimme iinntteerrvvaallb ebtewtweeenn mmultiippleleH HTT--LLTTFs\nis ssttrricitcltylyc ocnotnrtorloleldletdo t4o\uD835\uDF07 \uD835\uDC604Baaccccording too tthhee 880022.1111 pprroottooccol,,t htehep hphaasseed diffifefrernecneceb ebtewtweeeenn ttwwo\nHHT-TL-TLFTsF siissiinndduucecde dbbyy tthe CFOO wwitithhiin ΔC=\uD835\uDC614=B.4 \uD835\uDF07T\uD835\uDC60h.uTs,h utsh,eth aepapprporxoixmiamtea tevavlauleu eoof f the CCFO can be\nrrecovveerred..\n222 Zheenngg Yang, Yi ZZhhang, Guooxxuaann Chhii, and Guidong ZZhang\nfunction  [esstt__ccffoo]] =cfcof_oc_aclaliibb((ccssii__ssrrcc))\n�% fcofo__ccaalliibb\nI%nIpnuptut::\n?%csi-_scrsci_ sirsc tihset hcesic sdiadtaat awiwitthh ttwo HTT--LLTTFsF;s;[[TT SSA LL]]\nO%uOtuptuputt::\n?%est_-cefsot _icsf othies ethsetiemsattiemda tfedrefqrueqnuceyn coyf offsseett;;\ndelta_time == 44ee--66;;\nphase__11 == aanngglel(ec(scis_is_rscr(c:(,:,:,:,:, 11))));\nphase_22 == aannggllee(c(scis_is_rscr(c:(,:,::,,:, 22))));;\nphasee__ddifif f== mmeeana(np(hpahsaes_2e_-2-p hpahsea_s1e,_13,)3;)%;[[TT SAA 11]]\nest_cfo = mean(phase_diffff .// ddeellttaa__ttiimmee,,22));;\nend\n5.5 SSaammplpilnign gFrFerqeuqeunecnyc yOfOfsffeste taanndd PPaacckkete t Deetteeccttiion Deellay\nThe sampplling frreeqquueennccyy ooff sseett( S(FSOF)O,)w, hwihcihcahp appepaersartso bteo abne earnr oerrirnorfr eiqnu efnrceyqudeonmcya idno, maarien, are\ngenerrallyy ccoonnssidideererdeda sasa naenq ueqivuailveanltentitm teismhei fsthdiufet todufer etqou efnrceyquaesnycnyc harsoyncyh. rTohney.p aTchkee tpdaectkeectt iodentection\ndeellay((PDDD)Di)sias atitimme eddeellaayy..TThheerereffoorree,,ddeessppiite tthheeirird isdtiisntcitnccatu sceasu,stehse,y atrheyo faterne doifstceuns sdeidstcougsestehde rtogether\nas aa “tiimme ooff set” together.\nq\uD835\uDF19=\uD835\uDC5B (1\uD835\uDC56,8\uD835\uDC57·, \uD835\uDC58)9=:=2\uD835\uDF0B2(c\uD835\uDC531\uD835\uDC50 5+,Δ5\uD835\uDC53,\uD835\uDC57 +5°\uD835\uDC53\uD835\uDC37 )1(g\uD835\uDF0F\uD835\uDC5B?(8\uD835\uDC56,·\uD835\uDC57, \uD835\uDC589),+ \uD835\uDF16n\uD835\uDC61 )c=°\uD835\uDF19=\uD835\uDC5B (q\uD835\uDC56,=\uD835\uDC571, \uD835\uDC588)·+ 29\uD835\uDF0B:(,\uD835\uDC53\uD835\uDC502+c1Δ5\uD835\uDC53\uD835\uDC57,+5g\uD835\uDC53\uD835\uDC37,)5\uD835\uDF16\uD835\uDC61n.c\"(3(322)\nThhiiss type of  eerrororri sicsr ictriciatlibcaelc abuesceatuhse ttimhee tdiemlea ydeclaany bceacno bnefu csoendfwusiethd rweiatlh TroeFala nTdoFt haunsd thus\na ffeecctt thhe aaccccuuraaccyyooff thhe rraanngginngg aaccccuuaarrccyy..SSpecifi calllyy, ,ththisisd edveivaitiaotniown ilwliblel cbhea rcahcatrearciztedriiznedth ien the\nphhaassee--ffrequeennccyy chaarraacctteristticicc ucruvrevea saas cah acnhganegien islno psel,ospien,c esitnhcise ttimhies dteivmiea tidoenvicaatuisoens dcaiffuseeresn dti erent\nphaassee changeess wiith ddiiff eerreenntts usbu-bb-abnadndssΔ5g\uD835\uDC53\uD835\uDC57..\nCuurrreenntltlyy,, tthheerree isisn ono“ ppeerrffeecctta laglogroirthitmhm” ttoo sosolvlevet htihsitsy pteypoef oefrr oer.rCoro.nCjoungjaugteatme umlutilptliipclaiticoantion\nand divviisisoinona raertehteheo nolynltyw otwmo emthetohdosdtso etloi meilniamtientahtee StFhOeSaFnOd aPnDdD P.DTDh.e Tchoed ecodfeb ootfh obfothe mof atrheem are\nliisstetdedb ebelolwow..BBy applinng tthhee ccoonnjuugate mmulltippliciacatitoinono rord idvisviosni,otnh, et\uD835\uDF16h\uD835\uDC61eis  eelilmimiinnaatteedd,,aat  ththeec ocsotsto fof\nloossiningga basbosloulteutTeo FTomFe amseuarseumrenmet.nt.\nfunction [csi_remove_sto] = ssttoo__ccaalliibb__mmuul((ccssii__ssrrcc))\ns%tost_oc_aclailbib__mmuull\nI%nIpnuptut::\n?%csi-_scrsci_ sirsc tishet hcescis idadtataa wwith  ssttoo;;[TT SSA LL]]\nO%uOtuptuputt::\n?%csi-_rcesmio_vrem_osvteo_ stios itsheth ecscis idadattaa wwithouutt sstot;o;[[TT SSA LL]]\nantenna_num  =  size(csi__ssrrcc,,33));;\ncsi_remove_sto = zzeerrooss((ssiizzee((ccssii__ssrrcc))));;\nfor a = 1: antenna_num\na_nxt  =  mmoodd((aa,,anteennnnaa__nunmu)m)++11;;\nccsi_reemmoovve_es_tsot(o:(,::,,:,aa,, :)== ccssii_src(::,,:,aa,,:):.)* .*cocnojn(jc(scsii__ssrrc(:, ::,,\na_nxt , ::))));;\nend\nend\nfunction [csi_remove_sto] == ssttoo__ccaalliibb__ddiivv((ccssii__ssrrcc))\ns%tost_oc_aclailbib__ddiiv\nI%nIpnuptut::\n?%si_-srccsi _issr ctihse tchesic sdiadtaat awwiitth stoo;;[T  SSALL]]\nO%uOtuptuputt::\n?%csi-_rcesmio_vrem_osvteo_ stios itsheth ecscis idadattaa wwithouutt sstot;o;[[TT SSA LL]]\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 223\nPuusshh  &P Pulull SSwweeeepp CCllap\nSSllide Drraww  CCiirrclee DDrraaww  ZZiiggzzaagg\nFig. 9. SSkektecthcehse sofo fggeessttuurreess evaalluaatteedd in thhe eexxperimmeenntt..\naantenna_num = size(csii__ssrrcc,,33));;\ncsi_remove_sto = zeros(ssize((ccssii__ssrrcc))));;\nfor a = 1: antenna_num\na_nxt  =  mmoodd((aa,,anteennnnaa__nunmu)m)++11;;\ncsi_reemmoovve_es_tsot(o:(,::,,:,aa,,:) == csi_srrcc((::,,:,, a,::))./. /cscsii__ssrrc(:, ::,,a_an_nxxtt,,\n:);\nend\nend\nToo summ uup,p ,tthheerree arre various foormmss of eerrrroorrss ininW Wi--FFiiC CSSIIm measuremeenntst,s,ininclculuddining gffiixeedd bbiias\nandd rraannddoom mererrorosr.s .EEacahc hofo ftthheemm hahvaev edidfifffeerreennt tiimpapcatcst soon nththe ellooccaalliizatioon,  ttraracckkiningg,,aand sensing\nttaskss.. TThe e∑︁rroneoouuss CCSSIfIofromr mcacna nbeb feifinanlallyly wwrirtitteenn aass::\uD835\uDC41\n\uD835̃\uDC3B-(\uD835\uDC56, \uD835\uDC57, \uD835\uDC589) =-\uD835\uDEFD \uD835\uDC57 ( \uD835\uDC56 \uD835\uDC58\n\uD835\uDC56 \uD835\uDC53_(\uD835\uDEFC \uD835\uDC5B \uD835\uDC57\n\uD835\uDC5B)\uD835\uDC52s− \uD835\uDC54 \uD835\uDF19u( , , )),+#\uD835\uDC411(8\uD835\uDC56,·\uD835\uDC57,9\uD835\uDC58:),q\uD835\uDF19=\uD835\uDC5B1(8\uD835\uDC56,·\uD835\uDC57, \uD835\uDC589)==2c21\uD835\uDF0B5(,\uD835\uDC53\uD835\uDC505+,Δ5,\uD835\uDC53\uD835\uDC57n+5\uD835\uDC53°\uD835\uDC37+1\uD835\uDF16g\uD835\uDC53-)1(\uD835\uDF0F8\uD835\uDC5B·(\uD835\uDC56,9\uD835\uDC57:, \uD835\uDC58n)c+°\uD835\uDF16\uD835\uDC61 ),+n\uD835\uDF16”\uD835\uDF19 .\n\uD835\uDC5B=1\n(33)\n6 WWIRIREELLEESSS SENSINNG WWITTHH DDEEEEPPL ELAERARNNINIGNG\nTThhisis secttion inntrrooduceess a sseerriieessoof  lelaearnrniningga alglogorritihtmhms, especialllyy ththeep rpervevaalelennttd edeeppn neeuurraalln neetwtwork\nmmodoedlesl sssuuchc haassCNCNN aNnda nRNdNR, NaNnd, atnhdeitrh eaiprpalpipcalitciaotnios nisni nwiwreirleelses ssseennssiinngg..TThihsi ssseeccttiion also pprrooposes\naa complpelexx-v-vaalluueedd nneeuurarla l neettwoorkrtkot oacacocmopmlipslhis hlelaeranrinning gaannd diinnffeerreennccee baasseedd onnwiwrierleelsess ffeatures\nefffificienttlly..\n6.1 CConovnovloultuitoinoanla lNNeueruarla lNNetewtworokrk\nCCoonnvovloulutitioonnaall NNeeuurarall NNeettwworokr(kC(NCN)N Nco)nctornitbruitbeust etsot oththe erreecceenntt aaddvvaanncceess iinn uunnddeerrssttaannddiinngg iimmaaggeess,,\nvideos, aanndd aauudioos..Somee wworokrsk s[[111,,292,93,03]0 ]hhavaev eeexxplpoloititeedd CNN Nfofro rwwirierleelesss signal uunderstanding\nin wiireless sseennsiinngg ttaasskkssa anndd aacchhiieevveedd pprroomiising performaancnec.e .TThihsis sseeccttion wiilll pprreesseennt  aaw working\nexaammplpel ettoo demmonosntsrtartaete hhooww toto aappplyly CCNN Nfofro rwiwrierleelses ssseennssiingg..SSppeceicfifiicallyy,,w weeu usesec ocmommmooddiitty\nWi-iF-Fiitoto rreeccooggninziez essiixx huummana ngegsetsutruerse.s .TTheh egegsetsutruerse saarree iilluussttrraatteeddi ninF iFgi.g9..9W.We ddeploy a WWii--Fii\ntranssmmititteerr andd ssiix receivers inn aa tytyppiiccaallc lcalsassrsoroomom, a anndd tthhee ddeevviiccee sseetutupp isiss ksektecthceheddi ninF iFgi.g1.100..TThe\nusseerrss are asked toppeerrffoorrmm gegsetsutruerse sata ttthhee ffiive mmaarrkkeedd llooccaattiionnss anndd ttoo ffiivve oorriieennttaattioionnss..TThee datta\nssaammplpelsecsacna nbeb efofuonudn dini nouoru rrerelleeaasseedd ddaattaasseett [[2255]]..WWee eexxttrraacctt DDFFSS ffrroomm rraaww CCSIS Issiiggnnaallss aanndd ffeeeedd\nthem iintto a CNNN nentewtowrokr.k T. hTeh enentewtowrko rakrachrcihteitcetcutruer eiiss showwn ninin FFiig..1111..\nWWe enonwo winitnrtordoudcuec ethteh eimimplpelmeemnteanttiaotnio ncocdoed ieni ndedteatialil..\n224 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n不0.5m上 ←-00..99mm→|0.55mm\n→0.5m TTxx\nA B\n2\n1 3 Rx\n2m E 44 -0.9m LLoc\n5\nD C\nSensi Orriient\nSensing \nArreaa\n22mm - —→|0.55mmk\nFiig. 1100.  TThe setupp off WiFiFi iddeevviciceess ffoorr geesstturree recooggnnititiioonn ttaasskk..\n116@1166**1166*26 116@88**88*26\n992288(*T(T--44))\n66*121*T 2256 1128\nnn__dcalassss\n1166@55**33*6 22*2*2\n Max Pooling ae →\n3D Conv Max Pooling Flatten FFC FFC Softmax\nFi1g6.@ 1411*1.1.1 6CConvolluttion1a6ll@ NN2*e5uu8rraall Neettwworo1kr8 k5a6arcrchhitite1e2cc8ttuurree..\n6*121\n64\n16@3*6 2*2\nFFiirst,,s tos1mome nneecees2sDsa aCrroynyv ppaacckkages aaMrreaex iPmooplpionorgrtteedd.. Wee Fuluaststee nKKeerraasFsC [[5] AFPPCII wiith TenssoorrFFllow aass the\nbacckeenndd tto demoonsntsrtraattee howw ttoo imppllemmenetn ttthhee neeuurraall netwoorrkk..\nGRU\nimport os,sys 16@4*116 16@2*58 1856\n128\nimport nump6y*1 2a1s np 64\nimport scipy.io a1s6 @s3*c6io 2*2\nimport tte2nsorflow as tf 64\n2D Conv Max Pooling Flatten FC FC n_class\nimport keras GRU\nfrom keraass..llaayyeersrsi mipmoprotrtI nIpnutp,utG,RGUR,U,DDeennssee,,Flatttteenn,, Dropoutt, CCoonnv2D ,CoConSnvovf3t3mDDa,x,\nMaxPoolinngg22DD,,MMaaxPoolingg33DD,,TTiimmeDistributteedd,,BBiiddirectionaall,,MMuulltiply ,PPeerrmmuuttee,,\nRepeatVVeeccttoorr,,Concatteennaattee,,Dot , LLaammbbda\nfrom keras.models  import  Moddeell,,llooaadd__mmooddeell\n16@4*116 16@2*58\nimport keras.backend as K 1856 GRU\n128\n6*121\nfrom sklearn.metrics import confusion_matrix 64\nfrom kkeerraass..bbaacckkeennd1d.6.@tt3e*en6n sorflow_bac2k*2end import set_sessioonn\ntn\nfrom ssklearn.mmooddee2llD_ Csonevlection iimmMppaox rPto olitntrgraaiinn__tteesstFtl_a_tstsepnpllit FC FC\nThheenn wwe eddefeifinnee somme eppaararammetetresr,si,nicnlculudidningtghteh ehyhpyeprpearrpamreatmereste rasnda ntdheth deadtat apaptaht.h .TTheh effrraaccttion\nooff tteessttiinngg ddaattaa iissd deefifniendeda ass0 .01..1T.Too ssimimpplliifyfyt htheep prroobblleemm,, wwee oonnllyy uussee ssiixx ggeessttuurree ttyyppeess iinn tthhee\nwiiddaarr33.0.0 daattaasseett..\nLabel \n# PParameters Prediction\n64 64\nfraction_for_test = 0.1\n32\ndata_dir = 'widar30dataset/DFS /20181130/ ' n_class\nALL_MOTION = [1,,2,,3,,4,,5,,66]\n6*121*T FC FC Softmax\nN_MOTION = len(AALLLL_MOTION)\nCNN+RNN\n64 64\n32\nn_domain\nFC FC Softmax\nDomain \nDiscriminator\nSEN\nx4\n2m 0.5m\n0.9m 0.5m\nttaannhh\nCCoommpplleexx  FFCC\nttaannhh\nCCoommpplleexx  FFCC\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 225\nT_MAXX== 0\nn_epochs = 200\nf_dropout_ratio = 0.5\nn_gru_hidden_units = 64\nn_batch_size = 32\nf_learning_rate == 00..000011\nThhee pprrooggrraamm bebgeignisn swiwthit hlolaodaidnign gdadtaat awiwtiht hththe epprerededfeifinneed dffuunnctcitioonn llooaadd__ddaattaa. TThe looaded data\narre spllit  ininttoo trtarianina nandd tetessttb ybyc acallilnigngt hteheA APPIIf ufunnccttiioonn ttrraaiinn__tteesstt__ssplit. Thhee llabbeellss off the trainninng\ndaatta are encoddeedd iintto the one--hoott formaat twwitithh tthee prreeddeeffiineedd ffunnccttiionn oonehot_encoding.\n# Load ddaatta\ndata ,lalbaebell == llooaadd__ddaattaa((ddaattaa__ddiirr))\nprint('\\\\nnLLooaadeddedd adtaatsaesteotf o'f'++ ssttrr(l(albaeble.ls.hsahpea[p0e][)0]+)+''sampplleess,,each  siizzeedd'++ ssttrr\n(dataa[[00,,::,,::,,:,::,]:.]s.hsahpaep)e+)+'\\nn''))\n# SSplit ttrraaiinn aanndd tteesstt\n[data_trainn, ddaattaa__test ,lalbaebell__ttrraaiinn,,lalbaeble_lt_etsets]t ]== ttrraaiinn__tteesstt__ssplit(data ,llaabbeell,,\ntest_size=ffrraaccttiioonn__ffoorr__tteesstt))\nprint('\\nTTrraaiinn onon' ++ ssttrr(label_trraaiinn..sshhaapep[e0[]0)])++'' samples\\nn''++\\\n'Test  onn''+ +stsrtr((llaabbeell__tteest.shape [0]]))++' 'sasmapmplleess\\\\nn''))\n## OOnne--hhoott eennccoodding ffor ttrain data\nlabel_train = onehot_encoding(labell__ttrraaiinn,,NN__MMOOTTIIOONN))\nAfftterr looading andd formaatttiingg tthee trainninng and testiinngg ddataa,,w wee ddefifinneedd tthhee mmodeell wiitth the\nprreeddeeffiineedd ffunnccttiionn bbuuiilldd__mmooddeel.AAftfteerr thaatt, wwe traainn tthhee mmodeell by calliinngg ththeeA APPI  ffuunncctiioonn ffiitt..TThe\ninpuutt ddaattaa aanndd llaabbeel l arree speecciiffiied inn tthhe pparameetetersrs.. Thhe effrraaccttiionn ooffvavlaildidataitoion ndadtaat aisis ssppeecciiffiied as\n00..1..\n# TTrraain MMooddeell\nmmoodel = build_mmooddeell((iinnppuut_ts_hsahpaep=e(=T(_TM_AMXA,X,66,,121, 11)),,n_nc_lcalsas=sN=_N_MMOOTTIIOONN))\nmodel.summary ()\nmodel.fit({'name_model_inpuutt'::ddaattaa__ttrraaiinn}},,{{''nnaamme_model_output ':llaabbeell__ttrraaiinn}},,\nbatch_size=nn_batch_size,,\nepochs=n_epochs,,\nverbose==11,,\nvalidation_split =0.11,,sshhuuffffllee==TTrruuee))\nAAftfteerr tthee trainninng processs, wwee evaalluaatte the moodedle lwwitiht hththe etetesstt daattaasseett. TThee prreddiictions are\nccoonnvveretrteedd ffrromm onoen-eh-ohto tfofromramta tot oininteteggeersrs aanndd aarree uusseedd ttoo callculate tthhee ccoonnfuusiioonn mmattrixx aannd\naaccccuurraaccyy..\n# TTeessttiinngg......\nprint('Testing ...')\nlabel_test_pred = model.predict(data_test)\nlabel_testt__pprreedd == npn.pa.ragrmgamxa(xl(albaebl_etle_stte_sptr_epdr,eda,xaisxi=s -=1-)1)++11\n# Confusion Matrix\ncm = confusion_matrix(label_tesstt, llaabbeell__tteesstt__pprreedd))\nprint((ccmm))\ncm = cm.astype('float ')/cm.sum(axis =1)[:, nnpp..nneewwaaxxiiss]]\ncm = np.around(cm , ddeecciimmaallss==22)\nprint((ccmm))\n# AAccccuurraaccyy\ntest_accuracy  =  np.summ((labbeell__tteesstt ==== llaabbeell__tteesstt__pprreedd))/(l(albaeblel__tteesstt..sshhaappee[[00]]))\n226 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nprint(tteesstt__aaccccuracy))\nTThhee pprreeddefeifinnede dononeehhoott__eennccooddiinngg ffuunnccttiioonn ccoonnvevretr ttthhee llaabbeell ttoo oonnee--hhoott ffoorrmmaatt..\ndef onehot_encoding(labeell, nnuumm__ccllaassss))::\n# label(ndarray)=>_label(ndarray): [[NN,,]]==>>[[NN,,nnuumm__ccllaass]]\nlabel = np.array(label).astype(''iinntt32''))\nlabel = np.squeeze(llaabbeel))\n__label = np.eeye(nnuumm__class))[[llaabel--11]\nreturn __llaabbeell\nThhe epprerdeedfeifinnede dlolaoda_dd_adtaat affuunnctcitoion nisis uusseedd ttoo lloaadd aalll ddata ssaampplleess aanndd llaabbeellss from aa ddiirreeccttoorryy..\nEEaacchh ffii le inn tthhee ddiirerecctotoryryc ocorrerespspoonnds ttoo aa ssininggleled adtaatas asmampplee..E Eaacchh ddaattaa sasammple iissn noorrmmallized\nwiitthh tthee prreeddeefifinneedd nnoorrmmaalliizzee__ddaattaa ffuunnctcitioonn. .IIt iissw woorthh nnotinng that tthhe ddataa ssaammpplleess haavvee ddiifffferentt\ntimmee duurraattiionss..WWe eusues ea aprperdeedfeifinnede dzezreor_op_apdaddiinngg ffunnccttiionn tto maakke etthheeiirr duurraattiionss the samee aass the\nlongeesstt onee..\nddeeff llooaadd__ddaattaa((ppaatthh__ttoo__ddaattaa))::\nglobal T_MAX\ndata = []\nlabel  ==[[]\nfor data_rooott, ddaattaa__ddiirs,,dadtaat_af_iflielse sini nosos..wwaallkk((ppaatthh__ttoo__ddaattaa))::\nfor data_file_name iin ddaattaa__ffiilleess::\nfile_path = os.path.jjoin((ddaattaa_root,,ddaattaa__ffiillee__nnaammee))\nttrry::\ndata_1  =  sscciioo..llooaaddmamta(tf(ifliel_ep_aptaht)h[)'[d'odpoplpeprl_esrp_escptercutmr'u]m']## [[66,,112211,,T\n]\nlabel_1 = int(ddaatta_file_name..sspplliitt((''--''))[[11]]))\nlocation = int(data_file_name..sspplliit((''--''))[[22]]))\norientation = int(dattaa__ffiillee__nnaammee..sspplliitt((''--''))[[33]]))\nrepetition = int(data_file_name.split('-'')[[44])\n# Downsample\ndata_1== ddaattaa__11[[::,,::,,00::::1100]]\n## SSeellect MMootion\nif(l(albaeblel__11 nnoott iinn AALLL__MMOOTTIIOONN))::\ncontinue\n## NNoorrmmaallization\ndata_normed_1 = nnoorrmmaalliizzee__ddaattaa((ddaattaa__11))\n# Update T_MAX\nif T_MAX< <npnp..aarrraayy((ddaattaa__11))..sshhaappee[[22]]::\nT_MAX = np.aarrrray((ddaattaa__11))..sshhaappee[[22]]\nexcept EExxcceeppttiioonn::\ncontinue\n# Save List\nddaata..aappppeend((ddaattaa__nnoorrmmeedd_1..ttoolliisstt(())))\nllaabbel..aappppeennd((llaabbeell__11))\n# Zero -padding\ndata = zero_paddiinngg((ddaattaa,,TT__MMAX)\n# SSwwap aaxxeess\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 227\ndata  == nnpp..sswwapaapxaexse(sn(pn.ps.wsapwaxpeasx(edsa(tada,t1a, 13,)3,),22,,3) # [#N,[6N,162,12,1T,_TM_AMXA]X=]>=>[[NN,,\nT_MAX ,6 ,121]\ndata  =  np.expanndd__ddiimmss((ddaattaa,,aaxxiiss==--11) # [N,TT__MAX,,66,,112211]]==>>[[NN,,\nT_MAX ,6,121,1]\n# CCoonvert llaabel tto nnddaarrray\nlabel = np.aarray((llaabbeell))\n# data(ndarraayy))::[[N,T_MAX ,6,121,11]],,llaabbel(ndarray): [[NN,,]]\nreturn  dataa, llaabbeell\nThhee nnoorrmmaalliizzee__ddata fuunctioon iss uusseedd toton noorrmmalizzee ththeel olaodadeedd ddaattaas asmamples. E Eaacchh ddaattaa ssaammplle has\naa dimeennssiioonn ooff x[6,112211),/\uD835\uDC47in] , winhiwchh itchet hneumnbuerm b\"6e\"r \"r6e\"prreepsreenstesn tshteh enunmubmerb eorf oWfiW-Fi- Frierceecievievresr,s , the\nnnuummbebre\"r12\"1\"2 1r\"erperperseesnetnst stthhee ffrequeennccyy bbiinss,,aanndd tthee\"\"TT\"r\"erperperseesnetnst stthhee timmee duratioons. To normaalliize\na sampplele,,wwe escsaclael etthhee ddaattaa to be inn ththeer arnanggee ooff[x0,-1]/ffor each timme snapsshhoott..\ndef nnoorrmmaalliizzee__ddaattaa((ddaattaa__11))::\n# data(ndarray)=>data_norm(ndarraayy))::[[66,,112211,,TT]]==>>[[6,,121,T]\ndata_1_max = np.amax(data_1 ,(0,1),keepdims=True) ## [[66,,11221,,TT]]==>>[[1,,1,TT]]\ndata_1_min = np.amin(data_1 ,(0,1),keepdims=True) ## [[66,,112211,,TT]]==>>[[11,,11,,TT]]\ndata_1_max_rep = np.tile(data_1_max ,( data_1.shape[0],ddata_1.sshhape[[1],,11)))##\n[1,1,T]=>[6,,121,,TT]]\ndata_1_min_rep = np.tile(data_1_min ,( data_1.shape[0],ddata_1.sshhape[[1],,11)))##\n[1,1,T]=>[6,,121,,TT]]\nddata_1_norm  = ((ddaattaa__11 -- ddata_1_min_rep) //(d(adtaat_a1__1m_amxa_xr_erepp -- ddaattaa__11__mmiinn__rep +\nsys.ffllooaat_info..mmiinn))\nreturn  ddaattaa__11__norm\nThhe ezzeerroo__ppaaddddiinngg funccttion is uused too aalligignn aall lth tehde adtatsaa msapmplelsest otoh ahvaevet htehes asmamee dduuratioonn.  TThhe\npaaddddede dlelenngtght hisis ssppeecciiffiied by the parameteetre rTT__MMAAXX..\ndef zero_padding(dattaa,,TT__MMAAXX))::\n# data(list)=>data_pad(ndarray):[[66,,112211,,TT11//TT22//.....]]==>>[[66,,112211,,TT__MMAAXX]]\ndata_padd ==[[]\nfor i in range((lleenn((ddaattaa))))::\nt= =npnp..aarrraayy((ddaattaa[[ii]]))..sshhaappee[[22]]\ndata_pad.appppeenndd((nnpp..ppada(dd(adtaat[ai[]i,],((((00,,00)),,((00,0,)0,)(,T(_TM_AMXAX-- t,0)),''ccoonnssttaanntt'',,\nconstant_valueess ==00))..ttoolliisstt(())))\nreturn np.array(data_pad))\nIn this  ffuunnctiioonn,  wwe deffiinne tthhee nnetwwoorrkk ssttrucctturree.. Thee iinppuutt llayeerr is ssppecififeiedd wwitthh tthhee AAPI\nfunccttion Input,  wwhich has thhe pparameetteerrss to defifinnee tthhee ininppuutts hshaappee,,data ttyyppe, andd the laayer nnamee..\nFoolllowiinnggthteh eininpuptu tllaayyeerr,,wwe euuses eaa tthrreee--diimeensnisoionanla lccoonnvovloultuitoionanla lllayeerr, aam max-pooolling laayyer,,and\ntwoo ffuullly connneecctteedd llayyeerrss.. Thee ouuttppuut tllayeerr is ssppeecififeidedw wiitthht htheeA APPI  fufunnccttioionn Oouuttpputu,t,wwhich has\nthe parrammeteetresr sttoo ddeeffiinee the activvaatiioonn ffuunnctiioonn, t htehed idmimeennsioon, andd tthee naamme.eA.tA ltalsats,t ,wwe efifinnaalliize\nthe moodedle lwwitiht hththe eAAPIP fIufnucntcitoino nMoMdoedle lanadn dcocmopmipliel.e . Thhe eooptpitmimiziezre risis ssppeecciiffiied too RRMMSSpprroopp,,aannd thhe\nloss is  ssppecififieedd ttoo ccaatteeggoorriical_crossentrrooppyy..\ndef build_model(input_sshhaappee,,nn__ccllaassss))::\nmmodel_input = Input(shape=inppuutt__sshhaappee,,ddttyype='float32 ',nanammee==''nnaammee__mmooddeell__iinnppuutt\n') #(@#,T(_@M,AT_XM,A6X ,61,2112,11,1))\n# CNN\nx = CConv3D (16,kkeernel_size =(5,3,,6),aacctivation='rrelu',ddaata_format='cchhannels_last\n',\\\ninput_shaappee==iinnppuutt__sshhapaep)e()m(omdoedle_li_nipnuptu)t)#(#@(,@T,_TM_AMXA-X4-,46,,61,2112,11,)1)==>>((@@,,TT__MMAAX\n-4,4,116,16)\n16@16*16*26 16@8*8*26\n928*(T-4)\n6*121*T 256 128\nn_class\n16@5*3*6 2*2*2\n3D Conv Max Pooling Flatten FC FC Softmax\n228 ZZhheenngg YYaanngg,, YYii ZZhhaanngg,,GGuuooxxuuaann CChhii,, aanndd GGuuiiddoonngg ZZhhaanngg\n116@44**1116 16@22**558 1856 1128\n66**1121 664\nt 16@3*6 22*2\nt1 →\n2D  Conv MMaxa x PPoooolliinngg FFllatten FFC FFC\n4*1 2* GGRRU\n16@4*116 16@2*58 118856\n6*12 1128\n6*121 664\n16@3*6 22*2\nt2 ax Pool n Haten 664\n2D Conv Max Pooling Flatten FC FC U nn__ccllass\nGRU\nSSoftmmax\n16@44**116 116@22**58 11856 1 GRU\n128\n6*121 664\n16@\nt 33*6 2*2\ntn 2*2\n2D CConv MaaxxP Pooooiling Flatten FC-F1C\nFig. 12. Reeccuurrreenntt Neeuurarall Neettwworokr karacrhcihtiteeccttuurree..\nLabel \nPrediction\n64 64\nXx= =MaMxaPxoPoloilningg33DD((ppoooll__ssiizzee==((22,,22,,22))))((xx)) ##(@(,@T,_TM_AMXAX-4-,44,4,1,1166,,1166))==>>((@@,,TT__MMAX\n32\n-4,2,,5588,,1166)) n_class\n6*121*T FC FC Softmax\nx= =FlFalattteenn(())((xx)) #(@(,@T,_TM_MAAXX-4-4,2,2,5,588,,1166))==>>((@@,,((TT__MMAAXX\n-4)**22**5588**1166))\nx= =DeDennssee((225566,,aaccttiivvaCatNtiioNon+n==R''NrreNelluu''))((xx)) ##(@(,@(,T(_TM_AMAXX-4-4))**22**5588**1166))==>>((@@,,225566))\n64 64\nx= =DrDrooppoouutt((ff__ddrrooppoouutt__rratio)(x)\n32\nx= =DeDennssee((112288,,aaccttiivvaattiioonn==''rreelluu''))((xx)) #(@(,@2,52566))==>n>(_(d@o@,m,1a1i2n288))\nx= =DrDorpoopuoutt((ff__ddrrooppoouutt__rraattiioo))((xx))\nmodel_output = Dense(n_class , activationF=C'softFmC\nSoftmax\n  s activation='sof tmaaxx'',,nnaammee==''nnaammee__mmooddeell__ooutput'')(\nx)#(#@,(1@2,81)28=)>=(>@(,@n,_nc_cllaassss)) Domain \nDiscriminator\n# Model compiling\nmodel = Model(inputs=model_input , outputs=model_output)\nmmodel.ccoommppile((ooppttiimmiizzeerr==kkeerraass..ooppttiimmiizzeerrss..RRMMSSpprroopp((Ilrr==ff__lleeaarrnniinngg__rraattee)),,\nloss='ccaatteeggoorriiccaall__ccrroosssseennttrrooppyy'',,\nmetrics =['accuracy ']\nSEN\n))\nx4\nreturn model\n6.22 RReeccuurrrrent NNeuraallNNetwwork\nReeccurrrent  NNeeuuraallN Netewtwoorrkk((RRNNN)) iissd edseigsnigednefdo rfmoro dmeolidneglitenmg ptoermaplodryanla mdyicnsamoifcsse qoufe nsceqsuaenndces and\niis ccoommmonolnyly uusseedd ffor tiimme sseerrieisesd adtatan anlyasliyssliks elsipkee cshperecho grneictioognniatnidonn aatnudr anlaltaunrgaula gleanguage\nprocessinngg. W Wirreelelses si gsniaglnsaalrse ahrige hhlyigcholryr eclaotrerdeloavteerdt imoveera ntdicmaen abned pcraonc ebses epdrwocitehssReNd Nw.iStohm ReNN. Some\nwoorrkkss[1[1,13,03 0h]ahvae vdeedmeomnsotnrsatreadt etdhteh epoptoetnetnitaial l of RRNNN fforr wiireleesssss esnensisnigngt atsaksk. sIn. tIhni stsheicst iosnec, tion,\nwee wwilill pprreesesnentta wa owrokriknignegx aemxapmlpeloef coofm cboimnbiinngiCngN NCNaNn danRdN RNNNt otpoe rpfeorrfmorgme sgtuesreturreec orgenciotigonnition\nwiitth Wi-i-FFii.  TThhee eexxppeerrimimeennttaalls estteitntgisnagrse athre stahmeseaamsei nasS eicn. 6S.1e.cW.6e.1a.lsWoe eaxltsraoc texDtFrSacfrto mDFSth efrroamw the raw\nCCSSl I ass thhe iinnppuut  fefaetautruereo fotfh ethnee tnwetowrokr.kT.h Tehnee tnwetowrokrka racrhcitheictteucrteurise sihso wshnowin Fiing .F1i2g.  12.\nWWe ennowo winintrtroodduucec etthhee imppllemeenntatattiion code inn ddeetatiali. l.\nttaannhh\nCCoommpplleexx  FFCC\nttaannhh\nCCoommpplleexx  FFCC\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 229\nMosots toof ftthee cooddee iis thhe ssaamee aass in Sec. 6.1 eexceptt foor  tthhee mmodeell deffiinnittiioonn..To deffiine thhe mmooddeel,l,\nwwe euussee ttwo-od-dimimenesnisoinoanla cl ocnovnovloutluitoinoanla l alayyeerr aanndd mmaxa-xp-opooloinlign glalayeyre roonn tthhee ddiimenesnisoionanla leexxcceeppt tfforr\nthe timme dimeennsisioonn ooff the data. We eadaodpotp t hthe eGGRUR Ulaylaeyr earsa sththe erreeccuurrerentn tllayyeerr..\nddeeff bbuuild_model(input_shaappee, nn__ccllaassss))::\nmmodel_input = Input(shappee==iinnppuutt__sshhaappee,, dtype='float32 ',nnaammee==''nnaammee__mmooddeell__iinnput\n') #(@#,T(_@M,AT_XM,A6X ,61,2112,11,1))\n# CNN+RNN\nx = TTiimmeDistributed(CConv2D (16,kkeernel_size =(3,6),aacctivation='rrelu',ddaata_format=\n'channeellss__llaasstt'',,\\\ninput_shape=input_shape))(model_input) #(@(,@T,_T_MMAAXX,,66,,112211,,11))==>>(\n@,T_MAX ,4,,1116,,16)\nxx= =TiTmimeeDDiissttrriibbuutteedd((MMaaxxPPoooolliinngg22DD((ppooolo_ls_isziez=e(=2(,22,)2))))(x))(x)##(@(,@T,_TM_AMXAX,4,4,,111166,,1166))\n=>(@,T_MAX,,22,,5588,,1166))\nx= =TiTmiemDeiDsitstrriibbuutteedd((FFllaattteenn(())))((xx)) #((@@,,TT__MMAAXX,,22,,5588,,1166))==>>(\n@,T_MAX,,22**5588**1166))\nx= =TiTmiemDeiDsitsrtirbiubutteedd((DeDennssee((112288,,aaccttiivvaattiioonn==''rreelluu''))))((xx)) ##(@(,@T,_TM_AMAXX,,22**5588**1166))==>>(\n@,T_MAX,,112288))\nx= =TiTmiemDeiDsitsrtirbibuutteedd((DDrrooppoouutt((ff__ddrrooppoouutt__rraattiioo))))((xx))\nx= =TiTmiemDeiDsitsrtiribbuutteedd((DDeennssee((6644,,aaccttiivvaattiioonn==''rreelluu''))))(x) #(@(,@T,_TM_MAAXX,,112288))==>>((@@,,\nT_MAX,,6644))\nx = GRU(n_gruu__hhiiddddeenn__uunniitsts,,rreetturunr_ns_esqeuqeunecnecse=sF=aFlasles)e()x()x) #((@@,,TT__MMAAXX,,6644))==>>((@@,,664)\nx= =DrDoroppoouutt((ff__ddrrooppoouutt__rraattiioo))((xx))\nmodel_output  = Dense(n_claassss, aaccttiivvaattiioonn==''ssooff ttmmaaxx'',,nnaamme==''nnaammee_model_output ')(\nx)#(#@,(6@4,)6=4)>=(>@(,@n,_nc_lclaassss))\n# Model compiling\nmodel = Model(inputs=model_input , outputs=model_output)\nmmodel.ccoompile(ooppttiimmizer==kkeerraas..ooppttiimmiizzeerrs..RRMMSSpprroopp((Ilrr==ff__lleeaarrnniinngg__rraattee)),,\nloss='categorical_crossentropy'',,\nmetrics =['accuracy ']\n))\nreturn model\n66..33 AAdvdevresrasrairaiall LLeeaarrnniinngg\nExxcceepptt for tthhee bbaassicicn enueuraral ln entewtwoorrkkcompponoennetnst,ss,osmoem heighhi-glhe-vlevl enl entewtowrko rakracrhcihteitcetcutruerse saallssoo pllay\nessennttiiall roolees  ininw wirreelleessss esennssiinngg. S Simimillaarrt otoc ocmomputterr visioon taasks, wirireelleessss senssiingg aallsso suffffer\nffrom ddoommaiani nmimsaislailgignmnemnte nptrporbolbemle.mWi.rWeliersesle ssigsniganlsa lscacna nbeb erereffllected bytthee surrounnddiinngg oobbjjeecctts\nduurriingg pprrooppaaggataitioonn aannd dwiwlill lbbee ffllooodedd witithh ttargett-irrrreelelevvaanntts isgingnaallc ocmompponenttss. TThe sensing\nsysstem ttrraiineedd in one deplloyymmenetn tenevnivriornomnemnte ncatnc ahnarhdalryd lbye baeppalpipeldi edirdeicretclytl yinin ooththere rsseettttings\nwiitthhoouut taaddaapptattaitioonn. . Soomme ewowrkosr[k1s0[]1 0tr]yt rtyo toadaodpot patdavdervsearrsiaarlia lelearanrinnign gtetechcnhinqiuqeuse stot otataccklkele tthhiis\nprrobbllem aannd daacchhieievve epprroommisisnign gpeprefrofromramnacen.c eT.hTihs is escetcitoionn wwilill give aann eexxamppllee of hhow tto applly\nthis tteecchhniquee in wiireless sseensing taasks. Sppeecciiffiicallyy,,w wee bbuuilldda ag egesstuturerer erceocoggnniittioionns ysysstetemm wwiith\nWi-iF-iF,i,sisimmilialarr tto thhat iinnS Seecc..66.1.1. .WW e try ttoo aacchhiieevvee ccoonnssiisstetnenttp eprefrofromrmaannce aacrooss  ddiifffefreernetnth uhmumaan\nllocaattionss andd orriienttations. TThe netwoorrkk aarrcchhititeecctturree is sshhoownn iin Fig. 133..\nWWe enonwo winitnrtordoudcuec ethteh eimimplpelmeemnteanttiaotnio ncocdoed ieni ndedteatialil..\nIIn the Widiadra3r.30. 0ddataatsaeste t[[2255],], we eccoollleecctt gesstturree daattaa whehne nthteh eusuesresr s tsatnadn data tdidfifffeerreenntt llocaattionss..\nAss diiscussed inn SSeec. 4.33,,h uhumman loocatiioonns  hhaavve ssigignniififciacnatntim ipmapcatcto nont htehDe FDSFSm meeaassuurreemmeennttss.. TTo\nmititiigaattee this imimpactt, wee ttrreaatt hummana nlolocactaitoionsn saas sddiifffferent ddomaainins saannd dbbuuilildd aann addvveerrssaaririaall leeaarning\nneettwworokr ktoto rreeccoognginziez eggesetsuturerse siirrrresspeeccttiivee of ddomaianins.s . In thhe pprogram,w,ew feifirsrts tlloadd daattaa,,llabbeells,\n16@16*16*26 16@8*8*26\n928*(T-4)\n6*121*T 256 128\nn_class\n16@5*3*6 2*2*2\n3D Conv Max Pooling Flatten FC FC Softmax\n16@4*116 16@2*58 1856\n128\n6*121\n64\n16@3*6 2*2\nt1\n2D Conv Max Pooling Flatten FC FC\nGRU\n16@4*116 16@2*58 1856\n128\n6*121\n64\n16@3*6 2*2\nt2 64\n2D Conv Max Pooling Flatten FC FC n_class\nGRU\nSoftmax\n16@4*116 16@2*58 1856 GRU\n128\n6*121\n64\n16@3*6 2*2\ntn\n2D Conv Max Pooling Flatten FC FC\n330 ZZhheenngg YYaanngg,,YYii ZZhhaanngg,, GGuuooxxuuaann CChhii,, aanndd GGuuiiddoonngg ZZhhaanngg\n一 LLaabbeell \nPrreeddiiccttioon\n64 664\n332 nn__ccllasss\n6*121*TT FFC FC Softmax\nCNN+RNN\n664 664一332 一nn__ddoommaaiinn\nFC FC Softmax\nDoommaaiin \nDDiissccrriimiinaattorr\nFFiigg.. 1133..AAddvevresrasrairaial l lleeaarrnniinngg nneettwwoorkrk aarrcchhititeeccttuurree..\nandd ddoommaianisn sfrformo mthteh edadtatsaeste tanadn dspslpiltit them iinnttoo train aandS tEeesNt..B oBoththl albaeblela nadndd odmomainn aarree eennccooded\ninto thhe oone-hott foormmaatt.. x4\n# Load data\ndata ,lalabbeell,,dodmoamiani n= =lolaoda_dd_adattaa((ddaattaa__ddiirr))\nprint('\\\\nnLLooaadeddedd adtaatsaesteotf o'f'++ ssttrr(l(albaeble.s.hsahpea[p0e][)0]+)+''sampplleess,,each  siizzeedd'++ ssttrr\n(data [0,:,::,,::,,::]]..sshhapaep)e)+ ''\\\\nn''))\n## SSpplliitt ttrraaiin aannd tteest\n[data_trraaiinn,, data_teesstt,,llabel_traaiinn,,llabel_tesstt,,ddoomain_traaiinn,,ddoomain_tesstt]]==\ntrain_test__sspplliitt((ddaattaa,,label ,ddoommaaiinn,,tetsets_ts_isziez=ef=rfarcatcitoinon__ffoorr__tteesstt))\nprint('\\nnTTrraaiinn onon' ++ ssttr(label_ttrraaiinn..sshhapaep[e0[]0)])++ ' sampleess\\\\nn''+\\\n'Test  onn''+ +stsrtr((llaabbeell__tteest.shape [0]]))++' 'sasmapmplleess\\\\nn''))\n# One -hot encoding for train data\nlabel_train = onehot_encoding(labell__ttrraaiinn,,NN__MMOOTTIIOONN))\ndomain_train = onehot_encoding(domainn__ttrraaiinn,,NN__LLOOCCAATTIIOONN))\nAAftfteerr loadiing andd fforrmataitinnggdadta,ta ,wew ebubiultil ttthhee nneettwworokr kanadn dtrtarianinede ditit from ssccrraattch.. Thee trainninng\nddaattaa,,llaabbeell,,aanndd ddoomamian inaraer epapsassesde dtot otthhee AAPIP Iffuunnctcitoionn ffiitt forttrraaiiniing..\n# TTrraain MMooddeell\nmodel  =  buiilldd__mmooddele(li(nipnuptu_ts_hsahpaep=e(=T_(MTA_XM,AX6,,6,112211,,1),nn__ccllaassss=N_MOTIONN, nn__ddoomain=\nN__LLOOCCAATTIIOONN))\nmodel.summary ()\nmode1l.fit({'name_model_iinnppuutt''::ddaattaa__ttrrain },{'name_model_output_laabbeell''::llaabbeell__train\n,'n'anmaem_em_mooddeell__oouuttppuutt__ddomain ':dodmoamaiinn__ttrraaiinn}},,\nbatch_size=nn_batch_size,,\nepochs=n_epochs,,\nverbose==11,,\nvalidation_split =0.11,,sshhuuffffllee==TTrruuee))\nAAfftteerr tthhee ttrraaiinniinngg pprroocceessss fifninisihsheess, ,w weee vevaaluluaatteet htehen entewtwoorrkk wwiitthh tthhee tteesstts asmampplleess..NNoottee tthhaatt tthhee\naaddvveerrssaarriiaall nneettwwoorrkk hhaass bbootthh llaabbeell aanndd ddoommaaiinn pprreeddiiccttiioonn oouuttppuuttss..WWe eonolnyl yusues etthhee llaabbeell oouuttppuutt\nfor accuracy evaalluaattiion..\n# TTeessttiinngg......\nprint('Testing ...')\nttaannhh\nCCoommpplleexx  FFCC\nttaannhh\nCCoommpplleexx  FFCC\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 331\n[label_test_pred ,_] = model.predict(data_test)\nlabel_teesstt__pprreedd ==n pn.pa.ragrmgamxa(xl(albaelb_etle_stte_sptr_epdr,eda,xaisxi=s -=1-)1)++ 1\n# CCoonnffuusion MMaattrriixx\ncm = confusion_matrix(label__tteesstt,,llaabbeell__tteesstt__pred)\nprint((ccmm))\ncm = cm.astype('float ')/cm.sum(axiss=11))[[::,,nnpp..nneewwaaxxiis]]\ncm = np.around(cm , ddeecciimmaallss==22)\nprint((ccmm))\n# AAccccuurraaccyy\ntest_accuracy = np.sum(labell__tteesstt ==== llaabbeell__tteesstt__pprreedd))/((lalabbeell__tteesstt..sshhaappee[[00]]))\nprint(test_accuracy))\nDiifffferentt frroomm thatt inn SSeec. 6.11, w we llooaadd ddaataa,,laabbel,,and dommaiani ninin tthhee llooaadd__ddaata fuunction. TThe\ndoommaiani nisis deeffiinedd as thhe llooccaattioionno offt hteheh uhmuman, whihcichh iiss embbedededde dini nththe effii le nnamee..\ndef llooad_data((ppaatthh__ttoo__ddaattaa))::\ngglobal T_MAX\ndata = [[]]\nlabel  ==[[]\ndomainn ==[[]\nfor data_rooott, ddaattaa__ddiirs,,dadtaat_af_iflielse sini nosos..wwaallkk((ppaatthh__ttoo__ddaattaa))::\nfor data_file_name in data_files:\nfile_path = os.path.jjoin((ddaattaa_root,,ddaattaa__ffiillee__nnaammee))\ntry:\ndata__11== scio.loadmmaatt((ffiillee_p_aptaht)h[)'[d'odpopplpelr_esrp_escptercutmr'u]m']## [[66,,1121,T\n]\nlabel_1 = int(ddaatta_file_name..sspplliitt((''--''))[[11]]))\nlocation_1 = int(data_file_name.split('-'')[[22])\norientation_1 = int(ddaata_file_name..sspplliit((''--''))[[33]]))\nrepetition_1 = int(ddaattaa__ffile_name..sspplliitt((''--''))[[44]]))\n# Downsample\ndata_1 = data_1 [:,,::,,00::::1100]]\n# Select Motion\nif(l(albaeblel__11 nnoott iinn AALLL__MMOOTTIIOONN))::\ncontinue\n# Normalization\ndata_normed_1 = nnoorrmmaalliizzee__ddaattaa((ddaattaa__11))\n# Update TT_MAX\nif T_MAX< <npnp..aarrraayy((ddaattaa__11))..sshhaappee[[22]]::\nTT__MMAAX == nnpp..aarrrraay((ddaattaa_1))..sshhaape[[22]\nexcept EExxcceeppttiioonn::\ncontinue\n## SSave List\nddaata..aappppeend((ddaattaa__nnoorrmmeedd_1..ttoolliisstt(())))\nlabel.append(llaabbeell__11))\nddoommaain..aappppeenndd((llooccaattiioonn__11))\n# Zero -ppadding\ndata = zero_paddingg(daattaa,,TT__MMAAX)\n332 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n# SSwwap aaxxeess\ndata  == nnpp..sswwapaapxaexse(sn(pn.ps.waspwaxpeasx(edsa(tad,at1a,,13,)3,),22,,3) # [#N,[6N,61,212,1T,_TM_AMXA]X ]==>>[[NN,,\nT_MAX ,6,,112211]]\ndata = np.expand_dims(dattaa, aaxxiiss==--11)) ## [[NN,,TT__MMAX,,66,,112211]]==>>[[NN,,\nT_MAX ,6,121,,11]]\n# CConvert llabel and ddomain to nndarray\nlabel = np.array(label)\ndomain = np.array(ddoommaain))\n# data(ndarrrraayy))::[N,T_MAXX,66,,112211,,11]],,labell((nnddaarrraayy))::[N,],,ddoommain(ndarrayy))::[[NN\n,]\nreturn  ddaattaa,,label , ddoommaaiinn\nToo deeffiine thhe nnetwoorrkk,, wee uussee a CNNN Nlalyaeyre ranadn dana nRNRNN lNayleary ears atshteh efefaetautruer eeexxtrtraaccttoorr,, whhiicchh iis\nsimiillar too tthhaatti ninS eSce.c6.6.2..2I.nInt hteheg egsetsutruerer erceocgongniziezrera nadndd odommain dissccrriimminator, wee uussee ttwwo offuulllyy--\nconnnnecetceted dllaayyeerrss aanndd aann oouutptputu tllaayyeerr accttivated by softmax ffuunnctiioonn,,reespectivvelyy..WWee uussee cattegoorriicall\ncross-entropyy loss ffoorrb bootthhl albaeblelp rperdeidcitciotnioann adnd odmomaaininp prereddicitcitoinono uotuptuputst.sT.Thhe ddoomaaiinn prreeddiiccttion\nlloossss iissw weeiigghhtteedd wwiitthh lloossss__wweeiigghhtt__ddoommaaiinn aanndd ssuubbttrraacctteedd ffrroomm ththe ellaabbele lpprreeddicicttiioonn lloossss..\ndef build_model(inppuutt__sshhaappee,, n_class ,nn__ddoommaaiinn))::\nmmodel_input = Input(shappee==iinnppuutt__sshhaappee,, dtype='float32 ',nnaammee==''nnaammee__mmooddeell__iinnput\n') #(@#,T(_@M,TA_XM,A6X ,61,2112,1,11))\n# CNN+RNN+Adversarial\nx = TTimeDistributed(Conv2D (16, kernel_size =(3,6),activation='relu',data_format=\n'channels_last ',\\\niinnppuutt_shape==iinnppuutt__sshhaappe))))((mmooddeell__iinnppuutt)) #((@@,,TT__MMAAXX,,66,,112211,,11))==>>(\n@,T_MAX,,44,,111166,,1166))\nx = TimeDiissttrriibbuutteedd((MMaaxPxoPoloilnign2gD2(Dp(opoolo_ls_isziez=(e2=,(2),)2)()x))(x)##(@(,@T,_TM_MAAXX,,44,,11166,,1166))\n=>(@,T_MAX,,22,,5588,,1166))\nx= =TiTmiemDeiDsitstrriibbuutteedd((FFllaattteenn(())))((xx)) #(@(,@T,_T_MMAAXX,,22,,5588,,1166))==>>(\n@,T_MAX,,22**5588**1166))\nx= =TiTmiemDeiDsitsrtirbiubutteedd((DeDennssee((112288,,aaccttiivvaattiioonn==''rreelluu''))))((xx)) ##(e(,@T,_TM_AMAXX,,22**5588**1166))==>>(\n@,T_MAX,,112288))\nx= =TiTmiemDeiDsitsrtirbibuutteedd((DDrrooppoouutt((ff__ddrrooppoouutt__rraattiioo))))((xx))\nx= =TiTmiemDeDiissttrriibbuutteedd((DDeennssee((6644,,aaccttiivvaattiioonn==''rreellu'')))(x) ##(@(,@T,_TM_MAAXX,,112288))==>>((@@,,\nT_MAX,,6644))\nx = GRU(n_gruu__hhiiddddeenn__uunniitsts,,rreetturunr_ns_esqeuqeunecnecse=sF=aFlasles)e()x()x) #((@@,,TT__MMAAXX,,6644))==>>((@@,,664)\nxx_feat = DDrropout(ff__ddrroopout_ratio)(x)\n# LLabel pprrediction part\nx_1 = Dense(64, aaccttiivvaattiioonn==''rreelluu''))((xx__ffeeaatt)) #(@(@,,6644))==>>((@@,,6644)\nx_1 = Dense(32, aaccttiivvaattiioonn==''rreellu'')(x_1) ##(@(,@6,46)4)==>>((@@,,3322))\nmodel_output_laabbeell == DDeennssee((nn__ccllaasss,,activation='softtmmaaxx'',,nnaamme==''\nname_model_output_label'')(xx_1)) #(@(,@3,232))==>>((@@,,nn__ccllaassss))\n# Domain prediction part\nx_2 = Dense(64, aaccttiivvaattiioonn==''rreelluu''))((xx__ffeeaatt)) #(@(,@6,644))==>>((@@,,6644))\nx_2== DDeennssee((3322,,acatcitviavtatiioonn==''rreelluu''))((xx_2) ##(@(,@6,46)4)==>>((@@,,3322))\nmmodel_output_domain  =  Deennssee((nn__ddoommaaiinn,, activation='softmaxx',,nnaammee==''\nname_moddeell__oouuttpputu_td_odmoamiani'n)'()x(_x2_)2)##(@(,@3,23)2=)>=(>@(,@n,_n_ddoommaaiinn))\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 333\nmodel = Model(inputs=model_input , outputs =[mmooddel_output_label,,\nmodel_output_domain]])\nmodel.compile(optimizer=keras.optimizers.RMSprop(Ilr=f_learning_rate),\nloss  = {{''nnaammee__mmooddeell__oouuttppuutt__llaabbel''::ccuusstom_loss_label (), '\nname_model_output_domain ':ccuussttoomm__lloossss__ddoommaaiinn(())}},,\nloss_weights ={'name_model_output_label ':1, ''nnaammee__mmooddeell__oouuttppuutt__ddoommaaiinn''\n:-1* loss_weight_domain}},,\nmmeettrrics ={'name_modell__oouuttppuutt__llaabeble'l:'':a'cacucruarcayc'y,','\nname_model_output_domain ':'accuracy '}\n))\nreturn model\nTThhe epprer-ed-edfeifinnede dcucsutsotmo_ml_olsoss_sl_albaeble laannd dcucsutsotmom__lloossss__ddoommaaiinn aarree ccaatteeggoorriiccaall ccrroosssseennttrrooppyy lloosssseess ffoorr\nbootthh labell ppredictiioonn aannd ddomaainin pprreeddicicttiionn..\nddeeff ccuussttoomm__lloossss__llaabbeell(())::\ndef lossfn(y_ttrruuee,,yy__pprreed)):\nmmyloss_batchh ==--11*K*.sKu.ms(umy(_yt_rtureu*eK*.Kl.olgo(gy(_yp_rpreedd++KK..eeppssiillon ()),axaxiiss==--11,,\nkeepdims=False)\nmyloss  =  K.meaann((mmyylloossss__bbaattcchh,,axis=-1, kkeeeppddiimmss==FFaallssee))\nreturn myloss\nreturn lossfn\ndef ccuussttoomm__lloossss__ddoommaaiinn(())::\ndef lossfn(y_truee, yy__pprreedd))::\nmyloss_baattcchh ==--1*K*.Ks.usmu(my(_yt_rtureu*eK*.Kl.olgo(g(yy__pprreedd++KK..eeppssilon ()), aaxxiiss==--11,,\nkeepdims=FFaallsse))\nmmyloss = K.mean(mylloossss__bbaattcchh,, axis=-1,kkeeeppddiimmss==FFaallssee))\nreturn myloss\nreturn lossfn\n6.44 CCoommplpelxe-xv-vaalluueedd Neeuurraall NNetwwork\nIInn tthhiiss sseecctitoinon, ,wwee wwiillllp preresesenntta am moorreec ocommpplliiccaatteedd wwiirreelleesssss esnesnisnigngt atsakskw iwtihthd edeepeple laernarinnign.gM.Maannyy\nwiirreelless sseennsinngg aappproachess empploloyy FFaasstt Fouurriier Transform(F(FTF)To)n oan taitmiem seesreireise sooff RFF ddaattaa to\nobbttaaiin timmee--ffrequueenncyc yssppecetcrtorogrgarmasm osfo hfuhmuanm acntiavcititviietsie. s.FFTF Tsusfuffferesr sffrroomm ererorrosr sdduue ettoo aann eeffffect\nknnoowwn nasa sleleaakkagaeg,e ,wwhehne nthteh eblbolcokc kofo fddataata iis nott perioodicc (the moosstt commomno cnascea sieni nprparcatcitciec)e,),\nwwhihcihc hrerseuslutlsts iinn aa ssmmeeaarreedd ssppeectcrtruum mofo fthteh eoroirgigininala lssiiggnnaall aanndd ffuurrtthheerr lleeaaddss ttoo mmiisslleeaaddiinngg ddaattaa\nrepresenttatioon foorr lelaeranrninigng-b-baasseedds esnenssiningg..CClaassssiiccaalla paprporaoacchheessr erdeduucceel elaekaakgageeb byyw winnddowiingg,,\nwwhihcihc hcacnanonto etleilmiminiantaet elelaekaakgaeg enetnitrierleyl.yC. oCnosindseidrienrgin tgheth seisginginfificcanatn tffiittinng ccaappabiliittyyo offd edepepnneurall\nneettwoorkrsk,sw, ew ecacna ndedseisging na assiiggnnaalpl rporcoecsessisning gnentewtowrokr ktot oleleaarrnn aann ooppttiimala lffunnccttiion to mmiinimiizzee or\nneeaarrlly eliimminnatee ththeel elaekaakgaegea nadnde nehnhaannccee thtehes psepcetcrturmumss,,wwhiich wee call  thteheS iSginganlalE nEhnahnancceemment\nNeettwwoorkrk ((SENN))..\nTThhe essiiggnnaall pprroocceessssiinngg nneettwwoorkrk ttaakkeess aass iinnppuutt aa ssppeeccttrrooggrraamm ttrraannssffoorrmmeedd ffrroomm wwirierleelessss ssiiggnnaallss\nvviiaa SSTTFFTT,, rreemmoovvese stthhee ssppeeccttrraall lleeaakkaaggee iinn tthhee ssppeeccttrrooggrraamm,, aanndd rreeccoovveerrss tthhee uunnddeerrllyyiinngg aaccttuuaall\nfrequenccyy commpopnoennetns.ts .FFigig..116 6sshhoowws sththe ettrraaiining process oof  ththeen entewtwoorrkk..As shownn iin the uppeerr\npaarrt oof  FFigig. .1166,,wwe raanndomlyly ggeenneerraattee ideal ssppeeccttrruumms wwiith 11 toto5 5f refqreuqeunecnycyc ocmompponentts,  wwhose\namplpiltituuddees,sp, hpahsaese,s ,aannd dfrfreeqqueunecniceise saarere uunnififoorrmmlyl ydrdarwanw fnrofrmo mthetihre irarnagnegs eosfo finintetreerestst.. Theenn,, the\niideaall spectrum iis conveerrttedd to thhe lleeaakkeedd ssppectrruum folloowiingg thee procceessss in tthhee ffoollolwowiinngg eeqquatioon\ntto simmullate tthhee wwinndowiinngg eeffffect  aanndd rraannddoomm complpelexx nnooisiseess::\nSŝ==AAs,sn+·n, ((34)\n16@16*16*26 16@8*8*26\n928*(T-4)\n6*121*T 256 128\nn_class\n16@5*3*6 2*2*2\n3D Conv Max Pooling Flatten FC FC Softmax\n16@4*116 16@2*58 1856\n128\n6*121\n64\n16@3*6 2*2\nt1\n2D Conv Max Pooling Flatten FC FC\nGRU\n16@4*116 16@2*58 1856\n128\n6*121\n64\n16@3*6 2*2\nt2 64\n2D Conv Max Pooling Flatten FC FC n_class\nGRU\nSoftmax\n16@4*116 16@2*58 1856 GRU\n128\n6*121\n64\n16@3*6 2*2\ntn\n2D Conv Max Pooling Flatten FC FC\n334 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nLabel \nPrediction\n64 b64\nx wx 32\nn_class\n6*121*T w\nFC FC Softmax\nx'=σ∑wx+b)\nCNN+RNN ((aa))\n(b?,b?)\nx 64 64\ny w?x w?y x'\nw? 团 32\n② n_domain\nRReeaall Ilmmag x'=a(Z(w?x-w?y)+b?)\nFC yF=Ca(Z(w?yS+owftzmx)a+xb?)\nLd\nw? Domain \nWzx W?y -wzy wzx Discriminator\n((b)\nFig. 1 414. .C Coommpaarrison betweeeenn(a(a) ) real-vvaaluueedd aannd((b)) ccoompplleexx--vallued neurronnss..\nSEN\nxx4\nComplex FC tanh Complex FC tanh\nFFiigg.. 1155..CCoommplpelxe-xv-avlauluede dnenueruarla lnneetwtworokr karacrhcihtieteccttuurree..\nwwhehreer essanadn dSaŝraer ethtehiediedaela laandn desetsitimmataetde dffrreeqquueencnyc yspspecetcrturum,mre, srepespcteicvteivleyl,yn, nrerperperseesnetnst stthhee aaddddititiive\nGGaauusssisaiann nnooisisee vveeccttoorr,,aanndd AA iiss tthhee ccoonnvvoolluuttiioonn mmaattrriixx ooff ththeew wiinnddoowwiinngg ffuunnccttiioonn iinn tthhee ffrereqquueennccyy\ndommaianin.. Thee8\uD835\uDC56 \uD835\uDC61cℎocloulmunm onfo Af Aisis::\nA1(j:,io) =FFFTTs(°\uD835\uDF1B) X∗1\uD835\uDEFF8(”\uD835\uDC56) . ((3355))\nwhhereeres \uD835\uDF1Brerperperseesnetnst stthhee wininddowoiwnign gfufnucntcitoion nooff FFFTT iin tiimme ddomaaiinn..\nThhee aammplpiltiutuded eofo ftthhee nnoiosisee ffolllowss aa Gaauussisaiann ddisisttrributtion andd its  pphhase foollolowws aa uunniffoorrmm\nddiissttrriibbuuttioinoni nin[002, 2c/\uD835\uDF0BT]h.eT hneetnweotrwk otrakkteask etsheth leelaekaekde dspsepcetcrtruumm asa siinnppuutt aanndd oouuttppuuttss tthhee eennhhaanncceedd\nssppeeccttrruumm cclloossee ttoo thtehei diedaelaoln eo.nTe.h uTsh,uws,ewme imniinmimiziezeth teh\uD835\uDC3Fe2!2lo lssos\uD835\uDC3Fs!==j|S|SEENNs°(ŝ )s−jis?| |d2udruirnign gtrtraaiinniinngg..\nDuuririnngg iinfference, tthhee spspeecctrturumms mmeasurred froom real-wworrld sscceennariooss aareren onromrmaliziezeddt oto[ 0>,011]/and\nfed inntoo tthheen neettwwork too oobbttaaiinn ththeee nenhhaannced ssppectrruum..\nWe ennowo wprpersesnetn thteh eimimplpelmeemnteanttiaotnio cnocdoe dieni ndedteatiali.l.\nDDififfferentffrom pprreevviiouuss sectioonns, wee use tthheeP PyyTToorcchh ppllaatftofromrmt otoim ipmlpelmemeennt t htehen entewtwoorrkk..PPyyTorch\npprroovviiddeess the iinntteerrfafcaecet otiom ipmlpelmemeennttc ucsutsotmom lalyaeyresr,sw, hwihcihchm amakkeesst hteheim ipmlpelmemeennttaattioinono fofth tehCe VCNVNNN\nmucuhc hmomroe recocnovnenvieennite.n tW. eW feifirsrtst imppoortr tssomme enneceecsesasrayr yppacakcakgaegse sasa sffoolllowss..\nimport os,sys ,math ,scipy ,imp\nimport numpy as np\nimport scipy.io as scio\nimport  torcchh,,ttoorrcchhvvision\nimport torch.nn as nnn\nfrom sscipy iimmppoort ssiiggnnaall\nttaannhh\nCCoommpplleexx  FFCC\nttaannhh\nCCoommpplleexx  FFCC\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 335\nDaatta Syntthesiis\nLeaked IIdeal\nAmplitude Spectrruumm Amplitude Sppeectruumm\nRandom\nGenerator\nFFrrequency ⋯⋯F\" Frrequency\nMSE Loss\nXLeaked Windowi -x for amplitude\nWindowing\n+N(,0) SEN\nXmeasured y\nMMeeaassuurred SEN Ennhhaanncceed \nx4\nInference S\nInput Amplitude Sppeeccttruumm\nwhn Complex FC tanh comph E tanh Amplitude SSppeeccttruumm Inference\nOutput\nFFrreeqquueennccyy FFrrequenccy\nMMoodedle l TTrraaiinniinngg\nFiig. 1166.  TThe traainninng pprocess of tthhee ssigignnaallp prroocceessssiinngg nneetwworrkk..\nf rroomm mmaatthh import  sqrt ,log ,pi\nfrom torch.fft import fft ,ifft\nffrroomm ttoorrcchh..nnnn..ffuunnccttiioonnaall iimmppoorrtt rreelluu,, ssooffttmmaaxx,,ccrroossss__eennttrrooppyy\nfrom torch import sigmoid ,tanh\nfrom torch.nn import MSELoss as MSE\nSoomme epapraarmaemteertse rasrea rdeedfeinfiende dini nthtihsi sppaartrt..\n# Definition\nwind_len = 125\nwind_type = 'gaussian '\nn_max_freq_component = 3\nAWGN_amp == 00..0011\nstr_modellnnaammee__pprreeffiixx =='./ SEN__RReessuullttss//SSEEN_N_''+  wind__ttyyppee + '_W'++ ssttrr((wwiinndd__lleen)\nstr_model_namee__pprreettrraaiinneedd == ssttrr__mmoodedlenlanmaem_ep_rperfeifxix++''__EE110000.pt'\nfeature_len = 121\npadded_len = 1000\ncrop_len = feature_len\nblur_matriixx__lleefftt == []\n# HHyperparameters\nn_begin_epoch = 1\nn_epoch = 10000\nn_itr_per_epoch = 500\nnn__bbaatt cchh__ssize  = 64\nn_test_size = 200\nf_learning_rate = 0.001\nTThhe epprorogrgarma mbebgeingsin wsiwthi ththteh efoflollolowwinign gcocdoed.e .WeW feifirsrtst geenneerraattee thee convvoolluuttiionn matartirixx ooff thhe\nwininddowoiwnign gfufnucntcitoino(nEq(En.q3n5.)3w5i)thw itthe thpreep-rde-fdienfiedn efdunfuctnicotnio ngegneenreartaet_e_bblluurr__mmatrix_coommpplleexx, ,wwhich\nwiilll  bbee initnrtordouducceedds hsohorrtltyl.yT.hTheennw we ddeefifnineet hteheS ESNENm moodel  aanndd mmovee ittt otot htehGeGPPU processor wiith\ntthhee AAPPI Iffuunnccttiioonn ccuuddaa..AAftfteerr tthhee mmoodedle lddeeffiinniittiioonn,,  wwee ttrraaiinn ththeem mooddeell wwiitthh ssyynntthheettiicc ssppeeccttrrooggrraammss,,\nduurriingg whhicichh pprroocceesss we essaavvee tthee traainneed mmoddeell every 500 eepochss. TThe trraainineedd aanndd ssaavveedd mmodeell\nccaann bbee ddiirreeccttllyy loloaaddeedd aanndd uusseedd ttooe nenhhaannccee ssppeeccttrrooggrraammss..\nAAAAAAmmmmmmpppppplllllliiiiiittttttuuuuuuddddddeeeeee\ntttaaannnhhh\nCCCooommmpppllleeexxx   FFFCCC\ntttaaannnhhh\nCCCooommmpppllleeexxx   FFFCCC\nAAAAAAmmmmmmpppppplllllliiiiiittttttuuuuuuddddddeeeeee\nAAAAAmmmmmpppppllllliiiiitttttuuuuudddddeeeee AAAAAmmmmmpppppllllliiiiitttttuuuuudddddeeeee\n336 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\nif __name____====\"_\"_m_amaiinn___\"\"::\n# GGeenneerraate bblluurr mmaattrriixx\nblur_matrix_right = generate_blur_matrix_compleexx(wind_ttyyppee==wiinndd__ttyyppee,,wwiinndd__lleenn\n=wind_len ,ppaadddeedd__lleenn==ppaaddded_len ,crcoropp__lleenn==ccrroopp__lleenn))\n# DDeeffiinne mmooddeell\nprint('Model bbuuiillddiinngg......''))\nmodel = SEN(feature_len==ffeeaattuurree__lleenn))\nmodel.ccuuddaa(())\n# TTrraaiinn mmooddeell\nprint('Model training....''))\ntrain(model=moddeell,,bblluurr__mmaatrix_right=blur_matriixx__rriigghhtt,,ffeeaattuure_len=\nfeature_lenn, nn__eeppoocchh==nn__epoch ,n_ni_tirtr__ppeerr__eeppoocchh==nn__iittr_per_epoch , nn__bbaattcchh__ssiizze==\nn_batch_size , ooppttiimmiizzeerr==ttoorrcchh..oopptim.RMSprop(model.parameetteerrss(()),,Ilrr==\nf_learning_rate))\nThhiiss ggeenerate_blur_mattrriixx__ccoommpplleexxf ufnunccttioionn isisu suesdedt otog geenneerraattee ththee ccoonnvolutioon maattrriix off the\nwwinindodwoiwngin fgunfuctnicotnio. nT.hTeh ceocroe riediedae abebheihnidn dthtihsi sffuuncntcitoionn iiss to eenumereartaet eaalll thhe ffrreeqquueencies, applly\ntthhee wwiinnddooww fufnucntcitoionn oon nththee ssiinnuussooiidd ssiiggnnaall,,aanndd ggeenneerraattee tthhee ccoorrrreessppoonnddiinngg ssppeeccttrruummss wwiitthh\nFFTT..AAftfeterr oobbttaaiiniingg the convoolluttion maattrriix, wwe eccaann bbrriiddggee tthee gapp beettweeen ntthhee iideeaall and the\nleaked spectrogramss wwitithh EEqqnn.3. 43.4I.nI notohthere rwworodrsd,sw,ew ceanc adnidreircetcltyl yggete ttthee leeaked spectroogramss byy\nmmulutltiippllyyiinngg tthhee iiddeeaa ssppeeccttroroggrraammss wwiitthh tthheeccoonnvvoolluuttiioonn mmaatrtriixx..\ndef generate_blur_matrixx__ccoommpplleexx((wwiinndd__ttyyppee,,wind_len =251, ppaadddeedd__lleenn==11000000,,\ncrop_len =121))::\n# GGeenerate mmaatrix uussed tto iinnttrrooduce ssppeec lleeaakkaage iinn ccoommpplleexx ddoommaaiinn\n# ret:((nnddaarrraayy..ccoommpplex128)[[ccrroopp__lleen,,crcorpo_pl_elenn]]((rrooww ffiirrsstt))\n## RRooww ffiirrst:eaecahc hrorwo wrerperperseesennttss tthhee ssppeeccttrruumm ooff oonnee ssiinnggllee ccaarrrriieer\n## SStteeps:cacrarireire/rw/iwnidnodowwiinngg//ppaadd//ffftt//ccrroopp//uunnwwrraapp//nnoorm\n# PPaarameters oofffloading\nfs = 1000\nn_f_bins = ccrroopp__lleenn\nf_high = int(nn__ff__bins//22))\nf_low  = --11 ** ff__hhigh\ninit__pphhaassee ==0\n# CCarrier\nt_= =npn.pa.raarnagngee((00,,wwiinndd__lleenn))..rreesshhaappee((11,,wwiinndd_len)/fs ## [[11,wind_lenn]]((00~\nwind_len/fs sseeccoonds))\nfreq =  np.araannggee((ff__llooww,,ff__hhigihg+h1+,11,)1.)r.ersehsahpaep(en(_nf_fb_ibnsin,s1),1)# [n_f__bbiinnss,,11]]((ff_low~\nf_high HHz))\nphasee == 22* pi  **ffrreq *tt__+ +iniinti_t_pphhaassee # [n_f_bins ,wwiind_len]\nsignal = np.exp(1j*pphhaasse)) # [n_f_bins ,wwiinndd__len\n]~[121,,225511]]\n# Windowing\nif wind_type  == ''ggaauussssiiaann'':\nwindow = scipy.signal.windows.gausssiiaann((wwiinndd__lleenn,,((wwiinndd_len--1)/ssqrt (8*log\n(2000)))),,sym=Trruuee))# #[w[iwnidnd__lleenn,,]\nelse::\nwindow = scipy.signal.get_window(wwind_type,, wwiinndd__lleen))\nsig_wind = signal * window # [n_f_bins,,wwiinndd__lleenn]]**[[wwiinndd__lleenn,,]]==[[nn__ff__bbiinnss,,\nwind_len]]~~[[121,,225511]]\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 337\n# Pad/FFT\nsig_wind_pad  = np.concatenatee((sigg__wwiinndd,,nnpp..zzeerrooss((((nn__ff__bins ,ppaadded_len -\nwind_len))),axis =1))# #[n[_nf__fb_ibnisn,sw,iwnidn_dl_elenn]]==>>[[nn__ff__bbiinnss,,ppaaddddeedd__len]\nsig_wind_pad_fffftt == nnpp..fffftt..fffftt((ssiigg__wwiinndd__ppaadd,,aaxis=-1) ## [[nn__ff__bbiinns,,ppaaddddeedd_len\n]~[121,,11000000]]\n# Crop\nn_freq__ppooss == ff_h_ihgihgh++11\nn_freq_neg = aabs((ff__llooww))\nsig_wind_pad_fft_crop  =  np.concatteennaattee((((ssiigg__wwiinndd__ppaadd__ffftt[[::,,::nn__ffrreeqq__ppooss]],,\\\nssiig_wind_pad_fft [:,-1* n_freq_nneegg:]])),,aaxxiiss==11)) # [nn_f_bins ,ccrop_len\n]~[121 ,121]\n# Unwrap\nn_shift = n_freq_nneegg\nssiigg__wwiinndd__ppaadd__fffftt__ccrroopp__uunnwwrraapp == nnpp..rroollll((ssiigg__wwiinndd__ppaadd__fffftt__ccrroopp,,sshhiifftt==nn__sshhiifftt,,\naxis =1)## [[nn__ff__bbiinnss,,ccrroopp__lleenn]]~~[[112211,,112211]\n# Norm((aammpp__mmaaxx==11))\n_sig_amp = np.abs(sig_wind_pad_fft_croopp__uunnwwrraapp))\n_sig_ang = np.angle(sig_wind_pad_fft_crop_unwrap))\n__mmaaxx == nnpp..ttiillee((__ssiigg__aammpp..mmaaxx((aaxxiiss==11,,kkeeeeppddiimmss==TTrruuee)),,((11,,ccrroopp__lleenn))))\n_min = np.tile(_sig_amp.min(axis=1,keepdimmss=Truuee)),,((11,,ccrroopp__lleenn))))\n_sig_amp_normm == __ssiigg__aammpp // _max\nsig_wind_pad_fft_crop_unwrap_norm = _sig_amp_norm * np.exp(1j*_sig_ang)\n# Return\nret = sig_wind_pad_fft_crop_unwrap_norm\nreturn ret\nThhiiss funccttiion is ttoog geenneerraatee oonne bbaatcchh ooffs pspeeccttrrooggrraammss inn bboth tthhe lleeaakkeedd ffoorrmm and the iddea ffoorrmm..\nTThhee pprroocecsess siiss tthhee ssaammee aass tthhaattiilllluussttrraatteedd iinn EEqqnn.. 3344..\ndef syn_one_batch_compplleexx((bblluurr__mmaattrriixx__rriigghtht,,feature_lenn, nn__bbaattcchh))::\n# Syn.HiHiFFii,,blbulrurrerde danadn dAWAGWNG Nsisgingnaall iinn ccoommpplleexx ddoomain\n# ret:((nnddaarrraayy..ccoommpplex128)[[e@,,ffeeaattuurree__llen]\n# blur_matrix_right: RRooww ffiirrsstt(e(aecahc hrorwo wrerperperseesnetntss tthhee ssppeeccttrruumm ooff oonnee ssiinnggle\ncarrierr))\n# Syn. xx[@[,@f,efaetautruree__lleenn]]\nx= =npn.pz.ezrerooss(((nn__bbaattcchh,,fefaetautruer_el_elne)n)*)*nnpp..eexxpp((11jj**00))\nfor i in range(nn__bbaattcchh))::\nnnuumm__carrier = iinnt((nnp..rraannddom..rraannddiint((0,,nn__mmaaxx__ffrreeq_component,,11))))\nidx_carrier = np.random.permutation(ffeeaature_len))[[:nnuumm__ccaarrrriieerr]]\nx[i,idx_carrierr]  == nnpp..rraannddoomm..rraandn(d1(,1n,unmu_mc_acrarrireire)r)** np.exp(1j*( 22**ppii**nnpp..\nrandom.randd((11,,nnuumm__ccaarrireire)r)-  ppii))))\n# Syn. x_blur [@,feature_len]\nx_blur  = xx@ @blbulru_rm_amtatrriixx__rriigghhtt\n# Syn.x_xt_itillddee [[@@,,ffeeaattuurree__lleenn]]\nx_tilde  =  x_blurr ++22**AAWWGGNN__aamp**(np.random.random(x_blurr..shhaappee))--00..55))**\\\nnp.exp(1j*( 22**ppii**nnp.random.randdoomm((xx__bblluurr..sshahpaep)e)-  ppii))))\nreturn  xx,,xx_blur ,xx__ttiillddee\n338 Zheenngg Yang, Yi ZZhhang, Guooxxuaann Chhii, and Guidong ZZhang\nThhiiss part  ddeemmonsstrateess ththeec ocdoedeo nonh ohwowt otoi mipmlpelmemeennttt hteheS ESNENn neetwtwoorrkk..Accorrdingttoo the APPII\nof PPyTorch,, bboth tthhee__init__ andd tthee forwarrdd inintetrefrafcaecsesh sohuoludldb ebiem ipmlpelmemeenntteedd wwitthh ccuussttoommized\nalgoritthhmss..IInn tthee __init__ffunnccttiionn,, wee ddeeffiineedd ffiive compplelexx--vvaalulueed dffuullly--connnnecetceted dllaayyeerrss.. In\nthe forward  ffuunnctiioonn, w we ddeefifinneedd tthhee nneettwworrk structure by conccaatteennaattiinngg tthee ffiive FFC layers aand\nspecciifying the innputt and ouuttppuut tllayeerrss..\nclass SSEENN((nnnn..MMoodduullee))::\ndef __init__(self , ffeeaattuurree__lleenn))::\nssuper(SEN ,sseellff))..___iinniitt____(()\nself.feature_len = ffeeaattuurree__lleen\nself.fc_1 = m_Linear(featuree__lleenn, ffeeaattuurree__lleenn))\nself.fc_2 == mm__LLiinneeaarr((ffeeature_len ,ffeeaattuurree__lleenn))\nself.fc_3 == mm__LLiinneeaarr((ffeeature_len ,ffeeaattuurree__lleenn))\nself.fc_4 == mm__LLiinneeaarr((ffeeature_len ,ffeeaattuurree__lleenn))\nself.fc_out = m_Linear(featurree__lleenn,,ffeeaattuurree__lleenn))\ndef forward(seellff,,xx))::\nh = xx #(#@,(@*,*2,,2,HH))\nhh == ttaannhh((sseellff..ffcc__11((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\nh = ttaanh(sseelf..ffcc_2((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\nh = ttaanh(sseelf..ffcc_3((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\nh = ttaanh(sseelf..ffcc_4((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\noutput = tanh(self.ffcc__oouutt((hh)))) #(@(,@*,,*2,,2H,H))==>>((@@,,**,,22,,HH))\nreturn output\nThhiiss m_Linear ccllaassssl elveevreargageesst htehei nitnetrefrafcaecoe foPfy PTyoTrocrhcht otod edfienfienteh ethceu sctuosmtoimziezdedc ocmomppleexx-vvaluued\nfullyy-connneecctteedd llayyeerr,, whhiicchh iis the immppllemmenetnataitoino nofo fththe ennetewtowrok rsktsrturcutcurtue rielillulustsrtraatteedd iin Fiig..1144..\nclass mm__LLiinneeaarr((nnnn..MMoodduullee))::\ndef __init__(self , size_in , ssiizzee__oouutt))::\nsuper ().__init__ ()\nself.size_iinn, sseellff..ssiizzee_out = size_in , ssiizzee__oouutt\n# CCrreation\nself.weights_real  = nn.Parameterr(torcchh..raannddnn((ssiizzee__iinn,,ssiizzee_out,, ddttype=\ntorch.float32))\nsseellff..wweeiigghhttss__iimmaagg == nnnn..PPaarraammeetteerr((ttoorrcchh..rraandnnd(ns(isziez_ei_ni,n,ssiizzee__oouutt,,ddttyyppee==\ntorch.float32))\nsself.bias = nn.Parameter(torrcchh..rraannddnn((22,,ssiize_out ,dtdytpyepe==totorrcchh..ffllooaatt3322))))\n# IInniittiiaalliizzaattiioonn\nnn.init.xavier_uniform_(self.weights__rreeaall, ggaaiinn==11))\nnn.init.xavier_uniform_(self.weights__iimmaagg, ggaaiinn==11))\nnn.init.zzeerros_((sseellff..bbiiaass))\ndef swap_real_imag(seellff,,xx))::\n# [[@,,**,,22,,HHoouutt]]\n## [real , iimmaag]=>=>[-[1-*1i*miamgag,, rreeaall]]\nh =xx ## [[@@,,**,,22,,HHoouutt]]\nhh = h.flipp((ddiimmss==[[-2-]2)])# #[@[,@*,*,,22,,HHoouutt] [real ,iimmaagg ]=>[[iimmaagg,,rreeal]\nhh == h.transposee((--22,,--11))# #[[@@,,**,,HHoouutt,,22]\nhh ==h*h t*ortocrhc.ht.etnesnosro(r[(-[1-,11,]1]))..ccuuddaa(()) ## [@,*,Houtt,22]][[iimag ,rereaall]]==>>[[--11**\nimag , rreeaall]]\nhh == h.transposee((--22,,--11))# #[[@@,,**,,22,,HHoouut]\nHaanndsd-so-no nWWireirleelses sSSeennssiinngg wiitth Wi-i-FFii::AA TTuuttoorriial 339\nreturn h\ndef forward(sellff, xx))::\n# x:[[@@,,**,,22,,HHiin]\nh = xx ## [[@@,,**,,22,,HHiinn]]\nh1 = torch.matmmuull((hh,,sseellf.weights_real) ## [[@@,,**,,22,,HHoouutt]]\nh2 = torch.matmul(h, self.weights_imagg) ## [[@@,,**,,22,,HHoouutt]]\nh2= =seslefl f.swap_rreeaall__iimmaagg((hh22)) ## [[@@,,*,,2,,HHoouut]]\nh== hh11 ++ hh2 ## [[@@,,*,,2,,HHoouut]]\nh = torch.add(h, sseellff..bbiiaass)) ## [[@@,,**,,22,,HHoouutt]]++[[22,,HoHuotu t]=>[@@,,**,,22,,\nHout]]\nreturn h\nTThhisis lloossss__function defifinnees  tthhee lloosssf ufunnccttioinon oofft hteheS SEENN netwoorkrk. . TThhe elolosss iiss deeffiined ass the\nEEuucclliideann diistance betwweeenn the iddea ssppectrruumm and the netwrrookk pprreeddiiccted spectruum.. Onnllyy the\namplpiltituuddee ooff the spectrumss aarree connssiideerreedd..\nddeef lloss_function(xx,,yy))::\n## x,y:[[@@,,**,,22,,H]\nx= =totrocrchh..lliinnaallgg..nnoorrmm((xx,,ddiim=--2)# #[@[@,*,*,,22,,HH]]==>>[[@@,,**,,HH]]\ny= =totrorcchh..lliinnaallgg..nnorm(y,dim=-2))##[@[,@*,,*2,,2H,]H]==>>[[@@,,**,,HH]]\n# MSE loss for Amp\nloss_recon  =  MSE(reducttiioonn==''mmeeaann''))((xx,,yy))\nrreturn loss_recon\nIInn tthhiiss ttrraaiinn fufunnccttioionn,,w wee imimpplleemmeennt ttthhee ttrraaiinniinngg pprroocceessss ooff SSEENN asa stthhaatt ddeessccrriibbeedd iinn FFiigg..1166..\nIn each epoocchh, , we eggeneenreartaet eanadn dtrtarainin tthhee nneettwworokr kwiwthit hmumltuilptlipe leitietrearatitioonnss..FoFro reaecahc hitieterraattiionn,,\nwee ggeennerearatete aa batch ofssyynntthheettiic spectrumss iin leeaakked foorrmmaatt. EEaach lleeaakkeedd ssppeeccttrruumm havee an idea\nssppeeccttrruumm asa sththe ellaabbeel.l.\ndef train(moddeell,,bblluur_matrix_riigghhtt,,ffeeaature_len ,nn__eeppoocchh,,n_ni_tirt_rp_eperr__eeppoocchh,,\nn_batch_size ,ooppttiimmiizzeerr))::\nfor i_epoch  in  range(n_beginn__eeppoocchh,,nn__eeppoocchh++11))::\nmodel.ttrraaiinn(())\ntotal_loss_thhiiss__eeppoocchh == 0\nfor i_itr in range(nn__iittrr__ppeerr__eeppoocchh))::\nx,_,_x,_txi_ltidled e= =sysny_no_noen_eb_abtacthc_hc_ocmompplleexx((bblluurr__mmaattrriixx__right=\nblur_matrix_right , feature_len=feature__lleenn, nn__bbaattcchh==nn__bbaattcchh__ssiizzee))\nxx= =cocmopmlpelxe_xa_rarrarya_yt_ot_ob_ibcihcahnanenle_lf_lfolaota_tt_etne nsor(x)\nxx__ttiilde == ccoommpplleexx__aarrrraayy__ttoo__bbiicchhaannnneell__ffllooaatt__ttensor((xx__ttiillddee))\nXx==X.xc.ucdudaa(())\nx_tilde = xx__ttiillddee..ccuuddaa(())\noptimizer.zero_grad ()\nyy == mmooddel((xx__ttiilde))\nlloss = loss_functioonn((xx,,yy))\nloss.backward ()\nooppttiimmiizzeer..sstteepp(())\ntotal_loss_this_epoch ++== lloossss..iitteemm(())\nif i_itr  %�100 === 00::\nprint('----------->> EEppoocchh::{}/{}  lossss::{{::..4f} [itr:{{}}//{{}}]]''..ffoorrmmat(\ni_epoch+11,,nn__epoch ,lloosss..iitteem()/ /n_n_bbaattcchh__size ,i_ii_ittrr++11,,\nn_itr_per_epoocchh)),,eenndd==''\\\\rr'')\n440 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n# VVaalidate\nmmoodel..eevvaal(())\nx,_,_x,_txi_ltdield e= =sysny_no_noen_eb_abtacthc_hc_ocmopmlpelxe(xb(lbulru_rm_amtartirxi_xr_irgighhtt==bblluurr__mmaattrriixx__rriigghht,,\nfeature_len=featuurree__lleenn,,nn__bbaattcchh==nn__bbaattch_size)\nXx= =cocmopmlpelxex__aarrraayy__ttoo__bbiicchhaannnneell__ffllooaatt__tteennssor((xx)\nx_tilde = complex_array_too__bbiicchhaannnneell__ffllooaatt__tteennssoorr((xx__ttiillddee))\nx== xx..ccuuddaa(())\nx_tilde  = xx__ttiillddee..ccuudda(()\ny= =momdodeell((xx__ttiillddee))\ntotal_valid_loss  =  losss__ffuunnccttiioonn((xx,, y)\npprint('==========>> EEppoocchh::{{}/{} Loss:{{::..44ff}}''..ffoorrmmat(i_epoch+1, nn__eeppoocchh,,\ntotaall__vavlaildi_dlo_slso)ss+)'+'''+ winndd__tytpyepe++'_'' + strr((wwiindn_dl_elne)n+)+''*'*2200))\nif  i__eeppoochch% P500 0=== 00::\ntorch.save(model ,ssttrr__mmooddeellnnaammee__pprreeffiixx++''__EE''++ssttrr((ii__eeppoocchh))++''..pptt''))\nThhiiss funccttiion connvveertrtss the complpelxe-xv-avlauleude dararraryasy stot oddouobulbel echcahnannenl erleraela-lv-avlauleude dararraryasy.s .TThihsi siis\nbeeccaauussee tthee GPPU Uonolny lysuspuppoprtosr ttshteh ecaclacluclualtaitioonns sooff real nnumbberesr.sW. eW ueseu sae aliltittlle trriicckkt otoi mimpplelmement\nthe complpelex-xv-valauluede dnentewtowrko rbkyb syespearpatriantgin tghteh ereraela laannd dimimagaignianrayr ypaprtasr tsinintot ottwwo oreraela laarrrraayyss..\ndef ccoommpplleexx__aarrrraayy__ttoo__bbiicchhaannneell__fflolaota_tt_etne nsor(xx))::\n## x:(n(dnadarrraayy..ccoommplex128) [[@@,,**,,HH]\n# ret:((tteennssoorr..ffloat32) [[@@,,**,,22,,HH]\nx= =x.xa.sasttyyppee((''ccoommpplleexx64 ')\nx_reall ==xx..rreal ##[@[,@,**,,HH]]\nx_imag  = xx..iimag # [@,*,H]\nret = np.stack((x_rreeaall,,xx__iimmaagg)),,aaxis=-2) ## [[@@,,**,,HH]]==>>[[@@,,*,,2,H]\nrreett == ttoorrcchh..tteenn sor(ret)\nreturn ret\nTThhisis funccttionccoonvnevretrst stthhee doouubblele chhaannnele lrreaall-valued arraays iinnttoocompplelexx--vvaalluueedd aarrraayyss..\nddeeff bbiicchhaannneell__ffllooaatt__tteenn sor_to_complex_array((xx))::\n# x:((tteennssoorr..ffloat32) [[@@,,**,,22,H]\n# ret:((nnddaarrrraayy..ccoomplex64) [[@@,,**,,HH]]\nx==x.xn.unmupmpyy(())\nx== nnpp..mmoovveeaaxis(x,-2,0) # #[@[,@*,,*2,,2H,]H]==>>[[22,,@@,,**,,HH]\nx_real  = xx[[00,,::]\nxx_imag =×x[1,:]\nret  = xx__rreal +11jj**xx__iimag\nreturn ret\nAAftfteerr ttrraaiinniinngg ththeeS ESENN nneettwwoorrkk wwiitthh ssuuffiffciiceinetneteppoocchhss,,wwee tteessttt htehep eprefrofromrmaannccee wwiitthhs pspeecctrtoroggrraammss\ncolllected ffrroomm Wi-i-FFii..\nFFiirst,,wee deffiinne  ssoomme parameetteerrs. Thhee SSTTFFTT wwinidnodwo widwtihd tihs is este ttto 125, andd the wiindooww ttyyppee iis\nsseett ttoo “ggaauussssiiaann”. T.Thhee ppaatthh ttoo tthhee pprree--ttrraaiinneedd mmoodedle lanadn dthteh eCSCI SfIifilele iiss sseelleecctteedd..\nW== 112255\nwind_type =''ggaauusssiiaann''\nstr_modell__nnaammee =='./ SENN__RReessuultlst/sS/ESNE_N'_'++ wwiindn_dt_ytpyepe+ +''__WW''+  sttrr((WW))+'_'_EE55000..pptt''\nfile_path_csii=='W'iWdiadra3r_3d_adtaat/a2/0210811813103/0/usueserr11//uusseerr11--11--11--11--11..mmaatt''\nTThhee pprrooggrraamm bebgeignisn swiwthit hloloadaidning gththe epprere--ttrraaiinneedd mmodoedle.l. TThheenn, , tthhee CCSSII ddaattaa iiss loloaaddeedd aanndd\nttrraannssffoorrmmede dtoto ssppeeccttrrooggrraamms swiwthit hthteh eprperdeedfeifinende dfufnucntcitoion ncscis_i_ttoo__ssppeecc..AAftfeterr tthhaatt,, tthhee ccoommpplleexx--\nvalluedd speeccttrogrramms saarree ttranssfformede dttoo ddoouublbele rreeaall-valued channnneel l tenssorrss and procceessssedd wiitth the\nSEENN mmodoeld.eTlh. eT hresruelstusl tasnadn tdhteh erarwa wspsepctercotgroragmrsa marsea rsetosrteodr eidn infifilleess..\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 441\nif __name____====\"_\"_m_amaiinn___\"\"::\n# LLoad ttrraaiinned mmooddeell\nprint('Loading model.....''))\nmmooddeell == ttoorrcchh .load(str_model_name))\nprint('Testing model ...')\nmodel.eval()\nwith torch.no_grad(()::\n# IImport raw spectrogram\ndata_1 == ccssii__ttoo__ssppeecc(())\n# EEnhance spectrogram\nxx_tilde  =  commpplleexx__aarrraay_yt_ot_ob_ibcihcahnannenle_lf_lofalto_ate_ntseonrs(odra(tdaa_t1a)_1)# [[66,,11221,T\n]=>[6,121,2,T]\nx_tilde =xx__ttiillddee..ppeerrmmuuttee((00,,33,,22,,11)) #[6[,61,21211,,22,,TT]]==>>[[66,,TT,,22,,112211]]\nyy == mmooddeell((xx__ttiillddee..ccuuddaa(())))..ccppu(()) #[6[,6T,T,,22,,112211]]\ny = bbiicchhaannel_float_tensor_to_complex_array(y) ## [[66,,TT,,11221]\nyy == nnpp..ttrraannssppoossee((yy,,((00,,22,,11)))) # [6,T,,112211]=>>[[66,,112211,,TT]]\nscio.saveemmaatt((''SSEENN__tteests_tx__xt_itlidled_ec_ocmopmlpelx_eWx'_W+'+s tsrt(rW()W)++'.mat', {{''xx__ttiilldde ':\ndataa__11}}))\nscio.saveemmaatt((''SSEENN__tetsets_ty__yc_ocmopmlpelxe_xW_'W+'+s tsrt(rW()W)++ '.mat',{{''yy''::yy}}))\nThhiiss funccttion fifirrssttt rtarnasnfsofromrmsst hteheC CSSIId adtaatain itnotsop sepcetrcotrgorgarmamssa nanddc rcorpopsst htehec ocnoncceerrnneedd frferqequueenncy\nrangee betweeeenn》[6−06600,/6H0z].H Tzh.eTnh,ietn ,uitnwurnawpsr atphset hferefrqeuqeunceyn cbyibnsin sanadn dpeprefroformrms snonromramlailziaztaitioonnss..\ndef ccssii__ttoo__ssppeecc(())::\ngglobal ffiillee__ppaatthh__ccssii\nglobal Ww\nssignal = scio.loadmat(file_path_csi)['csi_mmaatt'']]..ttrraannssppoossee(())## [[6,,TT]] ccoomplex\n# STFT\n_,spspeecc == SSTTFFT(signal , ffss==11000,ststrriiddee==11,,wiwnidn_dw_wiidd==WW,,dfdtf_tw_iwdid==110000,,\nwindow_type='gaussian ') ## [[66,,11000000,,TT]]jj\n# Crop\nspec_crop  =  npp..ccoonnccaatteennaattee(((ssppecec[:[:,:,6:16]1,],speecc[[::,,--6600::]])),, axis =1)## [[11,,1100000,,TT]]jj\n=>>[1,121,T]j\n# UUnnwrap\nsspec_crop_unwrraapp == nnpp..rroolll((sspepce_cc_rcorpo,p,shhiifftt==6600,,axis =1) ## [[11,,112211,,TT]]jj\n# Normalize\nspec_crop_unwrap_norm = normalize_data(spec_crop_unwrap) #[6[,61,12211,,TT]]\ncomplex\nif np.sum(np.isnan(ssppeecc__ccrroopp__uunnwwrraapp__nnoorrmm))))::\npprrint((''>>>>>>>>>>>>>>>>>> NNaaNN ddeetteecctteedd!!''))\nret = spec_crop_unwrap_norm\nreturn ret\nTThhiiss ffuunnccttiioonn ttrraannssffoorrmmss tthhee titmimeed doommaaiinn CCSSII ddaattaa initnotof rferqeuqeunecnycyd odmomaaiinn ssppeeccttrrooggrraammss wwiitthh\nthee APPI Iffunncctitioonn sscciippyy..ssiiggnnaall..ssttfftt..\ndef STFT(siiggnnaall,,fs=1,ssttrriiddee==11,wiwnidn_d_wwiidd==55,,dfdtf_tw_iwdi=d5=5,,wiwnidnodwo_wt_ytpyep=e'=g'aguausssiiaann''))::\nassert dft_wid >>== wwiinndd__wwid and wind_wid >>0 0anadn dstsrtirdied e<=< =wiwnindd__wwiidd aanndd ssttrriidde\n>00\\\\\nand isinstannccee((ssttrriidede,,int) aanndd iissiinstance(windd__wwiidd,, int)anandd iissiinnssttaance(\ndft_wwiidd,,intt))\\\nand  isiinnssttaancnec(ef(sf,s,iinntt))and  ffss >>0\nif window_type == 'gaussian ':\n42 Zhheenngg Yangg,,YYii ZZhang, GGuoxuan CChi, and GGuiddong ZZhang\n品导品 60\nFrequency/Hz 00 Frequency/Hz早吕\n0\n-20\n40\n60 60\n0250 500 750 1000 1250 1500 0250 500 750 1000 1250 1500\nTime/ms Time/ms\n(a) (b)\nFFiigg..1177.. IIlllluussttraratitoinono fofth tehsep sepcetrcotgrorgarmamo fofa pa upsuhsihnignga nadndp upulllinligngg egsetustruer. e(a.()aT)h eThme emaesausruerdeds psepcetcrtorgorgarmam aanndd\n(bb)  ththeee nehnhaanncceedd ssppeeccttrrooggrraamm frroomm thhe SSEN..\nwindow = scipy.signal.windows.gausssiiaann((wwiinndd__wwiidd,,((wwiinndd_wid--1)/ssqrt (8*log\n(200)), ssyymm==TTrruue))\nelif window_type == 'rect':\nwindow = np.ones((wind_wid ,))\nelse::\nwindow = scipy.signal.get_winddooww((wiinnddooww__ttyyppee,,wwiinndd__wwid)\nf_bins , t_binnss,  stftt__ssppeeccttrruumm == sscciippyy..ssiiggnnala.l.stsfttf(tx(=xs=isginganla,l,ffss==ffss,,wwiinnddow=\nwindow ,nnppeerrsseegg==wwiinndd_wid ,nonvoeverrllaapp==wwiinndd__wwid--sstride ,nfnfftt==ddfftt__wwiid,,\\\\\naxis=-1, ddeettrreenndd==FFaalse , return_onesiiddeedd==FFaallssee,, boundary='zerooss'',,ppaaddded=\nTrue))\nreturn f_bins , stft_spectrum\nTThhiiss ffuunnccttiioonn ssccaalleesst htehes psepcetcrtorgorgarmamsst oton onromrmaalliziezet htehve avluaeluseisn tiont[0o, 10]1.%\nddeeff nnoorrmmaalliizzee__ddaattaa((ddaattaa__11))::\n# mmax==11\n## ddaattaa((nnddaarray.complex)=>data_norm(ndarray.compleexx)::[[66,,112211,,TT]]==>>[[66,,1121,T]\ndata_1_abs = abs(ddaattaa__11))\ndata_1_max = data_1_abs.max(axis =(1,2),keepdims=True) ## [[66,,112211,,TT]]==>>[[6,,1,,1]\ndata_1_max_rep = np.tile(data_1_max ,(1, data_1_abs.shape[1], data_1_abs.shape\n[2])))# [#6,[16,,1],=1]>=[>6[,61,12211,,TT]\nddata_1_norm = data_1 // ddaattaa__11__mmaaxx__rep\nreturn  ddaattaa_1_norm\nFFiig.1177 demonosntsrtartaetess the rawanadn denehnahnacnecde sdpsepcetcrtorgorgarmasm osf opfupsuhsihngin ganadn dpuplulillning gggesetsuturreess..\nREFERREENNCCEESS\n[1] Heebbaa AAbbdedlenlnaassseerr,,MMouosutsatfaaf aYYoouussseeff,,aanndd KKhhalaeleddA AHaHrraarsr.a2s.02150.1W5i. gWesitg:eAs t:ubAiquubiitqouuitso uwisfwi-ifiba-bsaesde dgegsetsutruer erreeccooggnnititiion\nsysteemm. Inn PProrcoeceedeindgisnogfst hoefI EtEhEe INIFEOEEC OIMNF.OCOM\n[22]  JJ..CCapon. 1996699..HHigigh-hr-eressoolluuttion frreeqquueenncy-wwaveennuummbebre rssppeectctrruumm aannalaylyssiiss. PPrroocc..IEIEEE1(1996699))..\n[[33]] GGuuooxxuuaann CChih,i,JJiinnggaaoo XXuu,,JJiiaalliinnZ Zhhaanngg,,QQiiaann ZZhhaanngg,, QQiiaanngg MMaa,,aannd dZZhehnegn gYaYnagn.g2.022012.1L.oLcoatcaet,eT,eTlell,l, aanndd GGuuiiddee:: EEnnaabblliinngg\nPPuubblliic CCameerraas too NNaavviiggaatetetthheeP uPubblilci. cI.EIEEEET raTnrasancstaiocntisoonsM oonb iMleobCiolme pCuotminpgut(n2g012)1.).\n[4]  GGuoxuuaann Chhii, ZhheennggYaYnagn,gJ,iJningagoa oXXu,uC,hCehnesnhsuh uWuW,Jui,aJliailni nZZhahnagn,gJ,iJaiannzzhhee Liiang, andd Yunhhaaoo Liu. 2022. Wi-i-ddrroonnee::\nWWi-iF-Fii--baassed 6-DDoF Trackinng ffoorrIInnddooor  DDroonne FFlligihgthtC oCnotnrtorlo. lIn.IPnr oPcreoedceinegdsinogfst hoefA tChMe MACoMb iMSoybs.iSys\n[[55]] FFrraanncçooiiss CChhoolllleett eett aall..22001155..KKeerraas.s. hhttttppss::////ggiitthhuubb..ccoomm//ffcchhoolllleett//kkeerraass..\n[6] Daavviid LLDDoonnohooh.o2.020060.6C.oCmpormespsredss esdensseinnsgin.gIE. EIE ETErTanrasnacsatcitoinons soonn infoorrmmatioonnt htehoerdyan(2g0066))..\n[7] Daanniieell Haallperin, Wenejnujun nHHu,uA,nAmonlm SohleSth,eathnd,  aDnadviDda vWeidthWereatlhle.r2a0ll1.12.0 1T1o.olT oroel reealseea:s eG:aGthaethrienrign g80820.21.1 1nn ttrraces wiith\nchanneel sstattaetien fionrmfoartmioant.ioAnC.MACSMI GSCIOGCMOMM cocmomppuutteerrc ocmommmuunniciactaiotniornev ireewvi(2e0M11))..\n[[88]] DDaavivdid AA.H.iHlli.ll .22000099.. EElleeccttrroommagangenteitci cffiieellddss iinnccaavviittiieess:: ddeetteerrmmiinniisstticica nandds tsattaitsitisctailctahle othreieosr.ieJso.hJnohWn iWleiyle&y S&Soonns((22000099).).\n[99]] YYuuqiaann HHuu, Feng ZZhang, Chheennsshhuu WWu,uB,eBibeiebie iWWanagn,ga,nadn Kd.KJ. RJ.aRy aLyiLui.u2.022002.0A.WAiFWi-iBFais-Beda sePdasPsaisvseiv FeaFlall l Deetteecctioonn\nSSyyssttem..IIn Proocceedeidnignsgosf tohfe ItEhEeE ICEEAES SIPC.ASSP\nHaanndsd-so-no nWiWreirleelses sSSeennsisinngg wwitithh WWi-iF-Fi:i:AA TTuutotoririaall 443\n[10]  Weennjjun Jiaanngg,,CChenglinnM Miaaoo,,FFeenngglloonnggM Ma, Shuochao Yao, Yaqinng WWangg,,YYee Yuan,, HHongfei X Xuuee,,CChen SSoong, Xin\nMa,a,DDimiimtirtriioss Koutsonikkoolaass, ,WWenyaoXXu,ua, nadn dLLuu SSuu..22001188..TTowoawradrsd sEEnvnivriroonnmmenetn tIInnddeeppeennddeenntt Deevviice FFrreeeeH Huumman\nAccttivittyyR eRceocgongnitiotnio. nIn.IPnr oPcereodcienegdsionfgAs CoMf MACoMb iCMobmi.Com\n[11] Weennjjuunn JJianng, Hoonnggffeeii XXue,  CChheenngliinnM Miiaaoo, ,SShhiyiyaannggW Wang, Sen Linn,,Chongg Tiian, SrinnivvaassaannM Murali,iH,Haaoocchheenn HHu, Zhii\nSSuunn,,aanndd LLuu Su. 2020. TToowwaradrdss 3D Huummana nPoPsoes eCConosntsrtruuccttion UUsiinnggW Wifif.iI.nIPn roPcreoecdeinegdsinogfsth oefA CthMe MAoCbMi CMombi.Com\n[12]  ZZhippiinnggJ iJainagn, gT,oTmomH HLLuuan, Xincheng RRenn, Donggttao LLvv,,HHan HHao, Jinngg WWang, Kunn Zhaaoo,,WWeie i Xii, Yueshen Xu, and\nRRuui iLLii..22002211.. EElliimmiinnaattiinngg tthhee BBaarrrriieersr:sD: eDmemyyssttifiyfiynigngW Wii--FFiiB aBsaesbeabanndd DDeessiiggnn aanndd IInnttrorodduucciinnggtthhee PPiiccooSScceenneess WWii--FFii\nSenssiing Plaattffoormrm. IEEEE IInntterenrentetof oTfh iTnhgisnJgosuJronuarlna(2002211))..\n[13] Sameereara PPaalliipanaa,,DDavaivdi dRRojoajas,s,PiPyiyusuhs hAgArgarwaawl,a l,anadn dDiDrikr kPePsecshc.h2.021091.9 .FaFlallDlDeFeiF:i:UbUibqiuqiutiotuosu sFFalall Deettectioon UUsing\nCoommmomdoidtiyt yWWi-iF-Fii Deviceess..InInP rPorceoecdeiendgisnogfst hoefA CthMe IMACWM UITM.WUT\n[[1144]] NNeeaal l PPaattwwaarrii aanndd SSnneehhaa KK..KKaasseerraa..22000077..RoRboubsuts tLoLcoactaitoionn DDisisttiinnccttiioonn UUssiinngg TTeemmppoorraall LLiinnkk SSiiggnnaattuurreess. .InInP rPorcoeceedeidnignsgs\nof  thtehAe CAMCMM oMboibCioCmo.m\n[[15] Kuunn Qiian,,CChheennshshu uWWu,uZ,hZenhge nYgaYnagn,Ygu, nYhuanoh aLoiuL,iuan, da nKdyKleyJleamJaimesioesno.n20. 12701.7W.idWarid:aDre:cDimeectimere-teLre-vLeelv ePlaPsassisvivee Trracking\nvia VVeellooccitiytMy oMnonitiotroinrginwg itwhitChoCmommodittyyW Wi--FFi.iI.nInP rPocreoecdeiendgisnogfst hoefA tChMe MACoMb iMHoobci.Hoc\n[[16] Kuunn Qiian,,CChheennshshu uWWu,uZ,hZenhge nYgaYnga,nYgu,nYhuanoh aLoiuL,iaun,da nZdimZuim ZuhoZuh.o2u0.1240.1P4A.DSP:APDasSs: iPvaes sidveetedceteicotnio nofo fmmovoivnign gtatarrggeetts\nwwitith dynaammicic speed uusiinnggPHYY llayer iinnfofrommaattioino.nI.nInP rPorceoecdeiendgisnogfst hoef IEtEhEe IICEPEAED ISC.PADS\n[17]  KKun QQiann, Chenshu Wuu,,YYi i Zhhaanngg,,GGuiudidoonngg ZZhhaanngg,,ZZhehnegn gYYanang,ga, nadn dYYuunhnahoa oLLiiuu..22001188..WWidiadra2r2..00::PPaasssivvee hhuumman\nttracking wiithaa single wwi--fifili nlki.nkP.r oPcreeodcienegdsinogfst hoefA tChMe AMCoMb MiSoybsiS(2ya081)8.).\n[18] Yosssi RRuubner aannd CCarloo TToommasi..22001. Thhee earth mmovveerr'’s ddiistsatnacnec.e.InInP ePrecrecpetuptaulaMl eMtreitcrsifcosr Ifmoarg eImDaagtea bDasteabNaasvei gNaatvioinga. tion\nSpprriinggeerr..\n[19] R. Schmmididtt..11998866..MuMltuilptilpel eeemmititteer looccaattioinona nadnds isginganlapla rpaamraemterteers tiemstaitimoant.ioInE.EIEEETEr aTnrsancstiaocntsionsA nonte nAnatesnannads and\nPrropagatioonn1(1998866))..\n[[20]  HHaoWWanagn,gD,aDqaiqnign gZZhhanang,gJ, uJunnyyii Maa,,YYaassha Waanngg,,YYuuxxiiang Waanngg,,DDaann WWu,uT,aToa oGGu,ua,nadn dBBiinngg Xiie. 20166..H Huumman\nRReessppiirratioon DDetectiioonnw wiiththC Coommmooddiitty Wififi DDeveivciceess::DDo oUUsesre rLLooccaattiion and Boddyy Orriienttatioonn MMatteerr??..IInnP rPorcoeceedeidnignsgs\nof thteheA CAMCMU bUibciocmopm.p\n[21] Cheensshuu Wu,uZ, hZehnegn gYaYnagn,gZ,iZmium ZuhZouh,oXuu,eXfuenefge nLgiuL,iYuu, nYhuanoh aLoiuL,iaun, da nJdiJainanonnogn gCaCoa.o2.021051.5N.oNn-oInn-vInasviavsiev eDeDteetcetcitionn of\nMMovoivningagnadn dStSattaitionnaarry Huummana nWWitiht hWWiFiF.i.IEIEE EJJoouurrnnaall oonn SSeleelcetecdteAdr eAarseiansC oimn mCoumnmicuantiicoantsi(o2n0s1)5)..\n[22]  Chensshuu Wu,u , Fengg Zhaanngg,,YYuuqqiaiann HHuu,a, nadn dKK.J..J.RaRya yLLiuiu..22002200..GaGiatiWtWaya:yM:oMniotnoirtionrgin ganadn dReRceocgonginzizningg GGaiatit Speed\nThhrroouugghh tthee Waallls.  IEIEEET rTarnasnascatciotnisonosn Mono bMiolebiCloem Cpoumtpinugti(n2g0o2)0.).\n[23] Yaxiong Xie, Zheennjjiang Li,,aannd MMoo Li. 2018. Prrecise ppoowwer ddelaayy pprorofiflinlginwg itwhitcho mcmomomdoidtiytWy Wi-iF-iF. iI.EIEEEEET rTarnasnascaticotnisons\non MoobileeC Comomppuuttinigng(0210188))..\n[[2244]] YYaaxxiioonngg XXiiee,,JJiiee XXiioonngg,.MMoo LLii,,aanndd KKyyllee JJaammiieessoonn..22001199..mDm-DTr-aTcrka:cLke:vLeervaegrianggi nmgulmtiu-ltdii-mdeimnseinosniaolniatlyit yfofro rppaassssiivvee iinnddoooorr\nWi-i-FFii ttrracakciknign.gI.nInP roPcreoecdeinedgisnogfst hoefA CthMe MACoMb iCMombi.Com\n[25] Zheenngg Yaanngg,,YYii Zhhaanngg,,GGuiudiodnogn gZhZahnagn, ga, nadn dYuYeu eZZhehnegn.g2.0202.0W.idWarid a3r.03:.0W:iWFii-Fbia-bseadse dAcAticvtivtiytyReRceocgongintitoion nDDataatsaesett..\nhtttps:///ddooi.o.orrgg//1100.2.12122277//77zznnff--qqpp86\n[[2266]] ZZhheennggYaYnagn,gZ,iZmium ZuhZouh,o ua,nadn dYuYnuhnahoa oLiLui.u2.021031.3F.rFormo mRSRSIS StIot oCCSIS:I:IInnddoooorr LLooccaalliizzaattioinonv ivaiCa hCahnannenleRl eRspesopnosnes. eA.CACMM\nCoommpuptu.t. Surv.N(oNvoevmebmerb e2r021031)3,)2,52:51:-12–52:53:322..\n[27]  Feng ZZhangg,,CChehne nCChehne,n ,BBeiebibeeii Wanagn,ga,nadn dK.KJ. JR.aRya yLiLui.u2.021081.8W.iWSpeiSepde:eAd S: tAatSitsatisctiacla lEElleeccttromaaggnneteiticc Apppprrooaacchh ffor\nDeevviiccee--FrreeIInnddooor rSSppeeedd EEssttimaattiion.IIEEEEE Internneettof  TThhiinnggssJ oJuorunrarl{a(2b01188))..\n[28] Yi ZZhhang, Yuee Zheengg,, GGuidong Zhangg,,KKuun nQQiaiann,C, hCehne nQiQaina,na,nadn dZhZehnegn YgaYnagn.g20. 20.2G0a. iGtaIiDt:ID R:oRboubsuts tWiW-Fi-iF iBBaasseedd Gaaiitt\nRReeccooggnniittion. Inn PPrroocecedeidnignsgosf tohfe Stphrei nSgperiWngAeSrA W. ASA\n[29]  MM ingmiin Zhao, Yonggllong TTiaann,,HHang ZZhao, Moohhaammamd aAdbAu bAulAshlsehiekihk,hT,iTainahnohnognLgi,LRi,uRmuemn eHnriHsrtiostvo,vZ,aZcahcahrayr yKKabaeblealacc,,\nDDiinnaa Kaattabi, and AAntonioo TToorrarlablab.a2.021081.8R.FR-FB-aBsaesded3 D3DS kSekleetloentso.nIns.PIrno cPeredoicnegesdoifngthse oAfC MtheSI GACMO MSIMGC. OMM\n[30]  YYuue  ZZhheenngg, Yi  ZZhhaanngg,,KKun Qian, Guiidong Zhang, Yuunnhhaaoo Liiu, Chheennsshhuu Wu,ua, nadn dZZhehnegn gYYanang.g2. 021091.9Z. eZreor-oE-fEfffoorrtt\nCCrroosss--Doommaianin GGesesttuurree Recognitiioonnw wiiththWWii-Fi..InInP rPorcoecedeiendgisnogfs thoef AtChMe AMCoMb iMSoybsi. Sys\n",
  "lastModified" : 1764639821602
}, {
  "filePath" : "nexus-lite-vibe-coding-final.md",
  "fileName" : "nexus-lite-vibe-coding-final.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "nexus-lite-vibe-coding-final.md",
  "contentText" : "# Nexus-Lite 知识预览系统 - Vibe Coding 最终提示词清单\r\n\r\n## 第一阶段：项目骨架与共享内核 (Foundation & Shared Kernel)\r\n\r\n### 目标：建立符合 DDD 边界的单体项目结构，并配置轻量级基础设施。\r\n\r\n#### 1. 初始化模块化单体架构与技术栈\r\n\r\n**Prompt:**\r\n\"你是一个精通 DDD 和 Clean Architecture 的 Java 架构师。请为我搭建一个名为 'Nexus-Lite' 的 Spring Boot 3 模块化单体项目骨架。\r\n\r\n**核心约束：**\r\n- **零外部依赖**：单节点部署，不需要 Redis/PostgreSQL/Nginx。\r\n- **包结构（严格遵循）**：根包 `com.documentpreview`。下设模块包：\r\n  - `shared` (共享内核：DDD基础类, 工具类)\r\n  - `modules.document` (文档结构与模型)\r\n  - `modules.scan` (文件扫描与索引生成)\r\n  - `modules.preview` (内容预览与转换)\r\n  - `infra` (基础设施：文件IO, 解析库封装)\r\n  - `web` (API控制器, 静态资源)\r\n  - `test` (测试工具类与配置)\r\n\r\n**技术栈：** Java 17+, Spring Boot 3, Lombok, H2 Database, Caffeine Cache。\r\n\r\n**关键依赖：** \r\n- `spring-boot-starter-web`\r\n- `spring-boot-starter-data-jpa`\r\n- `spring-boot-starter-logging`\r\n- `spring-boot-starter-actuator` (基础监控)\r\n- `com.github.ben-manes.caffeine`\r\n- `org.apache.pdfbox` (PDF处理)\r\n- `org.apache.poi` 或 `mammoth` (DOCX处理)\r\n- `com.opencsv`\r\n- `org.apache.tika` (文件类型识别)\r\n- `spring-boot-starter-test` (测试框架)\r\n- `junit-jupiter` (单元测试)\r\n- `mockito` (模拟测试)\r\n\r\n请提供 `pom.xml` 的关键依赖配置，并展示推荐的目录结构树。\"\r\n\r\n#### 2. 配置嵌入式基础设施与 DDD 基础类\r\n\r\n**Prompt:**\r\n\"请完成基础设施配置并实现 DDD 基础类。\r\n\r\n**H2 配置：** 配置 H2 数据库为文件模式 (jdbc:h2:file:./data/nexus_db)。\r\n\r\n**Caffeine 配置：** 实现 `CacheConfig`。配置 `toon-index` (TTL 1小时) 和 `preview-content` (TTL 10分钟) 两个缓存空间。\r\n\r\n**配置项管理：** 在 `application.yml` 中添加以下可配置项：\r\n- 扫描根目录：`app.scan.root-dirs` (默认：`[\"/home/agentic/hkt-knowledge\"]`)\r\n- 扫描周期（分钟）：`app.scan.cron` (默认：`60`)\r\n- 最大文件大小（MB）：`app.preview.max-file-size` (默认：`20`)\r\n- 缓存TTL配置：`app.cache.toon-ttl` (默认：`3600`), `app.cache.preview-ttl` (默认：`600`)\r\n\r\n**DDD 基础类** (`com.documentpreview.shared`)：\r\n- 实现 `Entity<ID>`\r\n- 实现 `ValueObject`\r\n- 实现 `AggregateRoot<ID>` (包含领域事件发布能力)\r\n- 实现 `Result<T>` (用于替代异常抛出)\r\n- 实现 `DomainEvent` 基础类\r\n\r\n**日志配置：** 配置 SLF4J + Logback，设置合适的日志级别，在关键操作处添加日志记录。\r\n\r\n**监控配置：** 启用 Spring Boot Actuator 的基本端点，包括健康检查和指标。\"\r\n\r\n## 第二阶段：核心领域建模 (Domain Modeling)\r\n\r\n### 目标：实现文档、TOON 结构和目录树等核心业务对象。\r\n\r\n#### 3. 实现文档与 TOON 核心模型 (modules.document)\r\n\r\n**Prompt:**\r\n\"请在 `com.documentpreview.modules.document.domain` 实现核心模型，严格参照产品设计文档的通用语言和战术设计：\r\n\r\n- **Document (AggregateRoot)**: ID 为 `filePath`。包含 `fileName`, `fileType`, `parentDir`。\r\n- **FileType (Enum)**: 包含 `MD`, `DOCX`, `PDF`, `CSV`, `SVG`。\r\n- **FileMetadata (ValueObject)**: 包含 `fileSize`, `lastModifiedTime`, `charset`。\r\n- **TOONStructure (ValueObject)**: 封装 TOON 结构，包含 `rootNode`, `elementCount`, `fields` (List), `data` (List<Map>)。\r\n- **DirectoryTree (ValueObject/Read Model)**: 递归结构，用于目录树展示。\r\n\r\n**测试要求：** 为每个核心模型编写单元测试，验证模型的正确性和完整性。\"\r\n\r\n## 第三阶段：扫描与索引模块 (Scan & Index)\r\n\r\n### 目标：实现高性能扫描、变更检测、TOON 格式化、以及索引的持久化。\r\n\r\n#### 4. 实现扫描服务与治理 (modules.scan)\r\n\r\n**Prompt:**\r\n\"请在 `com.documentpreview.modules.scan` 实现 `FileScanService`。\r\n\r\n**I/O 优化：** 使用 `ForkJoinPool` 或 Java NIO 实现高效并发的文件系统遍历。\r\n\r\n**定时扫描：** 使用 `@Scheduled` 实现可配置的定时全量扫描，扫描周期从 `application.yml` 读取。\r\n\r\n**变更检测：** 扫描时，只对 `lastModifiedTime` 发生变化的文件进行重新处理。\r\n\r\n**合规治理：** \r\n- 实现隐藏文件和黑名单目录过滤（黑名单：`.git/`, `.svn/`, `node_modules/`, `target/`, `.DS_Store`）\r\n- 实现符号链接安全检查，禁止跟随指向配置目录外的链接\r\n- 实现路径规范化，防止路径遍历攻击\r\n\r\n**状态与事件：** \r\n- 实现 `ScanStatusManager`，管理扫描状态\r\n- 在扫描完成后发布 `ScanFinishedEvent`\r\n- 添加详细的日志记录，包括扫描开始、完成、跳过的文件等信息\r\n\r\n**测试要求：** 编写单元测试和集成测试，验证扫描逻辑、过滤规则和安全检查的正确性。\"\r\n\r\n#### 5. 实现 TOON 生成器与持久化 (modules.scan & infra)\r\n\r\n**Prompt:**\r\n\"请实现 TOON 格式的核心逻辑和持久化机制。\r\n\r\n**TOON 生成器** (`com.documentpreview.modules.scan.TOONGeneratorService`)：\r\n- **语法实现**：严格按照产品设计文档第5章实现 TOON 语法生成\r\n- **多块支持**：支持生成包含 `files` 和 `metadata` 等多个数据块的 TOON 字符串\r\n- **数据提取**：\r\n  - CSV：解析表头为 `fields`，行数据为 `data`\r\n  - Markdown：提取表格和列表结构化数据\r\n  - SVG：提取元数据（width, height, elementsCount）\r\n  - 通用回退：生成默认的 `content` 字段\r\n\r\n**索引持久化** (`com.documentpreview.modules.scan.IndexRepository`)：\r\n- **TOON 持久化**：将生成的 TOON 字符串写入本地文件 `data/index.toon`\r\n- **JSON 派生**：同时生成一份可直接加载的 JSON 索引到 `data/index.json`\r\n- **索引加载**：实现 `loadIndex()`，优先读取缓存，其次读取 `index.json`，最后解析 `index.toon`\r\n- **更新时间管理**：记录并更新索引的最后修改时间\r\n\r\n**测试要求：** 编写单元测试，验证 TOON 生成的正确性、索引持久化和加载的完整性。\"\r\n\r\n## 第四阶段：预览与适配 (Preview & Infra)\r\n\r\n### 目标：实现高效、安全的本地文件预览功能。\r\n\r\n#### 6. 实现本地预览适配器与降级 (modules.preview & infra)\r\n\r\n**Prompt:**\r\n\"请实现预览模块 `com.documentpreview.modules.preview`，并依赖 `com.documentpreview.infra` 中的解析库封装。\r\n\r\n**Markdown 处理：**\r\n- 使用库（如 `flexmark-java`）将 Markdown 转换为 HTML\r\n- 实现表格提取和标题目录结构化\r\n- 添加代码高亮支持\r\n\r\n**DOCX 处理：**\r\n- 使用 `mammoth` 将 DOCX 转换为 HTML\r\n- 重点实现表格优先、段落标题提取\r\n\r\n**PDF 处理：**\r\n- 使用 `PDFBox` 实现文本提取和基本结构化（如返回前几页的纯文本）\r\n- 将 PDF 文件流直接返回给前端\r\n\r\n**CSV 处理：**\r\n- 使用 `OpenCSV` 实现完整的结构化解析并返回 JSON 格式数据\r\n\r\n**SVG 处理：**\r\n- 直接读取 SVG 文件内容\r\n- 提取 SVG 元数据\r\n- 进行安全过滤，移除可疑脚本\r\n- 返回原始 SVG 文本或嵌入 HTML\r\n\r\n**缓存策略：**\r\n- 在 `PreviewService` 中对预览结果应用 `@Cacheable(value = \"preview-content\")`\r\n- 缓存键包含文件路径和修改时间，确保缓存有效性\r\n\r\n**降级处理：**\r\n- 如果文件过大（>配置的最大文件大小）或解析失败，返回通用的错误/降级提示信息\r\n- 记录降级处理的日志，便于后续分析\r\n\r\n**测试要求：** 为每种文件格式的预览实现单元测试，验证转换结果的正确性和降级处理的有效性。\"\r\n\r\n## 第五阶段：Web API 与前端集成 (Web & Interface)\r\n\r\n### 目标：暴露 REST API，支持内容协商和静态资源托管。\r\n\r\n#### 7. 实现 REST API Controller (web)\r\n\r\n**Prompt:**\r\n\"请在 `com.documentpreview.web` 实现 `DocumentController` 和 `IndexController`。\r\n\r\n**API 规范：**\r\n- `GET /api/v1/document/tree` : 获取目录树结构\r\n  - 支持参数：`rootDir` (默认：配置的第一个根目录), `path` (指定路径), `depth` (默认：2)\r\n- `GET /api/v1/document/toon?filePath=...` : 获取单个文档的 TOON 结构\r\n  - 支持参数：`format` (both/toon/json, 默认：both)\r\n- `GET /api/v1/document/preview?filePath=...` : 获取文档预览内容 (HTML/JSON/Binary)\r\n  - 支持参数：`startPage`, `endPage` (PDF 分页)\r\n- `POST /api/v1/document/scan` : 触发手动扫描\r\n  - 支持参数：`dirPath` (指定目录), `force` (是否强制扫描)\r\n- `GET /api/v1/index/toon` : 返回持久化的完整索引 TOON\r\n- `GET /api/v1/index/json`: 返回索引的 JSON 派生结构\r\n\r\n**治理与合规：**\r\n- 实现内容协商机制 (`application/x-toon`, `application/json`)\r\n- 实现 `ETag` 和 `Last-Modified` 支持，利用 `FileMetadata` 优化浏览器缓存\r\n- 添加请求日志记录，包括请求路径、参数、响应状态等\r\n- 实现基本的限流机制，防止恶意请求\r\n\r\n**测试要求：** 编写集成测试，验证 API 的正确性、内容协商和缓存机制的有效性。\"\r\n\r\n#### 8. 错误处理与静态资源托管 (web)\r\n\r\n**Prompt:**\r\n\"请实现全局的错误处理与前端静态资源托管。\r\n\r\n**全局异常处理：**\r\n- 实现 `GlobalExceptionHandler`，统一错误响应格式 `{ code, message, traceId, details }`\r\n- 将 `SecurityException` 映射为 403，`FileNotFoundException` 映射为 404\r\n- 记录异常的详细日志，包括堆栈信息\r\n\r\n**SPA 托管：**\r\n- 配置 `WebMvcConfig`，将 React 构建产物（前端的 `dist` 目录）映射到 Spring Boot 的静态资源路径 (`/static`)\r\n\r\n**前端路由支持：**\r\n- 配置视图控制器，将所有非 `/api` 且非静态资源的路由请求转发到 `/index.html`，以支持 React Router\r\n\r\n**CORS 配置：**\r\n- 在开发环境下允许所有跨域请求\r\n- 在生产环境下限制允许的来源\r\n\r\n**测试要求：** 编写测试，验证错误处理机制和静态资源托管的正确性。\"\r\n\r\n## 第六阶段：前端实现与打包 (Frontend & Deployment)\r\n\r\n### 目标：构建 React 应用并完成单体打包脚本。\r\n\r\n#### 9. 前端实现增强 (React + Ant Design)\r\n\r\n**Prompt:**\r\n\"现在切换到 React 前端。请实现核心组件：\r\n\r\n**文件树组件：**\r\n- 实现左侧目录树，使用 AntD Tree\r\n- 显示文件图标、区分目录/文件\r\n- 支持展开/折叠、懒加载\r\n- 支持按文件名搜索和过滤\r\n\r\n**预览组件：**\r\n- 实现右侧 `PreviewPane`，根据文件类型动态加载渲染器\r\n- **Markdown**: 使用 `react-markdown`，支持代码高亮、标题目录\r\n- **PDF**: 使用 `pdfjs-dist`，支持滚动/缩放、页码导航\r\n- **CSV**: 使用 AntD Table，支持排序和过滤\r\n- **DOCX**: 渲染 HTML 内容，支持样式保留\r\n- **SVG**: 直接嵌入 SVG 或使用 `react-svg` 组件\r\n\r\n**状态管理：**\r\n- 使用 React Context 或 Zustand 管理应用状态\r\n- 实现前端缓存策略（如 LocalStorage 缓存目录树）\r\n\r\n**错误处理：**\r\n- 在 API 调用失败时显示统一的错误降级提示\r\n- 实现加载状态和错误状态的 UI 展示\r\n\r\n**测试要求：** 使用 Jest 和 React Testing Library 编写前端组件测试，验证组件的渲染和交互逻辑。\"\r\n\r\n#### 10. 最终单体打包脚本\r\n\r\n**Prompt:**\r\n\"请提供一个完整的 Shell 脚本示例，用于将前后端项目打包成一个可部署的 JAR 文件。\r\n\r\n**步骤：**\r\n1. 编译 React 项目 (`npm run build`)\r\n2. 将 React 的 `dist` 目录复制到 Spring Boot 的 `src/main/resources/static`\r\n3. 使用 Maven 命令打包 Spring Boot (`mvn clean package`)\r\n4. 运行测试套件 (`mvn test`)\r\n\r\n**运行命令：**\r\n- 给出最终 JAR 文件在单节点服务器上的运行命令：`java -jar nexus-lite.jar`\r\n- 支持通过命令行参数或环境变量覆盖配置：`java -jar nexus-lite.jar --app.scan.root-dirs=[\"/custom/path\"]`\r\n\r\n**部署建议：**\r\n- 在生产环境中，建议使用 `systemd` 或其他进程管理工具管理应用\r\n- 配置日志轮转，防止日志文件过大\r\n- 定期备份 `data` 目录，确保索引数据安全\"\r\n\r\n## 第七阶段：测试与验证 (Testing & Validation)\r\n\r\n### 目标：确保系统质量和稳定性。\r\n\r\n#### 11. 实现测试套件\r\n\r\n**Prompt:**\r\n\"请实现完整的测试套件，确保系统的质量和稳定性。\r\n\r\n**单元测试：**\r\n- 为所有核心服务和工具类编写单元测试\r\n- 使用 Mockito 模拟外部依赖\r\n- 测试覆盖率目标：核心业务逻辑 > 80%\r\n\r\n**集成测试：**\r\n- 测试模块间的交互逻辑\r\n- 测试 API 端点的正确性\r\n- 测试文件扫描和 TOON 生成的完整流程\r\n\r\n**端到端测试：**\r\n- 测试完整的用户流程：扫描 -> 浏览目录 -> 预览文档\r\n- 测试错误场景和降级处理\r\n\r\n**性能测试：**\r\n- 测试大目录扫描的性能\r\n- 测试预览大文件的响应时间\r\n- 测试缓存机制的有效性\r\n\r\n**测试报告：**\r\n- 配置 Maven Surefire 插件生成测试报告\r\n- 集成 JaCoCo 生成代码覆盖率报告\r\n\r\n**持续集成：**\r\n- 提供 GitHub Actions 或 GitLab CI 配置示例\r\n- 实现自动化测试和构建流程\"\r\n\r\n## 部署与运维建议\r\n\r\n1. **环境准备：**\r\n   - 确保 Java 17+ 已安装\r\n   - 确保目标目录有读写权限\r\n\r\n2. **配置调整：**\r\n   - 根据实际需求修改 `application.yml` 中的配置项\r\n   - 调整 JVM 参数，优化内存使用：`java -Xms512m -Xmx2g -jar nexus-lite.jar`\r\n\r\n3. **监控与日志：**\r\n   - 访问 `/actuator/health` 检查应用健康状态\r\n   - 访问 `/actuator/metrics` 查看应用指标\r\n   - 配置日志收集工具（如 ELK Stack），集中管理日志\r\n\r\n4. **备份策略：**\r\n   - 定期备份 `data` 目录，包含索引文件和数据库\r\n   - 实现增量备份，减少备份时间和空间占用\r\n\r\n5. **升级策略：**\r\n   - 停止当前应用\r\n   - 备份数据目录\r\n   - 部署新版本 JAR 文件\r\n   - 启动应用并验证\r\n\r\n## 扩展建议\r\n\r\n1. **支持更多文件格式：**\r\n   - 逐步添加对 `.xlsx`、`.pptx` 等格式的支持\r\n   - 实现插件机制，方便扩展新的文件格式\r\n\r\n2. **增强搜索功能：**\r\n   - 实现基于内容的全文搜索\r\n   - 支持高级搜索条件（如文件类型、修改时间）\r\n\r\n3. **添加用户权限管理：**\r\n   - 实现基于角色的访问控制\r\n   - 支持文档级别的权限设置\r\n\r\n4. **实现分布式部署：**\r\n   - 引入消息队列，实现异步扫描和预览\r\n   - 支持多节点部署，实现负载均衡\r\n\r\n5. **增强监控和告警：**\r\n   - 集成 Prometheus 和 Grafana，实现可视化监控\r\n   - 配置告警规则，及时发现和处理问题\r\n\r\n这份 Vibe Coding 提示词清单提供了完整的 Nexus-Lite 知识预览系统实现指南，涵盖了从项目初始化到部署运维的各个方面。按照这个清单逐步实现，可以构建一个功能完整、性能优良、易于维护的模块化单体应用。",
  "size" : 15129,
  "modifiedAt" : 1764639821602,
  "id" : "nexus-lite-vibe-coding-final.md",
  "content" : "# Nexus-Lite 知识预览系统 - Vibe Coding 最终提示词清单\r\n\r\n## 第一阶段：项目骨架与共享内核 (Foundation & Shared Kernel)\r\n\r\n### 目标：建立符合 DDD 边界的单体项目结构，并配置轻量级基础设施。\r\n\r\n#### 1. 初始化模块化单体架构与技术栈\r\n\r\n**Prompt:**\r\n\"你是一个精通 DDD 和 Clean Architecture 的 Java 架构师。请为我搭建一个名为 'Nexus-Lite' 的 Spring Boot 3 模块化单体项目骨架。\r\n\r\n**核心约束：**\r\n- **零外部依赖**：单节点部署，不需要 Redis/PostgreSQL/Nginx。\r\n- **包结构（严格遵循）**：根包 `com.documentpreview`。下设模块包：\r\n  - `shared` (共享内核：DDD基础类, 工具类)\r\n  - `modules.document` (文档结构与模型)\r\n  - `modules.scan` (文件扫描与索引生成)\r\n  - `modules.preview` (内容预览与转换)\r\n  - `infra` (基础设施：文件IO, 解析库封装)\r\n  - `web` (API控制器, 静态资源)\r\n  - `test` (测试工具类与配置)\r\n\r\n**技术栈：** Java 17+, Spring Boot 3, Lombok, H2 Database, Caffeine Cache。\r\n\r\n**关键依赖：** \r\n- `spring-boot-starter-web`\r\n- `spring-boot-starter-data-jpa`\r\n- `spring-boot-starter-logging`\r\n- `spring-boot-starter-actuator` (基础监控)\r\n- `com.github.ben-manes.caffeine`\r\n- `org.apache.pdfbox` (PDF处理)\r\n- `org.apache.poi` 或 `mammoth` (DOCX处理)\r\n- `com.opencsv`\r\n- `org.apache.tika` (文件类型识别)\r\n- `spring-boot-starter-test` (测试框架)\r\n- `junit-jupiter` (单元测试)\r\n- `mockito` (模拟测试)\r\n\r\n请提供 `pom.xml` 的关键依赖配置，并展示推荐的目录结构树。\"\r\n\r\n#### 2. 配置嵌入式基础设施与 DDD 基础类\r\n\r\n**Prompt:**\r\n\"请完成基础设施配置并实现 DDD 基础类。\r\n\r\n**H2 配置：** 配置 H2 数据库为文件模式 (jdbc:h2:file:./data/nexus_db)。\r\n\r\n**Caffeine 配置：** 实现 `CacheConfig`。配置 `toon-index` (TTL 1小时) 和 `preview-content` (TTL 10分钟) 两个缓存空间。\r\n\r\n**配置项管理：** 在 `application.yml` 中添加以下可配置项：\r\n- 扫描根目录：`app.scan.root-dirs` (默认：`[\"/home/agentic/hkt-knowledge\"]`)\r\n- 扫描周期（分钟）：`app.scan.cron` (默认：`60`)\r\n- 最大文件大小（MB）：`app.preview.max-file-size` (默认：`20`)\r\n- 缓存TTL配置：`app.cache.toon-ttl` (默认：`3600`), `app.cache.preview-ttl` (默认：`600`)\r\n\r\n**DDD 基础类** (`com.documentpreview.shared`)：\r\n- 实现 `Entity<ID>`\r\n- 实现 `ValueObject`\r\n- 实现 `AggregateRoot<ID>` (包含领域事件发布能力)\r\n- 实现 `Result<T>` (用于替代异常抛出)\r\n- 实现 `DomainEvent` 基础类\r\n\r\n**日志配置：** 配置 SLF4J + Logback，设置合适的日志级别，在关键操作处添加日志记录。\r\n\r\n**监控配置：** 启用 Spring Boot Actuator 的基本端点，包括健康检查和指标。\"\r\n\r\n## 第二阶段：核心领域建模 (Domain Modeling)\r\n\r\n### 目标：实现文档、TOON 结构和目录树等核心业务对象。\r\n\r\n#### 3. 实现文档与 TOON 核心模型 (modules.document)\r\n\r\n**Prompt:**\r\n\"请在 `com.documentpreview.modules.document.domain` 实现核心模型，严格参照产品设计文档的通用语言和战术设计：\r\n\r\n- **Document (AggregateRoot)**: ID 为 `filePath`。包含 `fileName`, `fileType`, `parentDir`。\r\n- **FileType (Enum)**: 包含 `MD`, `DOCX`, `PDF`, `CSV`, `SVG`。\r\n- **FileMetadata (ValueObject)**: 包含 `fileSize`, `lastModifiedTime`, `charset`。\r\n- **TOONStructure (ValueObject)**: 封装 TOON 结构，包含 `rootNode`, `elementCount`, `fields` (List), `data` (List<Map>)。\r\n- **DirectoryTree (ValueObject/Read Model)**: 递归结构，用于目录树展示。\r\n\r\n**测试要求：** 为每个核心模型编写单元测试，验证模型的正确性和完整性。\"\r\n\r\n## 第三阶段：扫描与索引模块 (Scan & Index)\r\n\r\n### 目标：实现高性能扫描、变更检测、TOON 格式化、以及索引的持久化。\r\n\r\n#### 4. 实现扫描服务与治理 (modules.scan)\r\n\r\n**Prompt:**\r\n\"请在 `com.documentpreview.modules.scan` 实现 `FileScanService`。\r\n\r\n**I/O 优化：** 使用 `ForkJoinPool` 或 Java NIO 实现高效并发的文件系统遍历。\r\n\r\n**定时扫描：** 使用 `@Scheduled` 实现可配置的定时全量扫描，扫描周期从 `application.yml` 读取。\r\n\r\n**变更检测：** 扫描时，只对 `lastModifiedTime` 发生变化的文件进行重新处理。\r\n\r\n**合规治理：** \r\n- 实现隐藏文件和黑名单目录过滤（黑名单：`.git/`, `.svn/`, `node_modules/`, `target/`, `.DS_Store`）\r\n- 实现符号链接安全检查，禁止跟随指向配置目录外的链接\r\n- 实现路径规范化，防止路径遍历攻击\r\n\r\n**状态与事件：** \r\n- 实现 `ScanStatusManager`，管理扫描状态\r\n- 在扫描完成后发布 `ScanFinishedEvent`\r\n- 添加详细的日志记录，包括扫描开始、完成、跳过的文件等信息\r\n\r\n**测试要求：** 编写单元测试和集成测试，验证扫描逻辑、过滤规则和安全检查的正确性。\"\r\n\r\n#### 5. 实现 TOON 生成器与持久化 (modules.scan & infra)\r\n\r\n**Prompt:**\r\n\"请实现 TOON 格式的核心逻辑和持久化机制。\r\n\r\n**TOON 生成器** (`com.documentpreview.modules.scan.TOONGeneratorService`)：\r\n- **语法实现**：严格按照产品设计文档第5章实现 TOON 语法生成\r\n- **多块支持**：支持生成包含 `files` 和 `metadata` 等多个数据块的 TOON 字符串\r\n- **数据提取**：\r\n  - CSV：解析表头为 `fields`，行数据为 `data`\r\n  - Markdown：提取表格和列表结构化数据\r\n  - SVG：提取元数据（width, height, elementsCount）\r\n  - 通用回退：生成默认的 `content` 字段\r\n\r\n**索引持久化** (`com.documentpreview.modules.scan.IndexRepository`)：\r\n- **TOON 持久化**：将生成的 TOON 字符串写入本地文件 `data/index.toon`\r\n- **JSON 派生**：同时生成一份可直接加载的 JSON 索引到 `data/index.json`\r\n- **索引加载**：实现 `loadIndex()`，优先读取缓存，其次读取 `index.json`，最后解析 `index.toon`\r\n- **更新时间管理**：记录并更新索引的最后修改时间\r\n\r\n**测试要求：** 编写单元测试，验证 TOON 生成的正确性、索引持久化和加载的完整性。\"\r\n\r\n## 第四阶段：预览与适配 (Preview & Infra)\r\n\r\n### 目标：实现高效、安全的本地文件预览功能。\r\n\r\n#### 6. 实现本地预览适配器与降级 (modules.preview & infra)\r\n\r\n**Prompt:**\r\n\"请实现预览模块 `com.documentpreview.modules.preview`，并依赖 `com.documentpreview.infra` 中的解析库封装。\r\n\r\n**Markdown 处理：**\r\n- 使用库（如 `flexmark-java`）将 Markdown 转换为 HTML\r\n- 实现表格提取和标题目录结构化\r\n- 添加代码高亮支持\r\n\r\n**DOCX 处理：**\r\n- 使用 `mammoth` 将 DOCX 转换为 HTML\r\n- 重点实现表格优先、段落标题提取\r\n\r\n**PDF 处理：**\r\n- 使用 `PDFBox` 实现文本提取和基本结构化（如返回前几页的纯文本）\r\n- 将 PDF 文件流直接返回给前端\r\n\r\n**CSV 处理：**\r\n- 使用 `OpenCSV` 实现完整的结构化解析并返回 JSON 格式数据\r\n\r\n**SVG 处理：**\r\n- 直接读取 SVG 文件内容\r\n- 提取 SVG 元数据\r\n- 进行安全过滤，移除可疑脚本\r\n- 返回原始 SVG 文本或嵌入 HTML\r\n\r\n**缓存策略：**\r\n- 在 `PreviewService` 中对预览结果应用 `@Cacheable(value = \"preview-content\")`\r\n- 缓存键包含文件路径和修改时间，确保缓存有效性\r\n\r\n**降级处理：**\r\n- 如果文件过大（>配置的最大文件大小）或解析失败，返回通用的错误/降级提示信息\r\n- 记录降级处理的日志，便于后续分析\r\n\r\n**测试要求：** 为每种文件格式的预览实现单元测试，验证转换结果的正确性和降级处理的有效性。\"\r\n\r\n## 第五阶段：Web API 与前端集成 (Web & Interface)\r\n\r\n### 目标：暴露 REST API，支持内容协商和静态资源托管。\r\n\r\n#### 7. 实现 REST API Controller (web)\r\n\r\n**Prompt:**\r\n\"请在 `com.documentpreview.web` 实现 `DocumentController` 和 `IndexController`。\r\n\r\n**API 规范：**\r\n- `GET /api/v1/document/tree` : 获取目录树结构\r\n  - 支持参数：`rootDir` (默认：配置的第一个根目录), `path` (指定路径), `depth` (默认：2)\r\n- `GET /api/v1/document/toon?filePath=...` : 获取单个文档的 TOON 结构\r\n  - 支持参数：`format` (both/toon/json, 默认：both)\r\n- `GET /api/v1/document/preview?filePath=...` : 获取文档预览内容 (HTML/JSON/Binary)\r\n  - 支持参数：`startPage`, `endPage` (PDF 分页)\r\n- `POST /api/v1/document/scan` : 触发手动扫描\r\n  - 支持参数：`dirPath` (指定目录), `force` (是否强制扫描)\r\n- `GET /api/v1/index/toon` : 返回持久化的完整索引 TOON\r\n- `GET /api/v1/index/json`: 返回索引的 JSON 派生结构\r\n\r\n**治理与合规：**\r\n- 实现内容协商机制 (`application/x-toon`, `application/json`)\r\n- 实现 `ETag` 和 `Last-Modified` 支持，利用 `FileMetadata` 优化浏览器缓存\r\n- 添加请求日志记录，包括请求路径、参数、响应状态等\r\n- 实现基本的限流机制，防止恶意请求\r\n\r\n**测试要求：** 编写集成测试，验证 API 的正确性、内容协商和缓存机制的有效性。\"\r\n\r\n#### 8. 错误处理与静态资源托管 (web)\r\n\r\n**Prompt:**\r\n\"请实现全局的错误处理与前端静态资源托管。\r\n\r\n**全局异常处理：**\r\n- 实现 `GlobalExceptionHandler`，统一错误响应格式 `{ code, message, traceId, details }`\r\n- 将 `SecurityException` 映射为 403，`FileNotFoundException` 映射为 404\r\n- 记录异常的详细日志，包括堆栈信息\r\n\r\n**SPA 托管：**\r\n- 配置 `WebMvcConfig`，将 React 构建产物（前端的 `dist` 目录）映射到 Spring Boot 的静态资源路径 (`/static`)\r\n\r\n**前端路由支持：**\r\n- 配置视图控制器，将所有非 `/api` 且非静态资源的路由请求转发到 `/index.html`，以支持 React Router\r\n\r\n**CORS 配置：**\r\n- 在开发环境下允许所有跨域请求\r\n- 在生产环境下限制允许的来源\r\n\r\n**测试要求：** 编写测试，验证错误处理机制和静态资源托管的正确性。\"\r\n\r\n## 第六阶段：前端实现与打包 (Frontend & Deployment)\r\n\r\n### 目标：构建 React 应用并完成单体打包脚本。\r\n\r\n#### 9. 前端实现增强 (React + Ant Design)\r\n\r\n**Prompt:**\r\n\"现在切换到 React 前端。请实现核心组件：\r\n\r\n**文件树组件：**\r\n- 实现左侧目录树，使用 AntD Tree\r\n- 显示文件图标、区分目录/文件\r\n- 支持展开/折叠、懒加载\r\n- 支持按文件名搜索和过滤\r\n\r\n**预览组件：**\r\n- 实现右侧 `PreviewPane`，根据文件类型动态加载渲染器\r\n- **Markdown**: 使用 `react-markdown`，支持代码高亮、标题目录\r\n- **PDF**: 使用 `pdfjs-dist`，支持滚动/缩放、页码导航\r\n- **CSV**: 使用 AntD Table，支持排序和过滤\r\n- **DOCX**: 渲染 HTML 内容，支持样式保留\r\n- **SVG**: 直接嵌入 SVG 或使用 `react-svg` 组件\r\n\r\n**状态管理：**\r\n- 使用 React Context 或 Zustand 管理应用状态\r\n- 实现前端缓存策略（如 LocalStorage 缓存目录树）\r\n\r\n**错误处理：**\r\n- 在 API 调用失败时显示统一的错误降级提示\r\n- 实现加载状态和错误状态的 UI 展示\r\n\r\n**测试要求：** 使用 Jest 和 React Testing Library 编写前端组件测试，验证组件的渲染和交互逻辑。\"\r\n\r\n#### 10. 最终单体打包脚本\r\n\r\n**Prompt:**\r\n\"请提供一个完整的 Shell 脚本示例，用于将前后端项目打包成一个可部署的 JAR 文件。\r\n\r\n**步骤：**\r\n1. 编译 React 项目 (`npm run build`)\r\n2. 将 React 的 `dist` 目录复制到 Spring Boot 的 `src/main/resources/static`\r\n3. 使用 Maven 命令打包 Spring Boot (`mvn clean package`)\r\n4. 运行测试套件 (`mvn test`)\r\n\r\n**运行命令：**\r\n- 给出最终 JAR 文件在单节点服务器上的运行命令：`java -jar nexus-lite.jar`\r\n- 支持通过命令行参数或环境变量覆盖配置：`java -jar nexus-lite.jar --app.scan.root-dirs=[\"/custom/path\"]`\r\n\r\n**部署建议：**\r\n- 在生产环境中，建议使用 `systemd` 或其他进程管理工具管理应用\r\n- 配置日志轮转，防止日志文件过大\r\n- 定期备份 `data` 目录，确保索引数据安全\"\r\n\r\n## 第七阶段：测试与验证 (Testing & Validation)\r\n\r\n### 目标：确保系统质量和稳定性。\r\n\r\n#### 11. 实现测试套件\r\n\r\n**Prompt:**\r\n\"请实现完整的测试套件，确保系统的质量和稳定性。\r\n\r\n**单元测试：**\r\n- 为所有核心服务和工具类编写单元测试\r\n- 使用 Mockito 模拟外部依赖\r\n- 测试覆盖率目标：核心业务逻辑 > 80%\r\n\r\n**集成测试：**\r\n- 测试模块间的交互逻辑\r\n- 测试 API 端点的正确性\r\n- 测试文件扫描和 TOON 生成的完整流程\r\n\r\n**端到端测试：**\r\n- 测试完整的用户流程：扫描 -> 浏览目录 -> 预览文档\r\n- 测试错误场景和降级处理\r\n\r\n**性能测试：**\r\n- 测试大目录扫描的性能\r\n- 测试预览大文件的响应时间\r\n- 测试缓存机制的有效性\r\n\r\n**测试报告：**\r\n- 配置 Maven Surefire 插件生成测试报告\r\n- 集成 JaCoCo 生成代码覆盖率报告\r\n\r\n**持续集成：**\r\n- 提供 GitHub Actions 或 GitLab CI 配置示例\r\n- 实现自动化测试和构建流程\"\r\n\r\n## 部署与运维建议\r\n\r\n1. **环境准备：**\r\n   - 确保 Java 17+ 已安装\r\n   - 确保目标目录有读写权限\r\n\r\n2. **配置调整：**\r\n   - 根据实际需求修改 `application.yml` 中的配置项\r\n   - 调整 JVM 参数，优化内存使用：`java -Xms512m -Xmx2g -jar nexus-lite.jar`\r\n\r\n3. **监控与日志：**\r\n   - 访问 `/actuator/health` 检查应用健康状态\r\n   - 访问 `/actuator/metrics` 查看应用指标\r\n   - 配置日志收集工具（如 ELK Stack），集中管理日志\r\n\r\n4. **备份策略：**\r\n   - 定期备份 `data` 目录，包含索引文件和数据库\r\n   - 实现增量备份，减少备份时间和空间占用\r\n\r\n5. **升级策略：**\r\n   - 停止当前应用\r\n   - 备份数据目录\r\n   - 部署新版本 JAR 文件\r\n   - 启动应用并验证\r\n\r\n## 扩展建议\r\n\r\n1. **支持更多文件格式：**\r\n   - 逐步添加对 `.xlsx`、`.pptx` 等格式的支持\r\n   - 实现插件机制，方便扩展新的文件格式\r\n\r\n2. **增强搜索功能：**\r\n   - 实现基于内容的全文搜索\r\n   - 支持高级搜索条件（如文件类型、修改时间）\r\n\r\n3. **添加用户权限管理：**\r\n   - 实现基于角色的访问控制\r\n   - 支持文档级别的权限设置\r\n\r\n4. **实现分布式部署：**\r\n   - 引入消息队列，实现异步扫描和预览\r\n   - 支持多节点部署，实现负载均衡\r\n\r\n5. **增强监控和告警：**\r\n   - 集成 Prometheus 和 Grafana，实现可视化监控\r\n   - 配置告警规则，及时发现和处理问题\r\n\r\n这份 Vibe Coding 提示词清单提供了完整的 Nexus-Lite 知识预览系统实现指南，涵盖了从项目初始化到部署运维的各个方面。按照这个清单逐步实现，可以构建一个功能完整、性能优良、易于维护的模块化单体应用。",
  "lastModified" : 1764639821602
}, {
  "filePath" : "sample.csv",
  "fileName" : "sample.csv",
  "parentDir" : "",
  "fileType" : "CSV",
  "title" : "sample.csv",
  "contentText" : "Name,Age,City\nAlice,30,Beijing\nBob,25,Shanghai\n",
  "size" : 47,
  "modifiedAt" : 1764639821602,
  "id" : "sample.csv",
  "content" : "Name,Age,City\nAlice,30,Beijing\nBob,25,Shanghai\n",
  "lastModified" : 1764639821602
}, {
  "filePath" : "专业前景分析.html",
  "fileName" : "专业前景分析.html",
  "parentDir" : "",
  "fileType" : "HTML",
  "title" : "六大本科专业学习前景深度研究报告",
  "contentText" : "六大本科专业学习前景深度研究报告 目录导航 专业概览 信息管理与信息系统 工商管理 人力资源管理 数字经济 知识产权 汉语国际教育 对比分析 选择建议 六大本科专业 学习前景深度研究报告 数字化浪潮下的专业选择指南：从技术驱动到文化传承的全景分析 数据驱动分析 国际化视野 前瞻性洞察 核心发现 数字人才缺口 3000万 全球汉语教师需求 500万+ 知识产权就业率 90% 热门趋势 人工智能与大数据 数字化转型服务 知识产权保护 专业概览与核心洞察 对这七个专业的学习前景进行综合分析，可以得出以下结论：信息管理与信息系统和数字经济是顺应数字化浪潮的新兴热门专业，就业前景广阔，薪资水平高，但对技术能力要求较高；工商管理和人力资源管理是经典的管理类专业，就业面广，但竞争激烈，对个人综合素质和实践经验要求高，职业发展路径清晰，长期潜力巨大；知识产权专业与国家创新战略紧密相连，专业性强，人才需求稳定增长，是法律与技术的交叉领域；汉语国际教育专业则具有鲜明的国际化特色，全球汉语教师需求大，但就业受国际形势影响较大，适合热爱语言和跨文化交流的学生。 选择建议 选择哪个专业，最终取决于个人的兴趣、能力特长和职业规划。建议学生在选择时，不仅要考虑专业的\"热度\"和\"钱景\"，更要结合自身的优势和热情，选择最适合自己的发展道路。 信息管理与信息系统专业前景分析 大数据时代的\"新商科\"与\"万金油\"专业 学科归属 管理学门类下的管理科学与工程类，融合信息技术与管理理论的交叉学科。 培养目标 培养\"技术+管理\"复合型人才，成为技术与业务部门之间的桥梁。 专业特色 被誉为大数据时代的\"新商科\"和\"万金油\"专业，知识覆盖面广。 就业方向与机会 主要就业领域 IT软件 12.26% 互联网/电子商务 9.33% 制造业 5.97% 核心就业岗位 数据分析师/数据科学家 利用数据挖掘、机器学习等技术支持企业决策 信息系统工程师 负责企业信息系统的分析、设计、开发和维护 IT项目经理/产品经理 规划、组织和控制IT项目实施 薪资水平分析 维度 分类 平均起薪范围（元/月） 备注 行业 互联网/科技（头部企业） 15,000 - 20,000 竞争激烈，对学历和实习经历要求高 [972] 互联网/科技（中小型企业） 10,000 - 14,000 晋升灵活，适合积累实战经验 [972] 金融行业 12,000 - 16,000 要求具备数据分析或系统开发能力 [972] 传统制造业 9,000 - 11,000 数字化转型需求推动薪资上涨 [972] 地区 一线城市（北上广深） 12,000 - 18,000 生活成本高，但发展机会多 [972] 新一线城市（杭蓉汉等） 9,000 - 13,000 政策扶持，性价比高 [972] 二线及以下城市 6,500 - 9,000 生活成本低，但岗位选择相对较少 [972] 职业发展路径 graph TD A[\"应届毕业生\"] --> B[\"技术专家路径\"] A --> C[\"管理晋升路径\"] A --> D[\"复合发展路径\"] B --> B1[\"初级程序员/系统分析员\"] B1 --> B2[\"高级软件工程师/数据科学家\"] B2 --> B3[\"系统架构师/技术专家\"] C --> C1[\"项目经理\"] C1 --> C2[\"技术经理/产品总监\"] C2 --> C3[\"IT总监/CIO\"] D --> D1[\"IT咨询顾问\"] D1 --> D2[\"数字化转型专家\"] D2 --> D3[\"首席信息官\"] 长期薪资潜力 ¥4,000 应届生起薪 基础岗位入门水平 ¥7,972 毕业两年后 经验积累带来显著增长 [971] ¥10,784 毕业五年后 技能深化带来高回报 [971] 工商管理专业前景分析 培养具备综合管理能力的企业领导者 学科归属 管理学门类下的核心专业，研究如何运用现代管理方法进行有效的企业管理和经营决策。 培养目标 培养具备综合管理能力、能够引领企业发展的未来领导者，形成全局性的战略思维。 专业特色 覆盖面广，应用性强，注重理论与实践的紧密结合，通过案例分析、商业模拟等方式培养实践能力。 主要就业领域 各类企业 大型跨国公司、国内知名企业、中小型企业等 金融机构 银行、证券、保险、基金等金融行业 咨询公司 麦肯锡、波士顿、德勤等顶尖咨询公司 政府部门 各级政府的工商管理部门、经济管理部门 典型职业发展路径 timeline title 工商管理职业发展路径 section 入门级 \"专员/助理\" : \"市场专员\" : \"人事助理\" : \"财务分析师\" section 中级 \"主管级别\" : \"带领小团队\" : \"负责具体业务模块\" : \"2-3年经验\" section 高级 \"部门经理\" : \"全面负责职能部门\" : \"3-5年经验\" : \"跨部门协调\" section 专家级 \"总监级别\" : \"战略规划能力\" : \"跨部门协调\" : \"8-10年经验\" section 高管级 \"C级别\" : \"副总经理\" : \"总经理(CEO)\" : \"15年以上经验\" 核心就业岗位 管理培训生 (MT) 大型企业培养未来管理者的\"快车道\"，在不同部门轮岗 市场营销专员/经理 负责市场调研、品牌推广、营销策划等工作 人力资源专员/经理 负责招聘、培训、薪酬福利、绩效管理等 市场需求特点 就业面广 几乎所有行业都需要管理人才 竞争激烈 开设院校多，毕业生数量庞大 综合素质要求高 看重实习经历、领导力和沟通能力 人力资源管理专业前景分析 从传统事务性工作向战略性人力资源管理转型 学科定位与特色 1 学科归属 管理学门类下的工商管理类二级专业 [741] 2 培养目标 培养专业的组织与人才发展管理者 3 专业特色 从传统事务性工作向战略性人力资源管理转型 六大核心模块 人力资源规划 招聘与配置 培训与开发 绩效管理 薪酬福利 劳动关系 就业机会与职业发展 主要就业领域 企业内部人力资源部门 最主要的就业去向 人力资源服务机构 猎头公司、外包服务商等 [964] 管理咨询公司 人力资源咨询业务 核心就业岗位 基础职能岗 招聘专员、培训专员、薪酬绩效专员 战略性/业务伙伴岗 HRBP（人力资源业务伙伴） 专家岗/高级岗 组织发展(OD)经理、人才发展(TD)经理 薪资发展 应届生起薪 6,000-12,000元/月 [964] 人力资源总监 数十万至上百万年薪 首席人力资源官 参与公司战略决策 市场需求分析 积极因素 企业对\"人才是第一资源\"理念认同加深 [966] 新兴行业（互联网、新能源、生物医药）需求旺盛 劳动法律法规完善，专业HR人才需求增加 挑战因素 传统事务性HR被自动化和AI取代 市场对复合型、战略型HR人才要求提高 数字化HR技能（HRIS）成为新门槛 [966] 数字经济专业前景分析 紧跟国家战略，聚焦前沿技术与产业应用 交叉学科 融合经济学、管理学与计算机科学的新兴学科 前沿技术 大数据、AI、区块链、数字营销等前沿技术 国家战略 响应\"数字中国\"战略和产业升级需求 人才需求分析 3000万 2025年人才缺口 中国数字经济人才缺口预测 [546] 36.82% AI技术岗位需求增长 猎聘网2025年上半年数据 [545] 45.12% 大湾区需求增速 粤港澳大湾区数字经济人才需求 [545] 高薪岗位分析 岗位名称 起薪范围（元/月） 核心技能要求 备注 数字产品经理 15-25K 技术理解力、市场洞察力、用户体验设计 [545] 区块链经济分析师 18-30K 区块链技术、经济分析、金融知识 技术含量高 [545] 大模型算法工程师 68K 深度学习、算法优化、模型训练 平均月薪 [546] AI算法工程师 25-50万年薪 机器学习、数据分析、编程能力 [546] 核心技能培养 数据分析与编程能力 熟练掌握Python、SQL等工具 数字技术应用能力 了解并能应用大数据、AI、区块链等核心技术 商业理解与创新能力 能够将技术与商业场景结合，进行商业模式创新 长期发展潜力 3-5年后薪资涨幅 150% 远超传统专业 [546] 金融科技领域 优秀量化分析师5年内年薪突破百万 专业认证价值 CDA认证持证者面试邀约率提升2.3倍 [545] 知识产权专业前景分析 聚焦\"卡脖子\"技术保护，服务国家创新战略 学科归属 法学与管理的交叉学科，\"法学+知识产权管理\"的结合 [687] 培养目标 培养知识产权法律与管理的专门人才，从事创造、运用、保护和管理工作 专业特色 与国家创新战略紧密绑定，保护\"卡脖子\"技术的自主知识产权 主要就业领域与岗位 法律服务机构 律师事务所、专利代理事务所、商标代理公司 需求量大 [657] 企业知识产权部门 华为、腾讯等高科技企业的IP部门 [657] 政府部门与司法机关 知识产权局、版权局、法院知识产权审判庭 [687] 研究与教育机构 高校、科研院所的知识产权教学和研究 稳定需求 核心就业岗位 专利代理人/专利工程师 撰写专利申请文件、答复审查意见，技术含量最高的岗位之一 知识产权律师 处理各类知识产权诉讼和非诉业务 [657] 企业知识产权经理（IPR） 制定企业知识产权战略，管理知识产权资产 知识产权审查员 在政府部门对专利申请进行实质审查 职业发展路径 graph LR A[\"应届毕业生\"] --> B[\"专业化路径\"] A --> C[\"管理化路径\"] B --> B1[\"专利代理人\"] B1 --> B2[\"资深代理人\"] B2 --> B3[\"合伙人/专家\"] C --> C1[\"企业IP专员\"] C1 --> C2[\"知识产权经理\"] C2 --> C3[\"知识产权总监\"] style A fill:#e3f2fd style B fill:#fff3e0 style C fill:#f3e5f5 style B1 fill:#ffffff style B2 fill:#ffffff style B3 fill:#ffffff style C1 fill:#ffffff style C2 fill:#ffffff style C3 fill:#ffffff 薪资水平分析 一线城市 8-10K 应届生起薪（元/月） 北京、上海等地 [687] 新一线城市 6-8K 应届生起薪（元/月） 杭州、成都等地 [687] 二线城市 5-7K 应届生起薪（元/月） 其他二线城市 [687] 学历对薪资的影响 本科毕业生 40%的岗位集中在8-15K/月 [651] 硕士毕业生 46.2%的岗位能拿到20-50K/月 [651] 汉语国际教育专业前景分析 连接中国与世界的重要桥梁 学科归属 文学门类下的中国语言文学类，具有鲜明国际化特色 培养目标 培养从事国际中文教学与文化传播的专门人才 专业特色 国际化视野，跨文化交际能力培养 全球汉语教师需求 500万+ 全球汉语教师需求量 现有教师数量远不能满足需求，存在巨大市场缺口 机遇因素 中国经济发展和国际影响力提升 \"一带一路\"倡议深入推进 中华文化\"走出去\"战略实施 挑战因素 就业受国际关系和政策影响较大 不同国家签证政策限制 需要强大的适应和应变能力 主要就业领域 海外孔子学院 最主要的就业去向之一，遍布全球的中文推广机构 国内外学校 国内高校国际交流学院、海外中小学、大学等 国际学校 为外籍人员子女设立的国际学校 语言培训机构 线上和线下的各类语言培训公司 职业发展路径 教学专家 在一线教学岗位积累经验，成为资深教师或教学名师 管理晋升 从教师晋升为教研组长、教学主管、教务主任 课程研发 转型从事教材编写、课程设计、教学软件开发 学术研究 继续攻读硕博，从事汉语语言学、第二语言习得研究 薪资水平分析 海外教师 20-40万 年薪（人民币） 发达国家孔子学院教师，含福利补贴 国内高校/国际学校 6-10K 月薪（元） 相对稳定的工作环境 语言培训机构 浮动 与课时量挂钩 收入波动较大，多劳多得 新兴发展趋势 \"中文+职业技能\"新模式 单纯的语言教学已不能完全满足学习者需求，\"中文+职业技能\"的复合型教学模式正在成为新的发展方向。 中文+旅游 中文+商务 中文+工程 六大专业对比分析 数字化时代的专业选择全景图 专业特征对比 专业名称 学科定位 核心特色 市场需求 薪资水平 信息管理与信息系统 管理学-管理科学与工程 \"技术+管理\"复合型，大数据时代\"新商科\" 人才缺口大，数字化转型需求旺盛 一线城市12-18K/月 工商管理 管理学-工商管理 覆盖面广，培养企业领导者 就业面广，但竞争激烈 长期潜力巨大，高管薪资可观 人力资源管理 管理学-工商管理 从传统事务性向战略性HR转型 新兴行业需求旺盛，数字化HR成新门槛 HRD年薪可达数十万至上百万 数字经济 经济学/管理学交叉 紧跟国家战略，聚焦前沿技术 人才缺口近3000万，需求爆发式增长 AI算法工程师25-50万年薪 知识产权 法学与管理交叉 服务国家创新战略，保护\"卡脖子\"技术 就业率近90%，高于法学大类平均 资深代理人年收入可达数十万至上百万 汉语国际教育 文学-中国语言文学 国际化视野，跨文化交际能力培养 全球汉语教师需求500万+，但受政策影响 海外教师年薪20-40万，国内中等 职业发展路径对比 技术专家路径 信息管理与信息系统 数字经济（算法工程师） 知识产权（专利分析） 管理晋升路径 工商管理（CEO发展路径） 人力资源管理（CHO） 信息管理与信息系统（CIO） 专业深化路径 知识产权（资深代理人） 汉语国际教育（教学名师） 数字经济（技术专家） 专业选择建议 如何找到最适合自己的发展道路 选择专业的核心考量因素 个人兴趣 选择自己真正热爱的领域，才能保持长期的学习动力 能力特长 发挥自己的天赋优势，在适合的领域更容易取得成功 职业前景 考虑行业发展趋势和长期就业机会 个人价值观 选择与个人价值观和生活方式相匹配的职业 如果你对技术感兴趣 信息管理与信息系统 适合喜欢数据分析和系统开发的学生 数字经济 适合对AI、大数据等前沿技术有热情的学生 如果你善于与人沟通 工商管理 适合有领导潜质和全局思维的学生 人力资源管理 适合善于理解和帮助他人的学生 如果你有特殊兴趣 知识产权 适合对法律和技术交叉领域感兴趣的学生 汉语国际教育 适合热爱语言和跨文化交流的学生 最终建议 \"选择专业的过程，不仅是选择一个未来的职业，更是选择一种生活方式和人生轨迹。\" 深入了解 通过实习、访谈、课程体验等方式深入了解各个专业 理性权衡 综合考虑兴趣、能力、前景和价值观，做出理性选择 保持开放 大学专业不是终点，而是人生旅程的一个起点 感谢您的阅读 本报告基于公开数据和行业研究，旨在为专业选择提供客观参考。每个人的情况都是独特的，建议结合自身实际做出最适合自己的选择。 2025 六大本科专业学习前景深度研究报告 | 数据来源于公开资料整理",
  "size" : 117786,
  "modifiedAt" : 1764639821606,
  "id" : "专业前景分析.html",
  "content" : "六大本科专业学习前景深度研究报告 目录导航 专业概览 信息管理与信息系统 工商管理 人力资源管理 数字经济 知识产权 汉语国际教育 对比分析 选择建议 六大本科专业 学习前景深度研究报告 数字化浪潮下的专业选择指南：从技术驱动到文化传承的全景分析 数据驱动分析 国际化视野 前瞻性洞察 核心发现 数字人才缺口 3000万 全球汉语教师需求 500万+ 知识产权就业率 90% 热门趋势 人工智能与大数据 数字化转型服务 知识产权保护 专业概览与核心洞察 对这七个专业的学习前景进行综合分析，可以得出以下结论：信息管理与信息系统和数字经济是顺应数字化浪潮的新兴热门专业，就业前景广阔，薪资水平高，但对技术能力要求较高；工商管理和人力资源管理是经典的管理类专业，就业面广，但竞争激烈，对个人综合素质和实践经验要求高，职业发展路径清晰，长期潜力巨大；知识产权专业与国家创新战略紧密相连，专业性强，人才需求稳定增长，是法律与技术的交叉领域；汉语国际教育专业则具有鲜明的国际化特色，全球汉语教师需求大，但就业受国际形势影响较大，适合热爱语言和跨文化交流的学生。 选择建议 选择哪个专业，最终取决于个人的兴趣、能力特长和职业规划。建议学生在选择时，不仅要考虑专业的\"热度\"和\"钱景\"，更要结合自身的优势和热情，选择最适合自己的发展道路。 信息管理与信息系统专业前景分析 大数据时代的\"新商科\"与\"万金油\"专业 学科归属 管理学门类下的管理科学与工程类，融合信息技术与管理理论的交叉学科。 培养目标 培养\"技术+管理\"复合型人才，成为技术与业务部门之间的桥梁。 专业特色 被誉为大数据时代的\"新商科\"和\"万金油\"专业，知识覆盖面广。 就业方向与机会 主要就业领域 IT软件 12.26% 互联网/电子商务 9.33% 制造业 5.97% 核心就业岗位 数据分析师/数据科学家 利用数据挖掘、机器学习等技术支持企业决策 信息系统工程师 负责企业信息系统的分析、设计、开发和维护 IT项目经理/产品经理 规划、组织和控制IT项目实施 薪资水平分析 维度 分类 平均起薪范围（元/月） 备注 行业 互联网/科技（头部企业） 15,000 - 20,000 竞争激烈，对学历和实习经历要求高 [972] 互联网/科技（中小型企业） 10,000 - 14,000 晋升灵活，适合积累实战经验 [972] 金融行业 12,000 - 16,000 要求具备数据分析或系统开发能力 [972] 传统制造业 9,000 - 11,000 数字化转型需求推动薪资上涨 [972] 地区 一线城市（北上广深） 12,000 - 18,000 生活成本高，但发展机会多 [972] 新一线城市（杭蓉汉等） 9,000 - 13,000 政策扶持，性价比高 [972] 二线及以下城市 6,500 - 9,000 生活成本低，但岗位选择相对较少 [972] 职业发展路径 graph TD A[\"应届毕业生\"] --> B[\"技术专家路径\"] A --> C[\"管理晋升路径\"] A --> D[\"复合发展路径\"] B --> B1[\"初级程序员/系统分析员\"] B1 --> B2[\"高级软件工程师/数据科学家\"] B2 --> B3[\"系统架构师/技术专家\"] C --> C1[\"项目经理\"] C1 --> C2[\"技术经理/产品总监\"] C2 --> C3[\"IT总监/CIO\"] D --> D1[\"IT咨询顾问\"] D1 --> D2[\"数字化转型专家\"] D2 --> D3[\"首席信息官\"] 长期薪资潜力 ¥4,000 应届生起薪 基础岗位入门水平 ¥7,972 毕业两年后 经验积累带来显著增长 [971] ¥10,784 毕业五年后 技能深化带来高回报 [971] 工商管理专业前景分析 培养具备综合管理能力的企业领导者 学科归属 管理学门类下的核心专业，研究如何运用现代管理方法进行有效的企业管理和经营决策。 培养目标 培养具备综合管理能力、能够引领企业发展的未来领导者，形成全局性的战略思维。 专业特色 覆盖面广，应用性强，注重理论与实践的紧密结合，通过案例分析、商业模拟等方式培养实践能力。 主要就业领域 各类企业 大型跨国公司、国内知名企业、中小型企业等 金融机构 银行、证券、保险、基金等金融行业 咨询公司 麦肯锡、波士顿、德勤等顶尖咨询公司 政府部门 各级政府的工商管理部门、经济管理部门 典型职业发展路径 timeline title 工商管理职业发展路径 section 入门级 \"专员/助理\" : \"市场专员\" : \"人事助理\" : \"财务分析师\" section 中级 \"主管级别\" : \"带领小团队\" : \"负责具体业务模块\" : \"2-3年经验\" section 高级 \"部门经理\" : \"全面负责职能部门\" : \"3-5年经验\" : \"跨部门协调\" section 专家级 \"总监级别\" : \"战略规划能力\" : \"跨部门协调\" : \"8-10年经验\" section 高管级 \"C级别\" : \"副总经理\" : \"总经理(CEO)\" : \"15年以上经验\" 核心就业岗位 管理培训生 (MT) 大型企业培养未来管理者的\"快车道\"，在不同部门轮岗 市场营销专员/经理 负责市场调研、品牌推广、营销策划等工作 人力资源专员/经理 负责招聘、培训、薪酬福利、绩效管理等 市场需求特点 就业面广 几乎所有行业都需要管理人才 竞争激烈 开设院校多，毕业生数量庞大 综合素质要求高 看重实习经历、领导力和沟通能力 人力资源管理专业前景分析 从传统事务性工作向战略性人力资源管理转型 学科定位与特色 1 学科归属 管理学门类下的工商管理类二级专业 [741] 2 培养目标 培养专业的组织与人才发展管理者 3 专业特色 从传统事务性工作向战略性人力资源管理转型 六大核心模块 人力资源规划 招聘与配置 培训与开发 绩效管理 薪酬福利 劳动关系 就业机会与职业发展 主要就业领域 企业内部人力资源部门 最主要的就业去向 人力资源服务机构 猎头公司、外包服务商等 [964] 管理咨询公司 人力资源咨询业务 核心就业岗位 基础职能岗 招聘专员、培训专员、薪酬绩效专员 战略性/业务伙伴岗 HRBP（人力资源业务伙伴） 专家岗/高级岗 组织发展(OD)经理、人才发展(TD)经理 薪资发展 应届生起薪 6,000-12,000元/月 [964] 人力资源总监 数十万至上百万年薪 首席人力资源官 参与公司战略决策 市场需求分析 积极因素 企业对\"人才是第一资源\"理念认同加深 [966] 新兴行业（互联网、新能源、生物医药）需求旺盛 劳动法律法规完善，专业HR人才需求增加 挑战因素 传统事务性HR被自动化和AI取代 市场对复合型、战略型HR人才要求提高 数字化HR技能（HRIS）成为新门槛 [966] 数字经济专业前景分析 紧跟国家战略，聚焦前沿技术与产业应用 交叉学科 融合经济学、管理学与计算机科学的新兴学科 前沿技术 大数据、AI、区块链、数字营销等前沿技术 国家战略 响应\"数字中国\"战略和产业升级需求 人才需求分析 3000万 2025年人才缺口 中国数字经济人才缺口预测 [546] 36.82% AI技术岗位需求增长 猎聘网2025年上半年数据 [545] 45.12% 大湾区需求增速 粤港澳大湾区数字经济人才需求 [545] 高薪岗位分析 岗位名称 起薪范围（元/月） 核心技能要求 备注 数字产品经理 15-25K 技术理解力、市场洞察力、用户体验设计 [545] 区块链经济分析师 18-30K 区块链技术、经济分析、金融知识 技术含量高 [545] 大模型算法工程师 68K 深度学习、算法优化、模型训练 平均月薪 [546] AI算法工程师 25-50万年薪 机器学习、数据分析、编程能力 [546] 核心技能培养 数据分析与编程能力 熟练掌握Python、SQL等工具 数字技术应用能力 了解并能应用大数据、AI、区块链等核心技术 商业理解与创新能力 能够将技术与商业场景结合，进行商业模式创新 长期发展潜力 3-5年后薪资涨幅 150% 远超传统专业 [546] 金融科技领域 优秀量化分析师5年内年薪突破百万 专业认证价值 CDA认证持证者面试邀约率提升2.3倍 [545] 知识产权专业前景分析 聚焦\"卡脖子\"技术保护，服务国家创新战略 学科归属 法学与管理的交叉学科，\"法学+知识产权管理\"的结合 [687] 培养目标 培养知识产权法律与管理的专门人才，从事创造、运用、保护和管理工作 专业特色 与国家创新战略紧密绑定，保护\"卡脖子\"技术的自主知识产权 主要就业领域与岗位 法律服务机构 律师事务所、专利代理事务所、商标代理公司 需求量大 [657] 企业知识产权部门 华为、腾讯等高科技企业的IP部门 [657] 政府部门与司法机关 知识产权局、版权局、法院知识产权审判庭 [687] 研究与教育机构 高校、科研院所的知识产权教学和研究 稳定需求 核心就业岗位 专利代理人/专利工程师 撰写专利申请文件、答复审查意见，技术含量最高的岗位之一 知识产权律师 处理各类知识产权诉讼和非诉业务 [657] 企业知识产权经理（IPR） 制定企业知识产权战略，管理知识产权资产 知识产权审查员 在政府部门对专利申请进行实质审查 职业发展路径 graph LR A[\"应届毕业生\"] --> B[\"专业化路径\"] A --> C[\"管理化路径\"] B --> B1[\"专利代理人\"] B1 --> B2[\"资深代理人\"] B2 --> B3[\"合伙人/专家\"] C --> C1[\"企业IP专员\"] C1 --> C2[\"知识产权经理\"] C2 --> C3[\"知识产权总监\"] style A fill:#e3f2fd style B fill:#fff3e0 style C fill:#f3e5f5 style B1 fill:#ffffff style B2 fill:#ffffff style B3 fill:#ffffff style C1 fill:#ffffff style C2 fill:#ffffff style C3 fill:#ffffff 薪资水平分析 一线城市 8-10K 应届生起薪（元/月） 北京、上海等地 [687] 新一线城市 6-8K 应届生起薪（元/月） 杭州、成都等地 [687] 二线城市 5-7K 应届生起薪（元/月） 其他二线城市 [687] 学历对薪资的影响 本科毕业生 40%的岗位集中在8-15K/月 [651] 硕士毕业生 46.2%的岗位能拿到20-50K/月 [651] 汉语国际教育专业前景分析 连接中国与世界的重要桥梁 学科归属 文学门类下的中国语言文学类，具有鲜明国际化特色 培养目标 培养从事国际中文教学与文化传播的专门人才 专业特色 国际化视野，跨文化交际能力培养 全球汉语教师需求 500万+ 全球汉语教师需求量 现有教师数量远不能满足需求，存在巨大市场缺口 机遇因素 中国经济发展和国际影响力提升 \"一带一路\"倡议深入推进 中华文化\"走出去\"战略实施 挑战因素 就业受国际关系和政策影响较大 不同国家签证政策限制 需要强大的适应和应变能力 主要就业领域 海外孔子学院 最主要的就业去向之一，遍布全球的中文推广机构 国内外学校 国内高校国际交流学院、海外中小学、大学等 国际学校 为外籍人员子女设立的国际学校 语言培训机构 线上和线下的各类语言培训公司 职业发展路径 教学专家 在一线教学岗位积累经验，成为资深教师或教学名师 管理晋升 从教师晋升为教研组长、教学主管、教务主任 课程研发 转型从事教材编写、课程设计、教学软件开发 学术研究 继续攻读硕博，从事汉语语言学、第二语言习得研究 薪资水平分析 海外教师 20-40万 年薪（人民币） 发达国家孔子学院教师，含福利补贴 国内高校/国际学校 6-10K 月薪（元） 相对稳定的工作环境 语言培训机构 浮动 与课时量挂钩 收入波动较大，多劳多得 新兴发展趋势 \"中文+职业技能\"新模式 单纯的语言教学已不能完全满足学习者需求，\"中文+职业技能\"的复合型教学模式正在成为新的发展方向。 中文+旅游 中文+商务 中文+工程 六大专业对比分析 数字化时代的专业选择全景图 专业特征对比 专业名称 学科定位 核心特色 市场需求 薪资水平 信息管理与信息系统 管理学-管理科学与工程 \"技术+管理\"复合型，大数据时代\"新商科\" 人才缺口大，数字化转型需求旺盛 一线城市12-18K/月 工商管理 管理学-工商管理 覆盖面广，培养企业领导者 就业面广，但竞争激烈 长期潜力巨大，高管薪资可观 人力资源管理 管理学-工商管理 从传统事务性向战略性HR转型 新兴行业需求旺盛，数字化HR成新门槛 HRD年薪可达数十万至上百万 数字经济 经济学/管理学交叉 紧跟国家战略，聚焦前沿技术 人才缺口近3000万，需求爆发式增长 AI算法工程师25-50万年薪 知识产权 法学与管理交叉 服务国家创新战略，保护\"卡脖子\"技术 就业率近90%，高于法学大类平均 资深代理人年收入可达数十万至上百万 汉语国际教育 文学-中国语言文学 国际化视野，跨文化交际能力培养 全球汉语教师需求500万+，但受政策影响 海外教师年薪20-40万，国内中等 职业发展路径对比 技术专家路径 信息管理与信息系统 数字经济（算法工程师） 知识产权（专利分析） 管理晋升路径 工商管理（CEO发展路径） 人力资源管理（CHO） 信息管理与信息系统（CIO） 专业深化路径 知识产权（资深代理人） 汉语国际教育（教学名师） 数字经济（技术专家） 专业选择建议 如何找到最适合自己的发展道路 选择专业的核心考量因素 个人兴趣 选择自己真正热爱的领域，才能保持长期的学习动力 能力特长 发挥自己的天赋优势，在适合的领域更容易取得成功 职业前景 考虑行业发展趋势和长期就业机会 个人价值观 选择与个人价值观和生活方式相匹配的职业 如果你对技术感兴趣 信息管理与信息系统 适合喜欢数据分析和系统开发的学生 数字经济 适合对AI、大数据等前沿技术有热情的学生 如果你善于与人沟通 工商管理 适合有领导潜质和全局思维的学生 人力资源管理 适合善于理解和帮助他人的学生 如果你有特殊兴趣 知识产权 适合对法律和技术交叉领域感兴趣的学生 汉语国际教育 适合热爱语言和跨文化交流的学生 最终建议 \"选择专业的过程，不仅是选择一个未来的职业，更是选择一种生活方式和人生轨迹。\" 深入了解 通过实习、访谈、课程体验等方式深入了解各个专业 理性权衡 综合考虑兴趣、能力、前景和价值观，做出理性选择 保持开放 大学专业不是终点，而是人生旅程的一个起点 感谢您的阅读 本报告基于公开数据和行业研究，旨在为专业选择提供客观参考。每个人的情况都是独特的，建议结合自身实际做出最适合自己的选择。 2025 六大本科专业学习前景深度研究报告 | 数据来源于公开资料整理",
  "lastModified" : 1764639821606
}, {
  "filePath" : "售前资料/Individual_项目实施方案.md",
  "fileName" : "Individual_项目实施方案.md",
  "parentDir" : "售前资料",
  "fileType" : "MD",
  "title" : "Individual_项目实施方案.md",
  "contentText" : "\n# **长沙市机关事务管理局**\n# **智慧后勤服务管理平台项目**\n\n\n\n# **项目实施方案**\n\n\n\n\n## **编制单位：湖南华宽通科技股份有限公司**\n## **2023年1月**\n## **目**** ****录**\n第一章 项目概述 7\n1.1 项目信息 7\n1.2 遵循标准 7\n1.3 建设内容 8\n1.3.1 项目基础设施建设 8\n1.3.2 智慧后勤服务管理平台 8\n1.3.3 内外部系统对接集成 9\n1.4 建设目标 10\n1.5 实施地点 10\n1.6 实施周期 10\n第二章 项目实施组织架构 11\n2.1 项目实施组织架构图 11\n2.2 实施组织角色定义 11\n2.3 项目团队主要成员清单 13\n第三章 项目进度计划 15\n3.1 项目阶段定义 15\n3.2 项目交付周期 15\n3.3 项目里程碑计划 15\n3.4 项目详细计划 16\n3.5 进度保障措施 18\n3.5.1 进度保障概述 18\n3.5.2 明确建设范围 19\n3.5.3 工作分解结构（WBS） 19\n3.5.4 制定进度计划 20\n3.5.5 实施进度控制 20\n第四章 项目交付实施 22\n4.1 项目交付模型 22\n4.2 项目启动阶段 22\n4.2.1 项目团队组建 22\n4.2.2 项目商务合同 23\n4.2.3 项目启动会 23\n4.2.4 项目开工申请 24\n4.2.5 项目其他准备 24\n4.3 项目规划阶段 24\n4.3.1 勘测调研 24\n4.3.2 范围确认 25\n4.3.3 深化设计 25\n4.3.4 实施方案 26\n4.4 项目执行阶段 27\n4.4.1 项目采购 27\n4.4.2 到货验收 27\n4.4.3 实施准备 28\n4.4.4 硬件实施 30\n4.4.5 软件系统实施 34\n4.4.6 集成实施 38\n4.4.7 项目测试 39\n4.4.8 等保测评 39\n4.4.9 密码测评 40\n4.4.10 项目整改 41\n4.4.11 项目上线 41\n4.4.12 项目培训 42\n4.5 项目收尾阶段 42\n4.5.1 阶段验收 42\n4.5.2 项目试运行 43\n4.5.3 竣工验收 44\n第五章 硬件系统实施 45\n5.1 智慧安全用电 45\n5.1.1 实施内容 45\n5.1.2 设备清单 45\n5.1.3 实施位置 46\n5.1.4 实施人员 46\n5.1.5 实施时间 46\n5.1.6 实施方式 46\n5.1.7 实施流程 46\n5.1.8 安全文明施工措施 47\n5.1.9 施工报告 48\n5.2 智慧物联 48\n5.2.1 实施内容 48\n5.2.2 设备清单 50\n5.2.3 实施方式 50\n5.2.4 施工时间 50\n5.2.5 实施流程 51\n5.2.6 安全文明施工措施 51\n5.2.7 施工报告 51\n5.3 AI视频监控 52\n5.3.1 实施内容 52\n5.3.2 设备清单 52\n5.3.3 实施点位 53\n5.3.4 实施方式 53\n5.3.5 实施流程 53\n5.3.6 安全文明施工措施 54\n5.3.7 施工报告 54\n5.4 基础网络 55\n5.4.1 实施内容 55\n5.4.2 机房环境实施 55\n5.4.3 网络系统实施 55\n5.4.4 网络拓扑图 56\n5.4.5 设备清单 56\n5.4.6 实施位置 57\n5.4.7 实施流程 57\n5.4.8 安全文明施工措施 58\n5.4.9 施工报告 58\n5.5 智能交通 59\n5.5.1 实施内容 59\n5.5.2 设备清单 59\n5.5.3 设备点位 59\n5.5.4 实施方式 61\n5.5.5 实施流程 61\n5.5.6 安全文明施工措施 62\n5.5.7 施工报告 62\n第六章 项目系统集成实施 63\n6.1 集成实施概述 63\n6.2 集成实施原则 63\n6.3 集成实施内容 64\n6.4 集成实施架构 64\n6.5 集成融合实施 65\n6.5.1 中枢对接实施 65\n6.5.2 系统嵌入实施 77\n6.5.3 系统对接实施 80\n6.5.4 视频融合实施 86\n第七章 项目测试方案 90\n7.1 项目概述 90\n7.2 测试范围 91\n7.3 测试目标 91\n7.4 术语定义 92\n7.5 项目测试环境 92\n7.5.1 网络系统 92\n7.5.2 主机系统 93\n7.6 测试手段 93\n7.7 测试数据 93\n7.8 测试策略 94\n7.8.1 单元测试 94\n7.8.2 集成测试 94\n7.8.3 整体测试 95\n7.9 测试流程 96\n7.9.1 概述 96\n7.9.2 需求说明书分析 96\n7.9.3 制定测试计划 97\n7.9.4 设立测试配置库 97\n7.9.5 测试环境搭建 98\n7.9.6 测试执行 98\n第八章 项目管理方案 101\n8.1 项目整合管理 101\n8.2 项目范围管理 102\n8.3 项目进度管理 103\n8.3.1 概述 103\n8.3.2 明确项范围 104\n8.3.3 WBS 104\n8.3.4 制定计划 105\n8.3.5 控制进度 105\n8.4 项目成本管理 106\n8.5 项目质量管理 108\n8.5.1 规范与标准 108\n8.5.2 项目质量规划 109\n8.5.3 质量度量 109\n8.5.4 质量考核 109\n8.5.5 过程监控与阶段评审 110\n8.5.6 系统测试与验收 110\n8.5.7 配置管理 111\n8.5.8 文档管理 111\n8.5.9 项目审计 112\n8.6 人力资源管理 112\n8.6.1 项目组织架构 112\n8.6.2 角色定义 113\n8.6.3 人力资源管理计划 114\n8.6.4 资源的释放 115\n8.6.5 项目的延期 115\n8.7 项目沟通管理 115\n8.7.1 沟通管理概述 115\n8.7.2 干系人识别 116\n8.7.3 沟通方式与途径 116\n8.7.4 沟通管理计划 118\n8.7.5 沟通计划的管理 118\n8.7.6 监控项目沟通 118\n8.8 项目风险管理 119\n8.8.1 风险识别 119\n8.8.2 风险评估 123\n8.8.3 风险应对 125\n8.9 项目采购管理 126\n8.9.1 采购计划 127\n8.9.2 合同管理 127\n8.9.3 发货与接收 127\n第九章 项目培训方案 130\n9.1 培训概述 130\n9.2 培训范围 130\n9.3 培训对象 130\n9.4 培训目标 131\n9.5 培训时间 131\n9.6 培训方式 131\n9.7 培训场地 132\n9.8 培训教程 132\n9.9 培训讲师 132\n9.10 培训考核 132\n9.11 实施培训 133\n9.11.1 培训步骤 133\n9.11.2 培训名单确认 133\n9.11.3 计划编制 133\n9.11.4 通知发布 134\n9.11.5 实施培训 135\n9.11.6 培训评估 135\n第十章 项目验收方案 138\n10.1 验收概述 138\n10.2 验收内容 138\n10.3 验收标准 139\n10.4 验收组织 139\n10.5 验收方式 140\n10.6 验收准备 140\n10.7 验收步骤 140\n10.8 验收报告（模板） 141\n10.8.1 项目基本信息 141\n10.8.2 项目合同信息 141\n10.8.3 项目建设周期 141\n10.8.4 项目建设情况 142\n10.8.5 项目验收计划 143\n10.8.6 项目验收结论 145\n10.8.7 附件 145\n\n\n# \n# 项目概述\n## 项目信息\n项目名称：长沙市机关事务管理局智慧后勤服务管理平台项目\n建设单位：长沙市机关事务管理局\n监理单位：湖南天道信息技术咨询有限公司\n承建单位：湖南华宽通科技股份有限公司\n## 遵循标准\n- 国家、行业主管部门颁布的相关标准；\n- 国务院办公厅《信息共享互联互通平台建设指南（试行）》；\n- 《政府信息交换语言标准》；\n- 《国家电子政务工程建设项目管理暂行办法》（发改委2007)55号令）；\n- 《国家政务信息化项目建设管理办法》（国办发〔2019〕57号）；\n- GB/Z 19669-2005《XML在电子政务中的应用指南》；\n- GB/T 8567-2006《计算机软件文档编制规范》；\n- GB/T 9385-2008《计算机软件需求规格说明规范》；\n- GB/T 9386-2008《计算机软件测试文档编制规范》；\n- GB/T 11457-2006《信息技术软件工程术语》；\n- GB/T 25000.10-2016《系统与软件工程系统与软件质量要求和评价（SQuaRE）第10部分：系统与软件质量模型》；\n- GB/T 8566-2007《信息技术软件生存周期过程》；\n- GB/T 35273-2020《信息安全技术个人信息安全规范》；\n- GB/T 20271-2006《信息安全技术信息系统通用安全技术要求》；\n- GB/T 20270-2006《信息安全技术网络基础安全技术要求》；\n- GB/T 20269-2006《信息安全技术信息系统安全管理要求》；\n- GB/T 35282-2017《信息安全技术电子政务移动办公系统安全技术规范》；\n- GB/T 22239-2019《信息安全技术网络安全等级保护基本要求》；\n- GB/T 39412-2020《信息安全技术代码安全审计规范》；\n- GB/T 22240-2020《信息安全技术网络安全等级保护定级指南》；\n- GB/T 25068.1-2020《信息技术安全技术网络安全第1部分：综述和概念》；\n- GB/T 25068.2-2020《信息技术安全技术网络安全第2.部分：网络安全设计和实现指南》；\n- GB/T 22239-2019《信息安全技术网络安全等级保护基本要求第4部分：物联网安全扩展要求》。\n## 建设内容\n长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容包括以下三个方面：\n- 项目基础设施建设；\n- 智慧后勤服务管理平台建设；\n- 内外部系统对接与集成。\n### 项目基础设施建设\n长沙市机关事务管理局智慧后勤服务管理平台项目基础设施建设内容包括：智慧安全用电系统建设、智慧物联网络建设、AI视频监控系统建设、基础网络系统建设、智能交通系统建设。通过基础设施建设，一方面对现有的硬件系统提供可接入网络，另一方面也为项目提供信息和数据采集的终端，并同时通过AI视频监控系统与智能交通系统的建设为后勤管理提供更智能和直观的管理手段。\n### 智慧后勤服务管理平台\n智慧后勤服务管理平台的建设主要包括智慧后勤基础平台、智慧后勤应用平台、智慧后勤“一张图”、智慧后勤移动端应用相关内容的建设。\n智慧后勤基础平台是为项目应用部署提供基础运行环境，包括：操作系统的建设、数据库系统、中间件服务和应用基础服务或组件等。基础平台提供集约化、融合多种应用支撑服务，为整个项目提供数据初始化、统一入口、工作台、通用审批管理、物联网管理、数据资源建设、安全服务支撑等基础的服务。\n智慧后勤应用平台是为机关事务管理局各业务管理部门，提供业务后台管理的综合平台。从为机关事务局内部提供考勤管理、公文管理、用印管理、文印管理等应用，到对外的集体户口申办、应诉管理、接待管理、会务管理以及办公用房建设计划的审核、汇总和报批等功能，智慧后勤应用平台将提升机关事务局对外的服务体验及管理水平，实现业务的增效和智能化。\n智慧后勤 “一张图”，实现“所有资源一张图管理、所有设备一张图控制、所有事件一张图显示”，对数据进行直观、高效的可视化呈现，让机关大院的业务和数据变得可知可感，让决策有据可依。并帮助管理者实时了解机关大院整体的资产运行状况、车辆情况、安防情况、能效情况、服务情况等，推动机关后勤服务的管理精细化和服务专业化。\n智慧后勤移动端应用是为满足机关事务管理局在移动端的应用场景而单独开发的，它基于现有“长政通”APP和“我的长沙”城市移动综合服务平台开发，将开发完的移动应用嵌入到“长政通”App和我的长沙。其中嵌入到“长政通”APP的功能是提供给所有市直机关职工和干部的统一服务平台，实现机关后勤服务从被动到主动服务的转变，实现餐饮、物业、会务、通知公告、办公、生活等一站式服务的工具和入口，实现个人信息等基础功能、后勤主页、设施设备管理、培训管理、电子巡更、报事报修、通知公告、房屋维修项目管理等应用。\n嵌入“我的长沙”城市移动综合服务平台功能主要是提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能，提升市机关事务局的社会服务性。\n### 内外部系统对接集成\n内外部系统对接集成的建设内容包括将长沙市机关事务管理局目前已经建成的多个信息系统组网打通，实现信息的互联互通和数据共享。\n现有需要对接的系统有：智慧后勤服务管理平台与长沙市超脑服务平台、市物联网平台、人脸门禁系统、停车道闸系统、视频监控系统、长沙银行一卡通系统、办公用房系统、公务用车系统、智慧消防主机系统、巡更系统、垃圾分类称重系统、人防工程停车道闸系统、“我的长沙”城市移动综合服务平台、“长政通”app对接，以及智能交通系统与交警六合一平台对接。\n## 建设目标\n长沙市机关事务管理局智慧后勤服务管理平台项目建设目标包括以下三个方面：\n- 提高现代信息化技术在机关事务管理局各系统中应用的广度和深度，建成完善的大院基础设施、智能融合的信息技术应用和高度集成完善的智慧化大平台，充分发挥信息技术的生产力；\n- 利用最新信息化技术对各系统的相关要素进行整合，为大院内、外人员提供智慧化的办公、行政服务。通过机关综合整体信息化环境及新建的智慧后勤服务管理平台，更好的保障大院安防，减低大院能耗，提高大院管理水平，提升用户服务体验，创建绿色节约型智慧机关；\n- 为管理部门提供智慧化的管理手段，提高市直公共服务水平和行政管理效率，推动基于新技术的机关事务整体信息化发展，为机关事务管理局的管理决策提供信息化保障。\n## 实施地点\n实施地点：现场实施地点为长沙市政府园区。不需要在现场完成的工作由我方自行安排。\n## 实施周期\n实施周期：自项目合同签订完成后<u>四</u><u>个月</u><u>内</u>达到初步验收条件。\n# 项目实施组织架构\n## 项目实施组织架构图\n\n图 项目实施组织架构图\n## 实施组织角色定义\n我方在本项目中成立专门的项目管理小组以及实施团队来完成项目实施工作，在项目合同签订后，我方将指派专门的项目经理负责整个项目的执行与交付，并根据项目建设内容安排具体的实施和管理人员完成项目实施交付工作。具体角色定义如下表所示：\n表 实施组织角色定义表\n| 序号 | 角色 | 角色职责定义 |\n| :---: | :---: | :---: |\n| 1 | 项目中心 （PMO） | 参与立项评审； 指派项目经理，为项目分配合适的人力资源，协助项目经理建立项目团队； 监控项目执行过程，及时了解所有项目的人力资源、进度、质量情况，协商处理问题； 在项目结束后，对项目以及项目组成员进行综合评估； 协助项目完成项目对审与结算； 提升人员技能，考核人员绩效。 |\n| 2 | 决策支持组 | 由部门经理、中心以及公司管理层相关人员以及技术专家组成；主要职责是参与项目重大决策以及内部评审。 |\n| 3 | 项目经理 | 项目经理是立项之后的项目主要责任人，负责项目全生命周期管理。主要职责是带领项目团队在预定的时间和成本之内，交付质量合格的成果/产品。项目经理对本项目的进度、质量、成本负主要责任。 负责本项目的全面管理（包括整体、范围、时间、成本、质量、人力资源、沟通、风险、采购、干系人）； 确保项目能在既定的时间、成本范围内交付满足项目要求质量的成果或者产品； 参与以及配合项目对审以及核算相关的过程； 在项目结束时，总结项目知识和经验教训，完善文档； 对项目成员的业绩进行评估。 |\n| 4 | 质量管理组 | 质量管理组主要对项目质量情况进行监督。 监督项目的质量规划情况； 对项目过程质量进行监控； 核实项目整体交付质量。 |\n| 5 | 商务支持组 | 营销中心相关人员，包括销售人员以及商务人员。 负责产品（或合同项目）的销售，签订商务合同、跟踪合同执行过程。 负责项目客户关系维护； 商务沟通。 |\n| 6 | 售前支持组 | 项目中心解决方案部人员，主要是指参与前期解决方案的人员。 负责项目售前阶段的技术沟通； 以客户的需求为基础，在沟通的过程中根据公司产品情况以及公司的战略给客户推荐完整的解决方案； 完成项目售前阶段的其他工作，包括项目招投标过程等； 往售后完成项目知识转移； |\n| 7 | 产品支持组 | 公司产品部门相关人员，负责项目产品的相关工作： 负责参与项目自研产品相关的调研、勘测工作； 根据项目调研和需求分析情况完成项目交付产品的设计； 形成需求分析文档，并协调项目各方完成对文档的审批； 完成从需求分析到研发的知识转移过程。 |\n| 8 | 项目研发组 | 负责项目自研软件系统以及公司软件产品的相关工作： 负责软件系统的需求调研和需求分析过程； 配合项目经理完成项目的需求评审工作； 负责项目软件系统设计方案的编制以及设计评审工作； 完成软件系统的设计、开发、测试、上线工作； 根据项目要求提供项目软件相关的文档和过程提交物。 |\n| 9 | 项目实施组 | 系统集成部相关人员，按照项目实施流程规范完成项目整体实施工作： 实施前的施工现场勘测、调研和确认工作； 完成项目系统集成部分的深化设计工作； 负责硬件设备的进场报验工作； 完成项目现场的实施工作； 负责现场施工人员安全教育、技术交底和安全管理工作； 负责硬件设备调试工作； 配合完成项目的测试、测评工作。 |\n| 10 | 项目测试组 | 技术中心产品测试部相关人员，负责项目的测试工作，包括但不限于： 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |\n| 11 | 项目运维组 | 项目中心系统集成部相关人员，负责项目维护工作，包括但不限于： 项目维护方案编制； 项目现场维护工作，相关问题处理； 项目维护报告、问题处理报告编制。 |\n## 项目团队主要成员清单\n| 序号 | 姓名 | 角色 | 工作职责 | 备注说明 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 | 刘姝岐 | 总负责人 | 总领项目交付全过程，负责项目交付过程涉及到的所有商务事项 |   |\n| 2 | 余力 | 项目经理 | 负责整体项目的工作任务分解并统筹安排、跟进，协调处理项目交付过程中遇到的各种问题，确保项目按照计划有条不紊的完成交付 |   |\n| 3 | 高翔 | 产品经理 | 负责项目软件部分交付，包括软件现场调研、需求分析汇总确认、原型设计、大数据局需求对接等 |   |\n| 4 | 李义 | 技术经理 | 负责项目软件系统的设计、开发、测试、上线工作，并根据项目要求提供项目软件相关的文档和过程提交物 |   |\n| 5 | 杨湘英 | 测试组长 | 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |   |\n| 6 | 谭伟国 | 现场实施组长 | 硬件实施前的施工现场勘测、调研和确认工作； 完成项目现场硬件部分的实施和调试工作； 负责现场施工人员的安全教育、技术交底和安全管理工作。 配合完成项目硬件设备的测试、测评工作。 |   |\n| 7 | 李纯福 | 硬件工程师 | 1）智能硬件实施前的施工现场勘测、调研和确认工作； 2）完成项目现场智能硬件部分的实施工作及相关提交物的编制工作； 3）配合完成项目智能硬件设备的测试、测评工作。 |   |\n| 8 | 吉良 | 网络工程师 | 1）网络实施前的施工现场勘测、调研和确认工作； 2）完成项目现场网络部分的实施工作及相关提交物的编制工作； 3）配合完成项目网络设备的测试、测评工作。 |   |\n\n# \n# 项目进度计划\n## 项目阶段定义\n在项目的交付过程中，为了更好的对项目过程进行监控和管理，确保项目即使发生了偏差，也能通过赶工或其他调整手段来弥补项目偏差，确保项目的及时交付。长沙市机关事务管理局智慧后勤服务管理平台项目属于综合型系统集成项目，在一般项目的实施过程中，我们习惯于将项目分成以下阶段执行：\n- 项目准备阶段；\n- 项目规划阶段；\n- 项目执行阶段；\n- 项目收尾阶段。\n## 项目交付周期\n长沙市机关事务管理局智慧后勤服务管理平台项目交付周期：自项目合同签订完成后<u>四</u><u>个月内</u>达到初步验收条件。\n## 项目里程碑计划\n| 序号 | 里程碑 | 计划开始时间 | 计划结束时间 |\n| :---: | :---: | :---: | :---: |\n| 1 | 项目启动 | 2022年12月27日 | 2022年12月29日 |\n| 2 | 现场勘测 | 2022年12月28日 | 2022年12月30日 |\n| 3 | 需求调研 | 2022年12月28日 | 2023年02月17日 |\n| 4 | 项目采购 | 2022年12月27日 | 2023年01月18日 |\n| 5 | 硬件实施、单体调试 | 2023年01月05日 | 2023年02月22日 |\n| 6 | 系统开发 | 2023年01月05日 | 2023年03月15日 |\n| 7 | 系统对接 | 2023年01月20日 | 2023年02月13日 |\n| 8 | 软件测试 | 2023年02月27日 | 2023年03月23日 |\n| 9 | 系统联调测试 | 2023年03月21日 | 2023年03月29日 |\n| 10 | 项目收尾及初步验收 | 2023年03月30日 | 2023年04月27日 |\n## 项目详细计划\n| 序号 | 任务名称 | 开始时间 | 完成时间 |\n| :---: | :---: | :---: | :---: |\n| 1 | 长沙市智慧机关项目 | 2022年12月27日 | 2023年4月27日 |\n| 2 | 项目启动 | 2022年12月27日 | 2022年12月29日 |\n| 3 | 项目进度计划（初步计划） | 2022年12月27日 | 2022年12月27日 |\n| 4 | 项目人力资源计划 | 2022年12月28日 | 2022年12月28日 |\n| 5 | 项目成本预算 | 2022年12月29日 | 2022年12月29日 |\n| 6 | 项目执行 | 2022年12月27日 | 2023年3月29日 |\n| 7 | 现场勘测调研 | 2022年12月28日 | 2022年12月30日 |\n| 8 | 现场勘测 | 2022年12月28日 | 2022年12月28日 |\n| 9 | 勘测调研报告 | 2022年12月29日 | 2022年12月29日 |\n| 10 | 勘测出图 | 2022年12月30日 | 2022年12月30日 |\n| 11 | 项目采购 | 2022年12月27日 | 2023年1月18日 |\n| 12 | 项目采购计划 | 2023年1月2日 | 2023年1月4日 |\n| 13 | 机房硬件采购 | 2023年1月5日 | 2023年1月18日 |\n| 14 | 采购备货 | 2023年1月5日 | 2023年1月5日 |\n| 15 | 货物运输 | 2023年1月6日 | 2023年1月16日 |\n| 16 | 设备报验 | 2023年1月17日 | 2023年1月17日 |\n| 17 | 到货验收 | 2023年1月18日 | 2023年1月18日 |\n| 18 | 测试硬件采购 | 2022年12月27日 | 2023年1月4日 |\n| 19 | 终端设备批量采购 | 2023年1月5日 | 2023年1月18日 |\n| 20 | 采购备货 | 2023年1月5日 | 2023年1月5日 |\n| 21 | 货物运输 | 2023年1月6日 | 2023年1月16日 |\n| 22 | 设备报验 | 2023年1月17日 | 2023年1月17日 |\n| 23 | 到货验收 | 2023年1月18日 | 2023年1月18日 |\n| 24 | 项目现场启动会 | 2022年12月28日 | 2022年12月30日 |\n| 25 | 实施交付入场 | 2022年12月28日 | 2022年12月28日 |\n| 26 | 会议材料准备 | 2022年12月29日 | 2022年12月29日 |\n| 27 | 开踢会议（Kick-off Meeting） | 2022年12月30日 | 2022年12月30日 |\n| 28 | 软件需求调研分析 | 2022年12月28日 | 2023年2月17日 |\n| 29 | 需求调研 | 2022年12月28日 | 2023年2月17日 |\n| 30 | 第一阶段调研结果整理 | 2022年12月28日 | 2022年12月28日 |\n| 31 | 现有系统开发情况整理 | 2022年12月28日 | 2022年12月28日 |\n| 32 | 需求调研计划 | 2022年12月29日 | 2022年12月29日 |\n| 33 | 第二次需求调研 | 2022年12月30日 | 2023年1月19日 |\n| 34 | 原型设计与调整 | 2023年1月3日 | 2023年1月23日 |\n| 35 | 需求规格说明书 | 2023年1月24日 | 2023年2月15日 |\n| 36 | 需求评审 | 2023年2月16日 | 2023年2月17日 |\n| 37 | 外部系统对接 | 2022年12月28日 | 2023年2月13日 |\n| 38 | 客户沟通 | 2022年12月28日 | 2023年1月19日 |\n| 39 | 外部系统对接调研表 | 2022年12月28日 | 2022年12月30日 |\n| 40 | 对接系统具体情况调研 | 2023年1月17日 | 2023年1月19日 |\n| 41 | 系统对接（厂商对接） | 2023年1月20日 | 2023年2月13日 |\n| 42 | 对接需求明确（基于各对接系统） | 2023年1月20日 | 2023年2月9日 |\n| 43 | 双方确认对接技术方案 | 2023年1月24日 | 2023年2月13日 |\n| 44 | 系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 45 | 应用系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 46 | 系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 47 | 硬件对接 | 2023年1月5日 | 2023年1月12日 |\n| 48 | 对接开发调整 | 2023年1月5日 | 2023年1月11日 |\n| 49 | 对接调试 | 2023年1月6日 | 2023年1月12日 |\n| 50 | 外部系统对接 | 2023年2月14日 | 2023年3月8日 |\n| 51 | 系统对接开发 | 2023年2月14日 | 2023年3月6日 |\n| 52 | 对接调试 | 2023年2月16日 | 2023年3月8日 |\n| 53 | 软件测试 | 2023年2月27日 | 2023年3月23日 |\n| 54 | 功能性测试 | 2023年2月27日 | 2023年3月17日 |\n| 55 | 第一次BUG修复 | 2023年3月13日 | 2023年3月21日 |\n| 56 | 系统回归测试 | 2023年3月15日 | 2023年3月23日 |\n| 57 | 硬件以及基础环境实施 | 2023年1月19日 | 2023年2月22日 |\n| 58 | 机房环境实施 | 2023年1月19日 | 2023年1月25日 |\n| 59 | 硬件实施 | 2023年1月19日 | 2023年2月22日 |\n| 60 | 终端实施方案 | 2023年1月19日 | 2023年1月20日 |\n| 61 | 实施申请（甲方、物业、监理、保卫、消防） | 2023年1月23日 | 2023年1月25日 |\n| 62 | 硬件施工 | 2023年1月26日 | 2023年2月22日 |\n| 63 | 软件系统实施部署 | 2023年1月26日 | 2023年3月20日 |\n| 64 | 运行环境实施准备 | 2023年1月26日 | 2023年1月26日 |\n| 65 | 运行环境实施 | 2023年1月26日 | 2023年1月26日 |\n| 66 | 软件部署 | 2023年3月20日 | 2023年3月20日 |\n| 67 | 整体联调测试 | 2023年3月21日 | 2023年3月29日 |\n| 68 | 系统联调测试 | 2023年3月21日 | 2023年3月29日 |\n| 69 | 项目收尾 | 2023年3月30日 | 2023年4月27日 |\n| 70 | 项目培训 | 2023年3月30日 | 2023年4月19日 |\n| 71 | 项目培训方案 | 2023年3月30日 | 2023年3月31日 |\n| 72 | 培训资料准备 | 2023年4月3日 | 2023年4月7日 |\n| 73 | 实施培训 | 2023年4月10日 | 2023年4月19日 |\n| 74 | 项目初验 | 2023年4月21日 | 2023年4月27日 |\n\n## 进度保障措施\n### 进度保障概述\n在项目执行和管理的过程当中，因为不确定性以及渐进明细是项目的主要特性之一，长沙市机关事务管理局智慧后勤服务管理平台建设项目是一个综合型多系统相对负责的综合型系统集成项目，包括网络系统的建设、云平台的应用、新旧网络的融合、视频监控系统建设、智能交通建设、智慧后勤系统建设以及移动应用的建设等等，项目在执行交付过程中需要跨部门、跨单位多系统的协调和集成。项目要求在较短的实施周期内完成交付，从项目管理的角度来分析，项目的风险以及资源投入都将增加，为了保证项目进度以及项目的质量，特制定以下的项目进度保障。\n### 明确建设范围\n项目进度计划是项目管理计划的核心内容之一，也是指导整个项目进行的主要计划之一，项目计划的科学制定，是项目能确保进度的主要措施之一。\n项目进度的制定依赖于项目的建设范围，所以，在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n### 工作分解结构（WBS）\nWBS是项目进度计划制定的基础，WBS：工作分解结构是指将项目的交付成果以及完成相应成果所需要的工作进行分解，分解到40小时左右的工作包。WBS的分解遵循相应的规则：\n- 100%包含：分支上下100%包含；\n- 不可再分：最底层状态相对独立不可再分；\n- 信息透明：分解到可以充分估算完成该成果所需的时间、费用、资源等；\n- 独立责任：分解到可安排一个责任者；\n- 滚动规划：远期工作可暂时不分解。\n项目工作分解结构应包含项目所有必须交付的成果以及完成相关交付内容所需要做的工作。即WBS应能体现本项目所有的交付物与相应的工作。\n同时WBS也是整个项目管理过程的核心，项目经理通过WBS完成项目进度计划的制定，也需要通过WBS进行项目风险分析。项目的人力资源计划、项目人力成本估算均可以通过项目WBS来完成。\n### 制定进度计划\n在WBS的基础上，结合长沙市机关事务管理局智慧后勤服务管理平台建设项目的实际要求，通过排列活动顺序、估算活动持续时间、估算活动资源等动作完成项目进度计划的制定。\n在长沙市机关事务管理局智慧后勤服务管理平台建设项目中，根据项目实际情况采取倒推的方式进行进度计划的制定，在项目活动持续时间估算的过程中，先设定具体的交付和验收要求时间点，再逐步反推到项目各个阶段，相对合理的进行各个阶段时间的分配，再在各个阶段内进行各个活动时间的分配，最终根据各活动的紧前关系来评估计划的可行性和具体的资源需求以及资源冲突的可能性。\n### 实施进度控制\n在项目执行交付的过程中，本项目安排项目经理进行项目的全生命周期管理，在项目管理和监控过程中，控制进度是监控事项中的重点内容之一，控制进度的目标就是确保项目进度与项目计划之间的偏差尽量小。\n为了确保项目进度计划，项目经理乃至项目组需要进行包括但不限于下列事项的：\n- 项目执行过程中，尽量确保按照项目资源计划为项目提供相关的项目资源，以确保项目进度；\n- 制定明确的项目进度计划，确保项目按照计划执行，在项目执行过程中，应根据项目实际情况执行可落地执行的项目进度计划，并严格按照项目进度计划所规划的时间来约束项目进度，确保项目有明确的时间进度要求；\n- 明确项目采购计划，确保项目各个阶段的到货是按采购计划执行的；\n- 采取多项工作并行处理的方式，在本项目的执行过程中，因为项目的复杂性，有较多的工作是可以并行进行处理的，在项目执行过程中应尽量将能够并行处理的工作进行并行处理，确保项目进度；\n- 提前进行项目风险识别和评估，并制定风险应对措施，通过科学的风险应对确保项目进度；\n- 阶段性的进行项目进度检查，通过偏差分析，明确项目状态，并通过增加资源或成本的方式来确保进度计划，例如通过短期的赶工来确保项目进度；\n- 当项目进度确实出现较大偏差并无法纠正时，应及时的组织项目会议对项目进度计划进行调整，确保后续阶段的项目可控。\n# \n# 项目交付实施\n## 项目交付模型\n\n图 项目交付管理模型\n综合分析长沙市机关事务管理局智慧后勤服务管理平台项目的实际情况，在项目交付管理过程中，将项目根据项目具体工作大致分为四个阶段，即项目启动阶段、项目规划阶段、项目执行阶段、项目收尾阶段。项目经理根据项目阶段划分情况以及各项工作划分情况进行工作分解，并制定项目进度计划。\n## 项目启动阶段\n项目启动阶段是指项目中标至项目正式入场的阶段，本阶段的主要工作是签订商务合同、完成项目团队的组建、召开项目启动会、完成项目开工申请等主要工作。该阶段也是项目的准备阶段。\n### 项目团队组建\n在项目招投标中标后，我方将根据长沙市机关事务管理局智慧后勤服务管理平台项目的特性委派合适的项目经理负责该项目的项目交付管理。\n完成项目经理指派后，在公司内容完成项目的正式启动，并根据项目要求完成我方项目交付团队的组建。长沙市机关事务管理局智慧后勤服务管理平台项目属于综合型系统集成项目，该类型的项目，除具备综合型系统集成项目管理能力的项目经理以外，我方还将配备商务经理、售前经理、硬件产品经理、软件系统产品经理、软件系统技术经理以及开发团队、项目实施团队与项目运行维护团队参与项目的建设，根据项目不同阶段对人员的要求逐步进入或释放。\n项目团队组建完成后，召开项目内部启动会，通过项目内部启动会完成项目售前至项目售后的知识转移工作。\n同时，公司PMO（项目管理办公室）发布项目经理授权书以及项目团队组建通知。\n### 项目商务合同\n根据相关要求，在项目中标后一个月内需要完成项目《商务合同》的签订，我方将委派专门的商务经理负责该项目的商务合同签订事宜。确保在项目启动采购之前，完成项目商务合同的签订。\n### 项目启动会\n项目团队在正式入场前与建设单位、监理单位等一起召开项目启动会，项目启动会的主要作用包括以下几个方面：\n- 项目沟通机制的建立，通过项目启动会完成项目团队之间沟通机制的建立，包括项目例会制度、项目决策机制、周报要求等。\n- 项目里程碑计划的发布，在本次会议上，项目经理根据对项目情况的理解，制定基本的交付模式与里程碑计划，该里程碑计划也作为项目交付进度计划制定的基础。\n- 部分项目风险应对措施的制定，在项目启动会上，会议各方可根据项目实际情况提出在本阶段识别到的项目风险，并共同制定相应的应对措施和计划。\n- 宣布项目正式启动，近期工作的安排与计划。\n### 项目开工申请\n项目正式启动后，存在监理的情况下，项目经理需要申请《项目开工令》方可正式开工。一般情况下，项目经理根据项目具体情况编写《项目施工组织设计方案》，填写监理方提供的施工组织报验申请，监理方、建设单位评审后，签署开工令，项目正式开工。\n主要工作包括：\n- 编制项目施工组织设计方案；\n- 编制开工申请；\n- 监理方、建设单位下达项目开工令。\n### 项目其他准备\n在项目开工令申请过程中，项目经理根据项目近期工作安排情况做好项目入场准备。包括近期人员的入场协调与准备、办公场所以及环境的申请、近期详细工作计划安排等。\n## 项目规划阶段\n### 勘测调研\n项目正式启动后，项目人员入场，项目经理应根据项目建设内容组织项目现场的勘测调研工作。调研工作包括但不限于以下工作内容：\n- 编制项目勘测调研方案；\n- 根据勘测计划对项目现场进行勘测调研；\n- 编制调研报告。\n勘测调研内容根据项目建设内容的不同而不同，包括但不限于：\n- 本地机房物理环境以及基础环境调研；\n- 市政府大院网络情况调研；\n- 机关事务管理局业务情况以及软件系统需求调研；\n- 需要对接的外部系统情况调研；\n- AI视频监控系统实施环境调研以及点位确认；\n- 智慧交通系统实施环境调研以及点位确认；\n- 智能终端实施部署环境调研以及点位确认；\n- 其他用户需求调研。\n因为软件系统需求调研的工作可能持续一个较长的时间，在项目执行的过程中，我方将组建项目需求组（产品组）对长沙市机关事务管理局业务以及本次项目建设内容相关的业务进行。\n### 范围确认\n项目勘测调研工作完成后，项目经理组织项目团队对长沙市机关事务管理局智慧后勤服务管理平台项目范围进行辨识和确认。项目经理以及项目团队应根据项目前期的文档资料、现场勘测调研、客户座谈等方式收集到完整的项目需求后，完成《项目范围说明书》、《项目需求说明书》的编制。明确项目范围，并协调建设单位、监理方对项目范围达成共识。\n项目范围的明确，基本明确了项目的建设内容，也为项目目标的达成提供了建设基础。\n### 深化设计\n长沙市机关事务管理局智慧后勤服务管理平台项目属于一个综合型系统集成项目，项目涉及到的范围以及建设内容都比较广。在项目范围确认工作基本完成后，需要同步开展项目深化设计工作。深化设计工作包括两个部分，一部分是项目软件系统开发部分，需要在需求调研和需求分析的基础上开展软件系统的设计工作。另一方面是项目AI视频监控系统以及职能交通以及项目职能终端实施部分需要进行深化设计，包括具体实施点位的明确、综合布线的方式、施工的工序和安排等。\n同时，考虑项目前期设计与项目实际情况的偏差，项目往往会产生相应的变更，在深化设计的过程中，通过深化设计以及客户实际需求的情况提起项目变更，并通过设计评审过程完成变更的确认和评审。\n深化设计工作主要是基于项目前期的技术方案、现场勘测调研情况、项目前期变更要求等情况对项目设计方案（技术方案）进行调整、落地的过程。\n在项目交付过程中，基于项目交付要求，在对项目实际情况有一个全面系统了解后，明确项目实际需求，项目经理组织项目组成员对项目的技术方案进行再次进行梳理和编制，并根据项目的实际情况，落地项目的设计方案和技术方案，并确保方案的可执行。\n对于因为项目实际情况而导致项目设计方案发生变化时，项目经理应根据项目情况启动变更流程。\n设计方案包括但不限于：\n- 深化设计方案编制；\n- 提起变更；\n- 深化设计方案评审；\n- 基于评审意见的修订。\n### 实施方案\n项目实施方案是基于项目设计和项目管理计划正式启动项目实施的开始，项目经理组织项目团队对如何完成项目交付进行具体的规划，并形成相应的方案。长沙市机关事务管理局智慧后勤服务管理平台项目的实施方案应包括以下相关的内容：\n- 项目实施范围；\n- 项目工作目标分解结构；\n- 项目整体进度计划；\n- 项目人力资源规划；\n- 项目采购规划；\n- 项目本地机房实施规划；\n- 政务云环境实施规划；\n- 软件系统开发和实施规划；\n- 智能交通系统实施规划；\n- AI视频监控系统实施规划；\n- 项目系统对接融合实施规划；\n- 项目系统信创适配实施规划；\n- 项目安全等级保护测评实施规划；\n- 项目测试以及整体调整实施规划；\n- 项目运行维护规划；\n- 其他项目管理规划。\n## 项目执行阶段\n### 项目采购\n在项目规划工作进行过程中或者完成后，项目应进入实际执行，基于本项目的实际情况，为了确保项目进度，项目的实际执行工作与项目规划工作是以并行的方式进行。\n长沙市机关事务管理局智慧后勤服务管理平台项目中有较大数量的硬件设备以及终端的采购，相关设备的采购和到货直接影响到项目的实际交付。\n在项目合同签订完成后，我方即安排项目经理启动项目采购工作，公司供应链部门开始进行项目备货工作。在项目深化设计完成后，基本项目所有变更都审批完成，项目经理即开始采购。在本阶段主要工作包括：\n- 项目经理编制项目采购计划；\n- 相关计划报建设单位与监理单位，审批通过后执行。\n- 项目经理根据项目采购计划发起采购；\n- 项目经理根据项目采购情况跟踪项目到货情况。\n项目采购工作是一个相对持续的过程，在长沙市机关事务管理局智慧后勤服务管理平台项目中，项目采购工作将根据项目进度的推进和项目的实际需求完成项目备货、采购工作。\n### 到货验收\n项目经理指派具体的负责人全面负责本项目的到货验收工作。具体负责人根据项目采购计划对产品交付的时间、地点、方式以及其他条件事先完成到货规划，并提前与建设单位以及监理方进行沟通和确认，最后完成到货验收工作。\n在项目实际到货前，项目经理提前与监理单位进行到货报验。到货验收完成后，由参与到货验收的各方共同签署到货验收报告。\n到货验收方案包括但不限于：\n- 到货验收时间、地点、方式的确认；\n- 货物现场验收；\n- 完成货物入库清点；\n- 到货验收报告签署。\n对于因其他原因无法在到货现场完成到货验收的情况，项目经理在现场完成到货自检，入库清点后，再协调监理单位与建设单位共同参与到货验收。\n考虑集中到货的情况，在本项目执行过程中，项目经理将提前与机关事务管理局申请相应的设备库房，并做好设备出入库工作，以确保项目设备的安全。\n### 实施准备\n基于长沙市机关事务管理局智慧后勤服务管理平台项目的实际情况，实施准备工作非常重要，在项目正式启动实施工作之前，为了确保项目实施工作的顺利进行，同时也是在实施过程中为了确保项目实施工作不影响机关事务局以及市政府相关单位的正常办公与工作。\n相关准备工作包括：\n#### **环境考察确认**\n- 本地机房环境空间情况确认，包括但不限于机房位置、机柜空间等；\n- 基础环境强电情况确认，包括但不限于强电布线、接入条件、功率等；\n- 基础环境弱电情况确认，包括相关设备部署点位的网络情况、机房网络情况等；\n- 考虑网络系统的建设和网络改造以及物联网络的建设，需要提前完成网络VLAN以及IP申请和确认等工作。\n#### **各单位协调**\n- 在本项目中，考虑各种智能终端的安装与系统接入，需要提前完成与消防、物业、安保等部门与单位的沟通和协调，必要时，应出具建设单位同意的施工申请；\n- 考虑AI监控系统与智能交通系统的实施，需要提前与物业、安保等部门进行沟通和申请，按照市政府大院的统一规划和要求进行施工准备和施工；\n- 考虑智能交通系统需要与交警系统完成对接，需要提前协调建设单位完成与交警相关部门的对接；\n- 考虑项目有十四个需要网络改造以及对接的系统，事先应提前完成与各系统分管处室或部门进行沟通，并协调相关分管处室与部门完成与各建设厂商的对接，以确保网络改造以及系统对接的顺利；\n- 根据长沙市信息化项目建设管理办法等相关方面的要求，在长沙市机关事务管理局智慧后勤服务管理平台项目的建设过程中，软件系统应完成与中枢的能力调用对接，同时需要完成与“长政通”APP以及“我的长沙”的对接，在进行对接之前，应提前协调建设单位完成与相关监管单位以及建设厂商的对接；\n- 长沙市机关事务管理局智慧后勤服务管理平台项目中有较多的视频监控点位的建设，根据建设单位的统一规划，相关监控视频应接入到统一的视频监控系统平台中，在对接前，应提前完成与该项目的提前对接；\n- 项目建设前，应提前完成项目在政务云上相关资源的申请，并对云资源环境进行提前确认；\n- 其他需要提前申请和对接的事项。\n#### **施工入场准备**\n- 现场办公环境的协调；\n- 现场仓库的申请；\n- 施工入场准备事宜，包括施工人员安全与规范教育；\n- 施工材料以及施工设备的准备；\n#### **施工时间协调**\n- 考虑项目智能空开安装过程中不能影响建设单位以及其他相关单位的正常工作，在每个办公室空开安装时，需要协调各个办公安装的具体时间，并制定相应的安装时间表，同时在设备安装完成后必须在建设单位上班前恢复办公室的卫生以及电力，避免对建设单位以及相关单位的正常工作产生影响；\n- 在项目建设过程中，提前组建运维小组，运维小组对已经建设完成的点位在处理异常时进行机动维护。\n### 硬件实施\n#### 实施内容\n硬件实施主要包括是以下几个部分的内容：\n- 智慧安全用电硬件设备安装和调试；\n- 智慧物联硬件设备安装和调试；\n- AI视频监控硬件设备安装和调试；\n- 基础网络硬件设备安装和调试；\n- 智能交通硬件设备安装和调试。\n#### **各部分的施工方案和安全管理措施****请见****硬件系统实施****章节。**\n#### 设备清单\n| 序号 | 名称 | 规格型号 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 一 | 智慧安全用电 |   |   |\n| 1 | 智慧微断开关电源 | S3-P25 | 80 |\n| 2 | 1P 智慧微断 | S3-FC20 | 584 |\n| 3 | 2P 智慧微断 | S3-ZNC32 | 50 |\n| 4 | 3P 智慧微断 | S3-TZC63 | 31 |\n| 5 | 4P 智慧微断 | S3-TNZC63 | 47 |\n| 6 | 智慧微断通信模组 | HKT-TX01 | 80 |\n| 7 | 天线 | 定制 | 80 |\n| 8 | 导轨及箱体 | 定制 | 80 |\n| 二 | 智慧物联 |   |   |\n| 1 | 门磁传感器 | HKT-DMS01 | 115 |\n| 2 | 出入人体识别传感器 | HKT-IRC01 | 68 |\n| 3 | 多功能环境质量监测传感器 | HKT-HJC01 | 50 |\n| 4 | 温湿度传感器 | HKT-TH31 | 50 |\n| 5 | 喷淋管道压力传感器 | HKT-YL100 | 62 |\n| 6 | 水位监测传感器 | HKT-SW100 | 18 |\n| 7 | 室内消防栓压力监测传感器 | HKT-YL100 | 62 |\n| 8 | 消防主机数据采集和传输边缘计算终端 | F-ITD100-L | 2 |\n| 9 | 通信接口板卡 | F-PRC100 | 2 |\n| 10 | 室内消防栓消防阀门 | SN65-Y | 62 |\n| 11 | LoRa核心网络平台 | HKT-NS | 1 |\n| 12 | 物联网网关 | HKTGW-100 | 67 |\n| 三 | AI视频监控 |   |   |\n| 1 | 高空全景感知单元 | iDS-2VPE13-A845-ZFQM | 1 |\n| 2 | 高空全景感知单元-支架 | DS-1603ZJ-P | 1 |\n| 3 | 动火离人热成像 | DS-2TD1217T-2/PA/QM | 10 |\n| 4 | 明厨亮灶专用感知单元 | DS-2XA8225F-LZQ/MJ | 10 |\n| 5 | 明厨亮灶专用感知单元支架 | DS-1292ZJ | 10 |\n| 6 | 明厨亮灶显示屏 | DS-D5055UL-B | 4 |\n| 7 | 明厨亮灶显示屏支架 | 常规壁挂支架-3255-WA1-TS | 4 |\n| 8 | 明厨亮灶解码器 | DS-6901UD | 4 |\n| 9 | 智能警戒检测单元 | DS-2CD7347QMD-LZS(3.3-9mm)(B)(白) | 2 |\n| 10 | 客流统计智能单元 | DS-2XD8846/C-IW | 4 |\n| 11 | 客流统计智能单元支架 | DS-1227ZJ-P4 | 4 |\n| 12 | AI 开放平台系列摄像机 | DS-2XA8247F-IZS(B) | 1 |\n| 13 | 网络存储设备 | DS-A81016S（单电） | 2 |\n| 14 | 服务器 | 信创产品，XC-FF21C-B12（3671） | 2 |\n| 四 | 基础网络建设 |   |   |\n| 1 | 核心交换机 | S7706 | 2 |\n| 2 | 48 端口电接口板 | ES1M2G48TX5S | 2 |\n| 3 | 48 端口光接口板 | LSS7G48SX6S0 | 2 |\n| 4 | 集群业务子卡 | ES02VSTSA | 4 |\n| 5 | 光模块 | SFP-GE-LX-SM1310 | 36 |\n| 6 | 高速电缆 | QSFP-40G-CU3M | 8 |\n| 7 | 8口POE交换机 | TL-SG2210P | 13 |\n| 8 | 16 口百兆交换机 | TL-SG2016D | 1 |\n| 9 | 16 口百兆POE交换机 | TL-SL1218MP | 1 |\n| 10 | 24口千兆交换机 | S5735S-L24T4S-AQ2 | 1 |\n| 11 | UPS 主机 | UPS2000-G-15KRTL | 1 |\n| 12 | 电池 | 12V100AH | 16 |\n| 13 | 电池柜 | 国标 | 1 |\n| 14 | 机柜 | G28242 | 1 |\n| 五 | 智能交通 |   |   |\n| 1 | 视频融合平台一体机 | DH-DSS-T9100D-SZCQ | 1 |\n| 2 | 视频融合平台硬件务器 | 信创产品，DH-DSS-T9100D-HW/10000 | 2 |\n| 3 | 网络存储服务器 | DH-EVS5248S | 1 |\n| 4 | 硬盘 | ST6000NM021A | 48 |\n| 5 | 管理终端电脑 | 信创产品，XC-P421P/V2(256G+24+Kylin)(ZY+SMI) | 1 |\n| 6 | 液晶监视屏 | DH-LM86-S400 | 1 |\n| 7 | 核心交换机 | S7003X | 1 |\n| 8 | 800万全景AR网络摄像机 | DH-PSDW82449M-AAZYQ | 3 |\n| 9 | 高空瞭望球机 | DH-SD-8C3840-CQ | 2 |\n| 10 | 42U 机柜、机架 | G28242 | 1 |\n| 11 | 400 万星光级红外AI智慧网络球机 | DH-SDT-5X2437-SZFCQ | 15 |\n| 12 | 400万全结构化卡口摄像机 | DH-CP435-CQZYQ | 40 |\n| 13 | 补光灯 | DH-ITALE-060AA-CW3530 | 40 |\n| 14 | 交换机 | S5737-L24T4S-QA2 | 4 |\n| 15 | 光模块 | SFP-GE-LX-SM1310 | 8 |\n| 六 | 安装费用 |   |   |\n| 1 | 原电箱拆除 | 现场施工 | 80 |\n| 2 | 箱体安装 | 现场施工 | 80 |\n| 3 | 新装电箱墙面开槽及恢复 | 现场施工 | 80 |\n| 4 | 1P 智慧微断安装 | 现场施工 | 584 |\n| 5 | 2P 智慧微断安装 | 现场施工 | 50 |\n| 6 | 3P、4P 智慧微断安装 | 现场施工 | 78 |\n| 7 | 电源模组安装 | 现场施工 | 80 |\n| 8 | 通信模组安装 | 现场施工 | 80 |\n| 9 | 天线安装 | 现场施工 | 80 |\n| 10 | 物联网传感器安装 | 现场施工 | 160 |\n| 11 | 高空全景感知单元安装 | 现场施工 | 1 |\n| 12 | 动火离人热成像安装 | 现场施工 | 10 |\n| 13 | 明厨亮灶专用感知单元安装 | 现场施工 | 10 |\n| 14 | 明厨亮灶显示屏安装 | 现场施工 | 4 |\n| 15 | 明厨亮灶解码器安装 | 现场施工 | 4 |\n| 16 | 智能警戒检测单元安装 | 现场施工 | 2 |\n| 17 | 客流统计智能单元安装 | 现场施工 | 4 |\n| 18 | AI 开放平台系列摄像机安装 | 现场施工 | 1 |\n| 19 | 服务器安装 | 现场施工 | 2 |\n| 20 | 挖沟槽土方 | 现场施工 | 94.62 |\n| 21 | 回填方 | 现场施工 | 94.62 |\n| 22 | 混凝土构建拆除 | 现场施工 | 0.2 |\n| 23 | C20水泥混凝土路面恢复 | 现场施工 | 0.2 |\n| 24 | 整理绿化用地 | 现场施工 | 400 |\n| 25 | 视频监控系统 | 现场施工 | 1 |\n| 26 | 物联网传感器安装 | 现场施工 | 265 |\n| 27 | 消防主机控制器联网改造 | 现场施工 | 2 |\n| 28 | 室内消防栓阀门改造 | 现场施工 | 62 |\n| 29 | 物联网网关安装 | 现场施工 | 67 |\n| 30 | 防火墙安装 | 现场施工 | 2 |\n| 31 | 交换机安装 | 现场施工 | 18 |\n| 32 | UPS系统安装 | 现场施工 | 1 |\n| 33 | 4芯光缆 | GYTA 4 G652D | 11707 |\n| 34 | 12芯光缆 | GYTA 12 G652D | 5957 |\n| 35 | 24芯光缆 | GYTA 24 G652D | 2334 |\n| 36 | 网线 | 六类网线 | 7532 |\n| 37 | 配管DN20 | 联塑 DN20 | 3392 |\n| 38 | 电线RVV3*1.5mm2 | RVV3*1.5mm2 | 2539 |\n| 39 | 72芯光纤配线架 | Hbodier 72 空箱 | 4 |\n| 40 | 光纤终端盒安装 | 国标 | 6 |\n| 41 | 光纤熔接安装 | 现场施工 | 200 |\n| 42 | 光纤测试 | 现场施工 | 1 |\n| 43 | 综合设备箱 500*400*200mm | 定制 | 11 |\n| 44 | 综合设备箱 330*480*135mm | 定制 | 13 |\n| 45 | 混凝土构建拆除 | 现场施工 | 2 |\n| 46 | C20水泥混凝土路面恢复 | 现场施工 | 2 |\n| 47 | 整理绿化用地 | 现场施工 | 624 |\n| 48 | 室外设备机柜 | 定制 | 4 |\n| 49 | 室外设备箱560*210 | 300*400，定制 | 47 |\n| 50 | 光纤收发器(1光1电) | FC311A-3+FC311B-3 | 16 |\n| 51 | 光纤收发器(1光2电) | FC311A-3+FC314B-3 | 8 |\n| 52 | 光纤收发器(1光4电) | FC311A-3+FC314B-3 | 8 |\n| 53 | 光纤收发器机架 | TL-FC1400 | 5 |\n| 54 | 避雷器 | 绿联80740 | 42 |\n| 55 | 配线YJV3*6mm2 | YJV3*6mm2 | 2730 |\n| 56 | 配线RVV3*2.5 | RVV3*2.5 | 3917 |\n| 57 | 配管DN32 | 联塑 DN32 | 126 |\n| 58 | 室外立杆安装 | 定制 | 42 |\n| 59 | 光纤熔接安装 | 现场施工 | 200 |\n| 60 | 混凝土构建拆除 | 现场施工 | 4 |\n| 61 | C20水泥混凝土路面恢复 | 现场施工 | 4 |\n| 62 | 整理绿化用地 | 现场施工 | 400 |\n| 63 | 监控系统摄像头安装 | 现场施工 | 60 |\n| 64 | 智能交通系统 | 现场施工 | 1 |\n| 65 | 人脸识别门禁系统 | 现场施工 | 10 |\n| 66 | 停车道闸系统 | 现场施工 | 7 |\n| 67 | 长沙银行一卡通系统 | 现场施工 | 1 |\n| 68 | 视频监控系统 | 现场施工 | 1 |\n| 69 | 巡更系统 | 现场施工 | 1 |\n| 70 | 脚手架搭拆费 | 现场施工 | 1 |\n| 71 | PVC管 20mm | 联塑DN20 | 8087 |\n| 72 | PE管 20mm | 联塑DN20 | 113 |\n| 73 | 辅材 | 国标 | 1 |\n\n### 软件系统实施\n长沙市机关事务管理局智慧后勤服务管理平台项目软件系统实施工作采取软件工程通用的交付模式。\n#### 交付模型\n\n图 软件系统实施模型\n#### 需求分析\n##### 需求分析过程\n项目经理根据合同要求组织进行项目软件建设需求调研工作，包括以下工作内容：\n- 需求调研；\n- 需求分析；\n- 需求规格说明书；\n- 需求规格说明书评审；\n- 需求规格说明书修订。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 需求调研 | 《需求调研方案》 《需求调研报告》 | 项目经理、开发组 |\n| 需求分析 | 《需求规格说明书》 | 项目经理、开发组 |\n| 需求评审 | 《需求规格说明书》 | 项目经理、开发组 |\n\n软件系统的需求调研应该以项目前期知识为基础，包括技术方案、招投标文件、售前方案等。通过对前期需求整理完成后，并以此为基础开展需求的调研和确认工作。为了避免沟通过程中的噪声以及与建设方达成对目标系统的共识，应在需求整理完成后和用户进行需求的确认以及评审。\n##### 需求规格说明书\n需求规格说明书是需求分析阶段的主要成果，在需求分析过程中，提交物包括但不限于：\n- 需求调研大纲；\n- 需求调研方案；\n- 需求调研记录；\n- 需求调研报告；\n- 系统原型设计；\n- 需求规格说明书。\n需求规格说明书中应从长沙市机关事务管理局具体的业务开始进行分析，文档包括但不限于：\n- 项目背景介绍；\n- 项目建设的内容和目标；\n- 项目建设方和相关业务的现状分析、问题描述；\n- 项目用户方组织架构分析；\n- 项目建设单位业务需求分析，包括对各个业务的描述、业务流程（绘图）、业务承担的部门或者职位等；\n- 项目功能需求分析。项目功能需求分析是指从业务需求到功能需求的一个转换过程，文档要求完成从业务到功能的整体规划（功能架构）、功能模块规划、功能点规划、功能用例图、用例、界面原型、交互设计、数据项设计；\n- 需求追踪矩阵，包括横向需求追踪矩阵和纵向追踪矩阵。\n##### 需求确认与评审\n需求规格规格说明书完成后，项目经理将提起需求评审专题会议，根据项目情况由建设方或监理方组织项目需求评审会议，需求提出方或者相关专家组是项目需求评审会议的主要参会人员。项目经理准备需求评审材料，包括需求规格说明书、讲演PPT等。\n需求评审完成后，由评审组提出评审意见，对需求规格说明书调整后，由评审各方签订。\n评审通过的需求规格说明书将作为本项目软件系统验收的主要标准之一。\n#### 系统设计\n项目经理组织项目团队在需求分析的基础上进行系统设计工作，包括以下工作内容：\n- 系统概要设计；\n- 系统详细设计；\n- 系统设计评审。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统概要设计 | 《系统概要设计说明书》 | 项目经理、开发组 |\n| 系统详细设计 | 《系统详细设计说明书》 | 项目经理、开发组 |\n| 系统设计评审 | 《系统详细设计说明书》 | 项目经理、开发组 |\n#### 系统开发\n在系统设计通过的基础上，项目经理组织项目组成员完成项目软件开发过程，具体工作内容如下：\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统开发 | 项目软件 | 项目经理、开发组 |\n#### 集成融合\n长沙市机关事务管理局智慧后勤服务管理平台项目作为一个综合型系统集成项目，项目建设过程中有大量的项目系统集成融合与系统对接事项，具体包括：\n- 智慧后勤管理平台与十四个已建系统的对接；\n- 智慧后勤管理平台对能力中枢中部分共性能力的调用；\n- 智慧后勤管理平台移动端应用嵌入“长政通”APP；\n- 智慧后勤管理平台移动端应用嵌入“我的长沙”公众号；\n- 智慧后勤管理平台监控视频接入视频统一融合平台。\n#### 系统测试\n在研发过程中以及研发工作基本结束后，项目组对软件进行测试，测试过程的具体工作内容如下：\n- 项目软件系统测试；\n- 系统内部集成测试；\n- 外部系统集成测试；\n- 移动端融合测试；\n- 视频数据传输调试；\n- 数据资源共享测试。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 单元测试 | 《测试报告》 | 测试组长 |\n| 压力测试 | 《测试方案》 《测试报告》 | 测试组长 |\n| 性能测试 | 《测试方案》 《测试报告》 | 测试组长 |\n| 整体测试 | 《测试方案》 《测试报告》 | 测试组长 |\n上线部署\n系统整体测试完成后，项目组根据项目要求，将软件系统部署在建设方指定的基础环境中，并按找项目软件要求完成项目软件的启动和部署后的测试。测试完成满足要求后，宣布系统正式上线。\n长沙市机关事务管理局智慧后勤服务管理平台项目系统部署分为两个部分：\n- 智慧后勤系统平台在政务云上的部署；\n- 在本地资源上系统的部署。\n具体工作内容包括但不限于：\n- 系统上线方案；\n- 系统上线准备；\n- 系统上线申请；\n- 系统上线执行；\n- 系统上线报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统上线准备 | 《系统上线方案》 | 项目经理、开发组 |\n| 系统部署 | 《软件系统部署报告》 | 项目经理、开发组 |\n| 系统上线 | 《系统上线报告》 | 项目经理、开发组 |\n#### 用户测试\n在系统上线部署完成后，用户方队已经部署完成的系统进行测试，用户按照实际的使用情景进行测试，测试完成后，用户出具用户测试报告，项目组对测试结果中的相关问题进行确认和处理。\n长沙市机关事务管理局智慧后勤服务管理平台项目用户测试时间主要为项目试用期，系统上线完成后，在系统试用期内完成整个系统的用户测试过程。\n本阶段相关工作内容如下：\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 用户测试 | 《用户测试报告》 | 项目用户方 |\n| 问题处理 | 《用户测试问题处理报告》 | 项目经理以及项目团队成员 |\n### 集成实施\n请见项目系统集成实施章节。\n### 项目测试\n项目软硬件系统安装部署完成后，项目经理应根据项目合同要求，对项目范围内的集成系统进行集成测试，以确保集成系统的稳定性和可靠性。\n本项目包含多个内部智能终端的集成，同时也包含多个外部系统的集成，系统集成测试（系统联调）在整个项目执行过程中非常重要。\n测试前，我方测试组将制定完善的项目测试方案，测试方案应包含具体的测试范围定义、测试用例、测试时间、测试人员、测试用例数据等。\n测试方案完成后，提交项目各方进行审批，测试方案通过各方共同审批后，测试人员根据测试方案完成集成测试，并形成测试报告，由项目各方共同签署。\n测试报告将作为项目整体验收的依据之一。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| --- | :---: | :---: |\n| 制定测试方案 | 《测试方案》 《测试报告》 | 测试工程师/实施项目经理 |\n| 集成测试 | 《测试报告》（各方签署） | 测试工程师 |\n### 等保测评\n根据相关要求，长沙市机关事务管理局智慧后勤管理平台项目至少应满足等级保护二级以上的安全要求。项目等级保护是在项目设计过程中就开始进行规划，包括平台的部署环境、相关网络改造以及集成融合等各个方面。\n项目基本建设完成后，由我方编制《信息系统等级保护实施方案》，并按方案进行等级保护实施。在项目具备等保测评条件后，经项目经理提起，由建设单位申请相关机构对项目进行测评，并约定具体的测评时间。项目组应有相应的人员参与整个测评并协助完成测评相关的工作。\n测评过程中，根据测评机构反馈的相关问题和建议对信息系统进行整改，直至满足测评相关要求并通过等保测评。\n测评完成后，由测评机构出具正式的《项目信息系统等保测评报告》，并交建设方和项目组存档。\n等保测评包括但不限于：\n    - 和测评单位沟通测评工作和内容，制定测评计划，编制《信息系统等级保护实施方案》；\n    - 提起项目等保测评申请；\n    - 和建设单位、测评单位召开测评启动会议，明确测评方案和计划；\n    - 协助测评单位现场测评；\n    - 根据测评结果，反馈项目组进行整改，整改内容包括基础软硬件安全漏洞风险、应用系统安全漏洞风险等\n    - 协调测评单位复测；\n    - 根据测评结果考虑进行下一步；\n    - 和测评单位、建设单位一起编写等保制度；\n    - 对等保进度进行讨论，定稿后发布；\n    - 通过测评，归档《信息系统等保测评报告》。\n  - \n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 等级保护实施设计 | 《信息系统等级保护实施方案》 | 项目经理、实施组 |\n| 发起等保测评申请 | 《等保测评申请》 | 项目经理、实施组 |\n| 配合完成等保测评 |   | 项目经理、实施组 |\n| 系统整改 | 《系统整改报告》 | 项目经理、实施组 |\n| 测评完成 | 《信息系统等保测评报告》 | 项目经理、实施组 |\n### 密码测评\n密码测评主要针对需要通过密码技术保障信息系统物理和环境安全、网络和通信安全、设备和计算安全、应用和数据安全的项目，或针对项目合同有密码测评要求的项目。密码测评可同时针对非涉密信息系统项目和涉密信息系统项目。\n一般情况下，由项目承建单位编制好《密码应用建设方案》、《密码应用实施方案》、《密码应用应急处置方案》，并按实施方案进行密码应用实施。在项目具备密码测评条件后，经项目经理提起，由建设方申请相关机构对项目进行测评，并约定具体的测评时间。项目组应有相应的人员参与整个测评并协助完成测评相关的工作。\n测评过程中，根据测评机构反馈的相关问题和建议对信息系统进行整改，直至满足测评相关要求并通过密码测评。\n测评完成后，由测评机构出具正式的《XXX项目信息系统密码测评报告》，并交建设方和项目组存档。\n等保测评包括但不限于：\n    - 编制《密码应用建设方案》、《密码应用实施方案》、《密码应用应急处置方案》并按相关方案完成密码应用建设实施；\n    - 提起项目密码测评申请，协助建设方向测评机构申请密码测评；\n    - 协助完成密码测评；\n    - 根据测评意见和建议完成对信息系统的整改，编制整改报告；\n    - 通过密码测评，归档《项目信息系统密码测评报告》。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 密码应用建设设计 | 《密码应用建设方案》 《密码应用实施方案》 《密码应用应急处置方案》 | 项目经理、实施组 |\n| 密码测评 |   | 项目经理、实施组 |\n| 系统整改 | 《系统密码测评整改报告》 | 项目经理、实施组 |\n| 测评完成 | 《信息系统密码测评报告》 | 项目经理、实施组 |\n### 项目整改\n根据监理、客户及质量小组评估意见，全面规范项目交付质量、进度及技术资料管理。包括但不限于以下工作：\n    - 成立项目整改小组；\n    - 编制项目整改计划；\n    - 按计划进行项目整改；\n    - 输出项目整改报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 成立项目整改小组 | 整改小组名单 | 决策支撑组、PMO、项目经理、质量经理 |\n| 编制项目整改计划 | 《项目整改计划》 | PMO、项目经理、质量经理、质量工程师 |\n| 输出项目整改报告 | 《项目整改报告》 | 项目经理、质量经理、质量工程师 |\n### 项目上线\n项目系统整改完成并达到上线条件后，项目经理应申请项目上线运行。包括但不限于以下工作：\n- 项目上线申请；\n- 系统上线；\n- 系统上线问题处理；\n- 系统上线报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 上线申请 | 《系统上线申请》 《项目试运行方案》 | 项目经理 |\n| 系统上线 | 《系统上线报告》 | 项目经理 |\n### 项目培训\n系统上后，项目经理组织项目的培训活动。长沙市机关事务管理局智慧后勤管理平台项目的项目培训主要包括两个方面的培训：\n- 项目信息系统使用方面的培训；\n- 项目信息系统在日常使用过程中的简单维护和管理培训。\n具体包括但不限于以下内容：\n- 培训环境：根据项目合同培训要求准备培训环境，包括培训的场地，其他的培训设备，培训环境搭建等；\n- 培训讲师：项目根据项目实际情况指派具备培训能力的工程师担任培训讲师进行培训工作；\n- 培训方案：项目组根据项目最终的建设情况编制培训方案，对培训的具体事宜进行合理的安排，包括培训计划、批次等，编制培训教程，并根据培训方案完成培训工作；\n- 实施培训：根据培训方案完成培训工作，编制《培训报告》，建设单位以及监理单位签署培训报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 培训准备 |   | 项目经理、培训组 |\n| 制定方案 | 《培训方案》包括但不限于： 《培训计划》（培训具体安排） 《培训教程》 | 培训组 |\n| 完成培训 | 《培训报告》 | 培训组 |\n## 项目收尾阶段\n### 阶段验收\n阶段验收也称为项目初步验收。项目范围内的相关工作以及商务合同所承诺的项目成果基本提交完成后，项目经理向建设方申请项目阶段验收。\n项目阶段验收根据项目商务合同、合同附件、项目招投标文件中所要求进行项目初步验收工作。阶段验收由建设方组织验收团队（专家组）主要对项目建设内容、建设成果、提交物等进行逐一的核实确认和审阅，并对承建方进行现场质询。确保项目交付情况满足项目合同以及相关协议的要求。\n阶段验收会根据项目的具体情况（项目性质、复杂程度、用户技术力量以及项目当时的环境）来完成项目验收工作。\n本项目初步验收可采用集中验收方式，既在集中的相对比较短的时间内完成验收工作；也可以采用试运行方式进行验收，既根据项目产品在用户现场的具体运行情况来决定验收，在试运行的过程中，将运行情况进行记录，形成试运行报告，用户签字后作为验收的依据之一。\n\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 阶段验收申请 | 《阶段验收申请》 | 项目经理 |\n| 验收准备 | 《项目验收方案》 《项目阶段验收材料》 | 项目经理以及项目组成员 |\n| 阶段验收 | 《阶段验收报告》 | 项目经理以及项目组成员 |\n| 阶段验收整改 | 《阶段验收整改报告》 | 项目经理以及项目组成员 |\n### 项目试运行\n阶段验收通过，并根据项目初步验收意见完成整改后，项目经理向建设方和监理方提起项目系统试运行。\n具体包括但不限于以下工作：\n    - 申请系统试运行；\n    - 试运行方案；\n    - 试运行准备，例如：统初始化、基础数据准备等；\n    - 试运行报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 申请系统试运行 | 《项目试运行申请》 《项目试运行方案》 | 项目经理 |\n| 试运行报告 | 《试运行报告》 | 实施组 |\n### 竣工验收\n项目竣工验收是指项目完成了阶段验收中的整改内容，并通过试运行确保系统能满足建设方的整体要求，交付情况满足项目竣工验收标准，项目可启动竣工验收。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| --- | --- | --- |\n| 阶竣工验收申请 | 《竣工验收申请》 | 项目经理 |\n| 验收准备 | 《项目竣工验收方案》 《项目竣工验收材料》 | 项目经理以及项目组成员 |\n| 竣工验收 | 《竣工验收报告》 | 项目经理以及项目组成员 |\n\n\n# 硬件系统实施\n在本项目中硬件实施包括以下几个部分的内容：\n- 智慧安全用电硬件设备安装和调试；\n- 智慧物联硬件设备安装和调试；\n- AI视频监控硬件设备安装和调试；\n- 基础网络硬件设备安装和调试；\n智能交通硬件设备安装和调试。\n## 智慧安全用电\n### 实施内容\n智慧安全用电智能终端的安装包括以下的实施内容；\n- 智慧微断开关电源以及通信模组（含天线以及箱体）；\n- 1-4P智慧微断。\n在项目深化设计工作完成后，根据项目深化设计所规划的点位进行智慧微断及通讯模组的实施和部署。智慧微断开关电源以及通信模组（含天线以及箱体）一共为80套。共有80个强电箱需要改造。其中涉及到使用1P智慧微断共584个、2P智慧微断50个、3P智慧微断31个、4P智慧微断47个。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 智慧微断开关电源 | 个 | 80 |\n| 2 | 1P智慧微断 | 个 | 584 |\n| 3 | 2P智慧微断 | 个 | 50 |\n| 4 | 3P智慧微断 | 个 | 31 |\n| 5 | 4P智慧微断 | 个 | 47 |\n| 6 | 智慧微断通信模组 | 个 | 80 |\n| 7 | 天线 | 根 | 80 |\n| 8 | 导轨及箱体 | 套 | 80 |\n### 实施位置\n相关终端均部署于市政府大楼1F至13F和市委大楼1F至11F过道两侧现有的电箱位置，替换原来电箱里面的传统空开。\n### 实施人员\n因为相关内容的实施涉及到强电，为了保证安全，在项目实施过程中，相关实施人员必须持证上岗，我方位该项目配备具有强电施工证的人员进行相关内容的实施。\n### 实施时间\n因为在智能微断等设备的实施过程中必须关闭楼层电源或实施点位的总控制电源开关，同时还要完成安装后的测试，会影响到相应施工区域的用电，故我方对该项工作的施工时间安排在非正常工作时间进行，主要是利用市委、市政府大楼放假和下班后休息时间进行集中施工。\n### 实施方式\n智能微断的施工采用提前准备、分步规划、错时实施、单点测试的施工原则，即在智能微断的施工过程中，提前进行施工准备，包括在物业进行报备，并通知到相关施工区域的办公室。施工前制定详细的施工规划，并分步进行，每天只规划能够实施完成的施工内容。在时间上，错开办公和用电时间，利用休息时间进行施工，并留有充足的施工和测试以及整改的时间。在施工过程中，安装完成一个点位必须立刻进行通电测试，确保每次安装的点位取电正常后再开始下一个点位的安装。\n### 实施流程\n智慧微断的实施流程如下：\n- 制定各点位实施计划；\n- 施工前提前进行施工报备以及协调机关事务局发布施工点位的施工通知，当特殊情况时，临时调整施工计划；\n- 逐个点位施工并测试，确保各点位取电正常；\n- 清理施工现场，确保现场卫生。\n### 安全文明施工措施\n因为项目涉及到强电，在施工过程中的安全必须要进行保障，为确保施工安全，应采取如下措施：\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 禁止单人实施，施工过程至少两人一组，其中至少一人拥有电工证，无证人员禁止上手操作；\n- 实施期间安全员必须全程在岗监督；\n- 严禁带电操作，必须按照项目规范流程进行施工，施工前施工点位必须断电；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 终端安装完成后，应进行通电以及漏电测试，确保安装正确；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 智慧物联\n### 实施内容\n智慧物联终端的实施包括以下内容：门磁传感器、出入识别传感器、多功能空气质量传感器、温湿度传感器、喷淋管道压力监测传感器、室内消防栓压力监测传感器、水位监测传感器、消防控制器通信板卡、物联网网关。\n#### 门磁传感器\n数量：115个。\n部署于食堂的库房门和消防门、市政府和市委大楼B2、B1、1F~13F以及顶楼各层的消防门监测，确保消防门处于常闭状态；\n#### 出入识别传感器\n数量：68个。\n部署于食堂大楼的主要出入口、市政府和市委大楼B2、B1、1F~13F以及顶楼各层的出入口，用于监测当前会议室或者各楼层里面的实时人数统计；\n#### 多功能空气质量传感器\n数量：50个。\n部署于市政府和市委大楼各楼层过道以及会议室，用于监测所在环境的空气质量参数；\n#### 温湿度传感器\n数量：50个。\n部署于食堂库房、弱电机房、强电机房、空调机房以及水泵房，用于监测所在环境的温湿度状态，实现相关区域的安全管理\n#### 喷淋管道压力监测传感器\n数量：62个。\n部署于食堂、市政府和市委大楼各楼层的喷淋监测压力表处，实现实时监测喷淋管道的水压，确保喷淋管道水压安全。\n#### 室内消防栓压力监测传感器\n数量：62个。\n部署于食堂、市政府和市委大楼各楼层的消防栓压力表处，实现实时监测消防栓的水压，确保消防栓水压安全。\n#### 水位监测传感器\n数量：18个。\n具体部署于食堂、市委和市政府大楼内的生活用水水箱和消防用水箱，实现水位高度的监测，确保生活用水和消防用水安全。\n#### 消防控制器通信板卡\n消防控制器数据采集和传输边缘计算终端和通信接口板卡共2套，具体部署于食堂、市委和市政府大楼内的2个消防主机，实现现有消防主机的数据采集，对消防实现全方位的实时监测；\n#### 物联网网关\n数量：67台。\n具体部署于食堂、市委和市政府大楼内各楼层过道以及食堂库房、弱电机房、强电机房、空调机房以及水泵房，实现门磁传感器、出入识别传感器、多功能空气质量传感器、温湿度传感器、喷淋管道压力监测传感器、室内消防栓压力监测传感器和水位监测传感器接入物联网网关进行数据传输。\n### 设备清单\n| 序号 | 终端名称 | 单 | 数量 |\n| :---: | :---: | :---: | ---: |\n| 1 | 门磁传感器 | 个 | 115 |\n| 2 | 出入人体识别传感器 | 个 | 68 |\n| 3 | 多功能环境质量监测传感器 | 个 | 50 |\n| 4 | 温湿度传感器 | 个 | 50 |\n| 5 | 喷淋管道压力传感器 | 个 | 62 |\n| 6 | 水位监测传感器 | 个 | 18 |\n| 7 | 室内消防栓压力监测传感器 | 个 | 62 |\n| 8 | 消防主机数据采集和传输边缘计算终端 | 台 | 2 |\n| 9 | 通信接口板卡 | 个 | 2 |\n| 10 | 室内消防栓消防阀门 | 个 | 62 |\n| 11 | LoRa核心网络平台 | 套 | 1 |\n| 12 | 物联网网关 | 台 | 67 |\n### 实施方式\n在项目深化设计完成后，根据不同类型传感器所安装的区域、安装要求等情况对项目施工时间进行规划。根据各类传感器接入要求，先完成施工区域物联网网关的安装与调试，以确保其他终端安装后能尽快按成调试。\n### 施工时间\n市委市政府大楼的施工时间考虑安装过程中的噪声，主要是利用市委、市政府大楼放假和下班后休息时间进行集中施工。\n其他区域和点位在正常的上班时间施工。\n### 实施流程\n实施流程如下：\n- 制定各点位实施计划；\n- 施工前提前进行施工报备以及协调机关事务局发布施工点位的施工通知，当特殊情况时，临时调整施工计划；\n- 逐个点位施工并测试，确保各点位取电正常；\n- 清理施工现场，确保现场卫生。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## AI视频监控\nAI智能监控系统实施主要包括前端视频感知单元以及后段存储、管理以及显示设备的安装实施。\n### 实施内容\nAI视频监控系统的重点是对厨房区域进行视频感知单元的部署，通过部署全景网络智能摄像机、动火离人感知单元及摄像机等前端感知单元，实现对厨房工作人员的规范化操作进行监控，实现智能报警，对厨房门外进行余留垃圾报警，对区域内实现大场景监控，包括高空全景感知单元、明厨亮灶专用感知单元、明厨亮灶显示屏、AI开放平台系列摄像机等；\n基础网络建设为依托现有电子政务外网的网络架构，对前端设备进行接入，实现前端和后端应用的网络交互。\n本期AI视频监控系统新建28个摄像头，根据摄像头分辨率以及存储时间要求计算，至少需要存储空间28×3.7=103.6T，出于数据安全考虑和本地管理需要，配置两台本地磁盘阵列做数据备份，每台磁盘阵列含16块6T硬盘，二台存储空间合计192T，可以满足项目AI视频监控系统的视频数据存储要求。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 高空全景感知单元 | 台 | 1 |\n| 2 | 高空全景感知单元-支架 | 个 | 1 |\n| 3 | 动火离人热成像 | 台 | 10 |\n| 4 | 明厨亮灶专用感知单元 | 台 | 10 |\n| 5 | 明厨亮灶专用感知单元支架 | 台 | 10 |\n| 6 | 明厨亮灶显示屏 | 台 | 4 |\n| 7 | 明厨亮灶显示屏支架 | 台 | 4 |\n| 8 | 明厨亮灶解码器 | 台 | 4 |\n| 9 | 智能警戒检测单元 | 台 | 2 |\n| 10 | 客流统计智能单元 | 台 | 4 |\n| 11 | 客流统计智能单元支架 | 台 | 4 |\n| 12 | AI开放平台系列摄像机 | 台 | 1 |\n| 13 | 网络存储设备 | 台 | 2 |\n| 14 | 服务器 | 台 | 2 |\n### 实施点位\n| 序号 | 区域 | 位置 | 数量 | 设备 | 备注 |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 | 机关1食堂 | 机关1食堂1楼后厨南北两侧墙面 | 4 | 动火离人热成像摄像机 | 新建支架 |\n| 2 | 机关1食堂 | 机关1食堂2楼后厨东西各一台 | 2 | 动火离人热成像摄像机 | 新建支架 |\n| 3 | 机关1食堂 | 机关食堂1楼操作间西墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 4 | 机关1食堂 | 机关食堂1楼南门东侧厨房南侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 5 | 机关1食堂 | 机关食堂2楼南门北侧洗漱间北侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 6 | 机关1食堂 | 自助餐厅1楼厨房东侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 7 | 机关1食堂 | 机关1食堂后厨入口 | 1 | AI开放平台系列摄像机 | 新建立杆 |\n| 8 | 机关1食堂 | 一楼餐厅北面柱子 | 2 | 明厨亮灶显示屏 | 新建支架 |\n| 9 | 机关1食堂 | 二楼餐厅南面墙面 | 2 | 明厨亮灶显示屏 | 新建支架 |\n| 10 | 市政府大楼 | 南栋楼顶东南角 | 1 | 高空全景感知单元 | 新建支架 |\n| 11 | 市政府大楼 | 南栋1层东西侧走廊靠楼梯口 | 2 | 智能警戒检测单元 | 新建支架 |\n| 12 | 市政府大楼 | 南栋1层正门入口处 | 2 | 客流统计智能单元 | 新建支架 |\n| 13 | 市委大楼 | 北栋1层正门入口处 | 2 | 客流统计智能单元 | 新建支架 |\n### 实施方式\nAI视频监控系统的实施主要是AI摄像头的实施安装，相关的摄像头安装安装基本采用借杆或在墙壁安装的方式，仅在机关一食堂后厨入口需要新建立杆，其余均通过新建支架即可完成。\n### 实施流程\nAI视频监控系统实施流程如下：\n- 派遣施工人员进行实施现场点位的勘测与确认，再次明确具体安装方式，明确各个点位的电、网的接入方式；\n- 制定明确的安装方案与计划；\n- 新建立杆点位基坑挖掘、地笼放入、浇筑，可与智能交通系统同时实施；（隐蔽工程拍照）\n- 新建立杆点位立杆、电、网接入，其他各点位电、网接入到位；\n- 申请相关设备的IP地址，并提前将地址写入设备中；\n- 摄像头安装、（前置条件：视频监控平台部署完成。）系统接入调试；\n- 编写各点位设备安装实施单；\n- 实施完成，编写AI视频监控系统实施报告。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 基础网络\n### 实施内容\n硬件系统实施主要包括是以下几个部分的实施：\n- 网络系统的建设；\n- 本地机房设备的部署实施。\n市委市政府大院目前已经具备完整的网络系统，本次建设主要是在现有网络系统的基础上完成物联网网络系统的建设。另一部分是机房设备在本地机房的实施部署。\n### 机房环境实施\n本期项目包含设备间部署机柜、配线架、UPS以及设备间的综合布线工作，包括如下工作：\n- UPS主机以及电池箱的安装；\n- 本项目所采购的机柜的安装；\n- 机房强电线路部署；\n- 机房弱电网线的部署实施。\n目前将人防工程机房定位为数据机房，提供机房设备管理和部分业务服务。新增设备安装在既有机柜。为保障机房设备和安防监控系统设备能稳定不间断运行，设备间（机房）需配置一台UPS电源主机（15KVA），以及16只100AH/12V的UPS专用电池蓄电池。\n### 网络系统实施\n本项目配备两台核心交换机，作为本项目的汇聚交换设备，上连人防机房的核心交换，本项目其他设备主要以这两台设备作为汇聚接入。其中核心交换机（智能交通）作为智能交通系统的汇聚交换机上连本项目的核心交换。\n### 网络拓扑图\n\n图 网络系统建设拓扑图\n### 设备清单\n| 序号 | 设备 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 核心交换机 | 台 | 2 |\n| 2 | 48端口电接口板 | 块 | 2 |\n| 3 | 48端口光接口板 | 块 | 2 |\n| 4 | 集群业务子卡 | 块 | 4 |\n| 5 | 光模块 | 个 | 36 |\n| 6 | 高速电缆 | 根 | 8 |\n| 7 | 8口POE交换机 | 台 | 13 |\n| 8 | 16口百兆交换机 | 台 | 1 |\n| 9 | 16口百兆POE交换机 | 台 | 1 |\n| 10 | 24口千兆交换机 | 台 | 1 |\n| 11 | UPS主机 | 个 | 1 |\n| 12 | 电池 | 个 | 16 |\n| 13 | 电池柜 | 个 | 1 |\n| 14 | 机柜 | 个 | 1 |\n### 实施位置\n相关设备主要部署在人防工程机房，在本期项目中，部署两个42U标准机柜，新增2台核心交换以及1台智能交通核心交换机部署在该机房。同时，AI视频监控系统以及智能交通系统的NVR设备以及服务器设备均部署在该机房。\n其他交换设备根据项目设计，根据各视频点位以及传感器点位分步情况进行部署，各办公楼内可利用楼层交换设备进行部署。\n### 实施流程\n硬件系统实施是本期项目实施的基础实施内容，关系到后期的软件系统实施、智能终端实施（含智慧安全用电系统）以及AI视频监控系统、智能交通系统的实施。具体实施流程如下：\n- 完成实施环境勘测调研；\n- 项目VLAN、IP规划以及申请；\n- 制定项目实施方案、实施计划；\n- 检查环境内强电、弱电以及空间情况；\n- 申请进入人防工程机房启动实施；\n- 设备入场，包括机柜、电池柜等；\n- 机柜、UPS安装实施；\n- 强电部署到机柜；\n- 弱电部署到机柜；\n- 核心交换设备、服务器、存储设备上架安装；\n- 设备加电测试、设备初始化配置、网络测试；\n- 设备实施报告编写；\n- 工程检验以及交付。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 智能交通\n### 实施内容\n以政府机关大院为中心，通过增设卡口形成外围大防控圈，实现对车辆抓拍，并将抓拍的车辆图像及分析数据上传到管理平台实现统一管理应用，包括视频融合平台一体机、视频融合平台硬件服务器、网络存储服务器、管理终端电脑、全景AR网络摄像机等。建设智能车辆管控平台，实现对前端感知设备采集的数据进行统一接入、统一存储、统一订阅、统一推送服务，满足实时视频监控、车辆查询布控、车辆黑白名单管理、车辆超速、违停短信息提示等管理应用。\n本期共建设高空瞭望球机2台、全景AR网络摄像机3台、AI智慧网络球机15台、卡口摄像机40台、视频融合平台服务器、网络存储服务器等。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 视频融合平台一体机 | 台 | 1 |\n| 2 | 视频融合平台硬件务器 | 台 | 2 |\n| 3 | 网络存储服务器 | 块 | 1 |\n| 4 | 硬盘 | 块 | 48 |\n| 5 | 管理终端电脑 | 台 | 1 |\n| 6 | 液晶监视屏 | 台 | 1 |\n| 7 | 核心交换机 | 台 | 1 |\n| 8 | 800万全景AR网络摄像机 | 台 | 3 |\n| 9 | 高空瞭望球机 | 台 | 2 |\n| 10 | 42U机柜 | 台 | 1 |\n| 11 | 400 万星光级红外AI智慧网络球机 | 台 | 15 |\n| 12 | 400万全结构化卡口摄像机 | 台 | 40 |\n| 13 | 补光灯 | 台 | 40 |\n| 14 | 交换机 | 台 | 4 |\n| 15 | 光模块 | 块 | 8 |\n### 设备点位\n本期建设设备包括：高空瞭望 2 台、全景 AR3 台、智慧网络球机 15、卡口摄像机 40 台，摄像机共 60 台，新增支架 5 个，新立杆 34 根，共杆 8 处。\n其点位如下（最终已深化设计确认的定位位置为准）：\n| 序号 | 摄像机安装位置 | 摄像机类型 | 单位 | 数量 | 备注 |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 | 政府顶楼南边 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 2 | 市委顶楼北边 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 3 | 二办顶楼东南角 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 4 | 政府东边 | 高空瞭望球机 | 台 | 1 | 新增支架 |\n| 5 | 二办顶楼北边 | 高空瞭望球机 | 台 | 1 | 新增支架 |\n| 6 | 杜鹃广场西北 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 7 | 杜鹃广场西出口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 8 | 政协东北角人防出口东 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 9 | 档案馆院外西北角 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 10 | 一食堂南出入口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 11 | 武警中队东北角外 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 12 | 人工湖东侧车道中 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 13 | 人工湖东北角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 14 | 人工湖北杜鹃路出口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 15 | 八方小区车辆入口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 16 | 人工湖西南角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 17 | 二办东北角 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 18 | 二办前坪南侧马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 19 | 二办西南角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 20 | 人民会堂西北角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 21 | 杜鹃广场南侧中 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 22 | 杜鹃广场东侧入口 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 23 | 杜鹃广场东北角 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 24 | 市人大东南角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 25 | 杜鹃广场北侧中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 26 | 杜鹃广场西边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 27 | 杜鹃广场西出口 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 28 | 政协东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 29 | 政府月台西 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 30 | 市委月台西 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 31 | 党史研究楼前坪 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 32 | 武警中队南侧 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 33 | 一食堂南出入口 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 34 | 武警中队东北角外 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 35 | 人工湖东侧车道中 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 36 | 人工湖东北角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 37 | 人工湖北杜鹃路出口 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 38 | 人工湖北侧人防出口 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 39 | 警备司令部东边 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 40 | 警备司令部南边 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 41 | 警备司令部西边 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 42 | 恒晟南侧中 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 43 | 二办西南角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 44 | 生态停车场西北角 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 45 | 二办东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 46 | 政协南边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 47 | 人大东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n### 实施方式\n智能交通系统实施主要是摄像头的实施安装，相关的摄像头的安装基本采购新建立杆的方式进行规划，根据市政府大院的要求，所有摄像头的安装尽量不采用新建立杆的方式，而是尽量采用借杆或新建横臂的方式。\n### 实施流程\n智能交通系统实施流程如下：\n- 派遣施工人员进行实施现场点位的勘测与确认，再次明确具体安装方式，明确各个点位的电、网的接入方式；\n- 制定明确的安装方案与计划；\n- 新建立杆点位基坑挖掘、地笼放入、浇筑，可与智能交通系统同时实施；（隐蔽工程拍照）\n- 新建立杆点位立杆、电、网接入，其他各点位电、网接入到位；\n- 申请相关设备的IP地址，并提前将地址写入设备中；\n- 摄像头安装、（前置条件：视频监控平台部署完成。）系统接入调试；\n- 编写各点位设备安装实施单；\n- 实施完成，编写智能交通系统实施报告。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n- \n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n\n# 项目系统集成实施\n## 集成实施概述\n本项目涉及到十多个其他系统的集成实施，在项目交付过程中，项目系统的集成实施是项目建设过程中非常重要的实施内容之一。项目系统的集成涉及到智慧后勤管理系统与建设单位其他已建系统的对接、与智能终端的对接、能力中枢能力的调用、移动应用端的嵌入等多个方面。\n在项目的交付过程中，对于系统集成部分，需要从设计阶段开始将该部分内容作为重点，从设计、开发、实施、集成以及测试各个环节总体考虑才能确保项目的完整交付。\n## 集成实施原则\n综合考虑长沙市机关事务管理局智慧后勤管理平台项目的特性，在该项目中，项目系统集成实施的原则是统一规划、统一设计；统一规范、统一标准；分步实施、分步验收。\n统一规划、统一设计：是指长沙市机关事务管理局智慧后勤管理平台项目作为一个整体，在项目顶层设计开始就应该对项目交付过程中所需要完成的系统内外部集成与对接进行规划与设计。通过统一的规划和设计确保项目系统的整体性，也避免了在项目交付过程中出现系统对接上的遗漏。\n统一规范、统一标准：系统集成过程中有诸多的系统对接、视频对接以及智能终端对接要求，在项目交付过程中，应该对同类型的对接进行规范，统一对接规范和接口要求，特别是在数据对接与视频对接方面，采购统一的对接标准，确保各个系统对接的顺利，提升对接效率，减少后期的维护要求。\n分步实施、分步验收：智慧后勤管理系统与其他系统的集成涉及面非常广，所有的对接并非统一的整体，对接过程涉及到与其他系统监管单位、承建方、用户等各个方面的协调，在对接的过程中，基于不同系统的对接进度分步实施，每对接完成一个就验收一个，确保整体的对接进度。\n## 集成实施内容\n项目集成实施内容涉及到如下几个方面：\n- 系统嵌入实施，重要是指智慧后勤管理系统的移动端APP需要嵌入到“长政通”APP中。第二，智慧后勤管理系统的微信小程序需要嵌入“我的长沙”微信小程序内。\n- 智慧后勤管理系统与长沙市能力中枢的对接，主要是指智慧后勤管理系统对长沙市能力中枢所提供的共性能力的调用。\n- 系统之间的对接，包括垃圾分类、人防道闸系统等在内的十四个系统的对接，主要对接涉及到系统之间的数据交互和系统控制。\n- 智慧后勤管理系统与物联终端以及智慧安全用电终端设备的对接。\n- 智慧后勤管理系统中AI视频监控系统、智能交通系统与机关事务局在建视频监控统一平台系统的对接。\n- 智慧后勤管理系统中智能交通系统与交警六合一平台的对接。\n## 集成实施架构\n\n图 项目系统集成融合示意图\n## 集成融合实施\n### 中枢对接实施\n#### 概述\n根据《长沙市信息化建设项目管理办法》的相关要求，长沙市机关事务管理局智慧后勤管理平台在实施过程中部分长沙市城市大脑（中枢）具备的共性能力无须自行开发，可直接调用相关的服务。\n2021年12月，长沙正式发布上线“长沙城市超级大脑1.0”，发布智能中枢能力清单187项，数据中台归集汇聚数据总量达339亿多条，形成了人口、法人、地理信息、城市部件、房产房屋等基础数据库。\n#### 长沙市中枢能力清单\n| 系统 | 一级服务能力 | 二级服务能力 | 服务方式 | 服务状态 | 服务能力描述 |\n| --- | :---: | :---: | :---: | :---: | :---: |\n| 电子证照 | 生成证照 | 在线填报证照 | H5页面 | 已发布 | 用于各部门业务系统提交证照照面信息到电子证照综合管理系统，并且通过提交xml规范模版，让返回的页面就带有自动回填数据，减少在线填报的手工录入量 |\n| 电子证照 | 生成证照 | 证照照面信息提交服务 | 接口 | 已发布 | 电子证照照面信息提交接口，通过第三方系统后台合成数据格式，定时或手动触发推送照面信息，提交到电子证照综合管理系统 |\n| 电子证照 | 生成证照 | 在线签章证照 | 接口 | 已发布 | 获取指定的证照类型的待签章列表。该接口用于各部门业务系统获取待签章的证照列表，可以选择证照进行在线签章 |\n| 电子证照 | 生成证照 | 缺失证照在线提交 | H5页面 | 已发布 | 登记个人或企业缺失的证照信息，提供页面。 |\n| 电子证照 | 生成证照 | 生成结果获取服务 | 接口 | 已发布 | 第三方系统在提交证照生成请求后，可以通过提交时的唯一验证串（第三方系统自行产生的唯一ID）来获取此证照的相关信息，用于关联证照生成结果或其他业务场景，此接口可以在改造时通过在关键操作结束之后由后台触发或前端手动触发实现。 |\n| 电子证照 | 证照变更管理 | 电子证照作废服务 | 接口 | 已发布 | 各部门业务系统中的证照有做注销、作废等终止证照使用操作时，需调用电子证照综合管理系统的作废接口，同步实现电子证照的作废。 |\n| 电子证照 | 证照变更管理 | 电子证照变更申请页面获取服务 | H5页面 | 已发布 | 对指定的电子证照发起变更申请，适用本质是变更、换证的业务。 |\n| 电子证照 | 证照变更管理 | 电子证照变更申请数据提交 | 接口 | 已发布 | 对指定的电子证照发起变更，将新的证照数据填入xml提交，可以从其他证照共享接口或生成结果获取接口获得证照的标识，如文件编号、提取码、证照ID等。 |\n| 电子证照 | 证照信息查验 | 电子证照验证服务 | 接口 | 已发布 | 根据持证主体代码和证照信息查验证照的有效性 |\n| 电子证照 | 证照信息查验 | 基于证照标识信息获取服务 | 接口 | 已发布 | 根据证照标识检索证照信息。 |\n| 电子证照 | 证照信息查验 | 基于持证主体代码信息获取服务 | 接口 | 已发布 | 根据持证主体代码检索证照信息。 |\n| 电子证照 | 证照信息查验 | 电子证照检索服务 | 接口 | 已发布 | 根据持证主体代码检索证照列表。 |\n| 电子证照 | 证照信息查验 | 基于证照标识下载服务 | 接口 | 已发布 | 根据证照唯一标识下载证照。 |\n| 电子证照 | 证照信息查验 | 基于持证主体代码下载服务 | 接口 | 已发布 | 根据持证主体代码下载证照。 |\n| 微服务&容器平台 | 微服务/容器化框架 |   | SDK | 已发布 | 兼容springcloud框架，提供服务注册中心、api网关、服务的限流、服务鉴权、服务路由、弹性伸缩、日志归集、日志配置、熔断等功能 |\n| 微服务&容器平台 | 分布式事务 |   | SDK | 已发布 | 集成了分布式事务能力，支持 TCC 模式分布式事务管理功能。对于跨数据库、跨服务的分布式场景，用户可以在控制台上查看事务运行情况并进行超时事务处理，保证事务的一致性 |\n| 微服务&容器平台 | 自动化运维 |   | H5页面 | 已发布 | 提供从创建应用到运行应用的全程管理，功能包括创建、删除、部署、回滚、扩容、下线、启动和停止应用；支持可视化调用链查询和拓扑图；支持日志服务的查询及检索；支持系统参数的配置；有可视化的页面监控 |\n| 微服务&容器平台 | 镜像仓库 |   | H5页面 | 已发布 | 支持镜像仓库的管理，有公共仓库和租户仓库 |\n| 消息队列 | 消息发布 |   | SDK | 已发布 | 创建消息并进行发布，可以创建普通消息、延迟消息、事务消息、回溯消息等。 |\n| 消息队列 | 消息订阅 |   | SDK | 已发布 | 支持消费已发布的各种类型的消息。 |\n| 政务微信 | 即时通讯 | 聊天管理 | 工具 | 已发布 | 支持单聊、群聊方式；支持群管理和群成员的管理；支持发送文字消息、图片消息、表情、文件等消息 |\n| 政务微信 | 即时通讯 | 音视频 | 工具 | 已发布 | 支持在单人会话中，可以向对方发起视频/音频通话，并且支持开启/关闭摄像头、开启/关闭静音、开启/关闭免提；支持在多人会话中，可以向多人直接发起视频/音频通话，并且支持开启/关闭摄像头、开启/关闭静音、开启/关闭免提 |\n| 政务微信 | 即时通讯 | 红包发送 | 工具 | 已发布 | 支持在群聊中发送普照红包或者向指定成员发送专属红包 |\n| 政务微信 | 即时通讯 | 通讯录 | 工具 | 已发布 | 支持组织架构管理、成员管理及标签功能。标签功能可以管理员可以对某些同类型的成员添加同一个标签 |\n| 政务微信 | 即时通讯 | 搜索 | 工具 | 已发布 | 通过姓名、拼音、手机号码等方式可以搜索到联系人。 通过群名、群成员等方式可以搜索到群聊。 通过部门名称和相关关键字等方式可以搜索到组织节点。 通过应用名称或相关名称的关键字等方式可以搜索到应用。可通过群聊参与人、群名、聊天消息关键字、文件名、聊天时间等方法进行搜索聊天记录。 |\n| 政务微信 | 即时通讯 | 收藏 | 工具 | 已发布 | 支持收藏消息、表情、图片、文件、语音、视频、地理位置等，方便快速查找重要信息内容。 可将收藏的内容，发送至聊天中，支持分享聊天消息、表情、图片、文件、语音、视频、地理位置等。 若不需要已收藏的消息，移除收藏的内容。 |\n| 政务微信 | 协同办公支撑 | 工作邮箱接入 | 接口 | 已发布 | 支持绑定工作邮箱后，可在“机构邮箱”中进行邮件的收信、发信、读信、写信等操作，支持搜索。 支持发送邮件、分享邮件、回复邮件、转发邮件、删除邮件、收藏邮件、邮件标为未读、不再提醒他的邮件。 支持置顶邮箱提醒、消息免打扰、查找邮件、支持修改邮箱服务器设置。可以按邮箱文件夹中的分类，选择开启邮箱提醒的文件夹。 设置不提醒名单、邮箱更新频率、更换邮箱、解除邮箱绑定、加载邮件图片。 |\n| 政务微信 | 协同办公支撑 | 部门自建服务号 | SDK,接口 | 已发布 | 支持应用管理和应用能力设置。 应用管理支持设置或修改应用logo、应用名称、应用介绍、应用可见范围。支持删除应用，可以将不常用的应用，折叠到更多应用，消息提醒也会自动折叠，可以查看并回复成员发来的消息； 应用能力设置支持自定义菜单，支持发送消息，支持多媒体消息，防止截屏泄密设置，支持接收消息，支持自动回复，支持网页授权及JS—SDK等 |\n| 政务微信 | 开放平台 | 应用运营管理 | 接口 | 已发布 | 支持查看每个应用运营数据，包括：今日进入应用人数、今日进入应用次数、应用中人数。 |\n| 政务微信 | 开放平台 | 应用开发与管理 | SDK,接口 | 已发布 | 支持网页JS-SDK、SDK及接口的方式进行应用的开发，以及 应用开发的可视化管理 |\n| 政务微信 | 政务微信协同办公标准产品 | 办文 | H5页面 | 已发布 | 政务微信移动端提供基础的公文办理功能：审批流转，分发传阅，流程跟踪、审批、公文回执、公文协办、收文传阅、发文分发、关联文件、办理超时提醒，实现公文移动端办理。在政务微信端可对公文预览，签收，转办等操作，配备对应业务闭环web端后台支撑，与两办协同OA系统打通，在PC端支持国产化和X86双适配。 |\n| 政务微信 | 政务微信协同办公标准产品 | 办会 | H5页面 | 已发布 | 在政务微信端实现会议发送和回复等功能。包括：会议通知发送、短信跟踪、会议回复、会议跟踪，配备对应办会业务闭环web端后台。 |\n| 政务微信 | 政务微信协同办公标准产品 | 办事 | H5页面 | 已发布 | 政务微信端实现快捷的短信通知发送入口，指定用户、单位浏览权限，在政务微信端实现内部签呈起草，审批流转。 |\n| 统一物流 | 寄送邮件（新增物流信息）服务 | 无 | 接口 | 已发布 | 业务系统发起订单新增服务，传递给统一物流服务进而传递给物流系统处理。 支持在线资费。 在线付费或到付 支持消息推送给收寄件人 |\n| 统一物流 | 查询全国行政区划数据 | 无 | 接口 | 已发布 | 支持业务部门获取全国标准且完整的行政区划数据，用于收寄件地址填写 |\n| 统一物流 | 个人收件地址查询服务（地址库服务） | 无 | 接口 | 已发布 | 支持获取本人的邮寄地址信息 |\n| 统一物流 | 查询寄件记录服务 | 无 | 接口 | 已发布 | 支持查看本人的收寄件相关信息，包括收件人姓名，地址，联系方式，邮编。寄件人姓名，地址，联系方式，邮编 |\n| 统一物流 | 物流订单状态查询 | 无 | 接口 | 已发布 | 支持查看订单物流状态信息 |\n| 统一物流 | 物流订单取消 | 无 | 接口 | 已发布 | 支持在一定条件下取消本人的物流订单 |\n| 统一物流 | 物流订单变更 | 无 | 接口 | 已发布 | 支持在一定条件下变更本人的物流订单信息 |\n| 统一消息 | 短信通知发送 | 无 | 接口 | 已发布 | 支持通过短信渠道发送消息通知给到相关人 |\n| 统一消息 | 短信验证码发送 | 无 | 接口 | 已发布 | 支持通过短信渠道发送验证码消息给到相关人 |\n| 统一消息 | 站内信 | 无 | 接口 | 已发布 | 支持站内信系统之间发送消息 |\n| 统一消息 | 微信小程序通知 | 无 | 接口 | 已发布 | 支持通过微信小程序发送消息通知给相关人 |\n| 统一消息 | 微信服务号通知 | 无 | 接口 | 已发布 | 支持通过微信服务号发送消息通知给相关人 |\n| 统一消息 | 邮件 | 无 | 接口 | 已发布 | 支持通过邮件发送消息通知给相关人 |\n| 统一消息 | 政务微信消息通知 | 无 | 接口 | 已发布 | 支持通过政务微信发送消息通知给相关人 |\n| 统一身份认证 | 自然人认证 | 自然人账号密码登录 | 页面 | 已发布 | 提供统一的自然人通过账号密码进行验证登录 |\n| 统一身份认证 | 自然人认证 | 自然人刷脸核验登录 | 页面 | 已发布 | 提供身份认证小程序二维码，进行人像识别登录 |\n| 统一身份认证 | 自然人认证 | 自然人手机验证码核验登录 | 页面 | 已发布 | 提供用户注册时的手机号获取短信验证码登录 |\n| 统一身份认证 | 自然人认证 | 自然人微信登录 | 页面 | 已发布 | 提供的身份认证小程序二维码，进行城市服务登录 |\n| 统一身份认证 | 自然人认证 | 自然人省/国家政务服务平台登录 | 页面 | 已发布 | 提供湖南省认证平台登陆 |\n| 统一身份认证 | 自然人认证 | 自然人基本信息获取 | 页面 | 已发布 | 通过个人身份唯一标识获取本人的基本信息 |\n| 统一身份认证 | 自然人认证 | 自然人账号统一登出 | 页面 | 已发布 | 提供自然人用户对已登录的账号进行登出 |\n| 统一身份认证 | 法人认证 | 法人账号密码登录 | 页面 | 已发布 | 提供法人账号密码进行验证登录 |\n| 统一身份认证 | 法人认证 | 法人CA认证登录 | 页面 | 已发布 | 数字证书认证平台，用户通过数字证书及输入密码进行登录 |\n| 统一身份认证 | 法人认证 | 法人基本信息获取 | 页面 | 已发布 | 通过企业唯一标识，获取本企业基本信息 |\n| 统一身份认证 | 法人认证 | 法人省/国家政务服务平台登录 | 页面 | 已发布 | 提供湖南省认证平台登陆 |\n| 统一身份认证 | 法人认证 | 法人账号统一登出 | 页面 | 已发布 | 提供法人用户对已登录的账号进行登出 |\n| 统一身份认证 | 行政人员认证 | 账号密码登录 | 页面 | 已发布 | 提供政务人员通过账号和密码登录 |\n| 统一身份认证 | 行政人员认证 | 政务微信扫码登录 | 页面 | 已发布 | 提供政务微信身份认证二维码扫一扫登录 |\n| 统一身份认证 | 行政人员认证 | 基本信息获取 | 页面 | 已发布 | 通过政务人员唯一标识，获取本人基本信息 |\n| 统一身份认证 | 行政人员认证 | 账号统一登出 | 页面 | 已发布 | 提供政务人员用户对已登录的账号进行登出 |\n| 统一用户 | 个人信息 | 基本信息 | 接口 | 已发布 | 提供个人的基本信息获取，包括：姓名，性别，身份证号，住址，联系方式等 |\n| 统一用户 | 个人信息 | 政务服务办件材料 | 接口 | 待发布 | 提供政务服务办事材料获取，包括：文件名、类型、大小、上传时间 |\n| 统一用户 | 个人信息 | 电子证照 | 接口 | 已发布 | 提供电子证照信息获取，包括：证件名、证件类型、签发机构、签发时间、有效期（至）、证照状态 |\n| 统一用户 | 个人信息 | 政务服务办事记录 | 接口 | 待发布 | 提供政府服务办事记录获取，包括：事项名称，流水号，父级事项，申办时间，最新环节时间 详情：各环节受理部门，受理状态，受理时间 |\n| 统一用户 | 个人信息 | 身份证信息 | 接口 | 已发布 | 提供公积金信息获取，包括：公积金余额，缴费记录，贷款记录，贷款进度 |\n| 统一用户 | 个人信息 | 公积金信息 | 接口 | 已发布 | 提供社保信息获取，包括：参保单位，险种类型，参保日期，截止日期，参保状态 |\n| 统一用户 | 个人信息 | 社保信息 | 接口 | 已发布 | 提供不动产权信息获取，包括：共有情况，不动产单元号，不动产权证号，坐落地址，权利类型，权利性质，用途，面积，使用期限，权利其他状况，电子证照 |\n| 统一用户 | 个人信息 | 不动产权信息 | 接口 | 待发布 | 提供企业基本信息获取，包括：统一社会信用代码、法定代表人身份证、企业名称、企业类型、企业注册地、企业状态 |\n| 统一用户 | 企业信息 | 基本信息 | 接口 | 已发布 | 提供企业基本信息获取，包括：获取企业基本信息，包括：公司名称，注册资本，法定代表人，法人证件号码（主要指身份证号），法人证件名称，经营范围，营业期限等信息，负责人通信地址，负责人联系电话，负责人邮政编码，注册地址，企业成立日期，企业常用联系人联系电话，企业常用联系人姓名，企业常用联系人邮箱，统一社会信用码，企业类型，经营者姓名，邮箱，邮政编码，联系电话，备注等信息。 |\n| 统一用户 | 企业信息 | 政务服务办件材料 | 接口 | 待发布 | 提供政务服务办事材料获取，包括：文件名、类型、大小、上传时间 |\n| 统一用户 | 企业信息 | 电子证照 | 接口 | 已发布 | 提供电子证照信息获取，包括：证件名、证件类型、签发机构、签发时间、有效期（至）、证照状态 |\n| 统一用户 | 企业信息 | 政务服务办事记录 | 接口 | 待发布 | 提供政府服务办事记录获取，包括：事项名称，流水号，父级事项，申办时间，最新环节时间 详情：各环节受理部门，受理状态，受理时间 |\n| 统一用户 | 企业信息 | 法定代表人信息 | 接口 | 已发布 | 提供法定代表人信息获取，包括：法定代表人证件类型、法定代表人证件号码 |\n| 统一用户 | 企业信息 | 企业登记详情 | 接口 | 已发布 | 提供企业登记详情获取，包括：住所、业务范围、法定代表人姓名、注册资金、活动地域、业务主管单位、发证机关、有效期限、发证日期、经费来源、开办资金 |\n| 统一用户 | 企业信息 | 企业变更信息 | 接口 | 已发布 | 提供企业变更信息获取，包括：变更事项、变更前、变更后、变更日期、登记单位 |\n| 统一用户 | 政务人员信息 | 组织架构信息 | 接口 | 已发布 | 提供政务人员组织架构信息获取，包括：部门名称、职能描述、是否虚拟部门、上级部门、部门负责人、部门分管领导 |\n| 统一用户 | 政务人员信息 | 人员信息 | 接口 | 已发布 | 提供政务人员信息获取，包括：姓名、账号、性别、手机号、邮箱、证件类型、证件号码、所属部门职务、身份、入职时间 |\n| 统一待办 | 待办列表页面 | 无 | 页面 | 已发布 | 提供统一的待办汇总页面，展示用户所有待办数据 |\n| 统一待办 | 待阅列表页面 | 无 | 页面 | 已发布 | 提供统一的待阅汇总页面，展示用户所有待阅数据 |\n| 统一待办 | 待办信息管理接口 | 创建单据 | 接口 | 已发布 | 提供用户创建待办事项到待办列表 |\n| 统一待办 | 待办信息管理接口 | 关闭单据 | 接口 | 已发布 | 用户处理完待办事项（该待办事项置为已办事项，待阅置为已阅），通过请求参数传递关闭单据状态值 |\n| 统一待办 | 待办信息管理接口 | 收藏单据 | 接口 | 已发布 | 提供用户对特定单据进行收藏；根据taskId更新收藏状态 |\n| 统一待办 | 待办信息管理接口 | 废弃单据 | 接口 | 已发布 | 支持通过业务系统撤回待办事项 |\n| 统一待办 | 待办信息管理接口 | 单据已读 | 接口 | 已发布 | 用户已查看单据，原待办事项的阅读状态置为已读 |\n| 统一待办 | 查询指定用户的待办信息 | 无 | 页面 | 已发布 | 用户需查看某单个用户的所有单据（待办、待阅、已办、已阅）的数量；根据用户id、来源系统（特定应用或全部应用）获取单据数量 |\n| 统一待办 | 待办提醒 | 无 | 页面 | 已发布 | 用户催单或者单据超时未处理，需要再次提醒待办处理人时，业务系统调用单据提醒接口，给待办人下发单据通知消息 |\n| 政务开放平台 | 小程序开发框架 | 无 | 页面 | 已发布 | 为政务服务开发者提供政务服务小程序开发框架、UI组件库、脚手架工具、设计资源及相关教程 |\n| 政务开放平台 | WEB站点开发框架 | 无 | 页面 | 已发布 | 为政务服务开发者提供政务服务web站点UI组件库、前端编译工具及相关教程 |\n| 政务开放平台 | H5开发框架 | 无 | 页面 | 已发布 | 为各委办局业务系统开发商提供政务服务H5 UI组件库 |\n| 政务开放平台 | CDN静态资源管理 | 无 | 接口 | 已发布 | 为开发提供图片、json文件、csv表格等CDN静态资源提供管理与访问功能 |\n| 政务开放平台 | 动态配置管理 | 无 | 接口 | 已发布 | 提供小程序使用的配置文件、静态资源等资源 |\n| 政务运营平台 | 内置运营数据查看与分析 | 无 | 页面 | 已发布 | 提供强大数据处理分析能力，包括通用用户行为分析、专项分析、自定义报表分析和应用管理等基础能力，为产品数据运营提供支持。 |\n| 政务运营平台 | 运营报表自定义分析 | 无 | 页面 | 已发布 | 支持企业将自身的线下数据及业务数据可视化，通过数十种自定义的报表类型、多种筛选条件、维度、样式的设计，帮助企业根据自身业务特性构建数据分析报表，同时可以结合应用数据深度分析。 |\n| 政务运营平台 | 运营数据上报服务 | 无 | 接口 | 已发布 | 将埋点数通过上报接口上报至运营平台的运营数据管理中进行数据处理 |\n| 智能网关 | 反向代理服务 | 无 | 页面 | 已发布 | 提供站点全过程管理，支持由站点提供方发起站点创建，填写相关的站点配置信息，完成站点创建。 |\n| 智能网关 | 负载均衡服务 | 无 | 页面 | 已发布 | 为服务提供随机负载和会话保持的负载均衡方式 |\n| 智能网关 | 接口注册与订阅 | 无 | 页面 | 已发布 | 提供接口注册与订阅的全过程管理能力，支持由服务提供方发起服务创建，填写相关的服务配置信息，完成服务创建。 对于指定服务的订阅申请，建立审批机制，将由该服务的系统管理员进行审批，审批通过之后相应的应用即有权限调用该服务。 |\n| 表单引擎 | 可视化表单开发 | 无 | 页面 | 已发布 | 提供可视化的表单设计及开发能力，提供丰富的表单工具箱，以及可视化画板，便于开发快速完成表单的设计和代码生成，支持所见即所得预览。 |\n| 表单引擎 | 表单版本管理 | 无 | 页面 | 已发布 | 将发布的表单进行管理，主要包括版本的控制、表单的删除等，提供表单的创建，查看，编辑，复制，发布和删除功能。 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章注册接口服务 | 接口 | 已发布 | 电子印章制作单位制作的电子印章，需要在长沙市互联网+政务服务统一电子印章认证管理平台内进行应用，需要将电子印章在平台内进行注册 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章获取接口服务 | 接口 | 已发布 | 根据电子印章的签名证书信息获取电子印章数据 根据电子印章唯一赋码获取电子印章数据 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章状态查询接口服务 | 接口 | 已发布 | 电子印章状态查询 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 组织机构注册接口服务 | 接口 | 已发布 | 将组织机构注册到长沙市互联网+政务服务统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 用户注册接口服务 | 接口 | 已发布 | 将用户注册到长沙市互联网+政务服务统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 签章日志记录接口服务 | 接口 | 已发布 | 签章产品在做签章时将日志记录到统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 获取时间戳接口服务 | 接口 | 已发布 | 签章时获取时间戳信息 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 签章验证接口服务 | 接口 | 已发布 | 验证印章结构体数据和签章结构体数据 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF控件签章接口服务 | 接口 | 已发布 | 提供的对PDF格式的文件进行电子签章的功能，它包含了两部分：PDF格式文件签章和PDF格式文件签章验证。 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF单线程摘要计算接口服务 | 接口 | 已发布 | 提供PDF文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF单线程签名合并接口服务 | 接口 | 已发布 | 提供PDF文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF多线程摘要计算接口服务 | 接口 | 已发布 | 提供PDF文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF多线程签名合并接口服务 | 接口 | 已发布 | 提供PDF文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF会签接口服务 | 接口 | 已发布 | 提供PDF文件会签模式签章服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF撤销印章接口服务 | 接口 | 已发布 | 提供PDF文件撤销指定印章的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 文件上传接口服务 | 接口 | 已发布 | 提供PDF文件上传到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 文件下载接口服务 | 接口 | 已发布 | 提供PDF文件下载到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 签章文件验证接口服务 | 接口 | 已发布 | 查看当前印章的相关信息，例如：验章结果，印章标识、厂商标识、印章类型、签章人姓名、印章名称、签章时间、证书信息、制章人、制章日期、签名方法、软件版本号等。 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD控件签章接口服务 | 接口 | 已发布 | 对OFD文档加盖电子印章后，对文档摘要进行数字签名处理。通过阅读器上的电子签章对OFD文件进行签章，用户可以手动拖动印章到指定位置实现公章/个人签名。 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD单线程摘要计算接口服务 | 接口 | 已发布 | 提供OFD文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD单线程签名合并接口服务 | 接口 | 已发布 | 提供OFD文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD多线程摘要计算接口服务 | 接口 | 已发布 | 提供OFD文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD多线程签名合并接口服务 | 接口 | 已发布 | 提供OFD文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD会签接口服务 | 接口 | 已发布 | 提供OFD文件会签模式签章服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD撤销印章接口服务 | 接口 | 已发布 | 提供OFD文件撤销指定印章的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 文件上传接口服务 | 接口 | 已发布 | 提供OFD文件上传到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 文件下载接口服务 | 接口 | 已发布 | 提供OFD文件下载到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 签章文件验证接口服务 | 接口 | 已发布 | 查看当前印章的相关信息，例如：验章结果，印章标识、厂商标识、印章类型、签章人姓名、印章名称、签章时间、证书信息、制章人、制章日期、签名方法、软件版本号等。 |\n| 统一电子印章认证管理平台 | 文件批注 | PDF控件文档批注接口服务 | 接口 | 已发布 | PDF批注通过iWebPDFEditor在线控件打开PDF文档，通过接口或按钮在文档指定位置加入批注的功能，批注可以分为常规的附注、高亮、删除线、下划线等，还支持直线、椭圆、矩形、多边形、云线等非常规注释。 |\n| 统一电子印章认证管理平台 | 文件批注 | OFD控件文档批注接口服务 | 接口 | 已发布 | OFD批注通过iWebOFDEditor在线控件打开PDF文档，通过接口或按钮在文档指定位置加入批注的功能，批注可以分为常规的附注、高亮、删除线、下划线等，还支持直线、椭圆、矩形、多边形、云线等非常规注释。 |\n| 统一电子印章认证管理平台 | 文件差异对比 | PDF控件文档对比接口服务 | 接口 | 已发布 | 图纸修改人员进行相关图纸后，审图人员通过PDF文件对比技术则是通过将前后两个文件在同一软件窗口中进行不通点展示。清晰明了的展示出两文件的不同之处 |\n| 统一电子印章认证管理平台 | 文件差异对比 | CAD控件对比功能 | 工具 | 已发布 | 图纸修改人员进行相关图纸后，校审人员往往需要对修改部分进行审查，CAD文件对比技术则是通过将前后两个文件在同一软件窗口中进行不通点展示。清晰明了的展示出两文件的不同之处。 |\n| 统一电子印章认证管理平台 | CAD签章 | CAD控件签章功能 | 工具 | 已发布 | 采用电子签名技术，结合数字证书技术、网络加密技术而设计的数据安全产品，采用插件技术与AUTOCAD产品无缝连接，用户在正常编辑文档的方式下就可以在AUTOCAD图档（DWG格式）内部实现电子签名 |\n| 统一电子印章认证管理平台 | CAD签章 | CAD控件批量签章功能 | 工具 | 已发布 | CAD一键签章技术则是解决设计院的设计人员在CAD图纸中实现多图框批量自动签章 |\n| 统一电子印章认证管理平台 | CAD文件转换 | CAD转换功能（PDF/OFD） | 工具 | 已发布 | 设计图纸电子版成果基本都是基于AutoCAD平台生产的DWG格式。用于外部交互、做为法律凭证、长期保管的文档格式可以使用PDF/OFD。支持将单个多层DWG批量转换成多个PDF/OFD文件 |\n| 统一支付 | 生成订单 | 无 | 接口 | 已发布 | 按业务数据生成订单信息，支持非税和有税支付，非税支付需提供缴费事项和子事项明细，生成订单后返回订单编号 |\n| 统一支付 | 发起支付 | 无 | 接口 | 已发布 | 通过订单编号，和请求应用的类型，返回支付页面或支付参数，调起用户支付 |\n| 统一支付 | 订单查询 | 无 | 接口 | 已发布 | 通过订单编号，查询订单当前状态，用于确认缴费状态和缴费金额 |\n| 统一支付 | 订单退款 | 无 | 接口 | 已发布 | 前端业务判断是否可以退款，若允许退款，请求此接口可发起退款，非税缴费不能发起退款 |\n| 统一支付 | 支付订单通知 | 无 | 接口 | 已发布 | 订单支付成功后，异步通知前端业务系统进行后续业务处理，若通知失败，将在4小时内就行8次重试通知 |\n| 统一支付 | 退款订单通知 | 无 | 接口 | 已发布 | 发起退款后，异步通知前端业务系统退款退款状态，若通知失败，将在4小时内就行8次重试通知 |\n| 统一支付 | 下载对账单 | 无 | 接口 | 已发布 | 每天凌晨与支付通道完成对账后，前端业务系统可以访问此接口，获取前一天业务系统的交易对账单 |\n\n#### 中枢能力调用实施\n长沙市机关事务管理局智慧后勤服务管理平台主要调用“长沙市城市大脑”应用中台发布的相关能力。“长沙市城市大脑”应用中台作为基础性的⽀撑平台，主要定位为各类信息化应⽤提供功能完整、性能优良、可靠性⾼的业务、技术公共组件，满⾜应⽤系统建设中的共性⽀撑需求。应⽤中台建设主要内容包括应⽤服务平台、应⽤运营平台、业务⽀撑平台、技术⽀撑平台、应⽤接⼊平台以及中台与外部系统的对接。\n- 在相关建设实施过程中，在设计阶段，即根据长沙市中枢能力清单明确智慧后勤服务管理平台需要调用的共性业务或服务组件，形成《项目中枢共性能力调用申请》。\n- 根据设计情况，通过共性能力服务调用申请流程进行申请，包括测试环境的申请、应用环境能力的申请；并通过沟通，明确相关业务或服务组件的具体调用方式。\n- 在项目软件系统开发过程中完成调用调试和测试；\n- 完成软件系统上线部署的调试与测试。\n### 系统嵌入实施\n根据《长沙市信息化建设项目管理办法》的相关要求，长沙市机关事务管理局智慧机关后勤管理平台不在另行开发移动端应用平台，长沙市机关事务管理局智慧机关后勤管理平台相关应用嵌入到“我的长沙”以及“长政通”中。\n系统嵌入集成融合分为两个部分，一个部分为微信小程序的嵌入集成融合，另一部分为移动应用APP的嵌入集成融合。\n#### 嵌入“我的长沙”微信小程序\n微信小程序架构如下：\n\n图 微信小程序架构\n在项目实施过程中，在项目系统设计完成后，我方将按照微信小程序的正常开发流程进行开发、测试，测试完成后，申请“我的长沙”测试环境进行嵌入测试。完成测试后按照“我的长沙”微信小程序上线申请流程完成“智慧后勤”部分的上线流程申请。项目整体测试完成后，智慧后勤管理系统正式上线后，完成“智慧后勤”微信小程序板块的上线。\n微信小程序是面向社会开放，在权限以及用户方面不需要做过多的设置。\n#### 嵌入“长政通”APP\n##### 概述\n长政通是长沙市统一建设的协同办公平台移动端应用，当前注册用户已经突破10万，长政通APP推动全市移动办公更便捷、高效，同时也进一步提升了长沙市各级政府部门行政效率。\n“长政通”是长沙市数据资源管理局为全市公职人员量身打造的集协同办公、即时通讯、视频会议等功能为一体的移动办公平台，以“打造全市移动政务办公的总枢纽和移动客户端的唯一入口”为基本定位，由腾讯云提供技术支持。\n自2022年1月起，“长政通”已在全市政务单位全面推广，目前注册用户已超10万人，覆盖全市党委、人大、政府、政协等171家市级单位，16家园区管委会，9个区县（市）政府，并延伸至172个街道和1667个社区，接入移动政务应用20多个，充分满足了政府和事业单位内部办公、办事、办会等大量协同业务需求。\n\n图 长政通APP界面效果图\n本次长沙市机关事务管理局智慧后勤管理平台移动端应用将作为长征通“常用应用”中的一个子应用，同时，相关待办工作、通讯录、个人信息、消息机制等均用长政通现有的服务提供，智慧后勤管理平台提供数据支撑。\n##### 应用风格\n长沙市机关事务管理局智慧后勤管理平台移动端应用在UI风格上采用与长征通一致的风格，尽量确保“长政通”风格的一致性。\n##### 认证机制\n在用户信息管理方面，“智慧后勤”移动端应用不在规划独立的认证机制，统一沿用长政通的用户管理和认证机制，即与长政通统一用户、统一认证、统一授权、统一审计。\n用户方面，“智慧后勤”与长政通面向相同的用户群体，在用户管理上使用长政通现有的用户管理机制即可，不再另行建设用户库。\n身份认证方面，“智慧后勤”仍沿用长政通的身份认证机制，同时在应用授权、用户访问审计方面均采用长政通现有的认证、授权和审计机制。\n##### 共性能力\n除认证机制外，例如：消息机制、待办工作、工作台等界面，均通过“智慧后勤”服务平台提供相应的数据接口，由“长政通”进行统一调用。\n##### 业务数据\n“智慧后勤”移动端应用相关的业务数据存储在智慧后勤管理平台部署在政务云上的数据库中，该部分并不与长征通共用，当长征通对相关数据有需要时，根据具体需求，由“智慧后勤”平台提供相应的接口。\n##### 嵌入实施\n项目在设计阶段开始就必须考虑移动端应用需要嵌入“长政通”，在项目设计前，需要对“长政通”APP进行了解，并与开发厂商进行技术沟通，统一风格、明确具体的嵌入方式、确定相关的数据接口和接口提供方、接口规范和标准等。\n同时，双方必须约定好开发过程的联调方式、上线申请流程、上线发布流程等具体事物，确保整个移动端应用实施的顺利性。\n### 系统对接实施\n#### 对接系统清单\n长沙市机关事务管理局智慧后勤服务管理平台项目需要完成与多个已建系统的对接：\n需要对接的系统有：\n- 市物联网平台；\n- 人脸门禁系统；\n- 停车道闸系统；\n- 视频监控系统；\n- 长沙银行一卡通系统；\n- 办公用房系统；\n- 公务用车系统；\n- 智慧消防主机系统；\n- 巡更系统；\n- 垃圾分类称重系统；\n- 人防工程停车道闸系统；\n- 交警六合一平台；\n- “我的长沙”城市移动综合服务平台；\n- “长政通”app；\n- 长沙市超脑服务平台。\n与外部系统的关系主要体现在以下几方面：\n- 与市物联网平台的对接，实现传感器采集数据的共享；\n- 城市超脑对接，通过与长沙市数据大脑三中台的对接，实现重要支撑服务和数据的调用；\n- “长政通”app对接，实现本次建设的移动端功能与“长政通”app功能对接，提供后勤服务功能；\n- “我的长沙”城市移动综合服务平台对接，提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能；\n- 已有系统对接，通过对接已有信息化系统，获取相关数据，供本平台分析应用。\n#### 网络集成改造\n项目系统集成实施主要是指长沙市机关事务管理局智慧后勤服务管理平台与机关事务局管理的已建系统之间的打通与对接。通过系统的对接，实现系统之间数据的交互，通过对此类系统数据的采集和获取，为项目系统数据分析提供基础数据。\n在需要对接的系统中，人脸门禁系统、停车道闸系统、视频监控系统等目前均为独立的局域网，在对接前，需要将各个系统网络改造，将其接入整体网络。\n\n图 改造前道闸系统网络示意图\n目前对接系统中需要进行网络改造的系统包括：\n- 人脸门禁系统\n- 停车道闸系统\n- 视频监控系统；\n- 智慧消防主机系统对接。\n为了保证相关系统的对接，以停车道闸系统为例，售前需要解决网络物理隔离的问题。完成网络集成改造，主要包括以下相关的工作：\n- 在项目实施阶段前期，完成对各个需要进行网络改造系统的现场勘测调研，确认具体的网络链接情况、设备部署情况、所在环境的网络接入情况；\n- 申请各系统的网络接入；\n- 为接入网络的相关设备申请必须的IP地址，明确接入上连设备、端口以及通信策略开放要求；\n- 完成网络接入的综合布线；\n- 协调时间，完成相关系统的网络接入测试，确保相关测试工作不对相关系统的使用人群造成影响；\n- 完成网络改造接入。\n\n图 改造后停车道闸网络示意图\n#### 接口对接\n##### 概述\n长沙市机关事务管理局智慧后勤管理平台与其他已建系统的对接的基本需求是通过达到与各个系统的对接，完成系统之间的数据采集、数据交互，为项目数据分析和IOC数据展示提供数据支撑。\n对接系统网络改造完成后，即可进行智慧后勤系统与其他各已建系统的接口对接工作。\n软件接口是实现一个系统跟另外系统进行信息交互的桥梁，在不同的系统之间，根据系统的关联程度的不同存在紧耦合和松耦合两种：紧耦合要求接口响应反应快，消息不能阻塞；松耦合对响应反应要求比较低。在目前应用中， Socket 、消息队列（Message Queue）、 WebService等都有相应的应用，但是应用中发现各通讯方式有自己固有的特征。\n在接口和系统信息交互的过程中，两种模式使用得很普遍：同步调用和异步调用，同步调用要求接口发出请求消息后必须等待服务端系统的应答消息，接口阻塞直至超时；异步调用则发出请求消息后，接口可以从事其它处理，定时轮询服务端应答消息和消息或事件通知。同步方式简单，但是很容易造成接口阻塞，造成消息积压超时。\n接口设计总体上遵循高内聚、低耦合、精分解的设计原则，尽量减少各系统 间、系统内各模块间的耦合度、降低操作复杂度、保证实现的通用性、提高系统的 重用性和扩展性，具体原则如下：\n##### 接口定义\n接口是指用于完成各系统间和系统内部数据传递的接口。在系统中通常设计成 一个数据库文件或接口转换模块，传出数据的系统通常对数据事先进行必要的加工处理，需要接收数据的系统按照用户的要求（用户事先定义的数据模式），通过接口完成数据传递的任务。\n##### 数据模式\n接口的核心是数据模式，所谓数据模式是指应用系统对要传递的数据应在 数据 的来源、内容、定义、分类、汇总、数据格式、数据去向等方面的处理上做出相应的 规定。一般情况下，数据模式是在软件初始化阶段由用户设定的，投入应用时大量的数据采集完全自动化。同时根据系统的实际需要，用户也可以对数据模式进行修改和维护，甚至重新定义。\n##### 传递数据的形式\n对于传递数据的形式，根据本项目对接软件系统的差异可采用不同的策略：一种是由接收数据的系统釆取主动，按照数据接口定义到对方系统去识别、采集。一种是由要传出数据的系统先对数据进行加工，然后按照数据接口定义将数据传递过去。如果是系统内接口，一般采用的是第一种，系统内外系统间的数据传递一般是第二种。\n##### 接口对接流程\n\n图 系统集成融合实施流程图\n##### 对接流程说明\n长沙市事关事务管理局智慧后勤管理平台项目在集成融合方面需要结合项目硬件系统安装实施以及软件系统的开发进行综合考虑。项目集成融合流程如下：\n- 各对接系统的信息收集；\n- 协调项目相关干系人，完成与对接系统各监管单位、用户以及承建单位的初步对接；\n- 完成需要对接系统的现场勘测调研工作；\n- 完成对接系统的对接需求调研；\n- 在设计规划阶段，完成各个系统的对接设计，明确与各个厂商的对接方式，预计项目对接需求，编写项目系统接口设计文档，同时对接系统各方就对接方案达成共识；\n- 根据接口设计方案完成项目系统接口对接；\n- 完成各个系统接口对接的调试；\n- 完成系统的整体测试，确保各集成融合情况；\n- 系统上线。\n### 视频融合实施\n长沙市事关事务管理局智慧后勤管理平台项目包括AI视频智能监控、智慧交通两个部分的视频监控系统建设内容。根据项目建设要求，相关监控视频需要集成融合接入长沙市事关事务管理局统一视频监控平台（安防系统）中。\n#### AI视频智能监控\n本次AI视频监控主要包括高空全景感知单元、动火离人专用感知单元等智能摄像机，以及智能警戒摄像机、客流统计智能单元及交换机、显示器和解码器等设备。\n本系统包括28个摄像头的安装和实施，各摄像头统一接入AI分析器，通过AI分析器以及其相关的算法为各摄像头赋能。帮助监管方减少监管工作量、提高监管效率，实现全天候全时间段无死角监管。\n\n图 AI智能监控系统示意图\n#### 智慧交通\n智慧交通系统是通过视频技术的应用，对市政府大院内道路车辆行驶和停泊状态进行全面感知和监控，为机关大院周边及内部道路车辆管理提供准确实时的数据支撑。可以有效降低人工管理成本和提高管理效率。\n根据项目建设要求，智能交通系统需要支持与交警六合一平台对接，将本次建的感知前端和数据共享给交警部门，为交警部门对该区域的交通管理提供有效的数据支持。同时，本次建设的相关摄像头要求可全部接入机关事务管理局正在筹建的安防系统中。\n\n图 智能监控系统示意图\n#### 视频数据融合示意图\n\n图 视频数据融合网络示意图\n\n#### 视频数据融合\n视频监控系统均遵循公安部发布的国家标准《安全防范视频监控联网系统信息传输、交换、控制技术要求》GBT28181-2016，该标准解决了视频监控系统图像信息的联网整合、资源共享问题，为视频监控图像信息的联网共享奠定了技术基础，有效推动视频监控图像信息跨区域、跨部门的综合应用，因此在原各视频监控系统遵循GBT28181-2016的基础上，进行集成管控技术上没有问题；其他停车闸系统、一卡通系统等可以通过插件、标准API、SDK等不同形式应用接口进行系统对接，同时在本系统中进行数据清洗、数据交换、数据编目、数据分析、业务信息融合等数据服务，进行系统集成管控。\n关于视频数据的融合包括两种方式：一种方式是通过平台与平台的对接完成视频数据在安防系统的融合，另一种方式是将本项目建设的摄像头直接接入安防系统平台。\n在本次项目建设内容中，AI视频智能监控系统与智能交通系统均有独立建设的视频接入平台，通过两个平台接口的开放，实现与安防系统的对接。其二，我方将根据安防系统项目设备接入要求提供摄像头点位信息、IP地址信息、摄像头名称、摄像头型号等信息。安防系统通过其视频接入平台完成摄像头的接入。\n实施过程中可根据安防系统具体的建设情况明确接入方式，实现视频数据的融合集成。\n# \n# 项目测试方案\n## 项目概述\n长沙市机关事务管理局智慧后勤服务管理平台项目建设内容包括项目基础设施建设、智慧后勤服务管理平台建设、内外部系统对接与集成三个主要方面。\n项目基础设施建设方面，长沙市机关事务管理局智慧后勤服务管理平台项目基础设施建设内容包括：基础网络系统建设、智慧安全用电系统建设、智慧物联网络建设、AI视频监控系统建设、智能交通系统建设。通过基础设施建设，一方面对现有的硬件系统提供可接入网络，另一方面也为项目提供信息和数据采集的终端，并同时通过AI视频监控系统与智能交通系统的建设为后勤管理提供更智能和直观的管理手段。\n智慧后勤服务管理平台的建设主要包括智慧后勤基础平台、智慧后勤应用平台、智慧后勤“一张图”、智慧后勤移动端应用相关内容的建设。\n智慧后勤基础平台是为项目应用部署提供基础运行环境，包括：操作系统的建设、数据库系统、中间件服务和应用基础服务或组件等。基础平台提供集约化、融合多种应用支撑服务，为整个项目提供数据初始化、统一入口、工作台、通用审批管理、物联网管理、数据资源建设、安全服务支撑等基础的服务。\n智慧后勤应用平台是为机关事务管理局各业务管理部门，提供业务后台管理的综合平台。从为机关事务局内部提供考勤管理、公文管理、用印管理、文印管理等应用，到对外的集体户口申办、应诉管理、接待管理、会务管理以及办公用房建设计划的审核、汇总和报批等功能，智慧后勤应用平台将提升机关事务局对外的服务体验及管理水平，实现业务的增效和智能化。\n智慧后勤 “一张图”，实现“所有资源一张图管理、所有设备一张图控制、所有事件一张图显示”，对数据进行直观、高效的可视化呈现，让机关大院的业务和数据变得可知可感，让决策有据可依。并帮助管理者实时了解机关大院整体的资产运行状况、车辆情况、安防情况、能效情况、服务情况等，推动机关后勤服务的管理精细化和服务专业化。\n智慧后勤移动端应用是为满足机关事务管理局在移动端的应用场景而单独开发的，它基于现有“长政通”APP和“我的长沙”城市移动综合服务平台开发，将开发完的移动应用嵌入到“长政通”App和我的长沙。其中嵌入到“长政通”APP的功能是提供给所有市直机关职工和干部的统一服务平台，实现机关后勤服务从被动到主动服务的转变，实现餐饮、物业、会务、通知公告、办公、生活等一站式服务的工具和入口，实现个人信息等基础功能、后勤主页、设施设备管理、培训管理、电子巡更、报事报修、通知公告、房屋维修项目管理等应用。\n嵌入“我的长沙”城市移动综合服务平台功能主要是提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能，提升市机关事务局的社会服务性。\n内外部系统对接集成的建设内容包括将长沙市机关事务管理局目前已经建成的多个信息系统组网打通，实现信息的互联互通和数据共享。\n现有需要对接的系统有：智慧后勤服务管理平台与长沙市超脑服务平台、市物联网平台、人脸门禁系统、停车道闸系统、视频监控系统、长沙银行一卡通系统、办公用房系统、公务用车系统、智慧消防主机系统、巡更系统、垃圾分类称重系统、人防工程停车道闸系统、“我的长沙”城市移动综合服务平台、“长政通”app对接，以及智能交通系统与交警六合一平台对接。\n## 测试范围\n长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容。包括新建的基础网络环境、物联网络、智慧用电终端、物联终端、智能交通系统、AI智慧视频监控系统、智慧后勤管理平台以及其移动端应用。\n## 测试目标\n项目测试的主要目标主要包括以下几个方面：\n网络系统方面，确保本期建设的所有终端以及在人防工程机房所部署的设备能正常、安全的接入长沙市机关事务管理局现有网络，系统相关的各类业务端口开放正常，设备链接通信正常；\n软件系统功能、移动应用端功能完全满足和符合项目招标文件以及客户实际需求，软件系统的性能、应用安全、稳定性都满足项目建设和使用要求；\n智慧后勤管理平台与其对接的各个系统的对接工作已经完成，且相关的数据传输流畅，数据获取完整、正确，性能满足相应的使用和数据采集要求；\n长沙市机关事务管理局智慧后勤服务管理平台功能、性能等方面均可满足项目招标文件和建设单位实际需求。\n## 术语定义\n性能测试（performance testing）：运行这些测试通常要确定程序运行有多快，以便确定是否需要优化。\n负载测试(load testing)：通过在面临很多资源要求的系统上运行，攻击被测程序或系统。\n可靠性测试(reliability testing)：持续进行的性能测试，目标是发现短序列程序测试遗漏的情况。\n## 项目测试环境\n因为本项目的部署涉及到政务云、人防工程机房、电子政务外网以及与其他系统的对接测试，完全搭建测试环境的成本较高且不现实，项目测试除在政务云申请测试环境资源外，对接系统尽量协调相应的测试环境。智慧用电终端、物联网终端以及摄像头终端其均以项目实际系统进行测试。\n### 网络系统\n本期项目网络系统的建设是在原有网络系统的基础上进行网络延伸，网络系统的测试不会对项目建设环境中的现有网络造成影响。\n\n图 项目测试环境网络架构图\n### 主机系统\n本期智慧后勤管理系统部署在政务云外部数据区，在项目开发过程中，可在政务云申请相应的服务器资源作为测试环境。\n## 测试手段\n在项目测试工作开始前，项目测试组制定《测试计划》，本项目基本采用黑盒测试的方式进行软件系统测试，测试过程同时填写《测试记录表》。\n## 测试数据\n项目系统测试的主要依据是《项目需求分析说明书》，测试用例以及项目测试数据均以《项目需求分析说明为基础》、参考《项目概要设计说明书》、《项目详细设计说明书》来制定。\n## 测试策略\n长沙市机关事务管理局智慧后勤服务管理平台项目的测试过程分三个步骤进行，即单元测试、集成测试、整体测试。\n### 单元测试\n在软件系统启动开发时，我方即为项目开发人员配备项目测试组，主要通过测试管理工具进行测试管理。该测试过程，测试组人员伴随项目开发组进行项目单元测试。\n首先按照系统、子系统和模块进行划分，但最终的单元必须是功能模块，或面向对象过程中的若干个类。单元测试是对功能模块进行正确检验的测试工作，也是后续测试的基础。目的是在于发现各模块内部可能存在的各种差错，因此需要从程序的内部结构出发设计测试用例，着重考虑以下五个方面：\n1）模块接口：对所测模块的数据流进行测试。\n2）局部数据结构：检查不正确或不一致的数据类型说明、使用尚未附值或尚未初始化的变量、错误的初始值或缺省值。\n3）路径：虽然不可能做到穷举测试，但要设计测试用例查找由于不正确的计算（包括算法错、表达式符号表示不正确、运算精度不够等）、不正确的比较或不正常的控制流（包括不同数据类型量的相互比较、不适当地修改了循环变量、错误的或不可能的循环终止条件等）而导致的错误。\n4）错误处理：检查模块有没有对预见错误的条件设计比较完善的错误处理功能，保证其逻辑上的正确性。\n5）边界：注意设计数据流、控制流中刚好等于、大于或小于确定的比较值的用例。\n### 集成测试\n软件系统开发完成，即可以开始进行项目系统集成，包括与城市大脑、“长政通”、“我的长沙”、交警六合一平台等十多个系统，每一个系统对接开发完成，即需要进行联调，联调完成后，测试应该开始就系统集成情况进行系统集成测试，系统集成测试主要为了保证智慧后勤管理平台与其他系统的对接。\n集成测试也叫组装测试或联合测试。通常，在单元测试的基础上需要将所有的模块按照设计要求组装成系统，这时需要考虑的问题：\n- 在把各个模块连接起来的时候，穿越模块接口的数据是否会丢失。\n- 一个模块的功能是否会对另一个模块的功能产生不利的影响。\n- 各个子功能组合起来，能否达到预期要求的父功能。\n- 各个系统组合起来进行测试，测试各系统的联动和数据传输效果是否达到了项目建设要求。\n- 全局数据结构是否有问题。\n- 单元模块的误差累积起来，是否会放大，从而达到不能接受的程度。\n- 我们在组装时可参考采用一次性组装方式或增殖方式组装方式。\n### 整体测试\n项目整体上线前，为了确保系统在上线后的正常运行，需要对系统进行整体测试，测试以项目建设目标为基础，通过整体测试来确认系统是否按项目建设要求达到了系统的建设目标。\n系统测试目的是在于验证软件的功能和性能及其他特性是否与用户的要求一致，主要是下列类型的测试：\n1）用户界面测试：测试用户界面是否具有导航性、美观性、行业或公司的规范性、是否满足设计中要求的执行功能。\n2）性能测试：测试相应时间、事务处理效率和其他时间敏感的问题。\n3）强度测试：测试资源（内存、硬盘）敏感的问题。\n4）容量测试：测试大量数据对系统的影响。\n5）容错测试：测试软件系统克服软件、硬件故障的能力。\n6）安全性测试：测试软件系统对非法侵入的防范能力。\n7）配置测试：测试在不同网络、服务器、工作站的不同软硬件配置条件下，软件系统的质量。\n8）安装测试：确保软件系统在所有可能情况下的安装效果和一旦安装之后必须保证正确运行的质量。\n## 测试流程\n### 概述\n测试准备阶段是测试人员进行需求说明书分析、制定测试计划、设立测试配置库等活动，能有效的定义测试过程，制定出合理的测试策略和测试的进度安排，明确细化责任和分工，便于交流软件测试小组的意图，为执行测试阶段做准备，以保证整个项目的测试工作能顺利进行。\n相关人员职责见下表：\n| 序号 | 阶段任务 | 参与人员 |\n| :---: | :---: | :---: |\n| 1 | 提供需求说明书; 提供项目计划; 参与测试计划评审; | PM/项目组长 |\n| 2 | 需求说明书分析; 制定测试计划; 测试计划更新; 整理需求说明书检查点; | 测试组长/测试人员 |\n### 需求说明书分析\n    - 提供需求说明书：PM/项目组长向测试组长提供需求说明书。采用开发组向测试组开放配置库共享的方式。\n    - 需求说明书分析：测试组长/测试人员从配置库中得到需求说明书，在需求说明书分析理解过程中，如有不明确或无法理解之处，需提出疑问并整理成文档，并以会议（通过与PM/项目组长沟通确定时间）的方式请求PM/项目组长或者开发小组成员给予解答。\n    - 提供需求说明书检查点：PM/项目组长以邮件方式向测试组长提供需求说明书检查点，并抄送项目总监，测试组长将需求说明书检查点提交到测试区域的需求说明书检查点区并通知测试人员获取需求说明书检查点。\n    - 需求说明书检查点更新：在项目开发过程中，如需更新需求说明书检查点，PM/项目组长及时以邮件方式告知测试组长需求说明书检查点更新部分。\n### 制定测试计划\n    - 提交项目计划：PM/项目组长向测试组长提供项目计划。可采用开发组向测试组开放配置库共享的方式。\n    - 制定项目测试计划：测试组长从配置库中获取项目计划，根据项目计划制定测试计划。测试计划使用Microsoft Office Project 制定，详细拆分各阶段的任务以及任务的开始时间和完成时间以及指定测试人员。\n    - 评审、修改测试计划：PM/项目组长和测试组成员参与测试计划评审，并提出评审意见。测试组长根据项目组评审意见修改测试计划。测试计划存放于测试区域的测试计划区。\n    - 测试计划变更：在开发过程中，如遇到项目计划变更的情况，PM/项目组长应及时以邮件的方式告知测试组长，测试组长及时变更测试计划。\n### 设立测试配置库\n    - 确定配置管理工具：本公司常用配置库管理工具有VSS，SVN，ClearCase等，PM/\n    - 项目组长根据项目实际情况确定该项目所使用的配置管理工具。\n    - 在配置库中建立测试区域：测试组长在PM/项目组长确定的项目配置库中建立测试区域；测试区域包括测试计划、测试检查点、测试版本发布、BUG提交、测试报告等区域，分别用于存放相关测试文档。\n    - 测试组长设置测试区域权限：开发人员（读取权限）；PM/项目组长/测试组长/测试人员：(读写权限)。\n    - 测试人员向配置库提交测试文档：测试人员将所有的测试文档分门别类的提交到各自所属测试区域内。测试人员向配置库提交测试文档时，必须注明本次提交的内容，以便查询。\n| 文件路径 | 文件路径 | 存放内容 | 负责人 |\n| :---: | :---: | :---: | :---: |\n| 测试区域 | /测试计划区 | 《项目测试计划》 | 测试组长 |\n| 测试区域 | /需求规格说明书 | 《需求规格说明书》 | 测试组长 |\n| 测试区域 | /测试版本发布 | 《数据库文件》 《代码》 | 测试组长 |\n| 测试区域 | /BUG提交 | 《BUG记录表》 | 测试组长 |\n| 测试区域 | /测试报告 | 《项目测试报告》 | 测试组长 |\n### 测试环境搭建\n- 明确项目测试环境：PM/项目组长根据项目需求和项目实际情况确定该项目测试所需的必要环境。\n- 搭建项目测试环境：测试组长/测试人员根据PM/项目组长确定的测试环境搭建项目测试环境，包括测试服务器环境和测试机环境。\n### 测试执行\n该阶段为测试执行阶段，主要是测试人员对软件进行测试和验证的阶段，以测试准备阶段的工作成品为入口，开发人员测试人员按照各自的职责分工合作以达到该阶段的结束目标。\n#### 测试周计划管理\n配置库：测试计划区（所有活动在以下区域进行）\n#### 测试周计划内容\n    - 制定测试周计划：测试组长以本周二至下周一为单位制定测试周计划，确定本周应测试式样书，拆分测试任务。测试周计划存放于测试区域的测试计划区。\n    - 维护测试周计划：测试组长根据项目变更维护测试周计划。测试组长修改本周应测试式样书，维护式样书版本，重新拆分测试任务\n    - 查看测试周计划：测试人员从测试区域的测试计划中得到测试周计划，明确自己在本周的测试任务，如有不明确或无法理解之处，需提出疑问\n    - 测试周计划跟踪：测试组长在每天下班前确定本周当天测试任务完成情况（当天应测试式样书，当天未完成测试式样书，当天已完成测试式样书，是否需要加班），以便于评估本周测试任务是否能够按计划完成。\n#### 测试版本提交内容\n提交项目安装手册：PM/项目组长将安装测试手册提交至测试版本发布区。安装手册包括简述硬件软件环境（服务器端，客户端），项目工程发布步骤提交测试版本：PM/项目组长每天下班前统一将项目工程备份文件提交至测试版本发布区。\n获取测试版本发布测试服务器：测试组长从测试区域中的测试版本发布区获取最新项目备份文件以及数据库文件，并发布到测试服务器供测试人员测试。\n#### 测试状态发布\n配置库：BUG提交区。\n提交BUG：测试人员根据式样书检查点对项目进行测试，根据测试结果修改式样书检查点状态栏。式样书检查点状态为：通过不通过并截图。测试完成后将已执行测试的需求规格说明书检查点文档提交到测试区域中的BUG提交区。并告知对应的开发人员修改BUG以及要求开发人员邮件回馈BUG的原因和修改完成时间。\n- 修改BUG：开发人员从BUG提交区获取已测试完成的项目用例，根据检查点状态修改BUG后，指明BUG出现的原因，修改BUG状态栏。BUG状态栏为1 Fixed 2 Deferred 3 Closed 4 Reopen 5 Revalidated 6 Rejected。并邮件告知测试组长该本样式书已修正。\n- 回归验证：测试人员从BUG提交区获取已修正状态的式样书检查点进行回归验证直到该BUG关闭，此时修改式样书检查点状态为通过。\n- 协调开发与测试的沟通交流：测试组长每天跟踪测试执行情况和开发人员BUG修复情况以便能进行有效的沟通。每周收集测试人员测试过程中间的意见以及问题整理归纳并与PM/项目组长确认\n#### 测试报告\n整理测试数据：测试人员于测试结束后将测试数据提交测试组长。测试数据包括：应完成测试case数量，已完成测试case测试量，未完成测试用例（需求功能点）数量，完成度，BUG数量。\n测试报告：测试组长根据测试组成员提交的测试数据形成报告提交到测试总结区，并告知PM/项目组长。\n测试报告的目的：\n1、及时反应项目测试情况；\n2、开发人员及时了解项目开发质量，调整开发计划；\n3、测试人员不断改进测试方法以及测试效率，提高测试质量。\n\n# 项目管理方案\n## 项目整合管理\n项目整合管理包括为识别、定义、组合、统一与协调项目管理过程组的各过程及项目管理活动而进行的各种过程和活动。在项目管理中，“整合”兼具统一、合并、连接和一体化的性质，对完成项目、成功管理干系人期望和满足项目要求，都至关重要。\n项目整合管理就是为满足各方需求而进行协调以达到预期目的的过程。它是一项综合性、全局性的工作，主要内容是在相互冲突的目标或可选择的目标中权衡得失。虽然所有的项目管理过程在某种程度上都可看成是一个整体，但在整合管理中的这些过程是最基本的管理知识。整合管理主要包括：制定项目计划、实施项目计划、项目变更控制这三个过程。这些过程彼此相互影响，同时与其它领域中的过程也互相影响。\n在本项目实施过程中，通过对项目各个阶段的边界进行管理，保证项目各个阶段的协调推进。在项目整合管理过程中，主要包括以下几个方面：\n- 制定项目计划：制定项目计划是指制定项目管理计划，即对项目实施过程中所有阶段以及过程进行初步的规划；\n- 项目执行：制定阶段的项目计划，并按照相应的计划完成项目各阶段的工作，推进项目往前进展；\n- 监控项目：项目组将按照项目计划，跟踪、审查和调整项目进展，以实现项目管理计划中确定的绩效目标；\n- 变更控制：在该项目中，我们将建立项目变更管理机制，通过规范的变更流程，对项目的实施过程中产生的变更进行控制，保证项目不会因为变更而失控；\n- 项目收尾：制定项目验收标准，使得项目有明确的验收目标，并最终能在项目工作全部完成后，形成验收的依据，最终完成整个项目。\n## 项目范围管理\n在项目实施的过程中，我们考虑到项目的主要成本需要投入到项目想要做的事情上，项目范围管理能保证项目在实施过程“做对的事”。\n项目范围管理是指对项目包括什么与不包括什么进行定义并控制的过程。这个过程用于确保项目组和项目干系人对做为项目结果的项目产品以及生产这些产品所用到的过程有一个共同的理解。\n在项目范围管理方面，项目前期我们通过编制项目范围说明书、用户需求说明书来实现初步的范围控制。在项目交付过程中，通过项目现场勘测、需求调研分析、需求评审以及系统深化设计以及评审来明确项目包括哪些事情。\n在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n- 项目实施过程中，严格按照用户需求进行项目方案的制定，以此方案进行项目实施；同时为了进行范围控制，建立规范的项目变更管理机制，通过对变更的控制，保证项目在正确的范围内进行。\n- 项目收尾阶段，我们通过项目范围核实来对项目进行范围的确认，项目范围核实的依据可能包括项目建设方所提供的项目招标要求、合同、需求说明书以及相关的变更说明等。\n## 项目进度管理\n进度是项目管理过程中最重要的因素之一，我方在项目进度管理上首先将以用户在项目整体规划时所确立的项目实施周期为标准，在此基础上结合项目的实际情况，制定合理项目计划，对项目整体时间进行规划。并对项目各个阶段制定更为详细的项目阶段计划。计划的建立，首先保证了项目在进度上监控的可能。同时通过项目进度计划的制定，一定程度上规避了项目在进度上的风险，或者说为进度风险的识别建立了基础。\n在项目实施过程中，通过对项目计划的监督来保证项目的进度监控，当项目进度发生偏移时，我们将通过增加资源，或增大其他方面的投入来保证项目按时保质的进行。\n同时也将根据项目的实际情况或者用户项目建设方面的变更或者因为其他风险的影响对项目计划进行调整，保证项目计划可行、可监控。\n### 概述\n在项目执行和管理的过程当中，因为不确定性以及渐进明细是项目的主要特性之一，长沙市机关事务管理局智慧后勤服务管理平台建设项目是一个综合型多系统相对负责的综合型系统集成项目，包括网络系统的建设、云平台的应用、新旧网络的融合、视频监控系统建设、智能交通建设、智慧后勤系统建设以及移动应用的建设等等，项目在执行交付过程中需要跨部门、跨单位多系统的协调和集成。项目要求在较短的实施周期内完成交付，从项目管理的角度来分析，项目的风险以及资源投入都将增加，为了保证项目进度以及项目的质量，特制定以下的项目进度保障。\n### 明确项范围\n项目进度计划是项目管理计划的核心内容之一，也是指导整个项目进行的主要计划之一，项目计划的科学制定，是项目能确保进度的主要措施之一。\n项目进度的制定依赖于项目的建设范围，所以，在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n### WBS\nWBS是项目进度计划制定的基础，WBS：工作分解结构是指将项目的交付成果以及完成相应成果所需要的工作进行分解，分解到40小时左右的工作包。WBS的分解遵循相应的规则：\n- 100%包含：分支上下100%包含；\n- 不可再分：最底层状态相对独立不可再分；\n- 信息透明：分解到可以充分估算完成该成果所需的时间、费用、资源等；\n- 独立责任：分解到可安排一个责任者；\n- 滚动规划：远期工作可暂时不分解。\n项目工作分解结构应包含项目所有必须交付的成果以及完成相关交付内容所需要做的工作。即WBS应能体现本项目所有的交付物与相应的工作。\n同时WBS也是整个项目管理过程的核心，项目经理通过WBS完成项目进度计划的制定，也需要通过WBS进行项目风险分析。项目的人力资源计划、项目人力成本估算均可以通过项目WBS来完成。\n### 制定计划\n在WBS的基础上，结合长沙市机关事务管理局智慧后勤服务管理平台建设项目的实际要求，通过排列活动顺序、估算活动持续时间、估算活动资源等动作完成项目进度计划的制定。\n在长沙市机关事务管理局智慧后勤服务管理平台建设项目中，根据项目实际情况采取倒推的方式进行进度计划的制定，在项目活动持续时间估算的过程中，先设定具体的交付和验收要求时间点，再逐步反推到项目各个阶段，相对合理的进行各个阶段时间的分配，再在各个阶段内进行各个活动时间的分配，最终根据各活动的紧前关系来评估计划的可行性和具体的资源需求以及资源冲突的可能性。\n### 控制进度\n在项目执行交付的过程中，本项目安排项目经理进行项目的全生命周期管理，在项目管理和监控过程中，控制进度是监控事项中的重点内容之一，控制进度的目标就是确保项目进度与项目计划之间的偏差尽量小。\n为了确保项目进度计划，项目经理乃至项目组需要进行包括但不限于下列事项的：\n- 项目执行过程中，尽量确保项目资源按照项目资源计划提供给项目；\n- 明确项目采购计划，确保项目各个阶段的到货是按采购计划执行的；\n- 提前进行项目风险识别和评估，并制定风险应对措施，通过科学的风险应对确保项目进度；\n- 阶段性的进行项目进度检查，通过偏差分析，明确项目状态，并通过增加资源或成本的方式来确保进度计划，例如通过短期的赶工来确保项目进度；\n- 当项目进度确实出现较大偏差并无法纠正时，应及时的组织项目会议对项目进度计划进行调整，确保后续阶段的项目可控。\n## 项目成本管理\n在项目成本管理方面，我方通过对项目范围内所有工作进行整理分析，通过对项目需求进行详细的调研和分析后，进行成本预算的制作。\n为使项目成本控制在计划目标之内，我们将对项目计划、控制、调整、核算、分析和考核等管理工作进行严格的把空。确保在批准的预算内完成项目。\n具体包括制定成本管理计划、成本估算、成本预算、成本控制四个过程来完成。项目成本管理贯穿整个项目的实施过程中。\n\n图 项目成本管理流程图\n除此之外，在本项目的实施过程中，除通过对计划的监督来控制成本外，在方案制定阶段，尽量通过利旧、对采购设备的选型以满足用户需求为基准，保证用户投入最小能获得最大的项目成功。\n加强事先控制的措施。一是要加强制度建设。二是对项目成本费用的进行预测与计划。项目开工前必须作科学的分析论证,预测出完整项目所需要的总成本额,以此作为进行计划成本控制与目标考核的依据。对每一个项目的开展,都应当有精心的预测,以免造成不应有的失误。项目部人员应做好项目开工前的准备工作,选定先进的施工方案,选好合理的材料供应商,制定好该项目的成本计划,做到心中有数。在建设中严格审批,从而达到控制支出的目的。三是控制主要材料成本支出。一方面，在数量上,首先把住材料进场关,防止备料过程中材料数量亏吨现象。其次还要避免在项目开展过程中材料数量的损失浪费现象和料场保管过程中的流失现象,如果控制好材料运行中这“三个环节”完全可以保证材料数量避免亏吨现象。另一方面，在价格上,防止价格偏高现象。首先要了解市场价格以及产地、质量、厂家实力信誉情况,做到货比多家,以最低的价格选购同样数量的材料,既保证质量又达到成本价最低。\n加强事中控制(过程控制)的措施。应做到：一是加强信息化管理,提高统计分析的管理水平。要积极创造条件、优化施工方案、改进施工工艺、严格落实质量责任、克服质量通病,用杜绝质量事故、不停工、不返工来有效节约成本。安全是获取效益的保证。首先安全是项目管理中最重要的任务。项目安全管理必须要及时进行危害辨识,确定项目中安全管理重点部位,加大安全设施投入,落实管理责任和保证措施,同时项目安全主管经理和安全员要深入施工现场,确保万无一失。三是加强检查监督工作。要随时检查制定的规章制度落实和执行情况,与每道工序工艺和技术规范操作情况,控制好管理人员手中的权力,各负其责,检查监督各个环节的落实情况,发现问题及时解决、及时处理,做到信息反馈及时。\n加强事后控制的措施。进行事后分析是下一个循环事前控制科学预测的开始,是成本控制工作的继续。在坚持每个项目都实行综合分析的基础上,及时检查、分析、修正、补充,以达到控制成本和提高效益的目标。这些措施包括：一是进行成本费用分析。成本费用分析要以施工管理强弱、技术管理高低、材料费用节超、人工费用多少、机械使用费用大小、其他直接费支出情况、管理费用增减、预算收入余缺等为切入点。成本费用分析内容、数据必须真实准确,常用因素分析法进行分析对比,找出偏差原因,提出挖潜措施,改进成本管理工作,以提高企业的经济效益。二是开展项目责任成本执行情况考核。必须落实项目责任,做到完工一个、清理一个、考核一个、奖惩一个。\n## 项目质量管理\n本小结涉及内容为在项目管理过程中，我们所采用的质量控制方法及程序。这在指导与监督服务器系统建设有着非常重要的作用，是我们向最终用户提交高满意度成果的保证。\n具体内容包括几个方面：\n- 质量管理规范与标准\n- 项目质量保证策划\n- 质量度量\n- 质量考核\n- 过程监控与阶段评审\n- 系统测试与验收\n- 配置管理\n- 文档管理\n- 独立的项目审计\n### 规范与标准\n项目质量管理与企业质量管理的最大区别是由项目过程的一次性、项目产品的独特性和项目交付物的逐步形成特征决定的。ISO 9001标准主要是针对企业在经营管理中的具有重复性的要素或过程。实施ISO 9001质量管理体系标准的目的是企业通过持续的改进活动，不断发现过程误差、系统误差和纠正过程误差、系统误差，从而持续地改善过程输出的质量。而项目管理中的39个标准过程（PMI）或42个要素（ICB）全部是一次性过程或要素，故项目的质量管理核心是过程输出阶段结果的验证和预防措施的制定和实施。因为项目的有些质量缺陷并没有采取纠正措施的机会，或者质量缺陷的后果是毁灭性的。ISO 9001提供的是企业的质量管理体系模式，其中只有质量计划要素（ISO 9001：1994）或产品实现策划过程（ISO 9001：2000）涉及到项目质量管理。事实上，ISO组织确实制订了一个还没有被广泛认识的项目质量管理标准，既ISO 10006标准。\n### 项目质量规划\n在本项目中必须统一标准，明确定义保证项目质量的责任和方法。结合项目的实际情况，质量保证策划可分为以下几点：\n- 项目经理在项目的进度、问题上进行监督、协调和指导。\n- 项目技术负责人在项目的技术问题、实施进度上进行监督和指导。\n- 项目经理进行项目的总体管理与监控，听取客户的意见，寻求改进的方法，由始至终负责整个项目的实施。\n- 选派具备专业特长的工程师认真准备针对自己领域的工作、培训或实验环境，听取客户对培训内容的建议和意见，圆满解决客户提出的相关问题。\n- 每一个阶段的工作内容结束后，做工作总结和定期的状态报告会，以保证客户和项目负责人能及时跟踪工作的进展。\n### 质量度量\n质量保证是针对项目实施过程的特定度量，目的在于度量项目规模、项目成本、项目进度、客户满意度等。使用度量数据进行估计、监控项目的进度和执行情况、确定项目是否符合质量要求。对项目实施过程中的实施工艺进行量化过程，目的在于对项目实施工艺进行控制和改善。通过质量度量可以改进项目实施工艺，促进项目实施成功。度量方式是通过测试、审核、调查、统计等方式得出量化的指标。通过分析度量数据可及时发现项目实施中存在的问题，从而有针对性的制定解决方案。\n### 质量考核\n在项目实施过程中，对项目中的产品及实施工艺质量进行考核，方可保证项目实施的质量。一个项目的实施涉及到各方的密切合作，任何一方，任何一个阶段的工作都不是孤立的，与项目的其他各部分有着密切的关联，因此在系统实施过程中：\n- 项目实施人员要密切配合，并且要分工明确、责任分明，严格遵守项目各阶段的标准、规范和流程。\n- 项目各部分，各小组的设计文档，实施方案，测试计划和工程进度要充分考虑其他项目小组的工作要求，必要时需要其他小组或部门的人员参与，以确保系统实施顺利。\n- 成立质量小组，协调项目各方的工作，进行资源、人员的调配，保证项目的进展和质量。\n- 质量小组将定期或不定期的举行检查会议，检查系统实施的进度和质量，对存在的问题进行推动。\n### 过程监控与阶段评审\n在项目计划阶段，成立由技术专家与用户组成的项目评审小组，职责如下：\n- 对项目可行性进行评审；\n- 对项目实施计划进行评审；\n- 对每个阶段成果和阶段报告进行评审。\n### 系统测试与验收\n项目实施过程包括多个方面的工作和任务，每一项任务的完成、每一个文档的提交、每一个设备、软件或应用系统的交付，都有相应的完成标志和测试、评估和验收标准。对于系统、网络与应用等重大的工作里程碑事件，测试验收工作更为严谨和充分，计划更为周密。\n按照项目实施程序，整个项目实施过程中要对不同的交付项目进行如下各类测试和验收中的一种或几种。\n- 安装测试\n采用标准的测试程序(如硬件设备开机自检)和操作方法，对交付件进行测试。通常用于对硬件设备和系统软件的验收。\n- 系统集成测试\n对整个系统，包括硬件、系统软件、应用程序、网络等各个方面进行全面测试，验证系统是否达到设计目标的测试过程。\n- 性能测试、压力测试\n性能测试是对系统设计的各种数量化指标进行测试，检验交付系统是否达到设计要求的过程。压力测试的内容包括测试系统在特定工作负载下的性能表现。\n### 配置管理\n配置管理工作贯穿于整个项目实施过程中，配置管理人员的工作内容如下：\n- 制定配置管理计划\n为配合项目管理，在项目实施初期，配置管理人员与项目经理协商，制定配置管理的计划，规划未来的配置管理工作。\n配置管理计划的约束条件：\n- 配置管理的规划必须以项目开展的工作为基础，参考工作说明书；\n- 配置管理计划的编写必须以公司的流程为模版，与工作说明书和质量保证计划相一致；\n- 配置管理计划能够指导未来的配置管理工作，配置管理工作必须以配置管理计划为基准；\n- 配置管理计划必须经过最终的评审通过，才能够成立；\n- 如配置管理计划不能满足未来配置管理工作的需要，可以再增加配置管理工作计划作为配置管理计划的辅助，指导未来的配置管理工作；\n- 规范配置管理环境配置管理计划制定结束后，配置管理人员要依据计划实施配置管理的前期工作；\n- 与项目负责人讨论变更控制的实施与项目负责人讨论项目中变更控制实施的措施，指定出相应的变更控制流程。\n### 文档管理\n文档在技术实施人员、维护人员、用户以及计算机之间的关系是多向的。在项目的各个阶段中以文档作为前阶段工作成果的体现和后阶段工作的依据，这个作用是显而易见的。我们在文档管理中把文档分为三类：\n- 管理文档：项目实施人员需制定一些工作计划或工作报告，这些计划和报告都要提供给管理人员， 并得到必要的支持。管理人员则可通过这些文档了解项目安排、进度、资源使用和成果等。\n- 工程执行文档：这类文档是为了保证项目实施按照规范和正规流程来执行，也是为了保证工程质量。\n- 用户文档：实施人员为使用户了解产品的使用、操作和维护提供详细的资料。\n### 项目审计\n在项目的实施过程中，独立审计的目标是对被审计项目的合法性、完整性及实施方法的一致性表示意见。独立审计人员对于项目实施过程中发现的实施工艺、方案出现的缺陷或漏洞，可通过审计报告提交项目经理，并提出解决问题的建议。\n## 人力资源管理\n### 项目组织架构\n\n表 项目组织架构图\n### 角色定义\n表 项目组角色定义表\n| 角色 | 主要职责 |\n| :---: | :---: |\n| 项目中心 | 参与立项评审； 指派项目经理，为项目分配合适的人力资源，协助项目经理建立项目团队； 监控项目执行过程，及时了解所有项目的人力资源、进度、质量情况，协商处理问题； 在项目结束后，对项目以及项目组成员进行综合评估； 提升人员技能，考核人员绩效。 |\n| 项目经理 | 项目经理是立项之后的项目主要责任人，负责项目全生命周期管理，主要职责是带领团队在预定的时间和成本之内，交付质量合格的项目/产品。项目经理对本项目的进度、质量、成本负主要责任。 负责本项目的全面管理（包括整体、范围、时间、成本、质量、人力资源、沟通、风险、采购、干系人）； 确保项目能在既定的时间、成本范围内交付满足项目要求质量的成果或者产品； 在项目结束时，总结项目知识和经验教训，完善文档； 对项目成员的业绩进行评估。 |\n| 决策支持组 | 由部门经理、项目经理、专家等人员组成；主要职责是参与项目重大决策以及评审。 |\n| 质量管理组 | 质量管理组主要对项目质量情况进行监督 监督项目的质量规划情况； 对项目过程质量进行监控； 核实项目整体交付质量。 |\n| 商务组 | 负责产品（或合同项目）的销售，签订商务合同、跟踪合同执行过程。 负责项目客户关系维护； 商务沟通。 |\n| 售前组 | 1、负责项目售前阶段的技术沟通； 2、以客户的需求为基础，在沟通的过程中根据公司产品情况以及公司的战略给客户推荐完整的解决方案； 3、完成项目售前阶段的其他工作，包括项目招投标过程等； 4、往售后完成项目知识转移； |\n| 技术组 | 负责项目技术工作： 组织项目技术方案、技术标准的编制和审核； 参与相关的技术评审会议，在技术方面对项目实施过程进行指导和检查； 负责项目技术问题的处理，对专项施工、重要工序、重大问题进行处理； 进行项目总结，完成知识积累和转移。 |\n| 实施组 | 按照项目实施流程规范完成项目整体实施工作： 实施前的施工现场勘测、调研和确认工作； 完成项目现场的实施工作； 完成相关提交物的编制工作； 配合完成项目分保测评工作。 |\n| 培训组 | 负责项目的培训工作，包括但不限于： 制定项目培训方案； 完成项目培训工作，完成培训环境搭建、项目培训课程编制； 完成项目培训工作； |\n| 测试组 | 负责项目的测试工作，包括但不限于： 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |\n| 维护组 | 负责项目维护工作，包括但不限于： 项目维护方案编制； 项目现场维护工作，相关问题处理； 项目维护报告、问题处理报告编制。 |\n\n### 人力资源管理计划\n在项目管理过程中，人力资源管理计划非常重要，项目交付过程的各个环节都涉及到项目组成员的参与。项目组成员的能力要求、何时进入项目、何时释放资源都关系到项目是否以较低的成本高效、高质量完成项目交付的关键。\n在项目规划阶段，项目经理组织项目组成员对项目工作和交付内容进行工作分解，形成WBS，根据WBS的分解原则，每个工作包基本上都能分配给一个资源去完成相应的工作。\n在进行资源匹配的过程中，项目经理完成项目活动排序后即需要进行每项活动对项目资源的需求评估。同时，也需要评估相应资源匹配情况下活动需要的持续时间。在做资源分配时，一方面，需要考虑资源在项目交付过程的延续性，避免资源的浪费。另一方面，也需要考虑资源在项目执行过程中因过度分配而造成的资源冲突。\n### 资源的释放\n人力资源计划不仅是项目经理对人力资源的需求，同样也是约定在具体的时间完成资源的释放，节省人力成本。\n项目任务多是并行安排，串行推进，随着项目的进展，项目对人力资源的需求也会发生变化，项目经理应该根据项目对人力资源的变化调整对资源的申请，当资源在项目中的工作结束时，项目经理应尽快释放资源。\n### 项目的延期\n当项目某项或某几项工作出现延期时，如果按照人力资源计划释放资源则会导致项目工作无法完成，此时项目经理会根据项目延期情况制定相应的纠偏措施。\n通过赶工的方式来完成延期的工作，确保项目能恢复到预期的进度，此时，项目经理需要制定临时性的人力资源计划，在短时间内容协调更多的资源投入到项目中，并延时每天或每周的工作时间确保项目进度；\n项目经理发现偏差无法通过赶工等相应的措施纠偏时，项目经理会根据项目当前的实际情况调整项目进度计划，以确保计划与项目实际情况吻合。此时项目经理需要重新调整项目的人力资源计划，相关的项目资源也需要根据人力资源的调整来调整进出项目的时间。\n## 项目沟通管理\n### 沟通管理概述\n项目是一项需要多方的协调才可能成功的完成的临时性工作。沟通是项目管理过程中最重要的工作之一，也是确保项目各团队、各成员能协作推进项目的基础手段。项目沟通机制的建立是项目交付执行过程的重点工作之一。\n沟通管理是为了确保项目信息及时适当的产生、收集、传播、保存和最终配置所必须的过程。项目沟通管理是一系列过程的集合，这些过程有助于确保正确的人员发送、接收和理解正确的信息。项目沟通管理流程如下：\n- 规划沟通计划；\n- 管理沟通；\n- 监控沟通。\n本项目的实施过程中，为了保证项目的顺利进行，首先项目将建立稳定的项目组织，建立健全、多元的沟通机制，以便在项目实施过程中，各方都能顺畅的对项目中出现的任何状况进行沟通。项目经理需要清楚地概述将如何管理项目之间的沟通。这可以通过创建项目沟通管理计划来实现。\n### 干系人识别\n项目干系人的识别是明确项目沟通机制的基础，人作为沟通的主体，正确的识别项目干系人，明确干系人在项目当中的职责、对项目产生哪些影响，同时明确干系人以何种方式参与项目，且将产生哪些信息，并能以何种方式获取项目的信息。\n项目经理在完成干系人识别后，应建立干系人清单，项目经理在干系人清单中应对干洗人的基本信息进行描述和说明。\n### 沟通方式与途径\n项目管理过程中的沟通方式包括很多中，包括正式和非正式的沟通，项目经理应根据不同的项目事项采用不通的沟通方式，项目管理过程中的沟通包括：\n- 面谈、微信等及时远程沟通软件以及其他非正式沟通方式；\n- 远程沟通、语音或电话会议；\n- 项目例会；\n- 专题会议；\n- 评审会议；\n- 书面沟通。\n沟通的主要目标是通过沟通来达到各个沟通成员之间对某项事务达成一致或达成共同的认知，以便完成决策。项目经理应根据项目沟通管理计划采购不同的沟通方式来完成项目沟通。\n表 会议纪要\n| 会议名称： | 会议名称： |   |   |   |   |   |   |\n| ---: | ---: | --- | --- | --- | --- | --- | --- |\n| 会议时间： | 会议时间： |   |   | 会议地点： |   |   |   |\n| 会议召集人： | 会议召集人： |   |   | 会议主持人： |   |   |   |\n| 会议类型： | 会议类型： |   |   | 会议方式： |   |   |   |\n| 会议议题： | 会议议题： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： | 姓名 | 单位 | 单位 | 单位 | 职务 | 职务 |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 |\n|   |   |   |   |   |   |   |   |\n| 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 |\n| 序号 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 |\n| 1 |   |   |   |   |   |   |   |\n| 2 |   |   |   |   |   |   |   |\n| 3 |   |   |   |   |   |   |   |\n| 4 |   |   |   |   |   |   |   |\n| 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 |\n| 序号 | 问题描述 | 问题描述 | 问题描述 | 问题描述 | 问题责任人 | 问题责任人 | 解决时间 |\n|   |   |   |   |   |   |   |   |\n|   |   |   |   |   |   |   |   |\n\n### 沟通管理计划\n项目经理应根据项目的管理要求制定沟通管理计划，项目沟通管理计划包括：\n- 明确沟通的目标，例如：某变更专题会议的沟通目标是完成对项目某项变更内容的评审，以获得项目组包括甲方以及第三方项目参与单位的认可；\n- 明确沟通的干系人；\n- 明确沟通的途径，包括沟通采用的方式；\n- 建立沟通时间表。\n项目沟通管理计划应该足够详细，包括为什么要发送信息、发送给谁、发送哪些具体信息、如何发送以及何时发送。\n### 沟通计划的管理\n项目沟通管理计划被创建并批准后，项目经理的工作就是确保它的成功执行。同时，项目经理需要根据项目情况对管理计划定期审查和更新，以反映对项目的任何更改。项目经理还必须管理项目沟通管理计划的执行。这包括：\n- 数据的收集和分析；\n- 为沟通创建信息；\n- 沟通信息的传输或分配；\n- 储存任何通讯报告、档案或文件；\n- 检索任何存储的沟通；\n- 在项目结束或设定日期后处理任何旧的沟通。\n### 监控项目沟通\n监控项目沟通是指在项目交付管理过程中，项目经理对整个项目生命周期内的项目沟通进行控制和监控，具体包括但不限于以下工作：\n- 相关的项目沟通是否按计划进行；\n- 发布的信息是否被受众所接受；\n- 发布的信息是否被正确的理解，尽量消除项目沟通过程中的噪声；\n- 信息发布的过程是否确保不通的干系人是否收到了其应该收到的信息。\n在项目经理进行项目沟通管理监控是，对于项目沟通中的方式、沟通频率都是监控沟通中的一部分。\n## 项目风险管理\n风险管理是指在项目实施的过程中，通过对项目内外部相关的各个方面进行整体分析，来进行风险的识别，并通过对风险的分析来判断风险的影响，制定可行的风险应对计划，并由项目组成员对相关的进行跟踪和监控，以确保最大程度的减小风险对项目的危害。\n### 风险识别\n风险识别包含两方面内容：\n- 识别哪些风险可能影响项目进展及记录具体风险的各方面特征。风险识别 不是一次性行为，而应有规律的贯穿整个项目中。\n- 风险识别包括识别内在风险及外在风险。内在风险指项目工作组能加以控制和影响的风险，如人事任免和成本估计等。外在风险指超出项目工作组掌控力和影响力之外的风险。\n通过界定项目范围，明确项目范围，将项目范围内的任务细分为更具体更便于管理的部分，能够避免遗漏而产生风险。\n项目进行的过程中，加强对变更的控制，通过对变更的分析来评估变更带来的风险。\n当风险识别以后，我们将对已经识别的风险进行记录，以保证后续能对风险进行持续的跟踪。\n#### 风险识别原则\n风险识别在整个风险管理过程中都占有重要位置，只有正确认识风险，才能正确分析风险，进而才能合理应对和控制风险带来的影响。然而项目风险大多数情况下是潜在的，随着项目生命期的发展，新风险可能随时出现。因此，在项目风险识别过程中，最重要的就是不能遗漏风险因素，特别是对项目整体目标有重大影响的因素。为了更好地进行风险识别，风险识别过程中应遵循如下的主要原则。\n- 由粗及细，由细及粗\n由粗及细是指对风险因素进行全面分析，并通过多种途径对项目风险进行分解，逐渐细化，以获得对项目风险的广泛认识，从而得到项目初始的风险清单。由细及粗是指以项目初始风险清单为基础，从众多风险中，确定那些对建设项目目标实现有较大影响的风险因素，作为主要风险，详细识别其风险来源、风险特征和风险影响等。\n- 多种识别方法的选择与综合运用\n大多数项目可能同时遇到各种不同性质的风险，因此采用单一的识别方法是不可取的，必须综合运用多种方法，取长补短，多方面识别项目的风险。当然，对于特定活动或者事件，需要根据实际情况采用有效的识别方法。\n- 谨慎排除可能的风险\n不要轻易否定或排除某些风险，要通过认真的分析进行确认或排除。必要时，可进行实验论证，对于不能排除但又不能肯定予以确认的风险按确认考虑。\n- 全员参与原则\n由于风险识别的广泛性，要求项目的风险管理人员应尽量向与项目有关的人员广泛征求意见并进行归纳整理，以求对项目风险的全面了解。\n- 动态识别原则\n风险识别的全生命周期性表明随着项目生命期的发展，项目不同阶段会有不同的风险。为了识别随时可能出现的新风险，必须预先制定一个连续的风险识别计划，满足风险动态识别的需要。\n- 经济原则\n经济原则是指依据项目风险影响的大小来确定投入风险识别的资源和精力。对项目整体目标有重大影响的风险，需要花较大的精力、用多种方法进行识别，以期最大程度地掌握风险情况；但对于影响项目整体目标较小的风险因素，则没有必要花费大量时间和精力进行识别。如果风险识别的费用超过风险带来的损失就丧失了风险管理的意义。\n- 资料积累原则\n资料的不断积累是开展风险管理的重要基础，风险识别过程中产生的记录是主要的也是重要的风险资料之一，对于今后的风险管理以及类似项目的风险识别可以提供巨大帮助。风险识别工作开展前应准备好将要用到的记录表格，当风险识别工作完成后，将所获取的相关资料整理保存。\n#### 风险识别内容\n- 识别并确定项目有哪些潜在的风险\n这是项目风险识别的第一项工作目标，因为只有识别和确定项目可能会遇到哪些风险，才能够进一步分析这些风险的性质和后果。所以在项目风险识别中首先要全面分析项目发展变化的可能性，进而识别出项目的各种风险并汇总成项目风险登记册。\n- 识别引起项目风险的主要影响因素\n这是项目风险识别的第二项工作目标，因为只有识别出各项目风险的主要影响因素，才能把握项目风险的发展变化规律，才有可能对项目风险进行应对和控制。所以在项目风险识别中要全面分析各项目风险的主要影响因素及其对项目风险的影响方式、影响方向、影响力度等。\n- 识别项目风险可能引起的后果\n这是项目风险识别的第三项工作目标，因为只有识别出项目风险可能带来的后果及其严重程度，才能够全面地认识项目风险。项目风险识别的根本目的是找到项目风险以及消减项目风险不利后果的方法，所以识别项目风险可能引起的后果是项目风险识别的主要内容。\n#### 风险识别的目的\n项目风险识别的目的主要体现在三个方面：\n- 风险识别有助于确定风险管理的对象；\n- 存在于项目内部及外部环境的不确定因素是多种多样、错综复杂的，有的是静态的，有的是动态的；有的是潜在的，有的是已经存在的，因此需要利用科学的方法进行分析。没有风险识别的过程，无法解决项目不确定的复杂性，风险管理就是盲目的，不切实际的。通过风险识别，可以识别出可能对项目进展有影响的风险因素、性质以及产生的条件，并据此衡量风险的大小，作为制定风险应对计划的依据。\n- 通过风险识别，记录具体风险的各方面特征，并提供最适当的风险管理对策；\n- 风险识别是一项反复的过程，随着项目生命期的渐进，又会产生新的风险。风险反复发生的频率以及参与的各项目过程也会因项目而异，但这并不意味着风险识别是多余的工作，风险识别直接影响风险管理的决策质量，进而影响整个风险管理的最终结果，尤其是在项目的前期。\n- 风险识别有助于提高风险分析的有效性。\n险识别将风险可能引起的后果记录成册，为风险分析提供必要的信息，同时增强项目组织成员对项目成功的信心。风险识别包括识别项目的内在风险及外在风险：内在风险指项目管理组织能加以控制和影响的风险，如成本估计、工期预测、人事任免等；外在风险指超出项目管理组织控制力和影响力之外的风险，如某些市场风险、自然风险和政治风险等。任何一种风险因素在识别阶段被忽略，都可能导致整个风险管理的失败，从而造成不可估量的经济损失。\n#### 风险识别的结果\n- 已识别的项目风险\n已识别的项目风险是项目风险评估的最重要结果，它通过定性的项目风险清单来表示，该清单对项目风险的描述应该尽量简单，容易理解。\n- 潜在的项目风险\n潜在的项目风险是指没有迹象表明会发生的风险，但是人们可以主观判断预见的风险，如重要技术专家的流失。当然，潜在的项目风险可能会发展成为项目的真正风险，因此要给予足够的重视。项目承担单位应该根据风险来源进行适当的分类，并以表格或文字做清楚的描述，编制出潜在的项目风险清单，为风险管理的后续过程打好基础。\n- 对项目管理其他方面的改进\n在项目风险识别的过程中，可能会发现项目管理其他方面存在一些问题，借此机会可以进行修改和完善。\n### 风险评估\n项目风险评估是在风险识别之后，通过对项目所有不确定性和风险要素的充分、系统而又有条理的考虑，确定项目的单个风险。然后，对项目风险进行综合评价。它是在对项目风险进行规划、识别和估计的基础上，通过建立风险的系统模型，从而找到该项目的关键风险，确定项目的整体风险水平，为如何处置这些风险提供科学依据，以保障项目的顺利进行。\n要让所有的事情都去掉主观性是很困难的，但是实践和经验可以提高项目经理预测风险的概率和影响的能力。\n#### 项目风险评估流程\n风险评估过程由以下六个基本步骤构成：\n评估所有的方法：所有不同的方法都应该考虑到，所有影响风险的因素都必须考虑。头脑风暴法或其他的风险识别方法应该使用得透彻，所有可能影响风险发生的因素都应该考虑到。\n考虑风险态度：决策者的风险态度是需要重点考虑的。不同的人会用不同的态度估计风险，并且使用同样的数据做出不同的决定。一些决策者，与其他的决策者相比较，或多或少是厌恶风险的，并且会根据给定的数据，对风险的发生和影响做出不同的主观评估。\n考虑风险的特征：风险是否已经识别、它们是否可控和它们的影响将会怎样，这些都是需要考虑的。控制已经识别(例如内部可控的)的风险而不是其他的(例如外部不可控的)风险，这是可能的。所有可能的风险特征都需要识别。\n建立测量系统：风险需要用定量或定性(或综合的)方法测量和评估。一些方法是使用已经建立的模型，这些模型输入了风险的特征和风险面临的情况，这样，根据历史经验就可以做出预测。\n解释结果：测量中生产的数据需要解释。这种解释同样也有定性的或定量的。测量过程的结果给预测和可能的结果提供了一种暗示，但是这些仍需要解释。两个不同的解释人员可能用的是同样的数据和结果，但他们所做的评价却不相同。解释可能会根据观察到的数据用外推法对未来的结果做出预测。\n进行决策：整个过程的最后阶段需要决定哪些风险会保留，哪些风险要转移出去。风险是否保留取决于组织的实际情况和决策者的态度。\n#### 项目风险评估依据\n- 已识别的风险\n已识别的科技计划项目风险是项目风险评估的基础。\n- 项目的进展情况\n在项目的不同阶段，所面临的风险程度是不同的。一般来说，随着项目的进展，项目的风险和不确定性就会逐步降低。\n- 项目的性质和规模\n由于各科技计划项目的性质不同，风险对其影响程度也不一样。一般来说，较小的科技计划项目风险程度较低，大型、复杂的项目或高新技术项目的风险程度则会比较高。\n- 数据的准确性和可靠性\n数据的准确性和可靠性都会影响项目风险评估的结果，所以要对数据的准确性和可靠性进行评估。\n#### 项目风险评估结果\n项目风险评估最重要的结果就是量化了的项目风险清单。该清单综合考虑了项目风险发生的概率、风险后果的影响程度等因素，因此项目承担单位可依此对项目风险进行排序，从而确定采取什么样的风险应对措施以及控制措施应实施到什么程度。\n项目风险清单一般可包括以下内容：\n- 项目风险发生概率的大小；\n- 项目风险可能影响的范围；\n- 对项目风险预期发生时间的估算；\n- 项目风险可能产生的后果；\n- 项目风险等级的确定。\n项目风险可分为四个等级：\n| 序号 | 等级定义 | 说明 |\n| :---: | :---: | :---: |\n| a | 灾难级 | 这类等级的风险必须立即予以排除 |\n| b | 严重级 | 这类风险会造成项目偏离目标，需要立即采取控制措施 |\n| c | 轻微级 | 暂时不会对项目产生危害，但也要考虑采取应对措施 |\n| d | 忽略级 | 这类风险可以忽略，不采取控制措施 |\n### 风险应对\n项目风险应对措施主要包括如下几种：\n- 项目风险规避措施\n这是从根本上放弃项目或放弃使用有风险的项目资源、项目技术、项目设计方案等，从而避开项目风险的一类应对措施。例如，对于存在不成熟的技术坚决不在项目实施中采用就是一种项目风险规避的措施。\n- 项目风险遏制措施\n这是从遏制项目风险引发原因的角度出发应对项目风险的一种措施。例如，对可能因项目财务状况恶化而造成的项目风险(如因资金断绝而造成烂尾楼工程项目等)，采取注入新资金的保障措施就是一种典型的项目风险遏制措施。\n- 项目风险转移措施\n这类项目风险应对措施多数是用来对付那些概率小，但是损失大(超出了承受能力)或者项目组织很难控制的项目风险。例如，通过购买工程一切险等保险的方法将工程项目的风险转移给保险商的办法就属于风险转移措施。\n- 项目风险化解措施\n这类措施从化解项目风险产生出发，去控制和消除项目具体风险的引发原因。例如，对于可能出现的项目团队内部和外部的各种冲突风险，可以通过采取双向沟通、调解等各种消除矛盾的方法去解决，这就是一种项目风险的化解措施。\n- 项目风险消减措施\n这类风险应对措施是对付无预警信息项目风险的主要应对措施之一。例如，对于一个工程建设项目，在因雨天而无法进行室外施工时，采用尽可能安排各种项目团队成员与设备从事室内作业的方法就是一种项目风险消减的措施。\n- 项目风险储备措施\n这是应对无预警信息项目风险的一种主要措施，特别是对于那些潜在巨大损失的项目风险，应该积极采取这种风险应对措施。例如，储备资金和时间以对付项目风险、储备各种灭火器材以对付火灾、购买救护车以应对人身事故的救治等都属于项目风险储备措施。\n- 项目风险容忍措施\n这是针对那些项目风险发生概率很小而且项目风险所能造成的后果较轻的风险事件所采取的一种风险应对措施。这是一种最常使用的项目风险应对措施，但是要注意必须合理地确定不同组织的风险容忍度。\n- 项目风险分担措施\n这是指根据项目风险的大小和项目相关利益者承担风险的能力大小，分别由不同的项目相关利益主体合理分担项目风险的一种应对措施。这种项目风险应对措施多数采用合同或协议的方式确定项目风险的分担责任。\n- 项目风险开拓措施\n如果组织希望确保项目风险的机会能得以实现，这就具有采用积极的风险措施，该项发现措施的目标在于通过确保项目风险机会的实现。这种措施包括为项目分配更多和更好的资源，以便缩短完成时间或实现超过最初预期的好质量。\n- 项目风险提高措施\n这种策略旨在通过提高项目风险机遇的概率及其积极影响，识别并最大程度发挥这些项目风险机遇的驱动因素，致力于改变这种项目风险机遇的大小，最终促进或增强项目风险的机会，以及积极强化其触发条件，提高其发生的概率。\n## 项目采购管理\n项目采购管理包括从执行组织之外获取产品和服务的过程。项目采购主要包括以下几个方面：\n- 采购计划：决定采购什么，何时采购；我们将按照用户的要求制定详细的采购计划，保证项目采购活动的顺利进行。\n- 合同管理：与项目采购产品生产厂商或者供货厂商签订正规的合同，以项目建设方的要求为基础对合同条约进行要求，保证项目所需产品的高的服务标准，并及时的对项目第三方合同进行清算，确保项目的稳定，降低外部环境的其他风险。\n### 采购计划\n- 根据客户的要求和项目建设要求进行项目所需第三方产品的采购，在项目采购前，我们将根据项目合同要求以及项目建设时间要求等必要条件制定可行采购计划，对项目采购活动的采购内容、相关产品要求、时间计划、运输、交货验收等进行详细的安排，保证项目的采购活动能顺利的进行。\n### 合同管理\n- 在进行第三方产品采购时，我们将通过与供货商正规的合同签订来确保项目采购工作的自豪量，同时也将降低因第三方采购而给项目带来环境外的其他风险。\n### 发货与接收\n相关流程安排如下：\n- 在货物到达建设方指定地点前七天通知建设方货物准备以及到货情况等，其内容包括：\n- 相关合同号；\n- 设备名称；\n- 设备数量；\n- 价格；\n- 箱数；\n- 型号规格；\n- 重量和体积；\n- 拟发运的时间；\n- 其他必要的说明。\n- 向客户发出《交货计划和场地准备书》；\n- 安排所有货物均直接运送至项目建设方指定地点；\n- 发运的同时再次发出《收货通知》；\n- 在用户现场对检查货物包装与核对货单；\n- 若因我方延误告知而对用户造成的损失，由我方负责。\n#### 物流运输\n- 我方将联合长期合作的专业物流公司，仔细清点货物数量，检查货物包装是否完好。之后，安排运输方式（公路、铁路运输或空运），全程专人随同运输至最终用户指定地点，并负责搬运到指定设备安装位置，且我们承诺，我方将承担所有的运输费用。\n#### 包装和标记\n使用适于运输的坚固包装，并且根据合同货物的不同特性和要求采取防潮、防雨、防锈、防震、防腐和防粗暴装卸等保护措施，以确保合同货物安全无损地送达交货地点。由于包装不善所引起的货物锈蚀、损坏和损失均由我方承担。\n下面是一个包装箱四侧的标记实例：\n\n根据合同货物的不同特性和装卸运输上的不同要求，在包装箱相对的二个侧面上用中文标记“勿倒置”、“小心轻放”、“防潮”等标志和“重心”等装卸搬运时适用的通用图案，以利于装卸和搬运。每件包装箱内附一份详细装箱单和质量合格证。\n#### 货物接收\n在货物运抵用户指定地点后，我公司发货随同人员将与接收人按照货物包装箱数进行清点签收（完成开箱清点及初步检验的时间不迟于交货之日起四十日），并且双方都确认货物在运输过程中没有明显包装损坏。\n项目到货过程根据项目到货验收流程进行，我方在到货前进行到货报验申请，并将申请提交给建设单位、监理单位，项目到货时，监理单位组织项目到货验收工作，到货验收完成后，各方签署到货验收报告。\n\n# 项目培训方案\n## 培训概述\n长沙市机关事务管理局智慧后勤服务管理平台项目的培训工作主要是指在项目上线后进行的针对市机关事务管理局用户以及市机关事务管理局系统管理人员的针对性培训。\n在项目执行交付阶段，关键交付事项交付过程中，市机关事务管理局系统管理人员可选择性的参与项目交付工作，作为对项目系统熟悉的过程。\n长沙市机关事务管理局智慧后勤服务管理平台项目包括电子政务外网政务云资源的应用、移动应用端在长沙市现有移动应用平台上的嵌入、智慧安全用电系统的建设、本地机房建设、网络改造、AI视频监控系统以及智能交通管理系统的建设等内容。项目的培训也需要根据机关事务管理局对相关事项的管理智能进行培训。\n## 培训范围\n项目培训内容主要为长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容。具体包括：\n- 智慧后勤管理平台管理端；\n- 智慧后勤管理平台应用PC端；\n- 智慧后勤管理平台应用移动端；\n- 智慧安全用电终端设备；\n- AI视频监控系统终端、服务端设备；\n- 智能交通管理系统终端、服务端设备；\n- 项目新建以及改造网络系统以及相关的设备。\n## 培训对象\n长沙市机关事务管理局智慧后勤服务管理平台项目培训对象主要包括两个部分的人员：\n- 项目系统的相关使用人员；\n- 各部分业务的审批、管理人员；\n- 系统硬件设备以及网络系统的日常管理和维护人员。\n## 培训目标\n长沙市机关事务管理局智慧后勤服务管理平台项目培训目标主要包括以下几个部分：\n- 确保系统使用用户在日常工作和管理事务中能顺畅的使用系统，并通过系统的使用提升工作效率和管理效率。\n- 确保长沙市机关事务管理局智慧后勤服务管理平台项目后续相关的日常管理和维护人员能完成项目系统的日常运维和管理工作，并能对项目系统操作进行基本指导，同时能解决系统在运行过程中出现的轻微故障。\n- 确保长沙市机关事务管理局智慧后勤服务管理平台项目相关的硬件设备的管理和维护人员能完成项目的基本管理和运维，确保项目设备稳定的运行。\n项目培训目标能在无承建单位协助的情况下，系统能对建设单位形成稳定、顺畅的支撑。\n## 培训时间\n长沙市机关事务管理局智慧后勤服务管理平台项目培训时间安排在项目系统上线后，项目系统上线完成，项目系统初始化完成，项目正式进入试运行阶段。项目培训在系统上线部署完成、系统初始化完成后一个星期内完成。\n项目集中培训的时间大概为四个小时左右。\n## 培训方式\n项目采用多种培训方式结合的形式进行项目培训。对于项目系统运行维护和管理人员，可以在项目交付过程中采用一对一的培训方式，通过项目交付过程中一对一的培训完成对项目日常运维和管理人员的培训。\n对于项目普通用户以及系统管理审批人员，采用集中培训的方式，通过在统一的培训环境下安排项目培训讲师进行集中培训。\n## 培训场地\n长沙市机关事务管理局智慧后勤服务管理平台项目培训对象主要是机关事务管理局相关办公人员，培训场地可选用机关较大的会议室进行集中培训，以系统操作方式演示和讲解为主。\n培训中一对一的培训主要是在用户或管理人员操作过程中预以操作和管理指导。\n## 培训教程\n长沙市机关事务管理局智慧后勤服务管理平台项目培训教程主要包括演示系统、项目培训PPT、项目系统操作手册、项目运行维护手册。\n在项目培训工作开始之前，项目培训工作组根据本项目的建设内容和培训要求开始编织项目培训教程。\n## 培训讲师\n长沙市机关事务管理局智慧后勤服务管理平台项目我方将指派熟悉项目系统使用，且又有丰富的项目培训经历的项目组成员作为项目培训讲师。\n培训讲师负责项目培训教程的编写、项目培训场地确认、组织和协调项目培训环境的搭建，制定项目培训计划等工作。\n## 培训考核\n项目培训工作完成以后，可根据长沙市机关事务管理局智慧后勤服务管理平台项目的需要制定项目培训考核规划，包括考核的方式、考核时间等。\n项目培训考核的主要目标是确保项目培训工作能达到预期的目标，本项目可采取双向考核的方式，一方面，培训讲师通过培训过程和培训考核情况\n## 实施培训\n### 培训步骤\n根据项目培训的具体情况，在项目培训阶段以项目合同培训要求为基础制定培训流程如下：\n- 确认培训时间；\n- 确认培训内容以及培训课程；\n- 确认培训人员名单；\n- 确认培训环境以及培训方式；\n- 制作项目培训材料；\n- 协调项目培训资源；\n- 搭建项目培训环境；\n- 完成项目培训工作；\n- 培训情况评估。\n### 培训名单确认\n在项目培训工作进行前，我们将根据项目培训课程提供项目培训人员角色的建议，由机关事务管理局根据项目参与人员、项目软硬件系统使用人员的具体情况拟定项目受训人员名单。我方将根据课程时间以及培训人员名称拟定项目具体的培训计划。\n### 计划编制\n当项目建设方将项目培训地点情况、培训方式、培训人员名单、培训启动结束时间拟定完成后，我方将根据培训的具体情况编制项目培训计划，该计划将根据培训设施、人员、课程要求等情况对详细的课程时间安排，培训人员安排等作出详细的培训计划。该计划交由项目建设方审核后发布，并按该计划开始实施培训工作。\n### 通知发布\n在项目培训环境搭建完成，或能确认在培训开始前可搭建完成时，项目组将根据培训情况在机关事务管理局的协助下发布培训通知。或直接由机关事务管理局直接发布培训通知，主要的通知内容如下：\n| 培训通知 | 培训通知 | 培训通知 | 培训通知 | 培训通知 |\n| :---: | :---: | :---: | :---: | :---: |\n| 培训名称： |   |   |   |   |\n| 培训时间： | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 |\n| 培训地点： |   |   |   |   |\n| 培训单位： |   |   |   |   |\n| 培训讲师： |   |   |   |   |\n| 培训课程： | 课程名称 | 课程名称 | 课程内容 | 课程内容 |\n| 培训课程： |   |   |   |   |\n| 培训课程： |   |   |   |   |\n| 培训课程： |   |   |   |   |\n| 培训目的： |   |   |   |   |\n| 培训要求： |   |   |   |   |\n| 备注说明： |   |   |   |   |\n| 联系人： |   | 联系方式： | 联系方式： |   |\n| 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 |\n### 实施培训\n培训启动后，我方培训人员将培训材料、培训设备的准备完成，每天在培训开始之前对培训环境进行调试，保证培训的顺利进行。并将当天课程的培训以分天的方式或者在培训第一天统一发放给培训学员。\n给培训人员发放预制的课程表，以方便培训人员的培训学习。\n在培训时间段内，培训讲师或者培训辅助人员将根据当天培训的情况对培训人员进行签到考勤记录，做为培训评估的基础之一。\n在培训过程中，除正常的对课程的讲解之外，每节课程将设置专门的培训答疑时间，以保证培训质量。\n### 培训评估\n在培训实施进行过程以及培训结束后，我方将根据项目建设方的要求对培训进行评估，一共包括以下几个方面的评估：\n- 项目建设方对项目培训材料的评估，可通过项目组专题会议的形式或者预讲的形式对项目培训材料进行评估；\n- 培训人员以及项目管理人员对参与培训的人员进行评估，我方可协助项目建设方对项目培训人员的培训情况进行评估，可分为日常评估以及培训效果评估。日常评估主要以日常培训考勤情况为基础，同时也可通过实际操作情况对培训人员的培训效果进行评估；\n- 项目建设方以及参与培训的人员对培训讲师进行评估，通过培训人员对培训讲师的课程诠释能力，教学方式等进行评估；\n- 培训效果评估以及培训满意度评估。\n通过双向的评估以保证项目培训的质量，确保通过培训能达到该培训的预期目的。\n#### 培训材料评估\n| 评审意见表 | 评审意见表 | 评审意见表 |\n| :---: | :---: | :---: |\n| 评审材料名称： |   |   |\n| 评审会议时间： |   |   |\n| 评审会议地点： |   |   |\n| 评审人员名单： | 评审人员单位 | 评审人姓名 |\n| 评审人员名单： |   |   |\n| 评审人员名单： |   |   |\n| 评审人员名单： |   |   |\n| 评审主要内容： |   |   |\n| 评审建议： |   |   |\n| 评审签字： |   |   |\n#### 培训讲师评估\n| 讲师评审表 | 讲师评审表 |\n| :---: | :---: |\n| 讲师姓名： |   |\n| 负责课程： |   |\n| 评审时间： |   |\n| 整体满意程度： | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 评审项目 | 满意程度 |\n| 讲师授课态度 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 对知识的表达能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 专业知识能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 知识范围的宽广度 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 课程的诠释能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 问题解答能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 对讲师的建议 |   |\n\n# 项目验收方案\n## 验收概述\n根据项目要求，长沙市机关事务管理局智慧后勤服务管理平台项目设立两个验收点，即即项目初步验收和项目竣工验收（终验）。项目建设内容全部完成后，项目经过我方内测达到项目初步验收标准后，由我方向监理单位以及建设单位提请项目初步验收。初步验收完成后，我方对初验过程中所提的问题进行整改，整改完成，项目进入上线试运行阶段，一般为期1-3个月。项目初验以及试运行过程中相关问题整改完成并通过测试，我方向建设单位提请竣工验收。\n根据项目招标文件要求，本项目采用一般程序验收。项目验收国家有强制性规定的，按国家规定执行，验收费用由中标人承担，验收报告作为申请付款的凭证之一。\n## 验收内容\n长沙市机关事务管理局智慧后勤服务管理平台项目验收内容主要包括以下几个方面：\n- 项目所有采购货物是否按照项目招标文件要求完成采购到货；\n- 项目招标文件所要求的软件系统是否按建设单位需求开发完成，并在相关位置完成部署与实施；\n- 项目相关的硬件设备是否按照项目规划设计要求完成安装部署和实施；\n- 项目范围内需要进行改造的网络系统是否按照项目规划设计要求进行改造，并完成对接；\n- 项目范围内需要进行对接的十四个系统是否按照项目招标文件要求完成对接；\n- 项目范围内所有文档以及组织过程资产是否按照项目要求进行编写以及提交并审核通过。\n## 验收标准\n长沙市机关事务管理局后勤服务管理平台项目验收标准：\n- 项目合同范围内所有采购货物均按项目合同要求完成采购和到货验收工作，且相关货物完全满足项目合同以项目招标要求；\n- 项目合同范围内所要求的软件系统以及按照要求完成需求调研、开发以及测试工作，并通过测试能完全满足项目招标要求以及项目合同要求；\n- 项目软件系统以及按照项目设计要求和建设单位要求完成实施部署，项目系统运行稳定；\n- 项目范围内的硬件设备均已经按照项目规划和设计要求完成安装部署和实施，经过测试，相关系统满足项目合同与招标要求；\n- 项目范围内需要进行改造的网络系统均以及按照项目规划和设计要求进行改造，并完成网络系统对接，经测试，系统运行正常；\n- 项目范围内需要对接的十四个系统均已按照项目招标文件以及项目合同要求完成系统对接，经测试，系统对接稳定，数据交互均满足项目合同以及招标要求；\n- 项目范围内所有文档以及组织过程资产均按照项目要求进行编写以及提交并审核通过。\n## 验收组织\n长沙市机关事务管理局后勤服务管理平台项目的验收组织包括：\n- 项目建设单位，长沙市机关事务管理局；\n- 项目监理单位；\n- 项目验收专家组；\n- 项目监管单位；\n- 项目承建单位。\n由项目建设单位组织，项目专家组、项目监管单位、项目建设单位以及监理单位组成项目验收小组执行对项目的验收工作。\n\n## 验收方式\n基于长沙市机关事务管理局智慧后勤服务管理平台项目的特性，项目采用集中现场验收的方式。\n由建设单位组织项目验收小组对项目建设情况进行现场验收。验收小组通过对项目系统进行操作演示、对外部设备进行现场勘查、对项目文档进行审阅，并在项目验收会议上对建设单位进行质询。\n## 验收准备\n项目验收准备条件如下：\n- 所有建设内容按项目合同以及招标要求全部完成建设；\n- 各分项验收工作全部完成，且合格；\n- 招标文件以及合同所要求的软件系统测评工作全部完成，且测评通过；\n- 软件系统配置管理工作完成，BASELINE建立；\n- 项目验收资料以及文档编写完成，且符合项目招标以及合同要求；\n- 项目范围内相关设备上架，加电运行测试正常；\n- 项目验收申请提交监理单位，监理单位同意；\n- 项目验收申请提交后，项目建设单位以及主管单位同意启动验收；\n- 项目合同所要求的其他验收条件。\n## 验收步骤\n项目验收步骤如下：\n- 编写验收方案（计划书）；\n- 成立项目验收小组；\n- 项目验收实施；\n- 编写项目验收报告；\n- 召开验收评审会；\n- 签署项目验收报告。\n## 验收报告（模板）\n### 项目基本信息\n- 项目名称：\n- 项目编号：\n- 项目建设方：\n- 项目承建方：\n- 项目监理方：\n### 项目合同信息\n#### 合同基本信息\n- 项目合同编号：\n- 项目合同甲方：\n- 项目合同乙方：\n#### 合同变更情况\n*对项目合同的变更情况进行简要的描述和说明**。如果有多个变更，需要逐一描述。如无合同变更，记录无。*\n### 项目建设周期\n- 项目开工日期：\n- 项目竣工日期：\n- 项目服务周期：自 年 月 日开始至 年 月 日。\n\n### 项目建设情况\n#### 项目进度情况\n| 序号 | 阶段名称 | 开始时间 | 结束时间 | 项目提交物 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n\n#### 项目需求变更情况\n*记录项目需求变更（已经执行）情况，如果存在多个变更，需要逐一说明。*\n# \n### 项目验收计划\n#### 验收基本信息\n- 项目验收时间：\n- 项目验收方式：现场集中验收\n- 项目验收组：\n| 序号 | 验收人员 | 所属单位 | 所属角色 | 相关职责 |\n| ---: | --- | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n#### 项目验收原则\n- 对已经交付的项目成果进行核验，检查项目所有交付成果是否满足项目合同之要求；\n- 对项目任务以及技术服务等内容进行审查，确认相关的项目任务以及需要提供的技术服务已经全部按照合同完成；\n- 对项目实施进度情况进行审核，检查是否按照项目合同的时间进度要求完成了项目建设；\n- 对项目的投资情况进行审查；\n- 对项目的提交物（各类文档）进行审查；\n- 对项目的技术水平做出评价，并得出项目的验收结论。\n（正式编写的时候请写项目具体的交付成果和项目任务）\n#### 项目验收依据\n（正式编写的时候请写项目具体的验收依据）\n- 《项目商务合同》\n- 《项目工作说明书（SOW）》\n- 《项目技术方案》\n- 《项目实施方案》\n- 《项目测试报告》\n#### 项目验收内容\n（正式编写的时候请写项目具体的相关硬件环境和系统）\n- 项目硬件基础环境验收；\n- 项目软件系统平台验收；\n- 项目应用系统功能验收；\n- 项目外场设备的验收；\n- 项目文档验收。\n\n### 项目验收结论\n#### 专家组验收意见\n由专家组编制验收意见。\n#### 专家组（签字）：\n由验收组成员签字。\n### 附件\n#### 附件一：软件平台验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 软件类型 | 软件名称 | 验收结果 | 备注 （机器的IP地址等） |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n\n#### 附件二：功能模块验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 功能模块 | 验收内容 | 合同要求 | 验收结果 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n| 7 |   |   |   |   |\n\n#### 附件三：项目文档验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 文档名称 | 用 途 | 验收结果 | 备注 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n\n#### 附件四：硬件设备验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 硬件名称 | 型号 | 用途 | 配置情况 | 验收结果 | 备注 （机器的IP地址等） |\n| :---: | :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |   |   |\n| 2 |   |   |   |   |   |   |\n\n",
  "size" : 237862,
  "modifiedAt" : 1764646206617,
  "id" : "售前资料/Individual_项目实施方案.md",
  "content" : "\n# **长沙市机关事务管理局**\n# **智慧后勤服务管理平台项目**\n\n\n\n# **项目实施方案**\n\n\n\n\n## **编制单位：湖南华宽通科技股份有限公司**\n## **2023年1月**\n## **目**** ****录**\n第一章 项目概述 7\n1.1 项目信息 7\n1.2 遵循标准 7\n1.3 建设内容 8\n1.3.1 项目基础设施建设 8\n1.3.2 智慧后勤服务管理平台 8\n1.3.3 内外部系统对接集成 9\n1.4 建设目标 10\n1.5 实施地点 10\n1.6 实施周期 10\n第二章 项目实施组织架构 11\n2.1 项目实施组织架构图 11\n2.2 实施组织角色定义 11\n2.3 项目团队主要成员清单 13\n第三章 项目进度计划 15\n3.1 项目阶段定义 15\n3.2 项目交付周期 15\n3.3 项目里程碑计划 15\n3.4 项目详细计划 16\n3.5 进度保障措施 18\n3.5.1 进度保障概述 18\n3.5.2 明确建设范围 19\n3.5.3 工作分解结构（WBS） 19\n3.5.4 制定进度计划 20\n3.5.5 实施进度控制 20\n第四章 项目交付实施 22\n4.1 项目交付模型 22\n4.2 项目启动阶段 22\n4.2.1 项目团队组建 22\n4.2.2 项目商务合同 23\n4.2.3 项目启动会 23\n4.2.4 项目开工申请 24\n4.2.5 项目其他准备 24\n4.3 项目规划阶段 24\n4.3.1 勘测调研 24\n4.3.2 范围确认 25\n4.3.3 深化设计 25\n4.3.4 实施方案 26\n4.4 项目执行阶段 27\n4.4.1 项目采购 27\n4.4.2 到货验收 27\n4.4.3 实施准备 28\n4.4.4 硬件实施 30\n4.4.5 软件系统实施 34\n4.4.6 集成实施 38\n4.4.7 项目测试 39\n4.4.8 等保测评 39\n4.4.9 密码测评 40\n4.4.10 项目整改 41\n4.4.11 项目上线 41\n4.4.12 项目培训 42\n4.5 项目收尾阶段 42\n4.5.1 阶段验收 42\n4.5.2 项目试运行 43\n4.5.3 竣工验收 44\n第五章 硬件系统实施 45\n5.1 智慧安全用电 45\n5.1.1 实施内容 45\n5.1.2 设备清单 45\n5.1.3 实施位置 46\n5.1.4 实施人员 46\n5.1.5 实施时间 46\n5.1.6 实施方式 46\n5.1.7 实施流程 46\n5.1.8 安全文明施工措施 47\n5.1.9 施工报告 48\n5.2 智慧物联 48\n5.2.1 实施内容 48\n5.2.2 设备清单 50\n5.2.3 实施方式 50\n5.2.4 施工时间 50\n5.2.5 实施流程 51\n5.2.6 安全文明施工措施 51\n5.2.7 施工报告 51\n5.3 AI视频监控 52\n5.3.1 实施内容 52\n5.3.2 设备清单 52\n5.3.3 实施点位 53\n5.3.4 实施方式 53\n5.3.5 实施流程 53\n5.3.6 安全文明施工措施 54\n5.3.7 施工报告 54\n5.4 基础网络 55\n5.4.1 实施内容 55\n5.4.2 机房环境实施 55\n5.4.3 网络系统实施 55\n5.4.4 网络拓扑图 56\n5.4.5 设备清单 56\n5.4.6 实施位置 57\n5.4.7 实施流程 57\n5.4.8 安全文明施工措施 58\n5.4.9 施工报告 58\n5.5 智能交通 59\n5.5.1 实施内容 59\n5.5.2 设备清单 59\n5.5.3 设备点位 59\n5.5.4 实施方式 61\n5.5.5 实施流程 61\n5.5.6 安全文明施工措施 62\n5.5.7 施工报告 62\n第六章 项目系统集成实施 63\n6.1 集成实施概述 63\n6.2 集成实施原则 63\n6.3 集成实施内容 64\n6.4 集成实施架构 64\n6.5 集成融合实施 65\n6.5.1 中枢对接实施 65\n6.5.2 系统嵌入实施 77\n6.5.3 系统对接实施 80\n6.5.4 视频融合实施 86\n第七章 项目测试方案 90\n7.1 项目概述 90\n7.2 测试范围 91\n7.3 测试目标 91\n7.4 术语定义 92\n7.5 项目测试环境 92\n7.5.1 网络系统 92\n7.5.2 主机系统 93\n7.6 测试手段 93\n7.7 测试数据 93\n7.8 测试策略 94\n7.8.1 单元测试 94\n7.8.2 集成测试 94\n7.8.3 整体测试 95\n7.9 测试流程 96\n7.9.1 概述 96\n7.9.2 需求说明书分析 96\n7.9.3 制定测试计划 97\n7.9.4 设立测试配置库 97\n7.9.5 测试环境搭建 98\n7.9.6 测试执行 98\n第八章 项目管理方案 101\n8.1 项目整合管理 101\n8.2 项目范围管理 102\n8.3 项目进度管理 103\n8.3.1 概述 103\n8.3.2 明确项范围 104\n8.3.3 WBS 104\n8.3.4 制定计划 105\n8.3.5 控制进度 105\n8.4 项目成本管理 106\n8.5 项目质量管理 108\n8.5.1 规范与标准 108\n8.5.2 项目质量规划 109\n8.5.3 质量度量 109\n8.5.4 质量考核 109\n8.5.5 过程监控与阶段评审 110\n8.5.6 系统测试与验收 110\n8.5.7 配置管理 111\n8.5.8 文档管理 111\n8.5.9 项目审计 112\n8.6 人力资源管理 112\n8.6.1 项目组织架构 112\n8.6.2 角色定义 113\n8.6.3 人力资源管理计划 114\n8.6.4 资源的释放 115\n8.6.5 项目的延期 115\n8.7 项目沟通管理 115\n8.7.1 沟通管理概述 115\n8.7.2 干系人识别 116\n8.7.3 沟通方式与途径 116\n8.7.4 沟通管理计划 118\n8.7.5 沟通计划的管理 118\n8.7.6 监控项目沟通 118\n8.8 项目风险管理 119\n8.8.1 风险识别 119\n8.8.2 风险评估 123\n8.8.3 风险应对 125\n8.9 项目采购管理 126\n8.9.1 采购计划 127\n8.9.2 合同管理 127\n8.9.3 发货与接收 127\n第九章 项目培训方案 130\n9.1 培训概述 130\n9.2 培训范围 130\n9.3 培训对象 130\n9.4 培训目标 131\n9.5 培训时间 131\n9.6 培训方式 131\n9.7 培训场地 132\n9.8 培训教程 132\n9.9 培训讲师 132\n9.10 培训考核 132\n9.11 实施培训 133\n9.11.1 培训步骤 133\n9.11.2 培训名单确认 133\n9.11.3 计划编制 133\n9.11.4 通知发布 134\n9.11.5 实施培训 135\n9.11.6 培训评估 135\n第十章 项目验收方案 138\n10.1 验收概述 138\n10.2 验收内容 138\n10.3 验收标准 139\n10.4 验收组织 139\n10.5 验收方式 140\n10.6 验收准备 140\n10.7 验收步骤 140\n10.8 验收报告（模板） 141\n10.8.1 项目基本信息 141\n10.8.2 项目合同信息 141\n10.8.3 项目建设周期 141\n10.8.4 项目建设情况 142\n10.8.5 项目验收计划 143\n10.8.6 项目验收结论 145\n10.8.7 附件 145\n\n\n# \n# 项目概述\n## 项目信息\n项目名称：长沙市机关事务管理局智慧后勤服务管理平台项目\n建设单位：长沙市机关事务管理局\n监理单位：湖南天道信息技术咨询有限公司\n承建单位：湖南华宽通科技股份有限公司\n## 遵循标准\n- 国家、行业主管部门颁布的相关标准；\n- 国务院办公厅《信息共享互联互通平台建设指南（试行）》；\n- 《政府信息交换语言标准》；\n- 《国家电子政务工程建设项目管理暂行办法》（发改委2007)55号令）；\n- 《国家政务信息化项目建设管理办法》（国办发〔2019〕57号）；\n- GB/Z 19669-2005《XML在电子政务中的应用指南》；\n- GB/T 8567-2006《计算机软件文档编制规范》；\n- GB/T 9385-2008《计算机软件需求规格说明规范》；\n- GB/T 9386-2008《计算机软件测试文档编制规范》；\n- GB/T 11457-2006《信息技术软件工程术语》；\n- GB/T 25000.10-2016《系统与软件工程系统与软件质量要求和评价（SQuaRE）第10部分：系统与软件质量模型》；\n- GB/T 8566-2007《信息技术软件生存周期过程》；\n- GB/T 35273-2020《信息安全技术个人信息安全规范》；\n- GB/T 20271-2006《信息安全技术信息系统通用安全技术要求》；\n- GB/T 20270-2006《信息安全技术网络基础安全技术要求》；\n- GB/T 20269-2006《信息安全技术信息系统安全管理要求》；\n- GB/T 35282-2017《信息安全技术电子政务移动办公系统安全技术规范》；\n- GB/T 22239-2019《信息安全技术网络安全等级保护基本要求》；\n- GB/T 39412-2020《信息安全技术代码安全审计规范》；\n- GB/T 22240-2020《信息安全技术网络安全等级保护定级指南》；\n- GB/T 25068.1-2020《信息技术安全技术网络安全第1部分：综述和概念》；\n- GB/T 25068.2-2020《信息技术安全技术网络安全第2.部分：网络安全设计和实现指南》；\n- GB/T 22239-2019《信息安全技术网络安全等级保护基本要求第4部分：物联网安全扩展要求》。\n## 建设内容\n长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容包括以下三个方面：\n- 项目基础设施建设；\n- 智慧后勤服务管理平台建设；\n- 内外部系统对接与集成。\n### 项目基础设施建设\n长沙市机关事务管理局智慧后勤服务管理平台项目基础设施建设内容包括：智慧安全用电系统建设、智慧物联网络建设、AI视频监控系统建设、基础网络系统建设、智能交通系统建设。通过基础设施建设，一方面对现有的硬件系统提供可接入网络，另一方面也为项目提供信息和数据采集的终端，并同时通过AI视频监控系统与智能交通系统的建设为后勤管理提供更智能和直观的管理手段。\n### 智慧后勤服务管理平台\n智慧后勤服务管理平台的建设主要包括智慧后勤基础平台、智慧后勤应用平台、智慧后勤“一张图”、智慧后勤移动端应用相关内容的建设。\n智慧后勤基础平台是为项目应用部署提供基础运行环境，包括：操作系统的建设、数据库系统、中间件服务和应用基础服务或组件等。基础平台提供集约化、融合多种应用支撑服务，为整个项目提供数据初始化、统一入口、工作台、通用审批管理、物联网管理、数据资源建设、安全服务支撑等基础的服务。\n智慧后勤应用平台是为机关事务管理局各业务管理部门，提供业务后台管理的综合平台。从为机关事务局内部提供考勤管理、公文管理、用印管理、文印管理等应用，到对外的集体户口申办、应诉管理、接待管理、会务管理以及办公用房建设计划的审核、汇总和报批等功能，智慧后勤应用平台将提升机关事务局对外的服务体验及管理水平，实现业务的增效和智能化。\n智慧后勤 “一张图”，实现“所有资源一张图管理、所有设备一张图控制、所有事件一张图显示”，对数据进行直观、高效的可视化呈现，让机关大院的业务和数据变得可知可感，让决策有据可依。并帮助管理者实时了解机关大院整体的资产运行状况、车辆情况、安防情况、能效情况、服务情况等，推动机关后勤服务的管理精细化和服务专业化。\n智慧后勤移动端应用是为满足机关事务管理局在移动端的应用场景而单独开发的，它基于现有“长政通”APP和“我的长沙”城市移动综合服务平台开发，将开发完的移动应用嵌入到“长政通”App和我的长沙。其中嵌入到“长政通”APP的功能是提供给所有市直机关职工和干部的统一服务平台，实现机关后勤服务从被动到主动服务的转变，实现餐饮、物业、会务、通知公告、办公、生活等一站式服务的工具和入口，实现个人信息等基础功能、后勤主页、设施设备管理、培训管理、电子巡更、报事报修、通知公告、房屋维修项目管理等应用。\n嵌入“我的长沙”城市移动综合服务平台功能主要是提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能，提升市机关事务局的社会服务性。\n### 内外部系统对接集成\n内外部系统对接集成的建设内容包括将长沙市机关事务管理局目前已经建成的多个信息系统组网打通，实现信息的互联互通和数据共享。\n现有需要对接的系统有：智慧后勤服务管理平台与长沙市超脑服务平台、市物联网平台、人脸门禁系统、停车道闸系统、视频监控系统、长沙银行一卡通系统、办公用房系统、公务用车系统、智慧消防主机系统、巡更系统、垃圾分类称重系统、人防工程停车道闸系统、“我的长沙”城市移动综合服务平台、“长政通”app对接，以及智能交通系统与交警六合一平台对接。\n## 建设目标\n长沙市机关事务管理局智慧后勤服务管理平台项目建设目标包括以下三个方面：\n- 提高现代信息化技术在机关事务管理局各系统中应用的广度和深度，建成完善的大院基础设施、智能融合的信息技术应用和高度集成完善的智慧化大平台，充分发挥信息技术的生产力；\n- 利用最新信息化技术对各系统的相关要素进行整合，为大院内、外人员提供智慧化的办公、行政服务。通过机关综合整体信息化环境及新建的智慧后勤服务管理平台，更好的保障大院安防，减低大院能耗，提高大院管理水平，提升用户服务体验，创建绿色节约型智慧机关；\n- 为管理部门提供智慧化的管理手段，提高市直公共服务水平和行政管理效率，推动基于新技术的机关事务整体信息化发展，为机关事务管理局的管理决策提供信息化保障。\n## 实施地点\n实施地点：现场实施地点为长沙市政府园区。不需要在现场完成的工作由我方自行安排。\n## 实施周期\n实施周期：自项目合同签订完成后<u>四</u><u>个月</u><u>内</u>达到初步验收条件。\n# 项目实施组织架构\n## 项目实施组织架构图\n\n图 项目实施组织架构图\n## 实施组织角色定义\n我方在本项目中成立专门的项目管理小组以及实施团队来完成项目实施工作，在项目合同签订后，我方将指派专门的项目经理负责整个项目的执行与交付，并根据项目建设内容安排具体的实施和管理人员完成项目实施交付工作。具体角色定义如下表所示：\n表 实施组织角色定义表\n| 序号 | 角色 | 角色职责定义 |\n| :---: | :---: | :---: |\n| 1 | 项目中心 （PMO） | 参与立项评审； 指派项目经理，为项目分配合适的人力资源，协助项目经理建立项目团队； 监控项目执行过程，及时了解所有项目的人力资源、进度、质量情况，协商处理问题； 在项目结束后，对项目以及项目组成员进行综合评估； 协助项目完成项目对审与结算； 提升人员技能，考核人员绩效。 |\n| 2 | 决策支持组 | 由部门经理、中心以及公司管理层相关人员以及技术专家组成；主要职责是参与项目重大决策以及内部评审。 |\n| 3 | 项目经理 | 项目经理是立项之后的项目主要责任人，负责项目全生命周期管理。主要职责是带领项目团队在预定的时间和成本之内，交付质量合格的成果/产品。项目经理对本项目的进度、质量、成本负主要责任。 负责本项目的全面管理（包括整体、范围、时间、成本、质量、人力资源、沟通、风险、采购、干系人）； 确保项目能在既定的时间、成本范围内交付满足项目要求质量的成果或者产品； 参与以及配合项目对审以及核算相关的过程； 在项目结束时，总结项目知识和经验教训，完善文档； 对项目成员的业绩进行评估。 |\n| 4 | 质量管理组 | 质量管理组主要对项目质量情况进行监督。 监督项目的质量规划情况； 对项目过程质量进行监控； 核实项目整体交付质量。 |\n| 5 | 商务支持组 | 营销中心相关人员，包括销售人员以及商务人员。 负责产品（或合同项目）的销售，签订商务合同、跟踪合同执行过程。 负责项目客户关系维护； 商务沟通。 |\n| 6 | 售前支持组 | 项目中心解决方案部人员，主要是指参与前期解决方案的人员。 负责项目售前阶段的技术沟通； 以客户的需求为基础，在沟通的过程中根据公司产品情况以及公司的战略给客户推荐完整的解决方案； 完成项目售前阶段的其他工作，包括项目招投标过程等； 往售后完成项目知识转移； |\n| 7 | 产品支持组 | 公司产品部门相关人员，负责项目产品的相关工作： 负责参与项目自研产品相关的调研、勘测工作； 根据项目调研和需求分析情况完成项目交付产品的设计； 形成需求分析文档，并协调项目各方完成对文档的审批； 完成从需求分析到研发的知识转移过程。 |\n| 8 | 项目研发组 | 负责项目自研软件系统以及公司软件产品的相关工作： 负责软件系统的需求调研和需求分析过程； 配合项目经理完成项目的需求评审工作； 负责项目软件系统设计方案的编制以及设计评审工作； 完成软件系统的设计、开发、测试、上线工作； 根据项目要求提供项目软件相关的文档和过程提交物。 |\n| 9 | 项目实施组 | 系统集成部相关人员，按照项目实施流程规范完成项目整体实施工作： 实施前的施工现场勘测、调研和确认工作； 完成项目系统集成部分的深化设计工作； 负责硬件设备的进场报验工作； 完成项目现场的实施工作； 负责现场施工人员安全教育、技术交底和安全管理工作； 负责硬件设备调试工作； 配合完成项目的测试、测评工作。 |\n| 10 | 项目测试组 | 技术中心产品测试部相关人员，负责项目的测试工作，包括但不限于： 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |\n| 11 | 项目运维组 | 项目中心系统集成部相关人员，负责项目维护工作，包括但不限于： 项目维护方案编制； 项目现场维护工作，相关问题处理； 项目维护报告、问题处理报告编制。 |\n## 项目团队主要成员清单\n| 序号 | 姓名 | 角色 | 工作职责 | 备注说明 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 | 刘姝岐 | 总负责人 | 总领项目交付全过程，负责项目交付过程涉及到的所有商务事项 |   |\n| 2 | 余力 | 项目经理 | 负责整体项目的工作任务分解并统筹安排、跟进，协调处理项目交付过程中遇到的各种问题，确保项目按照计划有条不紊的完成交付 |   |\n| 3 | 高翔 | 产品经理 | 负责项目软件部分交付，包括软件现场调研、需求分析汇总确认、原型设计、大数据局需求对接等 |   |\n| 4 | 李义 | 技术经理 | 负责项目软件系统的设计、开发、测试、上线工作，并根据项目要求提供项目软件相关的文档和过程提交物 |   |\n| 5 | 杨湘英 | 测试组长 | 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |   |\n| 6 | 谭伟国 | 现场实施组长 | 硬件实施前的施工现场勘测、调研和确认工作； 完成项目现场硬件部分的实施和调试工作； 负责现场施工人员的安全教育、技术交底和安全管理工作。 配合完成项目硬件设备的测试、测评工作。 |   |\n| 7 | 李纯福 | 硬件工程师 | 1）智能硬件实施前的施工现场勘测、调研和确认工作； 2）完成项目现场智能硬件部分的实施工作及相关提交物的编制工作； 3）配合完成项目智能硬件设备的测试、测评工作。 |   |\n| 8 | 吉良 | 网络工程师 | 1）网络实施前的施工现场勘测、调研和确认工作； 2）完成项目现场网络部分的实施工作及相关提交物的编制工作； 3）配合完成项目网络设备的测试、测评工作。 |   |\n\n# \n# 项目进度计划\n## 项目阶段定义\n在项目的交付过程中，为了更好的对项目过程进行监控和管理，确保项目即使发生了偏差，也能通过赶工或其他调整手段来弥补项目偏差，确保项目的及时交付。长沙市机关事务管理局智慧后勤服务管理平台项目属于综合型系统集成项目，在一般项目的实施过程中，我们习惯于将项目分成以下阶段执行：\n- 项目准备阶段；\n- 项目规划阶段；\n- 项目执行阶段；\n- 项目收尾阶段。\n## 项目交付周期\n长沙市机关事务管理局智慧后勤服务管理平台项目交付周期：自项目合同签订完成后<u>四</u><u>个月内</u>达到初步验收条件。\n## 项目里程碑计划\n| 序号 | 里程碑 | 计划开始时间 | 计划结束时间 |\n| :---: | :---: | :---: | :---: |\n| 1 | 项目启动 | 2022年12月27日 | 2022年12月29日 |\n| 2 | 现场勘测 | 2022年12月28日 | 2022年12月30日 |\n| 3 | 需求调研 | 2022年12月28日 | 2023年02月17日 |\n| 4 | 项目采购 | 2022年12月27日 | 2023年01月18日 |\n| 5 | 硬件实施、单体调试 | 2023年01月05日 | 2023年02月22日 |\n| 6 | 系统开发 | 2023年01月05日 | 2023年03月15日 |\n| 7 | 系统对接 | 2023年01月20日 | 2023年02月13日 |\n| 8 | 软件测试 | 2023年02月27日 | 2023年03月23日 |\n| 9 | 系统联调测试 | 2023年03月21日 | 2023年03月29日 |\n| 10 | 项目收尾及初步验收 | 2023年03月30日 | 2023年04月27日 |\n## 项目详细计划\n| 序号 | 任务名称 | 开始时间 | 完成时间 |\n| :---: | :---: | :---: | :---: |\n| 1 | 长沙市智慧机关项目 | 2022年12月27日 | 2023年4月27日 |\n| 2 | 项目启动 | 2022年12月27日 | 2022年12月29日 |\n| 3 | 项目进度计划（初步计划） | 2022年12月27日 | 2022年12月27日 |\n| 4 | 项目人力资源计划 | 2022年12月28日 | 2022年12月28日 |\n| 5 | 项目成本预算 | 2022年12月29日 | 2022年12月29日 |\n| 6 | 项目执行 | 2022年12月27日 | 2023年3月29日 |\n| 7 | 现场勘测调研 | 2022年12月28日 | 2022年12月30日 |\n| 8 | 现场勘测 | 2022年12月28日 | 2022年12月28日 |\n| 9 | 勘测调研报告 | 2022年12月29日 | 2022年12月29日 |\n| 10 | 勘测出图 | 2022年12月30日 | 2022年12月30日 |\n| 11 | 项目采购 | 2022年12月27日 | 2023年1月18日 |\n| 12 | 项目采购计划 | 2023年1月2日 | 2023年1月4日 |\n| 13 | 机房硬件采购 | 2023年1月5日 | 2023年1月18日 |\n| 14 | 采购备货 | 2023年1月5日 | 2023年1月5日 |\n| 15 | 货物运输 | 2023年1月6日 | 2023年1月16日 |\n| 16 | 设备报验 | 2023年1月17日 | 2023年1月17日 |\n| 17 | 到货验收 | 2023年1月18日 | 2023年1月18日 |\n| 18 | 测试硬件采购 | 2022年12月27日 | 2023年1月4日 |\n| 19 | 终端设备批量采购 | 2023年1月5日 | 2023年1月18日 |\n| 20 | 采购备货 | 2023年1月5日 | 2023年1月5日 |\n| 21 | 货物运输 | 2023年1月6日 | 2023年1月16日 |\n| 22 | 设备报验 | 2023年1月17日 | 2023年1月17日 |\n| 23 | 到货验收 | 2023年1月18日 | 2023年1月18日 |\n| 24 | 项目现场启动会 | 2022年12月28日 | 2022年12月30日 |\n| 25 | 实施交付入场 | 2022年12月28日 | 2022年12月28日 |\n| 26 | 会议材料准备 | 2022年12月29日 | 2022年12月29日 |\n| 27 | 开踢会议（Kick-off Meeting） | 2022年12月30日 | 2022年12月30日 |\n| 28 | 软件需求调研分析 | 2022年12月28日 | 2023年2月17日 |\n| 29 | 需求调研 | 2022年12月28日 | 2023年2月17日 |\n| 30 | 第一阶段调研结果整理 | 2022年12月28日 | 2022年12月28日 |\n| 31 | 现有系统开发情况整理 | 2022年12月28日 | 2022年12月28日 |\n| 32 | 需求调研计划 | 2022年12月29日 | 2022年12月29日 |\n| 33 | 第二次需求调研 | 2022年12月30日 | 2023年1月19日 |\n| 34 | 原型设计与调整 | 2023年1月3日 | 2023年1月23日 |\n| 35 | 需求规格说明书 | 2023年1月24日 | 2023年2月15日 |\n| 36 | 需求评审 | 2023年2月16日 | 2023年2月17日 |\n| 37 | 外部系统对接 | 2022年12月28日 | 2023年2月13日 |\n| 38 | 客户沟通 | 2022年12月28日 | 2023年1月19日 |\n| 39 | 外部系统对接调研表 | 2022年12月28日 | 2022年12月30日 |\n| 40 | 对接系统具体情况调研 | 2023年1月17日 | 2023年1月19日 |\n| 41 | 系统对接（厂商对接） | 2023年1月20日 | 2023年2月13日 |\n| 42 | 对接需求明确（基于各对接系统） | 2023年1月20日 | 2023年2月9日 |\n| 43 | 双方确认对接技术方案 | 2023年1月24日 | 2023年2月13日 |\n| 44 | 系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 45 | 应用系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 46 | 系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 47 | 硬件对接 | 2023年1月5日 | 2023年1月12日 |\n| 48 | 对接开发调整 | 2023年1月5日 | 2023年1月11日 |\n| 49 | 对接调试 | 2023年1月6日 | 2023年1月12日 |\n| 50 | 外部系统对接 | 2023年2月14日 | 2023年3月8日 |\n| 51 | 系统对接开发 | 2023年2月14日 | 2023年3月6日 |\n| 52 | 对接调试 | 2023年2月16日 | 2023年3月8日 |\n| 53 | 软件测试 | 2023年2月27日 | 2023年3月23日 |\n| 54 | 功能性测试 | 2023年2月27日 | 2023年3月17日 |\n| 55 | 第一次BUG修复 | 2023年3月13日 | 2023年3月21日 |\n| 56 | 系统回归测试 | 2023年3月15日 | 2023年3月23日 |\n| 57 | 硬件以及基础环境实施 | 2023年1月19日 | 2023年2月22日 |\n| 58 | 机房环境实施 | 2023年1月19日 | 2023年1月25日 |\n| 59 | 硬件实施 | 2023年1月19日 | 2023年2月22日 |\n| 60 | 终端实施方案 | 2023年1月19日 | 2023年1月20日 |\n| 61 | 实施申请（甲方、物业、监理、保卫、消防） | 2023年1月23日 | 2023年1月25日 |\n| 62 | 硬件施工 | 2023年1月26日 | 2023年2月22日 |\n| 63 | 软件系统实施部署 | 2023年1月26日 | 2023年3月20日 |\n| 64 | 运行环境实施准备 | 2023年1月26日 | 2023年1月26日 |\n| 65 | 运行环境实施 | 2023年1月26日 | 2023年1月26日 |\n| 66 | 软件部署 | 2023年3月20日 | 2023年3月20日 |\n| 67 | 整体联调测试 | 2023年3月21日 | 2023年3月29日 |\n| 68 | 系统联调测试 | 2023年3月21日 | 2023年3月29日 |\n| 69 | 项目收尾 | 2023年3月30日 | 2023年4月27日 |\n| 70 | 项目培训 | 2023年3月30日 | 2023年4月19日 |\n| 71 | 项目培训方案 | 2023年3月30日 | 2023年3月31日 |\n| 72 | 培训资料准备 | 2023年4月3日 | 2023年4月7日 |\n| 73 | 实施培训 | 2023年4月10日 | 2023年4月19日 |\n| 74 | 项目初验 | 2023年4月21日 | 2023年4月27日 |\n\n## 进度保障措施\n### 进度保障概述\n在项目执行和管理的过程当中，因为不确定性以及渐进明细是项目的主要特性之一，长沙市机关事务管理局智慧后勤服务管理平台建设项目是一个综合型多系统相对负责的综合型系统集成项目，包括网络系统的建设、云平台的应用、新旧网络的融合、视频监控系统建设、智能交通建设、智慧后勤系统建设以及移动应用的建设等等，项目在执行交付过程中需要跨部门、跨单位多系统的协调和集成。项目要求在较短的实施周期内完成交付，从项目管理的角度来分析，项目的风险以及资源投入都将增加，为了保证项目进度以及项目的质量，特制定以下的项目进度保障。\n### 明确建设范围\n项目进度计划是项目管理计划的核心内容之一，也是指导整个项目进行的主要计划之一，项目计划的科学制定，是项目能确保进度的主要措施之一。\n项目进度的制定依赖于项目的建设范围，所以，在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n### 工作分解结构（WBS）\nWBS是项目进度计划制定的基础，WBS：工作分解结构是指将项目的交付成果以及完成相应成果所需要的工作进行分解，分解到40小时左右的工作包。WBS的分解遵循相应的规则：\n- 100%包含：分支上下100%包含；\n- 不可再分：最底层状态相对独立不可再分；\n- 信息透明：分解到可以充分估算完成该成果所需的时间、费用、资源等；\n- 独立责任：分解到可安排一个责任者；\n- 滚动规划：远期工作可暂时不分解。\n项目工作分解结构应包含项目所有必须交付的成果以及完成相关交付内容所需要做的工作。即WBS应能体现本项目所有的交付物与相应的工作。\n同时WBS也是整个项目管理过程的核心，项目经理通过WBS完成项目进度计划的制定，也需要通过WBS进行项目风险分析。项目的人力资源计划、项目人力成本估算均可以通过项目WBS来完成。\n### 制定进度计划\n在WBS的基础上，结合长沙市机关事务管理局智慧后勤服务管理平台建设项目的实际要求，通过排列活动顺序、估算活动持续时间、估算活动资源等动作完成项目进度计划的制定。\n在长沙市机关事务管理局智慧后勤服务管理平台建设项目中，根据项目实际情况采取倒推的方式进行进度计划的制定，在项目活动持续时间估算的过程中，先设定具体的交付和验收要求时间点，再逐步反推到项目各个阶段，相对合理的进行各个阶段时间的分配，再在各个阶段内进行各个活动时间的分配，最终根据各活动的紧前关系来评估计划的可行性和具体的资源需求以及资源冲突的可能性。\n### 实施进度控制\n在项目执行交付的过程中，本项目安排项目经理进行项目的全生命周期管理，在项目管理和监控过程中，控制进度是监控事项中的重点内容之一，控制进度的目标就是确保项目进度与项目计划之间的偏差尽量小。\n为了确保项目进度计划，项目经理乃至项目组需要进行包括但不限于下列事项的：\n- 项目执行过程中，尽量确保按照项目资源计划为项目提供相关的项目资源，以确保项目进度；\n- 制定明确的项目进度计划，确保项目按照计划执行，在项目执行过程中，应根据项目实际情况执行可落地执行的项目进度计划，并严格按照项目进度计划所规划的时间来约束项目进度，确保项目有明确的时间进度要求；\n- 明确项目采购计划，确保项目各个阶段的到货是按采购计划执行的；\n- 采取多项工作并行处理的方式，在本项目的执行过程中，因为项目的复杂性，有较多的工作是可以并行进行处理的，在项目执行过程中应尽量将能够并行处理的工作进行并行处理，确保项目进度；\n- 提前进行项目风险识别和评估，并制定风险应对措施，通过科学的风险应对确保项目进度；\n- 阶段性的进行项目进度检查，通过偏差分析，明确项目状态，并通过增加资源或成本的方式来确保进度计划，例如通过短期的赶工来确保项目进度；\n- 当项目进度确实出现较大偏差并无法纠正时，应及时的组织项目会议对项目进度计划进行调整，确保后续阶段的项目可控。\n# \n# 项目交付实施\n## 项目交付模型\n\n图 项目交付管理模型\n综合分析长沙市机关事务管理局智慧后勤服务管理平台项目的实际情况，在项目交付管理过程中，将项目根据项目具体工作大致分为四个阶段，即项目启动阶段、项目规划阶段、项目执行阶段、项目收尾阶段。项目经理根据项目阶段划分情况以及各项工作划分情况进行工作分解，并制定项目进度计划。\n## 项目启动阶段\n项目启动阶段是指项目中标至项目正式入场的阶段，本阶段的主要工作是签订商务合同、完成项目团队的组建、召开项目启动会、完成项目开工申请等主要工作。该阶段也是项目的准备阶段。\n### 项目团队组建\n在项目招投标中标后，我方将根据长沙市机关事务管理局智慧后勤服务管理平台项目的特性委派合适的项目经理负责该项目的项目交付管理。\n完成项目经理指派后，在公司内容完成项目的正式启动，并根据项目要求完成我方项目交付团队的组建。长沙市机关事务管理局智慧后勤服务管理平台项目属于综合型系统集成项目，该类型的项目，除具备综合型系统集成项目管理能力的项目经理以外，我方还将配备商务经理、售前经理、硬件产品经理、软件系统产品经理、软件系统技术经理以及开发团队、项目实施团队与项目运行维护团队参与项目的建设，根据项目不同阶段对人员的要求逐步进入或释放。\n项目团队组建完成后，召开项目内部启动会，通过项目内部启动会完成项目售前至项目售后的知识转移工作。\n同时，公司PMO（项目管理办公室）发布项目经理授权书以及项目团队组建通知。\n### 项目商务合同\n根据相关要求，在项目中标后一个月内需要完成项目《商务合同》的签订，我方将委派专门的商务经理负责该项目的商务合同签订事宜。确保在项目启动采购之前，完成项目商务合同的签订。\n### 项目启动会\n项目团队在正式入场前与建设单位、监理单位等一起召开项目启动会，项目启动会的主要作用包括以下几个方面：\n- 项目沟通机制的建立，通过项目启动会完成项目团队之间沟通机制的建立，包括项目例会制度、项目决策机制、周报要求等。\n- 项目里程碑计划的发布，在本次会议上，项目经理根据对项目情况的理解，制定基本的交付模式与里程碑计划，该里程碑计划也作为项目交付进度计划制定的基础。\n- 部分项目风险应对措施的制定，在项目启动会上，会议各方可根据项目实际情况提出在本阶段识别到的项目风险，并共同制定相应的应对措施和计划。\n- 宣布项目正式启动，近期工作的安排与计划。\n### 项目开工申请\n项目正式启动后，存在监理的情况下，项目经理需要申请《项目开工令》方可正式开工。一般情况下，项目经理根据项目具体情况编写《项目施工组织设计方案》，填写监理方提供的施工组织报验申请，监理方、建设单位评审后，签署开工令，项目正式开工。\n主要工作包括：\n- 编制项目施工组织设计方案；\n- 编制开工申请；\n- 监理方、建设单位下达项目开工令。\n### 项目其他准备\n在项目开工令申请过程中，项目经理根据项目近期工作安排情况做好项目入场准备。包括近期人员的入场协调与准备、办公场所以及环境的申请、近期详细工作计划安排等。\n## 项目规划阶段\n### 勘测调研\n项目正式启动后，项目人员入场，项目经理应根据项目建设内容组织项目现场的勘测调研工作。调研工作包括但不限于以下工作内容：\n- 编制项目勘测调研方案；\n- 根据勘测计划对项目现场进行勘测调研；\n- 编制调研报告。\n勘测调研内容根据项目建设内容的不同而不同，包括但不限于：\n- 本地机房物理环境以及基础环境调研；\n- 市政府大院网络情况调研；\n- 机关事务管理局业务情况以及软件系统需求调研；\n- 需要对接的外部系统情况调研；\n- AI视频监控系统实施环境调研以及点位确认；\n- 智慧交通系统实施环境调研以及点位确认；\n- 智能终端实施部署环境调研以及点位确认；\n- 其他用户需求调研。\n因为软件系统需求调研的工作可能持续一个较长的时间，在项目执行的过程中，我方将组建项目需求组（产品组）对长沙市机关事务管理局业务以及本次项目建设内容相关的业务进行。\n### 范围确认\n项目勘测调研工作完成后，项目经理组织项目团队对长沙市机关事务管理局智慧后勤服务管理平台项目范围进行辨识和确认。项目经理以及项目团队应根据项目前期的文档资料、现场勘测调研、客户座谈等方式收集到完整的项目需求后，完成《项目范围说明书》、《项目需求说明书》的编制。明确项目范围，并协调建设单位、监理方对项目范围达成共识。\n项目范围的明确，基本明确了项目的建设内容，也为项目目标的达成提供了建设基础。\n### 深化设计\n长沙市机关事务管理局智慧后勤服务管理平台项目属于一个综合型系统集成项目，项目涉及到的范围以及建设内容都比较广。在项目范围确认工作基本完成后，需要同步开展项目深化设计工作。深化设计工作包括两个部分，一部分是项目软件系统开发部分，需要在需求调研和需求分析的基础上开展软件系统的设计工作。另一方面是项目AI视频监控系统以及职能交通以及项目职能终端实施部分需要进行深化设计，包括具体实施点位的明确、综合布线的方式、施工的工序和安排等。\n同时，考虑项目前期设计与项目实际情况的偏差，项目往往会产生相应的变更，在深化设计的过程中，通过深化设计以及客户实际需求的情况提起项目变更，并通过设计评审过程完成变更的确认和评审。\n深化设计工作主要是基于项目前期的技术方案、现场勘测调研情况、项目前期变更要求等情况对项目设计方案（技术方案）进行调整、落地的过程。\n在项目交付过程中，基于项目交付要求，在对项目实际情况有一个全面系统了解后，明确项目实际需求，项目经理组织项目组成员对项目的技术方案进行再次进行梳理和编制，并根据项目的实际情况，落地项目的设计方案和技术方案，并确保方案的可执行。\n对于因为项目实际情况而导致项目设计方案发生变化时，项目经理应根据项目情况启动变更流程。\n设计方案包括但不限于：\n- 深化设计方案编制；\n- 提起变更；\n- 深化设计方案评审；\n- 基于评审意见的修订。\n### 实施方案\n项目实施方案是基于项目设计和项目管理计划正式启动项目实施的开始，项目经理组织项目团队对如何完成项目交付进行具体的规划，并形成相应的方案。长沙市机关事务管理局智慧后勤服务管理平台项目的实施方案应包括以下相关的内容：\n- 项目实施范围；\n- 项目工作目标分解结构；\n- 项目整体进度计划；\n- 项目人力资源规划；\n- 项目采购规划；\n- 项目本地机房实施规划；\n- 政务云环境实施规划；\n- 软件系统开发和实施规划；\n- 智能交通系统实施规划；\n- AI视频监控系统实施规划；\n- 项目系统对接融合实施规划；\n- 项目系统信创适配实施规划；\n- 项目安全等级保护测评实施规划；\n- 项目测试以及整体调整实施规划；\n- 项目运行维护规划；\n- 其他项目管理规划。\n## 项目执行阶段\n### 项目采购\n在项目规划工作进行过程中或者完成后，项目应进入实际执行，基于本项目的实际情况，为了确保项目进度，项目的实际执行工作与项目规划工作是以并行的方式进行。\n长沙市机关事务管理局智慧后勤服务管理平台项目中有较大数量的硬件设备以及终端的采购，相关设备的采购和到货直接影响到项目的实际交付。\n在项目合同签订完成后，我方即安排项目经理启动项目采购工作，公司供应链部门开始进行项目备货工作。在项目深化设计完成后，基本项目所有变更都审批完成，项目经理即开始采购。在本阶段主要工作包括：\n- 项目经理编制项目采购计划；\n- 相关计划报建设单位与监理单位，审批通过后执行。\n- 项目经理根据项目采购计划发起采购；\n- 项目经理根据项目采购情况跟踪项目到货情况。\n项目采购工作是一个相对持续的过程，在长沙市机关事务管理局智慧后勤服务管理平台项目中，项目采购工作将根据项目进度的推进和项目的实际需求完成项目备货、采购工作。\n### 到货验收\n项目经理指派具体的负责人全面负责本项目的到货验收工作。具体负责人根据项目采购计划对产品交付的时间、地点、方式以及其他条件事先完成到货规划，并提前与建设单位以及监理方进行沟通和确认，最后完成到货验收工作。\n在项目实际到货前，项目经理提前与监理单位进行到货报验。到货验收完成后，由参与到货验收的各方共同签署到货验收报告。\n到货验收方案包括但不限于：\n- 到货验收时间、地点、方式的确认；\n- 货物现场验收；\n- 完成货物入库清点；\n- 到货验收报告签署。\n对于因其他原因无法在到货现场完成到货验收的情况，项目经理在现场完成到货自检，入库清点后，再协调监理单位与建设单位共同参与到货验收。\n考虑集中到货的情况，在本项目执行过程中，项目经理将提前与机关事务管理局申请相应的设备库房，并做好设备出入库工作，以确保项目设备的安全。\n### 实施准备\n基于长沙市机关事务管理局智慧后勤服务管理平台项目的实际情况，实施准备工作非常重要，在项目正式启动实施工作之前，为了确保项目实施工作的顺利进行，同时也是在实施过程中为了确保项目实施工作不影响机关事务局以及市政府相关单位的正常办公与工作。\n相关准备工作包括：\n#### **环境考察确认**\n- 本地机房环境空间情况确认，包括但不限于机房位置、机柜空间等；\n- 基础环境强电情况确认，包括但不限于强电布线、接入条件、功率等；\n- 基础环境弱电情况确认，包括相关设备部署点位的网络情况、机房网络情况等；\n- 考虑网络系统的建设和网络改造以及物联网络的建设，需要提前完成网络VLAN以及IP申请和确认等工作。\n#### **各单位协调**\n- 在本项目中，考虑各种智能终端的安装与系统接入，需要提前完成与消防、物业、安保等部门与单位的沟通和协调，必要时，应出具建设单位同意的施工申请；\n- 考虑AI监控系统与智能交通系统的实施，需要提前与物业、安保等部门进行沟通和申请，按照市政府大院的统一规划和要求进行施工准备和施工；\n- 考虑智能交通系统需要与交警系统完成对接，需要提前协调建设单位完成与交警相关部门的对接；\n- 考虑项目有十四个需要网络改造以及对接的系统，事先应提前完成与各系统分管处室或部门进行沟通，并协调相关分管处室与部门完成与各建设厂商的对接，以确保网络改造以及系统对接的顺利；\n- 根据长沙市信息化项目建设管理办法等相关方面的要求，在长沙市机关事务管理局智慧后勤服务管理平台项目的建设过程中，软件系统应完成与中枢的能力调用对接，同时需要完成与“长政通”APP以及“我的长沙”的对接，在进行对接之前，应提前协调建设单位完成与相关监管单位以及建设厂商的对接；\n- 长沙市机关事务管理局智慧后勤服务管理平台项目中有较多的视频监控点位的建设，根据建设单位的统一规划，相关监控视频应接入到统一的视频监控系统平台中，在对接前，应提前完成与该项目的提前对接；\n- 项目建设前，应提前完成项目在政务云上相关资源的申请，并对云资源环境进行提前确认；\n- 其他需要提前申请和对接的事项。\n#### **施工入场准备**\n- 现场办公环境的协调；\n- 现场仓库的申请；\n- 施工入场准备事宜，包括施工人员安全与规范教育；\n- 施工材料以及施工设备的准备；\n#### **施工时间协调**\n- 考虑项目智能空开安装过程中不能影响建设单位以及其他相关单位的正常工作，在每个办公室空开安装时，需要协调各个办公安装的具体时间，并制定相应的安装时间表，同时在设备安装完成后必须在建设单位上班前恢复办公室的卫生以及电力，避免对建设单位以及相关单位的正常工作产生影响；\n- 在项目建设过程中，提前组建运维小组，运维小组对已经建设完成的点位在处理异常时进行机动维护。\n### 硬件实施\n#### 实施内容\n硬件实施主要包括是以下几个部分的内容：\n- 智慧安全用电硬件设备安装和调试；\n- 智慧物联硬件设备安装和调试；\n- AI视频监控硬件设备安装和调试；\n- 基础网络硬件设备安装和调试；\n- 智能交通硬件设备安装和调试。\n#### **各部分的施工方案和安全管理措施****请见****硬件系统实施****章节。**\n#### 设备清单\n| 序号 | 名称 | 规格型号 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 一 | 智慧安全用电 |   |   |\n| 1 | 智慧微断开关电源 | S3-P25 | 80 |\n| 2 | 1P 智慧微断 | S3-FC20 | 584 |\n| 3 | 2P 智慧微断 | S3-ZNC32 | 50 |\n| 4 | 3P 智慧微断 | S3-TZC63 | 31 |\n| 5 | 4P 智慧微断 | S3-TNZC63 | 47 |\n| 6 | 智慧微断通信模组 | HKT-TX01 | 80 |\n| 7 | 天线 | 定制 | 80 |\n| 8 | 导轨及箱体 | 定制 | 80 |\n| 二 | 智慧物联 |   |   |\n| 1 | 门磁传感器 | HKT-DMS01 | 115 |\n| 2 | 出入人体识别传感器 | HKT-IRC01 | 68 |\n| 3 | 多功能环境质量监测传感器 | HKT-HJC01 | 50 |\n| 4 | 温湿度传感器 | HKT-TH31 | 50 |\n| 5 | 喷淋管道压力传感器 | HKT-YL100 | 62 |\n| 6 | 水位监测传感器 | HKT-SW100 | 18 |\n| 7 | 室内消防栓压力监测传感器 | HKT-YL100 | 62 |\n| 8 | 消防主机数据采集和传输边缘计算终端 | F-ITD100-L | 2 |\n| 9 | 通信接口板卡 | F-PRC100 | 2 |\n| 10 | 室内消防栓消防阀门 | SN65-Y | 62 |\n| 11 | LoRa核心网络平台 | HKT-NS | 1 |\n| 12 | 物联网网关 | HKTGW-100 | 67 |\n| 三 | AI视频监控 |   |   |\n| 1 | 高空全景感知单元 | iDS-2VPE13-A845-ZFQM | 1 |\n| 2 | 高空全景感知单元-支架 | DS-1603ZJ-P | 1 |\n| 3 | 动火离人热成像 | DS-2TD1217T-2/PA/QM | 10 |\n| 4 | 明厨亮灶专用感知单元 | DS-2XA8225F-LZQ/MJ | 10 |\n| 5 | 明厨亮灶专用感知单元支架 | DS-1292ZJ | 10 |\n| 6 | 明厨亮灶显示屏 | DS-D5055UL-B | 4 |\n| 7 | 明厨亮灶显示屏支架 | 常规壁挂支架-3255-WA1-TS | 4 |\n| 8 | 明厨亮灶解码器 | DS-6901UD | 4 |\n| 9 | 智能警戒检测单元 | DS-2CD7347QMD-LZS(3.3-9mm)(B)(白) | 2 |\n| 10 | 客流统计智能单元 | DS-2XD8846/C-IW | 4 |\n| 11 | 客流统计智能单元支架 | DS-1227ZJ-P4 | 4 |\n| 12 | AI 开放平台系列摄像机 | DS-2XA8247F-IZS(B) | 1 |\n| 13 | 网络存储设备 | DS-A81016S（单电） | 2 |\n| 14 | 服务器 | 信创产品，XC-FF21C-B12（3671） | 2 |\n| 四 | 基础网络建设 |   |   |\n| 1 | 核心交换机 | S7706 | 2 |\n| 2 | 48 端口电接口板 | ES1M2G48TX5S | 2 |\n| 3 | 48 端口光接口板 | LSS7G48SX6S0 | 2 |\n| 4 | 集群业务子卡 | ES02VSTSA | 4 |\n| 5 | 光模块 | SFP-GE-LX-SM1310 | 36 |\n| 6 | 高速电缆 | QSFP-40G-CU3M | 8 |\n| 7 | 8口POE交换机 | TL-SG2210P | 13 |\n| 8 | 16 口百兆交换机 | TL-SG2016D | 1 |\n| 9 | 16 口百兆POE交换机 | TL-SL1218MP | 1 |\n| 10 | 24口千兆交换机 | S5735S-L24T4S-AQ2 | 1 |\n| 11 | UPS 主机 | UPS2000-G-15KRTL | 1 |\n| 12 | 电池 | 12V100AH | 16 |\n| 13 | 电池柜 | 国标 | 1 |\n| 14 | 机柜 | G28242 | 1 |\n| 五 | 智能交通 |   |   |\n| 1 | 视频融合平台一体机 | DH-DSS-T9100D-SZCQ | 1 |\n| 2 | 视频融合平台硬件务器 | 信创产品，DH-DSS-T9100D-HW/10000 | 2 |\n| 3 | 网络存储服务器 | DH-EVS5248S | 1 |\n| 4 | 硬盘 | ST6000NM021A | 48 |\n| 5 | 管理终端电脑 | 信创产品，XC-P421P/V2(256G+24+Kylin)(ZY+SMI) | 1 |\n| 6 | 液晶监视屏 | DH-LM86-S400 | 1 |\n| 7 | 核心交换机 | S7003X | 1 |\n| 8 | 800万全景AR网络摄像机 | DH-PSDW82449M-AAZYQ | 3 |\n| 9 | 高空瞭望球机 | DH-SD-8C3840-CQ | 2 |\n| 10 | 42U 机柜、机架 | G28242 | 1 |\n| 11 | 400 万星光级红外AI智慧网络球机 | DH-SDT-5X2437-SZFCQ | 15 |\n| 12 | 400万全结构化卡口摄像机 | DH-CP435-CQZYQ | 40 |\n| 13 | 补光灯 | DH-ITALE-060AA-CW3530 | 40 |\n| 14 | 交换机 | S5737-L24T4S-QA2 | 4 |\n| 15 | 光模块 | SFP-GE-LX-SM1310 | 8 |\n| 六 | 安装费用 |   |   |\n| 1 | 原电箱拆除 | 现场施工 | 80 |\n| 2 | 箱体安装 | 现场施工 | 80 |\n| 3 | 新装电箱墙面开槽及恢复 | 现场施工 | 80 |\n| 4 | 1P 智慧微断安装 | 现场施工 | 584 |\n| 5 | 2P 智慧微断安装 | 现场施工 | 50 |\n| 6 | 3P、4P 智慧微断安装 | 现场施工 | 78 |\n| 7 | 电源模组安装 | 现场施工 | 80 |\n| 8 | 通信模组安装 | 现场施工 | 80 |\n| 9 | 天线安装 | 现场施工 | 80 |\n| 10 | 物联网传感器安装 | 现场施工 | 160 |\n| 11 | 高空全景感知单元安装 | 现场施工 | 1 |\n| 12 | 动火离人热成像安装 | 现场施工 | 10 |\n| 13 | 明厨亮灶专用感知单元安装 | 现场施工 | 10 |\n| 14 | 明厨亮灶显示屏安装 | 现场施工 | 4 |\n| 15 | 明厨亮灶解码器安装 | 现场施工 | 4 |\n| 16 | 智能警戒检测单元安装 | 现场施工 | 2 |\n| 17 | 客流统计智能单元安装 | 现场施工 | 4 |\n| 18 | AI 开放平台系列摄像机安装 | 现场施工 | 1 |\n| 19 | 服务器安装 | 现场施工 | 2 |\n| 20 | 挖沟槽土方 | 现场施工 | 94.62 |\n| 21 | 回填方 | 现场施工 | 94.62 |\n| 22 | 混凝土构建拆除 | 现场施工 | 0.2 |\n| 23 | C20水泥混凝土路面恢复 | 现场施工 | 0.2 |\n| 24 | 整理绿化用地 | 现场施工 | 400 |\n| 25 | 视频监控系统 | 现场施工 | 1 |\n| 26 | 物联网传感器安装 | 现场施工 | 265 |\n| 27 | 消防主机控制器联网改造 | 现场施工 | 2 |\n| 28 | 室内消防栓阀门改造 | 现场施工 | 62 |\n| 29 | 物联网网关安装 | 现场施工 | 67 |\n| 30 | 防火墙安装 | 现场施工 | 2 |\n| 31 | 交换机安装 | 现场施工 | 18 |\n| 32 | UPS系统安装 | 现场施工 | 1 |\n| 33 | 4芯光缆 | GYTA 4 G652D | 11707 |\n| 34 | 12芯光缆 | GYTA 12 G652D | 5957 |\n| 35 | 24芯光缆 | GYTA 24 G652D | 2334 |\n| 36 | 网线 | 六类网线 | 7532 |\n| 37 | 配管DN20 | 联塑 DN20 | 3392 |\n| 38 | 电线RVV3*1.5mm2 | RVV3*1.5mm2 | 2539 |\n| 39 | 72芯光纤配线架 | Hbodier 72 空箱 | 4 |\n| 40 | 光纤终端盒安装 | 国标 | 6 |\n| 41 | 光纤熔接安装 | 现场施工 | 200 |\n| 42 | 光纤测试 | 现场施工 | 1 |\n| 43 | 综合设备箱 500*400*200mm | 定制 | 11 |\n| 44 | 综合设备箱 330*480*135mm | 定制 | 13 |\n| 45 | 混凝土构建拆除 | 现场施工 | 2 |\n| 46 | C20水泥混凝土路面恢复 | 现场施工 | 2 |\n| 47 | 整理绿化用地 | 现场施工 | 624 |\n| 48 | 室外设备机柜 | 定制 | 4 |\n| 49 | 室外设备箱560*210 | 300*400，定制 | 47 |\n| 50 | 光纤收发器(1光1电) | FC311A-3+FC311B-3 | 16 |\n| 51 | 光纤收发器(1光2电) | FC311A-3+FC314B-3 | 8 |\n| 52 | 光纤收发器(1光4电) | FC311A-3+FC314B-3 | 8 |\n| 53 | 光纤收发器机架 | TL-FC1400 | 5 |\n| 54 | 避雷器 | 绿联80740 | 42 |\n| 55 | 配线YJV3*6mm2 | YJV3*6mm2 | 2730 |\n| 56 | 配线RVV3*2.5 | RVV3*2.5 | 3917 |\n| 57 | 配管DN32 | 联塑 DN32 | 126 |\n| 58 | 室外立杆安装 | 定制 | 42 |\n| 59 | 光纤熔接安装 | 现场施工 | 200 |\n| 60 | 混凝土构建拆除 | 现场施工 | 4 |\n| 61 | C20水泥混凝土路面恢复 | 现场施工 | 4 |\n| 62 | 整理绿化用地 | 现场施工 | 400 |\n| 63 | 监控系统摄像头安装 | 现场施工 | 60 |\n| 64 | 智能交通系统 | 现场施工 | 1 |\n| 65 | 人脸识别门禁系统 | 现场施工 | 10 |\n| 66 | 停车道闸系统 | 现场施工 | 7 |\n| 67 | 长沙银行一卡通系统 | 现场施工 | 1 |\n| 68 | 视频监控系统 | 现场施工 | 1 |\n| 69 | 巡更系统 | 现场施工 | 1 |\n| 70 | 脚手架搭拆费 | 现场施工 | 1 |\n| 71 | PVC管 20mm | 联塑DN20 | 8087 |\n| 72 | PE管 20mm | 联塑DN20 | 113 |\n| 73 | 辅材 | 国标 | 1 |\n\n### 软件系统实施\n长沙市机关事务管理局智慧后勤服务管理平台项目软件系统实施工作采取软件工程通用的交付模式。\n#### 交付模型\n\n图 软件系统实施模型\n#### 需求分析\n##### 需求分析过程\n项目经理根据合同要求组织进行项目软件建设需求调研工作，包括以下工作内容：\n- 需求调研；\n- 需求分析；\n- 需求规格说明书；\n- 需求规格说明书评审；\n- 需求规格说明书修订。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 需求调研 | 《需求调研方案》 《需求调研报告》 | 项目经理、开发组 |\n| 需求分析 | 《需求规格说明书》 | 项目经理、开发组 |\n| 需求评审 | 《需求规格说明书》 | 项目经理、开发组 |\n\n软件系统的需求调研应该以项目前期知识为基础，包括技术方案、招投标文件、售前方案等。通过对前期需求整理完成后，并以此为基础开展需求的调研和确认工作。为了避免沟通过程中的噪声以及与建设方达成对目标系统的共识，应在需求整理完成后和用户进行需求的确认以及评审。\n##### 需求规格说明书\n需求规格说明书是需求分析阶段的主要成果，在需求分析过程中，提交物包括但不限于：\n- 需求调研大纲；\n- 需求调研方案；\n- 需求调研记录；\n- 需求调研报告；\n- 系统原型设计；\n- 需求规格说明书。\n需求规格说明书中应从长沙市机关事务管理局具体的业务开始进行分析，文档包括但不限于：\n- 项目背景介绍；\n- 项目建设的内容和目标；\n- 项目建设方和相关业务的现状分析、问题描述；\n- 项目用户方组织架构分析；\n- 项目建设单位业务需求分析，包括对各个业务的描述、业务流程（绘图）、业务承担的部门或者职位等；\n- 项目功能需求分析。项目功能需求分析是指从业务需求到功能需求的一个转换过程，文档要求完成从业务到功能的整体规划（功能架构）、功能模块规划、功能点规划、功能用例图、用例、界面原型、交互设计、数据项设计；\n- 需求追踪矩阵，包括横向需求追踪矩阵和纵向追踪矩阵。\n##### 需求确认与评审\n需求规格规格说明书完成后，项目经理将提起需求评审专题会议，根据项目情况由建设方或监理方组织项目需求评审会议，需求提出方或者相关专家组是项目需求评审会议的主要参会人员。项目经理准备需求评审材料，包括需求规格说明书、讲演PPT等。\n需求评审完成后，由评审组提出评审意见，对需求规格说明书调整后，由评审各方签订。\n评审通过的需求规格说明书将作为本项目软件系统验收的主要标准之一。\n#### 系统设计\n项目经理组织项目团队在需求分析的基础上进行系统设计工作，包括以下工作内容：\n- 系统概要设计；\n- 系统详细设计；\n- 系统设计评审。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统概要设计 | 《系统概要设计说明书》 | 项目经理、开发组 |\n| 系统详细设计 | 《系统详细设计说明书》 | 项目经理、开发组 |\n| 系统设计评审 | 《系统详细设计说明书》 | 项目经理、开发组 |\n#### 系统开发\n在系统设计通过的基础上，项目经理组织项目组成员完成项目软件开发过程，具体工作内容如下：\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统开发 | 项目软件 | 项目经理、开发组 |\n#### 集成融合\n长沙市机关事务管理局智慧后勤服务管理平台项目作为一个综合型系统集成项目，项目建设过程中有大量的项目系统集成融合与系统对接事项，具体包括：\n- 智慧后勤管理平台与十四个已建系统的对接；\n- 智慧后勤管理平台对能力中枢中部分共性能力的调用；\n- 智慧后勤管理平台移动端应用嵌入“长政通”APP；\n- 智慧后勤管理平台移动端应用嵌入“我的长沙”公众号；\n- 智慧后勤管理平台监控视频接入视频统一融合平台。\n#### 系统测试\n在研发过程中以及研发工作基本结束后，项目组对软件进行测试，测试过程的具体工作内容如下：\n- 项目软件系统测试；\n- 系统内部集成测试；\n- 外部系统集成测试；\n- 移动端融合测试；\n- 视频数据传输调试；\n- 数据资源共享测试。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 单元测试 | 《测试报告》 | 测试组长 |\n| 压力测试 | 《测试方案》 《测试报告》 | 测试组长 |\n| 性能测试 | 《测试方案》 《测试报告》 | 测试组长 |\n| 整体测试 | 《测试方案》 《测试报告》 | 测试组长 |\n上线部署\n系统整体测试完成后，项目组根据项目要求，将软件系统部署在建设方指定的基础环境中，并按找项目软件要求完成项目软件的启动和部署后的测试。测试完成满足要求后，宣布系统正式上线。\n长沙市机关事务管理局智慧后勤服务管理平台项目系统部署分为两个部分：\n- 智慧后勤系统平台在政务云上的部署；\n- 在本地资源上系统的部署。\n具体工作内容包括但不限于：\n- 系统上线方案；\n- 系统上线准备；\n- 系统上线申请；\n- 系统上线执行；\n- 系统上线报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统上线准备 | 《系统上线方案》 | 项目经理、开发组 |\n| 系统部署 | 《软件系统部署报告》 | 项目经理、开发组 |\n| 系统上线 | 《系统上线报告》 | 项目经理、开发组 |\n#### 用户测试\n在系统上线部署完成后，用户方队已经部署完成的系统进行测试，用户按照实际的使用情景进行测试，测试完成后，用户出具用户测试报告，项目组对测试结果中的相关问题进行确认和处理。\n长沙市机关事务管理局智慧后勤服务管理平台项目用户测试时间主要为项目试用期，系统上线完成后，在系统试用期内完成整个系统的用户测试过程。\n本阶段相关工作内容如下：\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 用户测试 | 《用户测试报告》 | 项目用户方 |\n| 问题处理 | 《用户测试问题处理报告》 | 项目经理以及项目团队成员 |\n### 集成实施\n请见项目系统集成实施章节。\n### 项目测试\n项目软硬件系统安装部署完成后，项目经理应根据项目合同要求，对项目范围内的集成系统进行集成测试，以确保集成系统的稳定性和可靠性。\n本项目包含多个内部智能终端的集成，同时也包含多个外部系统的集成，系统集成测试（系统联调）在整个项目执行过程中非常重要。\n测试前，我方测试组将制定完善的项目测试方案，测试方案应包含具体的测试范围定义、测试用例、测试时间、测试人员、测试用例数据等。\n测试方案完成后，提交项目各方进行审批，测试方案通过各方共同审批后，测试人员根据测试方案完成集成测试，并形成测试报告，由项目各方共同签署。\n测试报告将作为项目整体验收的依据之一。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| --- | :---: | :---: |\n| 制定测试方案 | 《测试方案》 《测试报告》 | 测试工程师/实施项目经理 |\n| 集成测试 | 《测试报告》（各方签署） | 测试工程师 |\n### 等保测评\n根据相关要求，长沙市机关事务管理局智慧后勤管理平台项目至少应满足等级保护二级以上的安全要求。项目等级保护是在项目设计过程中就开始进行规划，包括平台的部署环境、相关网络改造以及集成融合等各个方面。\n项目基本建设完成后，由我方编制《信息系统等级保护实施方案》，并按方案进行等级保护实施。在项目具备等保测评条件后，经项目经理提起，由建设单位申请相关机构对项目进行测评，并约定具体的测评时间。项目组应有相应的人员参与整个测评并协助完成测评相关的工作。\n测评过程中，根据测评机构反馈的相关问题和建议对信息系统进行整改，直至满足测评相关要求并通过等保测评。\n测评完成后，由测评机构出具正式的《项目信息系统等保测评报告》，并交建设方和项目组存档。\n等保测评包括但不限于：\n    - 和测评单位沟通测评工作和内容，制定测评计划，编制《信息系统等级保护实施方案》；\n    - 提起项目等保测评申请；\n    - 和建设单位、测评单位召开测评启动会议，明确测评方案和计划；\n    - 协助测评单位现场测评；\n    - 根据测评结果，反馈项目组进行整改，整改内容包括基础软硬件安全漏洞风险、应用系统安全漏洞风险等\n    - 协调测评单位复测；\n    - 根据测评结果考虑进行下一步；\n    - 和测评单位、建设单位一起编写等保制度；\n    - 对等保进度进行讨论，定稿后发布；\n    - 通过测评，归档《信息系统等保测评报告》。\n  - \n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 等级保护实施设计 | 《信息系统等级保护实施方案》 | 项目经理、实施组 |\n| 发起等保测评申请 | 《等保测评申请》 | 项目经理、实施组 |\n| 配合完成等保测评 |   | 项目经理、实施组 |\n| 系统整改 | 《系统整改报告》 | 项目经理、实施组 |\n| 测评完成 | 《信息系统等保测评报告》 | 项目经理、实施组 |\n### 密码测评\n密码测评主要针对需要通过密码技术保障信息系统物理和环境安全、网络和通信安全、设备和计算安全、应用和数据安全的项目，或针对项目合同有密码测评要求的项目。密码测评可同时针对非涉密信息系统项目和涉密信息系统项目。\n一般情况下，由项目承建单位编制好《密码应用建设方案》、《密码应用实施方案》、《密码应用应急处置方案》，并按实施方案进行密码应用实施。在项目具备密码测评条件后，经项目经理提起，由建设方申请相关机构对项目进行测评，并约定具体的测评时间。项目组应有相应的人员参与整个测评并协助完成测评相关的工作。\n测评过程中，根据测评机构反馈的相关问题和建议对信息系统进行整改，直至满足测评相关要求并通过密码测评。\n测评完成后，由测评机构出具正式的《XXX项目信息系统密码测评报告》，并交建设方和项目组存档。\n等保测评包括但不限于：\n    - 编制《密码应用建设方案》、《密码应用实施方案》、《密码应用应急处置方案》并按相关方案完成密码应用建设实施；\n    - 提起项目密码测评申请，协助建设方向测评机构申请密码测评；\n    - 协助完成密码测评；\n    - 根据测评意见和建议完成对信息系统的整改，编制整改报告；\n    - 通过密码测评，归档《项目信息系统密码测评报告》。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 密码应用建设设计 | 《密码应用建设方案》 《密码应用实施方案》 《密码应用应急处置方案》 | 项目经理、实施组 |\n| 密码测评 |   | 项目经理、实施组 |\n| 系统整改 | 《系统密码测评整改报告》 | 项目经理、实施组 |\n| 测评完成 | 《信息系统密码测评报告》 | 项目经理、实施组 |\n### 项目整改\n根据监理、客户及质量小组评估意见，全面规范项目交付质量、进度及技术资料管理。包括但不限于以下工作：\n    - 成立项目整改小组；\n    - 编制项目整改计划；\n    - 按计划进行项目整改；\n    - 输出项目整改报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 成立项目整改小组 | 整改小组名单 | 决策支撑组、PMO、项目经理、质量经理 |\n| 编制项目整改计划 | 《项目整改计划》 | PMO、项目经理、质量经理、质量工程师 |\n| 输出项目整改报告 | 《项目整改报告》 | 项目经理、质量经理、质量工程师 |\n### 项目上线\n项目系统整改完成并达到上线条件后，项目经理应申请项目上线运行。包括但不限于以下工作：\n- 项目上线申请；\n- 系统上线；\n- 系统上线问题处理；\n- 系统上线报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 上线申请 | 《系统上线申请》 《项目试运行方案》 | 项目经理 |\n| 系统上线 | 《系统上线报告》 | 项目经理 |\n### 项目培训\n系统上后，项目经理组织项目的培训活动。长沙市机关事务管理局智慧后勤管理平台项目的项目培训主要包括两个方面的培训：\n- 项目信息系统使用方面的培训；\n- 项目信息系统在日常使用过程中的简单维护和管理培训。\n具体包括但不限于以下内容：\n- 培训环境：根据项目合同培训要求准备培训环境，包括培训的场地，其他的培训设备，培训环境搭建等；\n- 培训讲师：项目根据项目实际情况指派具备培训能力的工程师担任培训讲师进行培训工作；\n- 培训方案：项目组根据项目最终的建设情况编制培训方案，对培训的具体事宜进行合理的安排，包括培训计划、批次等，编制培训教程，并根据培训方案完成培训工作；\n- 实施培训：根据培训方案完成培训工作，编制《培训报告》，建设单位以及监理单位签署培训报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 培训准备 |   | 项目经理、培训组 |\n| 制定方案 | 《培训方案》包括但不限于： 《培训计划》（培训具体安排） 《培训教程》 | 培训组 |\n| 完成培训 | 《培训报告》 | 培训组 |\n## 项目收尾阶段\n### 阶段验收\n阶段验收也称为项目初步验收。项目范围内的相关工作以及商务合同所承诺的项目成果基本提交完成后，项目经理向建设方申请项目阶段验收。\n项目阶段验收根据项目商务合同、合同附件、项目招投标文件中所要求进行项目初步验收工作。阶段验收由建设方组织验收团队（专家组）主要对项目建设内容、建设成果、提交物等进行逐一的核实确认和审阅，并对承建方进行现场质询。确保项目交付情况满足项目合同以及相关协议的要求。\n阶段验收会根据项目的具体情况（项目性质、复杂程度、用户技术力量以及项目当时的环境）来完成项目验收工作。\n本项目初步验收可采用集中验收方式，既在集中的相对比较短的时间内完成验收工作；也可以采用试运行方式进行验收，既根据项目产品在用户现场的具体运行情况来决定验收，在试运行的过程中，将运行情况进行记录，形成试运行报告，用户签字后作为验收的依据之一。\n\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 阶段验收申请 | 《阶段验收申请》 | 项目经理 |\n| 验收准备 | 《项目验收方案》 《项目阶段验收材料》 | 项目经理以及项目组成员 |\n| 阶段验收 | 《阶段验收报告》 | 项目经理以及项目组成员 |\n| 阶段验收整改 | 《阶段验收整改报告》 | 项目经理以及项目组成员 |\n### 项目试运行\n阶段验收通过，并根据项目初步验收意见完成整改后，项目经理向建设方和监理方提起项目系统试运行。\n具体包括但不限于以下工作：\n    - 申请系统试运行；\n    - 试运行方案；\n    - 试运行准备，例如：统初始化、基础数据准备等；\n    - 试运行报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 申请系统试运行 | 《项目试运行申请》 《项目试运行方案》 | 项目经理 |\n| 试运行报告 | 《试运行报告》 | 实施组 |\n### 竣工验收\n项目竣工验收是指项目完成了阶段验收中的整改内容，并通过试运行确保系统能满足建设方的整体要求，交付情况满足项目竣工验收标准，项目可启动竣工验收。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| --- | --- | --- |\n| 阶竣工验收申请 | 《竣工验收申请》 | 项目经理 |\n| 验收准备 | 《项目竣工验收方案》 《项目竣工验收材料》 | 项目经理以及项目组成员 |\n| 竣工验收 | 《竣工验收报告》 | 项目经理以及项目组成员 |\n\n\n# 硬件系统实施\n在本项目中硬件实施包括以下几个部分的内容：\n- 智慧安全用电硬件设备安装和调试；\n- 智慧物联硬件设备安装和调试；\n- AI视频监控硬件设备安装和调试；\n- 基础网络硬件设备安装和调试；\n智能交通硬件设备安装和调试。\n## 智慧安全用电\n### 实施内容\n智慧安全用电智能终端的安装包括以下的实施内容；\n- 智慧微断开关电源以及通信模组（含天线以及箱体）；\n- 1-4P智慧微断。\n在项目深化设计工作完成后，根据项目深化设计所规划的点位进行智慧微断及通讯模组的实施和部署。智慧微断开关电源以及通信模组（含天线以及箱体）一共为80套。共有80个强电箱需要改造。其中涉及到使用1P智慧微断共584个、2P智慧微断50个、3P智慧微断31个、4P智慧微断47个。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 智慧微断开关电源 | 个 | 80 |\n| 2 | 1P智慧微断 | 个 | 584 |\n| 3 | 2P智慧微断 | 个 | 50 |\n| 4 | 3P智慧微断 | 个 | 31 |\n| 5 | 4P智慧微断 | 个 | 47 |\n| 6 | 智慧微断通信模组 | 个 | 80 |\n| 7 | 天线 | 根 | 80 |\n| 8 | 导轨及箱体 | 套 | 80 |\n### 实施位置\n相关终端均部署于市政府大楼1F至13F和市委大楼1F至11F过道两侧现有的电箱位置，替换原来电箱里面的传统空开。\n### 实施人员\n因为相关内容的实施涉及到强电，为了保证安全，在项目实施过程中，相关实施人员必须持证上岗，我方位该项目配备具有强电施工证的人员进行相关内容的实施。\n### 实施时间\n因为在智能微断等设备的实施过程中必须关闭楼层电源或实施点位的总控制电源开关，同时还要完成安装后的测试，会影响到相应施工区域的用电，故我方对该项工作的施工时间安排在非正常工作时间进行，主要是利用市委、市政府大楼放假和下班后休息时间进行集中施工。\n### 实施方式\n智能微断的施工采用提前准备、分步规划、错时实施、单点测试的施工原则，即在智能微断的施工过程中，提前进行施工准备，包括在物业进行报备，并通知到相关施工区域的办公室。施工前制定详细的施工规划，并分步进行，每天只规划能够实施完成的施工内容。在时间上，错开办公和用电时间，利用休息时间进行施工，并留有充足的施工和测试以及整改的时间。在施工过程中，安装完成一个点位必须立刻进行通电测试，确保每次安装的点位取电正常后再开始下一个点位的安装。\n### 实施流程\n智慧微断的实施流程如下：\n- 制定各点位实施计划；\n- 施工前提前进行施工报备以及协调机关事务局发布施工点位的施工通知，当特殊情况时，临时调整施工计划；\n- 逐个点位施工并测试，确保各点位取电正常；\n- 清理施工现场，确保现场卫生。\n### 安全文明施工措施\n因为项目涉及到强电，在施工过程中的安全必须要进行保障，为确保施工安全，应采取如下措施：\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 禁止单人实施，施工过程至少两人一组，其中至少一人拥有电工证，无证人员禁止上手操作；\n- 实施期间安全员必须全程在岗监督；\n- 严禁带电操作，必须按照项目规范流程进行施工，施工前施工点位必须断电；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 终端安装完成后，应进行通电以及漏电测试，确保安装正确；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 智慧物联\n### 实施内容\n智慧物联终端的实施包括以下内容：门磁传感器、出入识别传感器、多功能空气质量传感器、温湿度传感器、喷淋管道压力监测传感器、室内消防栓压力监测传感器、水位监测传感器、消防控制器通信板卡、物联网网关。\n#### 门磁传感器\n数量：115个。\n部署于食堂的库房门和消防门、市政府和市委大楼B2、B1、1F~13F以及顶楼各层的消防门监测，确保消防门处于常闭状态；\n#### 出入识别传感器\n数量：68个。\n部署于食堂大楼的主要出入口、市政府和市委大楼B2、B1、1F~13F以及顶楼各层的出入口，用于监测当前会议室或者各楼层里面的实时人数统计；\n#### 多功能空气质量传感器\n数量：50个。\n部署于市政府和市委大楼各楼层过道以及会议室，用于监测所在环境的空气质量参数；\n#### 温湿度传感器\n数量：50个。\n部署于食堂库房、弱电机房、强电机房、空调机房以及水泵房，用于监测所在环境的温湿度状态，实现相关区域的安全管理\n#### 喷淋管道压力监测传感器\n数量：62个。\n部署于食堂、市政府和市委大楼各楼层的喷淋监测压力表处，实现实时监测喷淋管道的水压，确保喷淋管道水压安全。\n#### 室内消防栓压力监测传感器\n数量：62个。\n部署于食堂、市政府和市委大楼各楼层的消防栓压力表处，实现实时监测消防栓的水压，确保消防栓水压安全。\n#### 水位监测传感器\n数量：18个。\n具体部署于食堂、市委和市政府大楼内的生活用水水箱和消防用水箱，实现水位高度的监测，确保生活用水和消防用水安全。\n#### 消防控制器通信板卡\n消防控制器数据采集和传输边缘计算终端和通信接口板卡共2套，具体部署于食堂、市委和市政府大楼内的2个消防主机，实现现有消防主机的数据采集，对消防实现全方位的实时监测；\n#### 物联网网关\n数量：67台。\n具体部署于食堂、市委和市政府大楼内各楼层过道以及食堂库房、弱电机房、强电机房、空调机房以及水泵房，实现门磁传感器、出入识别传感器、多功能空气质量传感器、温湿度传感器、喷淋管道压力监测传感器、室内消防栓压力监测传感器和水位监测传感器接入物联网网关进行数据传输。\n### 设备清单\n| 序号 | 终端名称 | 单 | 数量 |\n| :---: | :---: | :---: | ---: |\n| 1 | 门磁传感器 | 个 | 115 |\n| 2 | 出入人体识别传感器 | 个 | 68 |\n| 3 | 多功能环境质量监测传感器 | 个 | 50 |\n| 4 | 温湿度传感器 | 个 | 50 |\n| 5 | 喷淋管道压力传感器 | 个 | 62 |\n| 6 | 水位监测传感器 | 个 | 18 |\n| 7 | 室内消防栓压力监测传感器 | 个 | 62 |\n| 8 | 消防主机数据采集和传输边缘计算终端 | 台 | 2 |\n| 9 | 通信接口板卡 | 个 | 2 |\n| 10 | 室内消防栓消防阀门 | 个 | 62 |\n| 11 | LoRa核心网络平台 | 套 | 1 |\n| 12 | 物联网网关 | 台 | 67 |\n### 实施方式\n在项目深化设计完成后，根据不同类型传感器所安装的区域、安装要求等情况对项目施工时间进行规划。根据各类传感器接入要求，先完成施工区域物联网网关的安装与调试，以确保其他终端安装后能尽快按成调试。\n### 施工时间\n市委市政府大楼的施工时间考虑安装过程中的噪声，主要是利用市委、市政府大楼放假和下班后休息时间进行集中施工。\n其他区域和点位在正常的上班时间施工。\n### 实施流程\n实施流程如下：\n- 制定各点位实施计划；\n- 施工前提前进行施工报备以及协调机关事务局发布施工点位的施工通知，当特殊情况时，临时调整施工计划；\n- 逐个点位施工并测试，确保各点位取电正常；\n- 清理施工现场，确保现场卫生。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## AI视频监控\nAI智能监控系统实施主要包括前端视频感知单元以及后段存储、管理以及显示设备的安装实施。\n### 实施内容\nAI视频监控系统的重点是对厨房区域进行视频感知单元的部署，通过部署全景网络智能摄像机、动火离人感知单元及摄像机等前端感知单元，实现对厨房工作人员的规范化操作进行监控，实现智能报警，对厨房门外进行余留垃圾报警，对区域内实现大场景监控，包括高空全景感知单元、明厨亮灶专用感知单元、明厨亮灶显示屏、AI开放平台系列摄像机等；\n基础网络建设为依托现有电子政务外网的网络架构，对前端设备进行接入，实现前端和后端应用的网络交互。\n本期AI视频监控系统新建28个摄像头，根据摄像头分辨率以及存储时间要求计算，至少需要存储空间28×3.7=103.6T，出于数据安全考虑和本地管理需要，配置两台本地磁盘阵列做数据备份，每台磁盘阵列含16块6T硬盘，二台存储空间合计192T，可以满足项目AI视频监控系统的视频数据存储要求。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 高空全景感知单元 | 台 | 1 |\n| 2 | 高空全景感知单元-支架 | 个 | 1 |\n| 3 | 动火离人热成像 | 台 | 10 |\n| 4 | 明厨亮灶专用感知单元 | 台 | 10 |\n| 5 | 明厨亮灶专用感知单元支架 | 台 | 10 |\n| 6 | 明厨亮灶显示屏 | 台 | 4 |\n| 7 | 明厨亮灶显示屏支架 | 台 | 4 |\n| 8 | 明厨亮灶解码器 | 台 | 4 |\n| 9 | 智能警戒检测单元 | 台 | 2 |\n| 10 | 客流统计智能单元 | 台 | 4 |\n| 11 | 客流统计智能单元支架 | 台 | 4 |\n| 12 | AI开放平台系列摄像机 | 台 | 1 |\n| 13 | 网络存储设备 | 台 | 2 |\n| 14 | 服务器 | 台 | 2 |\n### 实施点位\n| 序号 | 区域 | 位置 | 数量 | 设备 | 备注 |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 | 机关1食堂 | 机关1食堂1楼后厨南北两侧墙面 | 4 | 动火离人热成像摄像机 | 新建支架 |\n| 2 | 机关1食堂 | 机关1食堂2楼后厨东西各一台 | 2 | 动火离人热成像摄像机 | 新建支架 |\n| 3 | 机关1食堂 | 机关食堂1楼操作间西墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 4 | 机关1食堂 | 机关食堂1楼南门东侧厨房南侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 5 | 机关1食堂 | 机关食堂2楼南门北侧洗漱间北侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 6 | 机关1食堂 | 自助餐厅1楼厨房东侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 7 | 机关1食堂 | 机关1食堂后厨入口 | 1 | AI开放平台系列摄像机 | 新建立杆 |\n| 8 | 机关1食堂 | 一楼餐厅北面柱子 | 2 | 明厨亮灶显示屏 | 新建支架 |\n| 9 | 机关1食堂 | 二楼餐厅南面墙面 | 2 | 明厨亮灶显示屏 | 新建支架 |\n| 10 | 市政府大楼 | 南栋楼顶东南角 | 1 | 高空全景感知单元 | 新建支架 |\n| 11 | 市政府大楼 | 南栋1层东西侧走廊靠楼梯口 | 2 | 智能警戒检测单元 | 新建支架 |\n| 12 | 市政府大楼 | 南栋1层正门入口处 | 2 | 客流统计智能单元 | 新建支架 |\n| 13 | 市委大楼 | 北栋1层正门入口处 | 2 | 客流统计智能单元 | 新建支架 |\n### 实施方式\nAI视频监控系统的实施主要是AI摄像头的实施安装，相关的摄像头安装安装基本采用借杆或在墙壁安装的方式，仅在机关一食堂后厨入口需要新建立杆，其余均通过新建支架即可完成。\n### 实施流程\nAI视频监控系统实施流程如下：\n- 派遣施工人员进行实施现场点位的勘测与确认，再次明确具体安装方式，明确各个点位的电、网的接入方式；\n- 制定明确的安装方案与计划；\n- 新建立杆点位基坑挖掘、地笼放入、浇筑，可与智能交通系统同时实施；（隐蔽工程拍照）\n- 新建立杆点位立杆、电、网接入，其他各点位电、网接入到位；\n- 申请相关设备的IP地址，并提前将地址写入设备中；\n- 摄像头安装、（前置条件：视频监控平台部署完成。）系统接入调试；\n- 编写各点位设备安装实施单；\n- 实施完成，编写AI视频监控系统实施报告。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 基础网络\n### 实施内容\n硬件系统实施主要包括是以下几个部分的实施：\n- 网络系统的建设；\n- 本地机房设备的部署实施。\n市委市政府大院目前已经具备完整的网络系统，本次建设主要是在现有网络系统的基础上完成物联网网络系统的建设。另一部分是机房设备在本地机房的实施部署。\n### 机房环境实施\n本期项目包含设备间部署机柜、配线架、UPS以及设备间的综合布线工作，包括如下工作：\n- UPS主机以及电池箱的安装；\n- 本项目所采购的机柜的安装；\n- 机房强电线路部署；\n- 机房弱电网线的部署实施。\n目前将人防工程机房定位为数据机房，提供机房设备管理和部分业务服务。新增设备安装在既有机柜。为保障机房设备和安防监控系统设备能稳定不间断运行，设备间（机房）需配置一台UPS电源主机（15KVA），以及16只100AH/12V的UPS专用电池蓄电池。\n### 网络系统实施\n本项目配备两台核心交换机，作为本项目的汇聚交换设备，上连人防机房的核心交换，本项目其他设备主要以这两台设备作为汇聚接入。其中核心交换机（智能交通）作为智能交通系统的汇聚交换机上连本项目的核心交换。\n### 网络拓扑图\n\n图 网络系统建设拓扑图\n### 设备清单\n| 序号 | 设备 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 核心交换机 | 台 | 2 |\n| 2 | 48端口电接口板 | 块 | 2 |\n| 3 | 48端口光接口板 | 块 | 2 |\n| 4 | 集群业务子卡 | 块 | 4 |\n| 5 | 光模块 | 个 | 36 |\n| 6 | 高速电缆 | 根 | 8 |\n| 7 | 8口POE交换机 | 台 | 13 |\n| 8 | 16口百兆交换机 | 台 | 1 |\n| 9 | 16口百兆POE交换机 | 台 | 1 |\n| 10 | 24口千兆交换机 | 台 | 1 |\n| 11 | UPS主机 | 个 | 1 |\n| 12 | 电池 | 个 | 16 |\n| 13 | 电池柜 | 个 | 1 |\n| 14 | 机柜 | 个 | 1 |\n### 实施位置\n相关设备主要部署在人防工程机房，在本期项目中，部署两个42U标准机柜，新增2台核心交换以及1台智能交通核心交换机部署在该机房。同时，AI视频监控系统以及智能交通系统的NVR设备以及服务器设备均部署在该机房。\n其他交换设备根据项目设计，根据各视频点位以及传感器点位分步情况进行部署，各办公楼内可利用楼层交换设备进行部署。\n### 实施流程\n硬件系统实施是本期项目实施的基础实施内容，关系到后期的软件系统实施、智能终端实施（含智慧安全用电系统）以及AI视频监控系统、智能交通系统的实施。具体实施流程如下：\n- 完成实施环境勘测调研；\n- 项目VLAN、IP规划以及申请；\n- 制定项目实施方案、实施计划；\n- 检查环境内强电、弱电以及空间情况；\n- 申请进入人防工程机房启动实施；\n- 设备入场，包括机柜、电池柜等；\n- 机柜、UPS安装实施；\n- 强电部署到机柜；\n- 弱电部署到机柜；\n- 核心交换设备、服务器、存储设备上架安装；\n- 设备加电测试、设备初始化配置、网络测试；\n- 设备实施报告编写；\n- 工程检验以及交付。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 智能交通\n### 实施内容\n以政府机关大院为中心，通过增设卡口形成外围大防控圈，实现对车辆抓拍，并将抓拍的车辆图像及分析数据上传到管理平台实现统一管理应用，包括视频融合平台一体机、视频融合平台硬件服务器、网络存储服务器、管理终端电脑、全景AR网络摄像机等。建设智能车辆管控平台，实现对前端感知设备采集的数据进行统一接入、统一存储、统一订阅、统一推送服务，满足实时视频监控、车辆查询布控、车辆黑白名单管理、车辆超速、违停短信息提示等管理应用。\n本期共建设高空瞭望球机2台、全景AR网络摄像机3台、AI智慧网络球机15台、卡口摄像机40台、视频融合平台服务器、网络存储服务器等。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 视频融合平台一体机 | 台 | 1 |\n| 2 | 视频融合平台硬件务器 | 台 | 2 |\n| 3 | 网络存储服务器 | 块 | 1 |\n| 4 | 硬盘 | 块 | 48 |\n| 5 | 管理终端电脑 | 台 | 1 |\n| 6 | 液晶监视屏 | 台 | 1 |\n| 7 | 核心交换机 | 台 | 1 |\n| 8 | 800万全景AR网络摄像机 | 台 | 3 |\n| 9 | 高空瞭望球机 | 台 | 2 |\n| 10 | 42U机柜 | 台 | 1 |\n| 11 | 400 万星光级红外AI智慧网络球机 | 台 | 15 |\n| 12 | 400万全结构化卡口摄像机 | 台 | 40 |\n| 13 | 补光灯 | 台 | 40 |\n| 14 | 交换机 | 台 | 4 |\n| 15 | 光模块 | 块 | 8 |\n### 设备点位\n本期建设设备包括：高空瞭望 2 台、全景 AR3 台、智慧网络球机 15、卡口摄像机 40 台，摄像机共 60 台，新增支架 5 个，新立杆 34 根，共杆 8 处。\n其点位如下（最终已深化设计确认的定位位置为准）：\n| 序号 | 摄像机安装位置 | 摄像机类型 | 单位 | 数量 | 备注 |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 | 政府顶楼南边 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 2 | 市委顶楼北边 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 3 | 二办顶楼东南角 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 4 | 政府东边 | 高空瞭望球机 | 台 | 1 | 新增支架 |\n| 5 | 二办顶楼北边 | 高空瞭望球机 | 台 | 1 | 新增支架 |\n| 6 | 杜鹃广场西北 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 7 | 杜鹃广场西出口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 8 | 政协东北角人防出口东 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 9 | 档案馆院外西北角 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 10 | 一食堂南出入口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 11 | 武警中队东北角外 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 12 | 人工湖东侧车道中 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 13 | 人工湖东北角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 14 | 人工湖北杜鹃路出口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 15 | 八方小区车辆入口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 16 | 人工湖西南角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 17 | 二办东北角 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 18 | 二办前坪南侧马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 19 | 二办西南角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 20 | 人民会堂西北角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 21 | 杜鹃广场南侧中 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 22 | 杜鹃广场东侧入口 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 23 | 杜鹃广场东北角 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 24 | 市人大东南角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 25 | 杜鹃广场北侧中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 26 | 杜鹃广场西边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 27 | 杜鹃广场西出口 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 28 | 政协东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 29 | 政府月台西 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 30 | 市委月台西 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 31 | 党史研究楼前坪 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 32 | 武警中队南侧 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 33 | 一食堂南出入口 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 34 | 武警中队东北角外 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 35 | 人工湖东侧车道中 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 36 | 人工湖东北角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 37 | 人工湖北杜鹃路出口 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 38 | 人工湖北侧人防出口 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 39 | 警备司令部东边 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 40 | 警备司令部南边 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 41 | 警备司令部西边 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 42 | 恒晟南侧中 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 43 | 二办西南角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 44 | 生态停车场西北角 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 45 | 二办东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 46 | 政协南边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 47 | 人大东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n### 实施方式\n智能交通系统实施主要是摄像头的实施安装，相关的摄像头的安装基本采购新建立杆的方式进行规划，根据市政府大院的要求，所有摄像头的安装尽量不采用新建立杆的方式，而是尽量采用借杆或新建横臂的方式。\n### 实施流程\n智能交通系统实施流程如下：\n- 派遣施工人员进行实施现场点位的勘测与确认，再次明确具体安装方式，明确各个点位的电、网的接入方式；\n- 制定明确的安装方案与计划；\n- 新建立杆点位基坑挖掘、地笼放入、浇筑，可与智能交通系统同时实施；（隐蔽工程拍照）\n- 新建立杆点位立杆、电、网接入，其他各点位电、网接入到位；\n- 申请相关设备的IP地址，并提前将地址写入设备中；\n- 摄像头安装、（前置条件：视频监控平台部署完成。）系统接入调试；\n- 编写各点位设备安装实施单；\n- 实施完成，编写智能交通系统实施报告。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n- \n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n\n# 项目系统集成实施\n## 集成实施概述\n本项目涉及到十多个其他系统的集成实施，在项目交付过程中，项目系统的集成实施是项目建设过程中非常重要的实施内容之一。项目系统的集成涉及到智慧后勤管理系统与建设单位其他已建系统的对接、与智能终端的对接、能力中枢能力的调用、移动应用端的嵌入等多个方面。\n在项目的交付过程中，对于系统集成部分，需要从设计阶段开始将该部分内容作为重点，从设计、开发、实施、集成以及测试各个环节总体考虑才能确保项目的完整交付。\n## 集成实施原则\n综合考虑长沙市机关事务管理局智慧后勤管理平台项目的特性，在该项目中，项目系统集成实施的原则是统一规划、统一设计；统一规范、统一标准；分步实施、分步验收。\n统一规划、统一设计：是指长沙市机关事务管理局智慧后勤管理平台项目作为一个整体，在项目顶层设计开始就应该对项目交付过程中所需要完成的系统内外部集成与对接进行规划与设计。通过统一的规划和设计确保项目系统的整体性，也避免了在项目交付过程中出现系统对接上的遗漏。\n统一规范、统一标准：系统集成过程中有诸多的系统对接、视频对接以及智能终端对接要求，在项目交付过程中，应该对同类型的对接进行规范，统一对接规范和接口要求，特别是在数据对接与视频对接方面，采购统一的对接标准，确保各个系统对接的顺利，提升对接效率，减少后期的维护要求。\n分步实施、分步验收：智慧后勤管理系统与其他系统的集成涉及面非常广，所有的对接并非统一的整体，对接过程涉及到与其他系统监管单位、承建方、用户等各个方面的协调，在对接的过程中，基于不同系统的对接进度分步实施，每对接完成一个就验收一个，确保整体的对接进度。\n## 集成实施内容\n项目集成实施内容涉及到如下几个方面：\n- 系统嵌入实施，重要是指智慧后勤管理系统的移动端APP需要嵌入到“长政通”APP中。第二，智慧后勤管理系统的微信小程序需要嵌入“我的长沙”微信小程序内。\n- 智慧后勤管理系统与长沙市能力中枢的对接，主要是指智慧后勤管理系统对长沙市能力中枢所提供的共性能力的调用。\n- 系统之间的对接，包括垃圾分类、人防道闸系统等在内的十四个系统的对接，主要对接涉及到系统之间的数据交互和系统控制。\n- 智慧后勤管理系统与物联终端以及智慧安全用电终端设备的对接。\n- 智慧后勤管理系统中AI视频监控系统、智能交通系统与机关事务局在建视频监控统一平台系统的对接。\n- 智慧后勤管理系统中智能交通系统与交警六合一平台的对接。\n## 集成实施架构\n\n图 项目系统集成融合示意图\n## 集成融合实施\n### 中枢对接实施\n#### 概述\n根据《长沙市信息化建设项目管理办法》的相关要求，长沙市机关事务管理局智慧后勤管理平台在实施过程中部分长沙市城市大脑（中枢）具备的共性能力无须自行开发，可直接调用相关的服务。\n2021年12月，长沙正式发布上线“长沙城市超级大脑1.0”，发布智能中枢能力清单187项，数据中台归集汇聚数据总量达339亿多条，形成了人口、法人、地理信息、城市部件、房产房屋等基础数据库。\n#### 长沙市中枢能力清单\n| 系统 | 一级服务能力 | 二级服务能力 | 服务方式 | 服务状态 | 服务能力描述 |\n| --- | :---: | :---: | :---: | :---: | :---: |\n| 电子证照 | 生成证照 | 在线填报证照 | H5页面 | 已发布 | 用于各部门业务系统提交证照照面信息到电子证照综合管理系统，并且通过提交xml规范模版，让返回的页面就带有自动回填数据，减少在线填报的手工录入量 |\n| 电子证照 | 生成证照 | 证照照面信息提交服务 | 接口 | 已发布 | 电子证照照面信息提交接口，通过第三方系统后台合成数据格式，定时或手动触发推送照面信息，提交到电子证照综合管理系统 |\n| 电子证照 | 生成证照 | 在线签章证照 | 接口 | 已发布 | 获取指定的证照类型的待签章列表。该接口用于各部门业务系统获取待签章的证照列表，可以选择证照进行在线签章 |\n| 电子证照 | 生成证照 | 缺失证照在线提交 | H5页面 | 已发布 | 登记个人或企业缺失的证照信息，提供页面。 |\n| 电子证照 | 生成证照 | 生成结果获取服务 | 接口 | 已发布 | 第三方系统在提交证照生成请求后，可以通过提交时的唯一验证串（第三方系统自行产生的唯一ID）来获取此证照的相关信息，用于关联证照生成结果或其他业务场景，此接口可以在改造时通过在关键操作结束之后由后台触发或前端手动触发实现。 |\n| 电子证照 | 证照变更管理 | 电子证照作废服务 | 接口 | 已发布 | 各部门业务系统中的证照有做注销、作废等终止证照使用操作时，需调用电子证照综合管理系统的作废接口，同步实现电子证照的作废。 |\n| 电子证照 | 证照变更管理 | 电子证照变更申请页面获取服务 | H5页面 | 已发布 | 对指定的电子证照发起变更申请，适用本质是变更、换证的业务。 |\n| 电子证照 | 证照变更管理 | 电子证照变更申请数据提交 | 接口 | 已发布 | 对指定的电子证照发起变更，将新的证照数据填入xml提交，可以从其他证照共享接口或生成结果获取接口获得证照的标识，如文件编号、提取码、证照ID等。 |\n| 电子证照 | 证照信息查验 | 电子证照验证服务 | 接口 | 已发布 | 根据持证主体代码和证照信息查验证照的有效性 |\n| 电子证照 | 证照信息查验 | 基于证照标识信息获取服务 | 接口 | 已发布 | 根据证照标识检索证照信息。 |\n| 电子证照 | 证照信息查验 | 基于持证主体代码信息获取服务 | 接口 | 已发布 | 根据持证主体代码检索证照信息。 |\n| 电子证照 | 证照信息查验 | 电子证照检索服务 | 接口 | 已发布 | 根据持证主体代码检索证照列表。 |\n| 电子证照 | 证照信息查验 | 基于证照标识下载服务 | 接口 | 已发布 | 根据证照唯一标识下载证照。 |\n| 电子证照 | 证照信息查验 | 基于持证主体代码下载服务 | 接口 | 已发布 | 根据持证主体代码下载证照。 |\n| 微服务&容器平台 | 微服务/容器化框架 |   | SDK | 已发布 | 兼容springcloud框架，提供服务注册中心、api网关、服务的限流、服务鉴权、服务路由、弹性伸缩、日志归集、日志配置、熔断等功能 |\n| 微服务&容器平台 | 分布式事务 |   | SDK | 已发布 | 集成了分布式事务能力，支持 TCC 模式分布式事务管理功能。对于跨数据库、跨服务的分布式场景，用户可以在控制台上查看事务运行情况并进行超时事务处理，保证事务的一致性 |\n| 微服务&容器平台 | 自动化运维 |   | H5页面 | 已发布 | 提供从创建应用到运行应用的全程管理，功能包括创建、删除、部署、回滚、扩容、下线、启动和停止应用；支持可视化调用链查询和拓扑图；支持日志服务的查询及检索；支持系统参数的配置；有可视化的页面监控 |\n| 微服务&容器平台 | 镜像仓库 |   | H5页面 | 已发布 | 支持镜像仓库的管理，有公共仓库和租户仓库 |\n| 消息队列 | 消息发布 |   | SDK | 已发布 | 创建消息并进行发布，可以创建普通消息、延迟消息、事务消息、回溯消息等。 |\n| 消息队列 | 消息订阅 |   | SDK | 已发布 | 支持消费已发布的各种类型的消息。 |\n| 政务微信 | 即时通讯 | 聊天管理 | 工具 | 已发布 | 支持单聊、群聊方式；支持群管理和群成员的管理；支持发送文字消息、图片消息、表情、文件等消息 |\n| 政务微信 | 即时通讯 | 音视频 | 工具 | 已发布 | 支持在单人会话中，可以向对方发起视频/音频通话，并且支持开启/关闭摄像头、开启/关闭静音、开启/关闭免提；支持在多人会话中，可以向多人直接发起视频/音频通话，并且支持开启/关闭摄像头、开启/关闭静音、开启/关闭免提 |\n| 政务微信 | 即时通讯 | 红包发送 | 工具 | 已发布 | 支持在群聊中发送普照红包或者向指定成员发送专属红包 |\n| 政务微信 | 即时通讯 | 通讯录 | 工具 | 已发布 | 支持组织架构管理、成员管理及标签功能。标签功能可以管理员可以对某些同类型的成员添加同一个标签 |\n| 政务微信 | 即时通讯 | 搜索 | 工具 | 已发布 | 通过姓名、拼音、手机号码等方式可以搜索到联系人。 通过群名、群成员等方式可以搜索到群聊。 通过部门名称和相关关键字等方式可以搜索到组织节点。 通过应用名称或相关名称的关键字等方式可以搜索到应用。可通过群聊参与人、群名、聊天消息关键字、文件名、聊天时间等方法进行搜索聊天记录。 |\n| 政务微信 | 即时通讯 | 收藏 | 工具 | 已发布 | 支持收藏消息、表情、图片、文件、语音、视频、地理位置等，方便快速查找重要信息内容。 可将收藏的内容，发送至聊天中，支持分享聊天消息、表情、图片、文件、语音、视频、地理位置等。 若不需要已收藏的消息，移除收藏的内容。 |\n| 政务微信 | 协同办公支撑 | 工作邮箱接入 | 接口 | 已发布 | 支持绑定工作邮箱后，可在“机构邮箱”中进行邮件的收信、发信、读信、写信等操作，支持搜索。 支持发送邮件、分享邮件、回复邮件、转发邮件、删除邮件、收藏邮件、邮件标为未读、不再提醒他的邮件。 支持置顶邮箱提醒、消息免打扰、查找邮件、支持修改邮箱服务器设置。可以按邮箱文件夹中的分类，选择开启邮箱提醒的文件夹。 设置不提醒名单、邮箱更新频率、更换邮箱、解除邮箱绑定、加载邮件图片。 |\n| 政务微信 | 协同办公支撑 | 部门自建服务号 | SDK,接口 | 已发布 | 支持应用管理和应用能力设置。 应用管理支持设置或修改应用logo、应用名称、应用介绍、应用可见范围。支持删除应用，可以将不常用的应用，折叠到更多应用，消息提醒也会自动折叠，可以查看并回复成员发来的消息； 应用能力设置支持自定义菜单，支持发送消息，支持多媒体消息，防止截屏泄密设置，支持接收消息，支持自动回复，支持网页授权及JS—SDK等 |\n| 政务微信 | 开放平台 | 应用运营管理 | 接口 | 已发布 | 支持查看每个应用运营数据，包括：今日进入应用人数、今日进入应用次数、应用中人数。 |\n| 政务微信 | 开放平台 | 应用开发与管理 | SDK,接口 | 已发布 | 支持网页JS-SDK、SDK及接口的方式进行应用的开发，以及 应用开发的可视化管理 |\n| 政务微信 | 政务微信协同办公标准产品 | 办文 | H5页面 | 已发布 | 政务微信移动端提供基础的公文办理功能：审批流转，分发传阅，流程跟踪、审批、公文回执、公文协办、收文传阅、发文分发、关联文件、办理超时提醒，实现公文移动端办理。在政务微信端可对公文预览，签收，转办等操作，配备对应业务闭环web端后台支撑，与两办协同OA系统打通，在PC端支持国产化和X86双适配。 |\n| 政务微信 | 政务微信协同办公标准产品 | 办会 | H5页面 | 已发布 | 在政务微信端实现会议发送和回复等功能。包括：会议通知发送、短信跟踪、会议回复、会议跟踪，配备对应办会业务闭环web端后台。 |\n| 政务微信 | 政务微信协同办公标准产品 | 办事 | H5页面 | 已发布 | 政务微信端实现快捷的短信通知发送入口，指定用户、单位浏览权限，在政务微信端实现内部签呈起草，审批流转。 |\n| 统一物流 | 寄送邮件（新增物流信息）服务 | 无 | 接口 | 已发布 | 业务系统发起订单新增服务，传递给统一物流服务进而传递给物流系统处理。 支持在线资费。 在线付费或到付 支持消息推送给收寄件人 |\n| 统一物流 | 查询全国行政区划数据 | 无 | 接口 | 已发布 | 支持业务部门获取全国标准且完整的行政区划数据，用于收寄件地址填写 |\n| 统一物流 | 个人收件地址查询服务（地址库服务） | 无 | 接口 | 已发布 | 支持获取本人的邮寄地址信息 |\n| 统一物流 | 查询寄件记录服务 | 无 | 接口 | 已发布 | 支持查看本人的收寄件相关信息，包括收件人姓名，地址，联系方式，邮编。寄件人姓名，地址，联系方式，邮编 |\n| 统一物流 | 物流订单状态查询 | 无 | 接口 | 已发布 | 支持查看订单物流状态信息 |\n| 统一物流 | 物流订单取消 | 无 | 接口 | 已发布 | 支持在一定条件下取消本人的物流订单 |\n| 统一物流 | 物流订单变更 | 无 | 接口 | 已发布 | 支持在一定条件下变更本人的物流订单信息 |\n| 统一消息 | 短信通知发送 | 无 | 接口 | 已发布 | 支持通过短信渠道发送消息通知给到相关人 |\n| 统一消息 | 短信验证码发送 | 无 | 接口 | 已发布 | 支持通过短信渠道发送验证码消息给到相关人 |\n| 统一消息 | 站内信 | 无 | 接口 | 已发布 | 支持站内信系统之间发送消息 |\n| 统一消息 | 微信小程序通知 | 无 | 接口 | 已发布 | 支持通过微信小程序发送消息通知给相关人 |\n| 统一消息 | 微信服务号通知 | 无 | 接口 | 已发布 | 支持通过微信服务号发送消息通知给相关人 |\n| 统一消息 | 邮件 | 无 | 接口 | 已发布 | 支持通过邮件发送消息通知给相关人 |\n| 统一消息 | 政务微信消息通知 | 无 | 接口 | 已发布 | 支持通过政务微信发送消息通知给相关人 |\n| 统一身份认证 | 自然人认证 | 自然人账号密码登录 | 页面 | 已发布 | 提供统一的自然人通过账号密码进行验证登录 |\n| 统一身份认证 | 自然人认证 | 自然人刷脸核验登录 | 页面 | 已发布 | 提供身份认证小程序二维码，进行人像识别登录 |\n| 统一身份认证 | 自然人认证 | 自然人手机验证码核验登录 | 页面 | 已发布 | 提供用户注册时的手机号获取短信验证码登录 |\n| 统一身份认证 | 自然人认证 | 自然人微信登录 | 页面 | 已发布 | 提供的身份认证小程序二维码，进行城市服务登录 |\n| 统一身份认证 | 自然人认证 | 自然人省/国家政务服务平台登录 | 页面 | 已发布 | 提供湖南省认证平台登陆 |\n| 统一身份认证 | 自然人认证 | 自然人基本信息获取 | 页面 | 已发布 | 通过个人身份唯一标识获取本人的基本信息 |\n| 统一身份认证 | 自然人认证 | 自然人账号统一登出 | 页面 | 已发布 | 提供自然人用户对已登录的账号进行登出 |\n| 统一身份认证 | 法人认证 | 法人账号密码登录 | 页面 | 已发布 | 提供法人账号密码进行验证登录 |\n| 统一身份认证 | 法人认证 | 法人CA认证登录 | 页面 | 已发布 | 数字证书认证平台，用户通过数字证书及输入密码进行登录 |\n| 统一身份认证 | 法人认证 | 法人基本信息获取 | 页面 | 已发布 | 通过企业唯一标识，获取本企业基本信息 |\n| 统一身份认证 | 法人认证 | 法人省/国家政务服务平台登录 | 页面 | 已发布 | 提供湖南省认证平台登陆 |\n| 统一身份认证 | 法人认证 | 法人账号统一登出 | 页面 | 已发布 | 提供法人用户对已登录的账号进行登出 |\n| 统一身份认证 | 行政人员认证 | 账号密码登录 | 页面 | 已发布 | 提供政务人员通过账号和密码登录 |\n| 统一身份认证 | 行政人员认证 | 政务微信扫码登录 | 页面 | 已发布 | 提供政务微信身份认证二维码扫一扫登录 |\n| 统一身份认证 | 行政人员认证 | 基本信息获取 | 页面 | 已发布 | 通过政务人员唯一标识，获取本人基本信息 |\n| 统一身份认证 | 行政人员认证 | 账号统一登出 | 页面 | 已发布 | 提供政务人员用户对已登录的账号进行登出 |\n| 统一用户 | 个人信息 | 基本信息 | 接口 | 已发布 | 提供个人的基本信息获取，包括：姓名，性别，身份证号，住址，联系方式等 |\n| 统一用户 | 个人信息 | 政务服务办件材料 | 接口 | 待发布 | 提供政务服务办事材料获取，包括：文件名、类型、大小、上传时间 |\n| 统一用户 | 个人信息 | 电子证照 | 接口 | 已发布 | 提供电子证照信息获取，包括：证件名、证件类型、签发机构、签发时间、有效期（至）、证照状态 |\n| 统一用户 | 个人信息 | 政务服务办事记录 | 接口 | 待发布 | 提供政府服务办事记录获取，包括：事项名称，流水号，父级事项，申办时间，最新环节时间 详情：各环节受理部门，受理状态，受理时间 |\n| 统一用户 | 个人信息 | 身份证信息 | 接口 | 已发布 | 提供公积金信息获取，包括：公积金余额，缴费记录，贷款记录，贷款进度 |\n| 统一用户 | 个人信息 | 公积金信息 | 接口 | 已发布 | 提供社保信息获取，包括：参保单位，险种类型，参保日期，截止日期，参保状态 |\n| 统一用户 | 个人信息 | 社保信息 | 接口 | 已发布 | 提供不动产权信息获取，包括：共有情况，不动产单元号，不动产权证号，坐落地址，权利类型，权利性质，用途，面积，使用期限，权利其他状况，电子证照 |\n| 统一用户 | 个人信息 | 不动产权信息 | 接口 | 待发布 | 提供企业基本信息获取，包括：统一社会信用代码、法定代表人身份证、企业名称、企业类型、企业注册地、企业状态 |\n| 统一用户 | 企业信息 | 基本信息 | 接口 | 已发布 | 提供企业基本信息获取，包括：获取企业基本信息，包括：公司名称，注册资本，法定代表人，法人证件号码（主要指身份证号），法人证件名称，经营范围，营业期限等信息，负责人通信地址，负责人联系电话，负责人邮政编码，注册地址，企业成立日期，企业常用联系人联系电话，企业常用联系人姓名，企业常用联系人邮箱，统一社会信用码，企业类型，经营者姓名，邮箱，邮政编码，联系电话，备注等信息。 |\n| 统一用户 | 企业信息 | 政务服务办件材料 | 接口 | 待发布 | 提供政务服务办事材料获取，包括：文件名、类型、大小、上传时间 |\n| 统一用户 | 企业信息 | 电子证照 | 接口 | 已发布 | 提供电子证照信息获取，包括：证件名、证件类型、签发机构、签发时间、有效期（至）、证照状态 |\n| 统一用户 | 企业信息 | 政务服务办事记录 | 接口 | 待发布 | 提供政府服务办事记录获取，包括：事项名称，流水号，父级事项，申办时间，最新环节时间 详情：各环节受理部门，受理状态，受理时间 |\n| 统一用户 | 企业信息 | 法定代表人信息 | 接口 | 已发布 | 提供法定代表人信息获取，包括：法定代表人证件类型、法定代表人证件号码 |\n| 统一用户 | 企业信息 | 企业登记详情 | 接口 | 已发布 | 提供企业登记详情获取，包括：住所、业务范围、法定代表人姓名、注册资金、活动地域、业务主管单位、发证机关、有效期限、发证日期、经费来源、开办资金 |\n| 统一用户 | 企业信息 | 企业变更信息 | 接口 | 已发布 | 提供企业变更信息获取，包括：变更事项、变更前、变更后、变更日期、登记单位 |\n| 统一用户 | 政务人员信息 | 组织架构信息 | 接口 | 已发布 | 提供政务人员组织架构信息获取，包括：部门名称、职能描述、是否虚拟部门、上级部门、部门负责人、部门分管领导 |\n| 统一用户 | 政务人员信息 | 人员信息 | 接口 | 已发布 | 提供政务人员信息获取，包括：姓名、账号、性别、手机号、邮箱、证件类型、证件号码、所属部门职务、身份、入职时间 |\n| 统一待办 | 待办列表页面 | 无 | 页面 | 已发布 | 提供统一的待办汇总页面，展示用户所有待办数据 |\n| 统一待办 | 待阅列表页面 | 无 | 页面 | 已发布 | 提供统一的待阅汇总页面，展示用户所有待阅数据 |\n| 统一待办 | 待办信息管理接口 | 创建单据 | 接口 | 已发布 | 提供用户创建待办事项到待办列表 |\n| 统一待办 | 待办信息管理接口 | 关闭单据 | 接口 | 已发布 | 用户处理完待办事项（该待办事项置为已办事项，待阅置为已阅），通过请求参数传递关闭单据状态值 |\n| 统一待办 | 待办信息管理接口 | 收藏单据 | 接口 | 已发布 | 提供用户对特定单据进行收藏；根据taskId更新收藏状态 |\n| 统一待办 | 待办信息管理接口 | 废弃单据 | 接口 | 已发布 | 支持通过业务系统撤回待办事项 |\n| 统一待办 | 待办信息管理接口 | 单据已读 | 接口 | 已发布 | 用户已查看单据，原待办事项的阅读状态置为已读 |\n| 统一待办 | 查询指定用户的待办信息 | 无 | 页面 | 已发布 | 用户需查看某单个用户的所有单据（待办、待阅、已办、已阅）的数量；根据用户id、来源系统（特定应用或全部应用）获取单据数量 |\n| 统一待办 | 待办提醒 | 无 | 页面 | 已发布 | 用户催单或者单据超时未处理，需要再次提醒待办处理人时，业务系统调用单据提醒接口，给待办人下发单据通知消息 |\n| 政务开放平台 | 小程序开发框架 | 无 | 页面 | 已发布 | 为政务服务开发者提供政务服务小程序开发框架、UI组件库、脚手架工具、设计资源及相关教程 |\n| 政务开放平台 | WEB站点开发框架 | 无 | 页面 | 已发布 | 为政务服务开发者提供政务服务web站点UI组件库、前端编译工具及相关教程 |\n| 政务开放平台 | H5开发框架 | 无 | 页面 | 已发布 | 为各委办局业务系统开发商提供政务服务H5 UI组件库 |\n| 政务开放平台 | CDN静态资源管理 | 无 | 接口 | 已发布 | 为开发提供图片、json文件、csv表格等CDN静态资源提供管理与访问功能 |\n| 政务开放平台 | 动态配置管理 | 无 | 接口 | 已发布 | 提供小程序使用的配置文件、静态资源等资源 |\n| 政务运营平台 | 内置运营数据查看与分析 | 无 | 页面 | 已发布 | 提供强大数据处理分析能力，包括通用用户行为分析、专项分析、自定义报表分析和应用管理等基础能力，为产品数据运营提供支持。 |\n| 政务运营平台 | 运营报表自定义分析 | 无 | 页面 | 已发布 | 支持企业将自身的线下数据及业务数据可视化，通过数十种自定义的报表类型、多种筛选条件、维度、样式的设计，帮助企业根据自身业务特性构建数据分析报表，同时可以结合应用数据深度分析。 |\n| 政务运营平台 | 运营数据上报服务 | 无 | 接口 | 已发布 | 将埋点数通过上报接口上报至运营平台的运营数据管理中进行数据处理 |\n| 智能网关 | 反向代理服务 | 无 | 页面 | 已发布 | 提供站点全过程管理，支持由站点提供方发起站点创建，填写相关的站点配置信息，完成站点创建。 |\n| 智能网关 | 负载均衡服务 | 无 | 页面 | 已发布 | 为服务提供随机负载和会话保持的负载均衡方式 |\n| 智能网关 | 接口注册与订阅 | 无 | 页面 | 已发布 | 提供接口注册与订阅的全过程管理能力，支持由服务提供方发起服务创建，填写相关的服务配置信息，完成服务创建。 对于指定服务的订阅申请，建立审批机制，将由该服务的系统管理员进行审批，审批通过之后相应的应用即有权限调用该服务。 |\n| 表单引擎 | 可视化表单开发 | 无 | 页面 | 已发布 | 提供可视化的表单设计及开发能力，提供丰富的表单工具箱，以及可视化画板，便于开发快速完成表单的设计和代码生成，支持所见即所得预览。 |\n| 表单引擎 | 表单版本管理 | 无 | 页面 | 已发布 | 将发布的表单进行管理，主要包括版本的控制、表单的删除等，提供表单的创建，查看，编辑，复制，发布和删除功能。 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章注册接口服务 | 接口 | 已发布 | 电子印章制作单位制作的电子印章，需要在长沙市互联网+政务服务统一电子印章认证管理平台内进行应用，需要将电子印章在平台内进行注册 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章获取接口服务 | 接口 | 已发布 | 根据电子印章的签名证书信息获取电子印章数据 根据电子印章唯一赋码获取电子印章数据 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章状态查询接口服务 | 接口 | 已发布 | 电子印章状态查询 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 组织机构注册接口服务 | 接口 | 已发布 | 将组织机构注册到长沙市互联网+政务服务统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 用户注册接口服务 | 接口 | 已发布 | 将用户注册到长沙市互联网+政务服务统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 签章日志记录接口服务 | 接口 | 已发布 | 签章产品在做签章时将日志记录到统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 获取时间戳接口服务 | 接口 | 已发布 | 签章时获取时间戳信息 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 签章验证接口服务 | 接口 | 已发布 | 验证印章结构体数据和签章结构体数据 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF控件签章接口服务 | 接口 | 已发布 | 提供的对PDF格式的文件进行电子签章的功能，它包含了两部分：PDF格式文件签章和PDF格式文件签章验证。 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF单线程摘要计算接口服务 | 接口 | 已发布 | 提供PDF文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF单线程签名合并接口服务 | 接口 | 已发布 | 提供PDF文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF多线程摘要计算接口服务 | 接口 | 已发布 | 提供PDF文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF多线程签名合并接口服务 | 接口 | 已发布 | 提供PDF文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF会签接口服务 | 接口 | 已发布 | 提供PDF文件会签模式签章服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF撤销印章接口服务 | 接口 | 已发布 | 提供PDF文件撤销指定印章的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 文件上传接口服务 | 接口 | 已发布 | 提供PDF文件上传到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 文件下载接口服务 | 接口 | 已发布 | 提供PDF文件下载到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 签章文件验证接口服务 | 接口 | 已发布 | 查看当前印章的相关信息，例如：验章结果，印章标识、厂商标识、印章类型、签章人姓名、印章名称、签章时间、证书信息、制章人、制章日期、签名方法、软件版本号等。 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD控件签章接口服务 | 接口 | 已发布 | 对OFD文档加盖电子印章后，对文档摘要进行数字签名处理。通过阅读器上的电子签章对OFD文件进行签章，用户可以手动拖动印章到指定位置实现公章/个人签名。 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD单线程摘要计算接口服务 | 接口 | 已发布 | 提供OFD文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD单线程签名合并接口服务 | 接口 | 已发布 | 提供OFD文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD多线程摘要计算接口服务 | 接口 | 已发布 | 提供OFD文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD多线程签名合并接口服务 | 接口 | 已发布 | 提供OFD文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD会签接口服务 | 接口 | 已发布 | 提供OFD文件会签模式签章服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD撤销印章接口服务 | 接口 | 已发布 | 提供OFD文件撤销指定印章的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 文件上传接口服务 | 接口 | 已发布 | 提供OFD文件上传到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 文件下载接口服务 | 接口 | 已发布 | 提供OFD文件下载到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 签章文件验证接口服务 | 接口 | 已发布 | 查看当前印章的相关信息，例如：验章结果，印章标识、厂商标识、印章类型、签章人姓名、印章名称、签章时间、证书信息、制章人、制章日期、签名方法、软件版本号等。 |\n| 统一电子印章认证管理平台 | 文件批注 | PDF控件文档批注接口服务 | 接口 | 已发布 | PDF批注通过iWebPDFEditor在线控件打开PDF文档，通过接口或按钮在文档指定位置加入批注的功能，批注可以分为常规的附注、高亮、删除线、下划线等，还支持直线、椭圆、矩形、多边形、云线等非常规注释。 |\n| 统一电子印章认证管理平台 | 文件批注 | OFD控件文档批注接口服务 | 接口 | 已发布 | OFD批注通过iWebOFDEditor在线控件打开PDF文档，通过接口或按钮在文档指定位置加入批注的功能，批注可以分为常规的附注、高亮、删除线、下划线等，还支持直线、椭圆、矩形、多边形、云线等非常规注释。 |\n| 统一电子印章认证管理平台 | 文件差异对比 | PDF控件文档对比接口服务 | 接口 | 已发布 | 图纸修改人员进行相关图纸后，审图人员通过PDF文件对比技术则是通过将前后两个文件在同一软件窗口中进行不通点展示。清晰明了的展示出两文件的不同之处 |\n| 统一电子印章认证管理平台 | 文件差异对比 | CAD控件对比功能 | 工具 | 已发布 | 图纸修改人员进行相关图纸后，校审人员往往需要对修改部分进行审查，CAD文件对比技术则是通过将前后两个文件在同一软件窗口中进行不通点展示。清晰明了的展示出两文件的不同之处。 |\n| 统一电子印章认证管理平台 | CAD签章 | CAD控件签章功能 | 工具 | 已发布 | 采用电子签名技术，结合数字证书技术、网络加密技术而设计的数据安全产品，采用插件技术与AUTOCAD产品无缝连接，用户在正常编辑文档的方式下就可以在AUTOCAD图档（DWG格式）内部实现电子签名 |\n| 统一电子印章认证管理平台 | CAD签章 | CAD控件批量签章功能 | 工具 | 已发布 | CAD一键签章技术则是解决设计院的设计人员在CAD图纸中实现多图框批量自动签章 |\n| 统一电子印章认证管理平台 | CAD文件转换 | CAD转换功能（PDF/OFD） | 工具 | 已发布 | 设计图纸电子版成果基本都是基于AutoCAD平台生产的DWG格式。用于外部交互、做为法律凭证、长期保管的文档格式可以使用PDF/OFD。支持将单个多层DWG批量转换成多个PDF/OFD文件 |\n| 统一支付 | 生成订单 | 无 | 接口 | 已发布 | 按业务数据生成订单信息，支持非税和有税支付，非税支付需提供缴费事项和子事项明细，生成订单后返回订单编号 |\n| 统一支付 | 发起支付 | 无 | 接口 | 已发布 | 通过订单编号，和请求应用的类型，返回支付页面或支付参数，调起用户支付 |\n| 统一支付 | 订单查询 | 无 | 接口 | 已发布 | 通过订单编号，查询订单当前状态，用于确认缴费状态和缴费金额 |\n| 统一支付 | 订单退款 | 无 | 接口 | 已发布 | 前端业务判断是否可以退款，若允许退款，请求此接口可发起退款，非税缴费不能发起退款 |\n| 统一支付 | 支付订单通知 | 无 | 接口 | 已发布 | 订单支付成功后，异步通知前端业务系统进行后续业务处理，若通知失败，将在4小时内就行8次重试通知 |\n| 统一支付 | 退款订单通知 | 无 | 接口 | 已发布 | 发起退款后，异步通知前端业务系统退款退款状态，若通知失败，将在4小时内就行8次重试通知 |\n| 统一支付 | 下载对账单 | 无 | 接口 | 已发布 | 每天凌晨与支付通道完成对账后，前端业务系统可以访问此接口，获取前一天业务系统的交易对账单 |\n\n#### 中枢能力调用实施\n长沙市机关事务管理局智慧后勤服务管理平台主要调用“长沙市城市大脑”应用中台发布的相关能力。“长沙市城市大脑”应用中台作为基础性的⽀撑平台，主要定位为各类信息化应⽤提供功能完整、性能优良、可靠性⾼的业务、技术公共组件，满⾜应⽤系统建设中的共性⽀撑需求。应⽤中台建设主要内容包括应⽤服务平台、应⽤运营平台、业务⽀撑平台、技术⽀撑平台、应⽤接⼊平台以及中台与外部系统的对接。\n- 在相关建设实施过程中，在设计阶段，即根据长沙市中枢能力清单明确智慧后勤服务管理平台需要调用的共性业务或服务组件，形成《项目中枢共性能力调用申请》。\n- 根据设计情况，通过共性能力服务调用申请流程进行申请，包括测试环境的申请、应用环境能力的申请；并通过沟通，明确相关业务或服务组件的具体调用方式。\n- 在项目软件系统开发过程中完成调用调试和测试；\n- 完成软件系统上线部署的调试与测试。\n### 系统嵌入实施\n根据《长沙市信息化建设项目管理办法》的相关要求，长沙市机关事务管理局智慧机关后勤管理平台不在另行开发移动端应用平台，长沙市机关事务管理局智慧机关后勤管理平台相关应用嵌入到“我的长沙”以及“长政通”中。\n系统嵌入集成融合分为两个部分，一个部分为微信小程序的嵌入集成融合，另一部分为移动应用APP的嵌入集成融合。\n#### 嵌入“我的长沙”微信小程序\n微信小程序架构如下：\n\n图 微信小程序架构\n在项目实施过程中，在项目系统设计完成后，我方将按照微信小程序的正常开发流程进行开发、测试，测试完成后，申请“我的长沙”测试环境进行嵌入测试。完成测试后按照“我的长沙”微信小程序上线申请流程完成“智慧后勤”部分的上线流程申请。项目整体测试完成后，智慧后勤管理系统正式上线后，完成“智慧后勤”微信小程序板块的上线。\n微信小程序是面向社会开放，在权限以及用户方面不需要做过多的设置。\n#### 嵌入“长政通”APP\n##### 概述\n长政通是长沙市统一建设的协同办公平台移动端应用，当前注册用户已经突破10万，长政通APP推动全市移动办公更便捷、高效，同时也进一步提升了长沙市各级政府部门行政效率。\n“长政通”是长沙市数据资源管理局为全市公职人员量身打造的集协同办公、即时通讯、视频会议等功能为一体的移动办公平台，以“打造全市移动政务办公的总枢纽和移动客户端的唯一入口”为基本定位，由腾讯云提供技术支持。\n自2022年1月起，“长政通”已在全市政务单位全面推广，目前注册用户已超10万人，覆盖全市党委、人大、政府、政协等171家市级单位，16家园区管委会，9个区县（市）政府，并延伸至172个街道和1667个社区，接入移动政务应用20多个，充分满足了政府和事业单位内部办公、办事、办会等大量协同业务需求。\n\n图 长政通APP界面效果图\n本次长沙市机关事务管理局智慧后勤管理平台移动端应用将作为长征通“常用应用”中的一个子应用，同时，相关待办工作、通讯录、个人信息、消息机制等均用长政通现有的服务提供，智慧后勤管理平台提供数据支撑。\n##### 应用风格\n长沙市机关事务管理局智慧后勤管理平台移动端应用在UI风格上采用与长征通一致的风格，尽量确保“长政通”风格的一致性。\n##### 认证机制\n在用户信息管理方面，“智慧后勤”移动端应用不在规划独立的认证机制，统一沿用长政通的用户管理和认证机制，即与长政通统一用户、统一认证、统一授权、统一审计。\n用户方面，“智慧后勤”与长政通面向相同的用户群体，在用户管理上使用长政通现有的用户管理机制即可，不再另行建设用户库。\n身份认证方面，“智慧后勤”仍沿用长政通的身份认证机制，同时在应用授权、用户访问审计方面均采用长政通现有的认证、授权和审计机制。\n##### 共性能力\n除认证机制外，例如：消息机制、待办工作、工作台等界面，均通过“智慧后勤”服务平台提供相应的数据接口，由“长政通”进行统一调用。\n##### 业务数据\n“智慧后勤”移动端应用相关的业务数据存储在智慧后勤管理平台部署在政务云上的数据库中，该部分并不与长征通共用，当长征通对相关数据有需要时，根据具体需求，由“智慧后勤”平台提供相应的接口。\n##### 嵌入实施\n项目在设计阶段开始就必须考虑移动端应用需要嵌入“长政通”，在项目设计前，需要对“长政通”APP进行了解，并与开发厂商进行技术沟通，统一风格、明确具体的嵌入方式、确定相关的数据接口和接口提供方、接口规范和标准等。\n同时，双方必须约定好开发过程的联调方式、上线申请流程、上线发布流程等具体事物，确保整个移动端应用实施的顺利性。\n### 系统对接实施\n#### 对接系统清单\n长沙市机关事务管理局智慧后勤服务管理平台项目需要完成与多个已建系统的对接：\n需要对接的系统有：\n- 市物联网平台；\n- 人脸门禁系统；\n- 停车道闸系统；\n- 视频监控系统；\n- 长沙银行一卡通系统；\n- 办公用房系统；\n- 公务用车系统；\n- 智慧消防主机系统；\n- 巡更系统；\n- 垃圾分类称重系统；\n- 人防工程停车道闸系统；\n- 交警六合一平台；\n- “我的长沙”城市移动综合服务平台；\n- “长政通”app；\n- 长沙市超脑服务平台。\n与外部系统的关系主要体现在以下几方面：\n- 与市物联网平台的对接，实现传感器采集数据的共享；\n- 城市超脑对接，通过与长沙市数据大脑三中台的对接，实现重要支撑服务和数据的调用；\n- “长政通”app对接，实现本次建设的移动端功能与“长政通”app功能对接，提供后勤服务功能；\n- “我的长沙”城市移动综合服务平台对接，提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能；\n- 已有系统对接，通过对接已有信息化系统，获取相关数据，供本平台分析应用。\n#### 网络集成改造\n项目系统集成实施主要是指长沙市机关事务管理局智慧后勤服务管理平台与机关事务局管理的已建系统之间的打通与对接。通过系统的对接，实现系统之间数据的交互，通过对此类系统数据的采集和获取，为项目系统数据分析提供基础数据。\n在需要对接的系统中，人脸门禁系统、停车道闸系统、视频监控系统等目前均为独立的局域网，在对接前，需要将各个系统网络改造，将其接入整体网络。\n\n图 改造前道闸系统网络示意图\n目前对接系统中需要进行网络改造的系统包括：\n- 人脸门禁系统\n- 停车道闸系统\n- 视频监控系统；\n- 智慧消防主机系统对接。\n为了保证相关系统的对接，以停车道闸系统为例，售前需要解决网络物理隔离的问题。完成网络集成改造，主要包括以下相关的工作：\n- 在项目实施阶段前期，完成对各个需要进行网络改造系统的现场勘测调研，确认具体的网络链接情况、设备部署情况、所在环境的网络接入情况；\n- 申请各系统的网络接入；\n- 为接入网络的相关设备申请必须的IP地址，明确接入上连设备、端口以及通信策略开放要求；\n- 完成网络接入的综合布线；\n- 协调时间，完成相关系统的网络接入测试，确保相关测试工作不对相关系统的使用人群造成影响；\n- 完成网络改造接入。\n\n图 改造后停车道闸网络示意图\n#### 接口对接\n##### 概述\n长沙市机关事务管理局智慧后勤管理平台与其他已建系统的对接的基本需求是通过达到与各个系统的对接，完成系统之间的数据采集、数据交互，为项目数据分析和IOC数据展示提供数据支撑。\n对接系统网络改造完成后，即可进行智慧后勤系统与其他各已建系统的接口对接工作。\n软件接口是实现一个系统跟另外系统进行信息交互的桥梁，在不同的系统之间，根据系统的关联程度的不同存在紧耦合和松耦合两种：紧耦合要求接口响应反应快，消息不能阻塞；松耦合对响应反应要求比较低。在目前应用中， Socket 、消息队列（Message Queue）、 WebService等都有相应的应用，但是应用中发现各通讯方式有自己固有的特征。\n在接口和系统信息交互的过程中，两种模式使用得很普遍：同步调用和异步调用，同步调用要求接口发出请求消息后必须等待服务端系统的应答消息，接口阻塞直至超时；异步调用则发出请求消息后，接口可以从事其它处理，定时轮询服务端应答消息和消息或事件通知。同步方式简单，但是很容易造成接口阻塞，造成消息积压超时。\n接口设计总体上遵循高内聚、低耦合、精分解的设计原则，尽量减少各系统 间、系统内各模块间的耦合度、降低操作复杂度、保证实现的通用性、提高系统的 重用性和扩展性，具体原则如下：\n##### 接口定义\n接口是指用于完成各系统间和系统内部数据传递的接口。在系统中通常设计成 一个数据库文件或接口转换模块，传出数据的系统通常对数据事先进行必要的加工处理，需要接收数据的系统按照用户的要求（用户事先定义的数据模式），通过接口完成数据传递的任务。\n##### 数据模式\n接口的核心是数据模式，所谓数据模式是指应用系统对要传递的数据应在 数据 的来源、内容、定义、分类、汇总、数据格式、数据去向等方面的处理上做出相应的 规定。一般情况下，数据模式是在软件初始化阶段由用户设定的，投入应用时大量的数据采集完全自动化。同时根据系统的实际需要，用户也可以对数据模式进行修改和维护，甚至重新定义。\n##### 传递数据的形式\n对于传递数据的形式，根据本项目对接软件系统的差异可采用不同的策略：一种是由接收数据的系统釆取主动，按照数据接口定义到对方系统去识别、采集。一种是由要传出数据的系统先对数据进行加工，然后按照数据接口定义将数据传递过去。如果是系统内接口，一般采用的是第一种，系统内外系统间的数据传递一般是第二种。\n##### 接口对接流程\n\n图 系统集成融合实施流程图\n##### 对接流程说明\n长沙市事关事务管理局智慧后勤管理平台项目在集成融合方面需要结合项目硬件系统安装实施以及软件系统的开发进行综合考虑。项目集成融合流程如下：\n- 各对接系统的信息收集；\n- 协调项目相关干系人，完成与对接系统各监管单位、用户以及承建单位的初步对接；\n- 完成需要对接系统的现场勘测调研工作；\n- 完成对接系统的对接需求调研；\n- 在设计规划阶段，完成各个系统的对接设计，明确与各个厂商的对接方式，预计项目对接需求，编写项目系统接口设计文档，同时对接系统各方就对接方案达成共识；\n- 根据接口设计方案完成项目系统接口对接；\n- 完成各个系统接口对接的调试；\n- 完成系统的整体测试，确保各集成融合情况；\n- 系统上线。\n### 视频融合实施\n长沙市事关事务管理局智慧后勤管理平台项目包括AI视频智能监控、智慧交通两个部分的视频监控系统建设内容。根据项目建设要求，相关监控视频需要集成融合接入长沙市事关事务管理局统一视频监控平台（安防系统）中。\n#### AI视频智能监控\n本次AI视频监控主要包括高空全景感知单元、动火离人专用感知单元等智能摄像机，以及智能警戒摄像机、客流统计智能单元及交换机、显示器和解码器等设备。\n本系统包括28个摄像头的安装和实施，各摄像头统一接入AI分析器，通过AI分析器以及其相关的算法为各摄像头赋能。帮助监管方减少监管工作量、提高监管效率，实现全天候全时间段无死角监管。\n\n图 AI智能监控系统示意图\n#### 智慧交通\n智慧交通系统是通过视频技术的应用，对市政府大院内道路车辆行驶和停泊状态进行全面感知和监控，为机关大院周边及内部道路车辆管理提供准确实时的数据支撑。可以有效降低人工管理成本和提高管理效率。\n根据项目建设要求，智能交通系统需要支持与交警六合一平台对接，将本次建的感知前端和数据共享给交警部门，为交警部门对该区域的交通管理提供有效的数据支持。同时，本次建设的相关摄像头要求可全部接入机关事务管理局正在筹建的安防系统中。\n\n图 智能监控系统示意图\n#### 视频数据融合示意图\n\n图 视频数据融合网络示意图\n\n#### 视频数据融合\n视频监控系统均遵循公安部发布的国家标准《安全防范视频监控联网系统信息传输、交换、控制技术要求》GBT28181-2016，该标准解决了视频监控系统图像信息的联网整合、资源共享问题，为视频监控图像信息的联网共享奠定了技术基础，有效推动视频监控图像信息跨区域、跨部门的综合应用，因此在原各视频监控系统遵循GBT28181-2016的基础上，进行集成管控技术上没有问题；其他停车闸系统、一卡通系统等可以通过插件、标准API、SDK等不同形式应用接口进行系统对接，同时在本系统中进行数据清洗、数据交换、数据编目、数据分析、业务信息融合等数据服务，进行系统集成管控。\n关于视频数据的融合包括两种方式：一种方式是通过平台与平台的对接完成视频数据在安防系统的融合，另一种方式是将本项目建设的摄像头直接接入安防系统平台。\n在本次项目建设内容中，AI视频智能监控系统与智能交通系统均有独立建设的视频接入平台，通过两个平台接口的开放，实现与安防系统的对接。其二，我方将根据安防系统项目设备接入要求提供摄像头点位信息、IP地址信息、摄像头名称、摄像头型号等信息。安防系统通过其视频接入平台完成摄像头的接入。\n实施过程中可根据安防系统具体的建设情况明确接入方式，实现视频数据的融合集成。\n# \n# 项目测试方案\n## 项目概述\n长沙市机关事务管理局智慧后勤服务管理平台项目建设内容包括项目基础设施建设、智慧后勤服务管理平台建设、内外部系统对接与集成三个主要方面。\n项目基础设施建设方面，长沙市机关事务管理局智慧后勤服务管理平台项目基础设施建设内容包括：基础网络系统建设、智慧安全用电系统建设、智慧物联网络建设、AI视频监控系统建设、智能交通系统建设。通过基础设施建设，一方面对现有的硬件系统提供可接入网络，另一方面也为项目提供信息和数据采集的终端，并同时通过AI视频监控系统与智能交通系统的建设为后勤管理提供更智能和直观的管理手段。\n智慧后勤服务管理平台的建设主要包括智慧后勤基础平台、智慧后勤应用平台、智慧后勤“一张图”、智慧后勤移动端应用相关内容的建设。\n智慧后勤基础平台是为项目应用部署提供基础运行环境，包括：操作系统的建设、数据库系统、中间件服务和应用基础服务或组件等。基础平台提供集约化、融合多种应用支撑服务，为整个项目提供数据初始化、统一入口、工作台、通用审批管理、物联网管理、数据资源建设、安全服务支撑等基础的服务。\n智慧后勤应用平台是为机关事务管理局各业务管理部门，提供业务后台管理的综合平台。从为机关事务局内部提供考勤管理、公文管理、用印管理、文印管理等应用，到对外的集体户口申办、应诉管理、接待管理、会务管理以及办公用房建设计划的审核、汇总和报批等功能，智慧后勤应用平台将提升机关事务局对外的服务体验及管理水平，实现业务的增效和智能化。\n智慧后勤 “一张图”，实现“所有资源一张图管理、所有设备一张图控制、所有事件一张图显示”，对数据进行直观、高效的可视化呈现，让机关大院的业务和数据变得可知可感，让决策有据可依。并帮助管理者实时了解机关大院整体的资产运行状况、车辆情况、安防情况、能效情况、服务情况等，推动机关后勤服务的管理精细化和服务专业化。\n智慧后勤移动端应用是为满足机关事务管理局在移动端的应用场景而单独开发的，它基于现有“长政通”APP和“我的长沙”城市移动综合服务平台开发，将开发完的移动应用嵌入到“长政通”App和我的长沙。其中嵌入到“长政通”APP的功能是提供给所有市直机关职工和干部的统一服务平台，实现机关后勤服务从被动到主动服务的转变，实现餐饮、物业、会务、通知公告、办公、生活等一站式服务的工具和入口，实现个人信息等基础功能、后勤主页、设施设备管理、培训管理、电子巡更、报事报修、通知公告、房屋维修项目管理等应用。\n嵌入“我的长沙”城市移动综合服务平台功能主要是提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能，提升市机关事务局的社会服务性。\n内外部系统对接集成的建设内容包括将长沙市机关事务管理局目前已经建成的多个信息系统组网打通，实现信息的互联互通和数据共享。\n现有需要对接的系统有：智慧后勤服务管理平台与长沙市超脑服务平台、市物联网平台、人脸门禁系统、停车道闸系统、视频监控系统、长沙银行一卡通系统、办公用房系统、公务用车系统、智慧消防主机系统、巡更系统、垃圾分类称重系统、人防工程停车道闸系统、“我的长沙”城市移动综合服务平台、“长政通”app对接，以及智能交通系统与交警六合一平台对接。\n## 测试范围\n长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容。包括新建的基础网络环境、物联网络、智慧用电终端、物联终端、智能交通系统、AI智慧视频监控系统、智慧后勤管理平台以及其移动端应用。\n## 测试目标\n项目测试的主要目标主要包括以下几个方面：\n网络系统方面，确保本期建设的所有终端以及在人防工程机房所部署的设备能正常、安全的接入长沙市机关事务管理局现有网络，系统相关的各类业务端口开放正常，设备链接通信正常；\n软件系统功能、移动应用端功能完全满足和符合项目招标文件以及客户实际需求，软件系统的性能、应用安全、稳定性都满足项目建设和使用要求；\n智慧后勤管理平台与其对接的各个系统的对接工作已经完成，且相关的数据传输流畅，数据获取完整、正确，性能满足相应的使用和数据采集要求；\n长沙市机关事务管理局智慧后勤服务管理平台功能、性能等方面均可满足项目招标文件和建设单位实际需求。\n## 术语定义\n性能测试（performance testing）：运行这些测试通常要确定程序运行有多快，以便确定是否需要优化。\n负载测试(load testing)：通过在面临很多资源要求的系统上运行，攻击被测程序或系统。\n可靠性测试(reliability testing)：持续进行的性能测试，目标是发现短序列程序测试遗漏的情况。\n## 项目测试环境\n因为本项目的部署涉及到政务云、人防工程机房、电子政务外网以及与其他系统的对接测试，完全搭建测试环境的成本较高且不现实，项目测试除在政务云申请测试环境资源外，对接系统尽量协调相应的测试环境。智慧用电终端、物联网终端以及摄像头终端其均以项目实际系统进行测试。\n### 网络系统\n本期项目网络系统的建设是在原有网络系统的基础上进行网络延伸，网络系统的测试不会对项目建设环境中的现有网络造成影响。\n\n图 项目测试环境网络架构图\n### 主机系统\n本期智慧后勤管理系统部署在政务云外部数据区，在项目开发过程中，可在政务云申请相应的服务器资源作为测试环境。\n## 测试手段\n在项目测试工作开始前，项目测试组制定《测试计划》，本项目基本采用黑盒测试的方式进行软件系统测试，测试过程同时填写《测试记录表》。\n## 测试数据\n项目系统测试的主要依据是《项目需求分析说明书》，测试用例以及项目测试数据均以《项目需求分析说明为基础》、参考《项目概要设计说明书》、《项目详细设计说明书》来制定。\n## 测试策略\n长沙市机关事务管理局智慧后勤服务管理平台项目的测试过程分三个步骤进行，即单元测试、集成测试、整体测试。\n### 单元测试\n在软件系统启动开发时，我方即为项目开发人员配备项目测试组，主要通过测试管理工具进行测试管理。该测试过程，测试组人员伴随项目开发组进行项目单元测试。\n首先按照系统、子系统和模块进行划分，但最终的单元必须是功能模块，或面向对象过程中的若干个类。单元测试是对功能模块进行正确检验的测试工作，也是后续测试的基础。目的是在于发现各模块内部可能存在的各种差错，因此需要从程序的内部结构出发设计测试用例，着重考虑以下五个方面：\n1）模块接口：对所测模块的数据流进行测试。\n2）局部数据结构：检查不正确或不一致的数据类型说明、使用尚未附值或尚未初始化的变量、错误的初始值或缺省值。\n3）路径：虽然不可能做到穷举测试，但要设计测试用例查找由于不正确的计算（包括算法错、表达式符号表示不正确、运算精度不够等）、不正确的比较或不正常的控制流（包括不同数据类型量的相互比较、不适当地修改了循环变量、错误的或不可能的循环终止条件等）而导致的错误。\n4）错误处理：检查模块有没有对预见错误的条件设计比较完善的错误处理功能，保证其逻辑上的正确性。\n5）边界：注意设计数据流、控制流中刚好等于、大于或小于确定的比较值的用例。\n### 集成测试\n软件系统开发完成，即可以开始进行项目系统集成，包括与城市大脑、“长政通”、“我的长沙”、交警六合一平台等十多个系统，每一个系统对接开发完成，即需要进行联调，联调完成后，测试应该开始就系统集成情况进行系统集成测试，系统集成测试主要为了保证智慧后勤管理平台与其他系统的对接。\n集成测试也叫组装测试或联合测试。通常，在单元测试的基础上需要将所有的模块按照设计要求组装成系统，这时需要考虑的问题：\n- 在把各个模块连接起来的时候，穿越模块接口的数据是否会丢失。\n- 一个模块的功能是否会对另一个模块的功能产生不利的影响。\n- 各个子功能组合起来，能否达到预期要求的父功能。\n- 各个系统组合起来进行测试，测试各系统的联动和数据传输效果是否达到了项目建设要求。\n- 全局数据结构是否有问题。\n- 单元模块的误差累积起来，是否会放大，从而达到不能接受的程度。\n- 我们在组装时可参考采用一次性组装方式或增殖方式组装方式。\n### 整体测试\n项目整体上线前，为了确保系统在上线后的正常运行，需要对系统进行整体测试，测试以项目建设目标为基础，通过整体测试来确认系统是否按项目建设要求达到了系统的建设目标。\n系统测试目的是在于验证软件的功能和性能及其他特性是否与用户的要求一致，主要是下列类型的测试：\n1）用户界面测试：测试用户界面是否具有导航性、美观性、行业或公司的规范性、是否满足设计中要求的执行功能。\n2）性能测试：测试相应时间、事务处理效率和其他时间敏感的问题。\n3）强度测试：测试资源（内存、硬盘）敏感的问题。\n4）容量测试：测试大量数据对系统的影响。\n5）容错测试：测试软件系统克服软件、硬件故障的能力。\n6）安全性测试：测试软件系统对非法侵入的防范能力。\n7）配置测试：测试在不同网络、服务器、工作站的不同软硬件配置条件下，软件系统的质量。\n8）安装测试：确保软件系统在所有可能情况下的安装效果和一旦安装之后必须保证正确运行的质量。\n## 测试流程\n### 概述\n测试准备阶段是测试人员进行需求说明书分析、制定测试计划、设立测试配置库等活动，能有效的定义测试过程，制定出合理的测试策略和测试的进度安排，明确细化责任和分工，便于交流软件测试小组的意图，为执行测试阶段做准备，以保证整个项目的测试工作能顺利进行。\n相关人员职责见下表：\n| 序号 | 阶段任务 | 参与人员 |\n| :---: | :---: | :---: |\n| 1 | 提供需求说明书; 提供项目计划; 参与测试计划评审; | PM/项目组长 |\n| 2 | 需求说明书分析; 制定测试计划; 测试计划更新; 整理需求说明书检查点; | 测试组长/测试人员 |\n### 需求说明书分析\n    - 提供需求说明书：PM/项目组长向测试组长提供需求说明书。采用开发组向测试组开放配置库共享的方式。\n    - 需求说明书分析：测试组长/测试人员从配置库中得到需求说明书，在需求说明书分析理解过程中，如有不明确或无法理解之处，需提出疑问并整理成文档，并以会议（通过与PM/项目组长沟通确定时间）的方式请求PM/项目组长或者开发小组成员给予解答。\n    - 提供需求说明书检查点：PM/项目组长以邮件方式向测试组长提供需求说明书检查点，并抄送项目总监，测试组长将需求说明书检查点提交到测试区域的需求说明书检查点区并通知测试人员获取需求说明书检查点。\n    - 需求说明书检查点更新：在项目开发过程中，如需更新需求说明书检查点，PM/项目组长及时以邮件方式告知测试组长需求说明书检查点更新部分。\n### 制定测试计划\n    - 提交项目计划：PM/项目组长向测试组长提供项目计划。可采用开发组向测试组开放配置库共享的方式。\n    - 制定项目测试计划：测试组长从配置库中获取项目计划，根据项目计划制定测试计划。测试计划使用Microsoft Office Project 制定，详细拆分各阶段的任务以及任务的开始时间和完成时间以及指定测试人员。\n    - 评审、修改测试计划：PM/项目组长和测试组成员参与测试计划评审，并提出评审意见。测试组长根据项目组评审意见修改测试计划。测试计划存放于测试区域的测试计划区。\n    - 测试计划变更：在开发过程中，如遇到项目计划变更的情况，PM/项目组长应及时以邮件的方式告知测试组长，测试组长及时变更测试计划。\n### 设立测试配置库\n    - 确定配置管理工具：本公司常用配置库管理工具有VSS，SVN，ClearCase等，PM/\n    - 项目组长根据项目实际情况确定该项目所使用的配置管理工具。\n    - 在配置库中建立测试区域：测试组长在PM/项目组长确定的项目配置库中建立测试区域；测试区域包括测试计划、测试检查点、测试版本发布、BUG提交、测试报告等区域，分别用于存放相关测试文档。\n    - 测试组长设置测试区域权限：开发人员（读取权限）；PM/项目组长/测试组长/测试人员：(读写权限)。\n    - 测试人员向配置库提交测试文档：测试人员将所有的测试文档分门别类的提交到各自所属测试区域内。测试人员向配置库提交测试文档时，必须注明本次提交的内容，以便查询。\n| 文件路径 | 文件路径 | 存放内容 | 负责人 |\n| :---: | :---: | :---: | :---: |\n| 测试区域 | /测试计划区 | 《项目测试计划》 | 测试组长 |\n| 测试区域 | /需求规格说明书 | 《需求规格说明书》 | 测试组长 |\n| 测试区域 | /测试版本发布 | 《数据库文件》 《代码》 | 测试组长 |\n| 测试区域 | /BUG提交 | 《BUG记录表》 | 测试组长 |\n| 测试区域 | /测试报告 | 《项目测试报告》 | 测试组长 |\n### 测试环境搭建\n- 明确项目测试环境：PM/项目组长根据项目需求和项目实际情况确定该项目测试所需的必要环境。\n- 搭建项目测试环境：测试组长/测试人员根据PM/项目组长确定的测试环境搭建项目测试环境，包括测试服务器环境和测试机环境。\n### 测试执行\n该阶段为测试执行阶段，主要是测试人员对软件进行测试和验证的阶段，以测试准备阶段的工作成品为入口，开发人员测试人员按照各自的职责分工合作以达到该阶段的结束目标。\n#### 测试周计划管理\n配置库：测试计划区（所有活动在以下区域进行）\n#### 测试周计划内容\n    - 制定测试周计划：测试组长以本周二至下周一为单位制定测试周计划，确定本周应测试式样书，拆分测试任务。测试周计划存放于测试区域的测试计划区。\n    - 维护测试周计划：测试组长根据项目变更维护测试周计划。测试组长修改本周应测试式样书，维护式样书版本，重新拆分测试任务\n    - 查看测试周计划：测试人员从测试区域的测试计划中得到测试周计划，明确自己在本周的测试任务，如有不明确或无法理解之处，需提出疑问\n    - 测试周计划跟踪：测试组长在每天下班前确定本周当天测试任务完成情况（当天应测试式样书，当天未完成测试式样书，当天已完成测试式样书，是否需要加班），以便于评估本周测试任务是否能够按计划完成。\n#### 测试版本提交内容\n提交项目安装手册：PM/项目组长将安装测试手册提交至测试版本发布区。安装手册包括简述硬件软件环境（服务器端，客户端），项目工程发布步骤提交测试版本：PM/项目组长每天下班前统一将项目工程备份文件提交至测试版本发布区。\n获取测试版本发布测试服务器：测试组长从测试区域中的测试版本发布区获取最新项目备份文件以及数据库文件，并发布到测试服务器供测试人员测试。\n#### 测试状态发布\n配置库：BUG提交区。\n提交BUG：测试人员根据式样书检查点对项目进行测试，根据测试结果修改式样书检查点状态栏。式样书检查点状态为：通过不通过并截图。测试完成后将已执行测试的需求规格说明书检查点文档提交到测试区域中的BUG提交区。并告知对应的开发人员修改BUG以及要求开发人员邮件回馈BUG的原因和修改完成时间。\n- 修改BUG：开发人员从BUG提交区获取已测试完成的项目用例，根据检查点状态修改BUG后，指明BUG出现的原因，修改BUG状态栏。BUG状态栏为1 Fixed 2 Deferred 3 Closed 4 Reopen 5 Revalidated 6 Rejected。并邮件告知测试组长该本样式书已修正。\n- 回归验证：测试人员从BUG提交区获取已修正状态的式样书检查点进行回归验证直到该BUG关闭，此时修改式样书检查点状态为通过。\n- 协调开发与测试的沟通交流：测试组长每天跟踪测试执行情况和开发人员BUG修复情况以便能进行有效的沟通。每周收集测试人员测试过程中间的意见以及问题整理归纳并与PM/项目组长确认\n#### 测试报告\n整理测试数据：测试人员于测试结束后将测试数据提交测试组长。测试数据包括：应完成测试case数量，已完成测试case测试量，未完成测试用例（需求功能点）数量，完成度，BUG数量。\n测试报告：测试组长根据测试组成员提交的测试数据形成报告提交到测试总结区，并告知PM/项目组长。\n测试报告的目的：\n1、及时反应项目测试情况；\n2、开发人员及时了解项目开发质量，调整开发计划；\n3、测试人员不断改进测试方法以及测试效率，提高测试质量。\n\n# 项目管理方案\n## 项目整合管理\n项目整合管理包括为识别、定义、组合、统一与协调项目管理过程组的各过程及项目管理活动而进行的各种过程和活动。在项目管理中，“整合”兼具统一、合并、连接和一体化的性质，对完成项目、成功管理干系人期望和满足项目要求，都至关重要。\n项目整合管理就是为满足各方需求而进行协调以达到预期目的的过程。它是一项综合性、全局性的工作，主要内容是在相互冲突的目标或可选择的目标中权衡得失。虽然所有的项目管理过程在某种程度上都可看成是一个整体，但在整合管理中的这些过程是最基本的管理知识。整合管理主要包括：制定项目计划、实施项目计划、项目变更控制这三个过程。这些过程彼此相互影响，同时与其它领域中的过程也互相影响。\n在本项目实施过程中，通过对项目各个阶段的边界进行管理，保证项目各个阶段的协调推进。在项目整合管理过程中，主要包括以下几个方面：\n- 制定项目计划：制定项目计划是指制定项目管理计划，即对项目实施过程中所有阶段以及过程进行初步的规划；\n- 项目执行：制定阶段的项目计划，并按照相应的计划完成项目各阶段的工作，推进项目往前进展；\n- 监控项目：项目组将按照项目计划，跟踪、审查和调整项目进展，以实现项目管理计划中确定的绩效目标；\n- 变更控制：在该项目中，我们将建立项目变更管理机制，通过规范的变更流程，对项目的实施过程中产生的变更进行控制，保证项目不会因为变更而失控；\n- 项目收尾：制定项目验收标准，使得项目有明确的验收目标，并最终能在项目工作全部完成后，形成验收的依据，最终完成整个项目。\n## 项目范围管理\n在项目实施的过程中，我们考虑到项目的主要成本需要投入到项目想要做的事情上，项目范围管理能保证项目在实施过程“做对的事”。\n项目范围管理是指对项目包括什么与不包括什么进行定义并控制的过程。这个过程用于确保项目组和项目干系人对做为项目结果的项目产品以及生产这些产品所用到的过程有一个共同的理解。\n在项目范围管理方面，项目前期我们通过编制项目范围说明书、用户需求说明书来实现初步的范围控制。在项目交付过程中，通过项目现场勘测、需求调研分析、需求评审以及系统深化设计以及评审来明确项目包括哪些事情。\n在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n- 项目实施过程中，严格按照用户需求进行项目方案的制定，以此方案进行项目实施；同时为了进行范围控制，建立规范的项目变更管理机制，通过对变更的控制，保证项目在正确的范围内进行。\n- 项目收尾阶段，我们通过项目范围核实来对项目进行范围的确认，项目范围核实的依据可能包括项目建设方所提供的项目招标要求、合同、需求说明书以及相关的变更说明等。\n## 项目进度管理\n进度是项目管理过程中最重要的因素之一，我方在项目进度管理上首先将以用户在项目整体规划时所确立的项目实施周期为标准，在此基础上结合项目的实际情况，制定合理项目计划，对项目整体时间进行规划。并对项目各个阶段制定更为详细的项目阶段计划。计划的建立，首先保证了项目在进度上监控的可能。同时通过项目进度计划的制定，一定程度上规避了项目在进度上的风险，或者说为进度风险的识别建立了基础。\n在项目实施过程中，通过对项目计划的监督来保证项目的进度监控，当项目进度发生偏移时，我们将通过增加资源，或增大其他方面的投入来保证项目按时保质的进行。\n同时也将根据项目的实际情况或者用户项目建设方面的变更或者因为其他风险的影响对项目计划进行调整，保证项目计划可行、可监控。\n### 概述\n在项目执行和管理的过程当中，因为不确定性以及渐进明细是项目的主要特性之一，长沙市机关事务管理局智慧后勤服务管理平台建设项目是一个综合型多系统相对负责的综合型系统集成项目，包括网络系统的建设、云平台的应用、新旧网络的融合、视频监控系统建设、智能交通建设、智慧后勤系统建设以及移动应用的建设等等，项目在执行交付过程中需要跨部门、跨单位多系统的协调和集成。项目要求在较短的实施周期内完成交付，从项目管理的角度来分析，项目的风险以及资源投入都将增加，为了保证项目进度以及项目的质量，特制定以下的项目进度保障。\n### 明确项范围\n项目进度计划是项目管理计划的核心内容之一，也是指导整个项目进行的主要计划之一，项目计划的科学制定，是项目能确保进度的主要措施之一。\n项目进度的制定依赖于项目的建设范围，所以，在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n### WBS\nWBS是项目进度计划制定的基础，WBS：工作分解结构是指将项目的交付成果以及完成相应成果所需要的工作进行分解，分解到40小时左右的工作包。WBS的分解遵循相应的规则：\n- 100%包含：分支上下100%包含；\n- 不可再分：最底层状态相对独立不可再分；\n- 信息透明：分解到可以充分估算完成该成果所需的时间、费用、资源等；\n- 独立责任：分解到可安排一个责任者；\n- 滚动规划：远期工作可暂时不分解。\n项目工作分解结构应包含项目所有必须交付的成果以及完成相关交付内容所需要做的工作。即WBS应能体现本项目所有的交付物与相应的工作。\n同时WBS也是整个项目管理过程的核心，项目经理通过WBS完成项目进度计划的制定，也需要通过WBS进行项目风险分析。项目的人力资源计划、项目人力成本估算均可以通过项目WBS来完成。\n### 制定计划\n在WBS的基础上，结合长沙市机关事务管理局智慧后勤服务管理平台建设项目的实际要求，通过排列活动顺序、估算活动持续时间、估算活动资源等动作完成项目进度计划的制定。\n在长沙市机关事务管理局智慧后勤服务管理平台建设项目中，根据项目实际情况采取倒推的方式进行进度计划的制定，在项目活动持续时间估算的过程中，先设定具体的交付和验收要求时间点，再逐步反推到项目各个阶段，相对合理的进行各个阶段时间的分配，再在各个阶段内进行各个活动时间的分配，最终根据各活动的紧前关系来评估计划的可行性和具体的资源需求以及资源冲突的可能性。\n### 控制进度\n在项目执行交付的过程中，本项目安排项目经理进行项目的全生命周期管理，在项目管理和监控过程中，控制进度是监控事项中的重点内容之一，控制进度的目标就是确保项目进度与项目计划之间的偏差尽量小。\n为了确保项目进度计划，项目经理乃至项目组需要进行包括但不限于下列事项的：\n- 项目执行过程中，尽量确保项目资源按照项目资源计划提供给项目；\n- 明确项目采购计划，确保项目各个阶段的到货是按采购计划执行的；\n- 提前进行项目风险识别和评估，并制定风险应对措施，通过科学的风险应对确保项目进度；\n- 阶段性的进行项目进度检查，通过偏差分析，明确项目状态，并通过增加资源或成本的方式来确保进度计划，例如通过短期的赶工来确保项目进度；\n- 当项目进度确实出现较大偏差并无法纠正时，应及时的组织项目会议对项目进度计划进行调整，确保后续阶段的项目可控。\n## 项目成本管理\n在项目成本管理方面，我方通过对项目范围内所有工作进行整理分析，通过对项目需求进行详细的调研和分析后，进行成本预算的制作。\n为使项目成本控制在计划目标之内，我们将对项目计划、控制、调整、核算、分析和考核等管理工作进行严格的把空。确保在批准的预算内完成项目。\n具体包括制定成本管理计划、成本估算、成本预算、成本控制四个过程来完成。项目成本管理贯穿整个项目的实施过程中。\n\n图 项目成本管理流程图\n除此之外，在本项目的实施过程中，除通过对计划的监督来控制成本外，在方案制定阶段，尽量通过利旧、对采购设备的选型以满足用户需求为基准，保证用户投入最小能获得最大的项目成功。\n加强事先控制的措施。一是要加强制度建设。二是对项目成本费用的进行预测与计划。项目开工前必须作科学的分析论证,预测出完整项目所需要的总成本额,以此作为进行计划成本控制与目标考核的依据。对每一个项目的开展,都应当有精心的预测,以免造成不应有的失误。项目部人员应做好项目开工前的准备工作,选定先进的施工方案,选好合理的材料供应商,制定好该项目的成本计划,做到心中有数。在建设中严格审批,从而达到控制支出的目的。三是控制主要材料成本支出。一方面，在数量上,首先把住材料进场关,防止备料过程中材料数量亏吨现象。其次还要避免在项目开展过程中材料数量的损失浪费现象和料场保管过程中的流失现象,如果控制好材料运行中这“三个环节”完全可以保证材料数量避免亏吨现象。另一方面，在价格上,防止价格偏高现象。首先要了解市场价格以及产地、质量、厂家实力信誉情况,做到货比多家,以最低的价格选购同样数量的材料,既保证质量又达到成本价最低。\n加强事中控制(过程控制)的措施。应做到：一是加强信息化管理,提高统计分析的管理水平。要积极创造条件、优化施工方案、改进施工工艺、严格落实质量责任、克服质量通病,用杜绝质量事故、不停工、不返工来有效节约成本。安全是获取效益的保证。首先安全是项目管理中最重要的任务。项目安全管理必须要及时进行危害辨识,确定项目中安全管理重点部位,加大安全设施投入,落实管理责任和保证措施,同时项目安全主管经理和安全员要深入施工现场,确保万无一失。三是加强检查监督工作。要随时检查制定的规章制度落实和执行情况,与每道工序工艺和技术规范操作情况,控制好管理人员手中的权力,各负其责,检查监督各个环节的落实情况,发现问题及时解决、及时处理,做到信息反馈及时。\n加强事后控制的措施。进行事后分析是下一个循环事前控制科学预测的开始,是成本控制工作的继续。在坚持每个项目都实行综合分析的基础上,及时检查、分析、修正、补充,以达到控制成本和提高效益的目标。这些措施包括：一是进行成本费用分析。成本费用分析要以施工管理强弱、技术管理高低、材料费用节超、人工费用多少、机械使用费用大小、其他直接费支出情况、管理费用增减、预算收入余缺等为切入点。成本费用分析内容、数据必须真实准确,常用因素分析法进行分析对比,找出偏差原因,提出挖潜措施,改进成本管理工作,以提高企业的经济效益。二是开展项目责任成本执行情况考核。必须落实项目责任,做到完工一个、清理一个、考核一个、奖惩一个。\n## 项目质量管理\n本小结涉及内容为在项目管理过程中，我们所采用的质量控制方法及程序。这在指导与监督服务器系统建设有着非常重要的作用，是我们向最终用户提交高满意度成果的保证。\n具体内容包括几个方面：\n- 质量管理规范与标准\n- 项目质量保证策划\n- 质量度量\n- 质量考核\n- 过程监控与阶段评审\n- 系统测试与验收\n- 配置管理\n- 文档管理\n- 独立的项目审计\n### 规范与标准\n项目质量管理与企业质量管理的最大区别是由项目过程的一次性、项目产品的独特性和项目交付物的逐步形成特征决定的。ISO 9001标准主要是针对企业在经营管理中的具有重复性的要素或过程。实施ISO 9001质量管理体系标准的目的是企业通过持续的改进活动，不断发现过程误差、系统误差和纠正过程误差、系统误差，从而持续地改善过程输出的质量。而项目管理中的39个标准过程（PMI）或42个要素（ICB）全部是一次性过程或要素，故项目的质量管理核心是过程输出阶段结果的验证和预防措施的制定和实施。因为项目的有些质量缺陷并没有采取纠正措施的机会，或者质量缺陷的后果是毁灭性的。ISO 9001提供的是企业的质量管理体系模式，其中只有质量计划要素（ISO 9001：1994）或产品实现策划过程（ISO 9001：2000）涉及到项目质量管理。事实上，ISO组织确实制订了一个还没有被广泛认识的项目质量管理标准，既ISO 10006标准。\n### 项目质量规划\n在本项目中必须统一标准，明确定义保证项目质量的责任和方法。结合项目的实际情况，质量保证策划可分为以下几点：\n- 项目经理在项目的进度、问题上进行监督、协调和指导。\n- 项目技术负责人在项目的技术问题、实施进度上进行监督和指导。\n- 项目经理进行项目的总体管理与监控，听取客户的意见，寻求改进的方法，由始至终负责整个项目的实施。\n- 选派具备专业特长的工程师认真准备针对自己领域的工作、培训或实验环境，听取客户对培训内容的建议和意见，圆满解决客户提出的相关问题。\n- 每一个阶段的工作内容结束后，做工作总结和定期的状态报告会，以保证客户和项目负责人能及时跟踪工作的进展。\n### 质量度量\n质量保证是针对项目实施过程的特定度量，目的在于度量项目规模、项目成本、项目进度、客户满意度等。使用度量数据进行估计、监控项目的进度和执行情况、确定项目是否符合质量要求。对项目实施过程中的实施工艺进行量化过程，目的在于对项目实施工艺进行控制和改善。通过质量度量可以改进项目实施工艺，促进项目实施成功。度量方式是通过测试、审核、调查、统计等方式得出量化的指标。通过分析度量数据可及时发现项目实施中存在的问题，从而有针对性的制定解决方案。\n### 质量考核\n在项目实施过程中，对项目中的产品及实施工艺质量进行考核，方可保证项目实施的质量。一个项目的实施涉及到各方的密切合作，任何一方，任何一个阶段的工作都不是孤立的，与项目的其他各部分有着密切的关联，因此在系统实施过程中：\n- 项目实施人员要密切配合，并且要分工明确、责任分明，严格遵守项目各阶段的标准、规范和流程。\n- 项目各部分，各小组的设计文档，实施方案，测试计划和工程进度要充分考虑其他项目小组的工作要求，必要时需要其他小组或部门的人员参与，以确保系统实施顺利。\n- 成立质量小组，协调项目各方的工作，进行资源、人员的调配，保证项目的进展和质量。\n- 质量小组将定期或不定期的举行检查会议，检查系统实施的进度和质量，对存在的问题进行推动。\n### 过程监控与阶段评审\n在项目计划阶段，成立由技术专家与用户组成的项目评审小组，职责如下：\n- 对项目可行性进行评审；\n- 对项目实施计划进行评审；\n- 对每个阶段成果和阶段报告进行评审。\n### 系统测试与验收\n项目实施过程包括多个方面的工作和任务，每一项任务的完成、每一个文档的提交、每一个设备、软件或应用系统的交付，都有相应的完成标志和测试、评估和验收标准。对于系统、网络与应用等重大的工作里程碑事件，测试验收工作更为严谨和充分，计划更为周密。\n按照项目实施程序，整个项目实施过程中要对不同的交付项目进行如下各类测试和验收中的一种或几种。\n- 安装测试\n采用标准的测试程序(如硬件设备开机自检)和操作方法，对交付件进行测试。通常用于对硬件设备和系统软件的验收。\n- 系统集成测试\n对整个系统，包括硬件、系统软件、应用程序、网络等各个方面进行全面测试，验证系统是否达到设计目标的测试过程。\n- 性能测试、压力测试\n性能测试是对系统设计的各种数量化指标进行测试，检验交付系统是否达到设计要求的过程。压力测试的内容包括测试系统在特定工作负载下的性能表现。\n### 配置管理\n配置管理工作贯穿于整个项目实施过程中，配置管理人员的工作内容如下：\n- 制定配置管理计划\n为配合项目管理，在项目实施初期，配置管理人员与项目经理协商，制定配置管理的计划，规划未来的配置管理工作。\n配置管理计划的约束条件：\n- 配置管理的规划必须以项目开展的工作为基础，参考工作说明书；\n- 配置管理计划的编写必须以公司的流程为模版，与工作说明书和质量保证计划相一致；\n- 配置管理计划能够指导未来的配置管理工作，配置管理工作必须以配置管理计划为基准；\n- 配置管理计划必须经过最终的评审通过，才能够成立；\n- 如配置管理计划不能满足未来配置管理工作的需要，可以再增加配置管理工作计划作为配置管理计划的辅助，指导未来的配置管理工作；\n- 规范配置管理环境配置管理计划制定结束后，配置管理人员要依据计划实施配置管理的前期工作；\n- 与项目负责人讨论变更控制的实施与项目负责人讨论项目中变更控制实施的措施，指定出相应的变更控制流程。\n### 文档管理\n文档在技术实施人员、维护人员、用户以及计算机之间的关系是多向的。在项目的各个阶段中以文档作为前阶段工作成果的体现和后阶段工作的依据，这个作用是显而易见的。我们在文档管理中把文档分为三类：\n- 管理文档：项目实施人员需制定一些工作计划或工作报告，这些计划和报告都要提供给管理人员， 并得到必要的支持。管理人员则可通过这些文档了解项目安排、进度、资源使用和成果等。\n- 工程执行文档：这类文档是为了保证项目实施按照规范和正规流程来执行，也是为了保证工程质量。\n- 用户文档：实施人员为使用户了解产品的使用、操作和维护提供详细的资料。\n### 项目审计\n在项目的实施过程中，独立审计的目标是对被审计项目的合法性、完整性及实施方法的一致性表示意见。独立审计人员对于项目实施过程中发现的实施工艺、方案出现的缺陷或漏洞，可通过审计报告提交项目经理，并提出解决问题的建议。\n## 人力资源管理\n### 项目组织架构\n\n表 项目组织架构图\n### 角色定义\n表 项目组角色定义表\n| 角色 | 主要职责 |\n| :---: | :---: |\n| 项目中心 | 参与立项评审； 指派项目经理，为项目分配合适的人力资源，协助项目经理建立项目团队； 监控项目执行过程，及时了解所有项目的人力资源、进度、质量情况，协商处理问题； 在项目结束后，对项目以及项目组成员进行综合评估； 提升人员技能，考核人员绩效。 |\n| 项目经理 | 项目经理是立项之后的项目主要责任人，负责项目全生命周期管理，主要职责是带领团队在预定的时间和成本之内，交付质量合格的项目/产品。项目经理对本项目的进度、质量、成本负主要责任。 负责本项目的全面管理（包括整体、范围、时间、成本、质量、人力资源、沟通、风险、采购、干系人）； 确保项目能在既定的时间、成本范围内交付满足项目要求质量的成果或者产品； 在项目结束时，总结项目知识和经验教训，完善文档； 对项目成员的业绩进行评估。 |\n| 决策支持组 | 由部门经理、项目经理、专家等人员组成；主要职责是参与项目重大决策以及评审。 |\n| 质量管理组 | 质量管理组主要对项目质量情况进行监督 监督项目的质量规划情况； 对项目过程质量进行监控； 核实项目整体交付质量。 |\n| 商务组 | 负责产品（或合同项目）的销售，签订商务合同、跟踪合同执行过程。 负责项目客户关系维护； 商务沟通。 |\n| 售前组 | 1、负责项目售前阶段的技术沟通； 2、以客户的需求为基础，在沟通的过程中根据公司产品情况以及公司的战略给客户推荐完整的解决方案； 3、完成项目售前阶段的其他工作，包括项目招投标过程等； 4、往售后完成项目知识转移； |\n| 技术组 | 负责项目技术工作： 组织项目技术方案、技术标准的编制和审核； 参与相关的技术评审会议，在技术方面对项目实施过程进行指导和检查； 负责项目技术问题的处理，对专项施工、重要工序、重大问题进行处理； 进行项目总结，完成知识积累和转移。 |\n| 实施组 | 按照项目实施流程规范完成项目整体实施工作： 实施前的施工现场勘测、调研和确认工作； 完成项目现场的实施工作； 完成相关提交物的编制工作； 配合完成项目分保测评工作。 |\n| 培训组 | 负责项目的培训工作，包括但不限于： 制定项目培训方案； 完成项目培训工作，完成培训环境搭建、项目培训课程编制； 完成项目培训工作； |\n| 测试组 | 负责项目的测试工作，包括但不限于： 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |\n| 维护组 | 负责项目维护工作，包括但不限于： 项目维护方案编制； 项目现场维护工作，相关问题处理； 项目维护报告、问题处理报告编制。 |\n\n### 人力资源管理计划\n在项目管理过程中，人力资源管理计划非常重要，项目交付过程的各个环节都涉及到项目组成员的参与。项目组成员的能力要求、何时进入项目、何时释放资源都关系到项目是否以较低的成本高效、高质量完成项目交付的关键。\n在项目规划阶段，项目经理组织项目组成员对项目工作和交付内容进行工作分解，形成WBS，根据WBS的分解原则，每个工作包基本上都能分配给一个资源去完成相应的工作。\n在进行资源匹配的过程中，项目经理完成项目活动排序后即需要进行每项活动对项目资源的需求评估。同时，也需要评估相应资源匹配情况下活动需要的持续时间。在做资源分配时，一方面，需要考虑资源在项目交付过程的延续性，避免资源的浪费。另一方面，也需要考虑资源在项目执行过程中因过度分配而造成的资源冲突。\n### 资源的释放\n人力资源计划不仅是项目经理对人力资源的需求，同样也是约定在具体的时间完成资源的释放，节省人力成本。\n项目任务多是并行安排，串行推进，随着项目的进展，项目对人力资源的需求也会发生变化，项目经理应该根据项目对人力资源的变化调整对资源的申请，当资源在项目中的工作结束时，项目经理应尽快释放资源。\n### 项目的延期\n当项目某项或某几项工作出现延期时，如果按照人力资源计划释放资源则会导致项目工作无法完成，此时项目经理会根据项目延期情况制定相应的纠偏措施。\n通过赶工的方式来完成延期的工作，确保项目能恢复到预期的进度，此时，项目经理需要制定临时性的人力资源计划，在短时间内容协调更多的资源投入到项目中，并延时每天或每周的工作时间确保项目进度；\n项目经理发现偏差无法通过赶工等相应的措施纠偏时，项目经理会根据项目当前的实际情况调整项目进度计划，以确保计划与项目实际情况吻合。此时项目经理需要重新调整项目的人力资源计划，相关的项目资源也需要根据人力资源的调整来调整进出项目的时间。\n## 项目沟通管理\n### 沟通管理概述\n项目是一项需要多方的协调才可能成功的完成的临时性工作。沟通是项目管理过程中最重要的工作之一，也是确保项目各团队、各成员能协作推进项目的基础手段。项目沟通机制的建立是项目交付执行过程的重点工作之一。\n沟通管理是为了确保项目信息及时适当的产生、收集、传播、保存和最终配置所必须的过程。项目沟通管理是一系列过程的集合，这些过程有助于确保正确的人员发送、接收和理解正确的信息。项目沟通管理流程如下：\n- 规划沟通计划；\n- 管理沟通；\n- 监控沟通。\n本项目的实施过程中，为了保证项目的顺利进行，首先项目将建立稳定的项目组织，建立健全、多元的沟通机制，以便在项目实施过程中，各方都能顺畅的对项目中出现的任何状况进行沟通。项目经理需要清楚地概述将如何管理项目之间的沟通。这可以通过创建项目沟通管理计划来实现。\n### 干系人识别\n项目干系人的识别是明确项目沟通机制的基础，人作为沟通的主体，正确的识别项目干系人，明确干系人在项目当中的职责、对项目产生哪些影响，同时明确干系人以何种方式参与项目，且将产生哪些信息，并能以何种方式获取项目的信息。\n项目经理在完成干系人识别后，应建立干系人清单，项目经理在干系人清单中应对干洗人的基本信息进行描述和说明。\n### 沟通方式与途径\n项目管理过程中的沟通方式包括很多中，包括正式和非正式的沟通，项目经理应根据不同的项目事项采用不通的沟通方式，项目管理过程中的沟通包括：\n- 面谈、微信等及时远程沟通软件以及其他非正式沟通方式；\n- 远程沟通、语音或电话会议；\n- 项目例会；\n- 专题会议；\n- 评审会议；\n- 书面沟通。\n沟通的主要目标是通过沟通来达到各个沟通成员之间对某项事务达成一致或达成共同的认知，以便完成决策。项目经理应根据项目沟通管理计划采购不同的沟通方式来完成项目沟通。\n表 会议纪要\n| 会议名称： | 会议名称： |   |   |   |   |   |   |\n| ---: | ---: | --- | --- | --- | --- | --- | --- |\n| 会议时间： | 会议时间： |   |   | 会议地点： |   |   |   |\n| 会议召集人： | 会议召集人： |   |   | 会议主持人： |   |   |   |\n| 会议类型： | 会议类型： |   |   | 会议方式： |   |   |   |\n| 会议议题： | 会议议题： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： | 姓名 | 单位 | 单位 | 单位 | 职务 | 职务 |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 |\n|   |   |   |   |   |   |   |   |\n| 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 |\n| 序号 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 |\n| 1 |   |   |   |   |   |   |   |\n| 2 |   |   |   |   |   |   |   |\n| 3 |   |   |   |   |   |   |   |\n| 4 |   |   |   |   |   |   |   |\n| 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 |\n| 序号 | 问题描述 | 问题描述 | 问题描述 | 问题描述 | 问题责任人 | 问题责任人 | 解决时间 |\n|   |   |   |   |   |   |   |   |\n|   |   |   |   |   |   |   |   |\n\n### 沟通管理计划\n项目经理应根据项目的管理要求制定沟通管理计划，项目沟通管理计划包括：\n- 明确沟通的目标，例如：某变更专题会议的沟通目标是完成对项目某项变更内容的评审，以获得项目组包括甲方以及第三方项目参与单位的认可；\n- 明确沟通的干系人；\n- 明确沟通的途径，包括沟通采用的方式；\n- 建立沟通时间表。\n项目沟通管理计划应该足够详细，包括为什么要发送信息、发送给谁、发送哪些具体信息、如何发送以及何时发送。\n### 沟通计划的管理\n项目沟通管理计划被创建并批准后，项目经理的工作就是确保它的成功执行。同时，项目经理需要根据项目情况对管理计划定期审查和更新，以反映对项目的任何更改。项目经理还必须管理项目沟通管理计划的执行。这包括：\n- 数据的收集和分析；\n- 为沟通创建信息；\n- 沟通信息的传输或分配；\n- 储存任何通讯报告、档案或文件；\n- 检索任何存储的沟通；\n- 在项目结束或设定日期后处理任何旧的沟通。\n### 监控项目沟通\n监控项目沟通是指在项目交付管理过程中，项目经理对整个项目生命周期内的项目沟通进行控制和监控，具体包括但不限于以下工作：\n- 相关的项目沟通是否按计划进行；\n- 发布的信息是否被受众所接受；\n- 发布的信息是否被正确的理解，尽量消除项目沟通过程中的噪声；\n- 信息发布的过程是否确保不通的干系人是否收到了其应该收到的信息。\n在项目经理进行项目沟通管理监控是，对于项目沟通中的方式、沟通频率都是监控沟通中的一部分。\n## 项目风险管理\n风险管理是指在项目实施的过程中，通过对项目内外部相关的各个方面进行整体分析，来进行风险的识别，并通过对风险的分析来判断风险的影响，制定可行的风险应对计划，并由项目组成员对相关的进行跟踪和监控，以确保最大程度的减小风险对项目的危害。\n### 风险识别\n风险识别包含两方面内容：\n- 识别哪些风险可能影响项目进展及记录具体风险的各方面特征。风险识别 不是一次性行为，而应有规律的贯穿整个项目中。\n- 风险识别包括识别内在风险及外在风险。内在风险指项目工作组能加以控制和影响的风险，如人事任免和成本估计等。外在风险指超出项目工作组掌控力和影响力之外的风险。\n通过界定项目范围，明确项目范围，将项目范围内的任务细分为更具体更便于管理的部分，能够避免遗漏而产生风险。\n项目进行的过程中，加强对变更的控制，通过对变更的分析来评估变更带来的风险。\n当风险识别以后，我们将对已经识别的风险进行记录，以保证后续能对风险进行持续的跟踪。\n#### 风险识别原则\n风险识别在整个风险管理过程中都占有重要位置，只有正确认识风险，才能正确分析风险，进而才能合理应对和控制风险带来的影响。然而项目风险大多数情况下是潜在的，随着项目生命期的发展，新风险可能随时出现。因此，在项目风险识别过程中，最重要的就是不能遗漏风险因素，特别是对项目整体目标有重大影响的因素。为了更好地进行风险识别，风险识别过程中应遵循如下的主要原则。\n- 由粗及细，由细及粗\n由粗及细是指对风险因素进行全面分析，并通过多种途径对项目风险进行分解，逐渐细化，以获得对项目风险的广泛认识，从而得到项目初始的风险清单。由细及粗是指以项目初始风险清单为基础，从众多风险中，确定那些对建设项目目标实现有较大影响的风险因素，作为主要风险，详细识别其风险来源、风险特征和风险影响等。\n- 多种识别方法的选择与综合运用\n大多数项目可能同时遇到各种不同性质的风险，因此采用单一的识别方法是不可取的，必须综合运用多种方法，取长补短，多方面识别项目的风险。当然，对于特定活动或者事件，需要根据实际情况采用有效的识别方法。\n- 谨慎排除可能的风险\n不要轻易否定或排除某些风险，要通过认真的分析进行确认或排除。必要时，可进行实验论证，对于不能排除但又不能肯定予以确认的风险按确认考虑。\n- 全员参与原则\n由于风险识别的广泛性，要求项目的风险管理人员应尽量向与项目有关的人员广泛征求意见并进行归纳整理，以求对项目风险的全面了解。\n- 动态识别原则\n风险识别的全生命周期性表明随着项目生命期的发展，项目不同阶段会有不同的风险。为了识别随时可能出现的新风险，必须预先制定一个连续的风险识别计划，满足风险动态识别的需要。\n- 经济原则\n经济原则是指依据项目风险影响的大小来确定投入风险识别的资源和精力。对项目整体目标有重大影响的风险，需要花较大的精力、用多种方法进行识别，以期最大程度地掌握风险情况；但对于影响项目整体目标较小的风险因素，则没有必要花费大量时间和精力进行识别。如果风险识别的费用超过风险带来的损失就丧失了风险管理的意义。\n- 资料积累原则\n资料的不断积累是开展风险管理的重要基础，风险识别过程中产生的记录是主要的也是重要的风险资料之一，对于今后的风险管理以及类似项目的风险识别可以提供巨大帮助。风险识别工作开展前应准备好将要用到的记录表格，当风险识别工作完成后，将所获取的相关资料整理保存。\n#### 风险识别内容\n- 识别并确定项目有哪些潜在的风险\n这是项目风险识别的第一项工作目标，因为只有识别和确定项目可能会遇到哪些风险，才能够进一步分析这些风险的性质和后果。所以在项目风险识别中首先要全面分析项目发展变化的可能性，进而识别出项目的各种风险并汇总成项目风险登记册。\n- 识别引起项目风险的主要影响因素\n这是项目风险识别的第二项工作目标，因为只有识别出各项目风险的主要影响因素，才能把握项目风险的发展变化规律，才有可能对项目风险进行应对和控制。所以在项目风险识别中要全面分析各项目风险的主要影响因素及其对项目风险的影响方式、影响方向、影响力度等。\n- 识别项目风险可能引起的后果\n这是项目风险识别的第三项工作目标，因为只有识别出项目风险可能带来的后果及其严重程度，才能够全面地认识项目风险。项目风险识别的根本目的是找到项目风险以及消减项目风险不利后果的方法，所以识别项目风险可能引起的后果是项目风险识别的主要内容。\n#### 风险识别的目的\n项目风险识别的目的主要体现在三个方面：\n- 风险识别有助于确定风险管理的对象；\n- 存在于项目内部及外部环境的不确定因素是多种多样、错综复杂的，有的是静态的，有的是动态的；有的是潜在的，有的是已经存在的，因此需要利用科学的方法进行分析。没有风险识别的过程，无法解决项目不确定的复杂性，风险管理就是盲目的，不切实际的。通过风险识别，可以识别出可能对项目进展有影响的风险因素、性质以及产生的条件，并据此衡量风险的大小，作为制定风险应对计划的依据。\n- 通过风险识别，记录具体风险的各方面特征，并提供最适当的风险管理对策；\n- 风险识别是一项反复的过程，随着项目生命期的渐进，又会产生新的风险。风险反复发生的频率以及参与的各项目过程也会因项目而异，但这并不意味着风险识别是多余的工作，风险识别直接影响风险管理的决策质量，进而影响整个风险管理的最终结果，尤其是在项目的前期。\n- 风险识别有助于提高风险分析的有效性。\n险识别将风险可能引起的后果记录成册，为风险分析提供必要的信息，同时增强项目组织成员对项目成功的信心。风险识别包括识别项目的内在风险及外在风险：内在风险指项目管理组织能加以控制和影响的风险，如成本估计、工期预测、人事任免等；外在风险指超出项目管理组织控制力和影响力之外的风险，如某些市场风险、自然风险和政治风险等。任何一种风险因素在识别阶段被忽略，都可能导致整个风险管理的失败，从而造成不可估量的经济损失。\n#### 风险识别的结果\n- 已识别的项目风险\n已识别的项目风险是项目风险评估的最重要结果，它通过定性的项目风险清单来表示，该清单对项目风险的描述应该尽量简单，容易理解。\n- 潜在的项目风险\n潜在的项目风险是指没有迹象表明会发生的风险，但是人们可以主观判断预见的风险，如重要技术专家的流失。当然，潜在的项目风险可能会发展成为项目的真正风险，因此要给予足够的重视。项目承担单位应该根据风险来源进行适当的分类，并以表格或文字做清楚的描述，编制出潜在的项目风险清单，为风险管理的后续过程打好基础。\n- 对项目管理其他方面的改进\n在项目风险识别的过程中，可能会发现项目管理其他方面存在一些问题，借此机会可以进行修改和完善。\n### 风险评估\n项目风险评估是在风险识别之后，通过对项目所有不确定性和风险要素的充分、系统而又有条理的考虑，确定项目的单个风险。然后，对项目风险进行综合评价。它是在对项目风险进行规划、识别和估计的基础上，通过建立风险的系统模型，从而找到该项目的关键风险，确定项目的整体风险水平，为如何处置这些风险提供科学依据，以保障项目的顺利进行。\n要让所有的事情都去掉主观性是很困难的，但是实践和经验可以提高项目经理预测风险的概率和影响的能力。\n#### 项目风险评估流程\n风险评估过程由以下六个基本步骤构成：\n评估所有的方法：所有不同的方法都应该考虑到，所有影响风险的因素都必须考虑。头脑风暴法或其他的风险识别方法应该使用得透彻，所有可能影响风险发生的因素都应该考虑到。\n考虑风险态度：决策者的风险态度是需要重点考虑的。不同的人会用不同的态度估计风险，并且使用同样的数据做出不同的决定。一些决策者，与其他的决策者相比较，或多或少是厌恶风险的，并且会根据给定的数据，对风险的发生和影响做出不同的主观评估。\n考虑风险的特征：风险是否已经识别、它们是否可控和它们的影响将会怎样，这些都是需要考虑的。控制已经识别(例如内部可控的)的风险而不是其他的(例如外部不可控的)风险，这是可能的。所有可能的风险特征都需要识别。\n建立测量系统：风险需要用定量或定性(或综合的)方法测量和评估。一些方法是使用已经建立的模型，这些模型输入了风险的特征和风险面临的情况，这样，根据历史经验就可以做出预测。\n解释结果：测量中生产的数据需要解释。这种解释同样也有定性的或定量的。测量过程的结果给预测和可能的结果提供了一种暗示，但是这些仍需要解释。两个不同的解释人员可能用的是同样的数据和结果，但他们所做的评价却不相同。解释可能会根据观察到的数据用外推法对未来的结果做出预测。\n进行决策：整个过程的最后阶段需要决定哪些风险会保留，哪些风险要转移出去。风险是否保留取决于组织的实际情况和决策者的态度。\n#### 项目风险评估依据\n- 已识别的风险\n已识别的科技计划项目风险是项目风险评估的基础。\n- 项目的进展情况\n在项目的不同阶段，所面临的风险程度是不同的。一般来说，随着项目的进展，项目的风险和不确定性就会逐步降低。\n- 项目的性质和规模\n由于各科技计划项目的性质不同，风险对其影响程度也不一样。一般来说，较小的科技计划项目风险程度较低，大型、复杂的项目或高新技术项目的风险程度则会比较高。\n- 数据的准确性和可靠性\n数据的准确性和可靠性都会影响项目风险评估的结果，所以要对数据的准确性和可靠性进行评估。\n#### 项目风险评估结果\n项目风险评估最重要的结果就是量化了的项目风险清单。该清单综合考虑了项目风险发生的概率、风险后果的影响程度等因素，因此项目承担单位可依此对项目风险进行排序，从而确定采取什么样的风险应对措施以及控制措施应实施到什么程度。\n项目风险清单一般可包括以下内容：\n- 项目风险发生概率的大小；\n- 项目风险可能影响的范围；\n- 对项目风险预期发生时间的估算；\n- 项目风险可能产生的后果；\n- 项目风险等级的确定。\n项目风险可分为四个等级：\n| 序号 | 等级定义 | 说明 |\n| :---: | :---: | :---: |\n| a | 灾难级 | 这类等级的风险必须立即予以排除 |\n| b | 严重级 | 这类风险会造成项目偏离目标，需要立即采取控制措施 |\n| c | 轻微级 | 暂时不会对项目产生危害，但也要考虑采取应对措施 |\n| d | 忽略级 | 这类风险可以忽略，不采取控制措施 |\n### 风险应对\n项目风险应对措施主要包括如下几种：\n- 项目风险规避措施\n这是从根本上放弃项目或放弃使用有风险的项目资源、项目技术、项目设计方案等，从而避开项目风险的一类应对措施。例如，对于存在不成熟的技术坚决不在项目实施中采用就是一种项目风险规避的措施。\n- 项目风险遏制措施\n这是从遏制项目风险引发原因的角度出发应对项目风险的一种措施。例如，对可能因项目财务状况恶化而造成的项目风险(如因资金断绝而造成烂尾楼工程项目等)，采取注入新资金的保障措施就是一种典型的项目风险遏制措施。\n- 项目风险转移措施\n这类项目风险应对措施多数是用来对付那些概率小，但是损失大(超出了承受能力)或者项目组织很难控制的项目风险。例如，通过购买工程一切险等保险的方法将工程项目的风险转移给保险商的办法就属于风险转移措施。\n- 项目风险化解措施\n这类措施从化解项目风险产生出发，去控制和消除项目具体风险的引发原因。例如，对于可能出现的项目团队内部和外部的各种冲突风险，可以通过采取双向沟通、调解等各种消除矛盾的方法去解决，这就是一种项目风险的化解措施。\n- 项目风险消减措施\n这类风险应对措施是对付无预警信息项目风险的主要应对措施之一。例如，对于一个工程建设项目，在因雨天而无法进行室外施工时，采用尽可能安排各种项目团队成员与设备从事室内作业的方法就是一种项目风险消减的措施。\n- 项目风险储备措施\n这是应对无预警信息项目风险的一种主要措施，特别是对于那些潜在巨大损失的项目风险，应该积极采取这种风险应对措施。例如，储备资金和时间以对付项目风险、储备各种灭火器材以对付火灾、购买救护车以应对人身事故的救治等都属于项目风险储备措施。\n- 项目风险容忍措施\n这是针对那些项目风险发生概率很小而且项目风险所能造成的后果较轻的风险事件所采取的一种风险应对措施。这是一种最常使用的项目风险应对措施，但是要注意必须合理地确定不同组织的风险容忍度。\n- 项目风险分担措施\n这是指根据项目风险的大小和项目相关利益者承担风险的能力大小，分别由不同的项目相关利益主体合理分担项目风险的一种应对措施。这种项目风险应对措施多数采用合同或协议的方式确定项目风险的分担责任。\n- 项目风险开拓措施\n如果组织希望确保项目风险的机会能得以实现，这就具有采用积极的风险措施，该项发现措施的目标在于通过确保项目风险机会的实现。这种措施包括为项目分配更多和更好的资源，以便缩短完成时间或实现超过最初预期的好质量。\n- 项目风险提高措施\n这种策略旨在通过提高项目风险机遇的概率及其积极影响，识别并最大程度发挥这些项目风险机遇的驱动因素，致力于改变这种项目风险机遇的大小，最终促进或增强项目风险的机会，以及积极强化其触发条件，提高其发生的概率。\n## 项目采购管理\n项目采购管理包括从执行组织之外获取产品和服务的过程。项目采购主要包括以下几个方面：\n- 采购计划：决定采购什么，何时采购；我们将按照用户的要求制定详细的采购计划，保证项目采购活动的顺利进行。\n- 合同管理：与项目采购产品生产厂商或者供货厂商签订正规的合同，以项目建设方的要求为基础对合同条约进行要求，保证项目所需产品的高的服务标准，并及时的对项目第三方合同进行清算，确保项目的稳定，降低外部环境的其他风险。\n### 采购计划\n- 根据客户的要求和项目建设要求进行项目所需第三方产品的采购，在项目采购前，我们将根据项目合同要求以及项目建设时间要求等必要条件制定可行采购计划，对项目采购活动的采购内容、相关产品要求、时间计划、运输、交货验收等进行详细的安排，保证项目的采购活动能顺利的进行。\n### 合同管理\n- 在进行第三方产品采购时，我们将通过与供货商正规的合同签订来确保项目采购工作的自豪量，同时也将降低因第三方采购而给项目带来环境外的其他风险。\n### 发货与接收\n相关流程安排如下：\n- 在货物到达建设方指定地点前七天通知建设方货物准备以及到货情况等，其内容包括：\n- 相关合同号；\n- 设备名称；\n- 设备数量；\n- 价格；\n- 箱数；\n- 型号规格；\n- 重量和体积；\n- 拟发运的时间；\n- 其他必要的说明。\n- 向客户发出《交货计划和场地准备书》；\n- 安排所有货物均直接运送至项目建设方指定地点；\n- 发运的同时再次发出《收货通知》；\n- 在用户现场对检查货物包装与核对货单；\n- 若因我方延误告知而对用户造成的损失，由我方负责。\n#### 物流运输\n- 我方将联合长期合作的专业物流公司，仔细清点货物数量，检查货物包装是否完好。之后，安排运输方式（公路、铁路运输或空运），全程专人随同运输至最终用户指定地点，并负责搬运到指定设备安装位置，且我们承诺，我方将承担所有的运输费用。\n#### 包装和标记\n使用适于运输的坚固包装，并且根据合同货物的不同特性和要求采取防潮、防雨、防锈、防震、防腐和防粗暴装卸等保护措施，以确保合同货物安全无损地送达交货地点。由于包装不善所引起的货物锈蚀、损坏和损失均由我方承担。\n下面是一个包装箱四侧的标记实例：\n\n根据合同货物的不同特性和装卸运输上的不同要求，在包装箱相对的二个侧面上用中文标记“勿倒置”、“小心轻放”、“防潮”等标志和“重心”等装卸搬运时适用的通用图案，以利于装卸和搬运。每件包装箱内附一份详细装箱单和质量合格证。\n#### 货物接收\n在货物运抵用户指定地点后，我公司发货随同人员将与接收人按照货物包装箱数进行清点签收（完成开箱清点及初步检验的时间不迟于交货之日起四十日），并且双方都确认货物在运输过程中没有明显包装损坏。\n项目到货过程根据项目到货验收流程进行，我方在到货前进行到货报验申请，并将申请提交给建设单位、监理单位，项目到货时，监理单位组织项目到货验收工作，到货验收完成后，各方签署到货验收报告。\n\n# 项目培训方案\n## 培训概述\n长沙市机关事务管理局智慧后勤服务管理平台项目的培训工作主要是指在项目上线后进行的针对市机关事务管理局用户以及市机关事务管理局系统管理人员的针对性培训。\n在项目执行交付阶段，关键交付事项交付过程中，市机关事务管理局系统管理人员可选择性的参与项目交付工作，作为对项目系统熟悉的过程。\n长沙市机关事务管理局智慧后勤服务管理平台项目包括电子政务外网政务云资源的应用、移动应用端在长沙市现有移动应用平台上的嵌入、智慧安全用电系统的建设、本地机房建设、网络改造、AI视频监控系统以及智能交通管理系统的建设等内容。项目的培训也需要根据机关事务管理局对相关事项的管理智能进行培训。\n## 培训范围\n项目培训内容主要为长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容。具体包括：\n- 智慧后勤管理平台管理端；\n- 智慧后勤管理平台应用PC端；\n- 智慧后勤管理平台应用移动端；\n- 智慧安全用电终端设备；\n- AI视频监控系统终端、服务端设备；\n- 智能交通管理系统终端、服务端设备；\n- 项目新建以及改造网络系统以及相关的设备。\n## 培训对象\n长沙市机关事务管理局智慧后勤服务管理平台项目培训对象主要包括两个部分的人员：\n- 项目系统的相关使用人员；\n- 各部分业务的审批、管理人员；\n- 系统硬件设备以及网络系统的日常管理和维护人员。\n## 培训目标\n长沙市机关事务管理局智慧后勤服务管理平台项目培训目标主要包括以下几个部分：\n- 确保系统使用用户在日常工作和管理事务中能顺畅的使用系统，并通过系统的使用提升工作效率和管理效率。\n- 确保长沙市机关事务管理局智慧后勤服务管理平台项目后续相关的日常管理和维护人员能完成项目系统的日常运维和管理工作，并能对项目系统操作进行基本指导，同时能解决系统在运行过程中出现的轻微故障。\n- 确保长沙市机关事务管理局智慧后勤服务管理平台项目相关的硬件设备的管理和维护人员能完成项目的基本管理和运维，确保项目设备稳定的运行。\n项目培训目标能在无承建单位协助的情况下，系统能对建设单位形成稳定、顺畅的支撑。\n## 培训时间\n长沙市机关事务管理局智慧后勤服务管理平台项目培训时间安排在项目系统上线后，项目系统上线完成，项目系统初始化完成，项目正式进入试运行阶段。项目培训在系统上线部署完成、系统初始化完成后一个星期内完成。\n项目集中培训的时间大概为四个小时左右。\n## 培训方式\n项目采用多种培训方式结合的形式进行项目培训。对于项目系统运行维护和管理人员，可以在项目交付过程中采用一对一的培训方式，通过项目交付过程中一对一的培训完成对项目日常运维和管理人员的培训。\n对于项目普通用户以及系统管理审批人员，采用集中培训的方式，通过在统一的培训环境下安排项目培训讲师进行集中培训。\n## 培训场地\n长沙市机关事务管理局智慧后勤服务管理平台项目培训对象主要是机关事务管理局相关办公人员，培训场地可选用机关较大的会议室进行集中培训，以系统操作方式演示和讲解为主。\n培训中一对一的培训主要是在用户或管理人员操作过程中预以操作和管理指导。\n## 培训教程\n长沙市机关事务管理局智慧后勤服务管理平台项目培训教程主要包括演示系统、项目培训PPT、项目系统操作手册、项目运行维护手册。\n在项目培训工作开始之前，项目培训工作组根据本项目的建设内容和培训要求开始编织项目培训教程。\n## 培训讲师\n长沙市机关事务管理局智慧后勤服务管理平台项目我方将指派熟悉项目系统使用，且又有丰富的项目培训经历的项目组成员作为项目培训讲师。\n培训讲师负责项目培训教程的编写、项目培训场地确认、组织和协调项目培训环境的搭建，制定项目培训计划等工作。\n## 培训考核\n项目培训工作完成以后，可根据长沙市机关事务管理局智慧后勤服务管理平台项目的需要制定项目培训考核规划，包括考核的方式、考核时间等。\n项目培训考核的主要目标是确保项目培训工作能达到预期的目标，本项目可采取双向考核的方式，一方面，培训讲师通过培训过程和培训考核情况\n## 实施培训\n### 培训步骤\n根据项目培训的具体情况，在项目培训阶段以项目合同培训要求为基础制定培训流程如下：\n- 确认培训时间；\n- 确认培训内容以及培训课程；\n- 确认培训人员名单；\n- 确认培训环境以及培训方式；\n- 制作项目培训材料；\n- 协调项目培训资源；\n- 搭建项目培训环境；\n- 完成项目培训工作；\n- 培训情况评估。\n### 培训名单确认\n在项目培训工作进行前，我们将根据项目培训课程提供项目培训人员角色的建议，由机关事务管理局根据项目参与人员、项目软硬件系统使用人员的具体情况拟定项目受训人员名单。我方将根据课程时间以及培训人员名称拟定项目具体的培训计划。\n### 计划编制\n当项目建设方将项目培训地点情况、培训方式、培训人员名单、培训启动结束时间拟定完成后，我方将根据培训的具体情况编制项目培训计划，该计划将根据培训设施、人员、课程要求等情况对详细的课程时间安排，培训人员安排等作出详细的培训计划。该计划交由项目建设方审核后发布，并按该计划开始实施培训工作。\n### 通知发布\n在项目培训环境搭建完成，或能确认在培训开始前可搭建完成时，项目组将根据培训情况在机关事务管理局的协助下发布培训通知。或直接由机关事务管理局直接发布培训通知，主要的通知内容如下：\n| 培训通知 | 培训通知 | 培训通知 | 培训通知 | 培训通知 |\n| :---: | :---: | :---: | :---: | :---: |\n| 培训名称： |   |   |   |   |\n| 培训时间： | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 |\n| 培训地点： |   |   |   |   |\n| 培训单位： |   |   |   |   |\n| 培训讲师： |   |   |   |   |\n| 培训课程： | 课程名称 | 课程名称 | 课程内容 | 课程内容 |\n| 培训课程： |   |   |   |   |\n| 培训课程： |   |   |   |   |\n| 培训课程： |   |   |   |   |\n| 培训目的： |   |   |   |   |\n| 培训要求： |   |   |   |   |\n| 备注说明： |   |   |   |   |\n| 联系人： |   | 联系方式： | 联系方式： |   |\n| 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 |\n### 实施培训\n培训启动后，我方培训人员将培训材料、培训设备的准备完成，每天在培训开始之前对培训环境进行调试，保证培训的顺利进行。并将当天课程的培训以分天的方式或者在培训第一天统一发放给培训学员。\n给培训人员发放预制的课程表，以方便培训人员的培训学习。\n在培训时间段内，培训讲师或者培训辅助人员将根据当天培训的情况对培训人员进行签到考勤记录，做为培训评估的基础之一。\n在培训过程中，除正常的对课程的讲解之外，每节课程将设置专门的培训答疑时间，以保证培训质量。\n### 培训评估\n在培训实施进行过程以及培训结束后，我方将根据项目建设方的要求对培训进行评估，一共包括以下几个方面的评估：\n- 项目建设方对项目培训材料的评估，可通过项目组专题会议的形式或者预讲的形式对项目培训材料进行评估；\n- 培训人员以及项目管理人员对参与培训的人员进行评估，我方可协助项目建设方对项目培训人员的培训情况进行评估，可分为日常评估以及培训效果评估。日常评估主要以日常培训考勤情况为基础，同时也可通过实际操作情况对培训人员的培训效果进行评估；\n- 项目建设方以及参与培训的人员对培训讲师进行评估，通过培训人员对培训讲师的课程诠释能力，教学方式等进行评估；\n- 培训效果评估以及培训满意度评估。\n通过双向的评估以保证项目培训的质量，确保通过培训能达到该培训的预期目的。\n#### 培训材料评估\n| 评审意见表 | 评审意见表 | 评审意见表 |\n| :---: | :---: | :---: |\n| 评审材料名称： |   |   |\n| 评审会议时间： |   |   |\n| 评审会议地点： |   |   |\n| 评审人员名单： | 评审人员单位 | 评审人姓名 |\n| 评审人员名单： |   |   |\n| 评审人员名单： |   |   |\n| 评审人员名单： |   |   |\n| 评审主要内容： |   |   |\n| 评审建议： |   |   |\n| 评审签字： |   |   |\n#### 培训讲师评估\n| 讲师评审表 | 讲师评审表 |\n| :---: | :---: |\n| 讲师姓名： |   |\n| 负责课程： |   |\n| 评审时间： |   |\n| 整体满意程度： | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 评审项目 | 满意程度 |\n| 讲师授课态度 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 对知识的表达能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 专业知识能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 知识范围的宽广度 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 课程的诠释能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 问题解答能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 对讲师的建议 |   |\n\n# 项目验收方案\n## 验收概述\n根据项目要求，长沙市机关事务管理局智慧后勤服务管理平台项目设立两个验收点，即即项目初步验收和项目竣工验收（终验）。项目建设内容全部完成后，项目经过我方内测达到项目初步验收标准后，由我方向监理单位以及建设单位提请项目初步验收。初步验收完成后，我方对初验过程中所提的问题进行整改，整改完成，项目进入上线试运行阶段，一般为期1-3个月。项目初验以及试运行过程中相关问题整改完成并通过测试，我方向建设单位提请竣工验收。\n根据项目招标文件要求，本项目采用一般程序验收。项目验收国家有强制性规定的，按国家规定执行，验收费用由中标人承担，验收报告作为申请付款的凭证之一。\n## 验收内容\n长沙市机关事务管理局智慧后勤服务管理平台项目验收内容主要包括以下几个方面：\n- 项目所有采购货物是否按照项目招标文件要求完成采购到货；\n- 项目招标文件所要求的软件系统是否按建设单位需求开发完成，并在相关位置完成部署与实施；\n- 项目相关的硬件设备是否按照项目规划设计要求完成安装部署和实施；\n- 项目范围内需要进行改造的网络系统是否按照项目规划设计要求进行改造，并完成对接；\n- 项目范围内需要进行对接的十四个系统是否按照项目招标文件要求完成对接；\n- 项目范围内所有文档以及组织过程资产是否按照项目要求进行编写以及提交并审核通过。\n## 验收标准\n长沙市机关事务管理局后勤服务管理平台项目验收标准：\n- 项目合同范围内所有采购货物均按项目合同要求完成采购和到货验收工作，且相关货物完全满足项目合同以项目招标要求；\n- 项目合同范围内所要求的软件系统以及按照要求完成需求调研、开发以及测试工作，并通过测试能完全满足项目招标要求以及项目合同要求；\n- 项目软件系统以及按照项目设计要求和建设单位要求完成实施部署，项目系统运行稳定；\n- 项目范围内的硬件设备均已经按照项目规划和设计要求完成安装部署和实施，经过测试，相关系统满足项目合同与招标要求；\n- 项目范围内需要进行改造的网络系统均以及按照项目规划和设计要求进行改造，并完成网络系统对接，经测试，系统运行正常；\n- 项目范围内需要对接的十四个系统均已按照项目招标文件以及项目合同要求完成系统对接，经测试，系统对接稳定，数据交互均满足项目合同以及招标要求；\n- 项目范围内所有文档以及组织过程资产均按照项目要求进行编写以及提交并审核通过。\n## 验收组织\n长沙市机关事务管理局后勤服务管理平台项目的验收组织包括：\n- 项目建设单位，长沙市机关事务管理局；\n- 项目监理单位；\n- 项目验收专家组；\n- 项目监管单位；\n- 项目承建单位。\n由项目建设单位组织，项目专家组、项目监管单位、项目建设单位以及监理单位组成项目验收小组执行对项目的验收工作。\n\n## 验收方式\n基于长沙市机关事务管理局智慧后勤服务管理平台项目的特性，项目采用集中现场验收的方式。\n由建设单位组织项目验收小组对项目建设情况进行现场验收。验收小组通过对项目系统进行操作演示、对外部设备进行现场勘查、对项目文档进行审阅，并在项目验收会议上对建设单位进行质询。\n## 验收准备\n项目验收准备条件如下：\n- 所有建设内容按项目合同以及招标要求全部完成建设；\n- 各分项验收工作全部完成，且合格；\n- 招标文件以及合同所要求的软件系统测评工作全部完成，且测评通过；\n- 软件系统配置管理工作完成，BASELINE建立；\n- 项目验收资料以及文档编写完成，且符合项目招标以及合同要求；\n- 项目范围内相关设备上架，加电运行测试正常；\n- 项目验收申请提交监理单位，监理单位同意；\n- 项目验收申请提交后，项目建设单位以及主管单位同意启动验收；\n- 项目合同所要求的其他验收条件。\n## 验收步骤\n项目验收步骤如下：\n- 编写验收方案（计划书）；\n- 成立项目验收小组；\n- 项目验收实施；\n- 编写项目验收报告；\n- 召开验收评审会；\n- 签署项目验收报告。\n## 验收报告（模板）\n### 项目基本信息\n- 项目名称：\n- 项目编号：\n- 项目建设方：\n- 项目承建方：\n- 项目监理方：\n### 项目合同信息\n#### 合同基本信息\n- 项目合同编号：\n- 项目合同甲方：\n- 项目合同乙方：\n#### 合同变更情况\n*对项目合同的变更情况进行简要的描述和说明**。如果有多个变更，需要逐一描述。如无合同变更，记录无。*\n### 项目建设周期\n- 项目开工日期：\n- 项目竣工日期：\n- 项目服务周期：自 年 月 日开始至 年 月 日。\n\n### 项目建设情况\n#### 项目进度情况\n| 序号 | 阶段名称 | 开始时间 | 结束时间 | 项目提交物 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n\n#### 项目需求变更情况\n*记录项目需求变更（已经执行）情况，如果存在多个变更，需要逐一说明。*\n# \n### 项目验收计划\n#### 验收基本信息\n- 项目验收时间：\n- 项目验收方式：现场集中验收\n- 项目验收组：\n| 序号 | 验收人员 | 所属单位 | 所属角色 | 相关职责 |\n| ---: | --- | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n#### 项目验收原则\n- 对已经交付的项目成果进行核验，检查项目所有交付成果是否满足项目合同之要求；\n- 对项目任务以及技术服务等内容进行审查，确认相关的项目任务以及需要提供的技术服务已经全部按照合同完成；\n- 对项目实施进度情况进行审核，检查是否按照项目合同的时间进度要求完成了项目建设；\n- 对项目的投资情况进行审查；\n- 对项目的提交物（各类文档）进行审查；\n- 对项目的技术水平做出评价，并得出项目的验收结论。\n（正式编写的时候请写项目具体的交付成果和项目任务）\n#### 项目验收依据\n（正式编写的时候请写项目具体的验收依据）\n- 《项目商务合同》\n- 《项目工作说明书（SOW）》\n- 《项目技术方案》\n- 《项目实施方案》\n- 《项目测试报告》\n#### 项目验收内容\n（正式编写的时候请写项目具体的相关硬件环境和系统）\n- 项目硬件基础环境验收；\n- 项目软件系统平台验收；\n- 项目应用系统功能验收；\n- 项目外场设备的验收；\n- 项目文档验收。\n\n### 项目验收结论\n#### 专家组验收意见\n由专家组编制验收意见。\n#### 专家组（签字）：\n由验收组成员签字。\n### 附件\n#### 附件一：软件平台验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 软件类型 | 软件名称 | 验收结果 | 备注 （机器的IP地址等） |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n\n#### 附件二：功能模块验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 功能模块 | 验收内容 | 合同要求 | 验收结果 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n| 7 |   |   |   |   |\n\n#### 附件三：项目文档验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 文档名称 | 用 途 | 验收结果 | 备注 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n\n#### 附件四：硬件设备验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 硬件名称 | 型号 | 用途 | 配置情况 | 验收结果 | 备注 （机器的IP地址等） |\n| :---: | :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |   |   |\n| 2 |   |   |   |   |   |   |\n\n",
  "lastModified" : 1764646206617
}, {
  "filePath" : "售前资料/test.md",
  "fileName" : "test.md",
  "parentDir" : "售前资料",
  "fileType" : "MD",
  "title" : "test.md",
  "contentText" : "# 第一章\n## 背景{@锚点A}\n{@锚点1}\nWWWWWWWW\nWWWWWWWWWWWWWWWWW\n\n# 第二章{@dez}\n```mermaid\ngraph TD;\n    A-->B;\n    A-->C;\n    B-->D;\n    C-->D;\n```",
  "size" : 157,
  "modifiedAt" : 1764658803443,
  "id" : "售前资料/test.md",
  "content" : "# 第一章\n## 背景{@锚点A}\n{@锚点1}\nWWWWWWWW\nWWWWWWWWWWWWWWWWW\n\n# 第二章{@dez}\n```mermaid\ngraph TD;\n    A-->B;\n    A-->C;\n    B-->D;\n    C-->D;\n```",
  "lastModified" : 1764658803443
}, {
  "filePath" : "售前资料/goal.md",
  "fileName" : "goal.md",
  "parentDir" : "售前资料",
  "fileType" : "MD",
  "title" : "goal.md",
  "contentText" : "    We create high-quality houses with \"AI + hardware + software\" to achieve zero carbon emissions and constant comfort. The HKT Campus Agent Entity quantifies building performance and services into publicly available scores, breaks down revenue into shares and issues certificates, and rewards users with points based on usage and evaluation. It incorporates digital twins, IoT, and digital humans, enabling a self-circulating loop of perception, decision-making, and control for full-domain warning and dispatch, forming a closed loop from standards to data, assets, and transactions. This transforms buildings into measurable, tradable, and continuously appreciating smart assets, turning spaces into self-learning, self-appreciating urban cells that exchange value with the city in real-time.\n\n    We leverages AI+hardware+software to create Next-Gen Smart Buildings, turning buildings into embodied AI, self-valuing and tradable digital assets that reward use and trade with the city.\n\n    We leverages AI+hardware+software to create Next-Gen Smart Buildings, turning buildings into embodied AI, self-valuing and tradable digital assets that reward usage, form value loops within living parks & surrounding communities, and connect to digital cities.",
  "size" : 1255,
  "modifiedAt" : 1764663152070,
  "id" : "售前资料/goal.md",
  "content" : "    We create high-quality houses with \"AI + hardware + software\" to achieve zero carbon emissions and constant comfort. The HKT Campus Agent Entity quantifies building performance and services into publicly available scores, breaks down revenue into shares and issues certificates, and rewards users with points based on usage and evaluation. It incorporates digital twins, IoT, and digital humans, enabling a self-circulating loop of perception, decision-making, and control for full-domain warning and dispatch, forming a closed loop from standards to data, assets, and transactions. This transforms buildings into measurable, tradable, and continuously appreciating smart assets, turning spaces into self-learning, self-appreciating urban cells that exchange value with the city in real-time.\n\n    We leverages AI+hardware+software to create Next-Gen Smart Buildings, turning buildings into embodied AI, self-valuing and tradable digital assets that reward use and trade with the city.\n\n    We leverages AI+hardware+software to create Next-Gen Smart Buildings, turning buildings into embodied AI, self-valuing and tradable digital assets that reward usage, form value loops within living parks & surrounding communities, and connect to digital cities.",
  "lastModified" : 1764663152070
}, {
  "filePath" : "售前资料/作息时间安排.xlsx",
  "fileName" : "作息时间安排.xlsx",
  "parentDir" : "售前资料",
  "fileType" : "XLSX",
  "title" : "作息时间安排.xlsx",
  "contentText" : "工作表: Sheet1\n作息时间    任务安排  详细内容\n8：00-8：30   起床    穿衣  刷牙 洗漱 □\n8：30-9：00  吃早餐   吃饭  整理餐桌 □\n9：00：10：00   学习时间  斑马 叫叫阅读  写作业 □\n10：00-10：30   点心时光  吃水果 或零食  □\n10：30-11：30   玩玩具   积木拼搭，棋类 □\n11：30-11：50  收拾玩具 餐前洗手 整理餐桌 □\n12：00-12：30   午餐时间  □\n12：30-14：00  午睡 □\n14：00-15：00  亲子时光   户外活动 跳绳等 □\n15：00-16：30  兴趣时光   手工 美术 英语 做气球 □\n16：30-17：00 点心时光   吃水果或零食 □\n17：00-18：00  放松娱乐    看电视 □\n18：00-18：30  晚餐时间  餐前洗手 吃晚餐，整理餐桌 □\n18：30-20：30  睡前活动   和妈妈爸爸做游戏 讲故事  □\n20：30-21：00  晚安时间   睡前回顾  洗漱 □\n\n",
  "size" : 9069,
  "modifiedAt" : 1764658803443,
  "id" : "售前资料/作息时间安排.xlsx",
  "content" : "工作表: Sheet1\n作息时间    任务安排  详细内容\n8：00-8：30   起床    穿衣  刷牙 洗漱 □\n8：30-9：00  吃早餐   吃饭  整理餐桌 □\n9：00：10：00   学习时间  斑马 叫叫阅读  写作业 □\n10：00-10：30   点心时光  吃水果 或零食  □\n10：30-11：30   玩玩具   积木拼搭，棋类 □\n11：30-11：50  收拾玩具 餐前洗手 整理餐桌 □\n12：00-12：30   午餐时间  □\n12：30-14：00  午睡 □\n14：00-15：00  亲子时光   户外活动 跳绳等 □\n15：00-16：30  兴趣时光   手工 美术 英语 做气球 □\n16：30-17：00 点心时光   吃水果或零食 □\n17：00-18：00  放松娱乐    看电视 □\n18：00-18：30  晚餐时间  餐前洗手 吃晚餐，整理餐桌 □\n18：30-20：30  睡前活动   和妈妈爸爸做游戏 讲故事  □\n20：30-21：00  晚安时间   睡前回顾  洗漱 □\n\n",
  "lastModified" : 1764658803443
}, {
  "filePath" : "技术案例/Web预览系统产品设计.md",
  "fileName" : "Web预览系统产品设计.md",
  "parentDir" : "技术案例",
  "fileType" : "MD",
  "title" : "Web预览系统产品设计.md",
  "contentText" : "# 文档TOON结构生成与Web预览系统 - 统一产品设计文档（DDD + Spring Cloud + React）\r\n\r\n作者：伍志勇\r\n日期（北京时间）：2025-11-24 16:34:42\r\n版本：v1.0\r\n\r\n## 1. 产品概述\r\n\r\n- 目标：展示指定目录（示例 `/home/agentic/hkt-knowledge`）的全部子目录与文档清单；生成并持久化索引TOON数据到本地 `data/` 目录（不使用PostgreSQL）；左侧树展示结构，右侧预览文档内容。\r\n- 范围：完整枚举目录与文件（支持中文名与Linux路径）；文件预览支持 `.md/.docx/.pdf/.csv/.svg`。\r\n- 核心特性：索引TOON（`files` 块）生成与读取、树状展示、类型识别与预览、缓存与治理。\r\n- 场景：内部/公开文档库的轻量化展示与快速检索。\r\n\r\n## 2. 统一语言与术语（Ubiquitous Language）\r\n\r\n- 目录（Directory/Folder）：以`dirPath/dirName`表示的层级节点\r\n- 文档（Document/File）：以`filePath/fileName/fileType`表示的文件实体\r\n- TOON（面向词元的对象表示法）：结构化块表示，含`fields/data/toonString`\r\n- 预览（Preview）：以`PreviewContent`呈现的可视内容（HTML/PDF/SVG）\r\n\r\n## 3. 领域驱动设计（DDD）\r\n\r\n### 3.1 用户旅程工作坊（User Journey Mapping）\r\n\r\n- 输出：用户旅程图、痛点/机会点、角色与场景列表\r\n\r\n#### 3.1.1 角色（Persona）\r\n\r\n- 访客：浏览与预览文档，不进行上传/下载。\r\n- 管理员：触发重扫、查看状态、清理缓存，保障索引与预览稳定。\r\n\r\n#### 3.1.2 旅程阶段（Stages）\r\n\r\n- 进入应用 → 加载索引（`index.toon/json`） → 浏览树（展开/折叠） → 筛选与定位（关键字/类型过滤） → 点击文档 → 预览渲染（md/docx/pdf/csv/svg） → 错误与降级提示 → 管理操作（重扫/状态/清缓存）。\r\n\r\n#### 3.1.3 痛点与机会点（Pain & Opportunities）\r\n\r\n- 痛点：\r\n  - 大目录加载与渲染性能瓶颈（滚动卡顿、一次性渲染过多节点）。\r\n  - 多语言路径与中文字符的兼容性问题（编码与规范化）。\r\n  - 部分格式解析失败或不支持（例如复杂DOCX或超大PDF）。\r\n  - 索引刷新后前端状态一致性（缓存失效与ETag协同）。\r\n- 机会：\r\n  - 采用TOON高效索引与分页分块，减少传输体积与渲染压力。\r\n  - 树懒加载与虚拟滚动、按需加载预览器，显著提升体验。\r\n  - 统一错误与降级策略，保证“可视化回退”与操作指引。\r\n  - 管理接口支持重扫与状态观察，形成闭环运维能力。\r\n\r\n#### 3.1.4 场景清单（Scenarios）\r\n\r\n- 场景1：首次进入应用 → 自动加载`index.toon` → 左侧树显示根目录与首层节点。\r\n- 场景2：展开目录节点 → 按需请求下一层数据 → 渲染子目录与文档列表。\r\n- 场景3：关键字筛选 → 过滤`name/path`，高亮命中项 → 清空筛选恢复。\r\n- 场景4：点击`.md`文档 → 前端`marked`渲染 → 支持标题目录与代码高亮。\r\n- 场景5：点击`.pdf`文档 → 后端流式返回 → 前端`pdfjs`分页渲染与缩放。\r\n- 场景6：点击`.docx`文档 → 根据决策矩阵选择前端`mammoth`或后端POI → 输出HTML预览。\r\n- 场景7：点击`.csv`文档 → `papaparse`解析 → 表格排序与列宽调整。\r\n- 场景8：点击`.svg`文档 → 直接嵌入`<svg>` → 安全过滤可疑脚本。\r\n- 场景9：预览失败（解析或资源限制） → 显示降级内容或错误页 → 提供“查看原始TOON”。\r\n- 场景10：管理员在状态页触发重扫 → `data/index.toon`更新时间刷新 → 前端树自动刷新或提示手动刷新。\r\n\r\n### 3.2 事件风暴（Event Storming）摘要\r\n\r\n- 业务目标：从指定根目录快速构建可浏览的索引TOON，并按需预览文档。\r\n- 关键事件（Domain Events）：\r\n  - `IndexRequested`（用户/系统发起索引请求）\r\n  - `DirectoryScanned`（目录被遍历完成，发现条目）\r\n  - `ItemEnumerated`（发现目录/文件条目）\r\n  - `IndexPersisted`（索引TOON写入 `data/index.toon` 完成）\r\n  - `IndexLoaded`（前端/API读取索引TOON或JSON派生）\r\n  - `PreviewRequested`（预览请求到达）\r\n  - `PreviewRendered`（预览成功生成）\r\n  - `PreviewFailed`（预览失败，触发降级与错误事件）\r\n  - `RescanTriggered`（运维或配置变更触发重扫）\r\n  - `CacheInvalidated`（扫描变更导致缓存失效）\r\n- 命令（Commands）：`TriggerScan`、`PersistIndex`、`LoadIndex`、`RenderPreview`、`InvalidateCache`、`TriggerRescan`。\r\n- 聚合与读模型：\r\n  - 聚合：`DocumentRepository`（统一维护文件与目录条目、元数据）\r\n  - 读模型：`FilesIndex`（TOON/JSON）、`DirectoryTree`（派生树）、`PreviewContent`\r\n- 策略/规则（Policies）：\r\n  - 配置变更 → 触发 `TriggerRescan`\r\n  - 扫描完成 → `PersistIndex` → 通知前端刷新\r\n  - 预览失败 → 生成降级TOON块或错误响应\r\n- 外部系统：文件系统（Linux）、Redis（缓存）、Config Server（配置）、Nginx（入口）、Prometheus/Grafana（监控）。\r\n- 端到端路径（示例）：\r\n  - 用户打开页面 → `IndexRequested` → 后端`TriggerScan`（或直接`IndexLoaded`）→ 生成并`PersistIndex` → 前端树加载 → 用户点击文件 → `PreviewRequested` → `RenderPreview` → 展示或降级。\r\n\r\n#### 3.2.1 DDD 完整链路图（Mermaid）\r\n\r\n- 迁移说明：该图已移至“附录 E. DDD 完整链路图（Mermaid）”。\r\n\r\n### 3.3 划分限界上下文（Context Slicing）\r\n\r\n- 规则：语言边界、业务一致性、团队边界\r\n- 输出：限界上下文图（Context Map）\r\n\r\n#### 3.3.1 上下文清单（Bounded Contexts）\r\n\r\n- 文档（Document）：负责文档实体、目录树读模型与TOON结构的对外暴露。\r\n- 扫描（Scan）：负责遍历与索引生成、持久化`data/index.toon/index.json`。\r\n- 预览（Preview）：负责类型适配与内容生成（HTML/PDF/SVG）。\r\n- 网关（Gateway）：统一入口、CORS、限流、错误映射与内容协商。\r\n\r\n#### 3.3.2 边界描述（Boundary）\r\n\r\n- Document：\r\n  - 输入：来自Scan的索引、来自Preview的渲染请求。\r\n  - 输出：`DirectoryTree`、`FilesIndex`、`TOONStructure`。\r\n  - 自有模型：`Document`、`FileMetadata`、`TOONStructure`、`DirectoryTree`。\r\n  - 非功能：读取`data`目录只读；缓存命中直接返回；统一错误结构。\r\n- Scan：\r\n  - 输入：配置根目录（Config Server）、重扫命令（Admin）。\r\n  - 输出：`index.toon`与`index.json`、`metadata`更新时间。\r\n  - 自有模型：扫描任务、黑白名单、符号链接校验策略。\r\n  - 非功能：文件系统I/O与并发控制、去重与原子写入、指标监控。\r\n- Preview：\r\n  - 输入：`filePath`与类型参数。\r\n  - 输出：`PreviewContent`（HTML/PDF/SVG）。\r\n  - 自有模型：解析适配器、降级策略、资源限制（线程/内存/超时）。\r\n  - 非功能：安全过滤、内容类型协商、HTTP Range支持。\r\n- Gateway：\r\n  - 输入：前端请求。\r\n  - 输出：路由到各BC、统一错误映射、`ETag/Last-Modified`处理。\r\n  - 自有模型：CORS白名单、限流令牌桶、受支持`Accept`集合。\r\n  - 非功能：日志与审计、告警与熔断策略（可选）。\r\n\r\n#### 3.3.3 防腐层与契约（ACL & Contract）\r\n\r\n- Preview对复杂库（PDFBox/POI）设置适配接口，隔离库细节，返回统一`PreviewContent`。\r\n- Gateway对外统一MIME与错误结构；`Accept: application/x-toon`直通TOON契约；`application/json`返回结构化对象。\r\n- Document与Scan之间采用`index.toon/json`文件契约；更新时间通过`metadata.last_updated`传递。\r\n\r\n#### 3.3.4 团队边界\r\n\r\n- Scan与Preview可由后端团队维护；Document由后端与前端共同维护读模型；Gateway由平台/架构组维护。\r\n\r\n### 3.4 上下文映射（Context Mapping）\r\n\r\n- 模式：合作关系、共享内核、客户-供应商、防腐层ACL、开放主机服务\r\n- 输出：上下文映射图\r\n\r\n#### 3.4.1 关系矩阵（Relationship Matrix）\r\n\r\n- Document ↔ Scan：客户-供应商（Customer–Supplier）。Document消费Scan产出的索引；Scan遵循约定的TOON契约与更新时间规则。\r\n- Document ↔ Preview：开放主机服务（Open Host Service）。Document发起`RenderPreview`调用，Preview暴露统一接口与MIME；失败时返回统一错误结构。\r\n- Gateway ↔ 各BC：开放主机服务 + 防腐层（ACL）。Gateway只曝光稳定契约与错误映射；对内部对象进行DTO转换。\r\n\r\n#### 3.4.2 协作模式说明\r\n\r\n- Published Language：跨上下文统一采用`TOONStructure/PreviewContent/DirectoryTree/FilesIndex`术语与字段命名，避免翻译歧义。\r\n- Anti-Corruption Layer：Preview内部适配第三方解析库；Gateway对外统一MIME与错误；Document保持读模型纯净。\r\n- Shared Kernel（谨慎）：仅在通用工具层共享TOON校验器与时间/路径规范工具，业务模型不共享。\r\n\r\n#### 3.4.3 故障与降级路径\r\n\r\n- Scan失败：保留最近一次`index.toon`并标注`metadata`为旧时间；前端提示“索引可能不是最新”。\r\n- Preview失败：返回降级TOON或错误；前端提供“查看原始TOON”与“稍后重试”。\r\n- Gateway限流：返回429与`Retry-After`，避免雪崩；记录`traceId`与指标。\r\n\r\n#### 3.4.4 一致性与刷新\r\n\r\n- 索引刷新：`IndexPersisted`事件广播（可选）或前端轮询`last_updated`；命中ETag返回304。\r\n- 读写分离：Scan写`data/*`，Document读`data/*`；通过文件锁或原子替换保证一致性。\r\n\r\n### 3.5 建立通用语言（Ubiquitous Language）\r\n\r\n- 指引：术语统一见第2章；代码词汇表见第27章\r\n\r\n#### 3.5.1 角色词汇表\r\n\r\n- 访客（Visitor）：浏览索引、查看预览、不进行写操作。\r\n- 管理员（Admin）：触发重扫、查看运行状态、清理缓存。\r\n\r\n#### 3.5.2 场景词汇表\r\n\r\n- 浏览索引：加载`index.toon/json`并渲染树。\r\n- 展开节点：获取指定目录的子项并渲染。\r\n- 筛选搜索：按`name/path`过滤并高亮命中。\r\n- 预览渲染：根据`fileType`选择适配器生成`PreviewContent`。\r\n- 错误降级：当解析失败时渲染降级内容或错误页。\r\n- 管理重扫：管理员触发重新扫描根目录或子树。\r\n\r\n#### 3.5.3 示例用语（Examples）\r\n\r\n- 作为访客，我希望能快速加载文档树并展开我关心的目录。\r\n- 作为访客，当我点击文档时，系统应返回对应的预览内容或清晰的错误提示。\r\n- 作为管理员，我希望在索引过期或结构变化时，能够一键触发重扫并查看最新更新时间。\r\n\r\n#### 3.5.4 代码词汇一致性\r\n\r\n- 接口与模型统一使用：`filePath/fileName/fileType`、`TOONStructure`、`PreviewContent`、`DirectoryTree`、`FilesIndex`。\r\n- 错误统一：`ErrorResponse{code,message,traceId,details}`；日志包含`traceId`便于定位。\r\n\r\n### 3.6 战术设计（Tactical Modeling）\r\n\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 待补充：战术模型图与类图（ToDo）\r\n\r\n#### 3.6.1 核心领域与聚合\r\n\r\n- 聚合根：`DocumentRepository`，负责文档实体生命周期管理（创建、查询、更新、删除）。\r\n- 上下文划分：\r\n  - 文档领域（核心）：文档实体、TOON结构、文件元数据。\r\n  - 扫描领域：扫描任务与结果，目录遍历与目标格式识别。\r\n  - 预览领域：预览内容生成与格式适配。\r\n\r\n#### 3.6.2 实体与值对象\r\n\r\n- 实体 `Document`（唯一标识 `filePath`）：\r\n  - 属性：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure`（懒加载）、`previewContent`（懒加载）。\r\n- 值对象：\r\n  - `FileMetadata`：`fileSize`、`lastModifiedTime`、`charset`（默认UTF-8）。\r\n  - `TOONStructure`：`rootNode`、`elementCount`、`fields`（List<String>）、`data`（List<Map<String,Object>>）、`toonString`（标准TOON字符串）。\r\n  - `PreviewContent`：`contentType`（text/html、application/pdf、image/svg+xml 等）、`content`（HTML字符串/二进制流/SVG文本）、`supportFullPreview`（boolean）。\r\n  - `DirectoryTree`：`dirPath`、`dirName`、`subDirs`（List<DirectoryTree>）、`documents`（List<DocumentSummary>）。\r\n  - `DocumentSummary`：`filePath`、`fileName`、`fileType`、`fileSize`。\r\n\r\n#### 3.6.3 领域服务\r\n\r\n- `ScanService`：遍历根目录与子目录，识别目标格式、生成 `FileMetadata`，更新仓库。\r\n- `TOONGenerationService`：按文档格式提取结构化数据并生成 `TOONStructure`。\r\n- `PreviewService`：将文档转换为Web可展示的 `PreviewContent`（HTML/PDF/SVG）。\r\n\r\n#### 3.6.4 领域事件\r\n\r\n- 事件（可选）：`DocumentScannedEvent`（扫描完成）、`PreviewRequestedEvent`（预览请求）。\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 参考：3.2 实体与值对象；3.3 领域服务\r\n\r\n#### 3.6.5 战术模型图与类图（文本草案）\r\n\r\n- 实体与值对象：\r\n  - `Document`（Entity）：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure?`、`previewContent?`\r\n  - `FileMetadata`（ValueObject）：`fileSize`、`lastModifiedTime`、`charset`\r\n  - `TOONStructure`（ValueObject）：`rootNode`、`elementCount`、`fields: List<String>`、`data: List<Map<String,Object>>`、`toonString`\r\n  - `PreviewContent`（ValueObject）：`contentType`、`content`、`supportFullPreview`\r\n  - `DirectoryTree`（ValueObject）：`dirPath`、`dirName`、`subDirs: List<DirectoryTree>`、`documents: List<DocumentSummary>`\r\n- 仓储（Repository）：\r\n  - `DocumentRepository`：`findByPath(filePath)`、`save(document)`、`listByDir(dirPath)`、`updateMetadata(filePath, metadata)`\r\n- 领域服务（Domain Service）：\r\n  - `ScanService`：`scan(rootDirs)`、`enumerate(dirPath)`、`persistIndex(dataDir)`\r\n  - `TOONGenerationService`：`fromMd(filePath)`、`fromCsv(filePath)`、`fromDocx(filePath)`、`fromPdf(filePath)`、`fromSvg(filePath)`\r\n  - `PreviewService`：`render(filePath)`（返回`PreviewContent`）\r\n- 工厂与规约（Factory & Specification）：\r\n  - `PreviewAdapterFactory`：按`fileType`返回适配器。\r\n  - `IndexSpecification`：黑白名单、符号链接、编码规范校验。\r\n- 交互关系：\r\n  - 应用层调用`ScanService`生成索引，持久化到`data/index.*`；\r\n  - 应用层调用`PreviewService`产出`PreviewContent`；\r\n  - Document聚合通过`DocumentRepository`装载与更新实体，保持读模型与索引文件一致。\r\n\r\n（Mermaid 可视化）\r\n\r\n```mermaid\r\nclassDiagram\r\ndirection TB\r\n\r\nclass Document {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +parentDir: String\r\n  +fileMetadata: FileMetadata\r\n  +toonStructure: TOONStructure\r\n  +previewContent: PreviewContent\r\n}\r\n\r\nclass FileMetadata {\r\n  +fileSize: long\r\n  +lastModifiedTime: Instant\r\n  +charset: String\r\n}\r\n\r\nclass TOONStructure {\r\n  +rootNode: String\r\n  +elementCount: int\r\n  +fields: List<String>\r\n  +data: List<Map<String,Object>>\r\n  +toonString: String\r\n}\r\n\r\nclass PreviewContent {\r\n  +contentType: String\r\n  +content: Any\r\n  +supportFullPreview: boolean\r\n}\r\n\r\nclass DirectoryTree {\r\n  +dirPath: String\r\n  +dirName: String\r\n  +subDirs: List<DirectoryTree>\r\n  +documents: List<DocumentSummary>\r\n}\r\n\r\nclass DocumentSummary {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +fileSize: long\r\n}\r\n\r\nclass DocumentRepository {\r\n  +findByPath(filePath: String): Document\r\n  +save(document: Document): void\r\n  +listByDir(dirPath: String): List<DocumentSummary>\r\n  +updateMetadata(filePath: String, metadata: FileMetadata): void\r\n}\r\n\r\nclass ScanService {\r\n  +scan(rootDirs: List<String>): void\r\n  +enumerate(dirPath: String): List<FilesIndexItem>\r\n  +persistIndex(dataDir: String): void\r\n}\r\n\r\nclass TOONGenerationService {\r\n  +fromMd(filePath: String): TOONStructure\r\n  +fromCsv(filePath: String): TOONStructure\r\n  +fromDocx(filePath: String): TOONStructure\r\n  +fromPdf(filePath: String): TOONStructure\r\n  +fromSvg(filePath: String): TOONStructure\r\n}\r\n\r\nclass PreviewService {\r\n  +render(filePath: String): PreviewContent\r\n}\r\n\r\nclass PreviewAdapterFactory {\r\n  +getAdapter(fileType: FileType): PreviewAdapter\r\n}\r\n\r\nclass PreviewAdapter\r\nclass MdAdapter\r\nclass PdfAdapter\r\nclass DocxAdapter\r\nclass CsvAdapter\r\nclass SvgAdapter\r\n\r\nDocument *-- FileMetadata\r\nDocument o-- TOONStructure\r\nDocument o-- PreviewContent\r\nDirectoryTree o-- DocumentSummary\r\nDocumentRepository ..> Document : load/save\r\nScanService ..> DocumentRepository : enumerate/listByDir\r\nScanService ..> DirectoryTree : derive\r\nTOONGenerationService ..> TOONStructure\r\nPreviewService ..> PreviewContent\r\nPreviewService ..> PreviewAdapterFactory\r\nPreviewAdapterFactory ..> PreviewAdapter\r\nPreviewAdapter <|.. MdAdapter\r\nPreviewAdapter <|.. PdfAdapter\r\nPreviewAdapter <|.. DocxAdapter\r\nPreviewAdapter <|.. CsvAdapter\r\nPreviewAdapter <|.. SvgAdapter\r\n```\r\n\r\n### 3.2.2 命令-事件-聚合表（草案）\r\n\r\n\r\n| 业务动作   | 命令              | 触发条件           | 领域事件                                              | 聚合/读模型            | 备注                                                  |\r\n| ---------- | ----------------- | ------------------ | ----------------------------------------------------- | ---------------------- | ----------------------------------------------------- |\r\n| 索引扫描   | `TriggerScan`     | 用户/定时/配置变更 | `DirectoryScanned`、`ItemEnumerated`                  | `DocumentRepository`   | 生成`FilesIndex`候选；跳过隐藏/黑名单                 |\r\n| 持久化索引 | `PersistIndex`    | 扫描完成           | `IndexPersisted`                                      | `DocumentRepository`   | 写入`data/index.toon`与`metadata`；可派生`index.json` |\r\n| 加载索引   | `LoadIndex`       | 前端或API请求      | `IndexLoaded`                                         | `FilesIndex`（读模型） | 返回TOON或JSON，支持内容协商                          |\r\n| 请求预览   | `RenderPreview`   | 用户点击文件       | `PreviewRequested`、`PreviewRendered`/`PreviewFailed` | `PreviewService`       | 支持md/docx/pdf/csv/svg；失败降级                     |\r\n| 清缓存     | `InvalidateCache` | 管理操作/变更检测  | `CacheInvalidated`                                    | Cache层                | 失效`toon:`/`preview:`键；ETag刷新                    |\r\n| 触发重扫   | `TriggerRescan`   | Admin接口调用      | `RescanTriggered`                                     | `ScanService`          | 全量或增量；更新`last_updated`                        |\r\n\r\n### 3.3.1 限界上下文图（草案表格）\r\n\r\n\r\n| 上下文（BC）     | 职责                        | 上游             | 下游             | 关系模式                 | 防腐层                 | UL关键词                                     |\r\n| ---------------- | --------------------------- | ---------------- | ---------------- | ------------------------ | ---------------------- | -------------------------------------------- |\r\n| 文档（Document） | 文档实体/TOON/目录树读模型  | 扫描（Scan）     | 预览（Preview）  | 客户-供应商（对Scan）    | 路径/编码规范；DTO映射 | `filePath`、`TOONStructure`、`DirectoryTree` |\r\n| 扫描（Scan）     | 遍历与索引生成、持久化index | Config Server    | 文档（Document） | 开放主机服务（暴露索引） | 黑白名单/符号链接校验  | `files[count]{path,type,name}`、`metadata`   |\r\n| 预览（Preview）  | 各类型预览内容生成          | 文档（Document） | 网关/前端        | 防腐层（对复杂格式库）   | 解析库接口封装         | `PreviewContent`、降级策略                   |\r\n| 网关（Gateway）  | 统一入口/CORS/限流          | 前端             | 各BC API         | 开放主机服务             | 统一错误映射           | `Accept`、`ETag`                             |\r\n\r\n### 3.7 实现（Code & UT）\r\n\r\n- 结构：模块-聚合-分层；接口层/应用层/领域层/基础设施层\r\n- 规约：业务规则单元测试、EBNF语法校验测试\r\n\r\n#### 3.7.1 关键模块清单（Backend）\r\n\r\n- `gateway`：路由、CORS、限流、错误映射、ETag处理。\r\n- `document-service`\r\n  - Controller：`DocumentController`（tree/toon/preview/scan/index接口）。\r\n  - Application：用例编排与事务控制（按目录粒度）。\r\n  - Domain：`ScanService`、`TOONGenerationService`、`PreviewService`、`DocumentRepository`。\r\n  - Infra：文件遍历器、TOON校验器、预览适配器（PDFBox/POI/OpenCSV等）。\r\n- `preview-worker`（可选）：队列消费者，异步执行重解析任务。\r\n\r\n#### 3.7.2 关键模块清单（Frontend）\r\n\r\n- 页面：`TreePage`（索引树与筛选）、`PreviewPage`（文档预览）、`AdminPage`（重扫与状态）。\r\n- 组件：`DirectoryTree`、`PreviewPane(md/pdf/docx/csv/svg)`、`SearchBar`、`StatusBadge`。\r\n- 状态：React Query 请求层、缓存策略与错误提示。\r\n\r\n#### 3.7.3 UT用例索引（Backend）\r\n\r\n- `ScanServiceTest`：\r\n  - 枚举跳过隐藏/黑名单；符号链接白名单校验；大目录性能阈值。\r\n  - `index.toon`生成与`metadata`时间格式（北京时区）。\r\n- `TOONGenerationServiceTest`：\r\n  - CSV/MD/DOCX/PDF/SVG五类解析一致性与转义校验；降级块生成。\r\n- `PreviewServiceTest`：\r\n  - 各类型适配与MIME；PDF Range分页；超时与内存限制保护。\r\n- `GatewayErrorMappingTest`：\r\n  - 错误码与HTTP映射；`traceId`传递；CORS预检缓存。\r\n\r\n#### 3.7.4 UT用例索引（Frontend）\r\n\r\n- `TreeRender.spec.tsx`：懒加载/虚拟滚动/分页段落；筛选与高亮。\r\n- `PreviewMd.spec.tsx`、`PreviewPdf.spec.tsx`、`PreviewDocx.spec.tsx`、`PreviewCsv.spec.tsx`、`PreviewSvg.spec.tsx`：渲染与错误降级。\r\n- `AdminRescan.spec.tsx`：重扫后更新时间刷新与提示。\r\n\r\n### 3.8 持续演进（Evolution）\r\n\r\n- 活动：领域事件回放、模型重构、定期事件风暴\r\n- 参考：12 运行保障；12 扩展性与演进\r\n\r\n#### 3.8.1 演进周期\r\n\r\n- 每周：事件风暴复盘（针对新增/变化的领域事件与命令），更新命令-事件-聚合表。\r\n- 每两周：Story Map梳理与迭代计划评审；MVP/V1/V2增量验收。\r\n- 每月：非功能指标回顾（`latency p95/p99`、`cache_hit_ratio`、`parse_success_rate`）与容量策略调整。\r\n\r\n#### 3.8.2 触发机制\r\n\r\n- 配置刷新（Config Server）：根目录或限流/缓存参数变更 → 增量/全量重扫（5分钟窗口）。\r\n- 文件系统事件（inotify）：新增/修改/删除 → 局部重扫与缓存失效。\r\n- 指标阈值：当`parse_success_rate`连续低于阈值或`api_latency_p99`升高 → 降级策略启用与资源上限调整。\r\n\r\n#### 3.8.3 版本演进\r\n\r\n- MVP → V1 → V2：对应“用户故事地图”的版本切片；优先保证索引浏览与`.md`预览，逐步引入其他格式与后台能力。\r\n\r\n#### 3.8.4 领域事件回放\r\n\r\n- 支持将扫描与预览关键步骤记录为事件流水，便于定位问题与重现；必要时对比两版索引差异（`diff index.toon`）。\r\n\r\n#### 3.8.5 风险与回退\r\n\r\n- 索引文件损坏或不可读：回退到最近一次可用索引并提示“索引可能过期”。\r\n- 预览解析崩溃：触发熔断与降级，限制并发与内存，记录失败样本用于事后分析。\r\n\r\n## 4. 架构设计（Spring Cloud + React）\r\n\r\n- 服务组件：\r\n  - `gateway`（统一入口、CORS策略、限流可选）。\r\n  - `eureka`（服务发现）。\r\n  - `config-server`（集中配置，含根目录数组与定时参数）。\r\n  - `document-service`（领域服务：扫描、TOON、预览API）。\r\n  - 可选 `preview-worker`（重解析任务异步化：PDF/DOCX转HTML）。\r\n- 技术选型：\r\n  - 后端：Java 17、Spring Boot 3、Lombok（简化）、POI（docx）、PDFBox（pdf）、OpenCSV（csv）、Tika（类型识别）、Redis（缓存）。\r\n  - 前端：React 18、TypeScript、Ant Design 5、Vite；预览库：`marked`（md）、`pdfjs-dist`（pdf）、`mammoth`（docx）、`papaparse`（csv）、原生`<svg>`（svg）。\r\n  - 部署：Docker、Nginx（负载均衡）、Jenkins + GitLab（CI/CD）、Kubernetes（可选）；监控：Prometheus + Grafana；日志：ELK。\r\n- 依赖关系：接口层（Web/网关）→ 应用层（用例编排）→ 领域层（模型与服务）→ 基础设施层（文件系统与解析库）。\r\n\r\n## 5. TOON语法规范\r\n\r\n- 语法范式：`blockName[count]{field1,field2,...}: record1; record2; ...`\r\n- 记录表达：每条记录为逗号分隔的字段值；记录间以分号或换行分隔；允许空值（空字符串）。\r\n- 转义规则：值中包含逗号/分号/换行时使用 `\\,` `\\;` `\\n`；反斜杠使用 `\\\\`；统一UTF-8编码。\r\n- 多块输出：响应可包含多个块，按语义顺序组织，例如：\r\n  - `directories[2]{path}: /docs; /images`\r\n  - `documents[3]{id,name,path,type}: 1,readme.md,/docs/readme.md,md; 2,report.docx,/docs/report.docx,docx; 3,data.csv,/data/data.csv,csv`\r\n- 元数据块：`metadata{total,last_updated,page,size}: 3,2025-11-24T11:27:16+08:00,1,100`（时间统一为北京时间，ISO-8601）。\r\n- 令牌优化：字段顺序固定；避免冗余键；尽量合并表头/重复值；非必要标点禁止；大集合按分页块分段返回。\r\n- 兼容性：中文目录/文档名与中文字段值允许；统一UTF-8；建议使用NFC规范化。\r\n- EBNF描述：\r\n  - `block ::= name '[' count ']' '{' fields '}' ':' records`\r\n  - `fields ::= field { ',' field }`\r\n  - `records ::= record { (';' | NEWLINE) record }`\r\n  - `record ::= value { ',' value }`\r\n  - `value ::= TEXT | ESCAPED`\r\n- `ESCAPED ::= '\\\\,' | '\\\\;' | '\\\\n' | '\\\\\\\\'`\r\n- `name, field, TEXT 采用 UTF-8；推荐NFC规范化`\r\n\r\n### 5.1 索引TOON（files块）规范\r\n\r\n- 目的：持久化指定根目录的目录与文件枚举，供Web应用加载展示。\r\n- 语义：`files[count]{path,type,name}:` 后接按行/分号分隔的记录；`type` 取 `directory|file`；`path` 为相对根的Linux风格路径；`name` 为条目名。\r\n- 元数据：附加 `metadata{total,last_updated,root}: count,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n- 示例：\r\n  - `files[12]{path,type,name}:`\r\n  - `hkt-knowledge/,directory,hkt-knowledge`\r\n  - `hkt-knowledge/hkt-product/,directory,hkt-product`\r\n  - `hkt-knowledge/hkt-product/hkt-agentic/,directory,hkt-agentic`\r\n  - `hkt-knowledge/hkt-product/industrial-brain/,directory,industrial-brain`\r\n  - `hkt-knowledge/hkt-project/,directory,hkt-project`\r\n  - `hkt-knowledge/hkt-project/docs/,directory,docs`\r\n  - `hkt-knowledge/hkt-project/docs/gitlab流水线触发指南.md,file,gitlab流水线触发指南.md`\r\n  - `hkt-knowledge/hkt-project/docs/会议纪要模版.md,file,会议纪要模版.md`\r\n  - `hkt-knowledge/hkt-project/docs/孚盟学习网址.md,file,孚盟学习网址.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.md,file,客户地理位置分布.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.xlsx,file,客户地理位置分布.xlsx`\r\n  - `hkt-knowledge/hkt-project/docs/广告推广国家.md,file,广告推广国家.md`\r\n  - `hkt-knowledge/test-document.md,file,test-document.md`\r\n  - `metadata{total,last_updated,root}: 12,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n\r\n## 6. 功能模块设计\r\n\r\n### 6.1 扫描模块\r\n\r\n- 配置根目录（单/多），在 `config-server` 配置，如 `app.scan.root-dirs=[\"/home/agentic/hkt-knowledge\"]`；默认取第一个根进行索引持久化。\r\n- 支持手动触发与定时扫描（默认每1小时，可配置）；跳过隐藏文件/目录（如 `.git/`）。\r\n- 扫描遍历目录与文件，生成 `files[count]{path,type,name}` 索引TOON；写入本地 `data/index.toon`（附 `metadata` 块）。\r\n- 可选生成派生 `data/index.json`（仅供前端树快速加载）。\r\n\r\n### 6.2 TOON生成模块\r\n\r\n- 首次访问懒加载生成，生成后按 `filePath` 缓存（Redis）默认1小时。\r\n- 无法提取结构化数据时生成默认TOON（例如PDF纯文本）。\r\n- 标准TOON输出包含对象字段与 `toonString` 字符串。\r\n\r\n### 6.3 Web展示模块\r\n\r\n- 左侧 Tree 展示 `DirectoryTree`，支持展开/折叠、类型图标区分。\r\n- 右侧预览按类型加载对应预览器：\r\n  - `.md` → `marked` 转 HTML；\r\n  - `.pdf` → `pdfjs-dist` 渲染二进制流，支持滚动/缩放；\r\n  - `.docx` → 后端 POI 转 HTML 或前端 `mammoth`；\r\n  - `.csv` → `papaparse` → `Antd Table`，支持排序；\r\n  - `.svg` → 原始文本嵌入 `<svg>`。\r\n- 交互限制：不提供下载按钮，禁用右键保存（前端限制）。\r\n\r\n## 7. API设计（REST）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 描述：获取目录树结构。\r\n  - 返回：`DirectoryTree`。\r\n- `GET /api/v1/document/toon?filePath=...`\r\n  - 描述：获取文档TOON结构。\r\n  - 返回：`TOONStructure`。\r\n- `GET /api/v1/document/preview?filePath=...`\r\n  - 描述：获取文档预览内容。\r\n  - 返回：`PreviewContent`（HTML字符串/PDF流/SVG文本）。\r\n- `POST /api/v1/document/scan`\r\n  - 描述：触发手动扫描。\r\n  - 返回：`ScanResult`（新增/更新/删除数量等）。\r\n\r\n### 7.1 索引加载接口\r\n\r\n- `GET /api/v1/index/toon`\r\n  - 描述：返回持久化的索引TOON（`data/index.toon`）。\r\n  - 返回：MIME `application/x-toon` 或 `text/plain; charset=UTF-8`。\r\n- `GET /api/v1/index/json`\r\n  - 描述：返回索引的JSON派生结构（`data/index.json`）。\r\n  - 返回：`FilesIndex`（数组）。\r\n\r\n### 7.2 请求参数\r\n\r\n- 获取目录树 `GET /api/v1/document/tree`\r\n  - 可选：`rootDir`（字符串，默认配置的全部根目录）、`path`（仅返回指定路径子树）、`depth`（整数，默认2）、`page`、`size`（分段加载）。\r\n- 获取文档TOON `GET /api/v1/document/toon`\r\n  - 必填：`filePath`；可选：`format=both|toon|json`（默认both）、`page`、`size`（大集合分页）。\r\n- 获取文档预览 `GET /api/v1/document/preview`\r\n  - 必填：`filePath`；可选（PDF）：`startPage`、`endPage`。\r\n- 触发手动扫描 `POST /api/v1/document/scan`\r\n  - 可选：`dirPath`（仅扫描指定目录）、`force`（布尔，是否跳过缓存直接重扫）。\r\n\r\n### 7.3 响应示例（节选）\r\n\r\n- 目录树（JSON）：\r\n  - `{ \"dirPath\": \"/opt/docs\", \"dirName\": \"docs\", \"subDirs\": [{\"dirPath\":\"/opt/docs/api\",\"dirName\":\"api\",\"subDirs\":[],\"documents\":[]}], \"documents\": [{\"filePath\":\"/opt/docs/readme.md\",\"fileName\":\"readme.md\",\"fileType\":\"MD\",\"fileSize\":1024}] }`\r\n- 文档TOON（both）：\r\n  - `{ \"rootNode\":\"users\", \"elementCount\":2, \"fields\":[\"id\",\"name\",\"role\"], \"data\":[{\"id\":1,\"name\":\"张三\",\"role\":\"admin\"},{\"id\":2,\"name\":\"李四\",\"role\":\"user\"}], \"toonString\":\"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n- 文档预览（PDF片段）：\r\n  - 头：`Content-Type: application/pdf`，支持 Range；体为二进制流；JSON模式示例：`{ \"contentType\":\"application/pdf\", \"content\":\"<base64>\", \"supportFullPreview\": false }`\r\n\r\n### 7.4 接口参数表（摘要）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 必填：无\r\n  - 可选：`rootDir`、`path`、`depth`、`page`、`size`\r\n- `GET /api/v1/document/toon`\r\n  - 必填：`filePath`\r\n  - 可选：`format=both|toon|json`、`page`、`size`\r\n- `GET /api/v1/document/preview`\r\n  - 必填：`filePath`\r\n  - 可选：`startPage`、`endPage`（PDF）\r\n- `POST /api/v1/document/scan`\r\n  - 必填：无\r\n  - 可选：`dirPath`、`force`\r\n\r\n### 7.5 OpenAPI草案（节选）\r\n\r\n```yaml\r\nopenapi: 3.0.0\r\ninfo:\r\n  title: 文档TOON结构生成与Web预览系统 API\r\n  version: 1.0.0\r\npaths:\r\n  /api/v1/document/tree:\r\n    get:\r\n      summary: 获取目录树结构\r\n      parameters:\r\n        - in: query\r\n          name: rootDir\r\n          schema: { type: string }\r\n        - in: query\r\n          name: path\r\n          schema: { type: string }\r\n        - in: query\r\n          name: depth\r\n          schema: { type: integer, minimum: 0, default: 2 }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer, minimum: 1, default: 1 }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer, minimum: 1, default: 200 }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/DirectoryTree' } } } }\r\n        '400': { $ref: '#/components/responses/Error400' }\r\n  /api/v1/document/toon:\r\n    get:\r\n      summary: 获取文档TOON结构\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: format\r\n          schema: { type: string, enum: [both, toon, json], default: both }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/TOONStructure' } }, application/x-toon: { schema: { type: string } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n        '422': { $ref: '#/components/responses/Error422' }\r\n  /api/v1/document/preview:\r\n    get:\r\n      summary: 获取文档预览内容\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: startPage\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: endPage\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/PreviewContent' } }, application/pdf: { schema: { type: string, format: binary } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n  /api/v1/document/scan:\r\n    post:\r\n      summary: 触发手动扫描\r\n      requestBody:\r\n        content:\r\n          application/json:\r\n            schema:\r\n              type: object\r\n              properties:\r\n                dirPath: { type: string }\r\n                force: { type: boolean, default: false }\r\n      responses:\r\n        '200': { description: OK }\r\ncomponents:\r\n  schemas:\r\n    DirectoryTree:\r\n      type: object\r\n      properties:\r\n        dirPath: { type: string }\r\n        dirName: { type: string }\r\n        subDirs:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DirectoryTree' }\r\n        documents:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DocumentSummary' }\r\n    DocumentSummary:\r\n      type: object\r\n      properties:\r\n        filePath: { type: string }\r\n        fileName: { type: string }\r\n        fileType: { type: string, enum: [MD, DOCX, PDF, CSV, SVG] }\r\n        fileSize: { type: integer }\r\n    TOONStructure:\r\n      type: object\r\n      properties:\r\n        rootNode: { type: string }\r\n        elementCount: { type: integer }\r\n        fields: { type: array, items: { type: string } }\r\n        data: { type: array, items: { type: object } }\r\n        toonString: { type: string }\r\n    PreviewContent:\r\n      type: object\r\n      properties:\r\n        contentType: { type: string }\r\n        content: { type: string }\r\n        supportFullPreview: { type: boolean }\r\n    ErrorResponse:\r\n      type: object\r\n      properties:\r\n        code: { type: string }\r\n        message: { type: string }\r\n        traceId: { type: string }\r\n        details: { type: object }\r\n  responses:\r\n    Error400:\r\n      description: Bad Request\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error404:\r\n      description: Not Found\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error422:\r\n      description: Unprocessable Entity\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n```\r\n\r\n### 7.6 API协商与返回模式\r\n\r\n- `GET /api/v1/document/toon?filePath=...&format=both|toon|json&page=1&size=100`\r\n  - `format`：返回模式；默认 `both`（结构体与 `toonString` 同时返回）。\r\n  - 分页：对大集合型TOON可使用 `page/size`；响应中同时返回 `metadata` 块说明总数、页码与最后更新时间。\r\n- 内容协商：支持 `Accept: application/x-toon` 强制仅返回 `toonString`（MIME：`application/x-toon`）；`application/json` 返回对象结构；无 `Accept` 或 `*/*` 返回默认 `both`。\r\n- 预览分页：`GET /api/v1/document/preview?filePath=...&startPage=1&endPage=10`（PDF），支持HTTP Range；单次最大返回页数 `<= 20`。\r\n- 响应示例：\r\n  - JSON：`{ rootNode: \"users\", elementCount: 2, fields: [\"id\",\"name\",\"role\"], data: [{id:1,name:\"张三\",role:\"admin\"},{id:2,name:\"李四\",role:\"user\"}], toonString: \"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n  - TOON：`users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- 兼容降级策略：若代理/浏览器不识别 `application/x-toon`，可回退使用 `text/plain; charset=UTF-8` 返回 `toonString`。\r\n- 配置项（Config Server）：`preview.pdf.max-pages-per-request=20`、`gateway.response.supported-accepts=application/json,application/x-toon,*/*`。\r\n\r\n## 8. 数据结构定义（概念约定）\r\n\r\n- 枚举 `FileType`：MD/DOCX/PDF/CSV/SVG。\r\n- 实体 `Document`：见 3.2。\r\n- 值对象 `TOONStructure`：见 3.2。\r\n- 前端 TypeScript 约定：\r\n  - `DirectoryTree { dirPath: string; dirName: string; subDirs: DirectoryTree[]; documents: DocumentSummary[] }`\r\n  - `DocumentSummary { filePath: string; fileName: string; fileType: FileType; fileSize: number }`\r\n  - `TOONStructure { rootNode: string; elementCount: number; fields: string[]; data: Array<Record<string, any>>; toonString: string }`\r\n  - `PreviewContent { contentType: string; content: string | ArrayBuffer; supportFullPreview: boolean }`\r\n  - `FilesIndexItem { path: string; type: 'directory' | 'file'; name: string }`\r\n  - `FilesIndex = FilesIndexItem[]`\r\n\r\n## 9. TOON生成规则（按格式）\r\n\r\n- CSV：第一行为 `fields`，其余行为 `data`；`rootNode` 为文件名；`elementCount` 为数据行数。\r\n- MD：优先提取表格数据（列名→`fields`，行→`data`）；次选列表结构。\r\n- DOCX：提取表格优先，其次段落标题；规则对齐MD。\r\n- PDF：尽力提取表格/结构化；若不可行，则 `fields=[\"content\"]`，`data` 为文本片段。\r\n- SVG：`fields=[\"width\",\"height\",\"elementsCount\"]`，`data` 为SVG元数据。\r\n\r\n## 10. 治理与合规\r\n\r\n### 10.1 路径与编码规范（Linux/中文）\r\n\r\n- 运行环境：Linux；路径分隔符 `/`；大小写敏感；禁止Windows样式路径。\r\n- 编码与规范化：文件/目录名统一UTF-8；建议NFC规范化；拒绝包含控制字符与非法路径片段（如 `..` 越权）。\r\n- 符号链接策略：禁止跨根目录的符号链接访问；允许根目录内的符号链接但需解析到真实路径并做白名单校验；检测越权即拒绝。\r\n- 默认黑名单：`.git/`、`.svn/`、`node_modules/`、`target/`、`.DS_Store`、临时/隐藏文件（以 `.` 开头）。\r\n- 白名单：所有访问严格限制在配置的根目录集合内；任何跨目录或符号链接越权访问拒绝。\r\n\r\n### 10.2 安全与访问限制\r\n\r\n- 根目录访问严格限制在配置集合内，拒绝跨目录访问与路径遍历（规范化路径校验）。\r\n- 网关层启用CORS白名单策略，仅允许指定来源域名。\r\n- 前端禁用右键保存与下载入口（仅UI限制，无法完全阻止恶意抓取）。\r\n\r\n### 10.3 错误与响应格式\r\n\r\n- 统一错误JSON：`{ code: string, message: string, traceId: string, details?: object, locale?: string }`\r\n- HTTP状态码：\r\n  - 400 参数错误（非法filePath、越权路径）。\r\n  - 404 文件不存在或不支持格式。\r\n  - 409 并发冲突（扫描进行中）。\r\n  - 422 解析失败（TOON/预览生成失败）。\r\n  - 429 请求过多（限流）。\r\n  - 500 服务器内部错误。\r\n- 网关错误映射：统一成上述错误结构并记录 `traceId`。\r\n- 错误码字典：`INVALID_PATH`、`UNSUPPORTED_TYPE`、`FILE_NOT_FOUND`、`PARSE_FAILED`、`CONFLICT`、`RATE_LIMITED`、`INTERNAL_ERROR`。\r\n- CORS与预检：配置 `Access-Control-Allow-Origin`（白名单）、`Access-Control-Allow-Methods`、`Access-Control-Allow-Headers`、`Access-Control-Max-Age=600`。\r\n\r\n#### 10.3.1 错误码与HTTP映射（示例）\r\n\r\n- `INVALID_PATH` → 400；消息：路径非法或越权访问\r\n- `FILE_NOT_FOUND` → 404；消息：文件不存在\r\n- `UNSUPPORTED_TYPE` → 404；消息：格式不支持\r\n- `CONFLICT` → 409；消息：资源冲突或扫描进行中\r\n- `PARSE_FAILED` → 422；消息：解析失败，返回降级内容或提示\r\n- `RATE_LIMITED` → 429；消息：请求过多，请稍后重试\r\n- `INTERNAL_ERROR` → 500；消息：服务器内部错误\r\n\r\n## 9. 非功能与性能\r\n\r\n- 异步扫描与大目录优化（并发遍历、I/O分离、批量缓存更新）。\r\n- 跳过隐藏文件与目录，避免无意义解析。\r\n- 大文件（>100MB）预览仅加载前10页（PDF），显示分页控件与提示。\r\n- TOON结构与预览内容缓存默认1小时，可配置；命中则直接返回。\r\n- 兼容性：现代浏览器（Chrome/Firefox/Edge ≥ 88）。\r\n\r\n## 10. 部署与运维\r\n\r\n- 容器化：Docker 镜像构建；Nginx 反向代理与负载均衡；Jenkins + GitLab CI/CD。\r\n- 微服务：Eureka 服务发现；Config Server 管理根目录与扫描周期；\r\n- 监控：Prometheus 采集接口与调度指标；Grafana 仪表盘；\r\n- 日志：ELK 聚合 `document-service` 扫描/预览日志与异常。\r\n\r\n## 11. 用户故事与验收标准\r\n\r\n- 用户故事1：查看文档树结构\r\n  - Given 配置的根目录存在，When 应用启动，Then 自动扫描并生成TOON数据，左侧显示树状结构。\r\n  - Given 树已显示，When 点击目录节点，Then 展开子目录与文档清单。\r\n  - Given 树已显示，When 点击文档节点，Then 右侧预览文档内容。\r\n- 用户故事2：预览文档内容\r\n  - Given 用户点击文档节点，When 文档类型为 md/docx/pdf/csv/svg，Then 在右侧渲染对应预览。\r\n  - Given 预览界面显示，When 文档格式不支持，Then 显示“预览不支持”提示。\r\n  - Given 预览功能，Then 不提供下载或上传选项。\r\n\r\n### 用户故事地图（Story Map）\r\n\r\n- Backbone（活动）：浏览索引 → 查找与筛选 → 查看预览 → 管理重扫 → 运行保障\r\n- 用户角色：访客（浏览/预览）、管理员（重扫/状态/清缓存）\r\n- 活动拆分与步骤：\r\n  - 浏览索引：加载`index.toon/json` → 渲染树 → 展开/折叠 → 类型图标\r\n  - 查找与筛选：关键字筛选（按`name/path`，可选）→ 类型过滤（file/directory）→ 清空筛选\r\n  - 查看预览：点击文件 → 加载对应预览器（md/docx/pdf/csv/svg）→ 错误降级提示\r\n  - 管理重扫：进入管理页 → 选择目录 → 触发`admin/rescan` → 观察更新时间\r\n  - 运行保障：限流/缓存生效 → 监控指标回报 → 故障时降级与重试\r\n- 版本切片：\r\n  - MVP：加载索引、树浏览、`.md`预览、错误页提示\r\n  - V1：`.pdf/.docx/.csv/.svg`预览、`index.json`派生、限流与缓存\r\n  - V2：异步预览worker、管理后台页面、监控与告警、筛选搜索\r\n- 验收视角：每步具备可见输出（树渲染/预览/状态）、错误有统一文案、操作有可回退路径。\r\n\r\n## 12. 扩展性与演进\r\n\r\n- 新增格式时：实现 `TOONGenerationService` 与 `PreviewService` 的新适配方法，注册到策略表。\r\n- 多根目录：`config-server` 支持数组配置与动态刷新；扫描服务按目录并发执行。\r\n- 异步预览：将重解析任务下沉至 `preview-worker`，通过Kafka异步处理与Redis结果回填。\r\n\r\n## 13. 参考来源与整合说明\r\n\r\n- 参考文档：\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（豆包）.md:193-198（技术选型）、269-317/281-307（API端点）、205-213（扫描策略）、141-149（TOON规则）、385-392（安全/CORS）、377-384（性能/缓存）、239-252（交互）、40-65/67-125（模型）、175-185（分层）、400-405（扩展性）、77-90（TOON对象）。\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（DeepSeek）.md:53-58（前后端建议与预览库）、45-48（预览不支持提示）、58（Docker容器化）、36-49（用户故事与验收）、124-125（异步与性能）。\r\n- 参考文章：知乎《TOON vs JSON：现代数据格式的巅峰对决》 https://zhuanlan.zhihu.com/p/1973687597361566533（TOON语法、块结构与令牌效率要点）。\r\n- 整合原则：以“豆包”工程化规则为主干，吸收“DeepSeek”的快速实现与容器建议，并统一到 React + AntD + Vite 前端与 Spring Cloud + Java 后端的栈约束下。\r\n\r\n## 12. 运行保障\r\n\r\n### 12.1 缓存与失效策略\r\n\r\n- Redis键设计：\r\n  - TOON：`toon:{sha256(filePath)}:{version}`；预览：`preview:{sha256(filePath)}:{pageRange}`。\r\n  - 版本计算：默认 `sha256(filePath + mtime + size)`；可选 `sha256(content)`（大文件时按区块）。\r\n- TTL：默认1小时；大文件预览可单独设置TTL。\r\n- 失效触发：\r\n  - 扫描发现变更（新增/修改/删除）即失效对应键。\r\n  - 手动触发重扫或管理接口清缓存。\r\n- HTTP缓存：使用 `ETag` 与 `Last-Modified`；命中直接返回304。\r\n- 容量与逐出：配置最大容量；策略LRU或LFU；指标监控命中率与逐出率。\r\n\r\n### 12.2 监控指标与限流建议\r\n\r\n- 监控指标：\r\n  - `scan_duration_ms`、`parse_success_rate`、`cache_hit_ratio`、`api_latency_p95`、`api_latency_p99`、`queue_backlog`。\r\n- 限流：\r\n  - 基于IP或令牌的令牌桶；默认每IP每分钟 120 次，突发 30；超限返回429并提供 `Retry-After` 与统一错误页文案。\r\n\r\n### 12.3 稳定性与运行策略\r\n\r\n- 扫描策略：\r\n  - 定时扫描（默认每小时）与Linux inotify文件事件监听结合；事件驱动优先，周期性补偿。\r\n  - 多根目录并发扫描需保证仓库更新的原子性与去重。\r\n- 并发与锁：Repository更新采用分段锁（按目录粒度）与批处理事务，避免写入冲突；去重基于 `filePath+hash`。\r\n- 重试与退避：解析失败指数退避（初始500ms，最大4s，最多3次）；区分可重试/不可重试错误并记录失败样本。\r\n- 资源限制：为PDFBox/POI设置并发线程上限（≤CPU核数）、单文件解析超时（≤10s）与内存上限，防止OOM。\r\n- 配置刷新：`config-server` 变更后触发增量重扫（变更目录）或在 5 分钟窗口内全量重扫。\r\n\r\n## 附录 A. 示例用例（各格式TOON）\r\n\r\n- CSV：\r\n  - `users[2]{id,name,role}: 1,张三,admin; 2,李四,user`\r\n  - `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- MD（表格）：\r\n  - `features[3]{name,status}: 目录树,done; 预览,doing; 缓存,pending`\r\n- DOCX（表格优先）：\r\n  - `requirements[2]{item,priority}: TOON语法规范,high; 错误格式统一,high`\r\n- DOCX 适配决策矩阵：\r\n  - 条件：文档体积 < 5MB，样式简单（纯文本/基本表格） → 选择：前端 `mammoth` → 理由：轻量、减少后端负载 → 降级：复杂样式检测失败则回退后端POI\r\n  - 条件：包含复杂表格/图片/页眉页脚/公式 → 选择：后端 POI 转 HTML → 理由：解析更稳定、可控 → 降级：无法完整转换时输出文本TOON块\r\n  - 条件：超大文件 ≥ 20MB → 选择：后端 POI 分段解析 → 理由：内存与性能控制 → 降级：仅抽取段落摘要或表格前N行\r\n  - 条件：中文大段与混合编码 → 选择：后端统一UTF-8并规范化 → 理由：保证TOON一致性 → 降级：不可识别字符替换为占位符\r\n- PDF（文本降级）：\r\n  - `content[1]{content}: 项目概述\\n支持五类文档\\n缓存1小时`\r\n- SVG（元数据）：\r\n  - `svg_meta[1]{width,height,elementsCount}: 800,600,42`\r\n- 复杂示例（多块顺序与关联）：\r\n  - `directories[1]{path}: /docs`\r\n  - `documents[2]{id,name,path,type}: 1,概述.md,/docs/概述.md,md; 2,设计.pdf,/docs/设计.pdf,pdf`\r\n- `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n\r\n## 附录 B. 前后端实现与测试建议\r\n\r\n- 前端状态管理：采用 React Query；设定 `staleTime=30s`、`retry=2`、指数退避；缓存接口数据与错误重试。\r\n- PDF.js配置：本地worker脚本路径 `/static/pdf.worker.min.js`；确保CORS允许；大文件按页加载与占位提示。\r\n- 树加载：分页/懒加载/虚拟滚动结合；每层最多加载 200 节点，超出分页请求后端。\r\n- 测试计划：\r\n  - 后端：各格式解析与TOON生成单元/集成测试；错误与降级用例；EBNF语法校验测试。\r\n  - 前端：预览渲染与交互回归测试；大数据性能用例；状态管理与错误提示一致性测试。\r\n- 持久化：`DocumentRepository` 默认落地 PostgreSQL；支持内存模式用于小规模或故障降级。\r\n- 前端错误体验与降级：损坏文件或不支持预览时显示统一错误页与操作建议；提供“查看原始TOON”回退。\r\n- ETag/Last-Modified 协同：前端请求携带 `If-None-Match/If-Modified-Since`；React Query 根据304直接复用缓存并跳过重试。\r\n\r\n## 附录 C. 树接口分页契约示例\r\n\r\n- 请求：`GET /api/v1/document/tree?path=/opt/docs&depth=1&page=1&size=200`\r\n- 返回：`DirectoryTree` 仅包含当前层 `subDirs/documents` 的分页片段，并附 `metadata{total,page,size}` TOON块或JSON元数据。\r\n- 交互：\r\n  - 展开节点时按需请求下一层；若节点子项超过 `size`，显示“加载更多”并继续分页。\r\n  - 前端虚拟滚动仅渲染可视区域；移除离屏节点；缓存已加载段落。\r\n  - 排序：默认按 `dirName/fileName` 字典序；可选 `fileType/lastModifiedTime`。\r\n\r\n## 附录 D. TOON 示例集与单测清单\r\n\r\n- 示例集：为 CSV/MD/DOCX/PDF/SVG 各提供至少3个复杂场景示例（中文/空值/转义/大集合分页）。\r\n- 单测：\r\n  - 语法校验：转义合法性、分隔符、块计数一致性、编码为UTF-8。\r\n  - 解析一致性：`fields/data/toonString` 对齐；降级块生成规则；分页合并一致性。\r\n  - 边界用例：损坏文件、非UTF-8、超长字段、嵌套列表/表格。\r\n\r\n## 23. 持久化模型（data目录TOON方案）\r\n\r\n- 索引文件：`data/index.toon`，内容为 `files[count]{path,type,name}` 块与 `metadata{total,last_updated,root}` 块。\r\n- JSON派生：`data/index.json`（可选），内容为 `FilesIndex` 数组，便于前端树加载与缓存。\r\n- 更新时间：`data/last_updated.txt`（可选），记录北京时间ISO-8601字符串，便于运维观察。\r\n- 生成策略：手动/定时扫描生成，命中缓存则复用；变更检测到后重写文件并更新ETag。\r\n- 读取策略：API优先读取 `index.toon`；前端可选择直接请求TOON或JSON派生。\r\n\r\n## 24. 管理与运维接口\r\n\r\n- `POST /api/v1/admin/rescan`（全量或指定目录重扫，更新 `data/index.*`）。\r\n- `POST /api/v1/admin/cache/clear?filePath=...`（清除单文件预览缓存，与索引无关）。\r\n- `GET /api/v1/admin/status`（查看任务队列、缓存命中率与 `index.toon` 更新时间）。\r\n- 访问控制：默认仅本地或白名单IP允许；可后续接入令牌校验。\r\n\r\n## 25. 本地化与时间格式\r\n\r\n- 错误消息默认中文，支持英文回退：`locale` 字段返回当前语言。\r\n- 时间统一使用北京时间ISO-8601，带时区偏移 `+08:00`；用于 `metadata` 与日志。\r\n\r\n## 26. 参数默认值与配置表（节选）\r\n\r\n- `app.scan.root-dirs`：数组，默认空，示例 `[/opt/docs,/opt/images]`\r\n- `app.scan.cron`：扫描周期（CRON），默认每小时\r\n- `app.data.dir`：索引持久化目录，默认 `./data`\r\n- `preview.pdf.max-pages-per-request`：单次最大页数，默认20\r\n- `gateway.response.supported-accepts`：`application/json,application/x-toon,*/*`\r\n- `gateway.rate-limit.ip.per-minute`：默认120\r\n- `gateway.rate-limit.ip.burst`：默认30\r\n- `cache.toon.ttl`：默认3600秒\r\n- `cache.preview.ttl`：默认600秒（大文件）\r\n\r\n## 27. 术语对照与一致性清单\r\n\r\n- 术语对照：\r\n  - 目录（Directory/Folder）→ `dirPath/dirName`\r\n  - 文档（Document/File）→ `filePath/fileName/fileType`\r\n  - TOON结构（TOONStructure）→ `rootNode/elementCount/fields/data/toonString`\r\n  - 预览（Preview）→ `PreviewContent`\r\n- 一致性检查：\r\n  - 字段命名在前后端、持久化与TOON中一致\r\n  - 时间格式统一为北京时间ISO-8601（`+08:00`）\r\n  - 路径为Linux风格，UTF-8编码，NFC规范化\r\n  - 错误码与HTTP映射一致，统一错误响应结构\r\n  - 缓存键命名、TTL与失效触发一致\r\n\r\n## 28. 需求覆盖评估\r\n\r\n- 覆盖项：\r\n  - 指定目录全量枚举与中文路径：由扫描模块与`files`索引TOON规范覆盖（含Linux路径与符号链接治理）。\r\n  - 索引持久化与加载：`data/index.toon`（必选）与`index.json`（可选）及对应API覆盖。\r\n  - 树展示与预览适配：React前端与五类预览器（md/docx/pdf/csv/svg）覆盖；错误统一降级与提示。\r\n  - 治理与运行保障：路径与编码、安全、错误、缓存、限流、监控、稳定性策略覆盖。\r\n  - 运维与管理：`admin/rescan/status/cache`接口覆盖索引更新与状态可观测。\r\n- 差距与建议：\r\n  - `.xlsx` 仅列于索引样例，当前“预览不支持”（不在五类之内）。建议：V2引入轻量预览（只读表格前N行）或标注“仅下载不预览”。\r\n  - 索引搜索/筛选：Story Map中为可选，当前规范未定义API参数。建议：前端本地筛选为先，必要时提供`GET /index/search?q=`。\r\n  - 索引规模极大（>10万项）分页：目前通过JSON派生与前端虚拟滚动缓解，建议后续提供分片索引（`index.part-N.toon`）。\r\n  - 缺失文件或`index.toon`不存在的降级：建议在API与前端加入“空索引占位”与重扫引导。\r\n  - 无登录与权限控制：按需求刻意不覆盖；如后续公开部署需考虑只读令牌与审计。\r\n- 结论：就“展示指定目录并持久化为TOON索引、提供预览”核心需求而言，规范已覆盖端到端路径与非功能治理；已知差距集中在`.xlsx`预览与搜索/大规模索引的增强项，可按版本切片推进。\r\n\r\n## 附录 E. DDD 完整链路图（Mermaid）\r\n\r\n```mermaid\r\n%% -------------- DDD 完整链路 -------------- \r\ngraph TB\r\n    %% ========== 0. 前期对齐 ==========\r\n    A0[0.组建跨职能战队<br/>对齐业务愿景] --> A1\r\n\r\n    %% ========== 1. 用户旅程 ==========\r\n    A1([1.用户旅程工作坊<br/>User Journey Mapping])\r\n    A1 -->|输出| A1_OUT1[用户旅程图<br/>痛点 & 机会]\r\n    A1_OUT1 -->|输出| A1_OUT2[角色 Persona]\r\n\r\n    %% ========== 2. 用户故事地图 ==========\r\n    A1 --> A2([2.用户故事地图<br/>Story Mapping])\r\n    A2 -->|输出| A2_OUT1[故事地图墙<br/>Epic → Story → Task]\r\n    A2 -->|输出| A2_OUT2[故事卡<br/>As-Who-Want-What]\r\n    A2 -->|输出| A2_OUT3[验收标准 AC<br/>Given-When-Then]\r\n\r\n    %% ========== 3. 事件风暴 ==========\r\n    A2_OUT2 --> B0([3.事件风暴<br/>Event Storming])\r\n    B0 -->|每张故事卡| B0_LINK[故事卡 ←→ 领域事件]\r\n    B0 -->|贴纸墙| B0_STEP1[橙色：领域事件]\r\n    B0_STEP1 --> B0_STEP2[蓝色：命令]\r\n    B0_STEP2 --> B0_STEP3[黄色：聚合候选]\r\n    B0_STEP3 --> B0_STEP4[红色：热点/矛盾]\r\n    B0 -->|输出| B0_OUT1[事件流大图]\r\n    B0 -->|输出| B0_OUT2[命令-事件-聚合表]\r\n\r\n    %% ========== 4. 战略设计 ==========\r\n    B0_OUT2 --> C1([4.划分限界上下文])\r\n    C1 -->|输出| C1_OUT[BC图 + 上下文映射]\r\n    C1_OUT --> C2([5.建立通用语言])\r\n    C2 -->|输出| C2_DICT[术语词典 + 代码词汇表]\r\n\r\n    %% ========== 5. 战术设计 ==========\r\n    C2_DICT --> D1([6.战术建模])\r\n    D1 --> D1_ENT[实体 Entity]\r\n    D1 --> D1_AR[聚合根 Aggregate Root]\r\n    D1 --> D1_VO[值对象 Value Object]\r\n    D1 --> D1_DS[领域服务 Domain Service]\r\n    D1 --> D1_REPO[仓储 Repository]\r\n    D1 --> D1_SPEC[规约 Specification]\r\n    D1 -->|输出| D1_MODEL[战术模型图 + 类图]\r\n\r\n    %% ========== 6. 敏捷迭代：故事 → 任务 → 代码 ==========\r\n    D1_MODEL --> E1[7.迭代 backlog]\r\n    E1 --> E2[8.故事卡拆任务]\r\n    E2 --> E3[9.TDD / 单元测试]\r\n    E3 --> E4[10.持续集成]\r\n    E4 --> E5[11.演示 & 验收]\r\n\r\n    %% ========== 7. 需求变更闭环 ==========\r\n    F1([12.新需求 / 变更]) --> F2[ diff 事件流 ]\r\n    F2 --> F3[快速定位受影响的聚合]\r\n    F3 --> F4[更新故事卡 & AC]\r\n    F4 --> E1\r\n    F4 --> B0\r\n\r\n    %% -------------- 样式定义 --------------\r\n    classDef workshop fill:#FFEAA7,stroke:#333,stroke-width:2px\r\n    classDef output fill:#D1F2EB,stroke:#333\r\n    classDef story fill:#FDEDEC,stroke:#333\r\n    classDef change fill:#FADBD8,stroke:#333\r\n    classDef role fill:#EAF2F8,stroke:#333\r\n\r\n    class A1,A2,B0,C1,C2,D1 workshop\r\n    class A1_OUT1,A1_OUT2,A2_OUT1,A2_OUT2,A2_OUT3,B0_OUT1,B0_OUT2,C1_OUT,C2_DICT,D1_MODEL output\r\n    class E1,E2,E3,E4,E5 story\r\n    class F1,F2,F3,F4 change\r\n    class P1,P2,P3,P4,P5,P6 role",
  "size" : 58324,
  "modifiedAt" : 1764639821602,
  "id" : "技术案例/Web预览系统产品设计.md",
  "content" : "# 文档TOON结构生成与Web预览系统 - 统一产品设计文档（DDD + Spring Cloud + React）\r\n\r\n作者：伍志勇\r\n日期（北京时间）：2025-11-24 16:34:42\r\n版本：v1.0\r\n\r\n## 1. 产品概述\r\n\r\n- 目标：展示指定目录（示例 `/home/agentic/hkt-knowledge`）的全部子目录与文档清单；生成并持久化索引TOON数据到本地 `data/` 目录（不使用PostgreSQL）；左侧树展示结构，右侧预览文档内容。\r\n- 范围：完整枚举目录与文件（支持中文名与Linux路径）；文件预览支持 `.md/.docx/.pdf/.csv/.svg`。\r\n- 核心特性：索引TOON（`files` 块）生成与读取、树状展示、类型识别与预览、缓存与治理。\r\n- 场景：内部/公开文档库的轻量化展示与快速检索。\r\n\r\n## 2. 统一语言与术语（Ubiquitous Language）\r\n\r\n- 目录（Directory/Folder）：以`dirPath/dirName`表示的层级节点\r\n- 文档（Document/File）：以`filePath/fileName/fileType`表示的文件实体\r\n- TOON（面向词元的对象表示法）：结构化块表示，含`fields/data/toonString`\r\n- 预览（Preview）：以`PreviewContent`呈现的可视内容（HTML/PDF/SVG）\r\n\r\n## 3. 领域驱动设计（DDD）\r\n\r\n### 3.1 用户旅程工作坊（User Journey Mapping）\r\n\r\n- 输出：用户旅程图、痛点/机会点、角色与场景列表\r\n\r\n#### 3.1.1 角色（Persona）\r\n\r\n- 访客：浏览与预览文档，不进行上传/下载。\r\n- 管理员：触发重扫、查看状态、清理缓存，保障索引与预览稳定。\r\n\r\n#### 3.1.2 旅程阶段（Stages）\r\n\r\n- 进入应用 → 加载索引（`index.toon/json`） → 浏览树（展开/折叠） → 筛选与定位（关键字/类型过滤） → 点击文档 → 预览渲染（md/docx/pdf/csv/svg） → 错误与降级提示 → 管理操作（重扫/状态/清缓存）。\r\n\r\n#### 3.1.3 痛点与机会点（Pain & Opportunities）\r\n\r\n- 痛点：\r\n  - 大目录加载与渲染性能瓶颈（滚动卡顿、一次性渲染过多节点）。\r\n  - 多语言路径与中文字符的兼容性问题（编码与规范化）。\r\n  - 部分格式解析失败或不支持（例如复杂DOCX或超大PDF）。\r\n  - 索引刷新后前端状态一致性（缓存失效与ETag协同）。\r\n- 机会：\r\n  - 采用TOON高效索引与分页分块，减少传输体积与渲染压力。\r\n  - 树懒加载与虚拟滚动、按需加载预览器，显著提升体验。\r\n  - 统一错误与降级策略，保证“可视化回退”与操作指引。\r\n  - 管理接口支持重扫与状态观察，形成闭环运维能力。\r\n\r\n#### 3.1.4 场景清单（Scenarios）\r\n\r\n- 场景1：首次进入应用 → 自动加载`index.toon` → 左侧树显示根目录与首层节点。\r\n- 场景2：展开目录节点 → 按需请求下一层数据 → 渲染子目录与文档列表。\r\n- 场景3：关键字筛选 → 过滤`name/path`，高亮命中项 → 清空筛选恢复。\r\n- 场景4：点击`.md`文档 → 前端`marked`渲染 → 支持标题目录与代码高亮。\r\n- 场景5：点击`.pdf`文档 → 后端流式返回 → 前端`pdfjs`分页渲染与缩放。\r\n- 场景6：点击`.docx`文档 → 根据决策矩阵选择前端`mammoth`或后端POI → 输出HTML预览。\r\n- 场景7：点击`.csv`文档 → `papaparse`解析 → 表格排序与列宽调整。\r\n- 场景8：点击`.svg`文档 → 直接嵌入`<svg>` → 安全过滤可疑脚本。\r\n- 场景9：预览失败（解析或资源限制） → 显示降级内容或错误页 → 提供“查看原始TOON”。\r\n- 场景10：管理员在状态页触发重扫 → `data/index.toon`更新时间刷新 → 前端树自动刷新或提示手动刷新。\r\n\r\n### 3.2 事件风暴（Event Storming）摘要\r\n\r\n- 业务目标：从指定根目录快速构建可浏览的索引TOON，并按需预览文档。\r\n- 关键事件（Domain Events）：\r\n  - `IndexRequested`（用户/系统发起索引请求）\r\n  - `DirectoryScanned`（目录被遍历完成，发现条目）\r\n  - `ItemEnumerated`（发现目录/文件条目）\r\n  - `IndexPersisted`（索引TOON写入 `data/index.toon` 完成）\r\n  - `IndexLoaded`（前端/API读取索引TOON或JSON派生）\r\n  - `PreviewRequested`（预览请求到达）\r\n  - `PreviewRendered`（预览成功生成）\r\n  - `PreviewFailed`（预览失败，触发降级与错误事件）\r\n  - `RescanTriggered`（运维或配置变更触发重扫）\r\n  - `CacheInvalidated`（扫描变更导致缓存失效）\r\n- 命令（Commands）：`TriggerScan`、`PersistIndex`、`LoadIndex`、`RenderPreview`、`InvalidateCache`、`TriggerRescan`。\r\n- 聚合与读模型：\r\n  - 聚合：`DocumentRepository`（统一维护文件与目录条目、元数据）\r\n  - 读模型：`FilesIndex`（TOON/JSON）、`DirectoryTree`（派生树）、`PreviewContent`\r\n- 策略/规则（Policies）：\r\n  - 配置变更 → 触发 `TriggerRescan`\r\n  - 扫描完成 → `PersistIndex` → 通知前端刷新\r\n  - 预览失败 → 生成降级TOON块或错误响应\r\n- 外部系统：文件系统（Linux）、Redis（缓存）、Config Server（配置）、Nginx（入口）、Prometheus/Grafana（监控）。\r\n- 端到端路径（示例）：\r\n  - 用户打开页面 → `IndexRequested` → 后端`TriggerScan`（或直接`IndexLoaded`）→ 生成并`PersistIndex` → 前端树加载 → 用户点击文件 → `PreviewRequested` → `RenderPreview` → 展示或降级。\r\n\r\n#### 3.2.1 DDD 完整链路图（Mermaid）\r\n\r\n- 迁移说明：该图已移至“附录 E. DDD 完整链路图（Mermaid）”。\r\n\r\n### 3.3 划分限界上下文（Context Slicing）\r\n\r\n- 规则：语言边界、业务一致性、团队边界\r\n- 输出：限界上下文图（Context Map）\r\n\r\n#### 3.3.1 上下文清单（Bounded Contexts）\r\n\r\n- 文档（Document）：负责文档实体、目录树读模型与TOON结构的对外暴露。\r\n- 扫描（Scan）：负责遍历与索引生成、持久化`data/index.toon/index.json`。\r\n- 预览（Preview）：负责类型适配与内容生成（HTML/PDF/SVG）。\r\n- 网关（Gateway）：统一入口、CORS、限流、错误映射与内容协商。\r\n\r\n#### 3.3.2 边界描述（Boundary）\r\n\r\n- Document：\r\n  - 输入：来自Scan的索引、来自Preview的渲染请求。\r\n  - 输出：`DirectoryTree`、`FilesIndex`、`TOONStructure`。\r\n  - 自有模型：`Document`、`FileMetadata`、`TOONStructure`、`DirectoryTree`。\r\n  - 非功能：读取`data`目录只读；缓存命中直接返回；统一错误结构。\r\n- Scan：\r\n  - 输入：配置根目录（Config Server）、重扫命令（Admin）。\r\n  - 输出：`index.toon`与`index.json`、`metadata`更新时间。\r\n  - 自有模型：扫描任务、黑白名单、符号链接校验策略。\r\n  - 非功能：文件系统I/O与并发控制、去重与原子写入、指标监控。\r\n- Preview：\r\n  - 输入：`filePath`与类型参数。\r\n  - 输出：`PreviewContent`（HTML/PDF/SVG）。\r\n  - 自有模型：解析适配器、降级策略、资源限制（线程/内存/超时）。\r\n  - 非功能：安全过滤、内容类型协商、HTTP Range支持。\r\n- Gateway：\r\n  - 输入：前端请求。\r\n  - 输出：路由到各BC、统一错误映射、`ETag/Last-Modified`处理。\r\n  - 自有模型：CORS白名单、限流令牌桶、受支持`Accept`集合。\r\n  - 非功能：日志与审计、告警与熔断策略（可选）。\r\n\r\n#### 3.3.3 防腐层与契约（ACL & Contract）\r\n\r\n- Preview对复杂库（PDFBox/POI）设置适配接口，隔离库细节，返回统一`PreviewContent`。\r\n- Gateway对外统一MIME与错误结构；`Accept: application/x-toon`直通TOON契约；`application/json`返回结构化对象。\r\n- Document与Scan之间采用`index.toon/json`文件契约；更新时间通过`metadata.last_updated`传递。\r\n\r\n#### 3.3.4 团队边界\r\n\r\n- Scan与Preview可由后端团队维护；Document由后端与前端共同维护读模型；Gateway由平台/架构组维护。\r\n\r\n### 3.4 上下文映射（Context Mapping）\r\n\r\n- 模式：合作关系、共享内核、客户-供应商、防腐层ACL、开放主机服务\r\n- 输出：上下文映射图\r\n\r\n#### 3.4.1 关系矩阵（Relationship Matrix）\r\n\r\n- Document ↔ Scan：客户-供应商（Customer–Supplier）。Document消费Scan产出的索引；Scan遵循约定的TOON契约与更新时间规则。\r\n- Document ↔ Preview：开放主机服务（Open Host Service）。Document发起`RenderPreview`调用，Preview暴露统一接口与MIME；失败时返回统一错误结构。\r\n- Gateway ↔ 各BC：开放主机服务 + 防腐层（ACL）。Gateway只曝光稳定契约与错误映射；对内部对象进行DTO转换。\r\n\r\n#### 3.4.2 协作模式说明\r\n\r\n- Published Language：跨上下文统一采用`TOONStructure/PreviewContent/DirectoryTree/FilesIndex`术语与字段命名，避免翻译歧义。\r\n- Anti-Corruption Layer：Preview内部适配第三方解析库；Gateway对外统一MIME与错误；Document保持读模型纯净。\r\n- Shared Kernel（谨慎）：仅在通用工具层共享TOON校验器与时间/路径规范工具，业务模型不共享。\r\n\r\n#### 3.4.3 故障与降级路径\r\n\r\n- Scan失败：保留最近一次`index.toon`并标注`metadata`为旧时间；前端提示“索引可能不是最新”。\r\n- Preview失败：返回降级TOON或错误；前端提供“查看原始TOON”与“稍后重试”。\r\n- Gateway限流：返回429与`Retry-After`，避免雪崩；记录`traceId`与指标。\r\n\r\n#### 3.4.4 一致性与刷新\r\n\r\n- 索引刷新：`IndexPersisted`事件广播（可选）或前端轮询`last_updated`；命中ETag返回304。\r\n- 读写分离：Scan写`data/*`，Document读`data/*`；通过文件锁或原子替换保证一致性。\r\n\r\n### 3.5 建立通用语言（Ubiquitous Language）\r\n\r\n- 指引：术语统一见第2章；代码词汇表见第27章\r\n\r\n#### 3.5.1 角色词汇表\r\n\r\n- 访客（Visitor）：浏览索引、查看预览、不进行写操作。\r\n- 管理员（Admin）：触发重扫、查看运行状态、清理缓存。\r\n\r\n#### 3.5.2 场景词汇表\r\n\r\n- 浏览索引：加载`index.toon/json`并渲染树。\r\n- 展开节点：获取指定目录的子项并渲染。\r\n- 筛选搜索：按`name/path`过滤并高亮命中。\r\n- 预览渲染：根据`fileType`选择适配器生成`PreviewContent`。\r\n- 错误降级：当解析失败时渲染降级内容或错误页。\r\n- 管理重扫：管理员触发重新扫描根目录或子树。\r\n\r\n#### 3.5.3 示例用语（Examples）\r\n\r\n- 作为访客，我希望能快速加载文档树并展开我关心的目录。\r\n- 作为访客，当我点击文档时，系统应返回对应的预览内容或清晰的错误提示。\r\n- 作为管理员，我希望在索引过期或结构变化时，能够一键触发重扫并查看最新更新时间。\r\n\r\n#### 3.5.4 代码词汇一致性\r\n\r\n- 接口与模型统一使用：`filePath/fileName/fileType`、`TOONStructure`、`PreviewContent`、`DirectoryTree`、`FilesIndex`。\r\n- 错误统一：`ErrorResponse{code,message,traceId,details}`；日志包含`traceId`便于定位。\r\n\r\n### 3.6 战术设计（Tactical Modeling）\r\n\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 待补充：战术模型图与类图（ToDo）\r\n\r\n#### 3.6.1 核心领域与聚合\r\n\r\n- 聚合根：`DocumentRepository`，负责文档实体生命周期管理（创建、查询、更新、删除）。\r\n- 上下文划分：\r\n  - 文档领域（核心）：文档实体、TOON结构、文件元数据。\r\n  - 扫描领域：扫描任务与结果，目录遍历与目标格式识别。\r\n  - 预览领域：预览内容生成与格式适配。\r\n\r\n#### 3.6.2 实体与值对象\r\n\r\n- 实体 `Document`（唯一标识 `filePath`）：\r\n  - 属性：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure`（懒加载）、`previewContent`（懒加载）。\r\n- 值对象：\r\n  - `FileMetadata`：`fileSize`、`lastModifiedTime`、`charset`（默认UTF-8）。\r\n  - `TOONStructure`：`rootNode`、`elementCount`、`fields`（List<String>）、`data`（List<Map<String,Object>>）、`toonString`（标准TOON字符串）。\r\n  - `PreviewContent`：`contentType`（text/html、application/pdf、image/svg+xml 等）、`content`（HTML字符串/二进制流/SVG文本）、`supportFullPreview`（boolean）。\r\n  - `DirectoryTree`：`dirPath`、`dirName`、`subDirs`（List<DirectoryTree>）、`documents`（List<DocumentSummary>）。\r\n  - `DocumentSummary`：`filePath`、`fileName`、`fileType`、`fileSize`。\r\n\r\n#### 3.6.3 领域服务\r\n\r\n- `ScanService`：遍历根目录与子目录，识别目标格式、生成 `FileMetadata`，更新仓库。\r\n- `TOONGenerationService`：按文档格式提取结构化数据并生成 `TOONStructure`。\r\n- `PreviewService`：将文档转换为Web可展示的 `PreviewContent`（HTML/PDF/SVG）。\r\n\r\n#### 3.6.4 领域事件\r\n\r\n- 事件（可选）：`DocumentScannedEvent`（扫描完成）、`PreviewRequestedEvent`（预览请求）。\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 参考：3.2 实体与值对象；3.3 领域服务\r\n\r\n#### 3.6.5 战术模型图与类图（文本草案）\r\n\r\n- 实体与值对象：\r\n  - `Document`（Entity）：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure?`、`previewContent?`\r\n  - `FileMetadata`（ValueObject）：`fileSize`、`lastModifiedTime`、`charset`\r\n  - `TOONStructure`（ValueObject）：`rootNode`、`elementCount`、`fields: List<String>`、`data: List<Map<String,Object>>`、`toonString`\r\n  - `PreviewContent`（ValueObject）：`contentType`、`content`、`supportFullPreview`\r\n  - `DirectoryTree`（ValueObject）：`dirPath`、`dirName`、`subDirs: List<DirectoryTree>`、`documents: List<DocumentSummary>`\r\n- 仓储（Repository）：\r\n  - `DocumentRepository`：`findByPath(filePath)`、`save(document)`、`listByDir(dirPath)`、`updateMetadata(filePath, metadata)`\r\n- 领域服务（Domain Service）：\r\n  - `ScanService`：`scan(rootDirs)`、`enumerate(dirPath)`、`persistIndex(dataDir)`\r\n  - `TOONGenerationService`：`fromMd(filePath)`、`fromCsv(filePath)`、`fromDocx(filePath)`、`fromPdf(filePath)`、`fromSvg(filePath)`\r\n  - `PreviewService`：`render(filePath)`（返回`PreviewContent`）\r\n- 工厂与规约（Factory & Specification）：\r\n  - `PreviewAdapterFactory`：按`fileType`返回适配器。\r\n  - `IndexSpecification`：黑白名单、符号链接、编码规范校验。\r\n- 交互关系：\r\n  - 应用层调用`ScanService`生成索引，持久化到`data/index.*`；\r\n  - 应用层调用`PreviewService`产出`PreviewContent`；\r\n  - Document聚合通过`DocumentRepository`装载与更新实体，保持读模型与索引文件一致。\r\n\r\n（Mermaid 可视化）\r\n\r\n```mermaid\r\nclassDiagram\r\ndirection TB\r\n\r\nclass Document {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +parentDir: String\r\n  +fileMetadata: FileMetadata\r\n  +toonStructure: TOONStructure\r\n  +previewContent: PreviewContent\r\n}\r\n\r\nclass FileMetadata {\r\n  +fileSize: long\r\n  +lastModifiedTime: Instant\r\n  +charset: String\r\n}\r\n\r\nclass TOONStructure {\r\n  +rootNode: String\r\n  +elementCount: int\r\n  +fields: List<String>\r\n  +data: List<Map<String,Object>>\r\n  +toonString: String\r\n}\r\n\r\nclass PreviewContent {\r\n  +contentType: String\r\n  +content: Any\r\n  +supportFullPreview: boolean\r\n}\r\n\r\nclass DirectoryTree {\r\n  +dirPath: String\r\n  +dirName: String\r\n  +subDirs: List<DirectoryTree>\r\n  +documents: List<DocumentSummary>\r\n}\r\n\r\nclass DocumentSummary {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +fileSize: long\r\n}\r\n\r\nclass DocumentRepository {\r\n  +findByPath(filePath: String): Document\r\n  +save(document: Document): void\r\n  +listByDir(dirPath: String): List<DocumentSummary>\r\n  +updateMetadata(filePath: String, metadata: FileMetadata): void\r\n}\r\n\r\nclass ScanService {\r\n  +scan(rootDirs: List<String>): void\r\n  +enumerate(dirPath: String): List<FilesIndexItem>\r\n  +persistIndex(dataDir: String): void\r\n}\r\n\r\nclass TOONGenerationService {\r\n  +fromMd(filePath: String): TOONStructure\r\n  +fromCsv(filePath: String): TOONStructure\r\n  +fromDocx(filePath: String): TOONStructure\r\n  +fromPdf(filePath: String): TOONStructure\r\n  +fromSvg(filePath: String): TOONStructure\r\n}\r\n\r\nclass PreviewService {\r\n  +render(filePath: String): PreviewContent\r\n}\r\n\r\nclass PreviewAdapterFactory {\r\n  +getAdapter(fileType: FileType): PreviewAdapter\r\n}\r\n\r\nclass PreviewAdapter\r\nclass MdAdapter\r\nclass PdfAdapter\r\nclass DocxAdapter\r\nclass CsvAdapter\r\nclass SvgAdapter\r\n\r\nDocument *-- FileMetadata\r\nDocument o-- TOONStructure\r\nDocument o-- PreviewContent\r\nDirectoryTree o-- DocumentSummary\r\nDocumentRepository ..> Document : load/save\r\nScanService ..> DocumentRepository : enumerate/listByDir\r\nScanService ..> DirectoryTree : derive\r\nTOONGenerationService ..> TOONStructure\r\nPreviewService ..> PreviewContent\r\nPreviewService ..> PreviewAdapterFactory\r\nPreviewAdapterFactory ..> PreviewAdapter\r\nPreviewAdapter <|.. MdAdapter\r\nPreviewAdapter <|.. PdfAdapter\r\nPreviewAdapter <|.. DocxAdapter\r\nPreviewAdapter <|.. CsvAdapter\r\nPreviewAdapter <|.. SvgAdapter\r\n```\r\n\r\n### 3.2.2 命令-事件-聚合表（草案）\r\n\r\n\r\n| 业务动作   | 命令              | 触发条件           | 领域事件                                              | 聚合/读模型            | 备注                                                  |\r\n| ---------- | ----------------- | ------------------ | ----------------------------------------------------- | ---------------------- | ----------------------------------------------------- |\r\n| 索引扫描   | `TriggerScan`     | 用户/定时/配置变更 | `DirectoryScanned`、`ItemEnumerated`                  | `DocumentRepository`   | 生成`FilesIndex`候选；跳过隐藏/黑名单                 |\r\n| 持久化索引 | `PersistIndex`    | 扫描完成           | `IndexPersisted`                                      | `DocumentRepository`   | 写入`data/index.toon`与`metadata`；可派生`index.json` |\r\n| 加载索引   | `LoadIndex`       | 前端或API请求      | `IndexLoaded`                                         | `FilesIndex`（读模型） | 返回TOON或JSON，支持内容协商                          |\r\n| 请求预览   | `RenderPreview`   | 用户点击文件       | `PreviewRequested`、`PreviewRendered`/`PreviewFailed` | `PreviewService`       | 支持md/docx/pdf/csv/svg；失败降级                     |\r\n| 清缓存     | `InvalidateCache` | 管理操作/变更检测  | `CacheInvalidated`                                    | Cache层                | 失效`toon:`/`preview:`键；ETag刷新                    |\r\n| 触发重扫   | `TriggerRescan`   | Admin接口调用      | `RescanTriggered`                                     | `ScanService`          | 全量或增量；更新`last_updated`                        |\r\n\r\n### 3.3.1 限界上下文图（草案表格）\r\n\r\n\r\n| 上下文（BC）     | 职责                        | 上游             | 下游             | 关系模式                 | 防腐层                 | UL关键词                                     |\r\n| ---------------- | --------------------------- | ---------------- | ---------------- | ------------------------ | ---------------------- | -------------------------------------------- |\r\n| 文档（Document） | 文档实体/TOON/目录树读模型  | 扫描（Scan）     | 预览（Preview）  | 客户-供应商（对Scan）    | 路径/编码规范；DTO映射 | `filePath`、`TOONStructure`、`DirectoryTree` |\r\n| 扫描（Scan）     | 遍历与索引生成、持久化index | Config Server    | 文档（Document） | 开放主机服务（暴露索引） | 黑白名单/符号链接校验  | `files[count]{path,type,name}`、`metadata`   |\r\n| 预览（Preview）  | 各类型预览内容生成          | 文档（Document） | 网关/前端        | 防腐层（对复杂格式库）   | 解析库接口封装         | `PreviewContent`、降级策略                   |\r\n| 网关（Gateway）  | 统一入口/CORS/限流          | 前端             | 各BC API         | 开放主机服务             | 统一错误映射           | `Accept`、`ETag`                             |\r\n\r\n### 3.7 实现（Code & UT）\r\n\r\n- 结构：模块-聚合-分层；接口层/应用层/领域层/基础设施层\r\n- 规约：业务规则单元测试、EBNF语法校验测试\r\n\r\n#### 3.7.1 关键模块清单（Backend）\r\n\r\n- `gateway`：路由、CORS、限流、错误映射、ETag处理。\r\n- `document-service`\r\n  - Controller：`DocumentController`（tree/toon/preview/scan/index接口）。\r\n  - Application：用例编排与事务控制（按目录粒度）。\r\n  - Domain：`ScanService`、`TOONGenerationService`、`PreviewService`、`DocumentRepository`。\r\n  - Infra：文件遍历器、TOON校验器、预览适配器（PDFBox/POI/OpenCSV等）。\r\n- `preview-worker`（可选）：队列消费者，异步执行重解析任务。\r\n\r\n#### 3.7.2 关键模块清单（Frontend）\r\n\r\n- 页面：`TreePage`（索引树与筛选）、`PreviewPage`（文档预览）、`AdminPage`（重扫与状态）。\r\n- 组件：`DirectoryTree`、`PreviewPane(md/pdf/docx/csv/svg)`、`SearchBar`、`StatusBadge`。\r\n- 状态：React Query 请求层、缓存策略与错误提示。\r\n\r\n#### 3.7.3 UT用例索引（Backend）\r\n\r\n- `ScanServiceTest`：\r\n  - 枚举跳过隐藏/黑名单；符号链接白名单校验；大目录性能阈值。\r\n  - `index.toon`生成与`metadata`时间格式（北京时区）。\r\n- `TOONGenerationServiceTest`：\r\n  - CSV/MD/DOCX/PDF/SVG五类解析一致性与转义校验；降级块生成。\r\n- `PreviewServiceTest`：\r\n  - 各类型适配与MIME；PDF Range分页；超时与内存限制保护。\r\n- `GatewayErrorMappingTest`：\r\n  - 错误码与HTTP映射；`traceId`传递；CORS预检缓存。\r\n\r\n#### 3.7.4 UT用例索引（Frontend）\r\n\r\n- `TreeRender.spec.tsx`：懒加载/虚拟滚动/分页段落；筛选与高亮。\r\n- `PreviewMd.spec.tsx`、`PreviewPdf.spec.tsx`、`PreviewDocx.spec.tsx`、`PreviewCsv.spec.tsx`、`PreviewSvg.spec.tsx`：渲染与错误降级。\r\n- `AdminRescan.spec.tsx`：重扫后更新时间刷新与提示。\r\n\r\n### 3.8 持续演进（Evolution）\r\n\r\n- 活动：领域事件回放、模型重构、定期事件风暴\r\n- 参考：12 运行保障；12 扩展性与演进\r\n\r\n#### 3.8.1 演进周期\r\n\r\n- 每周：事件风暴复盘（针对新增/变化的领域事件与命令），更新命令-事件-聚合表。\r\n- 每两周：Story Map梳理与迭代计划评审；MVP/V1/V2增量验收。\r\n- 每月：非功能指标回顾（`latency p95/p99`、`cache_hit_ratio`、`parse_success_rate`）与容量策略调整。\r\n\r\n#### 3.8.2 触发机制\r\n\r\n- 配置刷新（Config Server）：根目录或限流/缓存参数变更 → 增量/全量重扫（5分钟窗口）。\r\n- 文件系统事件（inotify）：新增/修改/删除 → 局部重扫与缓存失效。\r\n- 指标阈值：当`parse_success_rate`连续低于阈值或`api_latency_p99`升高 → 降级策略启用与资源上限调整。\r\n\r\n#### 3.8.3 版本演进\r\n\r\n- MVP → V1 → V2：对应“用户故事地图”的版本切片；优先保证索引浏览与`.md`预览，逐步引入其他格式与后台能力。\r\n\r\n#### 3.8.4 领域事件回放\r\n\r\n- 支持将扫描与预览关键步骤记录为事件流水，便于定位问题与重现；必要时对比两版索引差异（`diff index.toon`）。\r\n\r\n#### 3.8.5 风险与回退\r\n\r\n- 索引文件损坏或不可读：回退到最近一次可用索引并提示“索引可能过期”。\r\n- 预览解析崩溃：触发熔断与降级，限制并发与内存，记录失败样本用于事后分析。\r\n\r\n## 4. 架构设计（Spring Cloud + React）\r\n\r\n- 服务组件：\r\n  - `gateway`（统一入口、CORS策略、限流可选）。\r\n  - `eureka`（服务发现）。\r\n  - `config-server`（集中配置，含根目录数组与定时参数）。\r\n  - `document-service`（领域服务：扫描、TOON、预览API）。\r\n  - 可选 `preview-worker`（重解析任务异步化：PDF/DOCX转HTML）。\r\n- 技术选型：\r\n  - 后端：Java 17、Spring Boot 3、Lombok（简化）、POI（docx）、PDFBox（pdf）、OpenCSV（csv）、Tika（类型识别）、Redis（缓存）。\r\n  - 前端：React 18、TypeScript、Ant Design 5、Vite；预览库：`marked`（md）、`pdfjs-dist`（pdf）、`mammoth`（docx）、`papaparse`（csv）、原生`<svg>`（svg）。\r\n  - 部署：Docker、Nginx（负载均衡）、Jenkins + GitLab（CI/CD）、Kubernetes（可选）；监控：Prometheus + Grafana；日志：ELK。\r\n- 依赖关系：接口层（Web/网关）→ 应用层（用例编排）→ 领域层（模型与服务）→ 基础设施层（文件系统与解析库）。\r\n\r\n## 5. TOON语法规范\r\n\r\n- 语法范式：`blockName[count]{field1,field2,...}: record1; record2; ...`\r\n- 记录表达：每条记录为逗号分隔的字段值；记录间以分号或换行分隔；允许空值（空字符串）。\r\n- 转义规则：值中包含逗号/分号/换行时使用 `\\,` `\\;` `\\n`；反斜杠使用 `\\\\`；统一UTF-8编码。\r\n- 多块输出：响应可包含多个块，按语义顺序组织，例如：\r\n  - `directories[2]{path}: /docs; /images`\r\n  - `documents[3]{id,name,path,type}: 1,readme.md,/docs/readme.md,md; 2,report.docx,/docs/report.docx,docx; 3,data.csv,/data/data.csv,csv`\r\n- 元数据块：`metadata{total,last_updated,page,size}: 3,2025-11-24T11:27:16+08:00,1,100`（时间统一为北京时间，ISO-8601）。\r\n- 令牌优化：字段顺序固定；避免冗余键；尽量合并表头/重复值；非必要标点禁止；大集合按分页块分段返回。\r\n- 兼容性：中文目录/文档名与中文字段值允许；统一UTF-8；建议使用NFC规范化。\r\n- EBNF描述：\r\n  - `block ::= name '[' count ']' '{' fields '}' ':' records`\r\n  - `fields ::= field { ',' field }`\r\n  - `records ::= record { (';' | NEWLINE) record }`\r\n  - `record ::= value { ',' value }`\r\n  - `value ::= TEXT | ESCAPED`\r\n- `ESCAPED ::= '\\\\,' | '\\\\;' | '\\\\n' | '\\\\\\\\'`\r\n- `name, field, TEXT 采用 UTF-8；推荐NFC规范化`\r\n\r\n### 5.1 索引TOON（files块）规范\r\n\r\n- 目的：持久化指定根目录的目录与文件枚举，供Web应用加载展示。\r\n- 语义：`files[count]{path,type,name}:` 后接按行/分号分隔的记录；`type` 取 `directory|file`；`path` 为相对根的Linux风格路径；`name` 为条目名。\r\n- 元数据：附加 `metadata{total,last_updated,root}: count,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n- 示例：\r\n  - `files[12]{path,type,name}:`\r\n  - `hkt-knowledge/,directory,hkt-knowledge`\r\n  - `hkt-knowledge/hkt-product/,directory,hkt-product`\r\n  - `hkt-knowledge/hkt-product/hkt-agentic/,directory,hkt-agentic`\r\n  - `hkt-knowledge/hkt-product/industrial-brain/,directory,industrial-brain`\r\n  - `hkt-knowledge/hkt-project/,directory,hkt-project`\r\n  - `hkt-knowledge/hkt-project/docs/,directory,docs`\r\n  - `hkt-knowledge/hkt-project/docs/gitlab流水线触发指南.md,file,gitlab流水线触发指南.md`\r\n  - `hkt-knowledge/hkt-project/docs/会议纪要模版.md,file,会议纪要模版.md`\r\n  - `hkt-knowledge/hkt-project/docs/孚盟学习网址.md,file,孚盟学习网址.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.md,file,客户地理位置分布.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.xlsx,file,客户地理位置分布.xlsx`\r\n  - `hkt-knowledge/hkt-project/docs/广告推广国家.md,file,广告推广国家.md`\r\n  - `hkt-knowledge/test-document.md,file,test-document.md`\r\n  - `metadata{total,last_updated,root}: 12,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n\r\n## 6. 功能模块设计\r\n\r\n### 6.1 扫描模块\r\n\r\n- 配置根目录（单/多），在 `config-server` 配置，如 `app.scan.root-dirs=[\"/home/agentic/hkt-knowledge\"]`；默认取第一个根进行索引持久化。\r\n- 支持手动触发与定时扫描（默认每1小时，可配置）；跳过隐藏文件/目录（如 `.git/`）。\r\n- 扫描遍历目录与文件，生成 `files[count]{path,type,name}` 索引TOON；写入本地 `data/index.toon`（附 `metadata` 块）。\r\n- 可选生成派生 `data/index.json`（仅供前端树快速加载）。\r\n\r\n### 6.2 TOON生成模块\r\n\r\n- 首次访问懒加载生成，生成后按 `filePath` 缓存（Redis）默认1小时。\r\n- 无法提取结构化数据时生成默认TOON（例如PDF纯文本）。\r\n- 标准TOON输出包含对象字段与 `toonString` 字符串。\r\n\r\n### 6.3 Web展示模块\r\n\r\n- 左侧 Tree 展示 `DirectoryTree`，支持展开/折叠、类型图标区分。\r\n- 右侧预览按类型加载对应预览器：\r\n  - `.md` → `marked` 转 HTML；\r\n  - `.pdf` → `pdfjs-dist` 渲染二进制流，支持滚动/缩放；\r\n  - `.docx` → 后端 POI 转 HTML 或前端 `mammoth`；\r\n  - `.csv` → `papaparse` → `Antd Table`，支持排序；\r\n  - `.svg` → 原始文本嵌入 `<svg>`。\r\n- 交互限制：不提供下载按钮，禁用右键保存（前端限制）。\r\n\r\n## 7. API设计（REST）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 描述：获取目录树结构。\r\n  - 返回：`DirectoryTree`。\r\n- `GET /api/v1/document/toon?filePath=...`\r\n  - 描述：获取文档TOON结构。\r\n  - 返回：`TOONStructure`。\r\n- `GET /api/v1/document/preview?filePath=...`\r\n  - 描述：获取文档预览内容。\r\n  - 返回：`PreviewContent`（HTML字符串/PDF流/SVG文本）。\r\n- `POST /api/v1/document/scan`\r\n  - 描述：触发手动扫描。\r\n  - 返回：`ScanResult`（新增/更新/删除数量等）。\r\n\r\n### 7.1 索引加载接口\r\n\r\n- `GET /api/v1/index/toon`\r\n  - 描述：返回持久化的索引TOON（`data/index.toon`）。\r\n  - 返回：MIME `application/x-toon` 或 `text/plain; charset=UTF-8`。\r\n- `GET /api/v1/index/json`\r\n  - 描述：返回索引的JSON派生结构（`data/index.json`）。\r\n  - 返回：`FilesIndex`（数组）。\r\n\r\n### 7.2 请求参数\r\n\r\n- 获取目录树 `GET /api/v1/document/tree`\r\n  - 可选：`rootDir`（字符串，默认配置的全部根目录）、`path`（仅返回指定路径子树）、`depth`（整数，默认2）、`page`、`size`（分段加载）。\r\n- 获取文档TOON `GET /api/v1/document/toon`\r\n  - 必填：`filePath`；可选：`format=both|toon|json`（默认both）、`page`、`size`（大集合分页）。\r\n- 获取文档预览 `GET /api/v1/document/preview`\r\n  - 必填：`filePath`；可选（PDF）：`startPage`、`endPage`。\r\n- 触发手动扫描 `POST /api/v1/document/scan`\r\n  - 可选：`dirPath`（仅扫描指定目录）、`force`（布尔，是否跳过缓存直接重扫）。\r\n\r\n### 7.3 响应示例（节选）\r\n\r\n- 目录树（JSON）：\r\n  - `{ \"dirPath\": \"/opt/docs\", \"dirName\": \"docs\", \"subDirs\": [{\"dirPath\":\"/opt/docs/api\",\"dirName\":\"api\",\"subDirs\":[],\"documents\":[]}], \"documents\": [{\"filePath\":\"/opt/docs/readme.md\",\"fileName\":\"readme.md\",\"fileType\":\"MD\",\"fileSize\":1024}] }`\r\n- 文档TOON（both）：\r\n  - `{ \"rootNode\":\"users\", \"elementCount\":2, \"fields\":[\"id\",\"name\",\"role\"], \"data\":[{\"id\":1,\"name\":\"张三\",\"role\":\"admin\"},{\"id\":2,\"name\":\"李四\",\"role\":\"user\"}], \"toonString\":\"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n- 文档预览（PDF片段）：\r\n  - 头：`Content-Type: application/pdf`，支持 Range；体为二进制流；JSON模式示例：`{ \"contentType\":\"application/pdf\", \"content\":\"<base64>\", \"supportFullPreview\": false }`\r\n\r\n### 7.4 接口参数表（摘要）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 必填：无\r\n  - 可选：`rootDir`、`path`、`depth`、`page`、`size`\r\n- `GET /api/v1/document/toon`\r\n  - 必填：`filePath`\r\n  - 可选：`format=both|toon|json`、`page`、`size`\r\n- `GET /api/v1/document/preview`\r\n  - 必填：`filePath`\r\n  - 可选：`startPage`、`endPage`（PDF）\r\n- `POST /api/v1/document/scan`\r\n  - 必填：无\r\n  - 可选：`dirPath`、`force`\r\n\r\n### 7.5 OpenAPI草案（节选）\r\n\r\n```yaml\r\nopenapi: 3.0.0\r\ninfo:\r\n  title: 文档TOON结构生成与Web预览系统 API\r\n  version: 1.0.0\r\npaths:\r\n  /api/v1/document/tree:\r\n    get:\r\n      summary: 获取目录树结构\r\n      parameters:\r\n        - in: query\r\n          name: rootDir\r\n          schema: { type: string }\r\n        - in: query\r\n          name: path\r\n          schema: { type: string }\r\n        - in: query\r\n          name: depth\r\n          schema: { type: integer, minimum: 0, default: 2 }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer, minimum: 1, default: 1 }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer, minimum: 1, default: 200 }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/DirectoryTree' } } } }\r\n        '400': { $ref: '#/components/responses/Error400' }\r\n  /api/v1/document/toon:\r\n    get:\r\n      summary: 获取文档TOON结构\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: format\r\n          schema: { type: string, enum: [both, toon, json], default: both }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/TOONStructure' } }, application/x-toon: { schema: { type: string } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n        '422': { $ref: '#/components/responses/Error422' }\r\n  /api/v1/document/preview:\r\n    get:\r\n      summary: 获取文档预览内容\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: startPage\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: endPage\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/PreviewContent' } }, application/pdf: { schema: { type: string, format: binary } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n  /api/v1/document/scan:\r\n    post:\r\n      summary: 触发手动扫描\r\n      requestBody:\r\n        content:\r\n          application/json:\r\n            schema:\r\n              type: object\r\n              properties:\r\n                dirPath: { type: string }\r\n                force: { type: boolean, default: false }\r\n      responses:\r\n        '200': { description: OK }\r\ncomponents:\r\n  schemas:\r\n    DirectoryTree:\r\n      type: object\r\n      properties:\r\n        dirPath: { type: string }\r\n        dirName: { type: string }\r\n        subDirs:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DirectoryTree' }\r\n        documents:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DocumentSummary' }\r\n    DocumentSummary:\r\n      type: object\r\n      properties:\r\n        filePath: { type: string }\r\n        fileName: { type: string }\r\n        fileType: { type: string, enum: [MD, DOCX, PDF, CSV, SVG] }\r\n        fileSize: { type: integer }\r\n    TOONStructure:\r\n      type: object\r\n      properties:\r\n        rootNode: { type: string }\r\n        elementCount: { type: integer }\r\n        fields: { type: array, items: { type: string } }\r\n        data: { type: array, items: { type: object } }\r\n        toonString: { type: string }\r\n    PreviewContent:\r\n      type: object\r\n      properties:\r\n        contentType: { type: string }\r\n        content: { type: string }\r\n        supportFullPreview: { type: boolean }\r\n    ErrorResponse:\r\n      type: object\r\n      properties:\r\n        code: { type: string }\r\n        message: { type: string }\r\n        traceId: { type: string }\r\n        details: { type: object }\r\n  responses:\r\n    Error400:\r\n      description: Bad Request\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error404:\r\n      description: Not Found\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error422:\r\n      description: Unprocessable Entity\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n```\r\n\r\n### 7.6 API协商与返回模式\r\n\r\n- `GET /api/v1/document/toon?filePath=...&format=both|toon|json&page=1&size=100`\r\n  - `format`：返回模式；默认 `both`（结构体与 `toonString` 同时返回）。\r\n  - 分页：对大集合型TOON可使用 `page/size`；响应中同时返回 `metadata` 块说明总数、页码与最后更新时间。\r\n- 内容协商：支持 `Accept: application/x-toon` 强制仅返回 `toonString`（MIME：`application/x-toon`）；`application/json` 返回对象结构；无 `Accept` 或 `*/*` 返回默认 `both`。\r\n- 预览分页：`GET /api/v1/document/preview?filePath=...&startPage=1&endPage=10`（PDF），支持HTTP Range；单次最大返回页数 `<= 20`。\r\n- 响应示例：\r\n  - JSON：`{ rootNode: \"users\", elementCount: 2, fields: [\"id\",\"name\",\"role\"], data: [{id:1,name:\"张三\",role:\"admin\"},{id:2,name:\"李四\",role:\"user\"}], toonString: \"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n  - TOON：`users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- 兼容降级策略：若代理/浏览器不识别 `application/x-toon`，可回退使用 `text/plain; charset=UTF-8` 返回 `toonString`。\r\n- 配置项（Config Server）：`preview.pdf.max-pages-per-request=20`、`gateway.response.supported-accepts=application/json,application/x-toon,*/*`。\r\n\r\n## 8. 数据结构定义（概念约定）\r\n\r\n- 枚举 `FileType`：MD/DOCX/PDF/CSV/SVG。\r\n- 实体 `Document`：见 3.2。\r\n- 值对象 `TOONStructure`：见 3.2。\r\n- 前端 TypeScript 约定：\r\n  - `DirectoryTree { dirPath: string; dirName: string; subDirs: DirectoryTree[]; documents: DocumentSummary[] }`\r\n  - `DocumentSummary { filePath: string; fileName: string; fileType: FileType; fileSize: number }`\r\n  - `TOONStructure { rootNode: string; elementCount: number; fields: string[]; data: Array<Record<string, any>>; toonString: string }`\r\n  - `PreviewContent { contentType: string; content: string | ArrayBuffer; supportFullPreview: boolean }`\r\n  - `FilesIndexItem { path: string; type: 'directory' | 'file'; name: string }`\r\n  - `FilesIndex = FilesIndexItem[]`\r\n\r\n## 9. TOON生成规则（按格式）\r\n\r\n- CSV：第一行为 `fields`，其余行为 `data`；`rootNode` 为文件名；`elementCount` 为数据行数。\r\n- MD：优先提取表格数据（列名→`fields`，行→`data`）；次选列表结构。\r\n- DOCX：提取表格优先，其次段落标题；规则对齐MD。\r\n- PDF：尽力提取表格/结构化；若不可行，则 `fields=[\"content\"]`，`data` 为文本片段。\r\n- SVG：`fields=[\"width\",\"height\",\"elementsCount\"]`，`data` 为SVG元数据。\r\n\r\n## 10. 治理与合规\r\n\r\n### 10.1 路径与编码规范（Linux/中文）\r\n\r\n- 运行环境：Linux；路径分隔符 `/`；大小写敏感；禁止Windows样式路径。\r\n- 编码与规范化：文件/目录名统一UTF-8；建议NFC规范化；拒绝包含控制字符与非法路径片段（如 `..` 越权）。\r\n- 符号链接策略：禁止跨根目录的符号链接访问；允许根目录内的符号链接但需解析到真实路径并做白名单校验；检测越权即拒绝。\r\n- 默认黑名单：`.git/`、`.svn/`、`node_modules/`、`target/`、`.DS_Store`、临时/隐藏文件（以 `.` 开头）。\r\n- 白名单：所有访问严格限制在配置的根目录集合内；任何跨目录或符号链接越权访问拒绝。\r\n\r\n### 10.2 安全与访问限制\r\n\r\n- 根目录访问严格限制在配置集合内，拒绝跨目录访问与路径遍历（规范化路径校验）。\r\n- 网关层启用CORS白名单策略，仅允许指定来源域名。\r\n- 前端禁用右键保存与下载入口（仅UI限制，无法完全阻止恶意抓取）。\r\n\r\n### 10.3 错误与响应格式\r\n\r\n- 统一错误JSON：`{ code: string, message: string, traceId: string, details?: object, locale?: string }`\r\n- HTTP状态码：\r\n  - 400 参数错误（非法filePath、越权路径）。\r\n  - 404 文件不存在或不支持格式。\r\n  - 409 并发冲突（扫描进行中）。\r\n  - 422 解析失败（TOON/预览生成失败）。\r\n  - 429 请求过多（限流）。\r\n  - 500 服务器内部错误。\r\n- 网关错误映射：统一成上述错误结构并记录 `traceId`。\r\n- 错误码字典：`INVALID_PATH`、`UNSUPPORTED_TYPE`、`FILE_NOT_FOUND`、`PARSE_FAILED`、`CONFLICT`、`RATE_LIMITED`、`INTERNAL_ERROR`。\r\n- CORS与预检：配置 `Access-Control-Allow-Origin`（白名单）、`Access-Control-Allow-Methods`、`Access-Control-Allow-Headers`、`Access-Control-Max-Age=600`。\r\n\r\n#### 10.3.1 错误码与HTTP映射（示例）\r\n\r\n- `INVALID_PATH` → 400；消息：路径非法或越权访问\r\n- `FILE_NOT_FOUND` → 404；消息：文件不存在\r\n- `UNSUPPORTED_TYPE` → 404；消息：格式不支持\r\n- `CONFLICT` → 409；消息：资源冲突或扫描进行中\r\n- `PARSE_FAILED` → 422；消息：解析失败，返回降级内容或提示\r\n- `RATE_LIMITED` → 429；消息：请求过多，请稍后重试\r\n- `INTERNAL_ERROR` → 500；消息：服务器内部错误\r\n\r\n## 9. 非功能与性能\r\n\r\n- 异步扫描与大目录优化（并发遍历、I/O分离、批量缓存更新）。\r\n- 跳过隐藏文件与目录，避免无意义解析。\r\n- 大文件（>100MB）预览仅加载前10页（PDF），显示分页控件与提示。\r\n- TOON结构与预览内容缓存默认1小时，可配置；命中则直接返回。\r\n- 兼容性：现代浏览器（Chrome/Firefox/Edge ≥ 88）。\r\n\r\n## 10. 部署与运维\r\n\r\n- 容器化：Docker 镜像构建；Nginx 反向代理与负载均衡；Jenkins + GitLab CI/CD。\r\n- 微服务：Eureka 服务发现；Config Server 管理根目录与扫描周期；\r\n- 监控：Prometheus 采集接口与调度指标；Grafana 仪表盘；\r\n- 日志：ELK 聚合 `document-service` 扫描/预览日志与异常。\r\n\r\n## 11. 用户故事与验收标准\r\n\r\n- 用户故事1：查看文档树结构\r\n  - Given 配置的根目录存在，When 应用启动，Then 自动扫描并生成TOON数据，左侧显示树状结构。\r\n  - Given 树已显示，When 点击目录节点，Then 展开子目录与文档清单。\r\n  - Given 树已显示，When 点击文档节点，Then 右侧预览文档内容。\r\n- 用户故事2：预览文档内容\r\n  - Given 用户点击文档节点，When 文档类型为 md/docx/pdf/csv/svg，Then 在右侧渲染对应预览。\r\n  - Given 预览界面显示，When 文档格式不支持，Then 显示“预览不支持”提示。\r\n  - Given 预览功能，Then 不提供下载或上传选项。\r\n\r\n### 用户故事地图（Story Map）\r\n\r\n- Backbone（活动）：浏览索引 → 查找与筛选 → 查看预览 → 管理重扫 → 运行保障\r\n- 用户角色：访客（浏览/预览）、管理员（重扫/状态/清缓存）\r\n- 活动拆分与步骤：\r\n  - 浏览索引：加载`index.toon/json` → 渲染树 → 展开/折叠 → 类型图标\r\n  - 查找与筛选：关键字筛选（按`name/path`，可选）→ 类型过滤（file/directory）→ 清空筛选\r\n  - 查看预览：点击文件 → 加载对应预览器（md/docx/pdf/csv/svg）→ 错误降级提示\r\n  - 管理重扫：进入管理页 → 选择目录 → 触发`admin/rescan` → 观察更新时间\r\n  - 运行保障：限流/缓存生效 → 监控指标回报 → 故障时降级与重试\r\n- 版本切片：\r\n  - MVP：加载索引、树浏览、`.md`预览、错误页提示\r\n  - V1：`.pdf/.docx/.csv/.svg`预览、`index.json`派生、限流与缓存\r\n  - V2：异步预览worker、管理后台页面、监控与告警、筛选搜索\r\n- 验收视角：每步具备可见输出（树渲染/预览/状态）、错误有统一文案、操作有可回退路径。\r\n\r\n## 12. 扩展性与演进\r\n\r\n- 新增格式时：实现 `TOONGenerationService` 与 `PreviewService` 的新适配方法，注册到策略表。\r\n- 多根目录：`config-server` 支持数组配置与动态刷新；扫描服务按目录并发执行。\r\n- 异步预览：将重解析任务下沉至 `preview-worker`，通过Kafka异步处理与Redis结果回填。\r\n\r\n## 13. 参考来源与整合说明\r\n\r\n- 参考文档：\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（豆包）.md:193-198（技术选型）、269-317/281-307（API端点）、205-213（扫描策略）、141-149（TOON规则）、385-392（安全/CORS）、377-384（性能/缓存）、239-252（交互）、40-65/67-125（模型）、175-185（分层）、400-405（扩展性）、77-90（TOON对象）。\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（DeepSeek）.md:53-58（前后端建议与预览库）、45-48（预览不支持提示）、58（Docker容器化）、36-49（用户故事与验收）、124-125（异步与性能）。\r\n- 参考文章：知乎《TOON vs JSON：现代数据格式的巅峰对决》 https://zhuanlan.zhihu.com/p/1973687597361566533（TOON语法、块结构与令牌效率要点）。\r\n- 整合原则：以“豆包”工程化规则为主干，吸收“DeepSeek”的快速实现与容器建议，并统一到 React + AntD + Vite 前端与 Spring Cloud + Java 后端的栈约束下。\r\n\r\n## 12. 运行保障\r\n\r\n### 12.1 缓存与失效策略\r\n\r\n- Redis键设计：\r\n  - TOON：`toon:{sha256(filePath)}:{version}`；预览：`preview:{sha256(filePath)}:{pageRange}`。\r\n  - 版本计算：默认 `sha256(filePath + mtime + size)`；可选 `sha256(content)`（大文件时按区块）。\r\n- TTL：默认1小时；大文件预览可单独设置TTL。\r\n- 失效触发：\r\n  - 扫描发现变更（新增/修改/删除）即失效对应键。\r\n  - 手动触发重扫或管理接口清缓存。\r\n- HTTP缓存：使用 `ETag` 与 `Last-Modified`；命中直接返回304。\r\n- 容量与逐出：配置最大容量；策略LRU或LFU；指标监控命中率与逐出率。\r\n\r\n### 12.2 监控指标与限流建议\r\n\r\n- 监控指标：\r\n  - `scan_duration_ms`、`parse_success_rate`、`cache_hit_ratio`、`api_latency_p95`、`api_latency_p99`、`queue_backlog`。\r\n- 限流：\r\n  - 基于IP或令牌的令牌桶；默认每IP每分钟 120 次，突发 30；超限返回429并提供 `Retry-After` 与统一错误页文案。\r\n\r\n### 12.3 稳定性与运行策略\r\n\r\n- 扫描策略：\r\n  - 定时扫描（默认每小时）与Linux inotify文件事件监听结合；事件驱动优先，周期性补偿。\r\n  - 多根目录并发扫描需保证仓库更新的原子性与去重。\r\n- 并发与锁：Repository更新采用分段锁（按目录粒度）与批处理事务，避免写入冲突；去重基于 `filePath+hash`。\r\n- 重试与退避：解析失败指数退避（初始500ms，最大4s，最多3次）；区分可重试/不可重试错误并记录失败样本。\r\n- 资源限制：为PDFBox/POI设置并发线程上限（≤CPU核数）、单文件解析超时（≤10s）与内存上限，防止OOM。\r\n- 配置刷新：`config-server` 变更后触发增量重扫（变更目录）或在 5 分钟窗口内全量重扫。\r\n\r\n## 附录 A. 示例用例（各格式TOON）\r\n\r\n- CSV：\r\n  - `users[2]{id,name,role}: 1,张三,admin; 2,李四,user`\r\n  - `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- MD（表格）：\r\n  - `features[3]{name,status}: 目录树,done; 预览,doing; 缓存,pending`\r\n- DOCX（表格优先）：\r\n  - `requirements[2]{item,priority}: TOON语法规范,high; 错误格式统一,high`\r\n- DOCX 适配决策矩阵：\r\n  - 条件：文档体积 < 5MB，样式简单（纯文本/基本表格） → 选择：前端 `mammoth` → 理由：轻量、减少后端负载 → 降级：复杂样式检测失败则回退后端POI\r\n  - 条件：包含复杂表格/图片/页眉页脚/公式 → 选择：后端 POI 转 HTML → 理由：解析更稳定、可控 → 降级：无法完整转换时输出文本TOON块\r\n  - 条件：超大文件 ≥ 20MB → 选择：后端 POI 分段解析 → 理由：内存与性能控制 → 降级：仅抽取段落摘要或表格前N行\r\n  - 条件：中文大段与混合编码 → 选择：后端统一UTF-8并规范化 → 理由：保证TOON一致性 → 降级：不可识别字符替换为占位符\r\n- PDF（文本降级）：\r\n  - `content[1]{content}: 项目概述\\n支持五类文档\\n缓存1小时`\r\n- SVG（元数据）：\r\n  - `svg_meta[1]{width,height,elementsCount}: 800,600,42`\r\n- 复杂示例（多块顺序与关联）：\r\n  - `directories[1]{path}: /docs`\r\n  - `documents[2]{id,name,path,type}: 1,概述.md,/docs/概述.md,md; 2,设计.pdf,/docs/设计.pdf,pdf`\r\n- `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n\r\n## 附录 B. 前后端实现与测试建议\r\n\r\n- 前端状态管理：采用 React Query；设定 `staleTime=30s`、`retry=2`、指数退避；缓存接口数据与错误重试。\r\n- PDF.js配置：本地worker脚本路径 `/static/pdf.worker.min.js`；确保CORS允许；大文件按页加载与占位提示。\r\n- 树加载：分页/懒加载/虚拟滚动结合；每层最多加载 200 节点，超出分页请求后端。\r\n- 测试计划：\r\n  - 后端：各格式解析与TOON生成单元/集成测试；错误与降级用例；EBNF语法校验测试。\r\n  - 前端：预览渲染与交互回归测试；大数据性能用例；状态管理与错误提示一致性测试。\r\n- 持久化：`DocumentRepository` 默认落地 PostgreSQL；支持内存模式用于小规模或故障降级。\r\n- 前端错误体验与降级：损坏文件或不支持预览时显示统一错误页与操作建议；提供“查看原始TOON”回退。\r\n- ETag/Last-Modified 协同：前端请求携带 `If-None-Match/If-Modified-Since`；React Query 根据304直接复用缓存并跳过重试。\r\n\r\n## 附录 C. 树接口分页契约示例\r\n\r\n- 请求：`GET /api/v1/document/tree?path=/opt/docs&depth=1&page=1&size=200`\r\n- 返回：`DirectoryTree` 仅包含当前层 `subDirs/documents` 的分页片段，并附 `metadata{total,page,size}` TOON块或JSON元数据。\r\n- 交互：\r\n  - 展开节点时按需请求下一层；若节点子项超过 `size`，显示“加载更多”并继续分页。\r\n  - 前端虚拟滚动仅渲染可视区域；移除离屏节点；缓存已加载段落。\r\n  - 排序：默认按 `dirName/fileName` 字典序；可选 `fileType/lastModifiedTime`。\r\n\r\n## 附录 D. TOON 示例集与单测清单\r\n\r\n- 示例集：为 CSV/MD/DOCX/PDF/SVG 各提供至少3个复杂场景示例（中文/空值/转义/大集合分页）。\r\n- 单测：\r\n  - 语法校验：转义合法性、分隔符、块计数一致性、编码为UTF-8。\r\n  - 解析一致性：`fields/data/toonString` 对齐；降级块生成规则；分页合并一致性。\r\n  - 边界用例：损坏文件、非UTF-8、超长字段、嵌套列表/表格。\r\n\r\n## 23. 持久化模型（data目录TOON方案）\r\n\r\n- 索引文件：`data/index.toon`，内容为 `files[count]{path,type,name}` 块与 `metadata{total,last_updated,root}` 块。\r\n- JSON派生：`data/index.json`（可选），内容为 `FilesIndex` 数组，便于前端树加载与缓存。\r\n- 更新时间：`data/last_updated.txt`（可选），记录北京时间ISO-8601字符串，便于运维观察。\r\n- 生成策略：手动/定时扫描生成，命中缓存则复用；变更检测到后重写文件并更新ETag。\r\n- 读取策略：API优先读取 `index.toon`；前端可选择直接请求TOON或JSON派生。\r\n\r\n## 24. 管理与运维接口\r\n\r\n- `POST /api/v1/admin/rescan`（全量或指定目录重扫，更新 `data/index.*`）。\r\n- `POST /api/v1/admin/cache/clear?filePath=...`（清除单文件预览缓存，与索引无关）。\r\n- `GET /api/v1/admin/status`（查看任务队列、缓存命中率与 `index.toon` 更新时间）。\r\n- 访问控制：默认仅本地或白名单IP允许；可后续接入令牌校验。\r\n\r\n## 25. 本地化与时间格式\r\n\r\n- 错误消息默认中文，支持英文回退：`locale` 字段返回当前语言。\r\n- 时间统一使用北京时间ISO-8601，带时区偏移 `+08:00`；用于 `metadata` 与日志。\r\n\r\n## 26. 参数默认值与配置表（节选）\r\n\r\n- `app.scan.root-dirs`：数组，默认空，示例 `[/opt/docs,/opt/images]`\r\n- `app.scan.cron`：扫描周期（CRON），默认每小时\r\n- `app.data.dir`：索引持久化目录，默认 `./data`\r\n- `preview.pdf.max-pages-per-request`：单次最大页数，默认20\r\n- `gateway.response.supported-accepts`：`application/json,application/x-toon,*/*`\r\n- `gateway.rate-limit.ip.per-minute`：默认120\r\n- `gateway.rate-limit.ip.burst`：默认30\r\n- `cache.toon.ttl`：默认3600秒\r\n- `cache.preview.ttl`：默认600秒（大文件）\r\n\r\n## 27. 术语对照与一致性清单\r\n\r\n- 术语对照：\r\n  - 目录（Directory/Folder）→ `dirPath/dirName`\r\n  - 文档（Document/File）→ `filePath/fileName/fileType`\r\n  - TOON结构（TOONStructure）→ `rootNode/elementCount/fields/data/toonString`\r\n  - 预览（Preview）→ `PreviewContent`\r\n- 一致性检查：\r\n  - 字段命名在前后端、持久化与TOON中一致\r\n  - 时间格式统一为北京时间ISO-8601（`+08:00`）\r\n  - 路径为Linux风格，UTF-8编码，NFC规范化\r\n  - 错误码与HTTP映射一致，统一错误响应结构\r\n  - 缓存键命名、TTL与失效触发一致\r\n\r\n## 28. 需求覆盖评估\r\n\r\n- 覆盖项：\r\n  - 指定目录全量枚举与中文路径：由扫描模块与`files`索引TOON规范覆盖（含Linux路径与符号链接治理）。\r\n  - 索引持久化与加载：`data/index.toon`（必选）与`index.json`（可选）及对应API覆盖。\r\n  - 树展示与预览适配：React前端与五类预览器（md/docx/pdf/csv/svg）覆盖；错误统一降级与提示。\r\n  - 治理与运行保障：路径与编码、安全、错误、缓存、限流、监控、稳定性策略覆盖。\r\n  - 运维与管理：`admin/rescan/status/cache`接口覆盖索引更新与状态可观测。\r\n- 差距与建议：\r\n  - `.xlsx` 仅列于索引样例，当前“预览不支持”（不在五类之内）。建议：V2引入轻量预览（只读表格前N行）或标注“仅下载不预览”。\r\n  - 索引搜索/筛选：Story Map中为可选，当前规范未定义API参数。建议：前端本地筛选为先，必要时提供`GET /index/search?q=`。\r\n  - 索引规模极大（>10万项）分页：目前通过JSON派生与前端虚拟滚动缓解，建议后续提供分片索引（`index.part-N.toon`）。\r\n  - 缺失文件或`index.toon`不存在的降级：建议在API与前端加入“空索引占位”与重扫引导。\r\n  - 无登录与权限控制：按需求刻意不覆盖；如后续公开部署需考虑只读令牌与审计。\r\n- 结论：就“展示指定目录并持久化为TOON索引、提供预览”核心需求而言，规范已覆盖端到端路径与非功能治理；已知差距集中在`.xlsx`预览与搜索/大规模索引的增强项，可按版本切片推进。\r\n\r\n## 附录 E. DDD 完整链路图（Mermaid）\r\n\r\n```mermaid\r\n%% -------------- DDD 完整链路 -------------- \r\ngraph TB\r\n    %% ========== 0. 前期对齐 ==========\r\n    A0[0.组建跨职能战队<br/>对齐业务愿景] --> A1\r\n\r\n    %% ========== 1. 用户旅程 ==========\r\n    A1([1.用户旅程工作坊<br/>User Journey Mapping])\r\n    A1 -->|输出| A1_OUT1[用户旅程图<br/>痛点 & 机会]\r\n    A1_OUT1 -->|输出| A1_OUT2[角色 Persona]\r\n\r\n    %% ========== 2. 用户故事地图 ==========\r\n    A1 --> A2([2.用户故事地图<br/>Story Mapping])\r\n    A2 -->|输出| A2_OUT1[故事地图墙<br/>Epic → Story → Task]\r\n    A2 -->|输出| A2_OUT2[故事卡<br/>As-Who-Want-What]\r\n    A2 -->|输出| A2_OUT3[验收标准 AC<br/>Given-When-Then]\r\n\r\n    %% ========== 3. 事件风暴 ==========\r\n    A2_OUT2 --> B0([3.事件风暴<br/>Event Storming])\r\n    B0 -->|每张故事卡| B0_LINK[故事卡 ←→ 领域事件]\r\n    B0 -->|贴纸墙| B0_STEP1[橙色：领域事件]\r\n    B0_STEP1 --> B0_STEP2[蓝色：命令]\r\n    B0_STEP2 --> B0_STEP3[黄色：聚合候选]\r\n    B0_STEP3 --> B0_STEP4[红色：热点/矛盾]\r\n    B0 -->|输出| B0_OUT1[事件流大图]\r\n    B0 -->|输出| B0_OUT2[命令-事件-聚合表]\r\n\r\n    %% ========== 4. 战略设计 ==========\r\n    B0_OUT2 --> C1([4.划分限界上下文])\r\n    C1 -->|输出| C1_OUT[BC图 + 上下文映射]\r\n    C1_OUT --> C2([5.建立通用语言])\r\n    C2 -->|输出| C2_DICT[术语词典 + 代码词汇表]\r\n\r\n    %% ========== 5. 战术设计 ==========\r\n    C2_DICT --> D1([6.战术建模])\r\n    D1 --> D1_ENT[实体 Entity]\r\n    D1 --> D1_AR[聚合根 Aggregate Root]\r\n    D1 --> D1_VO[值对象 Value Object]\r\n    D1 --> D1_DS[领域服务 Domain Service]\r\n    D1 --> D1_REPO[仓储 Repository]\r\n    D1 --> D1_SPEC[规约 Specification]\r\n    D1 -->|输出| D1_MODEL[战术模型图 + 类图]\r\n\r\n    %% ========== 6. 敏捷迭代：故事 → 任务 → 代码 ==========\r\n    D1_MODEL --> E1[7.迭代 backlog]\r\n    E1 --> E2[8.故事卡拆任务]\r\n    E2 --> E3[9.TDD / 单元测试]\r\n    E3 --> E4[10.持续集成]\r\n    E4 --> E5[11.演示 & 验收]\r\n\r\n    %% ========== 7. 需求变更闭环 ==========\r\n    F1([12.新需求 / 变更]) --> F2[ diff 事件流 ]\r\n    F2 --> F3[快速定位受影响的聚合]\r\n    F3 --> F4[更新故事卡 & AC]\r\n    F4 --> E1\r\n    F4 --> B0\r\n\r\n    %% -------------- 样式定义 --------------\r\n    classDef workshop fill:#FFEAA7,stroke:#333,stroke-width:2px\r\n    classDef output fill:#D1F2EB,stroke:#333\r\n    classDef story fill:#FDEDEC,stroke:#333\r\n    classDef change fill:#FADBD8,stroke:#333\r\n    classDef role fill:#EAF2F8,stroke:#333\r\n\r\n    class A1,A2,B0,C1,C2,D1 workshop\r\n    class A1_OUT1,A1_OUT2,A2_OUT1,A2_OUT2,A2_OUT3,B0_OUT1,B0_OUT2,C1_OUT,C2_DICT,D1_MODEL output\r\n    class E1,E2,E3,E4,E5 story\r\n    class F1,F2,F3,F4 change\r\n    class P1,P2,P3,P4,P5,P6 role",
  "lastModified" : 1764639821602
}, {
  "filePath" : "技术案例/全文检索技术设计.md",
  "fileName" : "全文检索技术设计.md",
  "parentDir" : "技术案例",
  "fileType" : "MD",
  "title" : "全文检索技术设计.md",
  "contentText" : "在nexus-lite项目中，确保Elasticsearch对 /root/lite-webviewer/src/main/resources/application.yml 文件中第33行的 root-dirs: /root/lite-webviewer/docs 配置项建立搜索索引的完整流程如下：\n\n### 配置与实现关联\n1. 配置设置 ：\n   \n   - 在 `application.yml` 中，您可以看到三个关键配置：\n     - app.scan.root-dirs: /root/lite-webviewer/docs - 指定要扫描的文档根目录\n     - app.search.use-es: true - 启用Elasticsearch功能\n     - app.search.es-index-name: nexus-lite-docs - 设置Elasticsearch索引名称\n2. 文件扫描流程 ：\n   \n   - `FileScanServiceImpl.java` 通过 @Value(\"${app.scan.root-dirs}\") 直接读取您配置的根目录\n   - 它使用 ForkJoinPool 并行扫描这些目录下的所有文件\n   - 对每个文件，调用 searchMetaBuilder.build() 构建搜索元数据\n   - 最后通过 searchMetaRepository.saveAll(metas) 将元数据保存到本地JSON文件\n3. Elasticsearch索引同步 ：\n   \n   - `EsIndexService.java` 负责将本地元数据同步到Elasticsearch\n   - 它使用 @ConditionalOnProperty(value = \"app.search.use-es\", havingValue = \"true\") 注解，确保只有在启用ES时才会生效\n   - reindexFromMeta() 方法从本地存储加载所有SearchMeta对象\n   - 将每个SearchMeta转换为 `EsDocument.java` 对象\n   - 最后通过 repo.saveAll(docs) 将文档保存到Elasticsearch\n4. Elasticsearch映射 ：\n   \n   - EsDocument类使用 @Document(indexName = \"${app.search.es-index-name}\") 注解，确保数据被保存到配置的索引中\n   - 每个字段都有相应的Elasticsearch类型注解，如 @Field(type = FieldType.Text) 用于全文搜索\n### 确保ES索引正确建立的关键\n1. 确认配置启用 ： app.search.use-es: true 必须设置为true，否则Elasticsearch功能不会激活\n2. 文档根目录正确 ： app.scan.root-dirs 必须指向包含您文档的正确路径\n3. Elasticsearch连接 ： spring.elasticsearch.uris: http://localhost:9200 必须正确指向运行中的Elasticsearch服务\n### 工作原理总结\n整个系统的工作流程是：\n\n1. 应用启动时读取配置的根目录\n2. 文件扫描服务扫描指定目录下的所有文档\n3. 提取文档内容和元数据，保存到本地JSON文件\n4. Elasticsearch索引服务定期或按需将本地元数据同步到Elasticsearch索引\n5. 搜索服务可以直接查询Elasticsearch获取搜索结果\n这种设计实现了文档扫描与索引创建的解耦，同时确保了配置的根目录中的所有文档都会被正确索引到Elasticsearch中。",
  "size" : 2562,
  "modifiedAt" : 1764639821582,
  "id" : "技术案例/全文检索技术设计.md",
  "content" : "在nexus-lite项目中，确保Elasticsearch对 /root/lite-webviewer/src/main/resources/application.yml 文件中第33行的 root-dirs: /root/lite-webviewer/docs 配置项建立搜索索引的完整流程如下：\n\n### 配置与实现关联\n1. 配置设置 ：\n   \n   - 在 `application.yml` 中，您可以看到三个关键配置：\n     - app.scan.root-dirs: /root/lite-webviewer/docs - 指定要扫描的文档根目录\n     - app.search.use-es: true - 启用Elasticsearch功能\n     - app.search.es-index-name: nexus-lite-docs - 设置Elasticsearch索引名称\n2. 文件扫描流程 ：\n   \n   - `FileScanServiceImpl.java` 通过 @Value(\"${app.scan.root-dirs}\") 直接读取您配置的根目录\n   - 它使用 ForkJoinPool 并行扫描这些目录下的所有文件\n   - 对每个文件，调用 searchMetaBuilder.build() 构建搜索元数据\n   - 最后通过 searchMetaRepository.saveAll(metas) 将元数据保存到本地JSON文件\n3. Elasticsearch索引同步 ：\n   \n   - `EsIndexService.java` 负责将本地元数据同步到Elasticsearch\n   - 它使用 @ConditionalOnProperty(value = \"app.search.use-es\", havingValue = \"true\") 注解，确保只有在启用ES时才会生效\n   - reindexFromMeta() 方法从本地存储加载所有SearchMeta对象\n   - 将每个SearchMeta转换为 `EsDocument.java` 对象\n   - 最后通过 repo.saveAll(docs) 将文档保存到Elasticsearch\n4. Elasticsearch映射 ：\n   \n   - EsDocument类使用 @Document(indexName = \"${app.search.es-index-name}\") 注解，确保数据被保存到配置的索引中\n   - 每个字段都有相应的Elasticsearch类型注解，如 @Field(type = FieldType.Text) 用于全文搜索\n### 确保ES索引正确建立的关键\n1. 确认配置启用 ： app.search.use-es: true 必须设置为true，否则Elasticsearch功能不会激活\n2. 文档根目录正确 ： app.scan.root-dirs 必须指向包含您文档的正确路径\n3. Elasticsearch连接 ： spring.elasticsearch.uris: http://localhost:9200 必须正确指向运行中的Elasticsearch服务\n### 工作原理总结\n整个系统的工作流程是：\n\n1. 应用启动时读取配置的根目录\n2. 文件扫描服务扫描指定目录下的所有文档\n3. 提取文档内容和元数据，保存到本地JSON文件\n4. Elasticsearch索引服务定期或按需将本地元数据同步到Elasticsearch索引\n5. 搜索服务可以直接查询Elasticsearch获取搜索结果\n这种设计实现了文档扫描与索引创建的解耦，同时确保了配置的根目录中的所有文档都会被正确索引到Elasticsearch中。",
  "lastModified" : 1764639821582
}, {
  "filePath" : "技术案例/full-text-search-implementation.md",
  "fileName" : "full-text-search-implementation.md",
  "parentDir" : "技术案例",
  "fileType" : "MD",
  "title" : "full-text-search-implementation.md",
  "contentText" : "# Nexus-Lite 全文检索实现文档\n\n## 1. 系统概述\n\nNexus-Lite的全文检索功能提供了高效的文档内容搜索能力，支持多种文件格式的内容提取、索引和检索。该功能基于Elasticsearch实现，支持全文搜索、多条件筛选、结果高亮等高级特性。\n\n## 2. 核心工作流程\n\n全文检索功能的完整工作流程包含以下主要步骤：\n\n1. **文档扫描与内容提取**：系统扫描配置的根目录，提取支持的文件格式的内容\n2. **元数据生成与存储**：将提取的内容和文件元数据生成SearchMeta对象并本地存储\n3. **Elasticsearch索引同步**：将SearchMeta数据转换并同步到Elasticsearch索引\n4. **用户查询处理**：接收并处理用户的搜索请求\n5. **结果高亮与返回**：处理搜索结果，高亮关键字并返回给用户\n\n## 3. 核心组件详解\n\n### 3.1 文档扫描与内容提取\n\n#### FileScanServiceImpl\n\n负责扫描文件系统，检测文件变化，并触发内容提取：\n\n- 扫描配置的根目录（通过`app.scan.root-dirs`配置）\n- 使用多线程高效处理大量文件\n- 调用SearchMetaBuilder提取文件内容\n- 将提取的SearchMeta保存到本地文件系统\n- 发布扫描完成事件（ScanFinishedEvent）\n\n关键代码流程：\n```java\n// 扫描目录并收集文件信息\nfor (String dirPath : dirPaths) {\n    Path rootPath = Paths.get(dirPath);\n    // 递归遍历文件树\n    Files.walkFileTree(rootPath, new SimpleFileVisitor<Path>() {\n        @Override\n        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\n            // 检查文件是否需要处理\n            if (shouldProcessFile(file)) {\n                // 提取文件元数据\n                metas.add(searchMetaBuilder.build(rootPath, file, lastModified));\n            }\n            return FileVisitResult.CONTINUE;\n        }\n    });\n}\n// 保存搜索元数据\nsearchMetaRepository.saveAll(metas);\n```\n\n#### SearchMetaBuilder\n\n负责从不同格式的文件中提取内容：\n\n- 支持多种文件格式的内容提取：PDF、DOCX、XLSX、MD、HTML、CSV等\n- 针对不同文件类型使用专门的解析器\n- 提取文件名、路径、内容、修改时间等元数据\n- 处理大文件时进行智能截断，避免内存溢出\n\n关键实现：\n```java\npublic SearchMeta build(Path rootPath, Path filePath, long modifiedAt) {\n    // 提取基本信息\n    String rel = rootPath.relativize(filePath).toString().replace(\"\\\\\", \"/\");\n    String fileName = filePath.getFileName().toString();\n    FileType type = FileType.fromExtension(ext);\n    \n    // 根据文件类型提取内容\n    if (type == FileType.PDF) {\n        // 使用PDFBox提取PDF内容\n        // 只提取头部和尾部几页，兼顾内容覆盖和性能\n    } else if (type == FileType.DOCX) {\n        // 使用Apache POI提取Word文档内容\n    } else if (type == FileType.MD) {\n        // 直接读取文本内容\n    }\n    \n    // 限制内容长度，避免过大的JSON\n    if (contentText != null && contentText.length() > 20000) {\n        contentText = contentText.substring(0, 20000);\n    }\n    \n    // 创建并返回SearchMeta对象\n    return new SearchMeta(rel, fileName, parentDir, type, title, contentText, size, modifiedAt);\n}\n```\n\n### 3.2 元数据存储与管理\n\n#### SearchMetaRepository\n\n负责SearchMeta数据的持久化和加载：\n\n- 将SearchMeta列表保存为JSON文件\n- 从JSON文件加载SearchMeta数据\n- 处理文件IO异常\n- 使用Jackson库进行JSON序列化和反序列化\n\n关键代码：\n```java\npublic Result<List<SearchMeta>> saveAll(List<SearchMeta> list) {\n    try {\n        // 确保数据目录存在\n        Path dir = Paths.get(dataDir);\n        if (!Files.exists(dir)) Files.createDirectories(dir);\n        // 保存为JSON文件\n        Path jsonPath = dir.resolve(SEARCH_META_JSON);\n        objectMapper.writeValue(jsonPath.toFile(), list);\n        return Result.success(list);\n    } catch (Exception e) {\n        // 错误处理\n        return Result.failure(\"Failed to save search meta: \" + e.getMessage());\n    }\n}\n```\n\n### 3.3 Elasticsearch索引同步\n\n#### EsIndexService\n\n负责将本地SearchMeta数据同步到Elasticsearch索引：\n\n- 只有当`app.search.use-es=true`时才会启用\n- 从SearchMetaRepository加载所有元数据\n- 将SearchMeta转换为EsDocument对象\n- 批量保存到Elasticsearch索引\n- 支持清除旧索引并重建\n\n核心逻辑：\n```java\n@ConditionalOnProperty(\"app.search.use-es\")\npublic Result<Long> reindexFromMeta(boolean clear) {\n    // 加载所有SearchMeta数据\n    Result<List<SearchMeta>> loadResult = searchMetaRepository.loadAll();\n    if (loadResult.isFailure()) {\n        return Result.failure(loadResult.getErrorMessage().orElse(\"Failed to load search meta\"));\n    }\n    \n    // 转换为EsDocument\n    List<EsDocument> docs = loadResult.getValue().get().stream()\n        .map(meta -> new EsDocument(\n            meta.getFilePath(),\n            meta.getFileName(),\n            meta.getParentDir(),\n            meta.getFileType(),\n            meta.getTitle(),\n            meta.getContent(),\n            meta.getSize(),\n            meta.getModifiedAt()\n        ))\n        .collect(Collectors.toList());\n    \n    // 批量保存到Elasticsearch\n    repo.saveAll(docs);\n    return Result.success((long) docs.size());\n}\n```\n\n#### EsDocumentRepository\n\n基于Spring Data Elasticsearch的仓库接口：\n\n- 继承ElasticsearchRepository提供基本数据访问功能\n- 支持Elasticsearch的CRUD操作\n- 自动映射EsDocument对象到Elasticsearch索引\n\n```java\npublic interface EsDocumentRepository extends ElasticsearchRepository<EsDocument, String> {\n    // 提供基本的数据访问功能\n}\n```\n\n### 3.4 搜索服务实现\n\n#### EsSearchService\n\n实现全文检索功能：\n\n- 构建Elasticsearch查询DSL\n- 支持多字段搜索（content、title、fileName等）\n- 处理过滤条件（文件类型、目录、大小、时间等）\n- 实现搜索结果高亮显示\n- 截取关键片段展示给用户\n\n搜索实现：\n```java\npublic Result<List<SearchResult>> search(SearchRequest request, int limit) {\n    // 构建搜索查询\n    Map<String, Object> query = new HashMap<>();\n    // 多字段匹配查询\n    Map<String, Object> multiMatch = new HashMap<>();\n    multiMatch.put(\"query\", request.getKeyword());\n    multiMatch.put(\"fields\", Arrays.asList(\"content\", \"title\", \"fileName\"));\n    multiMatch.put(\"type\", \"best_fields\");\n    \n    // 添加过滤条件\n    if (request.getFileType() != null) {\n        // 添加文件类型过滤\n    }\n    \n    // 执行搜索\n    SearchHits<EsDocument> searchHits = operations.search(searchQuery, EsDocument.class);\n    \n    // 处理结果和高亮\n    List<SearchResult> results = new ArrayList<>();\n    for (SearchHit<EsDocument> hit : searchHits.getSearchHits()) {\n        EsDocument doc = hit.getContent();\n        // 处理高亮显示\n        String snippet = extractSnippetWithHighlight(hit, request.getKeyword());\n        results.add(new SearchResult(\n            doc.getFilePath(),\n            doc.getFileName(),\n            doc.getFileType(),\n            snippet,\n            hit.getScore(),\n            doc.getModifiedAt()\n        ));\n    }\n    \n    return Result.success(results);\n}\n```\n\n#### SearchController\n\n处理HTTP搜索请求：\n\n- 提供基础搜索和高级搜索API\n- 支持重建索引操作\n- 实现ES搜索失败时自动降级到本地搜索的机制\n- 增强的ES可用性检测和故障转移\n- 统一的错误处理和日志记录\n\n```java\n@PostMapping(\"/advanced\")\npublic ResponseEntity<?> advancedSearch(@RequestBody SearchRequest request, @RequestParam int limit) {\n    String keyword = (request.getKeyword() == null ? \"\" : request.getKeyword()).trim();\n    boolean useEs = (esSearchService != null && esSearchService.enabled());\n    logger.info(\"Advanced search request received with keyword: '{}', limit: {}, using ES: {}\", keyword, limit, useEs);\n    \n    Result<List<SearchResult>> r;\n    if (useEs) {\n        // 首先尝试使用ES搜索\n        r = esSearchService.search(request, limit);\n        // 如果ES搜索失败，自动降级到本地搜索\n        if (r.isFailure()) {\n            logger.warn(\"ES search failed, falling back to local search: {}\", r.getErrorMessage().orElse(\"Unknown error\"));\n            r = advancedSearchService.search(request, limit);\n        }\n    } else {\n        logger.info(\"Elasticsearch not enabled or unavailable, using local search\");\n        r = advancedSearchService.search(request, limit);\n    }\n    \n    if (r.isFailure()) {\n        logger.warn(\"Advanced search failed for keyword: '{}', error: {}\", \n                    keyword, r.getErrorMessage().orElse(\"Unknown error\"));\n        return ResponseEntity.status(500).body(r.getErrorMessage().orElse(\"Advanced search failed\"));\n    }\n    List<SearchResult> list = r.getValue().get();\n    int originalSize = list.size();\n    if (!keyword.isEmpty()) {\n        list = list.stream().limit(Math.max(1, limit)).collect(Collectors.toList());\n    }\n    logger.info(\"Advanced search completed with {} filtered results ({} original results) for keyword: '{}', using ES: {}\", \n                list.size(), originalSize, keyword, useEs);\n    return ResponseEntity.ok(list);\n}\n```\n\n## 4. 关键数据结构\n\n### 4.1 SearchMeta\n\n文件搜索元数据，包含文件的基本信息和内容：\n\n- `filePath`: 文件相对路径\n- `fileName`: 文件名\n- `parentDir`: 父目录\n- `fileType`: 文件类型\n- `title`: 标题（可能从文档内容提取）\n- `content`: 提取的文本内容\n- `size`: 文件大小\n- `modifiedAt`: 最后修改时间\n\n### 4.2 EsDocument\n\n映射到Elasticsearch索引的文档对象：\n\n- 与SearchMeta类似的字段结构\n- 专为Elasticsearch索引优化的设计\n- 包含TOON结构嵌套字段（用于文档结构索引）\n\n### 4.3 SearchRequest\n\n搜索请求参数：\n\n- `keyword`: 搜索关键词\n- `fileType`: 文件类型过滤\n- `parentDir`: 目录过滤\n- `minSize`/`maxSize`: 大小范围过滤\n- `startTime`/`endTime`: 时间范围过滤\n\n### 4.4 SearchResult\n\n搜索结果对象：\n\n- `filePath`: 文件路径\n- `fileName`: 文件名\n- `fileType`: 文件类型\n- `snippet`: 包含关键词的内容片段（带高亮）\n- `score`: 相关性评分\n- `modifiedAt`: 最后修改时间\n\n## 5. 配置与依赖\n\n### 5.1 核心配置项\n\n在`application.yml`中配置：\n\n```yaml\n# 扫描配置\napp:\n  scan:\n    root-dirs: /path/to/docs  # 扫描的根目录\n  \n# Elasticsearch配置\napp:\n  search:\n    use-es: true  # 是否启用Elasticsearch\n    es-index-name: nexus-lite-docs  # 索引名称\n\n# Elasticsearch连接配置\nspring:\n  elasticsearch:\n    uris: http://localhost:9200  # Elasticsearch服务地址\n```\n\n### 5.2 主要依赖\n\n- **Elasticsearch 8.x**: 全文搜索引擎\n- **Spring Data Elasticsearch**: Elasticsearch集成\n- **PDFBox**: PDF文件处理\n- **Apache POI**: Office文件处理\n- **JSoup**: HTML解析\n- **Jackson**: JSON处理\n\n## 6. 错误处理与日志\n\n系统在关键环节都有完善的错误处理和日志记录：\n\n- 文件内容提取失败时记录详细错误信息\n- 增强的Elasticsearch可用性检测，包括连接状态和索引存在性验证\n- 搜索请求失败时的自动降级机制，确保即使ES不可用也能提供基本搜索功能\n- 搜索请求失败的友好错误响应\n- 性能关键操作的详细日志记录\n- 完整的错误追踪和调试信息\n\n## 7. 性能优化\n\n### 7.1 索引优化\n\n- 合理的分片和副本设置（单节点环境下副本为0）\n- 字段权重设置，优先匹配更重要的字段\n- 适当的分词器配置，优化中文搜索效果\n\n### 7.2 查询优化\n\n- 使用过滤查询提高性能\n- 合理的分页设置\n- 避免全表扫描操作\n\n### 7.3 缓存策略\n\n- 利用Elasticsearch自身缓存\n- 应用层缓存热点搜索结果\n- 智能缓存失效策略\n\n## 8. 扩展性设计\n\n- **模块化架构**：搜索功能与其他模块解耦\n- **可插拔设计**：支持切换不同的搜索引擎实现\n- **自定义扩展点**：支持添加新的文件类型处理器\n- **配置驱动**：通过配置灵活控制功能行为\n\n## 9. 监控与维护\n\n- 索引健康状态监控\n- 搜索性能指标收集\n- 定期重建索引机制\n- 索引大小和文档数量监控\n\n## 10. 总结\n\nNexus-Lite的全文检索功能通过模块化设计和优秀的架构，提供了高效、可扩展的文档搜索能力。系统集成了多种文件格式处理、智能内容提取、Elasticsearch索引管理和高级搜索功能，为用户提供了良好的文档检索体验。\n\n通过合理的性能优化和错误处理，系统能够稳定高效地运行，支持大规模文档集合的检索需求。同时，灵活的配置和扩展性设计也使得系统能够适应不同的部署环境和业务需求。",
  "size" : 12854,
  "modifiedAt" : 1764639821582,
  "id" : "技术案例/full-text-search-implementation.md",
  "content" : "# Nexus-Lite 全文检索实现文档\n\n## 1. 系统概述\n\nNexus-Lite的全文检索功能提供了高效的文档内容搜索能力，支持多种文件格式的内容提取、索引和检索。该功能基于Elasticsearch实现，支持全文搜索、多条件筛选、结果高亮等高级特性。\n\n## 2. 核心工作流程\n\n全文检索功能的完整工作流程包含以下主要步骤：\n\n1. **文档扫描与内容提取**：系统扫描配置的根目录，提取支持的文件格式的内容\n2. **元数据生成与存储**：将提取的内容和文件元数据生成SearchMeta对象并本地存储\n3. **Elasticsearch索引同步**：将SearchMeta数据转换并同步到Elasticsearch索引\n4. **用户查询处理**：接收并处理用户的搜索请求\n5. **结果高亮与返回**：处理搜索结果，高亮关键字并返回给用户\n\n## 3. 核心组件详解\n\n### 3.1 文档扫描与内容提取\n\n#### FileScanServiceImpl\n\n负责扫描文件系统，检测文件变化，并触发内容提取：\n\n- 扫描配置的根目录（通过`app.scan.root-dirs`配置）\n- 使用多线程高效处理大量文件\n- 调用SearchMetaBuilder提取文件内容\n- 将提取的SearchMeta保存到本地文件系统\n- 发布扫描完成事件（ScanFinishedEvent）\n\n关键代码流程：\n```java\n// 扫描目录并收集文件信息\nfor (String dirPath : dirPaths) {\n    Path rootPath = Paths.get(dirPath);\n    // 递归遍历文件树\n    Files.walkFileTree(rootPath, new SimpleFileVisitor<Path>() {\n        @Override\n        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\n            // 检查文件是否需要处理\n            if (shouldProcessFile(file)) {\n                // 提取文件元数据\n                metas.add(searchMetaBuilder.build(rootPath, file, lastModified));\n            }\n            return FileVisitResult.CONTINUE;\n        }\n    });\n}\n// 保存搜索元数据\nsearchMetaRepository.saveAll(metas);\n```\n\n#### SearchMetaBuilder\n\n负责从不同格式的文件中提取内容：\n\n- 支持多种文件格式的内容提取：PDF、DOCX、XLSX、MD、HTML、CSV等\n- 针对不同文件类型使用专门的解析器\n- 提取文件名、路径、内容、修改时间等元数据\n- 处理大文件时进行智能截断，避免内存溢出\n\n关键实现：\n```java\npublic SearchMeta build(Path rootPath, Path filePath, long modifiedAt) {\n    // 提取基本信息\n    String rel = rootPath.relativize(filePath).toString().replace(\"\\\\\", \"/\");\n    String fileName = filePath.getFileName().toString();\n    FileType type = FileType.fromExtension(ext);\n    \n    // 根据文件类型提取内容\n    if (type == FileType.PDF) {\n        // 使用PDFBox提取PDF内容\n        // 只提取头部和尾部几页，兼顾内容覆盖和性能\n    } else if (type == FileType.DOCX) {\n        // 使用Apache POI提取Word文档内容\n    } else if (type == FileType.MD) {\n        // 直接读取文本内容\n    }\n    \n    // 限制内容长度，避免过大的JSON\n    if (contentText != null && contentText.length() > 20000) {\n        contentText = contentText.substring(0, 20000);\n    }\n    \n    // 创建并返回SearchMeta对象\n    return new SearchMeta(rel, fileName, parentDir, type, title, contentText, size, modifiedAt);\n}\n```\n\n### 3.2 元数据存储与管理\n\n#### SearchMetaRepository\n\n负责SearchMeta数据的持久化和加载：\n\n- 将SearchMeta列表保存为JSON文件\n- 从JSON文件加载SearchMeta数据\n- 处理文件IO异常\n- 使用Jackson库进行JSON序列化和反序列化\n\n关键代码：\n```java\npublic Result<List<SearchMeta>> saveAll(List<SearchMeta> list) {\n    try {\n        // 确保数据目录存在\n        Path dir = Paths.get(dataDir);\n        if (!Files.exists(dir)) Files.createDirectories(dir);\n        // 保存为JSON文件\n        Path jsonPath = dir.resolve(SEARCH_META_JSON);\n        objectMapper.writeValue(jsonPath.toFile(), list);\n        return Result.success(list);\n    } catch (Exception e) {\n        // 错误处理\n        return Result.failure(\"Failed to save search meta: \" + e.getMessage());\n    }\n}\n```\n\n### 3.3 Elasticsearch索引同步\n\n#### EsIndexService\n\n负责将本地SearchMeta数据同步到Elasticsearch索引：\n\n- 只有当`app.search.use-es=true`时才会启用\n- 从SearchMetaRepository加载所有元数据\n- 将SearchMeta转换为EsDocument对象\n- 批量保存到Elasticsearch索引\n- 支持清除旧索引并重建\n\n核心逻辑：\n```java\n@ConditionalOnProperty(\"app.search.use-es\")\npublic Result<Long> reindexFromMeta(boolean clear) {\n    // 加载所有SearchMeta数据\n    Result<List<SearchMeta>> loadResult = searchMetaRepository.loadAll();\n    if (loadResult.isFailure()) {\n        return Result.failure(loadResult.getErrorMessage().orElse(\"Failed to load search meta\"));\n    }\n    \n    // 转换为EsDocument\n    List<EsDocument> docs = loadResult.getValue().get().stream()\n        .map(meta -> new EsDocument(\n            meta.getFilePath(),\n            meta.getFileName(),\n            meta.getParentDir(),\n            meta.getFileType(),\n            meta.getTitle(),\n            meta.getContent(),\n            meta.getSize(),\n            meta.getModifiedAt()\n        ))\n        .collect(Collectors.toList());\n    \n    // 批量保存到Elasticsearch\n    repo.saveAll(docs);\n    return Result.success((long) docs.size());\n}\n```\n\n#### EsDocumentRepository\n\n基于Spring Data Elasticsearch的仓库接口：\n\n- 继承ElasticsearchRepository提供基本数据访问功能\n- 支持Elasticsearch的CRUD操作\n- 自动映射EsDocument对象到Elasticsearch索引\n\n```java\npublic interface EsDocumentRepository extends ElasticsearchRepository<EsDocument, String> {\n    // 提供基本的数据访问功能\n}\n```\n\n### 3.4 搜索服务实现\n\n#### EsSearchService\n\n实现全文检索功能：\n\n- 构建Elasticsearch查询DSL\n- 支持多字段搜索（content、title、fileName等）\n- 处理过滤条件（文件类型、目录、大小、时间等）\n- 实现搜索结果高亮显示\n- 截取关键片段展示给用户\n\n搜索实现：\n```java\npublic Result<List<SearchResult>> search(SearchRequest request, int limit) {\n    // 构建搜索查询\n    Map<String, Object> query = new HashMap<>();\n    // 多字段匹配查询\n    Map<String, Object> multiMatch = new HashMap<>();\n    multiMatch.put(\"query\", request.getKeyword());\n    multiMatch.put(\"fields\", Arrays.asList(\"content\", \"title\", \"fileName\"));\n    multiMatch.put(\"type\", \"best_fields\");\n    \n    // 添加过滤条件\n    if (request.getFileType() != null) {\n        // 添加文件类型过滤\n    }\n    \n    // 执行搜索\n    SearchHits<EsDocument> searchHits = operations.search(searchQuery, EsDocument.class);\n    \n    // 处理结果和高亮\n    List<SearchResult> results = new ArrayList<>();\n    for (SearchHit<EsDocument> hit : searchHits.getSearchHits()) {\n        EsDocument doc = hit.getContent();\n        // 处理高亮显示\n        String snippet = extractSnippetWithHighlight(hit, request.getKeyword());\n        results.add(new SearchResult(\n            doc.getFilePath(),\n            doc.getFileName(),\n            doc.getFileType(),\n            snippet,\n            hit.getScore(),\n            doc.getModifiedAt()\n        ));\n    }\n    \n    return Result.success(results);\n}\n```\n\n#### SearchController\n\n处理HTTP搜索请求：\n\n- 提供基础搜索和高级搜索API\n- 支持重建索引操作\n- 实现ES搜索失败时自动降级到本地搜索的机制\n- 增强的ES可用性检测和故障转移\n- 统一的错误处理和日志记录\n\n```java\n@PostMapping(\"/advanced\")\npublic ResponseEntity<?> advancedSearch(@RequestBody SearchRequest request, @RequestParam int limit) {\n    String keyword = (request.getKeyword() == null ? \"\" : request.getKeyword()).trim();\n    boolean useEs = (esSearchService != null && esSearchService.enabled());\n    logger.info(\"Advanced search request received with keyword: '{}', limit: {}, using ES: {}\", keyword, limit, useEs);\n    \n    Result<List<SearchResult>> r;\n    if (useEs) {\n        // 首先尝试使用ES搜索\n        r = esSearchService.search(request, limit);\n        // 如果ES搜索失败，自动降级到本地搜索\n        if (r.isFailure()) {\n            logger.warn(\"ES search failed, falling back to local search: {}\", r.getErrorMessage().orElse(\"Unknown error\"));\n            r = advancedSearchService.search(request, limit);\n        }\n    } else {\n        logger.info(\"Elasticsearch not enabled or unavailable, using local search\");\n        r = advancedSearchService.search(request, limit);\n    }\n    \n    if (r.isFailure()) {\n        logger.warn(\"Advanced search failed for keyword: '{}', error: {}\", \n                    keyword, r.getErrorMessage().orElse(\"Unknown error\"));\n        return ResponseEntity.status(500).body(r.getErrorMessage().orElse(\"Advanced search failed\"));\n    }\n    List<SearchResult> list = r.getValue().get();\n    int originalSize = list.size();\n    if (!keyword.isEmpty()) {\n        list = list.stream().limit(Math.max(1, limit)).collect(Collectors.toList());\n    }\n    logger.info(\"Advanced search completed with {} filtered results ({} original results) for keyword: '{}', using ES: {}\", \n                list.size(), originalSize, keyword, useEs);\n    return ResponseEntity.ok(list);\n}\n```\n\n## 4. 关键数据结构\n\n### 4.1 SearchMeta\n\n文件搜索元数据，包含文件的基本信息和内容：\n\n- `filePath`: 文件相对路径\n- `fileName`: 文件名\n- `parentDir`: 父目录\n- `fileType`: 文件类型\n- `title`: 标题（可能从文档内容提取）\n- `content`: 提取的文本内容\n- `size`: 文件大小\n- `modifiedAt`: 最后修改时间\n\n### 4.2 EsDocument\n\n映射到Elasticsearch索引的文档对象：\n\n- 与SearchMeta类似的字段结构\n- 专为Elasticsearch索引优化的设计\n- 包含TOON结构嵌套字段（用于文档结构索引）\n\n### 4.3 SearchRequest\n\n搜索请求参数：\n\n- `keyword`: 搜索关键词\n- `fileType`: 文件类型过滤\n- `parentDir`: 目录过滤\n- `minSize`/`maxSize`: 大小范围过滤\n- `startTime`/`endTime`: 时间范围过滤\n\n### 4.4 SearchResult\n\n搜索结果对象：\n\n- `filePath`: 文件路径\n- `fileName`: 文件名\n- `fileType`: 文件类型\n- `snippet`: 包含关键词的内容片段（带高亮）\n- `score`: 相关性评分\n- `modifiedAt`: 最后修改时间\n\n## 5. 配置与依赖\n\n### 5.1 核心配置项\n\n在`application.yml`中配置：\n\n```yaml\n# 扫描配置\napp:\n  scan:\n    root-dirs: /path/to/docs  # 扫描的根目录\n  \n# Elasticsearch配置\napp:\n  search:\n    use-es: true  # 是否启用Elasticsearch\n    es-index-name: nexus-lite-docs  # 索引名称\n\n# Elasticsearch连接配置\nspring:\n  elasticsearch:\n    uris: http://localhost:9200  # Elasticsearch服务地址\n```\n\n### 5.2 主要依赖\n\n- **Elasticsearch 8.x**: 全文搜索引擎\n- **Spring Data Elasticsearch**: Elasticsearch集成\n- **PDFBox**: PDF文件处理\n- **Apache POI**: Office文件处理\n- **JSoup**: HTML解析\n- **Jackson**: JSON处理\n\n## 6. 错误处理与日志\n\n系统在关键环节都有完善的错误处理和日志记录：\n\n- 文件内容提取失败时记录详细错误信息\n- 增强的Elasticsearch可用性检测，包括连接状态和索引存在性验证\n- 搜索请求失败时的自动降级机制，确保即使ES不可用也能提供基本搜索功能\n- 搜索请求失败的友好错误响应\n- 性能关键操作的详细日志记录\n- 完整的错误追踪和调试信息\n\n## 7. 性能优化\n\n### 7.1 索引优化\n\n- 合理的分片和副本设置（单节点环境下副本为0）\n- 字段权重设置，优先匹配更重要的字段\n- 适当的分词器配置，优化中文搜索效果\n\n### 7.2 查询优化\n\n- 使用过滤查询提高性能\n- 合理的分页设置\n- 避免全表扫描操作\n\n### 7.3 缓存策略\n\n- 利用Elasticsearch自身缓存\n- 应用层缓存热点搜索结果\n- 智能缓存失效策略\n\n## 8. 扩展性设计\n\n- **模块化架构**：搜索功能与其他模块解耦\n- **可插拔设计**：支持切换不同的搜索引擎实现\n- **自定义扩展点**：支持添加新的文件类型处理器\n- **配置驱动**：通过配置灵活控制功能行为\n\n## 9. 监控与维护\n\n- 索引健康状态监控\n- 搜索性能指标收集\n- 定期重建索引机制\n- 索引大小和文档数量监控\n\n## 10. 总结\n\nNexus-Lite的全文检索功能通过模块化设计和优秀的架构，提供了高效、可扩展的文档搜索能力。系统集成了多种文件格式处理、智能内容提取、Elasticsearch索引管理和高级搜索功能，为用户提供了良好的文档检索体验。\n\n通过合理的性能优化和错误处理，系统能够稳定高效地运行，支持大规模文档集合的检索需求。同时，灵活的配置和扩展性设计也使得系统能够适应不同的部署环境和业务需求。",
  "lastModified" : 1764639821582
}, {
  "filePath" : "技术案例/华为研发IPD流程介绍.docx",
  "fileName" : "华为研发IPD流程介绍.docx",
  "parentDir" : "技术案例",
  "fileType" : "DOCX",
  "title" : "华为研发IPD流程介绍.docx",
  "contentText" : "RDPM\n商业目标\n项目目标与组织的商业目标对齐\n组织角色\n商业目标对齐\n参与产品开发项目的商业目标的制定\n和决策者在商业目标上的沟通 \n和 PDT 核心代表在商业目标上的沟通 \n和外部客户在商业目标上的沟通 \n和项目成员在商业目标上的沟通\n项目生命周期模型\n项目指导流程\n项目指导流程是 OSG 对项目进行指导的管理活动，包括评审点及评审流程，体现组织\n上层对下层的指导职能。\nOSG 的指导职能\n一是通过阶段评审和例行的监控确保项目及其输出能与组织及商业的方向保持一致；\n二是为项目目标的达成提供必要的支持，包括对下属项目团队的激励、对项目投入的资源保障、项目工作方法的建议等\n评审点\n RDR 评审点\n一个 RDR 是正式的、有计划的、预先定义好的评审点，这个点对项目是否与商业方向\n一致及资源的投入进行评审。 \nRDR 申请标志着该点的前一个阶段研发域项目管理各项工作已准备充分，可以接受\nOSG 评审并指明下一阶段项目方向、确保下一阶段资源的顺利投入。 \nOSG 通过 RDR 评审，判断项目是否与组织战略、商业方向、客户需求保持一致。评\n审范围会依据项目所处的生命周期阶段不同而存在差异。每个评审点都会关注当期阶\n段项目的状态、与其它项目的依赖关系、资源投入与使用状况、各职能部门对项目资\n源投入的承诺情况等。 \nRDR0\n意义：\n项目启动的项目管理评审点。\n标志\n其通过标志着项目任务书被确认和评审通过，项目正式立项；进入概念阶段。\n目的\nRDR0 评审的目的是为了保证即将立项的项目在前期已经站在组织角度考虑了项目的商业战略符合度，确保以客户为中心的同时也考虑了实现的可行性。\nRDR1\n意义\n项目概念阶段结束时的项目管理评审点\n标志\n其通过标志着项目概念与初步项目计划的确立；项目进入计划阶段\n目的\n评审的目的是确保项目的执行策略建立在业务与技术可行性充分分析的基础之上，项目的进展与组织的业务策略上下对齐。\nRDR2\n意义\n项目计划阶段结束时的项目管理评审点\n标志\n其通过标志着最终项目计划被确认和批准，项目进入开发阶段\n目的\n的是为了保证整个项目的实施计划的系统性和可行性，并与项目的最终目标上下对齐。\nRDR3\n意义\n项目执行（开发）阶段结束时的项目管理评审点\n标志\n其通过标志着项目开发工作按计划完成，可将交付物提供给接收人/客户验收；项目进入验证阶段。\n目的\n是为了确认项目开发交付件的质量和范围与项目目标一致、与组织的业务策略一致。\nRDR4\n意义\n项目执行（验证）阶段结束时的项目管理评审点\n标志\n其通过标志着项目输出及交付件通过验收；项目进入发布阶段\n目的\n是确保项目的交付件已经验收且后续项目质量可以得到保证。 \nRDR5\n意义\n项目执行（发布）阶段结束时的项目管理评审点\n标志\n其通过标志着项目结束\n目的\n是进行项目经验总结汇报，确认项目按照项目计划完成，并批准项目关闭\n特殊评审点 \n提前执行评审点(EER- Early Execution Review）\n 计划变更评审点（PCR-Plan Change Review）\n临时评审点\n终止项目评审点\nRDR 评审操作流程 \n过程\n  项目团队根据自检表完成检视。 \n  沟通材料提前发送给 OSG 成员并完成会前沟通，让 OSG 成员了解项目情况，澄清问题。 \n  项目评审会上由项目经理向 OSG 汇报。OSG 成员从项目目标对齐、项目状态、项目组合状态、资源承诺等方面进行评估，对有争议的部分进行讨论并给出综合的评审意见。 \n  发布评审结论并归档会议纪要。 \nRDR 评审要素\n四个维度\n项目目标对齐\n项目状态\n项目组合状态\n资源承诺\n RDR 评审结论 \n三个结论\nGO：项目继续执行\nNO GO：项目终止。\nREDIRECT：项目执行未达到评审点要求，项目团队需重新完善相关工作，再次提交 RDR 评审。 \n项目管理流程\n项目管理流程定义了项目从立项准备到关闭过程中各个阶段的所有项目管理活动和交\n付文档。此流程指导项目经理聚焦项目目标，在限定的范围、时间、成本、资源内确\n保项目交付。\n 项目管理过程组 \n五个过程组\n  分析过程组：理解和评估任务，确定目标。 \n  计划过程组：明确范围，细化目标，制定计划。 \n  执行过程组：组织资源按计划完成各项任务。 \n  控制过程组：定期度量和监控进展，发现问题，采取必要的纠正措施。 \n  移交过程组：将输出结果移交给客户或接收者进行验收。 \n 项目生命周期阶段 \n在研发项目生命周期模型中，项目生命周期阶段以 RDR 评审点为界限，划分为七个阶\n段\n七个阶段\n  项目立项准备阶段 \n  立项准备阶段，一定要关注项目的技术准备度。对于关键平台或技术项目，要与相关项目经理仔细沟通，再细也不为过。\n定义\n项目立项准备阶段就是分析项目的立项价值，并从资源、技术、组织等方面对项目的可行性进行评估，促使项目达到可以立项的状态。 \n关键参与角色\n项目经理\n在项目正式立项前主动参与到项目任务书开发团队中，分析项目立项价\n值，考虑组织、资源、技术准备度等方面，确保项目任务书的可行性。 \n专家\n从专业角度系统考虑项目的可行性。专家类型根据项目任务和具体目标确定。\n在典型的 V/R/C 版本研发项目中，此阶段有系统工程师参与。 \n主要项目管理活动\n阶段分析活动：\n  分析立项价值（投入产出、内部价值） \n  分析组织的可支撑性（如开发模式、技术准备度、资源匹配度） \n  分析项目依赖关系、利益干系人 \n  识别项目风险 \n  界定项目的整体范围 \n  分析项目的目标成本 \n  参与制定项目任务书 \n阶段计划活动： \n  制定概念阶段的详细计划和项目初步的里程碑时间点 \n阶段执行和控制活动： \n  接受上级分配的立项准备任务 \n  准备 RDR0 的评审 \n输入\n  组织目标 \n  组织环境及结构 \n  商业价值 \n  客户要求 \n  资源使用状态 \n  组织要求 \n  组织过程资产 \n工具、技术和模板\n  项目任务书模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  待批准的项目任务书 \n  项目状态报告 \n  需求规格书 \n  RDR0 汇报胶片 \n  项目概念阶段 \n  概念阶段对方案讨论的充分性、完整性是管理控制的关键。\n定义\n项目概念阶段就是根据项目任务书的要求搭建项目环境、组建项目团队、对任务书进行目标分解、形成初步的实现方案和概要计划。 \n关键参与角色\n项目经理：组织项目涉及的各个专业领域的专家对项目进行分析。 \n项目管理支撑人员：包括项目助理、质量人员、配置人员等，协助项目经理完成项目环境的搭建（建项目文件夹、Teamroom、度量表、项目编码申请）。 \n各领域专家：包括系统设计专家、开发技术专家。主要从各自专业领域出发，贡献出对项目概要计划的建议。这个阶段的活动，特别需要多个专业领域的专家协同配合的。 \n项目干系人：包括依赖关系相关人、项目赞助人等角色。项目经理在进行概要分析的同时，还应该与项目干系人充分沟通，确保与项目涉及到的周边部门或组织的关键人物沟通到位。 \n主要项目管理活动\n阶段分析活动：\n  分析设计方案的价值 \n  分析项目范围 \n  识别、分析项目风险 \n  初步明确项目依赖关系 \n阶段计划活动： \n  制定项目计划阶段的详细计划 \n  制定初步的整体项目计划 \n  制定初步的质量策划方案 \n  预估不同方案的项目费用、人力资源 \n  细化项目的目标成本 \n阶段控制活动： \n  定期的项目会议及项目汇报 \n  完成项目检查点审视 \n阶段执行活动：\n  接受项目任务书，搭建项目环境\n  执行各种分析及计划活动 \n  准备 RDR1 评审 \n输入\n  已批准的项目任务书 \n  客户需求 \n  商业价值 \n  组织目标 \n  组织环境与结构 \n  资源使用状态 \n  组织过程资产 \n工具、技术和模板\n  项目计划模板 \n  项目预算模板 \n  项目风险管理工具 \n  项目计划工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  待批准的初步项目集成计划和计划阶段详细计划 \n  项目状态报告 \n  刷新的需求规格书 \n  RDR1 汇报胶片 \n  初步的质量策划方案 \n  调整后的项目预算 \n  细化的项目目标成本 \n  备选项目实施方案和资源预算 \n  项目风险分析报告 \n  项目计划阶段 \n1.  计划要分层。虽说每个阶段都要做计划，但计划的难度、详细度是随阶段特点而\n不同。 \n2.  计划要讨论和沟通。做计划时，一定要揪着相关人员一起参与，才能减少变化和\n反复。比如开发阶段的计划，测试经理、PCB 设计责任人、软件经理、硬件经理\n都应是座上宾。 \n3.  计划要基线化。朱理发现，皮姆每次做完计划，一定会发送给相关人员并要求严\n格遵照执行。后续会议，各计划涉及人员必须按照计划详细汇报进展状态，计划\n会根据讨论情况修订后再次发布。一份计划，会作为基线一直跟踪到底。 \n4.  计划与变化是双重奏。项目的变化源于环境的不可控。对于影响项目的变化，应\n该积极面对。每次遇到市场需求变动，皮姆都不会抱怨，而是重新理解客户真正\n的要求，再与系统设计师、相关采购、技服、制造经理等利益相干人沟通变更的\n事项，将变更融入到新的计划版本中。变化对他而言，似乎是一种乐趣。 \n5.  计划要方便管理。计划是用于指导具体工作的，计划的展示形式要考虑到查询和\n使用的方便性，皮姆做的计划，无论是查询业务里程碑还是资源分配，都可以一\n目了然，计划中还会对风险较大的任务用特殊颜色标识出来，便于后期重点关\n注。最主要的，皮姆的计划粗细有致，任务间关系明确，调整起来可以一步到\n位。 \n定义\n项目计划阶段制定完整的项目计划，并最后确定项目的目标与范围，指导后续阶段项目的执行，它是项目成功的保证。\n关键参与角色\n项目经理：组织项目管理团队和各领域专家一起拟制项目的整体计划。 \n项目管理支撑人员：协助项目经理完成各专项领域的计划\n各领域技术专家：提供所需的评估支持和建议（如规模估计、难度系数判断、WBS 工\n作分解等）。 \n主要项目管理活动\n阶段分析、计划活动：\n  项目价值定义 \n  确定项目范围 \n  分析实施策略，定义项目活动并对活动排序 \n  分析并定义项目目标成本 \n  分析项目依赖关系 \n  分析项目风险，制定风险应对计划 \n  制定项目生命周期整体计划 \n  制定项目质量计划 \n  制定完整的进度计划及开发阶段详细计划 \n  制定沟通管理计划 \n  费用及人力估计与预算 \n  规划采购 \n阶段控制活动： \n  定期的项目会议及项目汇报 \n  完成项目检查点审视 \n阶段执行活动：\n  执行分析、计划活动 \n  准备组建项目开发团队 \n  质量保证和控制 \n  准备 RDR2 评审 \n输入\n  需求规格书 \n  项目设计方案 \n  组织目标 \n  组织资源使用状态 \n  相关基线数据 \n  组织过程资产 \n工具、技术和模板\n  项目计划模板 \n  项目预算模板 \n  项目计划工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  待批准的集成项目计划\n  项目目标 \n  项目策略 \n  利益干系人分析汇总 \n  项目价值 \n  项目范围 \n  质量计划 \n  项目目标成本 \n  项目进度表 \n  项目预算 \n  项目风险管理计划 \n  风险响应计划 \n  项目人力资源计划 \n  项目组织模式和运作方式 \n  沟通计划 \n  刷新的需求规格书 \n  分解到子项目或项目工作组的规格书 \n  初步的物料采购供应商合同 \n  项目状态报告 \n  RDR2 汇报胶片 \n  项目执行(开发)阶段 \n项目团队里任何一个成员，都应该对照计划，检查自己工\n作相关项的准备和完成情况。即使没有 POP 或秘书跟踪，也应该做到自我管理。这是\n一个职业人的基本要求。\n定义\n项目执行（开发）阶段是项目生命周期模型中执行项目计划的阶段，在项目开发阶段，项目成果完成并被集成。\n关键参与角色\n项目经理：对项目整体负责，关注项目的团队建设、资源到位和相关支撑活动的完\n成。 \n项目管理支撑人员：协助项目经理对项目计划中的相关部分进行管理。 \n开发组/测试组等：开发阶段的执行主力，将计划转变为实际的项目交付。 \n主要项目管理活动\n阶段计划活动： \n  结合客户或验收方要求，制定验证阶段的详细计划 \n项目控制活动： \n  根据计划监控整体项目执行（如定期的项目会议及项目汇报、阶段回顾、检查点\n审视） \n  项目价值监控 \n  范围变更控制 \n  项目目标成本实现与验证 \n  项目费用控制 \n  进度控制 \n  质量保证和控制 \n  风险控制 \n项目执行活动：\n  与利益干系人、项目团队的沟通管理 \n  管理项目团队 \n  根据计划执行项目活动 \n  执行质量保证活动 \n  采购实施（识别关键物料清单，新器件采购认证） \n  准备 RDR3 评审 \n输入\n  需求规格书 \n  项目计划书 \n  变更请求 \n  项目状态报告 \n工具、技术和模板\n  变更申请书模板 \n  项目风险跟踪工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  待验证的项目交付件（软件、硬件、配套资料等） \n  项目状态报告 \n  刷新的需求规格书（含验收标准） \n  修订的供应商合同 \n  修订人力资源计划 \n  经批准的变更请求 \n  待批准的项目验证计划/策略 \n  RDR3 汇报胶片 \n  项目执行（验证）阶段 \n定义\n项目执行（验证）阶段就是按照项目计划执行项目的内、外部验证活动，确保项目能通过客户或接收者的正式认可\n关键参与角色\n项目经理：对项目整体验证计划及结果负责。同时，转维也是项目经理在这个阶段的\n关键职责之一。 \n项目管理支撑人员：协助项目经理实现对验证阶段的各项管理活动的履行。 \n开发组/测试组等：负责解决验证发现的问题、支撑转维工作。 \n主要项目管理活动\n阶段计划活动： \n  制定发布阶段的详细计划 \n阶段控制活动： \n  根据计划监控整体项目执行、管理过程变更 \n  项目价值监控 \n  范围变更控制 \n  项目目标成本实现与验证 \n  项目费用控制 \n  进度控制 \n  质量保证和控制 \n  风险控制 \n阶段执行活动：\n  与客户或验收方、项目团队的沟通管理 \n  管理项目团队，执行人力释放计划 \n  根据计划执行项目活动 \n  执行质量保证活动 \n  采购实施（确保物料及时采购到位） \n  供应商合同收尾 \n  准备 RDR4 评审 \n输入\n  待验证的项目交付件（软件、硬件、配套资料等） \n  刷新的项目任务书 \n  确认的需求规格清单 \n  项目计划书 \n  变更请求 \n  项目状态报告 \n工具、技术和模板\n  变更申请书模板 \n  项目风险跟踪工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  项目验收报告 \n  项目状态报告 \n  RDR4 汇报胶片 \n  待发布的项目交付件 \n  项目执行（发布）阶段 \n：移交工作要做到的效果就是给后续接口部门的人扶上马，送一\n程\n定义\n项目执行（发布）阶段就是按照项目计划执行项目对内、外部的发布活动，确保在项目关闭前把项目成果移交到接收者。 \n关键参与角色\n项目经理：作为整体计划的把控者，在此阶段关注移交界面的管理和经验教训总结。 \n项目管理支撑人员：协助项目经理管理发布阶段的移交工作。 \n开发组/测试组等：负责遗留问题的解决、技术支撑。 \n项目接收者：正式接收项目交付。 \n主要项目管理活动\n阶段控制活动： \n  根据计划监控整体项目执行、管理过程变更 \n  项目价值监控 \n  项目目标成本实现与验证 \n  项目费用控制 \n  进度控制 \n  质量保证和控制 \n  风险控制 \n阶段执行活动：\n  支持产品发布活动 \n  与接收方、项目团队的沟通管理 \n  管理项目团队，执行人力释放计划 \n  根据计划执行项目活动 \n  验收范围 \n  执行质量保证活动 \n  供应商合同收尾 \n  项目经验教训总结 \n  准备 RDR5 评审 \n输入\n  验证后的项目交付件（软件、硬件、配套资料等） \n  验收标准 \n  项目计划书 \n  变更请求 \n  项目状态报告 \n工具、技术和模板\n  项目风险跟踪工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  项目发布通告 \n  项目状态报告 \n  项目移交报告 \n  最终的项目交付件（软件、硬件、配套资料等） \n  RDR5 汇报胶片 \n  项目关闭阶段\n定义\n项目关闭阶段就是在项目完成并移交交付件后，对项目正式关闭的活动。\n关键参与角色\n项目经理：负责完成相关项目关闭的行政事务。 \n项目管理支撑人员：协助项目经理管理完成关闭阶段的行政事务，包括编码停用、文\n档归档等。 \n主要项目管理活动\n项目执行活动：\n  确认遗留问题的关闭 \n  项目文档归档 \n  停用项目编码 \n  项目团队庆功会 \n输入\n  项目任务书 \n  项目状态报告 \n  项目经验教训总结 \n  项目验收报告 \n工具、技术和模板\n  项目总结报告模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  项目总结报告 \n  项目文档 \n  项目管理能力提升的建议 \n简单流程，四个阶段\n对项目目标及开发策略较明确的简单研发项目（如补丁版本研发项目等），可以将\nRDR1、RDR2 合并，RDR3、RDR4、RDR5 合并，以简化过程管理。相应地概念、计\n划阶段合一，开发、验证、发布阶段合一，形成四个阶段的研发项目生命周期\n  项目立项准备阶段 \n  项目概念与计划阶段 \n  项目执行阶段 \n  项目关闭阶段\n管理流程总结\n1.  项目经理最核心的工作就是计划，计划的好坏，直接影响项目的执行力，也是项目经理管理能力的体现。 \n2.  沟通是贯穿整个管理过程的。沟通方式有很多种，面对面、邮件、电话，每种方式有不同的特点，要善于使用沟通的技巧，处理过程中人与人之间的合作问题。比如批评，可以通过邮件，给人一些调整情绪的空间。 \n3.  在项目最危机关头，项目经理有必要挺身而出，为项目力挽狂澜。\n4.  关注依赖关系，并不是被动地等待依赖方的信息。对于关键依赖，可以直接介入具体项目计划的管理。皮姆处理 Y 平台压缩 2 个月，对两个项目都是双赢的。\n5.  风险和问题管理，一定要激发群体的智慧，任何个人都不是圣人，总有疏漏之处，缺陷就要靠大家一起弥补。\n6.  不要害怕项目的变化，提前预防、及早布署是根本的解决办法。\n 7. 巧用项目开工会，抓住项目成员的心，确保每一个项目成员都完全领会项目目标及相关要求，确保项目的所有细节工作能完全到位，保证项目成功。 \n项目使能流程\n项目使能流程是指项目执行团队在项目生命周期过程中所运用的各种工作模式（包括流程、方法、模板、工具等）。 \n项目组织模型\n定义和目的\n项目组织模型是对项目的组织界面和沟通界面的概括和抽象，它为每项职能单元定义了相关的通用角色，这些角色可应用于各种类型的项目。此外，项目组织模型也提供了项目所有内部和外部利益干系人的全景图。\n项目组织模型图\n项目指导职能 \n项目指导职能确定项目方向，对项目重大事项进行决策，并对项目提供必要的支持。\n具有清晰角色和职责的项目指导职能可以减少项目决策的失误，降低项目决策的风\n险。 \n项目指导职能中的成员承担的角色职责与其拥有的资源和业务管理权力是相匹配的，\n对项目拥有业务决策权力的管理者需要参与到项目指导职能中，他们对项目的态度和\n行为会直接影响项目的成败。\n项目指导职能中的角色\n项目组合负责人（Project Portfolio Owner）\nRelationship: 项目运作指导团队（OSG：project Operation Steering Group）\n项目赞助人（Project Sponsor）\nRelationship: 项目运作指导团队（OSG：project Operation Steering Group）\n职能部门经理\nRelationship: 项目运作指导团队（OSG：project Operation Steering Group）\n项目运作指导团队（OSG：project Operation Steering Group）\nRelationship: 职能部门经理, 项目赞助人（Project Sponsor）, 项目组合负责人（Project Portfolio Owner）\n 项目管理职能\n项目管理职能对项目目标的达成负责。项目管理职能负责挑选适合项目管理的方法、\n技术和工具执行项目管理活动，识别所有对项目有威胁的偏差，并报告给项目指导职\n能，由项目指导职能来决定是否要改变项目范围。此外，项目管理职能还负责协调所\n有不同的利益干系人，确保项目目标在组织内各层级得到沟通和理解。\n项目管理职能可以对项目产生有效的、聚焦业务的管理和控制。项目管理职能可以缩\n短组织内各层级的报告路径，将管理层的注意力聚焦在对组织战略和财务有重大意义\n的项目上。\n项目管理职能的权力是由项目指导职能授权的，其权力仅限于项目生命周期内。项目\n管理职能拥有组织制定项目的执行策略和项目计划、分配职责和资源、管理项目活动\n的权力。 \n项目管理职能依赖于组织内管理者的支持，职能部门主管为项目提供资源，比如人\n力、设备、办公场所、方法和工具等。 \n项目管理职能中的角色\n项目经理\n项目管理支撑人员\n项目执行职能\n项目执行职能在项目内负责依照团队制定的项目管理规范执行项目，保证高质量交\n付、达成目标，满足客户需求。遇到自身无法解决的风险和问题时需要及时上报、获\n取支持，确保项目任务能够顺利落实，按时、高质量交付项目成果。 \n项目执行职能中的角色 \n项目执行小组\n项目中的关键角色和团队\n项目运作指导团队 \nOSG 是行使项目指导职能的团队，承担项目 RDR 评审的职责，对项目组合状态、项\n目目标、项目资源、项目状态进行评审，并在此基础上做出统一的决策。 \nOSG 是由固定角色组成的团队。如对于产品部下的 OSG，其成员包括：产品部\n（PDU）部长、PO 部长、SPDT/PDT 经理或指派的代表（如开发代表）、产品部职能部\n门主管(设计、开发、集成与验证测试、质量、资料、维护等)。 \n职责 \nOSG 负责在项目生命周期流程设置的 RDR 点对项目进行决策，要确保每个项目交付\n和资源使用完全符合组织的业务需要，并确保交付的效率最优。\n  管理项目业务方向，确保项目目标与组织目标一致。 \n  在项目的 RDR 评审点对项目进行决策，给出项目 GO/NO GO/Redirect（在 V/R/C版本研发项目中为 GO/GO WITH RISK/REDIRECT）的结论。 \n  任命项目管理团队，并为项目管理团队分配项目任务书。 \n  负责项目的预算落实。 \n  积极支持和鼓励项目经理，在资源分配和问题解决等方面对项目提供支持。 \n  促进和管理项目管理团队的绩效和行为，并对项目团队的成绩进行合适的奖励。 \n  接受项目求助，与组织内相关职能部门主管一起，及时解决问题。 \n  对作出的决策和评审事项进行跟踪，确保得到执行。 \n  OSG 不仅管理 V/R/C 版本研发项目，还负责本层级内部重大改进项目的管理。 \n权力 \n  对项目优先级进行评审和建议调整的权力。 \n  对预算进行管理的权力。 \n  对资源进行调配的权力。 \n  对项目 RDR 进行评审的权力。 \n  对项目进行奖惩的权力。 \n  对项目绩效进行评价的权力。 \n生命周期各阶段关键活动 \n在项目的不同阶段，项目运作指导团队成员应该按照项目指导流程中的定义执行相关\n活动。\n项目经理\n项目经理行使项目管理职能的权力。依照与 OSG 达成的合同，项目经理负责管理项目\n达成目标。 \n项目经理在不同的组织中可能会有不同的称谓，比如在 V/R/C 版本研发项目中，版本\n经理就是项目经理。对于内部改进项目，一般会任命改进项目经理。但不论哪类项\n目，项目经理的职责基本上都是一致的。\n职责 \n项目经理带领项目团队，制定项目计划，实施项目管理，对项目的目标达成和整体成\n功负责，通过项目的成功来支撑产品的市场成功。 \n项目的业务方向和范围是由包括项目赞助人（例如，版本研发项目的赞助人一般是\nSPDT/PDT 经理，PDU 内部改进项目的赞助人一般是 PDU 部长）在内的 OSG 团队定\n义和批准的，但是项目经理有权力和义务在项目实施中来实现项目价值的最大化。 \n项目经理与团队成员一起明确项目目标，以及团队中每个角色的应负职责，以支撑团\n队共同目标的达成。 \n  组织制定和集成项目计划，确保项目实施过程中的效率最高、风险最低。\n  制定项目范围说明书和工作分解结构（WBS）。 \n  与项目中各领域成员共同合作，将各领域部门的策略整合进项目计划中。 \n  制定和维护项目计划（包括进度计划、质量计划、人力预算、费用预算、依赖关系承诺书、风险管理计划、采购计划等），确保根据计划来执行各类活动\n  负责项目团队建设和资源管理，保证项目计划顺利执行。\n  设置合理的项目组织结构，将项目职责分配到项目管理团队和执行团队，定义项目内部清晰的汇报关系。 \n  建立、支持和领导项目团队，就项目任命和期望值进行沟通。 \n  从 OSG 获得承诺，确保所需要的资源的到位，需要时借调额外的项目资源。 \n  制定项目团队运作规则。 \n  确保子项目相应层面的资源到位。 \n  对项目的里程碑实施监控，确保实际成果符合计划目标。\n  评审与批准子项目项目目标、计划。 \n  组织、执行和监控项目 E2E 计划，确保子项目交付件的质量。 \n  持续跟进各子项目的进度，对开发过程中争议和问题进行及时有效决策，或积极向 OSG 汇报以达成一致。 \n  运用合适的项目管理工具和方法对项目进行分析，对识别的风险和问题及时进行处理。 \n  执行公司流程，使用最佳实践。 \n  管理项目沟通，获得各层级的支持，达成项目目标。 \n  项目经理从项目赞助人那里接受任务，确保项目团队对目标理解一致。 \n  项目经理负责与 OSG、与子项目经理/成员进行沟通。 \n  有效管理项目内、外部的依赖关系。 \n  召开项目团队例会。 \n  向 OSG 汇报项目状态。 \n  移交项目成果，进行项目总结。 \n  按时、按预算完成项目交付，确保项目交付件的质量。 \n  向接收人移交项目成果，保证移交过程的规范性，确保项目成果有效传递给内部和外部客户。 \n  总结项目开发经验，向相关流程 Owner 提出组织流程的优化建议。 \n  对职责范围之外的领域提出改进建议，为持续改进作出贡献。 \n  分享经验，为组织内其他项目经理提供支持，如为打造学习型组织作出贡献。\n权力\n  在预算范围内，合理使用项目资源（人、财、物等）的权力。 \n  项目经理对项目团队成员具有管理的权力，包括按项目需要安排和调整项目成员的工作，对项目成员在项目中的绩效给出最终的评价等。 \n  在授权范围内，对项目重要事项进行裁决的权力。 \n对于研发项目中的版本经理，其权力还包括：   按 IPD 流程组织研发各领域开展项目活动的权力。 \n生命周期各阶段关键活动 \n立项准备阶段\n概念阶段\n计划阶段 \n开发阶段 \n验证、发布阶段\n关闭阶段\n项目组合负责人\n项目组合负责人站在组织整体管理的高度来管理项目的组合，持续识别可能改变项目\n组合的事务并进行管理。这个职位一般由资深的管理者承担，如 IPMT 主任是产品线\n产品开发解决方案/项目的项目组合负责人，产品部（PDU）部长是本层级研发项目组\n合的负责人。 \n项目组合负责人的一些任务可以授权给相关的团队或个人处理，比如对于研发项目，\n拟制项目路标、对项目进行人力管道管理的职责就可以授权给 PO 部长承担。\n职责\n  制定多项目管理的策略，确保项目组合的策略与组织战略协调一致。 \n  负责全部项目组合的管理，并对在项目之间如何进行优先级排序做出决策。 \n权力\n担任项目组合负责人角色的管理者必须具有与要管理的项目组合的范围相对应的权\n力；具有决定不同项目之间的优先级排序，以及对项目间依赖关系的关键分歧进行决\n策的权力。 \n项目赞助人\n职责\n  管理项目的重大战略接口 \n  管理项目的业务机会 \n  管理项目范围 \n  行使领导力并做出榜样 \n项目管理支撑人员\n在大型复杂项目中，项目经理可以授权项目管理职责给一个或多个角色，即可以设置\n多个项目管理支撑人员，包括项目 QA、CMO、POP、项目财务等项目管理支撑角\n色。\nQA 的职责\nPOP 的职责\nCMO 职责\n项目财务的职责 \n职能部门经理 \n执行小组\n执行小组承担项目执行职能，根据项目计划分解下来的具体任务，执行开发工作并输\n出满足客户需求的交付件。 \n执行小组的组长是任务执行过程和交付的总负责人。 \n执行小组包括系统设计组、开发组、I&V 组、试验局验证组等。 \n系统设计组 \n开发组 \nI&V 组 \n试验局验证组\n接收人\n职责\n生命周期各阶段关键活动\n 其他利益干系人 \n项目组织模型在 V/R/C 版本研发项目中的应用\n项目运作指导团队承担项目指导职能，负责 RDR 决策、项目指导与支持、项目监控管理等工作。\n版本经理及项目 QA、POP、CMO 等组成的项目管理团队承担项目管理职能，负责按照项目管理流程对项目日常活动进行有效管理，达成项目目标。 \n设计组、开发组、I&V 组、资料组等执行小组承担项目执行职能，负责遵照研发流程执行项目开发工作，并输出交付件。\nOSG 的主要成员均来自产品部。产品部是研发部下的职能组织，是配备设计、开发、测试、项目管理、维护、资料、HR、质量等全兵种的作战单元。 \n  设计、开发、I&V、资料等职能部门（LM）负责长期能力建设、产品架构看护及本领域交付。 \n  PO 提供职业化的交付管理能力，承担 PDU 的版本交付管理。它是项目经理的资源管理部门。 \n产品部（PDU）作为项目管理与职能管理的汇聚点，负责平衡短期项目交付与长期能力建设的制约与矛盾，对某独立产品/平台或解决方案中某节点产品研发交付负全责。 \n一个典型的 V/R/C 版本研发项目所处的组织环境及主要的汇报关系\n项目运作指导团队运作方式 \n项目运作指导团队运作方式 \n  OSG 承担项目指导职能， 负责管理产品部（PDU）的所有项目\n团队成员\n产品部（PDU）部长\nPO 部长（发起和主持会议）\nPDT 开发代表（代表 PDT 行使产品管理职能）\n设计/开发/测试/资料/质量等职能部门主管\n职责\n  管理项目的业务方向，确保项目目标与 DCP 目标一致。 \n  负责项目 RDR 评审，对项目目标达成一致并正式批准项目，对项目是否进入下一个阶段进行评审和决策。 \n  对作出的决策进行跟踪，确保得到执行。 \n  协助项目经理处理在项目内部无法解决的问题，对项目给予指导，协调各项目过程中的临时资源需求。 \n  积极支持和鼓励项目经理，在资源分配和问题解决等方面对项目提供支持。 \n  管理对项目所分配资源的可用性。 \nOSG 决策与 IPMT/BMT 决策的差异\nOSG 对每个研发项目 RDR 点做出的结论和识别的问题作为整个产品包 DCP 决策时研\n发领域的预审意见，供 IPMT/BMT 在 DCP 决策时参考\n 开发代表与版本经理的职责定位\n开发代表有两个视角：作为研发项目群经理，协调与统筹多个版本研发项目的组合，负责产品的研发多项目管理；在 OSG 中代表 PDT 经理行使产品管理的职责。开发代表同时向 PDT 经理和 PO 部长进行汇报。 \n版本经理是 V/R/C 版本研发项目的项目经理，负责组织制定项目计划，分配项目工作，管理项目状态和交付件，在 RDR 点向 OSG 进行汇报，对项目的成功负责。版本经理的日常工作向开发代表汇报。 \n项目执行小组及其运作\n各执行小组承担项目执行职能，各执行小组组长向版本经理汇报。 \n典型的 V/R/C 版本研发项目的组织结构\n知识域\n 知识域的构成\n知识域与项目生命周期的关系\n知识域与过程组的关系 \n将项目管理的关键活动从逻辑上进行聚类，分为五大项目管理的过程组——分析、计\n划、执行、控制、移交。 \n项目管理各知识域的管理活动都分属于不同的过程组。一个活动只能属于某个过程\n组。 \n十大知识域\n整体管理\n定义\n整体管理是指对所有项目管理活动进行整合、统一管理，确保所有项目活动协调一致，并对项目涉及到的内外部利益干系人进行协调和管理，聚焦于项目目标的实现。\n描述\n项目价值、范围、质量、时间、目标成本、财务、风险、人力资源及采购管理之间相互作用，互相制约，而项目整体管理是对上述知识域之间关系的一种集成管理。 整体管理需要对项目中相互冲突的目标和方案进行平衡，统一分配资源，对齐计划，消除冲突，实施集成变更控制，保证项目有序开展。例如，扩大项目范围，项目费用和进度就会受到影响，也就需要通过整体管理进行平衡和协调。 项目整体管理也是一种从项目开始到项目结束、覆盖整个项目生命周期的综合管理。 项目整体管理同时要考虑项目各种活动与公司的日常管理相符合。比如项目的周期应该与公司的能力基线相符合，与外部的合作要符合公司信息安全管理规定，项目中的工程活动、管理活动要与公司的要求相一致等。 \n关键活动\n六大关键活动\n参与制定项目任务书（Charter）\n定义\n参与制定项目任务书是指了解项目的背景和目的，参与分析客户需求和期望，理解项目的制约、主要风险和总体要求（包括：总体预算、总里程碑、项目成功标准等）。 \n描述\n由项目赞助人签发的、正式批准项目成立的文件。内容一般包括项目的商业背景（包括项目的价值）、期望的目标（包括项目的范围、时间、费用）、组织结构、验收方式、约束条件等信息。\n项目经理应尽早参与到项目任务书开发中去，如在产品开发项目中，版本经理在 CDT需求定义开始之前参与到产品 Charter 开发中。这样保证项目经理充分理解项目背景和商业价值，准确理解项目的范围和目标，做好项目立项准备，保证项目的可行性，减少项目失败风险。 \n与其它活动的关系 \n过程要素\n关键输入：\n  客户合同：如果项目交付对象是外部客户，则合同是本过程的输入之一。\n  战略规划/业务规划(SP/BP)： \n  SP 中 3 到 5 年左右路标规划 \n  BP 中产品年度（12 个月）版本火车计划 \n  SP 和 BP 中的部分主要特性 \n  需求： \n  竞争对手分析 \n  公司或者产品线行业部门的规划（如 DFX 特性、OM 规划的远程升级等特性\n等） \n  客户需求分析报告（如来自各地区的需求电子流、需求调研报告等） \n  标准及建议：如 ITU-T 建议、国家标准、运营商标准等。 \n  组织过程资产：组织的标准、流程、政策、历史积累资料等。\n  模板（如项目任务书的模板等） \n  历史信息与经验教训知识库 \n  历史版本遗留问题 \n工具和技术：\n专家判断：在制定项目任务书的过程中，可考虑借助如下专家\n  来自组织相关部门的专家，如项目管理办公室（PMO）的项目管理专家 \n  外部顾问 \n  客户或项目赞助人 \n  行业与技术委员会的专家 \n  领域专家（SME），如可靠性专家等 \n关键输出：\n 项目任务书\n项目任务书主要记录初始产品商业计划，它将重点描述产品价值（为客户和公司带来\n的价值）、概念、可实现性、关键里程碑、开发模式和关键资源需求、以及风险策略\n等，即 4W＋2H（Why/What/When/Who + How/How much）。\n4W\nWhy，产品的价值\n  市场宏观形势（标准和管制、产业链、市场发展态势，竞争态势）如何？ \n  该产品的目标客户是谁、能为客户带来什么价值、给公司带来什么价值？ \n  该产品是否支持公司和产品线战略？ \n  该产品能否提高整个产品组合在市场的地位？ \nWhat，产品构想、产品市场需求，产品要做成什么样？\n包括描述清楚产品的成本要\n求、物理形态和功能、性能规格、整机、可服务性、演进、质量、运输等规格，从而\n回答以下问题：\n  该产品概念是否清晰？ \n  该产品所包含的需求包是否清晰、合理？ \n  该产品是否具有竞争力（需解剖竞争对手产品）？怎样构建？ \nWhen，产品关键里程碑与生命周期阶段的里程碑，预计推出的时间和对客户承诺的符合度。\nWho，开发项目如何组织？团队成员需具备哪些技能？\n2H\nHow，产品可实现性，给出关键实现路径策略\n，包括诸如平台、芯片、关键部件器\n件、关键技术以及 E2E 配套的策略，产品开发策略如自研或合作，IPR 策略，产品和\n版本升级路径和市场切换策略，从而回答以下问题： \n  如果自研需要哪些能力？如果不具备是否有其它方式获取这些能力？ \n  有哪些风险？如何规避？ \nHow much，需要投入多少资源？ \n关键动作：\n  参与讨论并深刻理解项目对客户的价值和对组织的价值。 \n  参与产品构想的可选架构、产品竞争力及关键技术可行性分析。 \n  参与需求价值审视和排序。 \n  参与项目执行策略和项目里程碑计划制定。 \n  参与项目人力资源投入分析。 \n  参与评估项目风险、约束及周边依赖合理性。 \n  参与审视项目任务书中的所有交付件是否完整。 \n制定项目计划\n定义\n制定项目计划是指编制、协调和整合所有项目子计划，制定一个连贯一致的项目计划文件，用于指导项目工作的执行和监控。\n描述\n通过制定项目计划，项目团队建立起项目的全景图，定义实现项目目标的过程和步\n骤。项目的计划活动可以用于预测项目结果，衡量项目阶段进展。 \n项目计划是多维的。项目计划不仅是进度计划，还包括项目范围、成本、质量、沟\n通、风险和采购等各方面的计划。项目的变更必须同时考虑所有维度的影响。 \n项目计划是分层的。根据项目复杂程度，一般项目计划分为 1/2 级概要计划和 3/4 级详\n细计划。 \n项目计划是渐进明细的。在项目初期，需要制定整个项目生命周期的高层计划以及最\n近一段时间的详细计划，等项目执行一段时间后，再根据情况修正整个项目生命周期\n的高层计划，同时制定下一段时间的详细计划，避免一开始就制定整个项目生命周期\n的详细计划。因为项目具有不确定性，这导致在项目初期很难预见到项目所有细节，\n一旦项目有变化，前期所制定的计划细节内容就失去作用。所以，项目计划需要通过\n渐近明细的方式进行不断完善，计划越近，活动粒度越细，计划越远，活动粒度越\n粗。 \n需要注意，高层计划到 RDR2 评审确认后就基线化了，后续若出现涉及高层计划方面\n的变动，一般情况下需要做 PCR。 \n项目计划必须考虑所有利益干系人的诉求。在制定项目计划时，项目团队应当鼓励所\n有利益干系人参与。利益干系人通过参与制定项目计划，确保项目计划是可行的，最\n终满足交付要求。\n项目计划确定项目的执行、监控和移交方式，其内容和详略程度会因项目的应用领域和复杂性而异。\n与其它活动的关系\n过程要素\n关键输入\n项目任务书\n其它计划活动的输出\n编制项目计划需要整合诸多计划过程的输出。其它计划过\n程所输出的任何基线和子计划，都是本过程的输入。此外，对这些文件的更新都\n会导致对项目计划的相应更新。 \n环境因素\n  政府或行业标准，如 3C 标准，ITU-T 建议等 \n  公司相关的政策与制度，如行业部门相关要求、质量政策、人事管理制度等 \n  项目管理信息系统，如单项目管理工具 JIRA、Mingle，配置管理工具 VSS、\nSVN 等 \n  组织结构与文化，如产品部（PDU）组织中含有测试，那么项目计划需要一\n起考虑测试的计划 \n  基础设施，如现有设施和固定资产，在制定计划的时候需要考虑这方面资源\n是否足够 \n组织过程资产\n  流程、指导书、模板、绩效测量标准等 \n  以往项目的项目档案，如项目合同、项目计划、项目度量数据、项目经验教\n训总结、风险跟踪表等 \n  案例库 \n工具和技术\n专家判断法、项目计划模板、checklist 等\n关键输出\n 项目计划\n项目计划合并与整合了其它各规划过程所输出的所有子计划和基线\n  项目所选用的生命周期以及各阶段将采用的过程及项目管理团队进行“裁剪”的结果\n  项目管理团队所选择的项目管理过程 \n  每个所选过程的执行水平和深度 \n  对这些过程所需的工具与技术的描述 \n  将如何利用所选过程来管理具体项目，包括这些过程间的依赖关系和相\n互影响，以及这些过程的主要输入和输出 \n  项目变更管理计划，用来明确如何对变更进行监控 \n  项目配置管理计划，用来明确如何开展配置管理 \n  干系人的沟通需求和适用的沟通技术 \n子计划\n通常将范围、质量、进度、费用预算、产品目标成本基线合并为一个绩效测量基线，\n作为项目的整体基线，以便据此测量项目的整体绩效。 \n  项目进度计划 \n  项目质量计划 \n  人力资源计划 \n  风险管理计划 \n  采购管理计划 \n  项目沟通计划 \n关键动作\n  整合所有知识域的子计划。 \n  综合分析和解决各领域计划的冲突，保证计划的协调性和一致性。 \n  细化当前阶段计划。 \n  提交赞助人批准。 \n  如果项目较大，上述工作需要分层开展。 \n项目执行与监控\n定义\n项目执行与监控是指执行项目计划，收集、度量和发布项目绩效信息，根据度量、分\n析结果推动改进，确保按计划完成项目成果交付，实现项目的绩效目标 。 \n描述\n在项目的执行与监控中，项目团队实施已计划好的项目活动，项目经理进行指导、跟\n踪、调整，并管理项目的各种接口，解决各种冲突和问题。\n项目的监控要系统地关注项目各方面的状态，而不只是进度。项目的监控以项目计划\n为基线，跟踪项目实际进展。除了通过报告、会议外，还必须进行交付检查，经常走\n动管理了解项目真实的状态，进行相关的度量分析，及时做好纠偏工作，杜绝监而不\n控。 \n项目监控不仅要关注项目“硬”的方面（交付件、项目任务进展、质量状况、资源投\n入、风险等），同时也要关注项目“软”的方面(团队氛围、与周边的关系等)。不仅要\n对项目任务进行管理，也要对团队成员进行管理，在努力达成项目目标的同时，构建\n高绩效团队。 \n冲突和问题解决是项目监控中重要的活动，项目经理要倡导可视化管理，积极走动管\n理，获取真实信息，挖掘问题，对症下药及时解决问题，而不是急功近利或者报喜不\n报忧。项目团队应该遵守项目的基本规定（如“每日持续构建”等），不允许破坏规则\n（“破窗理论”）的发生；如果出现职责不清的事情，项目团队应该马上明确，不允许互\n相推诿（“锯箭理论”）；项目团队应该倡导预防，消除隐患，而不应激励“埋雷又挖\n雷”的“英雄”。 \n  执行计划中的项目活动，并生成项目状态数据（费用、进度、质量等）。 \n  评估项目绩效状态，决定是否需要采取纠正或预防措施。 \n  获取、管理和使用资源，包括：工具、物料等。 \n  建立并管理项目团队内外的沟通渠道。 \n  提出变更请求，实施和监控已批准的变更。 \n  跟踪和监控已有风险，识别新风险，确保风险的全面性，报告风险状态，执行适\n当的风险应对计划。 \n  培训和管理项目团队成员。 \n  管理供应商。 \n  收集和记录经验教训，实施批准的过程改进活动。 \n与其它活动的关系\n过程要素\n关键输入\n项目计划：项目计划（风险管理计划和采购管理计划等）和绩效测量基线是项目执行的主要输入。\n  批准的变更请求：批准的变更请求应列入计划，以便由项目团队实施。主要包括纠正措施和预防措施。 \n  组织过程资产： \n  问题和缺陷管理规定、流程和数据库：包括对问题的控制、识别与处理，以\n及对相关行动的跟踪 \n  过程测量数据库：如度量系统、工时系统等 \n  以往项目的信息（如项目合同评估结果、项目交付文档、经验教训总结等） \n工具和技术\n专家判断、项目例会、项目管理信息系统等。\n关键输出\n  项目交付件：是项目工作的具体结果，可以是产品、成果或服务。 \n  项目状态报告：详细描述项目总体状态（进度、质量、费用、资源等），各项活动\n进展状态、风险、问题等，下一报告周期内的主要活动计划、求助等。 \n关键动作\n  阶段工作或者工作包的开工和关闭。 \n  执行项目计划，监控进展，输出项目状态。 \n  定期审视，分析偏差，调整项目计划或提出变更请求。 \n  项目状态汇报，如 RDR 汇报。 \n  总结和共享。 \n  其它一些贯穿始终的活动：冲突管理、例外处理、趋势分析等。 \n集成变更控制\n定义\n集成变更控制是指评审变更请求，批准变更，并管理交付件及其项目文件变更的过\n程；确保变更都经过全面的分析，只有经批准的变更才被纳入修改后的基线中。\n描述\n集成变更控制负责统一协调整个项目中的各种变更，确保一个领域的变更在决策（批\n准或否决）前对其它领域的影响得到充分的分析和考虑（如进度变更往往会影响费\n用、风险、质量等方面）。 \n集成变更控制过程应贯穿项目始终。\n集成变更控制的目的并不是控制变更的发生，而是要对变更进行主动管理，提前预防\n不必要的变更，确保必要的变更有序进行，防止变更随意而导致混乱。 \n对于研发项目来说，发生变更的环节比较多，因此集成变更控制显得格外重要。\n每项变更请求都必须由项目管理团队或变更控制委员会（Change Control Board，\nCCB）进行管理（接收请求、评审请求、决策），相关权力需要在项目的角色与职责文\n件或配置管理中正式说明，并经过赞助人和相关干系人的同意。 \n项目经理有权批准某些变更请求，但是对于重要变更（涉及计划、范围和预算等），需\n由 CCB 负责决策。 \n变更控制视变更内容涉及的范围不同需要设定不同的级别 CCB，各级别的变更由相应\n级别的 CCB 进行变更审核和裁决。在产品开发中存在产品 CCB 和项目 CCB。涉及范\n围、进度、成本等重要的变更需要走 PCR，由 OSG 决策，此时 OSG 承担了更高层\nCCB 的职责。 \n正式评审通过后的变更结果应再次基线化，并且仅允许评审通过的变更纳入基线刷\n新，确保集成变更管理的有序。在敏捷项目中，一般不在迭代中进行变更，避免对迭\n代节奏产生严重影响。如果变更影响较大，需要立即执行，经项目管理团队认可，可\n终止当前迭代，新起一轮迭代，将变更安排到迭代计划中。 \n集成变更控制过程应贯穿项目始终\n引起变更的因素通常来自两个方面\n  外部的变更要求，如客户要求新增或修改需求。 \n  开发过程内部的变更要求，如为解决测试中发现的错误而修改设计，人员更换\n等。 \n变更可能影响项目的任何方面\n  项目目标 \n  项目交付件 \n  技术规格 \n  项目进度计划 \n与其它活动的关系 \n过程要素\n关键输入\n变更请求：必须书面申请和记录\n项目文件\n  配置项状态跟踪表 \n  配置审计报告 \n组织过程资产\n  配置管理规程 \n  变更管理规程 \n  配置库管理规程 \n  软件发布管理规程 \n  产品和版本命名规则 \n工具和技术\n专家判断法、配置审计等\n关键输出\n 项目文件（更新）：含配置状态报告、变更请求状态更新。 \n关键动作\n变更请求处理\n  接收变更请求。 \n  分析和评估变更带来的各种影响。 \n  综合变更涉及的各方意见后裁决变更，并完整记录变更请求的影响。 \n  批准的变更纳入到项目计划和项目文件中，并跟踪实施。\n沟通管理\n定义\n沟通管理是指识别项目干系人，确定其信息需求和沟通方法，制定沟通计划，维护一\n个开放的沟通环境，在项目整个过程中管理与项目干系人的关系，及时生成、发布和\n存储项目信息，确保项目沟通及时、高效。\n描述\n项目经理首先应该识别清楚项目干系人，识别项目干系人应在项目早期阶段进行，否\n则，可能会导致项目干系人对项目产生不利的影响。 \n其次，应该认真收集、分析项目干系人的沟通需求，包括：谁需要什么信息？何时需\n要？怎样获得？谁生成、发布、存储信息？ \n最后，应该定义一个简单、有效的沟通机制，包括：明确的信息安全要求、信息访问\n权限、沟通方式、报告模板。沟通机制应获得项目干系人的确认。 \n为了加强沟通效果，项目经理应该根据项目实际情况，选择合适的沟通方式，比如：\n通过大屏幕向全员实时展示产品持续集成的状态；通过故事墙和每日站会，让团队相\n互沟通开发进展和障碍；鼓励更多的面对面沟通，打造开放式的开发环境，让多职能\n组成的完整团队能坐到一起，使沟通交流更高效。 \n项目状态报告是公司项目沟通中的一项重要内容，项目团队必须全面考虑项目状态报\n告的内容和发送范围，需要根据通用的报告模板进行客户化。 \n保持畅通的沟通渠道、有意识地对项目信息进行维护与管理、实现团队及组织经验的\n有效积累、鼓励知识和经验在团队中传播是实施有效沟通的保障。 \n与其它活动的关系 \n过程要素 \n关键输入\n  项目任务书：可提供参与项目及受项目影响的内外部各方的信息，如项目赞助\n人、客户、团队成员、周边部门等信息。 \n  组织过程资产：以往项目的干系人分析、经验教训参考等。 \n工具和技术\n干系人权利/利益矩阵、专家判断、RDR 评审、例会（如站立会议）、电子通信及发布\n工具（如电子邮件、电话会议）、报告模板、项目管理软件等。 \n  干系人权利/利益矩阵：进行干系人识别、分类、排序，以有效分配精力，管理关\n键干系人的期望。 \n关键输出\n干系人清单、项目沟通管理计划、RDR 评审报告、项目状态报告、会议纪要、项目文\n件（更新）等。 \n关键动作\n  识别项目干系人：分析并识别对项目产生影响及受项目影响的关键项目干系人，分析并明确这些干系人对于项目信息的需求。 \n  制定项目沟通计划：定义项目沟通机制，针对不同的项目干系人采取不同的沟通方法。 \n  与项目干系人沟通：在项目运作过程中通过各种形式与项目干系人进行有效的沟通，例如项目例会、RDR 评审会议。 \n  管理项目信息：及时准确地收集、储存、分发、传递项目干系人所需要的信息，例如项目状态报告。 \n案例\n有效沟通的最基本的目标就是在解决问题或分配任务能够找到人、找对人。这就是沟\n通地图（参见示例）形成的最基本的动机。除沟通地图外，解决方案项目管理团队还\n制定了保障沟通的系列措施。\n项目经理最重要的工作之一就是沟通，其实沟通的成功来自很多细节，所以完整、清\n晰的项目干系人信息对项目沟通至关重要。沟通地图和应用是一个比较好的措施，能\n够有效的促进沟通管理。\n  要确保所有相关人员能够收到地图并正确使用（要有相应的培训或使用说明）。 \n  在人员发生变化的时候随时刷新地图。 \n  要有基于角色的工作流程说明。例如，在 S 项目中，针对某个版本的发布，如果需要集体讨论，则要求开发 PM、产品所属版本 PM、产品测试人员、镜像测试人员、现场工程人员参加。 \n项目移交\n定义\n项目移交是指在项目或者阶段结束之前，正式移交项目成果和项目经验给相关接收单\n位或个人，确保客户得到相应的交付。项目过程资产归档也是项目移交工作之一。 \n描述\n项目验收完成之后，项目团队组织内外部客户（可以包括技术服务领域、制造领域、\n采购领域、市场领域、研发维护团队、外部客户）接收项目成果，包括交付件（含客\n户培训资料等）、人力转维计划（人力轮换机制、维护人力技能要求）等，并完成能力\n传递（按照计划对制造、销售、技服人员完成培训），确保在项目或者本阶段成果完全\n移交且工作全部完成后才宣布项目结束。要把已知的遗留问题明确整理形成跟踪清\n单，其中重要的问题，必须给出近期（一般为半年）的规避措施。 \n如果项目在完工前就提前异常终止，项目也必须进行总结和归档，并调查和记录提前\n终止的原因。 \n项目经理应该组织项目团队进行项目总结，包括但不限于项目成绩和经验教训、已获\n得的技巧、已开发的标准等。项目团队在项目结束之前要确保将项目中获得的经验、\n能力和技能给移交给组织，形成组织过程资产。 \n与其它活动的关系\n过程要素\n关键输入\n项目计划、项目状态报告、已验收的可交付成果、组织过程资产等。\n工具和技术\n无\n关键输出\n最终可交付产品及成果、项目总结报告、组织过程资产（更新）等。 \n关键动作\n  对照项目范围和项目计划，检查项目是否彻底完工，包括对后续制造、维护人员以及市场人员进行相关的技能培训，项目交付文档归档等。 \n  评估分析项目结果，分析项目交付质量、项目进度、项目费用、项目价值等，与项目计划中质量、成本、进度等目标基线来对比，分析偏差原因，总结后续项目可借鉴的预防措施。 \n  总结项目经验和教训，分析项目过程中所遇到的特别的困难、风险或所采取的特别的措施，说明这些措施的效果。讨论使用过的工具、设备、工作方法和过程的效率。 \n  输出总结报告，确保项目评估的相关信息被包含在总结报告中，并对现有流程和模板提出修改意见。 \n  经验传递，分发项目总结报告给相关团队，归档到公司相关知识库库中。 \n  对项目所产生 CBB（可重用部件）要及时归档并进行宣传，使其价值最大化。 \n  项目完成后，需要知会物料管理人员释放物料资源；需要通知职能部门主管释放人力资源。 \n  召开项目总结会议，给项目表现做一个完整的回顾，对项目团队成员表示感谢并点评其中好的表现。\n角色和职责\n项目赞助人\n  批准项目任务书，包括项目目标、项目策略等关键内容 \n  批准项目计划 \n  建立并维护与客户及重要项目利益干系人的关系 \n  接收项目状态报告并给予反馈和评价 \n  批准影响项目范围、时间与成本等的重大变更 \n  批准项目关闭 \n项目经理\n  识别项目利益干系人 \n  分析项目的假设与约束并将其反映到项目的目标与策略中 \n  集成并协调项目所有的计划活动 \n  策划、建立并维护与项目利益干系人的关系 \n  整体控制项目结果及变更 \n  项目移交活动 \n  项目总结 \n项目成员\n  参与分析工作包任务并对相关工作进行计划 \n  参与策划、建立并维护与项目利益干系人的关系 \n  按项目计划实施项目活动，并及时汇报项目进展 \n  支持项目计划与变更控制相关活动 \n  参与项目移交和总结 \n 价值管理\n定义\n价值管理是指分析、定义、管理项目的价值，包含项目产出的价值以及项目运作所产\n生的价值，即：对客户的价值和对组织带来的价值。 \n描述\n  项目价值分为外部价值和内部价值。\n价值管理作为单独的知识域对于项目来说具有重大的战略和实际意义，它是整个项目\n的核心工作：一方面项目中所有工作都要对客户或组织带来价值，这些工作从投资收\n益或组织战略上来说是必须做的，另一方面是要使用最合适的解决方案来满足客户需\n求，并达成项目效益最大化。这也需要站在整个项目和组织的层面来评价项目价值。 \n价值管理一定要以客户为中心来思考，客户是价值管理的关键，是思考驱动力。内部\n价值是组织长期生存的关键。 \n项目经理需要分析、定义项目的价值并监控价值的实现。项目成员需要关注并提出所\n有可能增加项目价值的机会点。 \n价值管理是项目管理的核心，它和范围管理关系紧密，外部价值主要从客户需求中提\n取和分析，即：从范围中思考。项目范围说明书是价值分析和价值定义的输入，操作\n上价值管理可以和范围管理结合起来进行。 \n价值的基本公式： \nV = F / C      (V =  价值，F =特性，C =成本) \n公式中的价值指：特性具备的特征与获得该特性的全部费用之比，特性指：特性竞争\n力、给客户创造的价值、对客户的吸引力。 \n价值会受到项目中诸多因素的影响，如：功能/特性、费用、进度，项目团队对这些影\n响因素的平衡要以项目最终产生的价值为判断准则。如：单方面追求特性增加可能会\n导致超出团队开发能力，费用超支，延迟交付，反而会影响客户满意度。 \n价值管理一般也被称为价值工程方法，它既是一种管理技术，又是一种思想方法。 \n需要特别注意的是，要把提升项目价值和突破项目范围明确区分开来。价值管理的目\n标是在界定的项目范围内进行的，在这个范围内，将某个高价值特性的实现进行深入\n挖掘，“提供更多的魅力质量”，或将某个低价值特性加以甄别，“交付刚刚好的系\n统”，都是提升项目价值的好的做法；相反，以提升项目价值的名义加入新的范围，将\n导致范围蔓延，实际上将很可能最终降低项目价值。 \n外部价值机会点，主要是对客户的价值和对市场的价值，以期实现良好的投资收益\n  使产品更有竞争力（如产品可靠性、易用性、节能减排等的实现），同时有更好的投入产出比。 \n  对现有客户的价值。能够降低客户的 OPEX 或 CAPEX，提升客户满意度，提高某细分市场和价值客户的市场占有率。 \n  对潜在客户的价值。能够带来更多的市场机会（包含服务产品、其它产品的机会），甚至可以改变市场竞争格局等。 \n内部价值机会点，主要是内部能力（组织和技术）提升\n  开发能力的提升\n  新技术，如：ASIC 设计能力提升等。\n  新的工作方法或工具，如：敏捷、迭代、持续集成等。 \n  提升员工能力，如：培养某领域专家或某方面能力。 \n  提升资源使用效率，如：物料，仪器仪表。\n  消除开发过程中浪费，如：部分完成的工作、未应用特性、再次学习、移交、任务切换、延迟、缺陷。 \n  内部降成本，如：CCB 共享、归一化等。 \n关键活动\n  价值分析：主要在项目立项准备阶段和概念阶段进行。 \n定义\n价值分析是指通过合适的方法（如：workshop 研讨、SWOT 分析、定性或定量分析\n等）对项目价值机会点进行分析，明确项目外部价值和内部价值。 \n描述\n一般情况下，特性的外部价值在产品需求定义环节已经初步定义，在项目中需要的是\n更进一步分析和清楚地描述其外部价值。 \n项目应尽早确定利益干系人的要求，否则可能导致较高的成本、过度设计或过量生\n产。\n一般情况下，特性的外部价值在产品需求定义环节已经初步定义，在项目中需要的是\n更进一步分析和清楚地描述其外部价值。 \n项目应尽早确定利益干系人的要求，否则可能导致较高的成本、过度设计或过量生\n产。\n在价值分析中，如下这些要求需要得到及时确认： \n  1、系统要交付的主要特性，以及特性的价值。 \n2、 每个特性的达成标准。例如，生产量、性能等级、质量和可靠性指标。 \n 3、项目交付件的评审流程和验收标准。 \n内部价值在项目立项准备阶段往往已经由利益干系人、特别是项目发起人给出，但是\n在概念阶段需要进一步分析和明确，明确项目对其所在组织的意义，给组织能力带来\n的实际提升。 \n价值分析是一个反复迭代过程，主要是在立项准备阶段和概念阶段进行，在计划阶段\n可能有新的价值机会点需要分析。 \n同时，价值分析为需求优先级排序提供了有力的基础，资源永远是有限的，聚焦高优\n先级任务是项目成功的必要条件。必要时项目经理在有效理解客户的基础上去掉价值\n低的功能点，或者通过产品管理决策对特性列表进行调整。 \n与其它活动的关系\n过程要素\n关键输入\n  项目任务书：项目任务书中有关于市场分析、竞争分析的内容，可以为价值分析提供重要参考。 \n  项目范围说明书：作为需求/特性外部价值分析的输入。\n  利益干系人列表：主要是了解他们对项目的要求和期望，包括内部和外部利益干系人。 \n  组织过程资产：分析价值的工具和方法（如已有的优秀实践等）。 \n工具和技术\nWORKSHOP、客户调研（行销、Marketing、SE 等）、市场或行业分析、竞争对手分\n析、满意度分析和改进、产品竞争力分析（如利用雷达图）、头脑风暴、SWOT 分析、\n价值树分析等。 \n关键输出\n  外部价值跟踪表：包括外部价值机会点。外部价值机会点主要是针对每个特性明确其对外部客户的价值，特别是关键特性\n  内部价值描述：内部价值一般在项目范围说明书中进行描述，往往包含组织改进要求等。 \n  组织过程资产（更新）：分析价值的新方法或新工具（如新的优秀实践等）。 \n关键动作\n  收集相关价值材料，如：范围说明书，利益干系人意见等。 \n  与项目干系人（如：产品规划人员、市场人员、外部客户）澄清特性及其价值、评价标准等，为下一步工作和确定特性的价值优先级打下基础。 \n  与项目干系人（如：项目成员，项目赞助人、项目运作指导团队）分析和明确项目内部价值机会点。 \n  价值定义：主要在项目计划阶段进行。 \n定义 \n价值定义是指对项目价值分析中的每个已识别出的价值点进行深入分析，给出最优的\n解决方案和实施建议，并明确最终绩效评价参数和标准，确保产品在整个生命周期中\n获得的价值最大化。 \n描述\n价值定义主要针对外部价值机会点。 \n价值定义的焦点从“做什么”转移到了“怎么做”。项目产出的价值应该定义清楚，并\n且以特性和成本对比的形式得到一致认同。 \n价值定义的主要输出是解决方案，即：对增加项目价值具有最大潜力的解决方案，同\n时给出明确的实施建议（包括实施的行动计划）。实施建议必须来源于需求和利益干系\n人对其要求的描述，而根据这些实施建议能确保对后续作出的决定是连贯和一致的。 \n选择最优的解决方案需要综合各个方面因素。例如，优先级低的特性仅提供满足要求\n的方案即可，优先级高的特性需要考虑解决方案的竞争力和一定的领先性。 \n在价值定义的一般步骤如下： \n  1、提出方案－识别和挖掘能够满足需求的各种解决方案。 \n  2、评估方案－参考既定的价值评价标准项评估上述的各个解决方案。 \n  3、确定方案－选择最优的解决方案，并给出实施建议。 \n同时，在这个阶段可能有新的价值机会点被识别出来。 \n与其它活动的关系\n过程要素\n关键输入\n外部价值跟踪表、内部价值描述、范围说明书、组织过程资产等。\n工具和技术\nSWOT、头脑风暴、WORKSHOP\n  SWOT 分析：通过 SWOT 分析，项目涉及到的优势（Strengths）、劣势（Weaknesses）、机会（Opportunities）和挑战（Threats）都将识别出来。价值管理关心的是 SWOT 分析中的积极方面——优势和机会。风险管理关心的是 SWOT 分析当中消极的方面——劣势和挑战。 \n关键输出\n最终的解决方案、外部价值跟踪表（更新）、内部价值描述（更新）、组织过程资产\n（更新）等。 \n  最终的解决方案：给出各特性的解决方案及实施建议。 \n关键动作\n  提出方案：挖掘分析出不同的解决方案，来满足那些已确定需求。在这个步骤中，项目团队可以采用集体头脑风暴的方式，讨论和分析前面已经定义的需求（功能/特性），给出多个对应的方案。强调：自由的、不受约束的氛围很重要，要鼓励发散思考，所有意见不应当被批评，更加应当受到鼓励。讨论的方案越多越好，因为这样将产生方案组合或改进已识别的方案。 \n  评估方案：评估不同的解决方案。根据前一个步骤的输出，项目团队将开始进行过滤工作，以剔除那些不现实或无法达成的方案。对那些值得考虑的方案进一步进行细化和完善。强调：方案的完善需要考虑时间和成本的影响，因此，只有那些初步判断是合理的方案才进行进一步的细化和完善。 \n  确定方案：选择最优的解决方案及实施建议。对那些具有最大潜力（最大可能性）的方案细化到可使用的程度，可能包括准备详细的草图、仿真甚至原型、大致的耗时和成本估算。并最终给出选定的解决方案。 \n  价值控制：主要在项目开发和验证阶段进行。 \n定义\n价值控制是指监控所有已识别的价值机会点，以确保在此项目中获得最大的价值；在\n项目运作过程中定期审视价值，分析新的价值机会点，针对增加项目价值新的机会点\n进行变更。 \n描述\n价值控制是项目变更控制中的一个重要的控制活动。在项目任何领域的一个变更被批\n准和实施之前，该变更对其它领域的影响都必须进行分析和考虑。 \n在项目交付/移交时有效传递和确认项目价值，做到对价值机会点的全过程跟踪。 \n特别需要注意，进度是刚性和明确的，而价值显得相对难以衡量，控制进度手段比较\n成熟，而控制价值的手段往往不是显而易见的，当进度和价值出现冲突的时候，往往\n容易忽视价值控制，因此，应注意发现并采用有效的价值控制手段。例如，为了开发\n出更符合客户需求的软件，必须让真正的用户或能代表真正用户的角色来做识别价值\n的决策；采用迭代开发过程，通过缩短交付件的反馈周期来快速获取客户反馈并及时\n改进；以优先交付最大价值的原则，安排每一轮迭代的开发计划。 \n价值控制同时注意消除浪费，以增加项目价值，如：开发未应用的特性，没有积累再\n次学习，项目人员任务频繁切换等。 \n与其它活动的关系\n过程要素\n关键输入\n最终的解决方案、外部价值跟踪表、内部价值描述、组织过程资产等\n工具和技术\n偏差分析等。\n关键输出\n外部价值跟踪表（更新）、内部价值描述（更新）、项目状态报告、变更请求、组织过程资产（更新）等。 \n关键动作\n  维护项目价值：在项目中，风险、新增需求及变更将影响项目产出的价值，同样会影响到已识别或实施的价值机会。项目团队对项目的成果及其价值负责，包括监控交付件的价值贡献，这些价值在移交和验收时要被认可，确保价值在项目移交中得到有效传递。 \n  新增价值机会：在整个项目过程中，可能出现增加项目价值的机会。项目组织中所有层级的人员都有识别价值机会的职责。\n  变更控制：能够增加项目及其成果的价值的新机会应以变更申请的方式文档化，这些变更申请应该根据已达成一致的集成变更控制规程进行处理。 \n角色职责\n项目赞助人\n  澄清项目的期望价值和项目产出，在项目任务书中清楚地描述商业背景和项目期望 \n  定义组织从运作项目中获得的价值 \n  支撑项目经理与客户（以及其他外部利益干系人）沟通项目范围变化、项目预期价值的影响 \n  确保在每个项目评审点都对项目期望价值和项目产出得到有效评估，并且和组织的业务目标对齐 \n  在项目评审点或必要时对项目期望价值是否接纳给出决策意见 \n  评估从项目交付中得到的实际收益，在项目群和项目组合的层面评审此项目的综合价值 \n  确保项目中的经验和教训得到有效传递，使组织长期受益 \n项目经理\n  分析项目赞助人和其他项目干系人所描述的项目价值 \n  清楚地描述项目价值和价值评价标准项 \n  跟踪项目中的价值状态，并及时和项目赞助人沟通汇报 \n  在项目变更决策（批准或拒绝）前，确保变更对价值的影响得到充分评估和沟通 \n  特别关注和鼓励项目成员提出所有增加项目价值的机会点建议 \n  在项目总结报告中回溯价值的实际实现情况，分析和讨论偏差原因 \n  评估价值管理中用到的过程、工具和方法，并给出改进建议 \n项目成员\n  识别工作包中对增加项目产出价值的所有机会点，并确保在工作包中例行维护 \n  特别关注和提出所有增加项目价值的机会点建议 \n接收者\n  在描述项目价值时，对项目经理提供必要的支撑 \n  在制定价值验收标准时，从价值维度考虑项目产出 \n范围管理\n定义 \n范围管理是指收集和定义项目的需求，标识项目的交付和验收标准；通过变更控制和\n验收活动，确保交付满足项目要求。 \n描述\n项目范围是指为了交付产品必须完成的工作，包括业务需求（比如产品的产品属性和\n功能、如何实现节能减排等），交付要求（比如交付时间、验收标准、交付件等），项\n目管理要求（如管理方法、流程等）。 \n范围管理通过分析范围、定义范围，确保项目做正确的事情；通过控制需求变更，确\n保项目范围满足交付的要求；最终通过验收范围确认交付成功和客户满意。 \n利益干系人特别关注范围变更的影响，因此范围在各个决策点都会作为主要内容进行\n评审。\n关键活动\n  分析范围：主要在项目概念阶段进行。 \n范围分析中特别要关注的是确保项目分解过程对所有需求不要存在重复或者遗漏。\n定义\n分析范围是指对项目需求进行分析，清楚定义需求并对需求进行优先级排序；把项目\n成果分解成可管理的交付件，识别和确定项目的边界（应该包括什么，不应该包括什\n么），并明确项目完成的验收标准。 \n描述\n基于需求的价值、项目资源的局限性和项目运作中的风险，对所有的需求进行排序，\n保证项目价值最大化。项目成果必须被分解成可管理、可交付的组成部分。同时明确\n项目成功交付的标准，例如：性能的具体指标，流量负载等。随着客户要求和公司设\n计能力的不断提升，公司对需求的分析和设计不再仅仅局限于功能方面。所以在分析\n需求的时候还要从如下方面进行关注： \n成本、性能、技术限制、配套、节能减排、可靠性、准入限制、可安装性、可维护\n性、易用性、可制造性、可测试性、归一化、可行销性（如考虑产品 license、\nSBOM、行销工具、使用寿命和升级周期）、安全性（如操作系统安全性、应用系统安\n全性、访问控制、数据机密性、协议安全性等）、全球化（如界面、软件、资料的语\n言、格式、文化习惯方面的要求）、可采购性（如通用器件要有 2-3 个主流供应商，供\n应商交付质量、交付及时性、风险控制方面的考虑）。 \n与其它活动的关系\n过程要素 \n关键输入\n项目任务书、项目干系人列表等。 \n工具和技术\n利益干系人分析、虚拟测试技术（用于澄清需求）、访谈、研讨会、头脑风暴、德尔菲\n法、思维导图、亲和图、标杆对比（用于确定指标）、问卷调查、原型法、Kano 模型\n（用于需求的分析、分类、排序）等。\n关键输出\n  需求文件：描述各种单一的需求将如何满足与项目相关的业务需求，通常是包需求列表。 \n  需求跟踪矩阵：在整个项目生命周期对需求进行跟踪的表格，即：从需求到设计、到实现的需求跟踪表，通过跟踪防止需求遗漏。 \n  验收标准：定义已完成的产品、服务或者成果的验收过程和标准。 \n关键动作\n  需求获取 \n基于赞助人给出的初步的需求文件，项目团队需要做更进一步的需求澄清。 \n组织能力提升方面的需求也需要同步被收集，纳入项目范围\n为了确保需求都能够定义清楚，所有项目利益干系人明示的或者隐含的需要、期望和要求都应当确定下来，并且和各方就需求达成一致。需要关注需求的正确性、描述清晰性、唯一性、完整性、一致性、可实现、可验证性、可跟踪性。含糊不清、有冲突或不明确的需求也要识别出来，并且重新表达清楚。\n  需求分析和优先级排序 \n要对所有需求进行分析，并把分析结果文档化，如：包需求列表。所有需求都应该用\n恰当的语言来描述，对每个需求的验证方法也需要定义清楚，并且与客户讨论确定下\n来，这是客户验收标准的输入之一，是成功移交项目成果和客户满意的必要条件，是\n项目赞助者批准项目需求的必要条件。 \n分析和定义一个需求\n  客户提出此需求的目的是什么，要解决什么问题，其背景是什么？即What/Why。 \n  客户代表谁提出此需求，这个需求是组织提出的普遍需求还是个别需求？即Who。 \n  客户需求需要什么时候满足？即 When。 \n  客户要求满足此需求的强烈程度、紧急程度，即优先级，是必须的需求还是可选需求？ \n  是否有可借鉴的需求实施方案，客户期望或推荐的实施方案是什么？即 How的问题。 \n重点关注需求的如下属性\n  二重性：需求可以表述为“问题+解决方案”。项目团队应该更多的收集和把握“问题”所在，然后再提出最佳的“解决方案”。\n  颗粒度：需求是有大小之分的，通过对不同需求的颗粒度大小进行区分，能够把一批需求按照颗粒度进行分层管理。 \n  约束性：每个浮现于表面的“问题”都隐含着复杂的背景，这些背景是客户的地域特征、行业特点等所带来的，例如环境温度要求、网上准入规范、机房空间要求、设备兼容性等。 \n  关联性：需求之间存在着千丝万缕的关联关系。依赖关系：两个需求虽然针对不同的问题，但其中的一个的可用性必须依赖另外一个；矛盾关系：例如性能和可靠性；包含关系：比如需求 B 是需求 A 的局部细节。针对一组有关联关系的需求提供解决方案，比针对单条需求提供解决方案，能更加全面的满足客户的需求。 \n需求优先级排序用于支撑项目范围和项目决策，需重点关注以下几点\n  投资回报状况：高回报的需要优先级更高。 \n  需求来源及客户优先级别：如果需求是来源于重点客户或客户高层，需求要重点考虑。 \n  对客户满意度的影响：需求实现后，是否能够很大程度上提升客户满意度。\n分析时需要特别重视第\n一类、第三类需求。可使用 Kano 模型进行分析。\n第一类需求不实现用户会不满意\n第二类需求即便实现了客户也不会很满意\n第三类需求实现后会很满意\n对竞争优势的影响：要考虑该需求的实现带来的竞争优势。\n一、竞争对手没有但是客户期望比较大的\n二、能给竞争对手造成竞争壁垒；\n；三、竞争对手已有、客户也希望公司提供的\n  需求实现难度、需求依赖关系及成本的影响\n要考虑该需求的技术是否准备\n好，人力是否可以保证，进度方面是否可以按期交付；考虑需求之间实现的\n依赖关系，可采用 anatomy 方法进行分析；同时要考虑需求实现和后续维护\n的成本。例如，对软件安装改进、提供远程升级的功能等。 \n  确定项目交付件 \n  产品部件 \n  软件 \n  文档 \n  测试设备 \n  培训 \n  服务 \n  原型 \n  产品辅助工具 \n  定义范围：主要在项目的计划阶段进行。 \n项目范围的明确定义是项目管理的依据，无论是软件开发、产品测试还是资料开发，\n都需在项目计划中明确定义各项任务的具体要求，这样才能保证项目是可控的。 \n定义\n定义范围是指定义和描述项目详细的所有交付成果（即：项目所有的输出）以及其质\n量目标。需要将项目大的可交付成果与项目工作划分为更小的更容易管理的组成部\n分，包括：所有产品交付件、项目管理交付件、支撑组织能力提升的过程资产。另\n外，要明确指出哪些工作不属于本项目范围，这也是评价变更请求和额外工作是否超\n出项目边界的基准。  \n描述\n定义范围是项目成功的关键。当项目范围没有被定义清晰，最终项目费用可能高于估\n计值，不受控制的变更会导致项目的节奏被打乱、不停的返工、项目时间的增加、生\n产率的降低和工作士气的降低。  \n项目范围包括\n  产品和项目管理交付，包括功能和特性、假设条件和约束、验收标准等 \n  组织能力提升的过程资产，例如，人员的能力提升，新工具的测试，新技术的实现，新专利的开发，项目管理能力的提升 \n通过定义范围创建 WBS\n  提高项目费用、持续时间、资源估计的准确性。 \n  定义一个可度量和控制的执行基线，确定具体的工作包（位于工作分解结构最低层的可交付成果或项目工作组成部分），为进行估算、制定进度计划、测量执行绩效、配置管理和测试，以及评估项目绩效奠定坚实的基础。 \n  组建项目团队，理清职责分配。 \n与其它活动的关系\n过程要素\n关键输入\n项目任务书、需求文件、需求跟踪矩阵、验收标准、组织过程资产等。\n工具和技术\n专家判断、产品系统分析、备选方案识别、研讨会、Anatomy 分析方法等。\n关键输出\n项目范围说明书\n对项目范围的叙述性说明，包括主要可交付成果、项目假设、\n项目约束、项目制约因素和工作描述，为将来的项目决策以及利益干系人之间确\n认或建立对项目范围的共识提供书面依据。在 V/R/C 版本研发项目中，通常没有\n单独的项目范围说明书，项目范围说明一般包含在项目计划中。\n工作分解结构（WBS）\n以可交付成果为导向的工作层次分解。其分解的对象是项\n目团队为实现项目目标、交付项目成果而实施的工作。WBS 以结构化的方式定义\n了项目的全部范围。WBS 样例如图所示，若干分支向下分解到工作包层次，一层\n为阶段或可交付成果，最低层分解到工作包。 \n关键动作\n  确定项目所有可交付件、假设条件和约束等。\n  创建 WBS。\n  项目经理、项目成员及利益干系人都应该参加制定 WBS\n  召集所有相关人员，集体讨论所有主要阶段工作。 \n  分解项目工作。在 V/R/C 版本研发项目中，可参考公司的 WBS 模板。 \n  画出工作分解结构图，可以在 WBS 的较上层次上定义子项目或生命周期阶段。\n  把项目可交付成果细分为更小的、易于管理的组成部分，必须详细细分到可以进行估算、安排进度、做出预算、分配责任人的程度，以便顺利完成项目。 \n  验证上述分解的正确性。如果发现下层次的工作项没有必要，则修改上一级的工作项。 \n  制定项目范围说明书，并获得项目赞助人的批准。\n  制定验收计划和验收标准，明确项目验收的具体计划，并与利益干系人就验证标准达成一致。验收标准应该是可验证、可测量的。 \n  控制范围：主要在项目的开发、验证阶段进行。 \n接纳新需求或需求变更时，要全面分析需求变更给整体方案带来的变化。 \n定义\n控制范围是指使项目的成果和项目已定义范围保持一致，并管理需求和项目范围的变\n更，确保所有的范围变更经过集成变更控制的统一处理的过程。 \n描述\n控制范围是监督项目的范围状态、管理范围基线变更的过程。对项目范围进行控制，\n就必须确保所有请求的变更、推荐的纠正措施或者预防措施都经过实施集成变更控制\n的处理，防止项目范围蔓延。 \n范围变更分析要重点考虑对项目价值、项目策略、项目质量、项目周期、产品目标成\n本、预算以及项目利益干系人的影响。要保证多层次、相互关联的需求之间的一致\n性。当其中的一个需求发生变动时，与其相关联的实体都要得到审视，判断受影响程\n度，然后做出相应的变更。任何已接受和批准的变更应该在规格范围内和项目计划中\n得到更新。变更应和所有的项目成员以及受影响的利益干系人进行沟通。 \n与其它活动的关系 \n过程要素\n关键输入\n项目计划（含项目范围说明书）、项目状态报告、需求文件、需求跟踪矩阵、组织过程资产等。 \n工具和技术\n偏差分析等\n关键输出\n项目状态报告（更新）、变更请求、项目文件（更新）、组织过程资产等。 \n关键动作\n 需求跟踪管理\n在整个项目运作过程中，对需求进行跟踪管理。如按阶段审查需\n求跟踪矩阵的完整性、一致性、可追溯性。\n需求变更控制\n  需求变更来源是否是可追溯的，有明确的来源，例如相关标准、规范、市场调研书等 \n  基线中是否有需求与建议的变更相冲突 \n  建议的变更是否有负面效应或风险 \n  从技术条件、员工技能、资源约束的角度看该变更是否可行 \n配置更新\n对于所有变更，最后要保证需求跟踪矩阵和所有的配置项得到了统一的更新。 \n  验收范围：主要在项目的验证、发布阶段进行。 \n高质量的验收手册应该遵循项目范围说明书，而项目范围说明书应该完全覆盖我方提\n供的答标书中的要求。 \n定义\n验收范围指正式验收项目已完成的可交付成果的过程。 \n描述\n验收范围包括与客户或赞助人一起审查可交付成果，确保可交付成果已圆满完成，并\n获得客户或者赞助人的正式验证。 \n验收范围往往比较关注对产品交付的验收，而忽略对项目管理交付、组织能力提升成\n果的验收，例如，管理流程、技术规范、专利、技术断裂点等的验收。 \n通常的验收形式包括 Beta 测试、准入测试、转维验收等，内部或外部客户一般直接参\n与到验收工作中。 \n要注意，并不仅仅只做整个项目的最终验收，还可能做各个阶段的验收。阶段验收的\n形式可以非常灵活，某个评审就可以作为验收活动。 \n与其它活动的关系\n过程要素\n关键输入\n项目计划（含项目范围说明书）、需求文件、需求跟踪矩阵、验收标准、确认的可交付成果等。\n工具和技术\n评审、内部测试、试验局验证、准入或认证测试等。 \n关键输出\n已验收的可交付成果、变更请求、项目文件（更新）等。\n关键动作\n  以交付标准为基础，在阶段结束或项目结束前，提前预约好所有利益干系人，并说明整个验收的过程。\n  实施验收，并对客户的疑问进行澄清，记录遗留问题。 \n  共同评估此次验收是否达成目标，在不达标的情况下，需确认是否启动下一次验收活动。 \n角色和职责\n项目赞助人\n  确定需求的优先级别 \n  对需求进行澄清 \n  批准项目需求和交付标准 \n  批准项目范围和范围的变更 \n  与组织内及组织外项目利益干系人沟通项目范围 \n  对项目交付进行验收，并批准项目成果 \n项目经理\n  参与需求优先级别的制定 \n  与利益关系人在项目范围管理中充分互动 \n  与项目成员沟通项目范围，以确保所有项目成员理解和接受项目范围 \n  针对需求和项目范围变更，向项目赞助人提出建议 \n  确认所有对项目范围的影响因素被识别 \n  进行需求管理、需求跟踪和配置管理 \n  组织验收工作，确保项目范围实现并顺利交付 \n项目成员\n  积极参与项目需求分析和项目范围确认 \n  聚焦于项目目标的执行，并且按照项目范围管理规定程序及时汇报项目取得的成\n果 \n  参与项目的验收，保障项目交付 \n质量管理\n定义\n质量管理是指制定项目质量策略、目标以及支撑目标达成的过程和关键措施，遵循公\n司相关流程对项目进行管理，确保项目的过程和交付符合项目的质量要求。 \n描述 \n质量管理包含交付的质量管理和过程的质量管理。\n质量管理理念\n  以客户为中心\n  一次把事情做对\n  实时构建质量\n  预防胜于检查\n  全员参与\n  持续改进\n“计划—实施—检查—行动（PDCA）循\n环”是质量改进的基础\n  管理者的责任\n关键活动\n  质量策划：主要在项目概念阶段和计划阶段进行。 \n定义\n质量策划是指识别和制定项目及产品的质量要求和标准，以及为达到这些要求和标准\n所需要的技术、过程、工具、关键措施等，确保最终结果满足客户要求。\n描述\n  质量策划的目标是使项目运作过程中质量保证和质量控制有章可循\n通过质量策划有助于减少项目实施过程中的偏差，如需求的理解偏差、设计偏差、实\n现偏差等。 \n项目经理与项目团队成员必须全程关注，并积极投入到质量策划中。 \n进度是刚性和明确的，而质量往往弹性比较大，当进度和质量出现冲\n突的时候，往往容易“平衡”掉质量，设置质量红线是比较好的方式，确保产品达到\n最基本质量要求。 \n内容\n分析和理解外部质量要求（主要是市场策略）\n内部约束\n产品质量目标\n清晰地定义出项目的研发质量策略（如架构质量策略、DFX 质量策略等）\n合作策略（技术合作等）\n过程和方法\n质量目标\n与其它活动的关系\n过程要素\n关键输入\n项目范围说明书、利益干系人列表、费用预算基线、项目进度计划、风险跟踪表、组\n织过程资产、质量标杆、历史版本的缺陷和问题等。\n工具和技术\n标杆对照、流程图、质量新老七种工具、QFD 等\n关键输出\n项目质量计划\n项目文件（更新）等\n关键动作\n  根据项目任务书中项目的交付策略、质量策略、能力基线以及项目当前实际情况确定项目的质量目标（含过程度量指标和产品质量目标）。 \n  回顾历史项目或者历史版本的经验教训以及优秀实践，并确定为达成本项目质量目标的相关活动，避免历史问题重犯。 \n  系统分析本项目的交付件，制定明确的交付标准，包括可靠性、可服务性等 DFX特性，如果涉及硬件交付，必须包括可制造性、可供应性等。对于迭代项目，需要制定每个迭代的完成标准，并严格执行，杜绝带病迭代。 \n  分析项目的交付特性，标识项目技术风险以及隐含问题，可采用 FMEA 等方法。 \n  定义达到交付标准的措施，如采用包加载提升版本升级效率等。 \n  清晰的定义出本项目的过程和方法。\n  质量保证与控制：主要在项目的计划和执行阶段进行。\n定义\n质量保证与控制是指通过过程审计和过程评估等手段确保项目遵循质量策划中定义的\n过程和方法等，通过质量度量分析、质量专题分析、交付件评审、代码走读、持续集\n成、测试、以及发布评审等活动确保交付件达到质量目标。 \n描述\n在项目的执行过程中，通过定期的发布质量报告、持续集成实时报告、走动管理等措\n施，及时暴露质量问题，推动质量问题的解决。需要注意的是，质量状态应该尽量做\n到实时化、可视化和容易获取。 \n对组织或流程中发现的问题，及时提交相关优化建议。 \n项目团队好的实践，及时固化到组织级资产中。 \n与其它活动的关系\n过程要素 \n关键输入\n项目质量计划\n过程改进计划是质量保证工作的依据。将前期质量策划的结果在\n版本开发过程中贯彻执行，确保达成质量要求。 \n项目状态报告\n包括质量测量指标、工作绩效信息、质量控制测量结果，当实际\n与目标出现偏差时，需要对偏差予以分析，并采取纠正和预防措施。\n组织过程资产\n可借鉴的纠正和预防措施。\n工具和技术\n审计、评审、测试、评估、度量、质量新老七种工具等\n关键输出\n确认的可交付成果、确认的变更、变更请求、项目状态报告（问题的跟踪和闭环）、项\n目文件（更新）、组织过程资产（更新）等。 \n关键动作\n  将项目执行过程中所产生的项目状态、度量数据等信息与质量计划相比较，识别项目执行过程中的问题和风险。 \n  实施质量审计，识别改进点和好的实践。针对改进点制定改进措施和预防措施，好的实践要予以固化。 \n  针对质量问题，使用质量工具进行根因分析。采取纠正措施，使版本的质量得到有效控制，达成既定目标。积极推行预防措施，并固化到组织流程中，保证同类问题在后续版本不再重犯。 \n角色和职责\n项目赞助人\n  明确项目总体质量策略及要求 \n  批准项目质量目标 \n  批准项目的质量计划 \n  支持项目经理的质量管理，为其分配合适的资源 \n  和组织内外的项目利益干系人沟通质量计划 \n项目经理\n  制定项目质量计划，与项目赞助人在质量目标及要求上达成共识，确保相关质量计划符合组织政策、标准、流程及规范 \n  与项目团队成员以及其他关键项目利益干系人沟通项目质量计划 \n  确保质量计划的贯彻执行和质量目标的达成 \nQA\n  协助项目经理开发质量计划 \n  协助项目经理做好质量控制工作，推动项目质量目标达成 \n  对质量保证措施进行跟踪监控，向管理者提供质量健康状态，并推动项目质量问题的解决 \n  给项目团队提供过程、质量工程方法等方面的指导 \n  推动项目质量管理的持续改进 \n项目成员\n  参与开发项目质量策略 \n  遵从项目质量计划，给出改进建议，对齐所有项目质量策略 \n  完成项目开发工作，并符合项目质量目标 \n目标成本管理\n定义\n目标成本管理是指分析项目所交付产品的成本要求，明确产品目标成本的构成，选择\n并定义目标成本的实现方案，构建有成本竞争力的交付产品。 \n描述\n在目标成本管理中，强调产品目标成本的实现，要关注安装、服务、运维产品全生命\n周期 E2E 成本，正确认识全流程的隐性成本，并在前端设计开发中加以考虑。\n产品 E2E 目标成本管理的范围\n设备成本：即料本+制造费用\n工程成本：主要包括工程勘测、硬件安装、软件调测、验收等环节的成本\n维护成本：主要包括升级、日常维护、巡检、打补丁等环节的成本。\n物流成本：主要包括分货、包装、运输等环节的成本。\n关键活动\n  目标成本分解：主要在项目概念阶段进行。 \n定义\n目标成本分解是指比较不同备选概念的成本，提供备选概念的选择依据，对选定的备\n选概念 E2E 目标成本进行初步分析和分解，评估目标成本达成的可行性，把 E2E 成本\n需求落入系统需求，明确产品的成本竞争力。 \n描述 \n如果项目任务书中产品成本策略不够清晰，则在分析目标成本之前，项目团队需要通\n过解剖等方法分析竞争对手的产品成本，确定产品的成本策略和目标成本，确保开发\n产品的成本竞争力。要尽可能分析以下内容： \n  竞争对手关键技术实现途径 \n  竞争对手产品关键器件及单板成本 \n  竞争对手产品的各种配置成本 \n如果目标成本实现的风险较大，特别是硬件产品，有可能导致项目终止开发，项目团\n队需要与 PDT 经理等及时沟通。 \n  可能的备选关键部件/器件成本\n  在规划版本时需要考虑多种部件/器件解决方案，引入多家供应商竞争 \n  ASIC 部门分析芯片，规划 ASIC 策略 \n  可能的备选平台 \n  评估已有的软、硬件平台，以及是否有可以移植的平台 \n  评估是否可以借用现有成熟单板、电源、结构件、配电等 \n  对借用/移植的平台、单板、软件模块等进行成本分析，包括移植工作量、节约工作量、物料成本等 \n  评估第三方软件，如 OS、DB、中间件等 \n  E2E 成本要素 \n与其它活动的关系\n过程要素\n关键输入\n项目任务书（E2E 目标成本）、需求文件（项目需求）、项目范围说明书、竞争对手产\n品成本信息等。 \n工具和技术\n目标成本分解法：按照产品结构树，自上向下分解目标设计成本\n如整机→功能\n模块→单板、结构件、电源、附件→关键器件、外配套等。然后，可以采用价值\n分析/价值工程法，对每个功能模块进行评分，按分数比例分解成本目标；或者采\n用类比分解法，根据已有的相近的产品的成本构成匹配出各模块的目标成本；还\n可以采用能力分解法，即看看哪个模块的低成本潜力要大一些，相应承担的成本\n目标就大一些。\n成本测算法\n直接法\n根据设计方案的技术定额、BOM 结构、配置、工艺、生产人工/机\n器消耗等分别测算物料、制造费用等成本项目，合计计算产品制造成本。 \n概算法：\n在一般情况下，除了物料项目采用直接法计算外，其它成本项目如\n安装成本，通常是比照类似产品成本中这些项目所占的比重来概算。 \n分析法\n在类似老产品的成本基础上，通过新老两种产品在结构、用料、工\n艺、维护方式等方面对比分析，计算其差异成本并进行增减调整，以求得新\n产品的成本。 \nE2E 成本均衡法\n从 E2E 全流程成本来牵引产品设计，从 E2E 来看，如果能够降\n低全流程成本，就可以增加合理的料本；若提升 1 元的料本能降低后端 1 元的人\n工成本，宁愿选择增加 1 元的料本，因为后端人工成本有逐步上升的趋势，而料\n本则有逐步下降的趋势。 \n关键输出\n初步的产品 E2E 目标成本报告（作为产品备选概念的输入参考）、备选概念成本比较报\n告、项目文件（更新）等。 \n关键动作\n  按照备选概念分解各模块，包括系统级、模块/单板级的备选概念，并评估运输成本、安装成本、维护成本高低。 \n  计算不同备选概念的成本，并给出不同备选概念的对比分析。 \n  与目标成本进行比较分析，评估目标成本达成的可行性。 \n  E2E 成本需求纳入系统需求跟踪管理。 \n  目标成本设计：主要在项目计划阶段进行。 \n定义\n目标成本设计是将产品 E2E 目标成本需求转化成本设计规格，给出关键降成本措施。\n描述\n在目标成本设计中，设备成本要分解到单板、模块、关键器件，工程成本、维护成本\n和物流成本要分解成本工时和产品能力目标。\n为了前端构建成本，为成本竞争优势打下基础，一般采用 QFD、价值分析/价值工程、\nTRIZ 等方法选择最优方案，明确构建低成本的关键措施，并列入项目计划中落实执\n行，确保项目交付的产品在整个生命周期中成本最优。 \n前端构建成本的典型措施\n  架构和系统设计中构建成本，采用各种技术手段和技术创新，在不降低产品性能和质量的前提下，降低产品生命周期成本，如多网元共板设计、无损业务自动设计、网元占用内存优化等。 \n  平台、CBB 的应用，如模块组件化等。 \n  海量发货产品，必须考虑构建硬件低成本措施：构建整机低成本方面如结构件归一化、配线优化、散热优化等，构建单板低成本方面如采用 ASIC 等。 \n  考虑制造、采购、销售、售后维护环节的低成本构建措施\n  器件选择，不能独家供应 \n  单板推行无螺钉装配技术 \n  做好集成配置器开发，降低销售成本 \n  丰富问题定位手段，提升问题定位效率 \n  提供远程调测/升级及维护工具、一次进站、站型标准化、客户自维护等 \n  考虑物流成本 \n  ABC 分包 \n  一箱式发货 \n  体积重量 \n与其它活动的关系\n过程要素\n关键输入\n初步的产品 E2E 目标成本报告、备选概念成本比较报告、需求文件（产品规格）、组织\n过程资产、竞争对手产品成本信息等。 \n工具和技术\n价值分析/价值工程、QFD、TRIZ、决策分析等。\n关键输出\n产品 E2E 目标成本报告等\n关键动作\n  产品成本测算\n  获取结构件、线缆、电源、单板主要器件（含 PCB）、第三方软件等价格。 \n  估算单板/模块成本。 \n  根据典型配置及其它主要配置计算产品成本。 \n  产品成本构成分析，计算出各部件的成本构成比重。 \n  考虑生产/测试成本、安装成本、维护成本的高低，定性评价对可服务性、可安装性的影响。 \n  组织相关专家对测算结果进行评估。 \n  产品目标成本达成措施分析\n  根据产品成本构成，对占产品成本 80%的部件提出明确的构建低成本的要求。 \n  参照前期给出的目标成本，给出需要重点构建低成本的关键点，特别要关注DFX 基线的落实，如工程成本基线、维护成本基线、物流成本基线等。对服务成本，若不能核算到以货币为单位的目标时，应以工时和服务能力作为目标提出。 \n  对占产品成本比重大的关键器件或部件，项目团队提出多种解决方案（包括ASIC 对策），由项目经理提交给采购部门，以便招标或价格谈判。 \n  成本措施列入项目计划。\n  目标成本实现与验证：主要在项目执行阶段进行。 \n定义\n目标成本实现与验证是指实施降成本措施，监控产品 E2E 目标成本的落实，评价产品\nE2E 目标成本达成情况。 \n描述\n项目团队应在开发阶段跟踪产品 E2E 目标成本的达成情况，降成本措施的实现情况，\n给出风险预警；在验证阶段综合各领域的目标成本达成情况，给出产品 E2E 目标成本\n达成率。 \n要强调平台化、标准化、简单化，特别要关注从兼容性设计、采用通用/主流器件、多\n家选型等方面构建成本优势，尽量复用成熟的软、硬件平台、单板及模块，降低开发\n及维护成本。如果产品量大、生命周期长，则要进一步加强构建低成本的特别措施。 \n与其它活动的关系 \n过程要素\n关键输入\n产品 E2E 目标成本报告、项目计划、项目状态报告、组织过程资产等。\n工具和技术\nDFX、标准化、选型替代、模块化、成本测算法等\n关键输出\n项目状态报告（更新，包含成本措施实施报告、产品 E2E 目标成本达成率、基础工时\n测试报告等）、变更请求、项目文件（更新）等。 \n关键动作\n  测算、监控目标成本实施情况（含采购降低计划实施情况）： \n  关注料本落实情况\n  关注制造、服务等端到端成本落实情况：\n  评价目标成本达成情况，制定成本优化的计划和措施\n  实验室测试和 BETA 验证基础工时的达成情况，验证降成本措施的实现情况，测算产品 E2E 目标成本的达成情况。\n  项目移交前，提出产品生命周期管理过程中持续降成本建议。\n角色和职责 \n项目赞助人\n  审核项目任务书提出的目标成本 \n  审视项目团队确定的目标成本 \n  签发目标成本 \n  评价目标成本达成情况 \n项目经理\n  组织分析、分解目标成本 \n  按签发的目标成本，制定构建低成本产品的措施并指导团队落实 \n  组织按照要求提取备选概念配置、典型配置、单板配置等进行成本核算 \n  监控目标成本达成情况 \n  组织降成本专项活动 \n成本工程师（可选）\n  设备成本竞争分析 \n  E2E 成本均衡、优化分析 \n  提供成本管理工具方法模板操作指导、优秀实践等 \n  给出 E2E 目标成本达成率 \n项目中与财务相关的团队成员\n  分析、提出目标成本建议 \n  协助计算目标成本 \n  测算产品成本，评估目标成本达成情况 \n项目成员\n  参与目标成本的分析、分解 \n  实施成本降低措施 \n  项目执行过程中，提交成本优化建议 \n时间管理 \n定义\n时间管理是指管理和控制项目的工期和进度，确保所有项目活动都能够得到很好的识\n别和控制，最终按时完成。 \n描述\n在时间管理中，项目团队根据确定好的项目范围，参照 WBS 模板的标准活动，定义出\n项目中的具体活动，继而估计每个活动的持续时间并对活动排序，制定相应的进度计\n划，然后在项目执行过程中监控项目进度计划的执行，如果进度偏差不符合计划，则\n启动变更控制，调整进度计划或者采取其它措施（如调整范围、增加资源等），以保证\n项目目标的达成\n对多数项目来说，交付时间很大程度上影响其项目的收益，所以应该一方面让客户参\n与时间进度计划的商讨和认可，这样可以降低合同双方理解不一致的风险，增加对该\n项目的信心，另一方面也需要让项目成员对负责的任务有充分的理解和认识，而且对\n制定的时间进度计划充满信心，并尽量利用各种潜在机会缩短交付时间。 \n关键活动\n活动定义\n主要在项目概念与计划阶段进行，主要工作是根据范围管理输出的工\n作分解结构（WBS），识别为完成项目交付而需要采取的具体活动。 \n定义\n活动定义是指根据范围管理输出的工作分解结构（WBS）的工作包，识别为完成项目\n交付而需要采取的具体活动的过程。 \n描述\n将范围管理输出的 WBS 的工作包进一步细分为更小的组成部分，即活动。活动是开展\n估算、编制进度计划以及执行和监控项目工作的基础。 \n按照组织的基线数据，活动的持续时间一般在一到两周左右比较合适，这种活动粒度\n比较容易进行准确的估计、计划，也便于后续的项目进度控制。 \n活动颗粒度大小是与项目具体情况密切相关，对于某个周期是 1 个月的项目，显然细\n化到天的活动可能更合适。 \n项目经理与项目核心团队成员必须全程关注，并积极投入到活动定义中，确保关键项\n目活动没有遗漏或错误。 \n与其它活动的关系 \n过程要素\n关键输入\n项目范围说明书、工作分解结构（WBS）、组织过程资产等。 \n工具和技术\n标准活动清单、专家判断、标杆对照、滚动式规划等。\n  标准活动清单：组织的进度计划模板中提供了一套标准动作，项目在定义活动时可以参考，如华为的 WBS 活动模板。 \n  滚动式规划：是一种渐进明细的规划方式，即对近期要完成的工作进行详细规划，而对远期工作则暂时只在 WBS  的较高层次上进行粗略规划。因此，在项目生命周期的不同阶段，工作分解的详细程度会有所不同。例如，在早期的项目计划阶段，信息尚不够明确，工作包也许只能分解到里程碑的水平；而后，随着了解到更多的信息，近期即将实施的工作包就可以分解成具体的活动。 \n关键输出\n  活动清单\n活动清单需要包含项目所需的全部进度活动，并对每一个活动进行标\n记和提供足够详细的工作描述，使得项目团队成员知道应当完成哪些工作。\n  活动属性\n活动属性是指每项活动具有的属性，是用来扩展对活动的描述。项目\n管理团队应根据项目的实际情况选择最合适的属性。活动属性一般包括活动编\n码、活动名称、活动描述、紧前活动、紧后活动、逻辑关系、时间提前与滞后\n量、资源需求、强制日期、制约因素和假设条件等。在活动定义中，主要确定活\n动编码、活动名称以及活动描述，其它属性在后续活动中进一步明确。\n  里程碑清单\n里程碑是项目中的重要时间点或事件。里程碑清单中需要列出所有\n里程碑，并指明每个里程碑是强制性的（如合同要求的）还是选择性的（如根据\n历史信息确定的）。 \n关键动作\n  对“范围管理”中的“定义范围”活动输出的工作分解结构进行审视，确保近期要完成的工作包已经分解到可管理、可交付的粒度。 \n  确定活动清单。定义出为了完成工作包而需要开展的活动，项目团队成员应参与分解，以便得到更好、更准确的结果。 \n  确定项目所有里程碑，并确定这些里程碑是强制性的还是选择性的。 \n活动评估\n主要在项目概念与计划阶段进行，主要工作是对活动（完成工作包所\n需要的工作）进行评估，主要包括活动的工作量、工期、资源需求等方面。 \n定义\n活动评估是指将定义的活动作为评估对象，估算出每一项具体活动的工作量和资源需\n求，并以此为根据估算出完成该活动所需要的工期。 \n描述\n项目团队通过相关评估活动，主要得到活动资源估计和活动工期估计。活动资源估计\n是每一项活动对资源的独立需求，这里不考虑各活动之间的资源冲突。 \n与其它活动的关系 \n过程要素\n关键输入\n活动清单、活动属性、里程碑清单、项目范围说明书、项目人员分工、资源日历、组\n织过程资产等。\n  资源日历\n是确定各种资源（如人员、物料等）可用时间的日历，说明项目所需\n的各种资源何时可用以及可用多长时间。 \n工具和技术\n专家判断、类比估算、自下而上的估算、项目管理软件、PERT 估计、公司人力微观预\n算模板等。 \n  自下而上的估算\n通过对活动进行进一步细分，然后估算资源需求/工期，接着把\n这些资源需求/工期再汇总起来，得到活动总的资源需求/工期。 \n  项目管理软件\n采用项目管理软件，如 Microsoft Office Project 等，可以有效提高\n估算的效率。 \nPERT 估计\n一种在给定的项目中对潜在任务进行分析的方法。PERT  使用三种估\n算值来界定估计值的近似区间：\n最可能值（Cm）——对所需估计属性进行比较现实的估算得到的结果。 \n最乐观值（Co）——对所需估计属性进行比较乐观（最好的情况）的估算得到的结\n果。 \n最悲观值（Cp）——对所需估计属性进行比较悲观（最差的情况）的估算得到的结\n果。 \nPERT  分析方法对以上三个估算进行加权平均，得到估计结果： \nCe =（Co+4Cm+Cp）/ 6\n  公司人力微观预算模板\n根据特性规模估算和生产率基线数据，估算出工作量，\n再根据项目里程碑点和各阶段工作量分布，计算出各阶段所需的人力资源。 \n关键输出\n活动清单（更新）、活动属性（更新）、里程碑清单（更新）、项目文件（更新）\n等。\n  活动属性（更新）\n主要包括活动工作量、资源需求、活动工期估算结果等。\n其中，活动工作量是指完成每项活动所需花费的人力数量（如人月），可以通过活动\n交付的规模（如功能点、文档页）和生产率基线数据计算出活动工作量，并结合活动\n交付的复杂度加以调整；资源需求是指每项活动所需要的资源数量，如开发人员数\n量、测试人员数量、资料人员数量、网元数、仪表数等；活动工期估算结果是指根据\n估算的活动工作量和资源数量，估算出的每项活动所需工期。 \n关键动作\n  估算活动清单中各项活动的工作量。 \n  估算活动清单中各项活动的资源需求。 \n  估算活动清单中各项活动的工期。\n活动排序\n主要在项目概念与计划阶段进行，主要工作是识别和记录项目活动间\n逻辑关系，制定项目的进度网络图，为项目进度计划的制定提供依据。 \n定义\n活动排序是指识别和记录项目活动之间的逻辑关系，制定项目的进度网络图，从而为\n项目进度计划的制定提供依据。\n描述\n在活动清单中，除了首尾两项活动，其它每项活动都至少有一项紧前活动和一项紧后\n活动，而活动排序的目的就是为了识别每项活动的所有紧前活动和紧后活动。 \n与其它活动的关系\n过程要素\n关键输入\n项目范围说明书、活动清单、活动属性、里程碑清单、组织过程资产等。 \n工具和技术\n紧前关系绘图法（PDM）\nPDM  包括四种依赖关系或逻辑关系： \n完成到开始（FS）：一个活动的开始依赖于另一活动的完成，如单板调测活动的开始\n依赖于单板加工的完成。 \n完成到完成（FF）：一个活动的完成依赖于另一个活动的完成，如软件开发中虽然可\n以分模块进行单元测试，但整个单元测试活动的结束依赖于整个编码活动的结束。 \n开始到开始（SS）：一个活动的开始依赖于另一活动的开始，可安装性验证活动的开\n始依赖于设备安装活动的开始。 \n开始到完成（SF）：一个活动的完成依赖于另一活动的开始，如必须在国庆前完成通\n信设备的巡检。 \n关键输出\n  项目进度网络图\n项目进度网络图是展示项目各进度活动及其相互之间逻辑关系\n的图形。\n  项目文件（更新）\n本活动可能需要更新的项目文件包括活动清单、活动属性、项\n目风险列表等。\n关键动作\n  采用紧前关系绘图法确定各项活动之间的逻辑依赖关系。 \n  依据进度网络模板绘制进度网络图。 \n进度计划制定\n主要在项目概念与计划阶段进行，主要工作是制定项目进度计\n划。\n定义\n进度计划制定是指在活动定义、活动评估、活动排序的基础上编制项目进度计划的过\n程。 \n描述\n通常项目团队需要多次反复，持续审查和修正时间估计和资源估计等活动属性，才能\n制定出一个可行的进度计划。 \n制定进度计划中要避免冒进，不切实际的进度计划只会打乱整个项目的节奏。另外，\n进度计划也不可制定得过于保守，在当今激烈竞争的市场上，宽松的进度计划很可能\n导致机会丧失。 \n与其它活动的关系\n过程要素\n关键输入\n活动清单、活动属性、里程碑清单、项目进度网络图、项目人员分工、项目范围说明\n书、组织过程资产等。 \n工具和技术\n  关键路径法\n通过沿着项目进度网络路径进行顺推或者逆推，得到各网络路径的\n总时间，其中总时间最长的进度网络路径就是“关键路径”，关键路径上的活动就是“关键活动”。关键路径的浮动时间为零，以关键路径为基础，就能计算出其它\n活动的自由浮动时间。 \n  进度计划编制工具\n  进度压缩\n进度压缩是指在不改变项目范围的前提下，缩短项目的进度时间，以\n满足进度制约因素、强制日期或其它进度目标。\n赶工（串行压缩）\n快速跟进（并行执行）\n关键输出\n项目进度计划、项目文件（更新）等。\n项目进度计划\n项目进度计划会包括每项活动的计划开始时间、计划完成时间以\n及相关责任人。 \n关键动作\n  采用关键路径法等进度网络分析工具确定关键活动的开始时间和非关键活动最早和最晚开始时间。 \n  对其中关键路径的活动可采用进度压缩的方法来减少项目周期，以满足项目进度要求。\n  根据资源匹配情况、里程碑清单确定非关键路径活动的开始和结束时间，在确定的过程中要考虑资源平衡。 \n  采用进度计划编制工具编制进度计划。 \n  对进度计划组织评审，并报项目赞助人批准，形成基线并发布。 \n进度控制\n主要在项目执行阶段进行，主要工作是根据项目计划控制项目进度。 \n定义\n进度控制是指依据进度计划管理和控制项目进度的活动。 \n描述\n在项目执行过程中，有可能因时间管理本身或者外部的原因而需要对项目进度进行变\n更，此时便可以按照变更控制流程对项目进度计划进行修订，以确保进度计划始终可\n行。\n与其它活动的关系 \n过程要素\n关键输入\n项目计划、项目进度计划、组织过程资产、项目状态报告等。\n工具和技术\n偏差分析、项目管理软件等\n关键输出\n  项目状态报告：重点阐述实际进度与计划进度偏差部分。 \n  组织过程资产（更新）：把产生偏差的原因、采取的纠偏措施以及经验教训总结更新到组织过程资产中，以便供后来项目参考。 \n关键动作\n  借助项目管理软件，对照项目进度计划，监控项目实际进度。 \n  对偏差进行评估，决定是否需要针对进度偏差采取纠正措施。 \n  如果需要，提出项目进度计划变更请求，批准后更新项目进度计划。 \n角色和职责\n项目赞助人\n  明确项目总体进度要求 \n  批准项目进度目标 \n  批准项目的进度计划及其变更 \n项目经理\n  组织项目团队，共同制定项目进度计划，与项目赞助人在进度目标及要求上达成共识，确保进度计划符合组织要求、标准、流程及规范 \n  与关键项目利益干系人沟通项目进度计划 \n  监控项目进度计划的执行，并向关键项目利益干系人定期通报项目进度计划进展情况 \n项目成员\n  参与开发项目进度计划 \n  执行项目进度计划，完成项目开发工作，并符合项目进度目标 \n  对项目时间管理工作提出改进建议 \n财务管理\n定义\n财务管理是指对完成项目活动所需的费用进行预算和管理，确保项目费用在预算范围\n内可控；估算项目的预期收入，并对项目期间的实际收入进行管理，确保项目投资合\n理有效。 \n描述 \n  直接费用\n项目可直接控制管理的费用，主要包括项目所需要的业务费用（如合\n作费用、物料费用、资料费用、软件费用等）和员工性费用。此部分费用是项目\n经理关注的重点。\n  间接费用\n项目无法直接控制管理的费用，如项目所需要的行政/运作费用（折旧\n与摊销、租赁费等），首先归集在部门，然后按一定的方法（如按工时比例）分摊\n到项目。项目经理主要关注分摊依据的合理性。 \n关键活动\n  费用估计与预算\n费用估计与预算就是对整个项目活动的费用进行估计并给出完\n成项目最合适的预算的过程。一般在项目立项准备阶段启动项目的费用估计与预\n算（粗略的），在项目的概念与计划阶段完成最终的费用预算并形成项目费用基\n线。 \n一个没有经验的项目经理一定要充分借鉴历史版本经验。 \n人力估计后，项目核心团队成员（如软件经理、硬件经理、资料经理、逻辑经理、测\n试经理、QA 等）要对项目人力估计结果一起进行审视，保证估计的准确性。\n定义\n费用估计与预算是指通过分析项目资源需求，估计项目中需要的合作费用、差旅费\n用、物料费用、试验测试费用、培训费用、资料软件费用、雇员费用等；记录估算细\n节与完成项目的备选费用方案，结合公司费用政策，确定项目每个阶段的费用预算，并经项目运作指导团队评审通过后形成项目的费用基线，为项目的费用控制提供依据\n的过程。\n描述\n在项目立项准备阶段启动项目的费用估计与预算，在项目计划阶段完成费用预算并形\n成基线。 \n在进行费用估计与预算时，项目经理需要重点关注项目的业务费用和雇员费用。 \n与其它活动的关系\n过程要素\n关键输入\n项目范围说明书、进度计划、人力资源计划、资源日历、项目人员分工、采购管理计\n划、风险跟踪表、组织过程资产等。\n资源日历\n确定各种资源可用时间的日历，说明项目所需的各种资源何时可用以\n及可用多长时间。从资源日历中获取项目资源的种类、数量和使用时间，可根据\n这些信息确定项目生命周期各阶段的资源费用。\n 组织过程资产\n  历史信息（历史项目与费用管理相关的所有数据、经验教训）。 \n  与费用预算有关的政策、流程和指南。 \n  预算工具、模板。如，专项（物料、资产、合作费等项目涉及的非人力预算部分的内容）预算模板。 \n  可以从公司相关组织/数据库获取资源成本费率及相关信息。\n工具和技术\n  专家判断：通过专家自身的经验进行估算。\n  项目团队内的各个领域专家，如设计、开发、测试、资料、装备、工艺、制造、服务等 \n  组织内其他专家，如相关行业管理部门的专家、公共领域专家等 \n  外部顾问 \n  类比估算\n：按照以往类似项目的实际费用（如人均工资费用、人均差旅费、人均\n折旧与摊销等）为基础，估算当前项目的费用。在估计时，以过去类似项目的实\n际数据为依据来估算当前项目的参数值，同时根据本项目的已知差异进行调整，\n最终得到估算结果。\n  三点估算\n最可能费用（Cm）。对所需相关费用进行比较现实的估算，所得到的项目费用。 \n最乐观费用（Co）。对所需相关费用进行比较乐观（最好的情况）的估算，所得到的项\n目费用。 \n最悲观费用（Cp）。对所需相关费用进行比较悲观（最差的情况）的估算，所得到的项\n目费用。 \nPERT  分析方法对以上三个估算进行加权平均，来计算预期的项目费用： \nCe =（Co+4Cm+Cp） / 6\n关键输出\n项目费用估计：\n费用估计结果应该覆盖项目活动所使用的全部资源，包括员工性\n费用、业务性费用和行政性费用\n估计依据\n  关于估算依据的信息（如项目规模、项目复杂度、项目阶段人力资源、进度计划、人工费率等）\n  关于全部假设条件的信息（如项目后期需求可能增加 5%） \n  关于各种已知制约因素的信息（如公司相关预算政策）\n  对估算区间的说明（例如，“10000  美元/人民币±10%”，就说明了预期成本的所在区间）\n  对最终估算的置信水平或准确度的说明 \n  项目费用预算基线：经项目投资决策团队决策同意的费用预算。 \n关键动作\n直接费用估计\n 间接费用估计\n估计费用汇总\n费用限制平衡\n项目阶段/月度预算汇总\n费用预算基线化\n  费用控制\n在项目的执行过程中，通过监控项目的预算执行情况进行费用控制，\n保证项目实际费用在项目的预算范围内，直到项目关闭。费用控制活动主要集中\n在执行阶段，向前可以延伸到概念与计划阶段，向后可延伸到项目关闭阶段。 \n定义\n费用控制是指在项目执行过程中，监控项目的预算执行情况，例行分析项目中所发生\n的费用，对于异常情况要采取相关措施（如资源调配、外包、物料调拨等）保证项目\n的费用控制在项目的预算范围内，直到项目完成。\n描述\n费用控制应重点分析费用支出与相应完成的实际工作之间的关系。如果费用出现偏\n差，应采取措施，当费用偏差超出可接受的范围，则纳入集成变更控制，只有经过集\n成变更控制，才可以变更预算。\n与其它活动的关系\n过程要素\n项目费用估计、估计依据、项目费用预算基线、项目计划、项目发生费用、物料和非\n生产月度需求计划、组织过程资产等。\n工具与技术\n工时系统（Times-System）\n研发逆向物流管理电子流：\n趋势分析\n关键输出\n项目费用执行情况（报告）、变更请求、项目文件（更新）、组织过程资产（经验教\n训）\n子主题 1\n关键动作\n项目经理对项目的直接费用进行控制，并解决项目费用控制中的问题。项目财务人员\n协助项目经理完成项目费用控制的相关具体工作（偏差分析、趋势分析、费用预测），\n项目其他人员将项目上发生的实际费用正确填写在项目（财务）编码上，保证项目费\n用归集正确。\n雇员费用控制\n 差旅费、合作费、物料和非生产月度需求计划管理\n项目费用状态监控：\n预算变更申请 \n角色和职责\n项目赞助人\n  批准项目预算 \n  批准项目预算的重大变更 \n项目经理：\n  负责项目预算 \n  控制项目费用 \n  当项目费用发生重大变更时，向项目赞助人提出变更申请 \n项目成员（含财务）\n  参与项目预算及相关的准备工作，协助项目经理完成项目预算 \n  报告可预见的预算透支，以及可能的费用节约措施 \n  提供项目费用管理的改进建议 \n风险管理\n定义\n风险管理是指对未知消极事件（可能影响项目的进度、质量、范围等的不确定因素\n等）进行主动应对和管理，降低或者消除消极事件对项目的影响。 \n描述\n风险是指项目中可能发生的某种不确定的事件，该事件一旦发生，会对至少一个项目\n目标造成影响，如范围、进度、成本和质量。 \n项目风险可分为已知风险和未知风险：已知风险是指已经识别并分析过的风险，从而\n可对这些风险规划应对措施。而对于没有识别出来的未知风险，则无法主动进行管\n理，项目团队也应该为未知风险创建应对计划。 \n当风险事件已经发生，就应该当做一个问题来对待。 \n关键活动\n  风险管理规划：主要在项目概念阶段进行。 \n定义\n风险管理规划是指决定如何进行项目风险管理活动的过程。 \n描述\n通过风险管理规划，确定项目过程当中风险管理活动需遵循的规则，并对需要的资源\n和时间进行预算。风险管理规划过程应在制定项目计划过程的早期完成，因为其对项\n目费用、沟通管理等其它计划都有影响。 \n与其它活动的关系 \n过程要素\n需求文件、需求跟踪矩阵、验收标准、项目范围说明书、项目计划、组织过程资产\n等。\n  项目范围说明书\n项目范围说明书应该包含初步确定的风险，并且项目范围说明\n书定义的项目目标、验收准则、假设条件等都是在制定风险管理规划时应该参考\n的因素。\n  项目计划\n风险管理规划是项目计划的组成部分之一，需要满足项目计划的整体\n要求。 \n  组织过程资产\n组织可能设有既定的风险管理方法，如风险分类、概念和术语的\n通用定义、标准模板、角色和职责、决策所需的职权级别。\n工具和技术\n规划分析和评审\n风险管理计划需要项目经理组织相关人员共同制定，参与者可\n包括项目赞助人、项目经理、项目团队成员、其他干系人及相关领域专家。通过\n规划分析，将界定风险管理活动的基本范围，确定风险费用因素和所需的进度计\n划活动，并分别将其纳入项目预算和进度计划中。同时对风险职责进行分配，并\n在一般通用的组织风险类别和词汇定义等模板文件（如风险类别、概率和影响）\n的基础上定制本项目使用的模板文件。这些活动的成果将在风险管理计划中进行\n汇总\n关键输出\n 风险管理计划\n风险管理计划描述如何安排与实施项目风险管理，它是项目计划\n的组成部分。\n  方法论。\n确定实施项目风险管理可使用的方法、工具及数据来源，例如在项\n目过程当中的风险分析主要参考哪些风险库。 \n  风险管理活动定义。\n确定在项目整个生命期中应纳入项目进度计划的风险管\n理活动，例如：SE 需要对项目范围进行分析并识别风险，测试经理需要通过\n分析 FRACAS 中的测试准则来识别风险。 \n  角色与职责。\n确定风险管理团队的成员及风险管理计划中每项活动的责任\n人。为这些角色分配人员并澄清其职责。 \n  预算。\n分配资源，并估算风险管理所需费用，将之纳入项目费用基线。备用\n金、保险费是常见的风险预算。对于研发项目来说，某些重大特性可能会同\n时研究两种方案，待明确之后选择综合评估最优的一种，那么对于被舍弃方\n案的投入，就是项目初期为了规避特性方案风险而预算的。 \n  风险类别。\n需要确定风险分类的原则，以便能系统、持续、一致地进行风险\n识别及分析。常用的风险分类方法有按功能领域（市场、技术、供应等），按\n项目管理涉及的领域（范围、质量、采购等），每一种分类方式都可以逐层分\n解。\n  风险概率定义。\n风险概率指风险发生可能性的大小，可使用概率相对比例，\n例如“高”、“中”、“低”，或者分配某数值表示比例（如 0.1、0.3、0.5、0.7、\n0.9）。需要明确每一种概率的实际含义\n  风险影响的定义。\n风险影响评估旨在调查风险对项目目标（如质量、进度、\n成本）的潜在影响，相对比例主要是按照影响程度排序，例如“高”、“中”、\n“低”，也可通过数字比例为这些影响分配数值。\n  风险优先排序方法。\n根据风险对实现项目目标产生的潜在影响，对风险进行\n优先排序。风险优先排序的典型方法是借用对照表或概率和影响矩阵形式。\n  报告方式。\n风险的状态随着项目的进展会不断发生变化，因此在制定风险应\n对计划时要确定例行的报告方式。需要明确：1、风险管理表的内容和格式，\n以及所需的任何其它风险报告；2、如何对风险管理过程的结果进行例行的记\n录和分析；3、风险报告的发送范围及汇报关系、管理层级。 \n关键动作\n  在项目的概念与计划阶段前期制定风险管理计划，并与项目赞助人进行沟通。 \n  风险管理计划作为项目计划的组成部分，在签署合同时形成基线。 \n  识别风险：主要在项目立项准备阶段和概念阶段进行。 \n定义 \n识别风险是指识别可能影响项目的风险并进行记录，为后续风险的分析和应对做准备\n的过程。 \n描述\n风险识别活动的参与者可包括：项目赞助人、项目经理、项目团队成员、客户（包括\n内部客户，如供应、服务等领域代表）、项目团队之外的领域专家。 \n识别风险是一个需反复进行的活动，因为在项目开发过程中，随着项目的进展，新的\n风险可能产生或被发现。反复的频率以及每一轮的参与者应根据具体情况确定。应鼓\n励所有项目成员参与识别风险过程，以便营造团队成员对风险及其应对措施关注的氛\n围和责任感。 \n与其它活动的关系\n过程要素 \n关键输入\n  项目任务书\n可从项目任务书中了解项目的假设条件，假设条件的不确定性就是\n项目的潜在风险。 \n  WBS\nWBS 是识别风险过程的关键输入，它能直观地看出项目的资源投入、利用\n情况，这有助于发现在资源分配等方面的潜在风险。\n  各项目计划\n项目计划中的项目范围说明书、质量计划、进度计划、产品目标成\n本、费用预算基线是项目的重要组成部分，范围、质量、进度、产品目标成本、\n费用的要求是项目风险的重要方面。\n  项目文件\n通过对项目文件的评审，可以从不符合项处识别可能存在的风险。如\nRDR、TR 评审，关键交付件(如设计方案、原理图、测试报告等)的评审。 \n  干系人信息\n要保证关键干系人（例如维护、技服、制造等下游客户）能以访谈\n或其它方式参与识别风险过程，为识别风险提供输入。 \n  组织过程资产\n  项目档案，包括实际数据，例如 RDM、历史版本的遗留问题等 \n  组织和项目的流程规定 \n  风险描述的模板 \n  经验教训，包括风险库 \n  风险相关的 Checklist \n工具和技术\n  文档审查\n在对项目文档（包括各种计划、DCP 材料和其它信息）进行评审时，\n需要标识出存在的不确定性，这些都可作为风险识别的输入。 \n  信息收集技术\n可用于风险识别的信息收集技术包括：头脑风暴、德尔菲技术、\n访谈、根因分析。\n  检查表\n团队应考虑根据实际情况对检查表进行定制。\n  假设分析\n每个项目和每个已识别的风险都是基于某种假设的，项目中的假设要\n转化为风险跟踪。常见的有对关键技术、处于开发阶段的平台借用和资源冲突等\n方面的假设，这些都需要列入风险管理表进行统一管理。 \n关键输出\n  风险管理表 \n过程要素 \n关键输入\n  项目任务书\n可从项目任务书中了解项目的假设条件，假设条件的不确定性就是\n项目的潜在风险。 \n  WBS\nWBS 是识别风险过程的关键输入，它能直观地看出项目的资源投入、利用\n情况，这有助于发现在资源分配等方面的潜在风险。\n  各项目计划\n项目计划中的项目范围说明书、质量计划、进度计划、产品目标成\n本、费用预算基线是项目的重要组成部分，范围、质量、进度、产品目标成本、\n费用的要求是项目风险的重要方面。\n  项目文件\n通过对项目文件的评审，可以从不符合项处识别可能存在的风险。如\nRDR、TR 评审，关键交付件(如设计方案、原理图、测试报告等)的评审。 \n  干系人信息\n要保证关键干系人（例如维护、技服、制造等下游客户）能以访谈\n或其它方式参与识别风险过程，为识别风险提供输入。 \n  组织过程资产\n  项目档案，包括实际数据，例如 RDM、历史版本的遗留问题等 \n  组织和项目的流程规定 \n  风险描述的模板 \n  经验教训，包括风险库 \n  风险相关的 Checklist \n工具和技术\n  文档审查\n在对项目文档（包括各种计划、DCP 材料和其它信息）进行评审时，\n需要标识出存在的不确定性，这些都可作为风险识别的输入。 \n  信息收集技术\n可用于风险识别的信息收集技术包括：头脑风暴、德尔菲技术、\n访谈、根因分析。\n  检查表\n团队应考虑根据实际情况对检查表进行定制。\n  假设分析\n每个项目和每个已识别的风险都是基于某种假设的，项目中的假设要\n转化为风险跟踪。常见的有对关键技术、处于开发阶段的平台借用和资源冲突等\n方面的假设，这些都需要列入风险管理表进行统一管理。 \n关键输出\n  风险管理表 \n关键动作\n  检索项目档案、经验教训集（包括项目风险库），收集与本项目相关的风险。 \n  对项目概念、计划阶段的输出件进行检查。 \n  根据组织内已有的风险相关的 Checklist 进行检查。 \n  召集项目成员、主要干系人、相关领域专家，采用头脑风暴等方法识别项目风险。 \n  将识别出的风险记录到风险管理表。\n  分析风险：主要在项目概念与计划阶段进行。 \n定义\n分析风险是指评估风险的发生概率和影响，对风险进行优先排序，识别出 TOP 风险\n描述 \n对风险的分析一定不能仅关注单个风险，通过系统的分析，可能在大量单点信息的基\n础上发现某些方面（某些领域、某些时间段等）的共性问题，从而识别出更加重大的\n风险点。 \n与其它活动的关系 \n过程要素\n关键输入\n风险管理表、项目任务书、项目计划、项目范围说明书、WBS、组织过程资产等。 \n工具和技术\n矩阵图、趋势分析等。 \n关键输出\n  风险管理表（更新）\n  风险发生的触发条件、征兆和预警信号。 \n  刷新项目风险的优先级。 \n  进行风险分类。\n  近期就需应对的风险清单。\n  风险分析结果的趋势。\n关键动作\n  对已识别的风险进行概率及影响评估。对于低等级概率和影响的风险，可以暂时不做应对计划（但需要持续监测）。 \n  根据风险概率及影响矩阵进行等级评估。根据风险发生的概率和影响，综合评估风险的等级，可分为高、中、低等风险\n  风险紧迫性评估。从时间维度来看，可以把风险分为近期风险和远期风险，一般来说，近期就需应对的风险会更加紧急。一般在风险分析的时候会考虑时间因素，但需要注意的是某些风险在刚被识别出来时还属于远期风险，随着项目进度的推移，会逐渐紧迫起来，这就要求在风险分析的时候根据时间来刷新风险等级。比较常用的方法有：根据时间排序，或者根据风险所属的项目里程碑阶段分类。 \n  风险趋势分析。随着风险信息的增多，整体上可能呈现出某种趋势，例如某个领域的风险明显比其它领域多，或者某个时间段的风险可能性明显比其它时间段大。对于呈现某种趋势的风险要重点关注。 \n  制定风险应对计划：主要在项目概念与计划阶段进行。 \n定义\n制定风险应对计划是指为减少项目失败威胁而制定应对策略的过程。\n描述\n与其它活动的关系\n过程要素\n关键输入\n风险管理表、项目范围说明书、WBS 等。\n工具和技术\n  规避\n  转移\n  减轻\n  接受\n关键输出\n  风险管理表（更新）\n  风险责任人及其职责 \n  已沟通过的预防措施、应急措施 \n  项目文件（更新）\n关键动作\n  确定具体风险的责任人 \n  与风险责任人共同制定风险应对计划 \n  控制风险：主要在项目执行阶段持续进行。 \n定义\n控制风险是指在整个项目中，跟踪已识别风险，实施风险应对计划、并评估风险应对\n计划的有效性，监测残余风险（在采取风险应对措施之后仍然存在的风险），同时通\n过不断识别、评估新风险，确保风险对项目的影响降到最低。 \n描述\n控制风险可能涉及选择替代策略、实施应对计划、采取纠正措施，以及修订项目计\n划。 \n风险应对责任人应定期向项目经理汇报计划的有效性、未曾预料到的后果，以及为合\n理应对风险所需采取的纠正措施。在控制风险过程中，还应更新组织过程资产（如项\n目经验教训数据库和风险管理模板），以使未来的项目受益。 \n与其它活动的关系 \n过程要素\n关键输入\n工具和技术\n  偏差分析\n  审计\n关键输出\n风险管理表（更新）、变更请求、项目状态报告、项目文件（更新）、组织过程资产\n（更新）等。 \n关键动作\n  例行跟踪和报告 \n  例行识别新的风险并制定新风险的应对计划 \n角色和职责\n项目赞助人\n  明确项目的风险承受程度 \n  批准项目的风险管理计划 \n  和组织内外的干系人就风险情况进行沟通 \n项目经理\n  制定风险管理计划 \n  组织项目成员进行风险识别、分析活动 \n  制定风险应对计划，根据风险的等级分配、落实风险的责任人和资源 \n  控制风险，组织例行的风险检查及通报 \n  与项目赞助人、干系人就风险情况进行沟通，重大风险及时上报、求助 \n风险管理员（可选）\n对于一个项目来说，风险管理的第一责任人是项目经理。根据项目的具体情况，项目\n经理可以设置专门的风险管理员，协助进行风险管理，承担如下全部或部分职责。 \n  组织项目成员进行风险识别、分析活动 \n  组织例行的风险检查及通报 \n  跟踪风险应对计划的执行情况 \n风险行动责任人\n  制定并实施风险的应对计划 \n  协调、落实资源以实施风险应对计划 \n  定期反馈风险的进展或记录风险的相关信息 \n任何人都可能充当风险行动责任人。 \n项目成员\n  在项目经理的安排下参与风险识别、分析活动 \n  在项目进行时识别风险并及时上报 \n人力资源管理\n定义\n人力资源管理是指建立、管理和领导项目团队，确保项目人力资源和团队绩效满足项\n目需求，且团队成员得到成长，达成双赢局面。\n描述\n人力资源管理包括了项目人力资源的规划、获取和释放，以及项目团队的组建、管\n理，既保证项目的成功，同时也促进组织和个人的成长。\n关键活动 \n  规划人力资源：主要在项目立项准备阶段开始，在项目概念阶段完成。 \n定义\n规划人力资源是指项目经理要识别和记录项目人力资源需求、人力资源可获得性（特\n别是稀缺资源、关键资源的可获得性），确定项目组织结构、角色、职责、所需技能和\n汇报关系，并完成项目的人力资源的使用计划和释放计划的制定。 \n描述\n整个项目过程中，有必要不断审视人力资源规划的实施情况，及时调整，必要时需进\n行有效的变更管理。 \n与其它活动的关系\n过程要素\n  项目任务书：有资源使用方面的约束和要求。 \n  组织过程资产：从已有的组织过程资产库中，找出类似的项目的组织结构，作为本项目的组织结构的参考。 \n  活动清单（更新）、活动属性（更新）、里程碑清单（更新）：提供人力资源需求。 \n工具和技术\n组织结构图、角色责任描述等\n关键输出\n  人力资源计划\n作为项目计划的一部分，人力资源计划是关于如何定义、配备、\n管理、控制以及最终遣散项目人力资源的指南。\n  角色和职责。\n  角色 \n  职责和权力 \n  能力要求 \n  项目组织结构图\n  人员配备管理计划\n  资源需求平滑。\n  培训和培养。\n关键动作\n  确定项目组织结构\n  估计项目人力\n  制定人力资源计划\n在制定项目人力资源计划过程中，需要和职能部门主管沟\n通，将项目人力需求和职能部门实际人力供给进行匹配，保证项目人力资源可获\n得。对于项目所需要的特定的知识和技能，项目经理应做好培训、培养计划，对\n于一般的知识和技能不足的项目成员，项目经理应督促职能部门主管做好相应的\n培训、培养。不同组织对于项目特定的知识和技能与一般的知识和技能的界定是\n不同的，例如，外包人员的产品知识往往由项目负责培训，而产品部(PDU)人员的\n产品知识培训往往由职能部门承担。\n  批准人力资源计划\n  组建项目团队：主要在项目概念阶段和项目计划阶段完成项目团队的组建。 \n定义\n组建项目团队是指项目经理根据批准的人力资源需求计划，与职能部门主管（如设\n计、资料、测试、开发、质量等）协商，获取人力资源并组建项目团队。\n描述\n组建项目团队时需要考虑：是否有熟悉该项目涉及的特性的老员工可以协调，新老员\n工的比例是多少对项目的冲击最小，该项目急需的骨干人员何时能够进入到项目团\n队，团队成员是否集中办公等。 \n对应的人力需求计划需要提前和各职能部门主管沟通，并获得对应的人力到位的承\n诺。 \n在组建项目团队过程中，对于关键资源（例如专家、有独特技能者），应该根据他们的\n特点进行任务安排。 \n对于项目团队中的关键技术和关键特性，在组内需要考虑人员的备份，避免在出现突\n发情况（比如离职）时，对项目带来冲击。 \n与其它活动的关系\n过程要素 \n关键输入\n人力资源计划、项目计划、组织过程资产等\n工具和技术\n分派、协商、招聘、外包\n关键输出\n项目人员分工\n关键动作\n  资源获取\n  内部资源的获取\n项目的实际开发涉及到很多不同的职能部门，项目经理按\n照人力资源计划，和职能部门主管就人员的需求和到位情况作进一步确认并\n做好跟踪，当出现异常时需要立即调整，确保人员能够满足开发进度的要\n求。\n  外部资源的获取\n外部资源的获取主要是外部评审专家的协调。对于项目涉\n及的关键技术点和特性，需要提前和对应领域的技术专家协调，以便在项目\n进行到合适的阶段，技术专家能深入项目团队进行技术评审，在关键问题上\n面把握技术方向。 \n  任务分派 \n项目经理在组建团队时需要考虑人员的技能和任务的难易程度，确保人员能够满足所\n负责任务的要求。同时需要和接受任务的人员明确任务的目标和要求，确保能够完成\n项目设定的初始目标。在人员的配置上，不能有所缺失和遗漏，尤其是关键任务。在\n项目团队比较大的情况下，团队内部会划分为不同的小型项目团队，不同的项目团队\n有各自的职责。此时需要将项目团队之间的接口人定义清楚，包括其职责和沟通的方\n式，同时对于团队内部的公共角色也要指派清楚，并且在项目的实际运行过程中不断\n调整，以期整个团队内部能够顺畅地运作。 \n  外包项目管理 \n对于外包项目需要确定双方的接口人，并将界面和交付目标设定清楚。在外包项目的\n实际运作过程中，需要不断监控项目的实际进展，确保能够按时按质交付。 \n  管理团队：主要在项目概念与计划阶段开始，持续到项目发布阶段完成。 \n定义\n管理项目团队是指项目团队组建完毕后，项目经理对项目成员进行辅导，支持和开发\n个人的技能和潜力；同时对团队进行日常管理，跟踪团队成员的表现，认可和激励表\n现好的项目工作，持续营造良好团队氛围，确保团队成员全身心投入和发挥作用；对\n于影响到项目目标的任何项目组织变更，按照集成变更控制规程进行控制等等的各种\n管理活动。 \n描述\n由于项目团队是由技能不同的人或小组构成，要使之成为一个高绩效团队，对项目经\n理的挑战是不言而喻的。项目经理要把对人的关注放在首位，设法向每位项目成员提\n供能充分发挥其才能的工作机会，并给予必要的辅导。最终使得在项目顺利交付的同\n时，项目成员也获得了良好的成长，达成组织和个人之间的双赢。 \n项目经理需要与团队成员一起明确项目目标，以及团队中每个成员的工作目标和任\n务，确保项目团队中每个成员始终围绕一个共同目标开展工作。另一方面项目经理要\n与职能部门主管加强沟通，确保团队成员在定期（半年度/年终）考评时，其所获得的\n绩效评价与他在项目交付中的绩效表现是一致的。 \n项目经理要掌握多方面的管理技能，特别是在沟通、冲突管理、谈判和领导力等方面\n的技能，以培养团队协作精神、整合团队成员的工作。 \n与其它活动的关系 \n过程要素 \n关键输入\n  项目人员分工\n一般在任命文件中体现，包括该项目涉及的所有人员、每个人员\n负责的领域和职责、项目团队运作的方式、项目团队的汇报机制以及项目存在的\n周期。该项目的任命文件以正式签发为准。 \n  组织过程资产\n影响管理项目团队的组织过程资产包括公司任职资格制度，职能\n部门的考核方式等。 \n工具和技术\n关键输出\n项目组织结构（更新）、人员变更请求、绩效评估（团队成员绩效评估结果）、人员能\n力提升、组织过程资产（人力资源管理）等。 \n关键动作\n  明确目标\n通过各种方式明确团队目标和核心价值，激励团队成员为之奋斗。例\n如，对于一个新项目，团队的角色职责往往不是非常清晰，可以组织研讨会进行\n研讨，通过讨论达成共识，保证上下对齐。 \n  组织结构优化\n根据项目的实际进展情况和人员的变化调整，及时优化项目组织\n结构，使得项目组织运作流畅，确保高绩效和及时交付。导致组织结构需要优化\n的因素有很多，比如职能部门组织结构的调整，临时的重大项目的支持等都会导\n致项目的组织结构调整。 \n  有效沟通\n项目经理通过定期或者不定期的沟通交流，随时了解项目团队成员的\n态度、工作内容、进展和困难。项目经理可以通过例会或者私下非正式的交流获\n取项目的进展和问题，包括团队成员之间的矛盾，解决人际交往的问题，并通过\n有效的方式进行跟踪。比如建立团队例行会议制度，明确例会召开时间、地点、\n主要议题、形式，进行正式的例行沟通。设立咖啡时间，定期与员工进行沟通，\n通过非工作场合了解团队成员的想法，进行思想交流。 \n  能力提升\n对于与项目相关的能力提升，项目经理应该按人力资源计划中的安排\n来实施预定的培训，应该根据项目团队管理过程中的观察、讨论和项目绩效评估\n结果，来开展必要的培训。关注每个员工的成长，并给予针对性的培养和指导，\n可以采用全员导师制的方式。 \n  团队建设\n组织气氛的建设是建设团队的重要方法，也是不断提升组织绩效的辅\n助手段。氛围营造的手段包括集体活动，新老员工的互助等。团队建设不能为了\n建设而建设，最有效的方法还是通过日常的实际业务，团队 leader 身体力行地参\n与到实际业务工作中，才能真正将团队整合起来，并带领团队共同完成目标。 \n  激励\n多正向激励，表扬和奖励一定要做到及时、公开。只有能满足被奖励者的\n某个重要需求的奖励，才是有效的奖励，才能起到激励作用。同时，对于完成质\n量较差的情况要合理的惩罚，明确改进的方向。 \n  项目成员绩效评估和反馈\n在项目过程中进行绩效评估的目的包括澄清或调整角\n色与职责，向团队成员提供建设性反馈，发现未知或待裁决问题，以及确立未来\n各时期的具体目标。\n  冲突管理\n在项目过程中，始终伴随着冲突的发生，项目管理团队需要及时着手\n解决冲突，并提前发现未来可能预见的冲突，做出合理的决策和行动计划。冲突\n的来源包括组织内部关键资源的缺乏、多任务的排序和个人工作习惯或风格的差\n异等。冲突管理可以提高团队内部的创造力，或者促使做出更好的决策。如果冲\n突带来的负面影响太大，或者有升级的趋势时，项目经理需要立即采取措施或者\n向上级主管求助，化解冲突。 \n  人力资源释放评估\n根据项目执行情况，在相关的人力资源释放前，需要评估涉\n及的工作是否已经完成，当产品存在重大遗留问题需要解决时，人员往往无法按\n照计划释放，这种情况下，需要提交人力资源变更请求，进行变更管理。 \n  释放人力资源：主要在项目开发阶段后期开始涉及释放人力资源，直至发布阶段\n定义\n释放人力资源是指在达成项目目标的前提下，按照人力资源计划，要逐步把人力有序\n的输出到其它组织或团队中，保证整个组织的人力资源使用的有序性和效益最大化。\n描述\n从项目概念、计划到开发阶段，是项目人力不断增加直至高峰的时期。随着项目逐渐\n进入到开发阶段后期，项目对人力的需求就不断下降，开始释放人力资源。 \n人力的释放对于现有的组织结构可能会有影响，在项目的后期由于人员的变化，组织\n结构以及组织中的角色和职责也会有所调整。项目经理需要按照项目的实际运行情\n况，做出合理的安排，并及时通告给对应的利益干系人。 \n与其它活动的关系 \n过程要素\n关键输入\n人力资源计划、项目组织结构（更新）、项目计划、项目状态报告等。\n工具和技术\n  人力管道会议：梳理多项目人力资源布局、安排、调整等的会议。\n关键输出\n释放的人力、绩效评估\n关键动作\n  有效沟通\n首先要和被释\n放人员所属的项目小组责任人沟通，确认人力释放的影响。然后还要和职能部门\n主管沟通并达成一致。最后与被释放的项目团队成员达成一致，明确该成员释放\n时间。\n  绩效评估\n项目经理对被释放人员的工作绩效给出合理评估，包括该人员在项目\n交付中表现出的业务技能、工作态度、关键事件等等，这些将做为职能部门组织\n定期绩效考核（半年度/年度）时的输入之一。 \n角色和职责\n赞助人\n  批准项目的人力资源计划 \n  协调跨团队的人力资源 \n项目经理\n  创建项目团队目录（项目管理层、团队成员以及其他利益干系人等信息） \n  与职能部门主管协商并获取最适合项目的资源 \n  整理出为完成项目工作，团队成员需要参加的各项培训，并付诸实施 \n  记录团队成员的绩效表现并及时反馈给职能部门主管 \n  建立并维护与职能部门主管以及其他利益干系人之间的沟通渠道，定期沟通 \n职能部门主管\n  按照项目计划协调合适的人员加入项目团队 \n  部门关键技术的积累，对项目团队成员提供技术支撑 \n  参考项目经理对项目成员的绩效表现评价，对项目成员进行绩效管理 \n采购管理\n定义\n采购管理是指从项目组织之外获取产品、服务及其它资源，确保在需要时，项目可以\n得到相应的产品、交付和服务。 \n描述\n项目采购包括项目开发过程中对外部成熟产品的采购，以及根据项目需求定制的新产\n品的采购，也包括在公司内部对其它产品、平台、组件、工具等的采购。合作（包括\n技术合作、外包等）、获取组织外的培训、咨询等服务也属于采购的范畴。\n  降低成本\n  聚焦核心业务\n  获得专门的技能和技术\n  提高灵活性\n  明确责任，降低风险\n关键活动 \n  规划采购：主要在项目概念阶段和计划阶段进行。 \n定义\n规划采购是指确定需要采购哪些符合项目要求的产品、服务和其它资源，并明确采购\n策略，识别潜在供应商（包括公司内部的）的过程。\n描述 \n在规划采购中，需要识别哪些项目需求最好（或必须）通过从项目组织外部采购产\n品、服务或其它资源来实现，还要决定采购什么、如何采购、采购多少，以及何时采\n购。 \n项目进度计划对规划采购过程中的采购策略制定有重要影响，相反，在编制采购管理\n计划过程中所做出的决定也会影响项目进度计划。应该把采购管理计划编制工作与制\n定进度计划、估算活动资源和自制或外购决策等整合起来。 \n与其它活动的关系\n过程要素 \n关键输入\n  需求文件：包括与规划采购有关的、关于项目需求的重要信息。 \n  风险管理表：与规划采购相关的已识别的风险、风险责任人和风险应对措施。 \n  项目进度计划：包括有关时间表或强制交付日期的信息。 \n  产品 E2E 目标成本报告：可用于评价潜在供应商提交的投标书或建议书的合理\n性。 \n  市场条件：包括供应商信息获取和商业折扣的提供程度以及遵照的条款。\n工具和技术\n自制或外购分析、专家判断\n有时，虽然项目组织内部具备相应的能力，但由于公司战略、资源、成本、进度等因\n素，也需要从组织外部进行采购。 \n自制或外购分析应考虑全部相关成本，包括直接成本与间接成本。例如，项目团队在\n分析外购时，既要考虑购买产品本身的实际支出，也要考虑为支持采购过程和维护该\n产品所发生的间接成本。在华为公司，通常考虑批量采购的形式，以降低成本。 \n关键输出\n  采购管理计划：描述如何管理从分析采购需求到合同收尾的各个采购过程，是项目计划的子计划。 \n  采购工作说明书（SOW）：描述采购所要求完成的工作，以便使潜在供应商决定能否提供所需的产品和服务，并确定一个适当的价格。 \n  采购文件：用于征求潜在供应商的建议书，如信息邀请书（RFI）、建议邀请书（RFP）等。 \n关键动作\n  制定项目采购管理计划。对于技术合作或产品合作，制定合作计划。 \n  根据产品包需求，进行自制或外购的权衡分析，确定采购需求。 \n  启动新供应商认证流程，一般由采购代表或合作经理主导完成。 \n  对于研发物料/器件采购，确定是否需要 Sourcing Team，制定初始供应商和物料选择计划，对于长货期的物料，做出提前采购的决策，一般由采购代表主导完成。 \n  实施采购：主要在项目执行阶段进行。 \n定义\n实施采购是指从向供应商询价（或发 RFI）、收集潜在供应商的建议，并与选定的供应\n商签订合同的过程。 \n描述 \n对于大宗采购，可以反复进行寻求供应商应答和对应答进行评价。可根据初步建议书\n列出的一份合格卖方的短名单，随后再对他们所提交的更具体和全面的文件进行更详\n细的评价。 \n研发物料/器件的采购，由采购代表负责实施采购。 \n对于技术合作、产品合作，由公司指定部门负责组织实施采购，研发重点参与采购实\n施过程中与技术相关的部分。 \n与其它活动的关系\n过程要素 \n关键输入\n采购管理计划、采购工作说明书、采购文件、项目计划、产品目标成本、供应商建议\n书、组织过程资产、供应商选择标准、合格供应商清单等。\n  供应商选择标准：包括供应商能力、交付日期、产品成本、生命周期成本、技术专长以及拟使用的方法等。\n  合格供应商清单：根据供应商资质及其以往经验，而预先筛选出来的供应商名单，以便只向那些能够履行未来合同的供应商进行采购。 \n  供应商建议书：供应商为响应采购文件包而编制的建议书，是一套基本的信息组合。评价小组对其进行评价，来选择一个或多个供应商。\n工具和技术\n  投标人会议：投标书或建议书提交之前，在项目团队和所有潜在供应商之间召开的会议。目的是保证所有潜在供应商对本项采购都有清楚且一致的理解，保证没有任何投标人会得到特殊优待。 \n  建议书评价技术：对于复杂的采购，例如要基于供应商对既定加权标准的响应情况来选择供应商，则应该根据项目团队的采购政策，规定一个正式的建议书评审流程。 \n  独立估算：采购组织自行或邀请外部专业估算师做出成本估算，并将此作为标杆，用来与潜在供应商的应答作比较。 \n  专家判断：组建一个多学科评审团队对建议书进行评价。团队中应包括采购文件和相应合同所涉及的全部领域的专家，否则会影响最终评判的全面性。 \n  因特网搜索：快速找到很多商品、零配件以及其它现货，并以固定价格定购。这种方法不适用于风险高、复杂程度高、必须严密监督的采购工作。 \n  采购谈判：合同签署之前，对合同的结构、要求以及其它条款加以澄清，以取得一致意见。 \n关键输出\n选定的供应商、采购合同、变更请求、项目文件（更新）等。 \n关键动作\n  供应商建议书评审：项目团队提供技术方面的支持。 \n  采购谈判：项目经理和项目管理团队的其他人员可以出席谈判会议，以便提供技\n术支持，必要时澄清项目的技术、质量和管理要求。 \n  合同签署：由具有合同签署权利的部门完成。 \n  更新采购管理计划或合作计划。 \n  管理供应商合同：主要在项目执行阶段进行。 \n定义\n供应商合同管理是指管理与供应商的关系，监控供应商的绩效，并采取必要的变更和\n纠正措施的过程，确保供应商的交付满足合同要求，并在合同变更时满足项目需求。 \n描述 \n与其它活动的关系\n过程要素 \n关键输入\n  供应商状态报告：包括按照合同规定，由供应商编制的技术文件和其它文件，以及供应商绩效报告，显示哪些可交付成果已经完成，哪些还没有完成。 \n  批准的变更请求：包括对合同条款和条件的修改。在把变更付诸实施前，应该以书面形式正式记录变更并取得正式批准。 \n  项目状态报告：在项目执行过程中收集，包括满足质量要求的程度、已发生或已承诺的成本等。 \n工具和技术\n  合同变更控制系统：规定了修改合同的流程。 \n  采购绩效审查：依据合同来审查供应商在规定的成本和进度内完成项目范围和达到质量要求的情况，如技术合作项目的阶段验收。 \n  检查和审计：由项目团队开展的相关的检查和审计，供应商应对此提供支持。\n  索赔管理：通常应该按照合同规定对索赔进行记录、处理、监督和管理，如合同双方无法自行解决索赔问题，则需要按照合同中规定的替代争议解决程序进行处理。谈判是解决所有索赔和争议的首选方法。 \n关键输出\n采购管理文档、变更请求、项目文件（更新）、组织过程资产（更新）等。 \n关键动作\n  项目监控\n  阶段验收\n  合同变更管理\n  供应商关系管理\n  供应商合同收尾：主要在项目关闭阶段进行。 \n定义\n供应商合同收尾是指按照合同要求接收供应商的交付，并解决合同中不满足的条款。 \n描述 \n合同提前终止是结束采购的一个特例。合同可由双方协商一致而提前终止，或因一方\n违约而提前终止，或者因满足对项目团队有利的条款而提前终止。合同终止条款规定\n了双方对提前终止合同的权利和责任。根据这些条款，项目团队可能有权因各种原因\n而随时终止整个合同或合同的某个部分。但是，根据这些条款，项目团队应该就供应\n商为该合同或该部分所做的准备工作给予补偿，并就该合同或该部分中已经完成且经\n过验收的工作支付报酬。 \n与其它活动的关系\n过程要素 \n关键输入\n项目计划、采购管理计划、采购管理文档（包括合同、变更请求等）等等。 \n工具和技术\n审计、协商解决/调解/仲裁/诉讼等。\n  协商解决/调解/仲裁/诉讼：在每个采购关系中，通过谈判公正地解决全部未决事\n项、索赔和争议，都是一个重要的目标。如果通过直接谈判无法解决，则可以尝\n试替代争议解决方法，如调解或仲裁。如果所有方法都失败了，就只能选择向法\n院起诉这种最不可取的方法。 \n关键输出\n验收报告、组织过程资产（更新）等。 \n  验收报告：项目团队（通常由其授权的采购管理员）向供应商发出关于合同已经\n完成的正式书面通知。对正式采购收尾的要求，通常已在合同条款和条件中定\n义，并包括在采购管理计划中。 \n关键动作\n  项目验收：验证项目所有工作是否被正确地、令人满意的完成。 \n  处理未决索赔、更新相关记录、以及合同存档等工作。 \n角色和职责\n项目赞助人\n  批准采购策略 \n  批准采购管理计划 \n  在建立与供应商关系方面给予项目经理适当的授权 \n  确保项目有渠道找到具备与供应商签署合同权力的人 \n项目经理\n  向项目赞助人提供采购策略的建议 \n  参与实施采购策略 \n  制定采购管理计划 \n  参与和供应商的谈判 \n  对于技术合作和产品合作，发展并维持与合作伙伴的关系，如定期沟通等 \n项目成员\n  对于技术合作和产品合作，发展和改善与合作伙伴人员的关系 \n合作经理（可选）\n  辅助项目经理支撑合作项目采购相关工作 \n采购代表（适用于研发物料/器件采购）\n  实施采购策略 \n  协调采购资源，就采购的结果与内外供应商谈判 \n  跟踪采购风险，确保项目获得必要的产品、服务或其它资源 \n工具\n PPM 多项目管理工具 \nICP JIRA 项目管理工具 \nMicrosoft Office Project 项目管理工具 \n模板\n项目任务书模板 \n  商业背景：描述项目的总体目标，项目交付的定位，以及价值客户、收益预算、竞争者等市场信息。 \n  项目范围：描述项目的期望结果、时间限制、费用限制。 \n  项目组织：描述项目组织中的角色、职责和权力。 \n  报告机制：描述与赞助人、客户、依赖项目、子项目、供应商的沟通和接口方式。 \n  项目验收方式。 \n  信息安全措施。 \n  限制、约束条件。 \n  知识产权方面的限制和机会。\n项目计划模板 \n  项目目标：项目目标包括限定时间、估计成本和项目输出的总体描述。 \n  总体策略：描述项目必须遵守的公司策略，以及项目依据公司策略、过去经验和风险分析结果而制定的项目策略。 \n  约束条件：描述项目必须考虑的所有约束条件。 \n  客户信息：描述客户方的责任人，以及客户的期望和承诺。在某些项目中，如果外部客户责任人不能确定，可以从最能代表客户的部门中确定责任人。 \n  与其它项目的接口关系：描述本项目与其它项目的接口关系，确保依赖关系体现在项目进度计划中。 \n  项目干系人：描述项目干系人，如客户、最终用户、合作伙伴、供应商、组织中受影响方和其它项目。 \n  项目价值：描述项目的目的，对客户、组织自身、其它利益干系人的价值机会点，以及知识产权方面的限制和机会。 \n  项目范围：描述项目的交付、质量目标、组织内部要求。\n  项目质量计划：描述项目需要使用的过程及裁剪，包括质量保证规程、配置管理规程、质量验证方法、验收规程等信息。 \n  项目采购：描述采购策略、采购项和供应商，以及子合同管理的方法。 \n  项目进度：描述项目里程碑及关键活动，以及详细计划开发策略。 \n  项目预算：描述项目预算和报告机制。 \n  项目组织：描述项目的组织，及各成员的角色、职责和权力。 \n  项目风险管理：描述项目的风险，以及规避和应急计划。 \n  项目沟通计划：描述对内、对外沟通策略，以及报告机制。 \n  项目移交和关闭：描述项目交付的验收过程和验收准则，以及项目经验、文档归档、项目关闭的方法。 \n项目状态报告模板\n  项目状态：用图形或表格显示出项目的总体状态，报告项目的范围、质量、进度、成本目标的达成情况，对于严重的偏差给予说明及纠偏措施。 \n  风险管理：呈现最新的风险列表，包括风险描述、状态、优先级、影响、责任人、规避和应急计划等。 \n  变更控制：说明项目中的变更及其状态，以及需要项目赞助人或项目运作指导团队采取的行动。 \n项目总结报告模板 \n  项目阐述：描述项目的重要信息，包括项目目的、项目目标、重大变更、开发模式、项目组织、关键利益干系人等。 \n  项目价值：对照项目计划，描述项目价值实现情况，以及偏差说明。 \n  项目结果：对照项目计划，描述项目交付、质量、进度、成本等方面的目标完成情况，以及偏差说明。 \n  经验教训：总结项目过程中经验和教训，并对绩效优秀的团队和个人表示感谢。 \n术语\n项目文化\n浮动主题\n",
  "size" : 7402653,
  "modifiedAt" : 1764658803459,
  "id" : "技术案例/华为研发IPD流程介绍.docx",
  "content" : "RDPM\n商业目标\n项目目标与组织的商业目标对齐\n组织角色\n商业目标对齐\n参与产品开发项目的商业目标的制定\n和决策者在商业目标上的沟通 \n和 PDT 核心代表在商业目标上的沟通 \n和外部客户在商业目标上的沟通 \n和项目成员在商业目标上的沟通\n项目生命周期模型\n项目指导流程\n项目指导流程是 OSG 对项目进行指导的管理活动，包括评审点及评审流程，体现组织\n上层对下层的指导职能。\nOSG 的指导职能\n一是通过阶段评审和例行的监控确保项目及其输出能与组织及商业的方向保持一致；\n二是为项目目标的达成提供必要的支持，包括对下属项目团队的激励、对项目投入的资源保障、项目工作方法的建议等\n评审点\n RDR 评审点\n一个 RDR 是正式的、有计划的、预先定义好的评审点，这个点对项目是否与商业方向\n一致及资源的投入进行评审。 \nRDR 申请标志着该点的前一个阶段研发域项目管理各项工作已准备充分，可以接受\nOSG 评审并指明下一阶段项目方向、确保下一阶段资源的顺利投入。 \nOSG 通过 RDR 评审，判断项目是否与组织战略、商业方向、客户需求保持一致。评\n审范围会依据项目所处的生命周期阶段不同而存在差异。每个评审点都会关注当期阶\n段项目的状态、与其它项目的依赖关系、资源投入与使用状况、各职能部门对项目资\n源投入的承诺情况等。 \nRDR0\n意义：\n项目启动的项目管理评审点。\n标志\n其通过标志着项目任务书被确认和评审通过，项目正式立项；进入概念阶段。\n目的\nRDR0 评审的目的是为了保证即将立项的项目在前期已经站在组织角度考虑了项目的商业战略符合度，确保以客户为中心的同时也考虑了实现的可行性。\nRDR1\n意义\n项目概念阶段结束时的项目管理评审点\n标志\n其通过标志着项目概念与初步项目计划的确立；项目进入计划阶段\n目的\n评审的目的是确保项目的执行策略建立在业务与技术可行性充分分析的基础之上，项目的进展与组织的业务策略上下对齐。\nRDR2\n意义\n项目计划阶段结束时的项目管理评审点\n标志\n其通过标志着最终项目计划被确认和批准，项目进入开发阶段\n目的\n的是为了保证整个项目的实施计划的系统性和可行性，并与项目的最终目标上下对齐。\nRDR3\n意义\n项目执行（开发）阶段结束时的项目管理评审点\n标志\n其通过标志着项目开发工作按计划完成，可将交付物提供给接收人/客户验收；项目进入验证阶段。\n目的\n是为了确认项目开发交付件的质量和范围与项目目标一致、与组织的业务策略一致。\nRDR4\n意义\n项目执行（验证）阶段结束时的项目管理评审点\n标志\n其通过标志着项目输出及交付件通过验收；项目进入发布阶段\n目的\n是确保项目的交付件已经验收且后续项目质量可以得到保证。 \nRDR5\n意义\n项目执行（发布）阶段结束时的项目管理评审点\n标志\n其通过标志着项目结束\n目的\n是进行项目经验总结汇报，确认项目按照项目计划完成，并批准项目关闭\n特殊评审点 \n提前执行评审点(EER- Early Execution Review）\n 计划变更评审点（PCR-Plan Change Review）\n临时评审点\n终止项目评审点\nRDR 评审操作流程 \n过程\n  项目团队根据自检表完成检视。 \n  沟通材料提前发送给 OSG 成员并完成会前沟通，让 OSG 成员了解项目情况，澄清问题。 \n  项目评审会上由项目经理向 OSG 汇报。OSG 成员从项目目标对齐、项目状态、项目组合状态、资源承诺等方面进行评估，对有争议的部分进行讨论并给出综合的评审意见。 \n  发布评审结论并归档会议纪要。 \nRDR 评审要素\n四个维度\n项目目标对齐\n项目状态\n项目组合状态\n资源承诺\n RDR 评审结论 \n三个结论\nGO：项目继续执行\nNO GO：项目终止。\nREDIRECT：项目执行未达到评审点要求，项目团队需重新完善相关工作，再次提交 RDR 评审。 \n项目管理流程\n项目管理流程定义了项目从立项准备到关闭过程中各个阶段的所有项目管理活动和交\n付文档。此流程指导项目经理聚焦项目目标，在限定的范围、时间、成本、资源内确\n保项目交付。\n 项目管理过程组 \n五个过程组\n  分析过程组：理解和评估任务，确定目标。 \n  计划过程组：明确范围，细化目标，制定计划。 \n  执行过程组：组织资源按计划完成各项任务。 \n  控制过程组：定期度量和监控进展，发现问题，采取必要的纠正措施。 \n  移交过程组：将输出结果移交给客户或接收者进行验收。 \n 项目生命周期阶段 \n在研发项目生命周期模型中，项目生命周期阶段以 RDR 评审点为界限，划分为七个阶\n段\n七个阶段\n  项目立项准备阶段 \n  立项准备阶段，一定要关注项目的技术准备度。对于关键平台或技术项目，要与相关项目经理仔细沟通，再细也不为过。\n定义\n项目立项准备阶段就是分析项目的立项价值，并从资源、技术、组织等方面对项目的可行性进行评估，促使项目达到可以立项的状态。 \n关键参与角色\n项目经理\n在项目正式立项前主动参与到项目任务书开发团队中，分析项目立项价\n值，考虑组织、资源、技术准备度等方面，确保项目任务书的可行性。 \n专家\n从专业角度系统考虑项目的可行性。专家类型根据项目任务和具体目标确定。\n在典型的 V/R/C 版本研发项目中，此阶段有系统工程师参与。 \n主要项目管理活动\n阶段分析活动：\n  分析立项价值（投入产出、内部价值） \n  分析组织的可支撑性（如开发模式、技术准备度、资源匹配度） \n  分析项目依赖关系、利益干系人 \n  识别项目风险 \n  界定项目的整体范围 \n  分析项目的目标成本 \n  参与制定项目任务书 \n阶段计划活动： \n  制定概念阶段的详细计划和项目初步的里程碑时间点 \n阶段执行和控制活动： \n  接受上级分配的立项准备任务 \n  准备 RDR0 的评审 \n输入\n  组织目标 \n  组织环境及结构 \n  商业价值 \n  客户要求 \n  资源使用状态 \n  组织要求 \n  组织过程资产 \n工具、技术和模板\n  项目任务书模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  待批准的项目任务书 \n  项目状态报告 \n  需求规格书 \n  RDR0 汇报胶片 \n  项目概念阶段 \n  概念阶段对方案讨论的充分性、完整性是管理控制的关键。\n定义\n项目概念阶段就是根据项目任务书的要求搭建项目环境、组建项目团队、对任务书进行目标分解、形成初步的实现方案和概要计划。 \n关键参与角色\n项目经理：组织项目涉及的各个专业领域的专家对项目进行分析。 \n项目管理支撑人员：包括项目助理、质量人员、配置人员等，协助项目经理完成项目环境的搭建（建项目文件夹、Teamroom、度量表、项目编码申请）。 \n各领域专家：包括系统设计专家、开发技术专家。主要从各自专业领域出发，贡献出对项目概要计划的建议。这个阶段的活动，特别需要多个专业领域的专家协同配合的。 \n项目干系人：包括依赖关系相关人、项目赞助人等角色。项目经理在进行概要分析的同时，还应该与项目干系人充分沟通，确保与项目涉及到的周边部门或组织的关键人物沟通到位。 \n主要项目管理活动\n阶段分析活动：\n  分析设计方案的价值 \n  分析项目范围 \n  识别、分析项目风险 \n  初步明确项目依赖关系 \n阶段计划活动： \n  制定项目计划阶段的详细计划 \n  制定初步的整体项目计划 \n  制定初步的质量策划方案 \n  预估不同方案的项目费用、人力资源 \n  细化项目的目标成本 \n阶段控制活动： \n  定期的项目会议及项目汇报 \n  完成项目检查点审视 \n阶段执行活动：\n  接受项目任务书，搭建项目环境\n  执行各种分析及计划活动 \n  准备 RDR1 评审 \n输入\n  已批准的项目任务书 \n  客户需求 \n  商业价值 \n  组织目标 \n  组织环境与结构 \n  资源使用状态 \n  组织过程资产 \n工具、技术和模板\n  项目计划模板 \n  项目预算模板 \n  项目风险管理工具 \n  项目计划工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  待批准的初步项目集成计划和计划阶段详细计划 \n  项目状态报告 \n  刷新的需求规格书 \n  RDR1 汇报胶片 \n  初步的质量策划方案 \n  调整后的项目预算 \n  细化的项目目标成本 \n  备选项目实施方案和资源预算 \n  项目风险分析报告 \n  项目计划阶段 \n1.  计划要分层。虽说每个阶段都要做计划，但计划的难度、详细度是随阶段特点而\n不同。 \n2.  计划要讨论和沟通。做计划时，一定要揪着相关人员一起参与，才能减少变化和\n反复。比如开发阶段的计划，测试经理、PCB 设计责任人、软件经理、硬件经理\n都应是座上宾。 \n3.  计划要基线化。朱理发现，皮姆每次做完计划，一定会发送给相关人员并要求严\n格遵照执行。后续会议，各计划涉及人员必须按照计划详细汇报进展状态，计划\n会根据讨论情况修订后再次发布。一份计划，会作为基线一直跟踪到底。 \n4.  计划与变化是双重奏。项目的变化源于环境的不可控。对于影响项目的变化，应\n该积极面对。每次遇到市场需求变动，皮姆都不会抱怨，而是重新理解客户真正\n的要求，再与系统设计师、相关采购、技服、制造经理等利益相干人沟通变更的\n事项，将变更融入到新的计划版本中。变化对他而言，似乎是一种乐趣。 \n5.  计划要方便管理。计划是用于指导具体工作的，计划的展示形式要考虑到查询和\n使用的方便性，皮姆做的计划，无论是查询业务里程碑还是资源分配，都可以一\n目了然，计划中还会对风险较大的任务用特殊颜色标识出来，便于后期重点关\n注。最主要的，皮姆的计划粗细有致，任务间关系明确，调整起来可以一步到\n位。 \n定义\n项目计划阶段制定完整的项目计划，并最后确定项目的目标与范围，指导后续阶段项目的执行，它是项目成功的保证。\n关键参与角色\n项目经理：组织项目管理团队和各领域专家一起拟制项目的整体计划。 \n项目管理支撑人员：协助项目经理完成各专项领域的计划\n各领域技术专家：提供所需的评估支持和建议（如规模估计、难度系数判断、WBS 工\n作分解等）。 \n主要项目管理活动\n阶段分析、计划活动：\n  项目价值定义 \n  确定项目范围 \n  分析实施策略，定义项目活动并对活动排序 \n  分析并定义项目目标成本 \n  分析项目依赖关系 \n  分析项目风险，制定风险应对计划 \n  制定项目生命周期整体计划 \n  制定项目质量计划 \n  制定完整的进度计划及开发阶段详细计划 \n  制定沟通管理计划 \n  费用及人力估计与预算 \n  规划采购 \n阶段控制活动： \n  定期的项目会议及项目汇报 \n  完成项目检查点审视 \n阶段执行活动：\n  执行分析、计划活动 \n  准备组建项目开发团队 \n  质量保证和控制 \n  准备 RDR2 评审 \n输入\n  需求规格书 \n  项目设计方案 \n  组织目标 \n  组织资源使用状态 \n  相关基线数据 \n  组织过程资产 \n工具、技术和模板\n  项目计划模板 \n  项目预算模板 \n  项目计划工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  待批准的集成项目计划\n  项目目标 \n  项目策略 \n  利益干系人分析汇总 \n  项目价值 \n  项目范围 \n  质量计划 \n  项目目标成本 \n  项目进度表 \n  项目预算 \n  项目风险管理计划 \n  风险响应计划 \n  项目人力资源计划 \n  项目组织模式和运作方式 \n  沟通计划 \n  刷新的需求规格书 \n  分解到子项目或项目工作组的规格书 \n  初步的物料采购供应商合同 \n  项目状态报告 \n  RDR2 汇报胶片 \n  项目执行(开发)阶段 \n项目团队里任何一个成员，都应该对照计划，检查自己工\n作相关项的准备和完成情况。即使没有 POP 或秘书跟踪，也应该做到自我管理。这是\n一个职业人的基本要求。\n定义\n项目执行（开发）阶段是项目生命周期模型中执行项目计划的阶段，在项目开发阶段，项目成果完成并被集成。\n关键参与角色\n项目经理：对项目整体负责，关注项目的团队建设、资源到位和相关支撑活动的完\n成。 \n项目管理支撑人员：协助项目经理对项目计划中的相关部分进行管理。 \n开发组/测试组等：开发阶段的执行主力，将计划转变为实际的项目交付。 \n主要项目管理活动\n阶段计划活动： \n  结合客户或验收方要求，制定验证阶段的详细计划 \n项目控制活动： \n  根据计划监控整体项目执行（如定期的项目会议及项目汇报、阶段回顾、检查点\n审视） \n  项目价值监控 \n  范围变更控制 \n  项目目标成本实现与验证 \n  项目费用控制 \n  进度控制 \n  质量保证和控制 \n  风险控制 \n项目执行活动：\n  与利益干系人、项目团队的沟通管理 \n  管理项目团队 \n  根据计划执行项目活动 \n  执行质量保证活动 \n  采购实施（识别关键物料清单，新器件采购认证） \n  准备 RDR3 评审 \n输入\n  需求规格书 \n  项目计划书 \n  变更请求 \n  项目状态报告 \n工具、技术和模板\n  变更申请书模板 \n  项目风险跟踪工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  待验证的项目交付件（软件、硬件、配套资料等） \n  项目状态报告 \n  刷新的需求规格书（含验收标准） \n  修订的供应商合同 \n  修订人力资源计划 \n  经批准的变更请求 \n  待批准的项目验证计划/策略 \n  RDR3 汇报胶片 \n  项目执行（验证）阶段 \n定义\n项目执行（验证）阶段就是按照项目计划执行项目的内、外部验证活动，确保项目能通过客户或接收者的正式认可\n关键参与角色\n项目经理：对项目整体验证计划及结果负责。同时，转维也是项目经理在这个阶段的\n关键职责之一。 \n项目管理支撑人员：协助项目经理实现对验证阶段的各项管理活动的履行。 \n开发组/测试组等：负责解决验证发现的问题、支撑转维工作。 \n主要项目管理活动\n阶段计划活动： \n  制定发布阶段的详细计划 \n阶段控制活动： \n  根据计划监控整体项目执行、管理过程变更 \n  项目价值监控 \n  范围变更控制 \n  项目目标成本实现与验证 \n  项目费用控制 \n  进度控制 \n  质量保证和控制 \n  风险控制 \n阶段执行活动：\n  与客户或验收方、项目团队的沟通管理 \n  管理项目团队，执行人力释放计划 \n  根据计划执行项目活动 \n  执行质量保证活动 \n  采购实施（确保物料及时采购到位） \n  供应商合同收尾 \n  准备 RDR4 评审 \n输入\n  待验证的项目交付件（软件、硬件、配套资料等） \n  刷新的项目任务书 \n  确认的需求规格清单 \n  项目计划书 \n  变更请求 \n  项目状态报告 \n工具、技术和模板\n  变更申请书模板 \n  项目风险跟踪工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  项目验收报告 \n  项目状态报告 \n  RDR4 汇报胶片 \n  待发布的项目交付件 \n  项目执行（发布）阶段 \n：移交工作要做到的效果就是给后续接口部门的人扶上马，送一\n程\n定义\n项目执行（发布）阶段就是按照项目计划执行项目对内、外部的发布活动，确保在项目关闭前把项目成果移交到接收者。 \n关键参与角色\n项目经理：作为整体计划的把控者，在此阶段关注移交界面的管理和经验教训总结。 \n项目管理支撑人员：协助项目经理管理发布阶段的移交工作。 \n开发组/测试组等：负责遗留问题的解决、技术支撑。 \n项目接收者：正式接收项目交付。 \n主要项目管理活动\n阶段控制活动： \n  根据计划监控整体项目执行、管理过程变更 \n  项目价值监控 \n  项目目标成本实现与验证 \n  项目费用控制 \n  进度控制 \n  质量保证和控制 \n  风险控制 \n阶段执行活动：\n  支持产品发布活动 \n  与接收方、项目团队的沟通管理 \n  管理项目团队，执行人力释放计划 \n  根据计划执行项目活动 \n  验收范围 \n  执行质量保证活动 \n  供应商合同收尾 \n  项目经验教训总结 \n  准备 RDR5 评审 \n输入\n  验证后的项目交付件（软件、硬件、配套资料等） \n  验收标准 \n  项目计划书 \n  变更请求 \n  项目状态报告 \n工具、技术和模板\n  项目风险跟踪工具 \n  项目状态报告模板 \n  项目 RDR 评审汇报胶片模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  项目发布通告 \n  项目状态报告 \n  项目移交报告 \n  最终的项目交付件（软件、硬件、配套资料等） \n  RDR5 汇报胶片 \n  项目关闭阶段\n定义\n项目关闭阶段就是在项目完成并移交交付件后，对项目正式关闭的活动。\n关键参与角色\n项目经理：负责完成相关项目关闭的行政事务。 \n项目管理支撑人员：协助项目经理管理完成关闭阶段的行政事务，包括编码停用、文\n档归档等。 \n主要项目管理活动\n项目执行活动：\n  确认遗留问题的关闭 \n  项目文档归档 \n  停用项目编码 \n  项目团队庆功会 \n输入\n  项目任务书 \n  项目状态报告 \n  项目经验教训总结 \n  项目验收报告 \n工具、技术和模板\n  项目总结报告模板 \n  项目 RDR 评审 CHECKLIST \n输出\n  项目总结报告 \n  项目文档 \n  项目管理能力提升的建议 \n简单流程，四个阶段\n对项目目标及开发策略较明确的简单研发项目（如补丁版本研发项目等），可以将\nRDR1、RDR2 合并，RDR3、RDR4、RDR5 合并，以简化过程管理。相应地概念、计\n划阶段合一，开发、验证、发布阶段合一，形成四个阶段的研发项目生命周期\n  项目立项准备阶段 \n  项目概念与计划阶段 \n  项目执行阶段 \n  项目关闭阶段\n管理流程总结\n1.  项目经理最核心的工作就是计划，计划的好坏，直接影响项目的执行力，也是项目经理管理能力的体现。 \n2.  沟通是贯穿整个管理过程的。沟通方式有很多种，面对面、邮件、电话，每种方式有不同的特点，要善于使用沟通的技巧，处理过程中人与人之间的合作问题。比如批评，可以通过邮件，给人一些调整情绪的空间。 \n3.  在项目最危机关头，项目经理有必要挺身而出，为项目力挽狂澜。\n4.  关注依赖关系，并不是被动地等待依赖方的信息。对于关键依赖，可以直接介入具体项目计划的管理。皮姆处理 Y 平台压缩 2 个月，对两个项目都是双赢的。\n5.  风险和问题管理，一定要激发群体的智慧，任何个人都不是圣人，总有疏漏之处，缺陷就要靠大家一起弥补。\n6.  不要害怕项目的变化，提前预防、及早布署是根本的解决办法。\n 7. 巧用项目开工会，抓住项目成员的心，确保每一个项目成员都完全领会项目目标及相关要求，确保项目的所有细节工作能完全到位，保证项目成功。 \n项目使能流程\n项目使能流程是指项目执行团队在项目生命周期过程中所运用的各种工作模式（包括流程、方法、模板、工具等）。 \n项目组织模型\n定义和目的\n项目组织模型是对项目的组织界面和沟通界面的概括和抽象，它为每项职能单元定义了相关的通用角色，这些角色可应用于各种类型的项目。此外，项目组织模型也提供了项目所有内部和外部利益干系人的全景图。\n项目组织模型图\n项目指导职能 \n项目指导职能确定项目方向，对项目重大事项进行决策，并对项目提供必要的支持。\n具有清晰角色和职责的项目指导职能可以减少项目决策的失误，降低项目决策的风\n险。 \n项目指导职能中的成员承担的角色职责与其拥有的资源和业务管理权力是相匹配的，\n对项目拥有业务决策权力的管理者需要参与到项目指导职能中，他们对项目的态度和\n行为会直接影响项目的成败。\n项目指导职能中的角色\n项目组合负责人（Project Portfolio Owner）\nRelationship: 项目运作指导团队（OSG：project Operation Steering Group）\n项目赞助人（Project Sponsor）\nRelationship: 项目运作指导团队（OSG：project Operation Steering Group）\n职能部门经理\nRelationship: 项目运作指导团队（OSG：project Operation Steering Group）\n项目运作指导团队（OSG：project Operation Steering Group）\nRelationship: 职能部门经理, 项目赞助人（Project Sponsor）, 项目组合负责人（Project Portfolio Owner）\n 项目管理职能\n项目管理职能对项目目标的达成负责。项目管理职能负责挑选适合项目管理的方法、\n技术和工具执行项目管理活动，识别所有对项目有威胁的偏差，并报告给项目指导职\n能，由项目指导职能来决定是否要改变项目范围。此外，项目管理职能还负责协调所\n有不同的利益干系人，确保项目目标在组织内各层级得到沟通和理解。\n项目管理职能可以对项目产生有效的、聚焦业务的管理和控制。项目管理职能可以缩\n短组织内各层级的报告路径，将管理层的注意力聚焦在对组织战略和财务有重大意义\n的项目上。\n项目管理职能的权力是由项目指导职能授权的，其权力仅限于项目生命周期内。项目\n管理职能拥有组织制定项目的执行策略和项目计划、分配职责和资源、管理项目活动\n的权力。 \n项目管理职能依赖于组织内管理者的支持，职能部门主管为项目提供资源，比如人\n力、设备、办公场所、方法和工具等。 \n项目管理职能中的角色\n项目经理\n项目管理支撑人员\n项目执行职能\n项目执行职能在项目内负责依照团队制定的项目管理规范执行项目，保证高质量交\n付、达成目标，满足客户需求。遇到自身无法解决的风险和问题时需要及时上报、获\n取支持，确保项目任务能够顺利落实，按时、高质量交付项目成果。 \n项目执行职能中的角色 \n项目执行小组\n项目中的关键角色和团队\n项目运作指导团队 \nOSG 是行使项目指导职能的团队，承担项目 RDR 评审的职责，对项目组合状态、项\n目目标、项目资源、项目状态进行评审，并在此基础上做出统一的决策。 \nOSG 是由固定角色组成的团队。如对于产品部下的 OSG，其成员包括：产品部\n（PDU）部长、PO 部长、SPDT/PDT 经理或指派的代表（如开发代表）、产品部职能部\n门主管(设计、开发、集成与验证测试、质量、资料、维护等)。 \n职责 \nOSG 负责在项目生命周期流程设置的 RDR 点对项目进行决策，要确保每个项目交付\n和资源使用完全符合组织的业务需要，并确保交付的效率最优。\n  管理项目业务方向，确保项目目标与组织目标一致。 \n  在项目的 RDR 评审点对项目进行决策，给出项目 GO/NO GO/Redirect（在 V/R/C版本研发项目中为 GO/GO WITH RISK/REDIRECT）的结论。 \n  任命项目管理团队，并为项目管理团队分配项目任务书。 \n  负责项目的预算落实。 \n  积极支持和鼓励项目经理，在资源分配和问题解决等方面对项目提供支持。 \n  促进和管理项目管理团队的绩效和行为，并对项目团队的成绩进行合适的奖励。 \n  接受项目求助，与组织内相关职能部门主管一起，及时解决问题。 \n  对作出的决策和评审事项进行跟踪，确保得到执行。 \n  OSG 不仅管理 V/R/C 版本研发项目，还负责本层级内部重大改进项目的管理。 \n权力 \n  对项目优先级进行评审和建议调整的权力。 \n  对预算进行管理的权力。 \n  对资源进行调配的权力。 \n  对项目 RDR 进行评审的权力。 \n  对项目进行奖惩的权力。 \n  对项目绩效进行评价的权力。 \n生命周期各阶段关键活动 \n在项目的不同阶段，项目运作指导团队成员应该按照项目指导流程中的定义执行相关\n活动。\n项目经理\n项目经理行使项目管理职能的权力。依照与 OSG 达成的合同，项目经理负责管理项目\n达成目标。 \n项目经理在不同的组织中可能会有不同的称谓，比如在 V/R/C 版本研发项目中，版本\n经理就是项目经理。对于内部改进项目，一般会任命改进项目经理。但不论哪类项\n目，项目经理的职责基本上都是一致的。\n职责 \n项目经理带领项目团队，制定项目计划，实施项目管理，对项目的目标达成和整体成\n功负责，通过项目的成功来支撑产品的市场成功。 \n项目的业务方向和范围是由包括项目赞助人（例如，版本研发项目的赞助人一般是\nSPDT/PDT 经理，PDU 内部改进项目的赞助人一般是 PDU 部长）在内的 OSG 团队定\n义和批准的，但是项目经理有权力和义务在项目实施中来实现项目价值的最大化。 \n项目经理与团队成员一起明确项目目标，以及团队中每个角色的应负职责，以支撑团\n队共同目标的达成。 \n  组织制定和集成项目计划，确保项目实施过程中的效率最高、风险最低。\n  制定项目范围说明书和工作分解结构（WBS）。 \n  与项目中各领域成员共同合作，将各领域部门的策略整合进项目计划中。 \n  制定和维护项目计划（包括进度计划、质量计划、人力预算、费用预算、依赖关系承诺书、风险管理计划、采购计划等），确保根据计划来执行各类活动\n  负责项目团队建设和资源管理，保证项目计划顺利执行。\n  设置合理的项目组织结构，将项目职责分配到项目管理团队和执行团队，定义项目内部清晰的汇报关系。 \n  建立、支持和领导项目团队，就项目任命和期望值进行沟通。 \n  从 OSG 获得承诺，确保所需要的资源的到位，需要时借调额外的项目资源。 \n  制定项目团队运作规则。 \n  确保子项目相应层面的资源到位。 \n  对项目的里程碑实施监控，确保实际成果符合计划目标。\n  评审与批准子项目项目目标、计划。 \n  组织、执行和监控项目 E2E 计划，确保子项目交付件的质量。 \n  持续跟进各子项目的进度，对开发过程中争议和问题进行及时有效决策，或积极向 OSG 汇报以达成一致。 \n  运用合适的项目管理工具和方法对项目进行分析，对识别的风险和问题及时进行处理。 \n  执行公司流程，使用最佳实践。 \n  管理项目沟通，获得各层级的支持，达成项目目标。 \n  项目经理从项目赞助人那里接受任务，确保项目团队对目标理解一致。 \n  项目经理负责与 OSG、与子项目经理/成员进行沟通。 \n  有效管理项目内、外部的依赖关系。 \n  召开项目团队例会。 \n  向 OSG 汇报项目状态。 \n  移交项目成果，进行项目总结。 \n  按时、按预算完成项目交付，确保项目交付件的质量。 \n  向接收人移交项目成果，保证移交过程的规范性，确保项目成果有效传递给内部和外部客户。 \n  总结项目开发经验，向相关流程 Owner 提出组织流程的优化建议。 \n  对职责范围之外的领域提出改进建议，为持续改进作出贡献。 \n  分享经验，为组织内其他项目经理提供支持，如为打造学习型组织作出贡献。\n权力\n  在预算范围内，合理使用项目资源（人、财、物等）的权力。 \n  项目经理对项目团队成员具有管理的权力，包括按项目需要安排和调整项目成员的工作，对项目成员在项目中的绩效给出最终的评价等。 \n  在授权范围内，对项目重要事项进行裁决的权力。 \n对于研发项目中的版本经理，其权力还包括：   按 IPD 流程组织研发各领域开展项目活动的权力。 \n生命周期各阶段关键活动 \n立项准备阶段\n概念阶段\n计划阶段 \n开发阶段 \n验证、发布阶段\n关闭阶段\n项目组合负责人\n项目组合负责人站在组织整体管理的高度来管理项目的组合，持续识别可能改变项目\n组合的事务并进行管理。这个职位一般由资深的管理者承担，如 IPMT 主任是产品线\n产品开发解决方案/项目的项目组合负责人，产品部（PDU）部长是本层级研发项目组\n合的负责人。 \n项目组合负责人的一些任务可以授权给相关的团队或个人处理，比如对于研发项目，\n拟制项目路标、对项目进行人力管道管理的职责就可以授权给 PO 部长承担。\n职责\n  制定多项目管理的策略，确保项目组合的策略与组织战略协调一致。 \n  负责全部项目组合的管理，并对在项目之间如何进行优先级排序做出决策。 \n权力\n担任项目组合负责人角色的管理者必须具有与要管理的项目组合的范围相对应的权\n力；具有决定不同项目之间的优先级排序，以及对项目间依赖关系的关键分歧进行决\n策的权力。 \n项目赞助人\n职责\n  管理项目的重大战略接口 \n  管理项目的业务机会 \n  管理项目范围 \n  行使领导力并做出榜样 \n项目管理支撑人员\n在大型复杂项目中，项目经理可以授权项目管理职责给一个或多个角色，即可以设置\n多个项目管理支撑人员，包括项目 QA、CMO、POP、项目财务等项目管理支撑角\n色。\nQA 的职责\nPOP 的职责\nCMO 职责\n项目财务的职责 \n职能部门经理 \n执行小组\n执行小组承担项目执行职能，根据项目计划分解下来的具体任务，执行开发工作并输\n出满足客户需求的交付件。 \n执行小组的组长是任务执行过程和交付的总负责人。 \n执行小组包括系统设计组、开发组、I&V 组、试验局验证组等。 \n系统设计组 \n开发组 \nI&V 组 \n试验局验证组\n接收人\n职责\n生命周期各阶段关键活动\n 其他利益干系人 \n项目组织模型在 V/R/C 版本研发项目中的应用\n项目运作指导团队承担项目指导职能，负责 RDR 决策、项目指导与支持、项目监控管理等工作。\n版本经理及项目 QA、POP、CMO 等组成的项目管理团队承担项目管理职能，负责按照项目管理流程对项目日常活动进行有效管理，达成项目目标。 \n设计组、开发组、I&V 组、资料组等执行小组承担项目执行职能，负责遵照研发流程执行项目开发工作，并输出交付件。\nOSG 的主要成员均来自产品部。产品部是研发部下的职能组织，是配备设计、开发、测试、项目管理、维护、资料、HR、质量等全兵种的作战单元。 \n  设计、开发、I&V、资料等职能部门（LM）负责长期能力建设、产品架构看护及本领域交付。 \n  PO 提供职业化的交付管理能力，承担 PDU 的版本交付管理。它是项目经理的资源管理部门。 \n产品部（PDU）作为项目管理与职能管理的汇聚点，负责平衡短期项目交付与长期能力建设的制约与矛盾，对某独立产品/平台或解决方案中某节点产品研发交付负全责。 \n一个典型的 V/R/C 版本研发项目所处的组织环境及主要的汇报关系\n项目运作指导团队运作方式 \n项目运作指导团队运作方式 \n  OSG 承担项目指导职能， 负责管理产品部（PDU）的所有项目\n团队成员\n产品部（PDU）部长\nPO 部长（发起和主持会议）\nPDT 开发代表（代表 PDT 行使产品管理职能）\n设计/开发/测试/资料/质量等职能部门主管\n职责\n  管理项目的业务方向，确保项目目标与 DCP 目标一致。 \n  负责项目 RDR 评审，对项目目标达成一致并正式批准项目，对项目是否进入下一个阶段进行评审和决策。 \n  对作出的决策进行跟踪，确保得到执行。 \n  协助项目经理处理在项目内部无法解决的问题，对项目给予指导，协调各项目过程中的临时资源需求。 \n  积极支持和鼓励项目经理，在资源分配和问题解决等方面对项目提供支持。 \n  管理对项目所分配资源的可用性。 \nOSG 决策与 IPMT/BMT 决策的差异\nOSG 对每个研发项目 RDR 点做出的结论和识别的问题作为整个产品包 DCP 决策时研\n发领域的预审意见，供 IPMT/BMT 在 DCP 决策时参考\n 开发代表与版本经理的职责定位\n开发代表有两个视角：作为研发项目群经理，协调与统筹多个版本研发项目的组合，负责产品的研发多项目管理；在 OSG 中代表 PDT 经理行使产品管理的职责。开发代表同时向 PDT 经理和 PO 部长进行汇报。 \n版本经理是 V/R/C 版本研发项目的项目经理，负责组织制定项目计划，分配项目工作，管理项目状态和交付件，在 RDR 点向 OSG 进行汇报，对项目的成功负责。版本经理的日常工作向开发代表汇报。 \n项目执行小组及其运作\n各执行小组承担项目执行职能，各执行小组组长向版本经理汇报。 \n典型的 V/R/C 版本研发项目的组织结构\n知识域\n 知识域的构成\n知识域与项目生命周期的关系\n知识域与过程组的关系 \n将项目管理的关键活动从逻辑上进行聚类，分为五大项目管理的过程组——分析、计\n划、执行、控制、移交。 \n项目管理各知识域的管理活动都分属于不同的过程组。一个活动只能属于某个过程\n组。 \n十大知识域\n整体管理\n定义\n整体管理是指对所有项目管理活动进行整合、统一管理，确保所有项目活动协调一致，并对项目涉及到的内外部利益干系人进行协调和管理，聚焦于项目目标的实现。\n描述\n项目价值、范围、质量、时间、目标成本、财务、风险、人力资源及采购管理之间相互作用，互相制约，而项目整体管理是对上述知识域之间关系的一种集成管理。 整体管理需要对项目中相互冲突的目标和方案进行平衡，统一分配资源，对齐计划，消除冲突，实施集成变更控制，保证项目有序开展。例如，扩大项目范围，项目费用和进度就会受到影响，也就需要通过整体管理进行平衡和协调。 项目整体管理也是一种从项目开始到项目结束、覆盖整个项目生命周期的综合管理。 项目整体管理同时要考虑项目各种活动与公司的日常管理相符合。比如项目的周期应该与公司的能力基线相符合，与外部的合作要符合公司信息安全管理规定，项目中的工程活动、管理活动要与公司的要求相一致等。 \n关键活动\n六大关键活动\n参与制定项目任务书（Charter）\n定义\n参与制定项目任务书是指了解项目的背景和目的，参与分析客户需求和期望，理解项目的制约、主要风险和总体要求（包括：总体预算、总里程碑、项目成功标准等）。 \n描述\n由项目赞助人签发的、正式批准项目成立的文件。内容一般包括项目的商业背景（包括项目的价值）、期望的目标（包括项目的范围、时间、费用）、组织结构、验收方式、约束条件等信息。\n项目经理应尽早参与到项目任务书开发中去，如在产品开发项目中，版本经理在 CDT需求定义开始之前参与到产品 Charter 开发中。这样保证项目经理充分理解项目背景和商业价值，准确理解项目的范围和目标，做好项目立项准备，保证项目的可行性，减少项目失败风险。 \n与其它活动的关系 \n过程要素\n关键输入：\n  客户合同：如果项目交付对象是外部客户，则合同是本过程的输入之一。\n  战略规划/业务规划(SP/BP)： \n  SP 中 3 到 5 年左右路标规划 \n  BP 中产品年度（12 个月）版本火车计划 \n  SP 和 BP 中的部分主要特性 \n  需求： \n  竞争对手分析 \n  公司或者产品线行业部门的规划（如 DFX 特性、OM 规划的远程升级等特性\n等） \n  客户需求分析报告（如来自各地区的需求电子流、需求调研报告等） \n  标准及建议：如 ITU-T 建议、国家标准、运营商标准等。 \n  组织过程资产：组织的标准、流程、政策、历史积累资料等。\n  模板（如项目任务书的模板等） \n  历史信息与经验教训知识库 \n  历史版本遗留问题 \n工具和技术：\n专家判断：在制定项目任务书的过程中，可考虑借助如下专家\n  来自组织相关部门的专家，如项目管理办公室（PMO）的项目管理专家 \n  外部顾问 \n  客户或项目赞助人 \n  行业与技术委员会的专家 \n  领域专家（SME），如可靠性专家等 \n关键输出：\n 项目任务书\n项目任务书主要记录初始产品商业计划，它将重点描述产品价值（为客户和公司带来\n的价值）、概念、可实现性、关键里程碑、开发模式和关键资源需求、以及风险策略\n等，即 4W＋2H（Why/What/When/Who + How/How much）。\n4W\nWhy，产品的价值\n  市场宏观形势（标准和管制、产业链、市场发展态势，竞争态势）如何？ \n  该产品的目标客户是谁、能为客户带来什么价值、给公司带来什么价值？ \n  该产品是否支持公司和产品线战略？ \n  该产品能否提高整个产品组合在市场的地位？ \nWhat，产品构想、产品市场需求，产品要做成什么样？\n包括描述清楚产品的成本要\n求、物理形态和功能、性能规格、整机、可服务性、演进、质量、运输等规格，从而\n回答以下问题：\n  该产品概念是否清晰？ \n  该产品所包含的需求包是否清晰、合理？ \n  该产品是否具有竞争力（需解剖竞争对手产品）？怎样构建？ \nWhen，产品关键里程碑与生命周期阶段的里程碑，预计推出的时间和对客户承诺的符合度。\nWho，开发项目如何组织？团队成员需具备哪些技能？\n2H\nHow，产品可实现性，给出关键实现路径策略\n，包括诸如平台、芯片、关键部件器\n件、关键技术以及 E2E 配套的策略，产品开发策略如自研或合作，IPR 策略，产品和\n版本升级路径和市场切换策略，从而回答以下问题： \n  如果自研需要哪些能力？如果不具备是否有其它方式获取这些能力？ \n  有哪些风险？如何规避？ \nHow much，需要投入多少资源？ \n关键动作：\n  参与讨论并深刻理解项目对客户的价值和对组织的价值。 \n  参与产品构想的可选架构、产品竞争力及关键技术可行性分析。 \n  参与需求价值审视和排序。 \n  参与项目执行策略和项目里程碑计划制定。 \n  参与项目人力资源投入分析。 \n  参与评估项目风险、约束及周边依赖合理性。 \n  参与审视项目任务书中的所有交付件是否完整。 \n制定项目计划\n定义\n制定项目计划是指编制、协调和整合所有项目子计划，制定一个连贯一致的项目计划文件，用于指导项目工作的执行和监控。\n描述\n通过制定项目计划，项目团队建立起项目的全景图，定义实现项目目标的过程和步\n骤。项目的计划活动可以用于预测项目结果，衡量项目阶段进展。 \n项目计划是多维的。项目计划不仅是进度计划，还包括项目范围、成本、质量、沟\n通、风险和采购等各方面的计划。项目的变更必须同时考虑所有维度的影响。 \n项目计划是分层的。根据项目复杂程度，一般项目计划分为 1/2 级概要计划和 3/4 级详\n细计划。 \n项目计划是渐进明细的。在项目初期，需要制定整个项目生命周期的高层计划以及最\n近一段时间的详细计划，等项目执行一段时间后，再根据情况修正整个项目生命周期\n的高层计划，同时制定下一段时间的详细计划，避免一开始就制定整个项目生命周期\n的详细计划。因为项目具有不确定性，这导致在项目初期很难预见到项目所有细节，\n一旦项目有变化，前期所制定的计划细节内容就失去作用。所以，项目计划需要通过\n渐近明细的方式进行不断完善，计划越近，活动粒度越细，计划越远，活动粒度越\n粗。 \n需要注意，高层计划到 RDR2 评审确认后就基线化了，后续若出现涉及高层计划方面\n的变动，一般情况下需要做 PCR。 \n项目计划必须考虑所有利益干系人的诉求。在制定项目计划时，项目团队应当鼓励所\n有利益干系人参与。利益干系人通过参与制定项目计划，确保项目计划是可行的，最\n终满足交付要求。\n项目计划确定项目的执行、监控和移交方式，其内容和详略程度会因项目的应用领域和复杂性而异。\n与其它活动的关系\n过程要素\n关键输入\n项目任务书\n其它计划活动的输出\n编制项目计划需要整合诸多计划过程的输出。其它计划过\n程所输出的任何基线和子计划，都是本过程的输入。此外，对这些文件的更新都\n会导致对项目计划的相应更新。 \n环境因素\n  政府或行业标准，如 3C 标准，ITU-T 建议等 \n  公司相关的政策与制度，如行业部门相关要求、质量政策、人事管理制度等 \n  项目管理信息系统，如单项目管理工具 JIRA、Mingle，配置管理工具 VSS、\nSVN 等 \n  组织结构与文化，如产品部（PDU）组织中含有测试，那么项目计划需要一\n起考虑测试的计划 \n  基础设施，如现有设施和固定资产，在制定计划的时候需要考虑这方面资源\n是否足够 \n组织过程资产\n  流程、指导书、模板、绩效测量标准等 \n  以往项目的项目档案，如项目合同、项目计划、项目度量数据、项目经验教\n训总结、风险跟踪表等 \n  案例库 \n工具和技术\n专家判断法、项目计划模板、checklist 等\n关键输出\n 项目计划\n项目计划合并与整合了其它各规划过程所输出的所有子计划和基线\n  项目所选用的生命周期以及各阶段将采用的过程及项目管理团队进行“裁剪”的结果\n  项目管理团队所选择的项目管理过程 \n  每个所选过程的执行水平和深度 \n  对这些过程所需的工具与技术的描述 \n  将如何利用所选过程来管理具体项目，包括这些过程间的依赖关系和相\n互影响，以及这些过程的主要输入和输出 \n  项目变更管理计划，用来明确如何对变更进行监控 \n  项目配置管理计划，用来明确如何开展配置管理 \n  干系人的沟通需求和适用的沟通技术 \n子计划\n通常将范围、质量、进度、费用预算、产品目标成本基线合并为一个绩效测量基线，\n作为项目的整体基线，以便据此测量项目的整体绩效。 \n  项目进度计划 \n  项目质量计划 \n  人力资源计划 \n  风险管理计划 \n  采购管理计划 \n  项目沟通计划 \n关键动作\n  整合所有知识域的子计划。 \n  综合分析和解决各领域计划的冲突，保证计划的协调性和一致性。 \n  细化当前阶段计划。 \n  提交赞助人批准。 \n  如果项目较大，上述工作需要分层开展。 \n项目执行与监控\n定义\n项目执行与监控是指执行项目计划，收集、度量和发布项目绩效信息，根据度量、分\n析结果推动改进，确保按计划完成项目成果交付，实现项目的绩效目标 。 \n描述\n在项目的执行与监控中，项目团队实施已计划好的项目活动，项目经理进行指导、跟\n踪、调整，并管理项目的各种接口，解决各种冲突和问题。\n项目的监控要系统地关注项目各方面的状态，而不只是进度。项目的监控以项目计划\n为基线，跟踪项目实际进展。除了通过报告、会议外，还必须进行交付检查，经常走\n动管理了解项目真实的状态，进行相关的度量分析，及时做好纠偏工作，杜绝监而不\n控。 \n项目监控不仅要关注项目“硬”的方面（交付件、项目任务进展、质量状况、资源投\n入、风险等），同时也要关注项目“软”的方面(团队氛围、与周边的关系等)。不仅要\n对项目任务进行管理，也要对团队成员进行管理，在努力达成项目目标的同时，构建\n高绩效团队。 \n冲突和问题解决是项目监控中重要的活动，项目经理要倡导可视化管理，积极走动管\n理，获取真实信息，挖掘问题，对症下药及时解决问题，而不是急功近利或者报喜不\n报忧。项目团队应该遵守项目的基本规定（如“每日持续构建”等），不允许破坏规则\n（“破窗理论”）的发生；如果出现职责不清的事情，项目团队应该马上明确，不允许互\n相推诿（“锯箭理论”）；项目团队应该倡导预防，消除隐患，而不应激励“埋雷又挖\n雷”的“英雄”。 \n  执行计划中的项目活动，并生成项目状态数据（费用、进度、质量等）。 \n  评估项目绩效状态，决定是否需要采取纠正或预防措施。 \n  获取、管理和使用资源，包括：工具、物料等。 \n  建立并管理项目团队内外的沟通渠道。 \n  提出变更请求，实施和监控已批准的变更。 \n  跟踪和监控已有风险，识别新风险，确保风险的全面性，报告风险状态，执行适\n当的风险应对计划。 \n  培训和管理项目团队成员。 \n  管理供应商。 \n  收集和记录经验教训，实施批准的过程改进活动。 \n与其它活动的关系\n过程要素\n关键输入\n项目计划：项目计划（风险管理计划和采购管理计划等）和绩效测量基线是项目执行的主要输入。\n  批准的变更请求：批准的变更请求应列入计划，以便由项目团队实施。主要包括纠正措施和预防措施。 \n  组织过程资产： \n  问题和缺陷管理规定、流程和数据库：包括对问题的控制、识别与处理，以\n及对相关行动的跟踪 \n  过程测量数据库：如度量系统、工时系统等 \n  以往项目的信息（如项目合同评估结果、项目交付文档、经验教训总结等） \n工具和技术\n专家判断、项目例会、项目管理信息系统等。\n关键输出\n  项目交付件：是项目工作的具体结果，可以是产品、成果或服务。 \n  项目状态报告：详细描述项目总体状态（进度、质量、费用、资源等），各项活动\n进展状态、风险、问题等，下一报告周期内的主要活动计划、求助等。 \n关键动作\n  阶段工作或者工作包的开工和关闭。 \n  执行项目计划，监控进展，输出项目状态。 \n  定期审视，分析偏差，调整项目计划或提出变更请求。 \n  项目状态汇报，如 RDR 汇报。 \n  总结和共享。 \n  其它一些贯穿始终的活动：冲突管理、例外处理、趋势分析等。 \n集成变更控制\n定义\n集成变更控制是指评审变更请求，批准变更，并管理交付件及其项目文件变更的过\n程；确保变更都经过全面的分析，只有经批准的变更才被纳入修改后的基线中。\n描述\n集成变更控制负责统一协调整个项目中的各种变更，确保一个领域的变更在决策（批\n准或否决）前对其它领域的影响得到充分的分析和考虑（如进度变更往往会影响费\n用、风险、质量等方面）。 \n集成变更控制过程应贯穿项目始终。\n集成变更控制的目的并不是控制变更的发生，而是要对变更进行主动管理，提前预防\n不必要的变更，确保必要的变更有序进行，防止变更随意而导致混乱。 \n对于研发项目来说，发生变更的环节比较多，因此集成变更控制显得格外重要。\n每项变更请求都必须由项目管理团队或变更控制委员会（Change Control Board，\nCCB）进行管理（接收请求、评审请求、决策），相关权力需要在项目的角色与职责文\n件或配置管理中正式说明，并经过赞助人和相关干系人的同意。 \n项目经理有权批准某些变更请求，但是对于重要变更（涉及计划、范围和预算等），需\n由 CCB 负责决策。 \n变更控制视变更内容涉及的范围不同需要设定不同的级别 CCB，各级别的变更由相应\n级别的 CCB 进行变更审核和裁决。在产品开发中存在产品 CCB 和项目 CCB。涉及范\n围、进度、成本等重要的变更需要走 PCR，由 OSG 决策，此时 OSG 承担了更高层\nCCB 的职责。 \n正式评审通过后的变更结果应再次基线化，并且仅允许评审通过的变更纳入基线刷\n新，确保集成变更管理的有序。在敏捷项目中，一般不在迭代中进行变更，避免对迭\n代节奏产生严重影响。如果变更影响较大，需要立即执行，经项目管理团队认可，可\n终止当前迭代，新起一轮迭代，将变更安排到迭代计划中。 \n集成变更控制过程应贯穿项目始终\n引起变更的因素通常来自两个方面\n  外部的变更要求，如客户要求新增或修改需求。 \n  开发过程内部的变更要求，如为解决测试中发现的错误而修改设计，人员更换\n等。 \n变更可能影响项目的任何方面\n  项目目标 \n  项目交付件 \n  技术规格 \n  项目进度计划 \n与其它活动的关系 \n过程要素\n关键输入\n变更请求：必须书面申请和记录\n项目文件\n  配置项状态跟踪表 \n  配置审计报告 \n组织过程资产\n  配置管理规程 \n  变更管理规程 \n  配置库管理规程 \n  软件发布管理规程 \n  产品和版本命名规则 \n工具和技术\n专家判断法、配置审计等\n关键输出\n 项目文件（更新）：含配置状态报告、变更请求状态更新。 \n关键动作\n变更请求处理\n  接收变更请求。 \n  分析和评估变更带来的各种影响。 \n  综合变更涉及的各方意见后裁决变更，并完整记录变更请求的影响。 \n  批准的变更纳入到项目计划和项目文件中，并跟踪实施。\n沟通管理\n定义\n沟通管理是指识别项目干系人，确定其信息需求和沟通方法，制定沟通计划，维护一\n个开放的沟通环境，在项目整个过程中管理与项目干系人的关系，及时生成、发布和\n存储项目信息，确保项目沟通及时、高效。\n描述\n项目经理首先应该识别清楚项目干系人，识别项目干系人应在项目早期阶段进行，否\n则，可能会导致项目干系人对项目产生不利的影响。 \n其次，应该认真收集、分析项目干系人的沟通需求，包括：谁需要什么信息？何时需\n要？怎样获得？谁生成、发布、存储信息？ \n最后，应该定义一个简单、有效的沟通机制，包括：明确的信息安全要求、信息访问\n权限、沟通方式、报告模板。沟通机制应获得项目干系人的确认。 \n为了加强沟通效果，项目经理应该根据项目实际情况，选择合适的沟通方式，比如：\n通过大屏幕向全员实时展示产品持续集成的状态；通过故事墙和每日站会，让团队相\n互沟通开发进展和障碍；鼓励更多的面对面沟通，打造开放式的开发环境，让多职能\n组成的完整团队能坐到一起，使沟通交流更高效。 \n项目状态报告是公司项目沟通中的一项重要内容，项目团队必须全面考虑项目状态报\n告的内容和发送范围，需要根据通用的报告模板进行客户化。 \n保持畅通的沟通渠道、有意识地对项目信息进行维护与管理、实现团队及组织经验的\n有效积累、鼓励知识和经验在团队中传播是实施有效沟通的保障。 \n与其它活动的关系 \n过程要素 \n关键输入\n  项目任务书：可提供参与项目及受项目影响的内外部各方的信息，如项目赞助\n人、客户、团队成员、周边部门等信息。 \n  组织过程资产：以往项目的干系人分析、经验教训参考等。 \n工具和技术\n干系人权利/利益矩阵、专家判断、RDR 评审、例会（如站立会议）、电子通信及发布\n工具（如电子邮件、电话会议）、报告模板、项目管理软件等。 \n  干系人权利/利益矩阵：进行干系人识别、分类、排序，以有效分配精力，管理关\n键干系人的期望。 \n关键输出\n干系人清单、项目沟通管理计划、RDR 评审报告、项目状态报告、会议纪要、项目文\n件（更新）等。 \n关键动作\n  识别项目干系人：分析并识别对项目产生影响及受项目影响的关键项目干系人，分析并明确这些干系人对于项目信息的需求。 \n  制定项目沟通计划：定义项目沟通机制，针对不同的项目干系人采取不同的沟通方法。 \n  与项目干系人沟通：在项目运作过程中通过各种形式与项目干系人进行有效的沟通，例如项目例会、RDR 评审会议。 \n  管理项目信息：及时准确地收集、储存、分发、传递项目干系人所需要的信息，例如项目状态报告。 \n案例\n有效沟通的最基本的目标就是在解决问题或分配任务能够找到人、找对人。这就是沟\n通地图（参见示例）形成的最基本的动机。除沟通地图外，解决方案项目管理团队还\n制定了保障沟通的系列措施。\n项目经理最重要的工作之一就是沟通，其实沟通的成功来自很多细节，所以完整、清\n晰的项目干系人信息对项目沟通至关重要。沟通地图和应用是一个比较好的措施，能\n够有效的促进沟通管理。\n  要确保所有相关人员能够收到地图并正确使用（要有相应的培训或使用说明）。 \n  在人员发生变化的时候随时刷新地图。 \n  要有基于角色的工作流程说明。例如，在 S 项目中，针对某个版本的发布，如果需要集体讨论，则要求开发 PM、产品所属版本 PM、产品测试人员、镜像测试人员、现场工程人员参加。 \n项目移交\n定义\n项目移交是指在项目或者阶段结束之前，正式移交项目成果和项目经验给相关接收单\n位或个人，确保客户得到相应的交付。项目过程资产归档也是项目移交工作之一。 \n描述\n项目验收完成之后，项目团队组织内外部客户（可以包括技术服务领域、制造领域、\n采购领域、市场领域、研发维护团队、外部客户）接收项目成果，包括交付件（含客\n户培训资料等）、人力转维计划（人力轮换机制、维护人力技能要求）等，并完成能力\n传递（按照计划对制造、销售、技服人员完成培训），确保在项目或者本阶段成果完全\n移交且工作全部完成后才宣布项目结束。要把已知的遗留问题明确整理形成跟踪清\n单，其中重要的问题，必须给出近期（一般为半年）的规避措施。 \n如果项目在完工前就提前异常终止，项目也必须进行总结和归档，并调查和记录提前\n终止的原因。 \n项目经理应该组织项目团队进行项目总结，包括但不限于项目成绩和经验教训、已获\n得的技巧、已开发的标准等。项目团队在项目结束之前要确保将项目中获得的经验、\n能力和技能给移交给组织，形成组织过程资产。 \n与其它活动的关系\n过程要素\n关键输入\n项目计划、项目状态报告、已验收的可交付成果、组织过程资产等。\n工具和技术\n无\n关键输出\n最终可交付产品及成果、项目总结报告、组织过程资产（更新）等。 \n关键动作\n  对照项目范围和项目计划，检查项目是否彻底完工，包括对后续制造、维护人员以及市场人员进行相关的技能培训，项目交付文档归档等。 \n  评估分析项目结果，分析项目交付质量、项目进度、项目费用、项目价值等，与项目计划中质量、成本、进度等目标基线来对比，分析偏差原因，总结后续项目可借鉴的预防措施。 \n  总结项目经验和教训，分析项目过程中所遇到的特别的困难、风险或所采取的特别的措施，说明这些措施的效果。讨论使用过的工具、设备、工作方法和过程的效率。 \n  输出总结报告，确保项目评估的相关信息被包含在总结报告中，并对现有流程和模板提出修改意见。 \n  经验传递，分发项目总结报告给相关团队，归档到公司相关知识库库中。 \n  对项目所产生 CBB（可重用部件）要及时归档并进行宣传，使其价值最大化。 \n  项目完成后，需要知会物料管理人员释放物料资源；需要通知职能部门主管释放人力资源。 \n  召开项目总结会议，给项目表现做一个完整的回顾，对项目团队成员表示感谢并点评其中好的表现。\n角色和职责\n项目赞助人\n  批准项目任务书，包括项目目标、项目策略等关键内容 \n  批准项目计划 \n  建立并维护与客户及重要项目利益干系人的关系 \n  接收项目状态报告并给予反馈和评价 \n  批准影响项目范围、时间与成本等的重大变更 \n  批准项目关闭 \n项目经理\n  识别项目利益干系人 \n  分析项目的假设与约束并将其反映到项目的目标与策略中 \n  集成并协调项目所有的计划活动 \n  策划、建立并维护与项目利益干系人的关系 \n  整体控制项目结果及变更 \n  项目移交活动 \n  项目总结 \n项目成员\n  参与分析工作包任务并对相关工作进行计划 \n  参与策划、建立并维护与项目利益干系人的关系 \n  按项目计划实施项目活动，并及时汇报项目进展 \n  支持项目计划与变更控制相关活动 \n  参与项目移交和总结 \n 价值管理\n定义\n价值管理是指分析、定义、管理项目的价值，包含项目产出的价值以及项目运作所产\n生的价值，即：对客户的价值和对组织带来的价值。 \n描述\n  项目价值分为外部价值和内部价值。\n价值管理作为单独的知识域对于项目来说具有重大的战略和实际意义，它是整个项目\n的核心工作：一方面项目中所有工作都要对客户或组织带来价值，这些工作从投资收\n益或组织战略上来说是必须做的，另一方面是要使用最合适的解决方案来满足客户需\n求，并达成项目效益最大化。这也需要站在整个项目和组织的层面来评价项目价值。 \n价值管理一定要以客户为中心来思考，客户是价值管理的关键，是思考驱动力。内部\n价值是组织长期生存的关键。 \n项目经理需要分析、定义项目的价值并监控价值的实现。项目成员需要关注并提出所\n有可能增加项目价值的机会点。 \n价值管理是项目管理的核心，它和范围管理关系紧密，外部价值主要从客户需求中提\n取和分析，即：从范围中思考。项目范围说明书是价值分析和价值定义的输入，操作\n上价值管理可以和范围管理结合起来进行。 \n价值的基本公式： \nV = F / C      (V =  价值，F =特性，C =成本) \n公式中的价值指：特性具备的特征与获得该特性的全部费用之比，特性指：特性竞争\n力、给客户创造的价值、对客户的吸引力。 \n价值会受到项目中诸多因素的影响，如：功能/特性、费用、进度，项目团队对这些影\n响因素的平衡要以项目最终产生的价值为判断准则。如：单方面追求特性增加可能会\n导致超出团队开发能力，费用超支，延迟交付，反而会影响客户满意度。 \n价值管理一般也被称为价值工程方法，它既是一种管理技术，又是一种思想方法。 \n需要特别注意的是，要把提升项目价值和突破项目范围明确区分开来。价值管理的目\n标是在界定的项目范围内进行的，在这个范围内，将某个高价值特性的实现进行深入\n挖掘，“提供更多的魅力质量”，或将某个低价值特性加以甄别，“交付刚刚好的系\n统”，都是提升项目价值的好的做法；相反，以提升项目价值的名义加入新的范围，将\n导致范围蔓延，实际上将很可能最终降低项目价值。 \n外部价值机会点，主要是对客户的价值和对市场的价值，以期实现良好的投资收益\n  使产品更有竞争力（如产品可靠性、易用性、节能减排等的实现），同时有更好的投入产出比。 \n  对现有客户的价值。能够降低客户的 OPEX 或 CAPEX，提升客户满意度，提高某细分市场和价值客户的市场占有率。 \n  对潜在客户的价值。能够带来更多的市场机会（包含服务产品、其它产品的机会），甚至可以改变市场竞争格局等。 \n内部价值机会点，主要是内部能力（组织和技术）提升\n  开发能力的提升\n  新技术，如：ASIC 设计能力提升等。\n  新的工作方法或工具，如：敏捷、迭代、持续集成等。 \n  提升员工能力，如：培养某领域专家或某方面能力。 \n  提升资源使用效率，如：物料，仪器仪表。\n  消除开发过程中浪费，如：部分完成的工作、未应用特性、再次学习、移交、任务切换、延迟、缺陷。 \n  内部降成本，如：CCB 共享、归一化等。 \n关键活动\n  价值分析：主要在项目立项准备阶段和概念阶段进行。 \n定义\n价值分析是指通过合适的方法（如：workshop 研讨、SWOT 分析、定性或定量分析\n等）对项目价值机会点进行分析，明确项目外部价值和内部价值。 \n描述\n一般情况下，特性的外部价值在产品需求定义环节已经初步定义，在项目中需要的是\n更进一步分析和清楚地描述其外部价值。 \n项目应尽早确定利益干系人的要求，否则可能导致较高的成本、过度设计或过量生\n产。\n一般情况下，特性的外部价值在产品需求定义环节已经初步定义，在项目中需要的是\n更进一步分析和清楚地描述其外部价值。 \n项目应尽早确定利益干系人的要求，否则可能导致较高的成本、过度设计或过量生\n产。\n在价值分析中，如下这些要求需要得到及时确认： \n  1、系统要交付的主要特性，以及特性的价值。 \n2、 每个特性的达成标准。例如，生产量、性能等级、质量和可靠性指标。 \n 3、项目交付件的评审流程和验收标准。 \n内部价值在项目立项准备阶段往往已经由利益干系人、特别是项目发起人给出，但是\n在概念阶段需要进一步分析和明确，明确项目对其所在组织的意义，给组织能力带来\n的实际提升。 \n价值分析是一个反复迭代过程，主要是在立项准备阶段和概念阶段进行，在计划阶段\n可能有新的价值机会点需要分析。 \n同时，价值分析为需求优先级排序提供了有力的基础，资源永远是有限的，聚焦高优\n先级任务是项目成功的必要条件。必要时项目经理在有效理解客户的基础上去掉价值\n低的功能点，或者通过产品管理决策对特性列表进行调整。 \n与其它活动的关系\n过程要素\n关键输入\n  项目任务书：项目任务书中有关于市场分析、竞争分析的内容，可以为价值分析提供重要参考。 \n  项目范围说明书：作为需求/特性外部价值分析的输入。\n  利益干系人列表：主要是了解他们对项目的要求和期望，包括内部和外部利益干系人。 \n  组织过程资产：分析价值的工具和方法（如已有的优秀实践等）。 \n工具和技术\nWORKSHOP、客户调研（行销、Marketing、SE 等）、市场或行业分析、竞争对手分\n析、满意度分析和改进、产品竞争力分析（如利用雷达图）、头脑风暴、SWOT 分析、\n价值树分析等。 \n关键输出\n  外部价值跟踪表：包括外部价值机会点。外部价值机会点主要是针对每个特性明确其对外部客户的价值，特别是关键特性\n  内部价值描述：内部价值一般在项目范围说明书中进行描述，往往包含组织改进要求等。 \n  组织过程资产（更新）：分析价值的新方法或新工具（如新的优秀实践等）。 \n关键动作\n  收集相关价值材料，如：范围说明书，利益干系人意见等。 \n  与项目干系人（如：产品规划人员、市场人员、外部客户）澄清特性及其价值、评价标准等，为下一步工作和确定特性的价值优先级打下基础。 \n  与项目干系人（如：项目成员，项目赞助人、项目运作指导团队）分析和明确项目内部价值机会点。 \n  价值定义：主要在项目计划阶段进行。 \n定义 \n价值定义是指对项目价值分析中的每个已识别出的价值点进行深入分析，给出最优的\n解决方案和实施建议，并明确最终绩效评价参数和标准，确保产品在整个生命周期中\n获得的价值最大化。 \n描述\n价值定义主要针对外部价值机会点。 \n价值定义的焦点从“做什么”转移到了“怎么做”。项目产出的价值应该定义清楚，并\n且以特性和成本对比的形式得到一致认同。 \n价值定义的主要输出是解决方案，即：对增加项目价值具有最大潜力的解决方案，同\n时给出明确的实施建议（包括实施的行动计划）。实施建议必须来源于需求和利益干系\n人对其要求的描述，而根据这些实施建议能确保对后续作出的决定是连贯和一致的。 \n选择最优的解决方案需要综合各个方面因素。例如，优先级低的特性仅提供满足要求\n的方案即可，优先级高的特性需要考虑解决方案的竞争力和一定的领先性。 \n在价值定义的一般步骤如下： \n  1、提出方案－识别和挖掘能够满足需求的各种解决方案。 \n  2、评估方案－参考既定的价值评价标准项评估上述的各个解决方案。 \n  3、确定方案－选择最优的解决方案，并给出实施建议。 \n同时，在这个阶段可能有新的价值机会点被识别出来。 \n与其它活动的关系\n过程要素\n关键输入\n外部价值跟踪表、内部价值描述、范围说明书、组织过程资产等。\n工具和技术\nSWOT、头脑风暴、WORKSHOP\n  SWOT 分析：通过 SWOT 分析，项目涉及到的优势（Strengths）、劣势（Weaknesses）、机会（Opportunities）和挑战（Threats）都将识别出来。价值管理关心的是 SWOT 分析中的积极方面——优势和机会。风险管理关心的是 SWOT 分析当中消极的方面——劣势和挑战。 \n关键输出\n最终的解决方案、外部价值跟踪表（更新）、内部价值描述（更新）、组织过程资产\n（更新）等。 \n  最终的解决方案：给出各特性的解决方案及实施建议。 \n关键动作\n  提出方案：挖掘分析出不同的解决方案，来满足那些已确定需求。在这个步骤中，项目团队可以采用集体头脑风暴的方式，讨论和分析前面已经定义的需求（功能/特性），给出多个对应的方案。强调：自由的、不受约束的氛围很重要，要鼓励发散思考，所有意见不应当被批评，更加应当受到鼓励。讨论的方案越多越好，因为这样将产生方案组合或改进已识别的方案。 \n  评估方案：评估不同的解决方案。根据前一个步骤的输出，项目团队将开始进行过滤工作，以剔除那些不现实或无法达成的方案。对那些值得考虑的方案进一步进行细化和完善。强调：方案的完善需要考虑时间和成本的影响，因此，只有那些初步判断是合理的方案才进行进一步的细化和完善。 \n  确定方案：选择最优的解决方案及实施建议。对那些具有最大潜力（最大可能性）的方案细化到可使用的程度，可能包括准备详细的草图、仿真甚至原型、大致的耗时和成本估算。并最终给出选定的解决方案。 \n  价值控制：主要在项目开发和验证阶段进行。 \n定义\n价值控制是指监控所有已识别的价值机会点，以确保在此项目中获得最大的价值；在\n项目运作过程中定期审视价值，分析新的价值机会点，针对增加项目价值新的机会点\n进行变更。 \n描述\n价值控制是项目变更控制中的一个重要的控制活动。在项目任何领域的一个变更被批\n准和实施之前，该变更对其它领域的影响都必须进行分析和考虑。 \n在项目交付/移交时有效传递和确认项目价值，做到对价值机会点的全过程跟踪。 \n特别需要注意，进度是刚性和明确的，而价值显得相对难以衡量，控制进度手段比较\n成熟，而控制价值的手段往往不是显而易见的，当进度和价值出现冲突的时候，往往\n容易忽视价值控制，因此，应注意发现并采用有效的价值控制手段。例如，为了开发\n出更符合客户需求的软件，必须让真正的用户或能代表真正用户的角色来做识别价值\n的决策；采用迭代开发过程，通过缩短交付件的反馈周期来快速获取客户反馈并及时\n改进；以优先交付最大价值的原则，安排每一轮迭代的开发计划。 \n价值控制同时注意消除浪费，以增加项目价值，如：开发未应用的特性，没有积累再\n次学习，项目人员任务频繁切换等。 \n与其它活动的关系\n过程要素\n关键输入\n最终的解决方案、外部价值跟踪表、内部价值描述、组织过程资产等\n工具和技术\n偏差分析等。\n关键输出\n外部价值跟踪表（更新）、内部价值描述（更新）、项目状态报告、变更请求、组织过程资产（更新）等。 \n关键动作\n  维护项目价值：在项目中，风险、新增需求及变更将影响项目产出的价值，同样会影响到已识别或实施的价值机会。项目团队对项目的成果及其价值负责，包括监控交付件的价值贡献，这些价值在移交和验收时要被认可，确保价值在项目移交中得到有效传递。 \n  新增价值机会：在整个项目过程中，可能出现增加项目价值的机会。项目组织中所有层级的人员都有识别价值机会的职责。\n  变更控制：能够增加项目及其成果的价值的新机会应以变更申请的方式文档化，这些变更申请应该根据已达成一致的集成变更控制规程进行处理。 \n角色职责\n项目赞助人\n  澄清项目的期望价值和项目产出，在项目任务书中清楚地描述商业背景和项目期望 \n  定义组织从运作项目中获得的价值 \n  支撑项目经理与客户（以及其他外部利益干系人）沟通项目范围变化、项目预期价值的影响 \n  确保在每个项目评审点都对项目期望价值和项目产出得到有效评估，并且和组织的业务目标对齐 \n  在项目评审点或必要时对项目期望价值是否接纳给出决策意见 \n  评估从项目交付中得到的实际收益，在项目群和项目组合的层面评审此项目的综合价值 \n  确保项目中的经验和教训得到有效传递，使组织长期受益 \n项目经理\n  分析项目赞助人和其他项目干系人所描述的项目价值 \n  清楚地描述项目价值和价值评价标准项 \n  跟踪项目中的价值状态，并及时和项目赞助人沟通汇报 \n  在项目变更决策（批准或拒绝）前，确保变更对价值的影响得到充分评估和沟通 \n  特别关注和鼓励项目成员提出所有增加项目价值的机会点建议 \n  在项目总结报告中回溯价值的实际实现情况，分析和讨论偏差原因 \n  评估价值管理中用到的过程、工具和方法，并给出改进建议 \n项目成员\n  识别工作包中对增加项目产出价值的所有机会点，并确保在工作包中例行维护 \n  特别关注和提出所有增加项目价值的机会点建议 \n接收者\n  在描述项目价值时，对项目经理提供必要的支撑 \n  在制定价值验收标准时，从价值维度考虑项目产出 \n范围管理\n定义 \n范围管理是指收集和定义项目的需求，标识项目的交付和验收标准；通过变更控制和\n验收活动，确保交付满足项目要求。 \n描述\n项目范围是指为了交付产品必须完成的工作，包括业务需求（比如产品的产品属性和\n功能、如何实现节能减排等），交付要求（比如交付时间、验收标准、交付件等），项\n目管理要求（如管理方法、流程等）。 \n范围管理通过分析范围、定义范围，确保项目做正确的事情；通过控制需求变更，确\n保项目范围满足交付的要求；最终通过验收范围确认交付成功和客户满意。 \n利益干系人特别关注范围变更的影响，因此范围在各个决策点都会作为主要内容进行\n评审。\n关键活动\n  分析范围：主要在项目概念阶段进行。 \n范围分析中特别要关注的是确保项目分解过程对所有需求不要存在重复或者遗漏。\n定义\n分析范围是指对项目需求进行分析，清楚定义需求并对需求进行优先级排序；把项目\n成果分解成可管理的交付件，识别和确定项目的边界（应该包括什么，不应该包括什\n么），并明确项目完成的验收标准。 \n描述\n基于需求的价值、项目资源的局限性和项目运作中的风险，对所有的需求进行排序，\n保证项目价值最大化。项目成果必须被分解成可管理、可交付的组成部分。同时明确\n项目成功交付的标准，例如：性能的具体指标，流量负载等。随着客户要求和公司设\n计能力的不断提升，公司对需求的分析和设计不再仅仅局限于功能方面。所以在分析\n需求的时候还要从如下方面进行关注： \n成本、性能、技术限制、配套、节能减排、可靠性、准入限制、可安装性、可维护\n性、易用性、可制造性、可测试性、归一化、可行销性（如考虑产品 license、\nSBOM、行销工具、使用寿命和升级周期）、安全性（如操作系统安全性、应用系统安\n全性、访问控制、数据机密性、协议安全性等）、全球化（如界面、软件、资料的语\n言、格式、文化习惯方面的要求）、可采购性（如通用器件要有 2-3 个主流供应商，供\n应商交付质量、交付及时性、风险控制方面的考虑）。 \n与其它活动的关系\n过程要素 \n关键输入\n项目任务书、项目干系人列表等。 \n工具和技术\n利益干系人分析、虚拟测试技术（用于澄清需求）、访谈、研讨会、头脑风暴、德尔菲\n法、思维导图、亲和图、标杆对比（用于确定指标）、问卷调查、原型法、Kano 模型\n（用于需求的分析、分类、排序）等。\n关键输出\n  需求文件：描述各种单一的需求将如何满足与项目相关的业务需求，通常是包需求列表。 \n  需求跟踪矩阵：在整个项目生命周期对需求进行跟踪的表格，即：从需求到设计、到实现的需求跟踪表，通过跟踪防止需求遗漏。 \n  验收标准：定义已完成的产品、服务或者成果的验收过程和标准。 \n关键动作\n  需求获取 \n基于赞助人给出的初步的需求文件，项目团队需要做更进一步的需求澄清。 \n组织能力提升方面的需求也需要同步被收集，纳入项目范围\n为了确保需求都能够定义清楚，所有项目利益干系人明示的或者隐含的需要、期望和要求都应当确定下来，并且和各方就需求达成一致。需要关注需求的正确性、描述清晰性、唯一性、完整性、一致性、可实现、可验证性、可跟踪性。含糊不清、有冲突或不明确的需求也要识别出来，并且重新表达清楚。\n  需求分析和优先级排序 \n要对所有需求进行分析，并把分析结果文档化，如：包需求列表。所有需求都应该用\n恰当的语言来描述，对每个需求的验证方法也需要定义清楚，并且与客户讨论确定下\n来，这是客户验收标准的输入之一，是成功移交项目成果和客户满意的必要条件，是\n项目赞助者批准项目需求的必要条件。 \n分析和定义一个需求\n  客户提出此需求的目的是什么，要解决什么问题，其背景是什么？即What/Why。 \n  客户代表谁提出此需求，这个需求是组织提出的普遍需求还是个别需求？即Who。 \n  客户需求需要什么时候满足？即 When。 \n  客户要求满足此需求的强烈程度、紧急程度，即优先级，是必须的需求还是可选需求？ \n  是否有可借鉴的需求实施方案，客户期望或推荐的实施方案是什么？即 How的问题。 \n重点关注需求的如下属性\n  二重性：需求可以表述为“问题+解决方案”。项目团队应该更多的收集和把握“问题”所在，然后再提出最佳的“解决方案”。\n  颗粒度：需求是有大小之分的，通过对不同需求的颗粒度大小进行区分，能够把一批需求按照颗粒度进行分层管理。 \n  约束性：每个浮现于表面的“问题”都隐含着复杂的背景，这些背景是客户的地域特征、行业特点等所带来的，例如环境温度要求、网上准入规范、机房空间要求、设备兼容性等。 \n  关联性：需求之间存在着千丝万缕的关联关系。依赖关系：两个需求虽然针对不同的问题，但其中的一个的可用性必须依赖另外一个；矛盾关系：例如性能和可靠性；包含关系：比如需求 B 是需求 A 的局部细节。针对一组有关联关系的需求提供解决方案，比针对单条需求提供解决方案，能更加全面的满足客户的需求。 \n需求优先级排序用于支撑项目范围和项目决策，需重点关注以下几点\n  投资回报状况：高回报的需要优先级更高。 \n  需求来源及客户优先级别：如果需求是来源于重点客户或客户高层，需求要重点考虑。 \n  对客户满意度的影响：需求实现后，是否能够很大程度上提升客户满意度。\n分析时需要特别重视第\n一类、第三类需求。可使用 Kano 模型进行分析。\n第一类需求不实现用户会不满意\n第二类需求即便实现了客户也不会很满意\n第三类需求实现后会很满意\n对竞争优势的影响：要考虑该需求的实现带来的竞争优势。\n一、竞争对手没有但是客户期望比较大的\n二、能给竞争对手造成竞争壁垒；\n；三、竞争对手已有、客户也希望公司提供的\n  需求实现难度、需求依赖关系及成本的影响\n要考虑该需求的技术是否准备\n好，人力是否可以保证，进度方面是否可以按期交付；考虑需求之间实现的\n依赖关系，可采用 anatomy 方法进行分析；同时要考虑需求实现和后续维护\n的成本。例如，对软件安装改进、提供远程升级的功能等。 \n  确定项目交付件 \n  产品部件 \n  软件 \n  文档 \n  测试设备 \n  培训 \n  服务 \n  原型 \n  产品辅助工具 \n  定义范围：主要在项目的计划阶段进行。 \n项目范围的明确定义是项目管理的依据，无论是软件开发、产品测试还是资料开发，\n都需在项目计划中明确定义各项任务的具体要求，这样才能保证项目是可控的。 \n定义\n定义范围是指定义和描述项目详细的所有交付成果（即：项目所有的输出）以及其质\n量目标。需要将项目大的可交付成果与项目工作划分为更小的更容易管理的组成部\n分，包括：所有产品交付件、项目管理交付件、支撑组织能力提升的过程资产。另\n外，要明确指出哪些工作不属于本项目范围，这也是评价变更请求和额外工作是否超\n出项目边界的基准。  \n描述\n定义范围是项目成功的关键。当项目范围没有被定义清晰，最终项目费用可能高于估\n计值，不受控制的变更会导致项目的节奏被打乱、不停的返工、项目时间的增加、生\n产率的降低和工作士气的降低。  \n项目范围包括\n  产品和项目管理交付，包括功能和特性、假设条件和约束、验收标准等 \n  组织能力提升的过程资产，例如，人员的能力提升，新工具的测试，新技术的实现，新专利的开发，项目管理能力的提升 \n通过定义范围创建 WBS\n  提高项目费用、持续时间、资源估计的准确性。 \n  定义一个可度量和控制的执行基线，确定具体的工作包（位于工作分解结构最低层的可交付成果或项目工作组成部分），为进行估算、制定进度计划、测量执行绩效、配置管理和测试，以及评估项目绩效奠定坚实的基础。 \n  组建项目团队，理清职责分配。 \n与其它活动的关系\n过程要素\n关键输入\n项目任务书、需求文件、需求跟踪矩阵、验收标准、组织过程资产等。\n工具和技术\n专家判断、产品系统分析、备选方案识别、研讨会、Anatomy 分析方法等。\n关键输出\n项目范围说明书\n对项目范围的叙述性说明，包括主要可交付成果、项目假设、\n项目约束、项目制约因素和工作描述，为将来的项目决策以及利益干系人之间确\n认或建立对项目范围的共识提供书面依据。在 V/R/C 版本研发项目中，通常没有\n单独的项目范围说明书，项目范围说明一般包含在项目计划中。\n工作分解结构（WBS）\n以可交付成果为导向的工作层次分解。其分解的对象是项\n目团队为实现项目目标、交付项目成果而实施的工作。WBS 以结构化的方式定义\n了项目的全部范围。WBS 样例如图所示，若干分支向下分解到工作包层次，一层\n为阶段或可交付成果，最低层分解到工作包。 \n关键动作\n  确定项目所有可交付件、假设条件和约束等。\n  创建 WBS。\n  项目经理、项目成员及利益干系人都应该参加制定 WBS\n  召集所有相关人员，集体讨论所有主要阶段工作。 \n  分解项目工作。在 V/R/C 版本研发项目中，可参考公司的 WBS 模板。 \n  画出工作分解结构图，可以在 WBS 的较上层次上定义子项目或生命周期阶段。\n  把项目可交付成果细分为更小的、易于管理的组成部分，必须详细细分到可以进行估算、安排进度、做出预算、分配责任人的程度，以便顺利完成项目。 \n  验证上述分解的正确性。如果发现下层次的工作项没有必要，则修改上一级的工作项。 \n  制定项目范围说明书，并获得项目赞助人的批准。\n  制定验收计划和验收标准，明确项目验收的具体计划，并与利益干系人就验证标准达成一致。验收标准应该是可验证、可测量的。 \n  控制范围：主要在项目的开发、验证阶段进行。 \n接纳新需求或需求变更时，要全面分析需求变更给整体方案带来的变化。 \n定义\n控制范围是指使项目的成果和项目已定义范围保持一致，并管理需求和项目范围的变\n更，确保所有的范围变更经过集成变更控制的统一处理的过程。 \n描述\n控制范围是监督项目的范围状态、管理范围基线变更的过程。对项目范围进行控制，\n就必须确保所有请求的变更、推荐的纠正措施或者预防措施都经过实施集成变更控制\n的处理，防止项目范围蔓延。 \n范围变更分析要重点考虑对项目价值、项目策略、项目质量、项目周期、产品目标成\n本、预算以及项目利益干系人的影响。要保证多层次、相互关联的需求之间的一致\n性。当其中的一个需求发生变动时，与其相关联的实体都要得到审视，判断受影响程\n度，然后做出相应的变更。任何已接受和批准的变更应该在规格范围内和项目计划中\n得到更新。变更应和所有的项目成员以及受影响的利益干系人进行沟通。 \n与其它活动的关系 \n过程要素\n关键输入\n项目计划（含项目范围说明书）、项目状态报告、需求文件、需求跟踪矩阵、组织过程资产等。 \n工具和技术\n偏差分析等\n关键输出\n项目状态报告（更新）、变更请求、项目文件（更新）、组织过程资产等。 \n关键动作\n 需求跟踪管理\n在整个项目运作过程中，对需求进行跟踪管理。如按阶段审查需\n求跟踪矩阵的完整性、一致性、可追溯性。\n需求变更控制\n  需求变更来源是否是可追溯的，有明确的来源，例如相关标准、规范、市场调研书等 \n  基线中是否有需求与建议的变更相冲突 \n  建议的变更是否有负面效应或风险 \n  从技术条件、员工技能、资源约束的角度看该变更是否可行 \n配置更新\n对于所有变更，最后要保证需求跟踪矩阵和所有的配置项得到了统一的更新。 \n  验收范围：主要在项目的验证、发布阶段进行。 \n高质量的验收手册应该遵循项目范围说明书，而项目范围说明书应该完全覆盖我方提\n供的答标书中的要求。 \n定义\n验收范围指正式验收项目已完成的可交付成果的过程。 \n描述\n验收范围包括与客户或赞助人一起审查可交付成果，确保可交付成果已圆满完成，并\n获得客户或者赞助人的正式验证。 \n验收范围往往比较关注对产品交付的验收，而忽略对项目管理交付、组织能力提升成\n果的验收，例如，管理流程、技术规范、专利、技术断裂点等的验收。 \n通常的验收形式包括 Beta 测试、准入测试、转维验收等，内部或外部客户一般直接参\n与到验收工作中。 \n要注意，并不仅仅只做整个项目的最终验收，还可能做各个阶段的验收。阶段验收的\n形式可以非常灵活，某个评审就可以作为验收活动。 \n与其它活动的关系\n过程要素\n关键输入\n项目计划（含项目范围说明书）、需求文件、需求跟踪矩阵、验收标准、确认的可交付成果等。\n工具和技术\n评审、内部测试、试验局验证、准入或认证测试等。 \n关键输出\n已验收的可交付成果、变更请求、项目文件（更新）等。\n关键动作\n  以交付标准为基础，在阶段结束或项目结束前，提前预约好所有利益干系人，并说明整个验收的过程。\n  实施验收，并对客户的疑问进行澄清，记录遗留问题。 \n  共同评估此次验收是否达成目标，在不达标的情况下，需确认是否启动下一次验收活动。 \n角色和职责\n项目赞助人\n  确定需求的优先级别 \n  对需求进行澄清 \n  批准项目需求和交付标准 \n  批准项目范围和范围的变更 \n  与组织内及组织外项目利益干系人沟通项目范围 \n  对项目交付进行验收，并批准项目成果 \n项目经理\n  参与需求优先级别的制定 \n  与利益关系人在项目范围管理中充分互动 \n  与项目成员沟通项目范围，以确保所有项目成员理解和接受项目范围 \n  针对需求和项目范围变更，向项目赞助人提出建议 \n  确认所有对项目范围的影响因素被识别 \n  进行需求管理、需求跟踪和配置管理 \n  组织验收工作，确保项目范围实现并顺利交付 \n项目成员\n  积极参与项目需求分析和项目范围确认 \n  聚焦于项目目标的执行，并且按照项目范围管理规定程序及时汇报项目取得的成\n果 \n  参与项目的验收，保障项目交付 \n质量管理\n定义\n质量管理是指制定项目质量策略、目标以及支撑目标达成的过程和关键措施，遵循公\n司相关流程对项目进行管理，确保项目的过程和交付符合项目的质量要求。 \n描述 \n质量管理包含交付的质量管理和过程的质量管理。\n质量管理理念\n  以客户为中心\n  一次把事情做对\n  实时构建质量\n  预防胜于检查\n  全员参与\n  持续改进\n“计划—实施—检查—行动（PDCA）循\n环”是质量改进的基础\n  管理者的责任\n关键活动\n  质量策划：主要在项目概念阶段和计划阶段进行。 \n定义\n质量策划是指识别和制定项目及产品的质量要求和标准，以及为达到这些要求和标准\n所需要的技术、过程、工具、关键措施等，确保最终结果满足客户要求。\n描述\n  质量策划的目标是使项目运作过程中质量保证和质量控制有章可循\n通过质量策划有助于减少项目实施过程中的偏差，如需求的理解偏差、设计偏差、实\n现偏差等。 \n项目经理与项目团队成员必须全程关注，并积极投入到质量策划中。 \n进度是刚性和明确的，而质量往往弹性比较大，当进度和质量出现冲\n突的时候，往往容易“平衡”掉质量，设置质量红线是比较好的方式，确保产品达到\n最基本质量要求。 \n内容\n分析和理解外部质量要求（主要是市场策略）\n内部约束\n产品质量目标\n清晰地定义出项目的研发质量策略（如架构质量策略、DFX 质量策略等）\n合作策略（技术合作等）\n过程和方法\n质量目标\n与其它活动的关系\n过程要素\n关键输入\n项目范围说明书、利益干系人列表、费用预算基线、项目进度计划、风险跟踪表、组\n织过程资产、质量标杆、历史版本的缺陷和问题等。\n工具和技术\n标杆对照、流程图、质量新老七种工具、QFD 等\n关键输出\n项目质量计划\n项目文件（更新）等\n关键动作\n  根据项目任务书中项目的交付策略、质量策略、能力基线以及项目当前实际情况确定项目的质量目标（含过程度量指标和产品质量目标）。 \n  回顾历史项目或者历史版本的经验教训以及优秀实践，并确定为达成本项目质量目标的相关活动，避免历史问题重犯。 \n  系统分析本项目的交付件，制定明确的交付标准，包括可靠性、可服务性等 DFX特性，如果涉及硬件交付，必须包括可制造性、可供应性等。对于迭代项目，需要制定每个迭代的完成标准，并严格执行，杜绝带病迭代。 \n  分析项目的交付特性，标识项目技术风险以及隐含问题，可采用 FMEA 等方法。 \n  定义达到交付标准的措施，如采用包加载提升版本升级效率等。 \n  清晰的定义出本项目的过程和方法。\n  质量保证与控制：主要在项目的计划和执行阶段进行。\n定义\n质量保证与控制是指通过过程审计和过程评估等手段确保项目遵循质量策划中定义的\n过程和方法等，通过质量度量分析、质量专题分析、交付件评审、代码走读、持续集\n成、测试、以及发布评审等活动确保交付件达到质量目标。 \n描述\n在项目的执行过程中，通过定期的发布质量报告、持续集成实时报告、走动管理等措\n施，及时暴露质量问题，推动质量问题的解决。需要注意的是，质量状态应该尽量做\n到实时化、可视化和容易获取。 \n对组织或流程中发现的问题，及时提交相关优化建议。 \n项目团队好的实践，及时固化到组织级资产中。 \n与其它活动的关系\n过程要素 \n关键输入\n项目质量计划\n过程改进计划是质量保证工作的依据。将前期质量策划的结果在\n版本开发过程中贯彻执行，确保达成质量要求。 \n项目状态报告\n包括质量测量指标、工作绩效信息、质量控制测量结果，当实际\n与目标出现偏差时，需要对偏差予以分析，并采取纠正和预防措施。\n组织过程资产\n可借鉴的纠正和预防措施。\n工具和技术\n审计、评审、测试、评估、度量、质量新老七种工具等\n关键输出\n确认的可交付成果、确认的变更、变更请求、项目状态报告（问题的跟踪和闭环）、项\n目文件（更新）、组织过程资产（更新）等。 \n关键动作\n  将项目执行过程中所产生的项目状态、度量数据等信息与质量计划相比较，识别项目执行过程中的问题和风险。 \n  实施质量审计，识别改进点和好的实践。针对改进点制定改进措施和预防措施，好的实践要予以固化。 \n  针对质量问题，使用质量工具进行根因分析。采取纠正措施，使版本的质量得到有效控制，达成既定目标。积极推行预防措施，并固化到组织流程中，保证同类问题在后续版本不再重犯。 \n角色和职责\n项目赞助人\n  明确项目总体质量策略及要求 \n  批准项目质量目标 \n  批准项目的质量计划 \n  支持项目经理的质量管理，为其分配合适的资源 \n  和组织内外的项目利益干系人沟通质量计划 \n项目经理\n  制定项目质量计划，与项目赞助人在质量目标及要求上达成共识，确保相关质量计划符合组织政策、标准、流程及规范 \n  与项目团队成员以及其他关键项目利益干系人沟通项目质量计划 \n  确保质量计划的贯彻执行和质量目标的达成 \nQA\n  协助项目经理开发质量计划 \n  协助项目经理做好质量控制工作，推动项目质量目标达成 \n  对质量保证措施进行跟踪监控，向管理者提供质量健康状态，并推动项目质量问题的解决 \n  给项目团队提供过程、质量工程方法等方面的指导 \n  推动项目质量管理的持续改进 \n项目成员\n  参与开发项目质量策略 \n  遵从项目质量计划，给出改进建议，对齐所有项目质量策略 \n  完成项目开发工作，并符合项目质量目标 \n目标成本管理\n定义\n目标成本管理是指分析项目所交付产品的成本要求，明确产品目标成本的构成，选择\n并定义目标成本的实现方案，构建有成本竞争力的交付产品。 \n描述\n在目标成本管理中，强调产品目标成本的实现，要关注安装、服务、运维产品全生命\n周期 E2E 成本，正确认识全流程的隐性成本，并在前端设计开发中加以考虑。\n产品 E2E 目标成本管理的范围\n设备成本：即料本+制造费用\n工程成本：主要包括工程勘测、硬件安装、软件调测、验收等环节的成本\n维护成本：主要包括升级、日常维护、巡检、打补丁等环节的成本。\n物流成本：主要包括分货、包装、运输等环节的成本。\n关键活动\n  目标成本分解：主要在项目概念阶段进行。 \n定义\n目标成本分解是指比较不同备选概念的成本，提供备选概念的选择依据，对选定的备\n选概念 E2E 目标成本进行初步分析和分解，评估目标成本达成的可行性，把 E2E 成本\n需求落入系统需求，明确产品的成本竞争力。 \n描述 \n如果项目任务书中产品成本策略不够清晰，则在分析目标成本之前，项目团队需要通\n过解剖等方法分析竞争对手的产品成本，确定产品的成本策略和目标成本，确保开发\n产品的成本竞争力。要尽可能分析以下内容： \n  竞争对手关键技术实现途径 \n  竞争对手产品关键器件及单板成本 \n  竞争对手产品的各种配置成本 \n如果目标成本实现的风险较大，特别是硬件产品，有可能导致项目终止开发，项目团\n队需要与 PDT 经理等及时沟通。 \n  可能的备选关键部件/器件成本\n  在规划版本时需要考虑多种部件/器件解决方案，引入多家供应商竞争 \n  ASIC 部门分析芯片，规划 ASIC 策略 \n  可能的备选平台 \n  评估已有的软、硬件平台，以及是否有可以移植的平台 \n  评估是否可以借用现有成熟单板、电源、结构件、配电等 \n  对借用/移植的平台、单板、软件模块等进行成本分析，包括移植工作量、节约工作量、物料成本等 \n  评估第三方软件，如 OS、DB、中间件等 \n  E2E 成本要素 \n与其它活动的关系\n过程要素\n关键输入\n项目任务书（E2E 目标成本）、需求文件（项目需求）、项目范围说明书、竞争对手产\n品成本信息等。 \n工具和技术\n目标成本分解法：按照产品结构树，自上向下分解目标设计成本\n如整机→功能\n模块→单板、结构件、电源、附件→关键器件、外配套等。然后，可以采用价值\n分析/价值工程法，对每个功能模块进行评分，按分数比例分解成本目标；或者采\n用类比分解法，根据已有的相近的产品的成本构成匹配出各模块的目标成本；还\n可以采用能力分解法，即看看哪个模块的低成本潜力要大一些，相应承担的成本\n目标就大一些。\n成本测算法\n直接法\n根据设计方案的技术定额、BOM 结构、配置、工艺、生产人工/机\n器消耗等分别测算物料、制造费用等成本项目，合计计算产品制造成本。 \n概算法：\n在一般情况下，除了物料项目采用直接法计算外，其它成本项目如\n安装成本，通常是比照类似产品成本中这些项目所占的比重来概算。 \n分析法\n在类似老产品的成本基础上，通过新老两种产品在结构、用料、工\n艺、维护方式等方面对比分析，计算其差异成本并进行增减调整，以求得新\n产品的成本。 \nE2E 成本均衡法\n从 E2E 全流程成本来牵引产品设计，从 E2E 来看，如果能够降\n低全流程成本，就可以增加合理的料本；若提升 1 元的料本能降低后端 1 元的人\n工成本，宁愿选择增加 1 元的料本，因为后端人工成本有逐步上升的趋势，而料\n本则有逐步下降的趋势。 \n关键输出\n初步的产品 E2E 目标成本报告（作为产品备选概念的输入参考）、备选概念成本比较报\n告、项目文件（更新）等。 \n关键动作\n  按照备选概念分解各模块，包括系统级、模块/单板级的备选概念，并评估运输成本、安装成本、维护成本高低。 \n  计算不同备选概念的成本，并给出不同备选概念的对比分析。 \n  与目标成本进行比较分析，评估目标成本达成的可行性。 \n  E2E 成本需求纳入系统需求跟踪管理。 \n  目标成本设计：主要在项目计划阶段进行。 \n定义\n目标成本设计是将产品 E2E 目标成本需求转化成本设计规格，给出关键降成本措施。\n描述\n在目标成本设计中，设备成本要分解到单板、模块、关键器件，工程成本、维护成本\n和物流成本要分解成本工时和产品能力目标。\n为了前端构建成本，为成本竞争优势打下基础，一般采用 QFD、价值分析/价值工程、\nTRIZ 等方法选择最优方案，明确构建低成本的关键措施，并列入项目计划中落实执\n行，确保项目交付的产品在整个生命周期中成本最优。 \n前端构建成本的典型措施\n  架构和系统设计中构建成本，采用各种技术手段和技术创新，在不降低产品性能和质量的前提下，降低产品生命周期成本，如多网元共板设计、无损业务自动设计、网元占用内存优化等。 \n  平台、CBB 的应用，如模块组件化等。 \n  海量发货产品，必须考虑构建硬件低成本措施：构建整机低成本方面如结构件归一化、配线优化、散热优化等，构建单板低成本方面如采用 ASIC 等。 \n  考虑制造、采购、销售、售后维护环节的低成本构建措施\n  器件选择，不能独家供应 \n  单板推行无螺钉装配技术 \n  做好集成配置器开发，降低销售成本 \n  丰富问题定位手段，提升问题定位效率 \n  提供远程调测/升级及维护工具、一次进站、站型标准化、客户自维护等 \n  考虑物流成本 \n  ABC 分包 \n  一箱式发货 \n  体积重量 \n与其它活动的关系\n过程要素\n关键输入\n初步的产品 E2E 目标成本报告、备选概念成本比较报告、需求文件（产品规格）、组织\n过程资产、竞争对手产品成本信息等。 \n工具和技术\n价值分析/价值工程、QFD、TRIZ、决策分析等。\n关键输出\n产品 E2E 目标成本报告等\n关键动作\n  产品成本测算\n  获取结构件、线缆、电源、单板主要器件（含 PCB）、第三方软件等价格。 \n  估算单板/模块成本。 \n  根据典型配置及其它主要配置计算产品成本。 \n  产品成本构成分析，计算出各部件的成本构成比重。 \n  考虑生产/测试成本、安装成本、维护成本的高低，定性评价对可服务性、可安装性的影响。 \n  组织相关专家对测算结果进行评估。 \n  产品目标成本达成措施分析\n  根据产品成本构成，对占产品成本 80%的部件提出明确的构建低成本的要求。 \n  参照前期给出的目标成本，给出需要重点构建低成本的关键点，特别要关注DFX 基线的落实，如工程成本基线、维护成本基线、物流成本基线等。对服务成本，若不能核算到以货币为单位的目标时，应以工时和服务能力作为目标提出。 \n  对占产品成本比重大的关键器件或部件，项目团队提出多种解决方案（包括ASIC 对策），由项目经理提交给采购部门，以便招标或价格谈判。 \n  成本措施列入项目计划。\n  目标成本实现与验证：主要在项目执行阶段进行。 \n定义\n目标成本实现与验证是指实施降成本措施，监控产品 E2E 目标成本的落实，评价产品\nE2E 目标成本达成情况。 \n描述\n项目团队应在开发阶段跟踪产品 E2E 目标成本的达成情况，降成本措施的实现情况，\n给出风险预警；在验证阶段综合各领域的目标成本达成情况，给出产品 E2E 目标成本\n达成率。 \n要强调平台化、标准化、简单化，特别要关注从兼容性设计、采用通用/主流器件、多\n家选型等方面构建成本优势，尽量复用成熟的软、硬件平台、单板及模块，降低开发\n及维护成本。如果产品量大、生命周期长，则要进一步加强构建低成本的特别措施。 \n与其它活动的关系 \n过程要素\n关键输入\n产品 E2E 目标成本报告、项目计划、项目状态报告、组织过程资产等。\n工具和技术\nDFX、标准化、选型替代、模块化、成本测算法等\n关键输出\n项目状态报告（更新，包含成本措施实施报告、产品 E2E 目标成本达成率、基础工时\n测试报告等）、变更请求、项目文件（更新）等。 \n关键动作\n  测算、监控目标成本实施情况（含采购降低计划实施情况）： \n  关注料本落实情况\n  关注制造、服务等端到端成本落实情况：\n  评价目标成本达成情况，制定成本优化的计划和措施\n  实验室测试和 BETA 验证基础工时的达成情况，验证降成本措施的实现情况，测算产品 E2E 目标成本的达成情况。\n  项目移交前，提出产品生命周期管理过程中持续降成本建议。\n角色和职责 \n项目赞助人\n  审核项目任务书提出的目标成本 \n  审视项目团队确定的目标成本 \n  签发目标成本 \n  评价目标成本达成情况 \n项目经理\n  组织分析、分解目标成本 \n  按签发的目标成本，制定构建低成本产品的措施并指导团队落实 \n  组织按照要求提取备选概念配置、典型配置、单板配置等进行成本核算 \n  监控目标成本达成情况 \n  组织降成本专项活动 \n成本工程师（可选）\n  设备成本竞争分析 \n  E2E 成本均衡、优化分析 \n  提供成本管理工具方法模板操作指导、优秀实践等 \n  给出 E2E 目标成本达成率 \n项目中与财务相关的团队成员\n  分析、提出目标成本建议 \n  协助计算目标成本 \n  测算产品成本，评估目标成本达成情况 \n项目成员\n  参与目标成本的分析、分解 \n  实施成本降低措施 \n  项目执行过程中，提交成本优化建议 \n时间管理 \n定义\n时间管理是指管理和控制项目的工期和进度，确保所有项目活动都能够得到很好的识\n别和控制，最终按时完成。 \n描述\n在时间管理中，项目团队根据确定好的项目范围，参照 WBS 模板的标准活动，定义出\n项目中的具体活动，继而估计每个活动的持续时间并对活动排序，制定相应的进度计\n划，然后在项目执行过程中监控项目进度计划的执行，如果进度偏差不符合计划，则\n启动变更控制，调整进度计划或者采取其它措施（如调整范围、增加资源等），以保证\n项目目标的达成\n对多数项目来说，交付时间很大程度上影响其项目的收益，所以应该一方面让客户参\n与时间进度计划的商讨和认可，这样可以降低合同双方理解不一致的风险，增加对该\n项目的信心，另一方面也需要让项目成员对负责的任务有充分的理解和认识，而且对\n制定的时间进度计划充满信心，并尽量利用各种潜在机会缩短交付时间。 \n关键活动\n活动定义\n主要在项目概念与计划阶段进行，主要工作是根据范围管理输出的工\n作分解结构（WBS），识别为完成项目交付而需要采取的具体活动。 \n定义\n活动定义是指根据范围管理输出的工作分解结构（WBS）的工作包，识别为完成项目\n交付而需要采取的具体活动的过程。 \n描述\n将范围管理输出的 WBS 的工作包进一步细分为更小的组成部分，即活动。活动是开展\n估算、编制进度计划以及执行和监控项目工作的基础。 \n按照组织的基线数据，活动的持续时间一般在一到两周左右比较合适，这种活动粒度\n比较容易进行准确的估计、计划，也便于后续的项目进度控制。 \n活动颗粒度大小是与项目具体情况密切相关，对于某个周期是 1 个月的项目，显然细\n化到天的活动可能更合适。 \n项目经理与项目核心团队成员必须全程关注，并积极投入到活动定义中，确保关键项\n目活动没有遗漏或错误。 \n与其它活动的关系 \n过程要素\n关键输入\n项目范围说明书、工作分解结构（WBS）、组织过程资产等。 \n工具和技术\n标准活动清单、专家判断、标杆对照、滚动式规划等。\n  标准活动清单：组织的进度计划模板中提供了一套标准动作，项目在定义活动时可以参考，如华为的 WBS 活动模板。 \n  滚动式规划：是一种渐进明细的规划方式，即对近期要完成的工作进行详细规划，而对远期工作则暂时只在 WBS  的较高层次上进行粗略规划。因此，在项目生命周期的不同阶段，工作分解的详细程度会有所不同。例如，在早期的项目计划阶段，信息尚不够明确，工作包也许只能分解到里程碑的水平；而后，随着了解到更多的信息，近期即将实施的工作包就可以分解成具体的活动。 \n关键输出\n  活动清单\n活动清单需要包含项目所需的全部进度活动，并对每一个活动进行标\n记和提供足够详细的工作描述，使得项目团队成员知道应当完成哪些工作。\n  活动属性\n活动属性是指每项活动具有的属性，是用来扩展对活动的描述。项目\n管理团队应根据项目的实际情况选择最合适的属性。活动属性一般包括活动编\n码、活动名称、活动描述、紧前活动、紧后活动、逻辑关系、时间提前与滞后\n量、资源需求、强制日期、制约因素和假设条件等。在活动定义中，主要确定活\n动编码、活动名称以及活动描述，其它属性在后续活动中进一步明确。\n  里程碑清单\n里程碑是项目中的重要时间点或事件。里程碑清单中需要列出所有\n里程碑，并指明每个里程碑是强制性的（如合同要求的）还是选择性的（如根据\n历史信息确定的）。 \n关键动作\n  对“范围管理”中的“定义范围”活动输出的工作分解结构进行审视，确保近期要完成的工作包已经分解到可管理、可交付的粒度。 \n  确定活动清单。定义出为了完成工作包而需要开展的活动，项目团队成员应参与分解，以便得到更好、更准确的结果。 \n  确定项目所有里程碑，并确定这些里程碑是强制性的还是选择性的。 \n活动评估\n主要在项目概念与计划阶段进行，主要工作是对活动（完成工作包所\n需要的工作）进行评估，主要包括活动的工作量、工期、资源需求等方面。 \n定义\n活动评估是指将定义的活动作为评估对象，估算出每一项具体活动的工作量和资源需\n求，并以此为根据估算出完成该活动所需要的工期。 \n描述\n项目团队通过相关评估活动，主要得到活动资源估计和活动工期估计。活动资源估计\n是每一项活动对资源的独立需求，这里不考虑各活动之间的资源冲突。 \n与其它活动的关系 \n过程要素\n关键输入\n活动清单、活动属性、里程碑清单、项目范围说明书、项目人员分工、资源日历、组\n织过程资产等。\n  资源日历\n是确定各种资源（如人员、物料等）可用时间的日历，说明项目所需\n的各种资源何时可用以及可用多长时间。 \n工具和技术\n专家判断、类比估算、自下而上的估算、项目管理软件、PERT 估计、公司人力微观预\n算模板等。 \n  自下而上的估算\n通过对活动进行进一步细分，然后估算资源需求/工期，接着把\n这些资源需求/工期再汇总起来，得到活动总的资源需求/工期。 \n  项目管理软件\n采用项目管理软件，如 Microsoft Office Project 等，可以有效提高\n估算的效率。 \nPERT 估计\n一种在给定的项目中对潜在任务进行分析的方法。PERT  使用三种估\n算值来界定估计值的近似区间：\n最可能值（Cm）——对所需估计属性进行比较现实的估算得到的结果。 \n最乐观值（Co）——对所需估计属性进行比较乐观（最好的情况）的估算得到的结\n果。 \n最悲观值（Cp）——对所需估计属性进行比较悲观（最差的情况）的估算得到的结\n果。 \nPERT  分析方法对以上三个估算进行加权平均，得到估计结果： \nCe =（Co+4Cm+Cp）/ 6\n  公司人力微观预算模板\n根据特性规模估算和生产率基线数据，估算出工作量，\n再根据项目里程碑点和各阶段工作量分布，计算出各阶段所需的人力资源。 \n关键输出\n活动清单（更新）、活动属性（更新）、里程碑清单（更新）、项目文件（更新）\n等。\n  活动属性（更新）\n主要包括活动工作量、资源需求、活动工期估算结果等。\n其中，活动工作量是指完成每项活动所需花费的人力数量（如人月），可以通过活动\n交付的规模（如功能点、文档页）和生产率基线数据计算出活动工作量，并结合活动\n交付的复杂度加以调整；资源需求是指每项活动所需要的资源数量，如开发人员数\n量、测试人员数量、资料人员数量、网元数、仪表数等；活动工期估算结果是指根据\n估算的活动工作量和资源数量，估算出的每项活动所需工期。 \n关键动作\n  估算活动清单中各项活动的工作量。 \n  估算活动清单中各项活动的资源需求。 \n  估算活动清单中各项活动的工期。\n活动排序\n主要在项目概念与计划阶段进行，主要工作是识别和记录项目活动间\n逻辑关系，制定项目的进度网络图，为项目进度计划的制定提供依据。 \n定义\n活动排序是指识别和记录项目活动之间的逻辑关系，制定项目的进度网络图，从而为\n项目进度计划的制定提供依据。\n描述\n在活动清单中，除了首尾两项活动，其它每项活动都至少有一项紧前活动和一项紧后\n活动，而活动排序的目的就是为了识别每项活动的所有紧前活动和紧后活动。 \n与其它活动的关系\n过程要素\n关键输入\n项目范围说明书、活动清单、活动属性、里程碑清单、组织过程资产等。 \n工具和技术\n紧前关系绘图法（PDM）\nPDM  包括四种依赖关系或逻辑关系： \n完成到开始（FS）：一个活动的开始依赖于另一活动的完成，如单板调测活动的开始\n依赖于单板加工的完成。 \n完成到完成（FF）：一个活动的完成依赖于另一个活动的完成，如软件开发中虽然可\n以分模块进行单元测试，但整个单元测试活动的结束依赖于整个编码活动的结束。 \n开始到开始（SS）：一个活动的开始依赖于另一活动的开始，可安装性验证活动的开\n始依赖于设备安装活动的开始。 \n开始到完成（SF）：一个活动的完成依赖于另一活动的开始，如必须在国庆前完成通\n信设备的巡检。 \n关键输出\n  项目进度网络图\n项目进度网络图是展示项目各进度活动及其相互之间逻辑关系\n的图形。\n  项目文件（更新）\n本活动可能需要更新的项目文件包括活动清单、活动属性、项\n目风险列表等。\n关键动作\n  采用紧前关系绘图法确定各项活动之间的逻辑依赖关系。 \n  依据进度网络模板绘制进度网络图。 \n进度计划制定\n主要在项目概念与计划阶段进行，主要工作是制定项目进度计\n划。\n定义\n进度计划制定是指在活动定义、活动评估、活动排序的基础上编制项目进度计划的过\n程。 \n描述\n通常项目团队需要多次反复，持续审查和修正时间估计和资源估计等活动属性，才能\n制定出一个可行的进度计划。 \n制定进度计划中要避免冒进，不切实际的进度计划只会打乱整个项目的节奏。另外，\n进度计划也不可制定得过于保守，在当今激烈竞争的市场上，宽松的进度计划很可能\n导致机会丧失。 \n与其它活动的关系\n过程要素\n关键输入\n活动清单、活动属性、里程碑清单、项目进度网络图、项目人员分工、项目范围说明\n书、组织过程资产等。 \n工具和技术\n  关键路径法\n通过沿着项目进度网络路径进行顺推或者逆推，得到各网络路径的\n总时间，其中总时间最长的进度网络路径就是“关键路径”，关键路径上的活动就是“关键活动”。关键路径的浮动时间为零，以关键路径为基础，就能计算出其它\n活动的自由浮动时间。 \n  进度计划编制工具\n  进度压缩\n进度压缩是指在不改变项目范围的前提下，缩短项目的进度时间，以\n满足进度制约因素、强制日期或其它进度目标。\n赶工（串行压缩）\n快速跟进（并行执行）\n关键输出\n项目进度计划、项目文件（更新）等。\n项目进度计划\n项目进度计划会包括每项活动的计划开始时间、计划完成时间以\n及相关责任人。 \n关键动作\n  采用关键路径法等进度网络分析工具确定关键活动的开始时间和非关键活动最早和最晚开始时间。 \n  对其中关键路径的活动可采用进度压缩的方法来减少项目周期，以满足项目进度要求。\n  根据资源匹配情况、里程碑清单确定非关键路径活动的开始和结束时间，在确定的过程中要考虑资源平衡。 \n  采用进度计划编制工具编制进度计划。 \n  对进度计划组织评审，并报项目赞助人批准，形成基线并发布。 \n进度控制\n主要在项目执行阶段进行，主要工作是根据项目计划控制项目进度。 \n定义\n进度控制是指依据进度计划管理和控制项目进度的活动。 \n描述\n在项目执行过程中，有可能因时间管理本身或者外部的原因而需要对项目进度进行变\n更，此时便可以按照变更控制流程对项目进度计划进行修订，以确保进度计划始终可\n行。\n与其它活动的关系 \n过程要素\n关键输入\n项目计划、项目进度计划、组织过程资产、项目状态报告等。\n工具和技术\n偏差分析、项目管理软件等\n关键输出\n  项目状态报告：重点阐述实际进度与计划进度偏差部分。 \n  组织过程资产（更新）：把产生偏差的原因、采取的纠偏措施以及经验教训总结更新到组织过程资产中，以便供后来项目参考。 \n关键动作\n  借助项目管理软件，对照项目进度计划，监控项目实际进度。 \n  对偏差进行评估，决定是否需要针对进度偏差采取纠正措施。 \n  如果需要，提出项目进度计划变更请求，批准后更新项目进度计划。 \n角色和职责\n项目赞助人\n  明确项目总体进度要求 \n  批准项目进度目标 \n  批准项目的进度计划及其变更 \n项目经理\n  组织项目团队，共同制定项目进度计划，与项目赞助人在进度目标及要求上达成共识，确保进度计划符合组织要求、标准、流程及规范 \n  与关键项目利益干系人沟通项目进度计划 \n  监控项目进度计划的执行，并向关键项目利益干系人定期通报项目进度计划进展情况 \n项目成员\n  参与开发项目进度计划 \n  执行项目进度计划，完成项目开发工作，并符合项目进度目标 \n  对项目时间管理工作提出改进建议 \n财务管理\n定义\n财务管理是指对完成项目活动所需的费用进行预算和管理，确保项目费用在预算范围\n内可控；估算项目的预期收入，并对项目期间的实际收入进行管理，确保项目投资合\n理有效。 \n描述 \n  直接费用\n项目可直接控制管理的费用，主要包括项目所需要的业务费用（如合\n作费用、物料费用、资料费用、软件费用等）和员工性费用。此部分费用是项目\n经理关注的重点。\n  间接费用\n项目无法直接控制管理的费用，如项目所需要的行政/运作费用（折旧\n与摊销、租赁费等），首先归集在部门，然后按一定的方法（如按工时比例）分摊\n到项目。项目经理主要关注分摊依据的合理性。 \n关键活动\n  费用估计与预算\n费用估计与预算就是对整个项目活动的费用进行估计并给出完\n成项目最合适的预算的过程。一般在项目立项准备阶段启动项目的费用估计与预\n算（粗略的），在项目的概念与计划阶段完成最终的费用预算并形成项目费用基\n线。 \n一个没有经验的项目经理一定要充分借鉴历史版本经验。 \n人力估计后，项目核心团队成员（如软件经理、硬件经理、资料经理、逻辑经理、测\n试经理、QA 等）要对项目人力估计结果一起进行审视，保证估计的准确性。\n定义\n费用估计与预算是指通过分析项目资源需求，估计项目中需要的合作费用、差旅费\n用、物料费用、试验测试费用、培训费用、资料软件费用、雇员费用等；记录估算细\n节与完成项目的备选费用方案，结合公司费用政策，确定项目每个阶段的费用预算，并经项目运作指导团队评审通过后形成项目的费用基线，为项目的费用控制提供依据\n的过程。\n描述\n在项目立项准备阶段启动项目的费用估计与预算，在项目计划阶段完成费用预算并形\n成基线。 \n在进行费用估计与预算时，项目经理需要重点关注项目的业务费用和雇员费用。 \n与其它活动的关系\n过程要素\n关键输入\n项目范围说明书、进度计划、人力资源计划、资源日历、项目人员分工、采购管理计\n划、风险跟踪表、组织过程资产等。\n资源日历\n确定各种资源可用时间的日历，说明项目所需的各种资源何时可用以\n及可用多长时间。从资源日历中获取项目资源的种类、数量和使用时间，可根据\n这些信息确定项目生命周期各阶段的资源费用。\n 组织过程资产\n  历史信息（历史项目与费用管理相关的所有数据、经验教训）。 \n  与费用预算有关的政策、流程和指南。 \n  预算工具、模板。如，专项（物料、资产、合作费等项目涉及的非人力预算部分的内容）预算模板。 \n  可以从公司相关组织/数据库获取资源成本费率及相关信息。\n工具和技术\n  专家判断：通过专家自身的经验进行估算。\n  项目团队内的各个领域专家，如设计、开发、测试、资料、装备、工艺、制造、服务等 \n  组织内其他专家，如相关行业管理部门的专家、公共领域专家等 \n  外部顾问 \n  类比估算\n：按照以往类似项目的实际费用（如人均工资费用、人均差旅费、人均\n折旧与摊销等）为基础，估算当前项目的费用。在估计时，以过去类似项目的实\n际数据为依据来估算当前项目的参数值，同时根据本项目的已知差异进行调整，\n最终得到估算结果。\n  三点估算\n最可能费用（Cm）。对所需相关费用进行比较现实的估算，所得到的项目费用。 \n最乐观费用（Co）。对所需相关费用进行比较乐观（最好的情况）的估算，所得到的项\n目费用。 \n最悲观费用（Cp）。对所需相关费用进行比较悲观（最差的情况）的估算，所得到的项\n目费用。 \nPERT  分析方法对以上三个估算进行加权平均，来计算预期的项目费用： \nCe =（Co+4Cm+Cp） / 6\n关键输出\n项目费用估计：\n费用估计结果应该覆盖项目活动所使用的全部资源，包括员工性\n费用、业务性费用和行政性费用\n估计依据\n  关于估算依据的信息（如项目规模、项目复杂度、项目阶段人力资源、进度计划、人工费率等）\n  关于全部假设条件的信息（如项目后期需求可能增加 5%） \n  关于各种已知制约因素的信息（如公司相关预算政策）\n  对估算区间的说明（例如，“10000  美元/人民币±10%”，就说明了预期成本的所在区间）\n  对最终估算的置信水平或准确度的说明 \n  项目费用预算基线：经项目投资决策团队决策同意的费用预算。 \n关键动作\n直接费用估计\n 间接费用估计\n估计费用汇总\n费用限制平衡\n项目阶段/月度预算汇总\n费用预算基线化\n  费用控制\n在项目的执行过程中，通过监控项目的预算执行情况进行费用控制，\n保证项目实际费用在项目的预算范围内，直到项目关闭。费用控制活动主要集中\n在执行阶段，向前可以延伸到概念与计划阶段，向后可延伸到项目关闭阶段。 \n定义\n费用控制是指在项目执行过程中，监控项目的预算执行情况，例行分析项目中所发生\n的费用，对于异常情况要采取相关措施（如资源调配、外包、物料调拨等）保证项目\n的费用控制在项目的预算范围内，直到项目完成。\n描述\n费用控制应重点分析费用支出与相应完成的实际工作之间的关系。如果费用出现偏\n差，应采取措施，当费用偏差超出可接受的范围，则纳入集成变更控制，只有经过集\n成变更控制，才可以变更预算。\n与其它活动的关系\n过程要素\n项目费用估计、估计依据、项目费用预算基线、项目计划、项目发生费用、物料和非\n生产月度需求计划、组织过程资产等。\n工具与技术\n工时系统（Times-System）\n研发逆向物流管理电子流：\n趋势分析\n关键输出\n项目费用执行情况（报告）、变更请求、项目文件（更新）、组织过程资产（经验教\n训）\n子主题 1\n关键动作\n项目经理对项目的直接费用进行控制，并解决项目费用控制中的问题。项目财务人员\n协助项目经理完成项目费用控制的相关具体工作（偏差分析、趋势分析、费用预测），\n项目其他人员将项目上发生的实际费用正确填写在项目（财务）编码上，保证项目费\n用归集正确。\n雇员费用控制\n 差旅费、合作费、物料和非生产月度需求计划管理\n项目费用状态监控：\n预算变更申请 \n角色和职责\n项目赞助人\n  批准项目预算 \n  批准项目预算的重大变更 \n项目经理：\n  负责项目预算 \n  控制项目费用 \n  当项目费用发生重大变更时，向项目赞助人提出变更申请 \n项目成员（含财务）\n  参与项目预算及相关的准备工作，协助项目经理完成项目预算 \n  报告可预见的预算透支，以及可能的费用节约措施 \n  提供项目费用管理的改进建议 \n风险管理\n定义\n风险管理是指对未知消极事件（可能影响项目的进度、质量、范围等的不确定因素\n等）进行主动应对和管理，降低或者消除消极事件对项目的影响。 \n描述\n风险是指项目中可能发生的某种不确定的事件，该事件一旦发生，会对至少一个项目\n目标造成影响，如范围、进度、成本和质量。 \n项目风险可分为已知风险和未知风险：已知风险是指已经识别并分析过的风险，从而\n可对这些风险规划应对措施。而对于没有识别出来的未知风险，则无法主动进行管\n理，项目团队也应该为未知风险创建应对计划。 \n当风险事件已经发生，就应该当做一个问题来对待。 \n关键活动\n  风险管理规划：主要在项目概念阶段进行。 \n定义\n风险管理规划是指决定如何进行项目风险管理活动的过程。 \n描述\n通过风险管理规划，确定项目过程当中风险管理活动需遵循的规则，并对需要的资源\n和时间进行预算。风险管理规划过程应在制定项目计划过程的早期完成，因为其对项\n目费用、沟通管理等其它计划都有影响。 \n与其它活动的关系 \n过程要素\n需求文件、需求跟踪矩阵、验收标准、项目范围说明书、项目计划、组织过程资产\n等。\n  项目范围说明书\n项目范围说明书应该包含初步确定的风险，并且项目范围说明\n书定义的项目目标、验收准则、假设条件等都是在制定风险管理规划时应该参考\n的因素。\n  项目计划\n风险管理规划是项目计划的组成部分之一，需要满足项目计划的整体\n要求。 \n  组织过程资产\n组织可能设有既定的风险管理方法，如风险分类、概念和术语的\n通用定义、标准模板、角色和职责、决策所需的职权级别。\n工具和技术\n规划分析和评审\n风险管理计划需要项目经理组织相关人员共同制定，参与者可\n包括项目赞助人、项目经理、项目团队成员、其他干系人及相关领域专家。通过\n规划分析，将界定风险管理活动的基本范围，确定风险费用因素和所需的进度计\n划活动，并分别将其纳入项目预算和进度计划中。同时对风险职责进行分配，并\n在一般通用的组织风险类别和词汇定义等模板文件（如风险类别、概率和影响）\n的基础上定制本项目使用的模板文件。这些活动的成果将在风险管理计划中进行\n汇总\n关键输出\n 风险管理计划\n风险管理计划描述如何安排与实施项目风险管理，它是项目计划\n的组成部分。\n  方法论。\n确定实施项目风险管理可使用的方法、工具及数据来源，例如在项\n目过程当中的风险分析主要参考哪些风险库。 \n  风险管理活动定义。\n确定在项目整个生命期中应纳入项目进度计划的风险管\n理活动，例如：SE 需要对项目范围进行分析并识别风险，测试经理需要通过\n分析 FRACAS 中的测试准则来识别风险。 \n  角色与职责。\n确定风险管理团队的成员及风险管理计划中每项活动的责任\n人。为这些角色分配人员并澄清其职责。 \n  预算。\n分配资源，并估算风险管理所需费用，将之纳入项目费用基线。备用\n金、保险费是常见的风险预算。对于研发项目来说，某些重大特性可能会同\n时研究两种方案，待明确之后选择综合评估最优的一种，那么对于被舍弃方\n案的投入，就是项目初期为了规避特性方案风险而预算的。 \n  风险类别。\n需要确定风险分类的原则，以便能系统、持续、一致地进行风险\n识别及分析。常用的风险分类方法有按功能领域（市场、技术、供应等），按\n项目管理涉及的领域（范围、质量、采购等），每一种分类方式都可以逐层分\n解。\n  风险概率定义。\n风险概率指风险发生可能性的大小，可使用概率相对比例，\n例如“高”、“中”、“低”，或者分配某数值表示比例（如 0.1、0.3、0.5、0.7、\n0.9）。需要明确每一种概率的实际含义\n  风险影响的定义。\n风险影响评估旨在调查风险对项目目标（如质量、进度、\n成本）的潜在影响，相对比例主要是按照影响程度排序，例如“高”、“中”、\n“低”，也可通过数字比例为这些影响分配数值。\n  风险优先排序方法。\n根据风险对实现项目目标产生的潜在影响，对风险进行\n优先排序。风险优先排序的典型方法是借用对照表或概率和影响矩阵形式。\n  报告方式。\n风险的状态随着项目的进展会不断发生变化，因此在制定风险应\n对计划时要确定例行的报告方式。需要明确：1、风险管理表的内容和格式，\n以及所需的任何其它风险报告；2、如何对风险管理过程的结果进行例行的记\n录和分析；3、风险报告的发送范围及汇报关系、管理层级。 \n关键动作\n  在项目的概念与计划阶段前期制定风险管理计划，并与项目赞助人进行沟通。 \n  风险管理计划作为项目计划的组成部分，在签署合同时形成基线。 \n  识别风险：主要在项目立项准备阶段和概念阶段进行。 \n定义 \n识别风险是指识别可能影响项目的风险并进行记录，为后续风险的分析和应对做准备\n的过程。 \n描述\n风险识别活动的参与者可包括：项目赞助人、项目经理、项目团队成员、客户（包括\n内部客户，如供应、服务等领域代表）、项目团队之外的领域专家。 \n识别风险是一个需反复进行的活动，因为在项目开发过程中，随着项目的进展，新的\n风险可能产生或被发现。反复的频率以及每一轮的参与者应根据具体情况确定。应鼓\n励所有项目成员参与识别风险过程，以便营造团队成员对风险及其应对措施关注的氛\n围和责任感。 \n与其它活动的关系\n过程要素 \n关键输入\n  项目任务书\n可从项目任务书中了解项目的假设条件，假设条件的不确定性就是\n项目的潜在风险。 \n  WBS\nWBS 是识别风险过程的关键输入，它能直观地看出项目的资源投入、利用\n情况，这有助于发现在资源分配等方面的潜在风险。\n  各项目计划\n项目计划中的项目范围说明书、质量计划、进度计划、产品目标成\n本、费用预算基线是项目的重要组成部分，范围、质量、进度、产品目标成本、\n费用的要求是项目风险的重要方面。\n  项目文件\n通过对项目文件的评审，可以从不符合项处识别可能存在的风险。如\nRDR、TR 评审，关键交付件(如设计方案、原理图、测试报告等)的评审。 \n  干系人信息\n要保证关键干系人（例如维护、技服、制造等下游客户）能以访谈\n或其它方式参与识别风险过程，为识别风险提供输入。 \n  组织过程资产\n  项目档案，包括实际数据，例如 RDM、历史版本的遗留问题等 \n  组织和项目的流程规定 \n  风险描述的模板 \n  经验教训，包括风险库 \n  风险相关的 Checklist \n工具和技术\n  文档审查\n在对项目文档（包括各种计划、DCP 材料和其它信息）进行评审时，\n需要标识出存在的不确定性，这些都可作为风险识别的输入。 \n  信息收集技术\n可用于风险识别的信息收集技术包括：头脑风暴、德尔菲技术、\n访谈、根因分析。\n  检查表\n团队应考虑根据实际情况对检查表进行定制。\n  假设分析\n每个项目和每个已识别的风险都是基于某种假设的，项目中的假设要\n转化为风险跟踪。常见的有对关键技术、处于开发阶段的平台借用和资源冲突等\n方面的假设，这些都需要列入风险管理表进行统一管理。 \n关键输出\n  风险管理表 \n过程要素 \n关键输入\n  项目任务书\n可从项目任务书中了解项目的假设条件，假设条件的不确定性就是\n项目的潜在风险。 \n  WBS\nWBS 是识别风险过程的关键输入，它能直观地看出项目的资源投入、利用\n情况，这有助于发现在资源分配等方面的潜在风险。\n  各项目计划\n项目计划中的项目范围说明书、质量计划、进度计划、产品目标成\n本、费用预算基线是项目的重要组成部分，范围、质量、进度、产品目标成本、\n费用的要求是项目风险的重要方面。\n  项目文件\n通过对项目文件的评审，可以从不符合项处识别可能存在的风险。如\nRDR、TR 评审，关键交付件(如设计方案、原理图、测试报告等)的评审。 \n  干系人信息\n要保证关键干系人（例如维护、技服、制造等下游客户）能以访谈\n或其它方式参与识别风险过程，为识别风险提供输入。 \n  组织过程资产\n  项目档案，包括实际数据，例如 RDM、历史版本的遗留问题等 \n  组织和项目的流程规定 \n  风险描述的模板 \n  经验教训，包括风险库 \n  风险相关的 Checklist \n工具和技术\n  文档审查\n在对项目文档（包括各种计划、DCP 材料和其它信息）进行评审时，\n需要标识出存在的不确定性，这些都可作为风险识别的输入。 \n  信息收集技术\n可用于风险识别的信息收集技术包括：头脑风暴、德尔菲技术、\n访谈、根因分析。\n  检查表\n团队应考虑根据实际情况对检查表进行定制。\n  假设分析\n每个项目和每个已识别的风险都是基于某种假设的，项目中的假设要\n转化为风险跟踪。常见的有对关键技术、处于开发阶段的平台借用和资源冲突等\n方面的假设，这些都需要列入风险管理表进行统一管理。 \n关键输出\n  风险管理表 \n关键动作\n  检索项目档案、经验教训集（包括项目风险库），收集与本项目相关的风险。 \n  对项目概念、计划阶段的输出件进行检查。 \n  根据组织内已有的风险相关的 Checklist 进行检查。 \n  召集项目成员、主要干系人、相关领域专家，采用头脑风暴等方法识别项目风险。 \n  将识别出的风险记录到风险管理表。\n  分析风险：主要在项目概念与计划阶段进行。 \n定义\n分析风险是指评估风险的发生概率和影响，对风险进行优先排序，识别出 TOP 风险\n描述 \n对风险的分析一定不能仅关注单个风险，通过系统的分析，可能在大量单点信息的基\n础上发现某些方面（某些领域、某些时间段等）的共性问题，从而识别出更加重大的\n风险点。 \n与其它活动的关系 \n过程要素\n关键输入\n风险管理表、项目任务书、项目计划、项目范围说明书、WBS、组织过程资产等。 \n工具和技术\n矩阵图、趋势分析等。 \n关键输出\n  风险管理表（更新）\n  风险发生的触发条件、征兆和预警信号。 \n  刷新项目风险的优先级。 \n  进行风险分类。\n  近期就需应对的风险清单。\n  风险分析结果的趋势。\n关键动作\n  对已识别的风险进行概率及影响评估。对于低等级概率和影响的风险，可以暂时不做应对计划（但需要持续监测）。 \n  根据风险概率及影响矩阵进行等级评估。根据风险发生的概率和影响，综合评估风险的等级，可分为高、中、低等风险\n  风险紧迫性评估。从时间维度来看，可以把风险分为近期风险和远期风险，一般来说，近期就需应对的风险会更加紧急。一般在风险分析的时候会考虑时间因素，但需要注意的是某些风险在刚被识别出来时还属于远期风险，随着项目进度的推移，会逐渐紧迫起来，这就要求在风险分析的时候根据时间来刷新风险等级。比较常用的方法有：根据时间排序，或者根据风险所属的项目里程碑阶段分类。 \n  风险趋势分析。随着风险信息的增多，整体上可能呈现出某种趋势，例如某个领域的风险明显比其它领域多，或者某个时间段的风险可能性明显比其它时间段大。对于呈现某种趋势的风险要重点关注。 \n  制定风险应对计划：主要在项目概念与计划阶段进行。 \n定义\n制定风险应对计划是指为减少项目失败威胁而制定应对策略的过程。\n描述\n与其它活动的关系\n过程要素\n关键输入\n风险管理表、项目范围说明书、WBS 等。\n工具和技术\n  规避\n  转移\n  减轻\n  接受\n关键输出\n  风险管理表（更新）\n  风险责任人及其职责 \n  已沟通过的预防措施、应急措施 \n  项目文件（更新）\n关键动作\n  确定具体风险的责任人 \n  与风险责任人共同制定风险应对计划 \n  控制风险：主要在项目执行阶段持续进行。 \n定义\n控制风险是指在整个项目中，跟踪已识别风险，实施风险应对计划、并评估风险应对\n计划的有效性，监测残余风险（在采取风险应对措施之后仍然存在的风险），同时通\n过不断识别、评估新风险，确保风险对项目的影响降到最低。 \n描述\n控制风险可能涉及选择替代策略、实施应对计划、采取纠正措施，以及修订项目计\n划。 \n风险应对责任人应定期向项目经理汇报计划的有效性、未曾预料到的后果，以及为合\n理应对风险所需采取的纠正措施。在控制风险过程中，还应更新组织过程资产（如项\n目经验教训数据库和风险管理模板），以使未来的项目受益。 \n与其它活动的关系 \n过程要素\n关键输入\n工具和技术\n  偏差分析\n  审计\n关键输出\n风险管理表（更新）、变更请求、项目状态报告、项目文件（更新）、组织过程资产\n（更新）等。 \n关键动作\n  例行跟踪和报告 \n  例行识别新的风险并制定新风险的应对计划 \n角色和职责\n项目赞助人\n  明确项目的风险承受程度 \n  批准项目的风险管理计划 \n  和组织内外的干系人就风险情况进行沟通 \n项目经理\n  制定风险管理计划 \n  组织项目成员进行风险识别、分析活动 \n  制定风险应对计划，根据风险的等级分配、落实风险的责任人和资源 \n  控制风险，组织例行的风险检查及通报 \n  与项目赞助人、干系人就风险情况进行沟通，重大风险及时上报、求助 \n风险管理员（可选）\n对于一个项目来说，风险管理的第一责任人是项目经理。根据项目的具体情况，项目\n经理可以设置专门的风险管理员，协助进行风险管理，承担如下全部或部分职责。 \n  组织项目成员进行风险识别、分析活动 \n  组织例行的风险检查及通报 \n  跟踪风险应对计划的执行情况 \n风险行动责任人\n  制定并实施风险的应对计划 \n  协调、落实资源以实施风险应对计划 \n  定期反馈风险的进展或记录风险的相关信息 \n任何人都可能充当风险行动责任人。 \n项目成员\n  在项目经理的安排下参与风险识别、分析活动 \n  在项目进行时识别风险并及时上报 \n人力资源管理\n定义\n人力资源管理是指建立、管理和领导项目团队，确保项目人力资源和团队绩效满足项\n目需求，且团队成员得到成长，达成双赢局面。\n描述\n人力资源管理包括了项目人力资源的规划、获取和释放，以及项目团队的组建、管\n理，既保证项目的成功，同时也促进组织和个人的成长。\n关键活动 \n  规划人力资源：主要在项目立项准备阶段开始，在项目概念阶段完成。 \n定义\n规划人力资源是指项目经理要识别和记录项目人力资源需求、人力资源可获得性（特\n别是稀缺资源、关键资源的可获得性），确定项目组织结构、角色、职责、所需技能和\n汇报关系，并完成项目的人力资源的使用计划和释放计划的制定。 \n描述\n整个项目过程中，有必要不断审视人力资源规划的实施情况，及时调整，必要时需进\n行有效的变更管理。 \n与其它活动的关系\n过程要素\n  项目任务书：有资源使用方面的约束和要求。 \n  组织过程资产：从已有的组织过程资产库中，找出类似的项目的组织结构，作为本项目的组织结构的参考。 \n  活动清单（更新）、活动属性（更新）、里程碑清单（更新）：提供人力资源需求。 \n工具和技术\n组织结构图、角色责任描述等\n关键输出\n  人力资源计划\n作为项目计划的一部分，人力资源计划是关于如何定义、配备、\n管理、控制以及最终遣散项目人力资源的指南。\n  角色和职责。\n  角色 \n  职责和权力 \n  能力要求 \n  项目组织结构图\n  人员配备管理计划\n  资源需求平滑。\n  培训和培养。\n关键动作\n  确定项目组织结构\n  估计项目人力\n  制定人力资源计划\n在制定项目人力资源计划过程中，需要和职能部门主管沟\n通，将项目人力需求和职能部门实际人力供给进行匹配，保证项目人力资源可获\n得。对于项目所需要的特定的知识和技能，项目经理应做好培训、培养计划，对\n于一般的知识和技能不足的项目成员，项目经理应督促职能部门主管做好相应的\n培训、培养。不同组织对于项目特定的知识和技能与一般的知识和技能的界定是\n不同的，例如，外包人员的产品知识往往由项目负责培训，而产品部(PDU)人员的\n产品知识培训往往由职能部门承担。\n  批准人力资源计划\n  组建项目团队：主要在项目概念阶段和项目计划阶段完成项目团队的组建。 \n定义\n组建项目团队是指项目经理根据批准的人力资源需求计划，与职能部门主管（如设\n计、资料、测试、开发、质量等）协商，获取人力资源并组建项目团队。\n描述\n组建项目团队时需要考虑：是否有熟悉该项目涉及的特性的老员工可以协调，新老员\n工的比例是多少对项目的冲击最小，该项目急需的骨干人员何时能够进入到项目团\n队，团队成员是否集中办公等。 \n对应的人力需求计划需要提前和各职能部门主管沟通，并获得对应的人力到位的承\n诺。 \n在组建项目团队过程中，对于关键资源（例如专家、有独特技能者），应该根据他们的\n特点进行任务安排。 \n对于项目团队中的关键技术和关键特性，在组内需要考虑人员的备份，避免在出现突\n发情况（比如离职）时，对项目带来冲击。 \n与其它活动的关系\n过程要素 \n关键输入\n人力资源计划、项目计划、组织过程资产等\n工具和技术\n分派、协商、招聘、外包\n关键输出\n项目人员分工\n关键动作\n  资源获取\n  内部资源的获取\n项目的实际开发涉及到很多不同的职能部门，项目经理按\n照人力资源计划，和职能部门主管就人员的需求和到位情况作进一步确认并\n做好跟踪，当出现异常时需要立即调整，确保人员能够满足开发进度的要\n求。\n  外部资源的获取\n外部资源的获取主要是外部评审专家的协调。对于项目涉\n及的关键技术点和特性，需要提前和对应领域的技术专家协调，以便在项目\n进行到合适的阶段，技术专家能深入项目团队进行技术评审，在关键问题上\n面把握技术方向。 \n  任务分派 \n项目经理在组建团队时需要考虑人员的技能和任务的难易程度，确保人员能够满足所\n负责任务的要求。同时需要和接受任务的人员明确任务的目标和要求，确保能够完成\n项目设定的初始目标。在人员的配置上，不能有所缺失和遗漏，尤其是关键任务。在\n项目团队比较大的情况下，团队内部会划分为不同的小型项目团队，不同的项目团队\n有各自的职责。此时需要将项目团队之间的接口人定义清楚，包括其职责和沟通的方\n式，同时对于团队内部的公共角色也要指派清楚，并且在项目的实际运行过程中不断\n调整，以期整个团队内部能够顺畅地运作。 \n  外包项目管理 \n对于外包项目需要确定双方的接口人，并将界面和交付目标设定清楚。在外包项目的\n实际运作过程中，需要不断监控项目的实际进展，确保能够按时按质交付。 \n  管理团队：主要在项目概念与计划阶段开始，持续到项目发布阶段完成。 \n定义\n管理项目团队是指项目团队组建完毕后，项目经理对项目成员进行辅导，支持和开发\n个人的技能和潜力；同时对团队进行日常管理，跟踪团队成员的表现，认可和激励表\n现好的项目工作，持续营造良好团队氛围，确保团队成员全身心投入和发挥作用；对\n于影响到项目目标的任何项目组织变更，按照集成变更控制规程进行控制等等的各种\n管理活动。 \n描述\n由于项目团队是由技能不同的人或小组构成，要使之成为一个高绩效团队，对项目经\n理的挑战是不言而喻的。项目经理要把对人的关注放在首位，设法向每位项目成员提\n供能充分发挥其才能的工作机会，并给予必要的辅导。最终使得在项目顺利交付的同\n时，项目成员也获得了良好的成长，达成组织和个人之间的双赢。 \n项目经理需要与团队成员一起明确项目目标，以及团队中每个成员的工作目标和任\n务，确保项目团队中每个成员始终围绕一个共同目标开展工作。另一方面项目经理要\n与职能部门主管加强沟通，确保团队成员在定期（半年度/年终）考评时，其所获得的\n绩效评价与他在项目交付中的绩效表现是一致的。 \n项目经理要掌握多方面的管理技能，特别是在沟通、冲突管理、谈判和领导力等方面\n的技能，以培养团队协作精神、整合团队成员的工作。 \n与其它活动的关系 \n过程要素 \n关键输入\n  项目人员分工\n一般在任命文件中体现，包括该项目涉及的所有人员、每个人员\n负责的领域和职责、项目团队运作的方式、项目团队的汇报机制以及项目存在的\n周期。该项目的任命文件以正式签发为准。 \n  组织过程资产\n影响管理项目团队的组织过程资产包括公司任职资格制度，职能\n部门的考核方式等。 \n工具和技术\n关键输出\n项目组织结构（更新）、人员变更请求、绩效评估（团队成员绩效评估结果）、人员能\n力提升、组织过程资产（人力资源管理）等。 \n关键动作\n  明确目标\n通过各种方式明确团队目标和核心价值，激励团队成员为之奋斗。例\n如，对于一个新项目，团队的角色职责往往不是非常清晰，可以组织研讨会进行\n研讨，通过讨论达成共识，保证上下对齐。 \n  组织结构优化\n根据项目的实际进展情况和人员的变化调整，及时优化项目组织\n结构，使得项目组织运作流畅，确保高绩效和及时交付。导致组织结构需要优化\n的因素有很多，比如职能部门组织结构的调整，临时的重大项目的支持等都会导\n致项目的组织结构调整。 \n  有效沟通\n项目经理通过定期或者不定期的沟通交流，随时了解项目团队成员的\n态度、工作内容、进展和困难。项目经理可以通过例会或者私下非正式的交流获\n取项目的进展和问题，包括团队成员之间的矛盾，解决人际交往的问题，并通过\n有效的方式进行跟踪。比如建立团队例行会议制度，明确例会召开时间、地点、\n主要议题、形式，进行正式的例行沟通。设立咖啡时间，定期与员工进行沟通，\n通过非工作场合了解团队成员的想法，进行思想交流。 \n  能力提升\n对于与项目相关的能力提升，项目经理应该按人力资源计划中的安排\n来实施预定的培训，应该根据项目团队管理过程中的观察、讨论和项目绩效评估\n结果，来开展必要的培训。关注每个员工的成长，并给予针对性的培养和指导，\n可以采用全员导师制的方式。 \n  团队建设\n组织气氛的建设是建设团队的重要方法，也是不断提升组织绩效的辅\n助手段。氛围营造的手段包括集体活动，新老员工的互助等。团队建设不能为了\n建设而建设，最有效的方法还是通过日常的实际业务，团队 leader 身体力行地参\n与到实际业务工作中，才能真正将团队整合起来，并带领团队共同完成目标。 \n  激励\n多正向激励，表扬和奖励一定要做到及时、公开。只有能满足被奖励者的\n某个重要需求的奖励，才是有效的奖励，才能起到激励作用。同时，对于完成质\n量较差的情况要合理的惩罚，明确改进的方向。 \n  项目成员绩效评估和反馈\n在项目过程中进行绩效评估的目的包括澄清或调整角\n色与职责，向团队成员提供建设性反馈，发现未知或待裁决问题，以及确立未来\n各时期的具体目标。\n  冲突管理\n在项目过程中，始终伴随着冲突的发生，项目管理团队需要及时着手\n解决冲突，并提前发现未来可能预见的冲突，做出合理的决策和行动计划。冲突\n的来源包括组织内部关键资源的缺乏、多任务的排序和个人工作习惯或风格的差\n异等。冲突管理可以提高团队内部的创造力，或者促使做出更好的决策。如果冲\n突带来的负面影响太大，或者有升级的趋势时，项目经理需要立即采取措施或者\n向上级主管求助，化解冲突。 \n  人力资源释放评估\n根据项目执行情况，在相关的人力资源释放前，需要评估涉\n及的工作是否已经完成，当产品存在重大遗留问题需要解决时，人员往往无法按\n照计划释放，这种情况下，需要提交人力资源变更请求，进行变更管理。 \n  释放人力资源：主要在项目开发阶段后期开始涉及释放人力资源，直至发布阶段\n定义\n释放人力资源是指在达成项目目标的前提下，按照人力资源计划，要逐步把人力有序\n的输出到其它组织或团队中，保证整个组织的人力资源使用的有序性和效益最大化。\n描述\n从项目概念、计划到开发阶段，是项目人力不断增加直至高峰的时期。随着项目逐渐\n进入到开发阶段后期，项目对人力的需求就不断下降，开始释放人力资源。 \n人力的释放对于现有的组织结构可能会有影响，在项目的后期由于人员的变化，组织\n结构以及组织中的角色和职责也会有所调整。项目经理需要按照项目的实际运行情\n况，做出合理的安排，并及时通告给对应的利益干系人。 \n与其它活动的关系 \n过程要素\n关键输入\n人力资源计划、项目组织结构（更新）、项目计划、项目状态报告等。\n工具和技术\n  人力管道会议：梳理多项目人力资源布局、安排、调整等的会议。\n关键输出\n释放的人力、绩效评估\n关键动作\n  有效沟通\n首先要和被释\n放人员所属的项目小组责任人沟通，确认人力释放的影响。然后还要和职能部门\n主管沟通并达成一致。最后与被释放的项目团队成员达成一致，明确该成员释放\n时间。\n  绩效评估\n项目经理对被释放人员的工作绩效给出合理评估，包括该人员在项目\n交付中表现出的业务技能、工作态度、关键事件等等，这些将做为职能部门组织\n定期绩效考核（半年度/年度）时的输入之一。 \n角色和职责\n赞助人\n  批准项目的人力资源计划 \n  协调跨团队的人力资源 \n项目经理\n  创建项目团队目录（项目管理层、团队成员以及其他利益干系人等信息） \n  与职能部门主管协商并获取最适合项目的资源 \n  整理出为完成项目工作，团队成员需要参加的各项培训，并付诸实施 \n  记录团队成员的绩效表现并及时反馈给职能部门主管 \n  建立并维护与职能部门主管以及其他利益干系人之间的沟通渠道，定期沟通 \n职能部门主管\n  按照项目计划协调合适的人员加入项目团队 \n  部门关键技术的积累，对项目团队成员提供技术支撑 \n  参考项目经理对项目成员的绩效表现评价，对项目成员进行绩效管理 \n采购管理\n定义\n采购管理是指从项目组织之外获取产品、服务及其它资源，确保在需要时，项目可以\n得到相应的产品、交付和服务。 \n描述\n项目采购包括项目开发过程中对外部成熟产品的采购，以及根据项目需求定制的新产\n品的采购，也包括在公司内部对其它产品、平台、组件、工具等的采购。合作（包括\n技术合作、外包等）、获取组织外的培训、咨询等服务也属于采购的范畴。\n  降低成本\n  聚焦核心业务\n  获得专门的技能和技术\n  提高灵活性\n  明确责任，降低风险\n关键活动 \n  规划采购：主要在项目概念阶段和计划阶段进行。 \n定义\n规划采购是指确定需要采购哪些符合项目要求的产品、服务和其它资源，并明确采购\n策略，识别潜在供应商（包括公司内部的）的过程。\n描述 \n在规划采购中，需要识别哪些项目需求最好（或必须）通过从项目组织外部采购产\n品、服务或其它资源来实现，还要决定采购什么、如何采购、采购多少，以及何时采\n购。 \n项目进度计划对规划采购过程中的采购策略制定有重要影响，相反，在编制采购管理\n计划过程中所做出的决定也会影响项目进度计划。应该把采购管理计划编制工作与制\n定进度计划、估算活动资源和自制或外购决策等整合起来。 \n与其它活动的关系\n过程要素 \n关键输入\n  需求文件：包括与规划采购有关的、关于项目需求的重要信息。 \n  风险管理表：与规划采购相关的已识别的风险、风险责任人和风险应对措施。 \n  项目进度计划：包括有关时间表或强制交付日期的信息。 \n  产品 E2E 目标成本报告：可用于评价潜在供应商提交的投标书或建议书的合理\n性。 \n  市场条件：包括供应商信息获取和商业折扣的提供程度以及遵照的条款。\n工具和技术\n自制或外购分析、专家判断\n有时，虽然项目组织内部具备相应的能力，但由于公司战略、资源、成本、进度等因\n素，也需要从组织外部进行采购。 \n自制或外购分析应考虑全部相关成本，包括直接成本与间接成本。例如，项目团队在\n分析外购时，既要考虑购买产品本身的实际支出，也要考虑为支持采购过程和维护该\n产品所发生的间接成本。在华为公司，通常考虑批量采购的形式，以降低成本。 \n关键输出\n  采购管理计划：描述如何管理从分析采购需求到合同收尾的各个采购过程，是项目计划的子计划。 \n  采购工作说明书（SOW）：描述采购所要求完成的工作，以便使潜在供应商决定能否提供所需的产品和服务，并确定一个适当的价格。 \n  采购文件：用于征求潜在供应商的建议书，如信息邀请书（RFI）、建议邀请书（RFP）等。 \n关键动作\n  制定项目采购管理计划。对于技术合作或产品合作，制定合作计划。 \n  根据产品包需求，进行自制或外购的权衡分析，确定采购需求。 \n  启动新供应商认证流程，一般由采购代表或合作经理主导完成。 \n  对于研发物料/器件采购，确定是否需要 Sourcing Team，制定初始供应商和物料选择计划，对于长货期的物料，做出提前采购的决策，一般由采购代表主导完成。 \n  实施采购：主要在项目执行阶段进行。 \n定义\n实施采购是指从向供应商询价（或发 RFI）、收集潜在供应商的建议，并与选定的供应\n商签订合同的过程。 \n描述 \n对于大宗采购，可以反复进行寻求供应商应答和对应答进行评价。可根据初步建议书\n列出的一份合格卖方的短名单，随后再对他们所提交的更具体和全面的文件进行更详\n细的评价。 \n研发物料/器件的采购，由采购代表负责实施采购。 \n对于技术合作、产品合作，由公司指定部门负责组织实施采购，研发重点参与采购实\n施过程中与技术相关的部分。 \n与其它活动的关系\n过程要素 \n关键输入\n采购管理计划、采购工作说明书、采购文件、项目计划、产品目标成本、供应商建议\n书、组织过程资产、供应商选择标准、合格供应商清单等。\n  供应商选择标准：包括供应商能力、交付日期、产品成本、生命周期成本、技术专长以及拟使用的方法等。\n  合格供应商清单：根据供应商资质及其以往经验，而预先筛选出来的供应商名单，以便只向那些能够履行未来合同的供应商进行采购。 \n  供应商建议书：供应商为响应采购文件包而编制的建议书，是一套基本的信息组合。评价小组对其进行评价，来选择一个或多个供应商。\n工具和技术\n  投标人会议：投标书或建议书提交之前，在项目团队和所有潜在供应商之间召开的会议。目的是保证所有潜在供应商对本项采购都有清楚且一致的理解，保证没有任何投标人会得到特殊优待。 \n  建议书评价技术：对于复杂的采购，例如要基于供应商对既定加权标准的响应情况来选择供应商，则应该根据项目团队的采购政策，规定一个正式的建议书评审流程。 \n  独立估算：采购组织自行或邀请外部专业估算师做出成本估算，并将此作为标杆，用来与潜在供应商的应答作比较。 \n  专家判断：组建一个多学科评审团队对建议书进行评价。团队中应包括采购文件和相应合同所涉及的全部领域的专家，否则会影响最终评判的全面性。 \n  因特网搜索：快速找到很多商品、零配件以及其它现货，并以固定价格定购。这种方法不适用于风险高、复杂程度高、必须严密监督的采购工作。 \n  采购谈判：合同签署之前，对合同的结构、要求以及其它条款加以澄清，以取得一致意见。 \n关键输出\n选定的供应商、采购合同、变更请求、项目文件（更新）等。 \n关键动作\n  供应商建议书评审：项目团队提供技术方面的支持。 \n  采购谈判：项目经理和项目管理团队的其他人员可以出席谈判会议，以便提供技\n术支持，必要时澄清项目的技术、质量和管理要求。 \n  合同签署：由具有合同签署权利的部门完成。 \n  更新采购管理计划或合作计划。 \n  管理供应商合同：主要在项目执行阶段进行。 \n定义\n供应商合同管理是指管理与供应商的关系，监控供应商的绩效，并采取必要的变更和\n纠正措施的过程，确保供应商的交付满足合同要求，并在合同变更时满足项目需求。 \n描述 \n与其它活动的关系\n过程要素 \n关键输入\n  供应商状态报告：包括按照合同规定，由供应商编制的技术文件和其它文件，以及供应商绩效报告，显示哪些可交付成果已经完成，哪些还没有完成。 \n  批准的变更请求：包括对合同条款和条件的修改。在把变更付诸实施前，应该以书面形式正式记录变更并取得正式批准。 \n  项目状态报告：在项目执行过程中收集，包括满足质量要求的程度、已发生或已承诺的成本等。 \n工具和技术\n  合同变更控制系统：规定了修改合同的流程。 \n  采购绩效审查：依据合同来审查供应商在规定的成本和进度内完成项目范围和达到质量要求的情况，如技术合作项目的阶段验收。 \n  检查和审计：由项目团队开展的相关的检查和审计，供应商应对此提供支持。\n  索赔管理：通常应该按照合同规定对索赔进行记录、处理、监督和管理，如合同双方无法自行解决索赔问题，则需要按照合同中规定的替代争议解决程序进行处理。谈判是解决所有索赔和争议的首选方法。 \n关键输出\n采购管理文档、变更请求、项目文件（更新）、组织过程资产（更新）等。 \n关键动作\n  项目监控\n  阶段验收\n  合同变更管理\n  供应商关系管理\n  供应商合同收尾：主要在项目关闭阶段进行。 \n定义\n供应商合同收尾是指按照合同要求接收供应商的交付，并解决合同中不满足的条款。 \n描述 \n合同提前终止是结束采购的一个特例。合同可由双方协商一致而提前终止，或因一方\n违约而提前终止，或者因满足对项目团队有利的条款而提前终止。合同终止条款规定\n了双方对提前终止合同的权利和责任。根据这些条款，项目团队可能有权因各种原因\n而随时终止整个合同或合同的某个部分。但是，根据这些条款，项目团队应该就供应\n商为该合同或该部分所做的准备工作给予补偿，并就该合同或该部分中已经完成且经\n过验收的工作支付报酬。 \n与其它活动的关系\n过程要素 \n关键输入\n项目计划、采购管理计划、采购管理文档（包括合同、变更请求等）等等。 \n工具和技术\n审计、协商解决/调解/仲裁/诉讼等。\n  协商解决/调解/仲裁/诉讼：在每个采购关系中，通过谈判公正地解决全部未决事\n项、索赔和争议，都是一个重要的目标。如果通过直接谈判无法解决，则可以尝\n试替代争议解决方法，如调解或仲裁。如果所有方法都失败了，就只能选择向法\n院起诉这种最不可取的方法。 \n关键输出\n验收报告、组织过程资产（更新）等。 \n  验收报告：项目团队（通常由其授权的采购管理员）向供应商发出关于合同已经\n完成的正式书面通知。对正式采购收尾的要求，通常已在合同条款和条件中定\n义，并包括在采购管理计划中。 \n关键动作\n  项目验收：验证项目所有工作是否被正确地、令人满意的完成。 \n  处理未决索赔、更新相关记录、以及合同存档等工作。 \n角色和职责\n项目赞助人\n  批准采购策略 \n  批准采购管理计划 \n  在建立与供应商关系方面给予项目经理适当的授权 \n  确保项目有渠道找到具备与供应商签署合同权力的人 \n项目经理\n  向项目赞助人提供采购策略的建议 \n  参与实施采购策略 \n  制定采购管理计划 \n  参与和供应商的谈判 \n  对于技术合作和产品合作，发展并维持与合作伙伴的关系，如定期沟通等 \n项目成员\n  对于技术合作和产品合作，发展和改善与合作伙伴人员的关系 \n合作经理（可选）\n  辅助项目经理支撑合作项目采购相关工作 \n采购代表（适用于研发物料/器件采购）\n  实施采购策略 \n  协调采购资源，就采购的结果与内外供应商谈判 \n  跟踪采购风险，确保项目获得必要的产品、服务或其它资源 \n工具\n PPM 多项目管理工具 \nICP JIRA 项目管理工具 \nMicrosoft Office Project 项目管理工具 \n模板\n项目任务书模板 \n  商业背景：描述项目的总体目标，项目交付的定位，以及价值客户、收益预算、竞争者等市场信息。 \n  项目范围：描述项目的期望结果、时间限制、费用限制。 \n  项目组织：描述项目组织中的角色、职责和权力。 \n  报告机制：描述与赞助人、客户、依赖项目、子项目、供应商的沟通和接口方式。 \n  项目验收方式。 \n  信息安全措施。 \n  限制、约束条件。 \n  知识产权方面的限制和机会。\n项目计划模板 \n  项目目标：项目目标包括限定时间、估计成本和项目输出的总体描述。 \n  总体策略：描述项目必须遵守的公司策略，以及项目依据公司策略、过去经验和风险分析结果而制定的项目策略。 \n  约束条件：描述项目必须考虑的所有约束条件。 \n  客户信息：描述客户方的责任人，以及客户的期望和承诺。在某些项目中，如果外部客户责任人不能确定，可以从最能代表客户的部门中确定责任人。 \n  与其它项目的接口关系：描述本项目与其它项目的接口关系，确保依赖关系体现在项目进度计划中。 \n  项目干系人：描述项目干系人，如客户、最终用户、合作伙伴、供应商、组织中受影响方和其它项目。 \n  项目价值：描述项目的目的，对客户、组织自身、其它利益干系人的价值机会点，以及知识产权方面的限制和机会。 \n  项目范围：描述项目的交付、质量目标、组织内部要求。\n  项目质量计划：描述项目需要使用的过程及裁剪，包括质量保证规程、配置管理规程、质量验证方法、验收规程等信息。 \n  项目采购：描述采购策略、采购项和供应商，以及子合同管理的方法。 \n  项目进度：描述项目里程碑及关键活动，以及详细计划开发策略。 \n  项目预算：描述项目预算和报告机制。 \n  项目组织：描述项目的组织，及各成员的角色、职责和权力。 \n  项目风险管理：描述项目的风险，以及规避和应急计划。 \n  项目沟通计划：描述对内、对外沟通策略，以及报告机制。 \n  项目移交和关闭：描述项目交付的验收过程和验收准则，以及项目经验、文档归档、项目关闭的方法。 \n项目状态报告模板\n  项目状态：用图形或表格显示出项目的总体状态，报告项目的范围、质量、进度、成本目标的达成情况，对于严重的偏差给予说明及纠偏措施。 \n  风险管理：呈现最新的风险列表，包括风险描述、状态、优先级、影响、责任人、规避和应急计划等。 \n  变更控制：说明项目中的变更及其状态，以及需要项目赞助人或项目运作指导团队采取的行动。 \n项目总结报告模板 \n  项目阐述：描述项目的重要信息，包括项目目的、项目目标、重大变更、开发模式、项目组织、关键利益干系人等。 \n  项目价值：对照项目计划，描述项目价值实现情况，以及偏差说明。 \n  项目结果：对照项目计划，描述项目交付、质量、进度、成本等方面的目标完成情况，以及偏差说明。 \n  经验教训：总结项目过程中经验和教训，并对绩效优秀的团队和个人表示感谢。 \n术语\n项目文化\n浮动主题\n",
  "lastModified" : 1764658803459
}, {
  "filePath" : "Web预览系统产品设计.md",
  "fileName" : "Web预览系统产品设计.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "Web预览系统产品设计.md",
  "contentText" : "# 文档TOON结构生成与Web预览系统 - 统一产品设计文档（DDD + Spring Cloud + React）\r\n\r\n作者：伍志勇\r\n日期（北京时间）：2025-11-24 16:34:42\r\n版本：v1.0\r\n\r\n## 1. 产品概述\r\n\r\n- 目标：展示指定目录（示例 `/home/agentic/hkt-knowledge`）的全部子目录与文档清单；生成并持久化索引TOON数据到本地 `data/` 目录（不使用PostgreSQL）；左侧树展示结构，右侧预览文档内容。\r\n- 范围：完整枚举目录与文件（支持中文名与Linux路径）；文件预览支持 `.md/.docx/.pdf/.csv/.svg`。\r\n- 核心特性：索引TOON（`files` 块）生成与读取、树状展示、类型识别与预览、缓存与治理。\r\n- 场景：内部/公开文档库的轻量化展示与快速检索。\r\n\r\n## 2. 统一语言与术语（Ubiquitous Language）\r\n\r\n- 目录（Directory/Folder）：以`dirPath/dirName`表示的层级节点\r\n- 文档（Document/File）：以`filePath/fileName/fileType`表示的文件实体\r\n- TOON（面向词元的对象表示法）：结构化块表示，含`fields/data/toonString`\r\n- 预览（Preview）：以`PreviewContent`呈现的可视内容（HTML/PDF/SVG）\r\n\r\n## 3. 领域驱动设计（DDD）\r\n\r\n### 3.1 用户旅程工作坊（User Journey Mapping）\r\n\r\n- 输出：用户旅程图、痛点/机会点、角色与场景列表\r\n\r\n#### 3.1.1 角色（Persona）\r\n\r\n- 访客：浏览与预览文档，不进行上传/下载。\r\n- 管理员：触发重扫、查看状态、清理缓存，保障索引与预览稳定。\r\n\r\n#### 3.1.2 旅程阶段（Stages）\r\n\r\n- 进入应用 → 加载索引（`index.toon/json`） → 浏览树（展开/折叠） → 筛选与定位（关键字/类型过滤） → 点击文档 → 预览渲染（md/docx/pdf/csv/svg） → 错误与降级提示 → 管理操作（重扫/状态/清缓存）。\r\n\r\n#### 3.1.3 痛点与机会点（Pain & Opportunities）\r\n\r\n- 痛点：\r\n  - 大目录加载与渲染性能瓶颈（滚动卡顿、一次性渲染过多节点）。\r\n  - 多语言路径与中文字符的兼容性问题（编码与规范化）。\r\n  - 部分格式解析失败或不支持（例如复杂DOCX或超大PDF）。\r\n  - 索引刷新后前端状态一致性（缓存失效与ETag协同）。\r\n- 机会：\r\n  - 采用TOON高效索引与分页分块，减少传输体积与渲染压力。\r\n  - 树懒加载与虚拟滚动、按需加载预览器，显著提升体验。\r\n  - 统一错误与降级策略，保证“可视化回退”与操作指引。\r\n  - 管理接口支持重扫与状态观察，形成闭环运维能力。\r\n\r\n#### 3.1.4 场景清单（Scenarios）\r\n\r\n- 场景1：首次进入应用 → 自动加载`index.toon` → 左侧树显示根目录与首层节点。\r\n- 场景2：展开目录节点 → 按需请求下一层数据 → 渲染子目录与文档列表。\r\n- 场景3：关键字筛选 → 过滤`name/path`，高亮命中项 → 清空筛选恢复。\r\n- 场景4：点击`.md`文档 → 前端`marked`渲染 → 支持标题目录与代码高亮。\r\n- 场景5：点击`.pdf`文档 → 后端流式返回 → 前端`pdfjs`分页渲染与缩放。\r\n- 场景6：点击`.docx`文档 → 根据决策矩阵选择前端`mammoth`或后端POI → 输出HTML预览。\r\n- 场景7：点击`.csv`文档 → `papaparse`解析 → 表格排序与列宽调整。\r\n- 场景8：点击`.svg`文档 → 直接嵌入`<svg>` → 安全过滤可疑脚本。\r\n- 场景9：预览失败（解析或资源限制） → 显示降级内容或错误页 → 提供“查看原始TOON”。\r\n- 场景10：管理员在状态页触发重扫 → `data/index.toon`更新时间刷新 → 前端树自动刷新或提示手动刷新。\r\n\r\n### 3.2 事件风暴（Event Storming）摘要\r\n\r\n- 业务目标：从指定根目录快速构建可浏览的索引TOON，并按需预览文档。\r\n- 关键事件（Domain Events）：\r\n  - `IndexRequested`（用户/系统发起索引请求）\r\n  - `DirectoryScanned`（目录被遍历完成，发现条目）\r\n  - `ItemEnumerated`（发现目录/文件条目）\r\n  - `IndexPersisted`（索引TOON写入 `data/index.toon` 完成）\r\n  - `IndexLoaded`（前端/API读取索引TOON或JSON派生）\r\n  - `PreviewRequested`（预览请求到达）\r\n  - `PreviewRendered`（预览成功生成）\r\n  - `PreviewFailed`（预览失败，触发降级与错误事件）\r\n  - `RescanTriggered`（运维或配置变更触发重扫）\r\n  - `CacheInvalidated`（扫描变更导致缓存失效）\r\n- 命令（Commands）：`TriggerScan`、`PersistIndex`、`LoadIndex`、`RenderPreview`、`InvalidateCache`、`TriggerRescan`。\r\n- 聚合与读模型：\r\n  - 聚合：`DocumentRepository`（统一维护文件与目录条目、元数据）\r\n  - 读模型：`FilesIndex`（TOON/JSON）、`DirectoryTree`（派生树）、`PreviewContent`\r\n- 策略/规则（Policies）：\r\n  - 配置变更 → 触发 `TriggerRescan`\r\n  - 扫描完成 → `PersistIndex` → 通知前端刷新\r\n  - 预览失败 → 生成降级TOON块或错误响应\r\n- 外部系统：文件系统（Linux）、Redis（缓存）、Config Server（配置）、Nginx（入口）、Prometheus/Grafana（监控）。\r\n- 端到端路径（示例）：\r\n  - 用户打开页面 → `IndexRequested` → 后端`TriggerScan`（或直接`IndexLoaded`）→ 生成并`PersistIndex` → 前端树加载 → 用户点击文件 → `PreviewRequested` → `RenderPreview` → 展示或降级。\r\n\r\n#### 3.2.1 DDD 完整链路图（Mermaid）\r\n\r\n- 迁移说明：该图已移至“附录 E. DDD 完整链路图（Mermaid）”。\r\n\r\n### 3.3 划分限界上下文（Context Slicing）\r\n\r\n- 规则：语言边界、业务一致性、团队边界\r\n- 输出：限界上下文图（Context Map）\r\n\r\n#### 3.3.1 上下文清单（Bounded Contexts）\r\n\r\n- 文档（Document）：负责文档实体、目录树读模型与TOON结构的对外暴露。\r\n- 扫描（Scan）：负责遍历与索引生成、持久化`data/index.toon/index.json`。\r\n- 预览（Preview）：负责类型适配与内容生成（HTML/PDF/SVG）。\r\n- 网关（Gateway）：统一入口、CORS、限流、错误映射与内容协商。\r\n\r\n#### 3.3.2 边界描述（Boundary）\r\n\r\n- Document：\r\n  - 输入：来自Scan的索引、来自Preview的渲染请求。\r\n  - 输出：`DirectoryTree`、`FilesIndex`、`TOONStructure`。\r\n  - 自有模型：`Document`、`FileMetadata`、`TOONStructure`、`DirectoryTree`。\r\n  - 非功能：读取`data`目录只读；缓存命中直接返回；统一错误结构。\r\n- Scan：\r\n  - 输入：配置根目录（Config Server）、重扫命令（Admin）。\r\n  - 输出：`index.toon`与`index.json`、`metadata`更新时间。\r\n  - 自有模型：扫描任务、黑白名单、符号链接校验策略。\r\n  - 非功能：文件系统I/O与并发控制、去重与原子写入、指标监控。\r\n- Preview：\r\n  - 输入：`filePath`与类型参数。\r\n  - 输出：`PreviewContent`（HTML/PDF/SVG）。\r\n  - 自有模型：解析适配器、降级策略、资源限制（线程/内存/超时）。\r\n  - 非功能：安全过滤、内容类型协商、HTTP Range支持。\r\n- Gateway：\r\n  - 输入：前端请求。\r\n  - 输出：路由到各BC、统一错误映射、`ETag/Last-Modified`处理。\r\n  - 自有模型：CORS白名单、限流令牌桶、受支持`Accept`集合。\r\n  - 非功能：日志与审计、告警与熔断策略（可选）。\r\n\r\n#### 3.3.3 防腐层与契约（ACL & Contract）\r\n\r\n- Preview对复杂库（PDFBox/POI）设置适配接口，隔离库细节，返回统一`PreviewContent`。\r\n- Gateway对外统一MIME与错误结构；`Accept: application/x-toon`直通TOON契约；`application/json`返回结构化对象。\r\n- Document与Scan之间采用`index.toon/json`文件契约；更新时间通过`metadata.last_updated`传递。\r\n\r\n#### 3.3.4 团队边界\r\n\r\n- Scan与Preview可由后端团队维护；Document由后端与前端共同维护读模型；Gateway由平台/架构组维护。\r\n\r\n### 3.4 上下文映射（Context Mapping）\r\n\r\n- 模式：合作关系、共享内核、客户-供应商、防腐层ACL、开放主机服务\r\n- 输出：上下文映射图\r\n\r\n#### 3.4.1 关系矩阵（Relationship Matrix）\r\n\r\n- Document ↔ Scan：客户-供应商（Customer–Supplier）。Document消费Scan产出的索引；Scan遵循约定的TOON契约与更新时间规则。\r\n- Document ↔ Preview：开放主机服务（Open Host Service）。Document发起`RenderPreview`调用，Preview暴露统一接口与MIME；失败时返回统一错误结构。\r\n- Gateway ↔ 各BC：开放主机服务 + 防腐层（ACL）。Gateway只曝光稳定契约与错误映射；对内部对象进行DTO转换。\r\n\r\n#### 3.4.2 协作模式说明\r\n\r\n- Published Language：跨上下文统一采用`TOONStructure/PreviewContent/DirectoryTree/FilesIndex`术语与字段命名，避免翻译歧义。\r\n- Anti-Corruption Layer：Preview内部适配第三方解析库；Gateway对外统一MIME与错误；Document保持读模型纯净。\r\n- Shared Kernel（谨慎）：仅在通用工具层共享TOON校验器与时间/路径规范工具，业务模型不共享。\r\n\r\n#### 3.4.3 故障与降级路径\r\n\r\n- Scan失败：保留最近一次`index.toon`并标注`metadata`为旧时间；前端提示“索引可能不是最新”。\r\n- Preview失败：返回降级TOON或错误；前端提供“查看原始TOON”与“稍后重试”。\r\n- Gateway限流：返回429与`Retry-After`，避免雪崩；记录`traceId`与指标。\r\n\r\n#### 3.4.4 一致性与刷新\r\n\r\n- 索引刷新：`IndexPersisted`事件广播（可选）或前端轮询`last_updated`；命中ETag返回304。\r\n- 读写分离：Scan写`data/*`，Document读`data/*`；通过文件锁或原子替换保证一致性。\r\n\r\n### 3.5 建立通用语言（Ubiquitous Language）\r\n\r\n- 指引：术语统一见第2章；代码词汇表见第27章\r\n\r\n#### 3.5.1 角色词汇表\r\n\r\n- 访客（Visitor）：浏览索引、查看预览、不进行写操作。\r\n- 管理员（Admin）：触发重扫、查看运行状态、清理缓存。\r\n\r\n#### 3.5.2 场景词汇表\r\n\r\n- 浏览索引：加载`index.toon/json`并渲染树。\r\n- 展开节点：获取指定目录的子项并渲染。\r\n- 筛选搜索：按`name/path`过滤并高亮命中。\r\n- 预览渲染：根据`fileType`选择适配器生成`PreviewContent`。\r\n- 错误降级：当解析失败时渲染降级内容或错误页。\r\n- 管理重扫：管理员触发重新扫描根目录或子树。\r\n\r\n#### 3.5.3 示例用语（Examples）\r\n\r\n- 作为访客，我希望能快速加载文档树并展开我关心的目录。\r\n- 作为访客，当我点击文档时，系统应返回对应的预览内容或清晰的错误提示。\r\n- 作为管理员，我希望在索引过期或结构变化时，能够一键触发重扫并查看最新更新时间。\r\n\r\n#### 3.5.4 代码词汇一致性\r\n\r\n- 接口与模型统一使用：`filePath/fileName/fileType`、`TOONStructure`、`PreviewContent`、`DirectoryTree`、`FilesIndex`。\r\n- 错误统一：`ErrorResponse{code,message,traceId,details}`；日志包含`traceId`便于定位。\r\n\r\n### 3.6 战术设计（Tactical Modeling）\r\n\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 待补充：战术模型图与类图（ToDo）\r\n\r\n#### 3.6.1 核心领域与聚合\r\n\r\n- 聚合根：`DocumentRepository`，负责文档实体生命周期管理（创建、查询、更新、删除）。\r\n- 上下文划分：\r\n  - 文档领域（核心）：文档实体、TOON结构、文件元数据。\r\n  - 扫描领域：扫描任务与结果，目录遍历与目标格式识别。\r\n  - 预览领域：预览内容生成与格式适配。\r\n\r\n#### 3.6.2 实体与值对象\r\n\r\n- 实体 `Document`（唯一标识 `filePath`）：\r\n  - 属性：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure`（懒加载）、`previewContent`（懒加载）。\r\n- 值对象：\r\n  - `FileMetadata`：`fileSize`、`lastModifiedTime`、`charset`（默认UTF-8）。\r\n  - `TOONStructure`：`rootNode`、`elementCount`、`fields`（List<String>）、`data`（List<Map<String,Object>>）、`toonString`（标准TOON字符串）。\r\n  - `PreviewContent`：`contentType`（text/html、application/pdf、image/svg+xml 等）、`content`（HTML字符串/二进制流/SVG文本）、`supportFullPreview`（boolean）。\r\n  - `DirectoryTree`：`dirPath`、`dirName`、`subDirs`（List<DirectoryTree>）、`documents`（List<DocumentSummary>）。\r\n  - `DocumentSummary`：`filePath`、`fileName`、`fileType`、`fileSize`。\r\n\r\n#### 3.6.3 领域服务\r\n\r\n- `ScanService`：遍历根目录与子目录，识别目标格式、生成 `FileMetadata`，更新仓库。\r\n- `TOONGenerationService`：按文档格式提取结构化数据并生成 `TOONStructure`。\r\n- `PreviewService`：将文档转换为Web可展示的 `PreviewContent`（HTML/PDF/SVG）。\r\n\r\n#### 3.6.4 领域事件\r\n\r\n- 事件（可选）：`DocumentScannedEvent`（扫描完成）、`PreviewRequestedEvent`（预览请求）。\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 参考：3.2 实体与值对象；3.3 领域服务\r\n\r\n#### 3.6.5 战术模型图与类图（文本草案）\r\n\r\n- 实体与值对象：\r\n  - `Document`（Entity）：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure?`、`previewContent?`\r\n  - `FileMetadata`（ValueObject）：`fileSize`、`lastModifiedTime`、`charset`\r\n  - `TOONStructure`（ValueObject）：`rootNode`、`elementCount`、`fields: List<String>`、`data: List<Map<String,Object>>`、`toonString`\r\n  - `PreviewContent`（ValueObject）：`contentType`、`content`、`supportFullPreview`\r\n  - `DirectoryTree`（ValueObject）：`dirPath`、`dirName`、`subDirs: List<DirectoryTree>`、`documents: List<DocumentSummary>`\r\n- 仓储（Repository）：\r\n  - `DocumentRepository`：`findByPath(filePath)`、`save(document)`、`listByDir(dirPath)`、`updateMetadata(filePath, metadata)`\r\n- 领域服务（Domain Service）：\r\n  - `ScanService`：`scan(rootDirs)`、`enumerate(dirPath)`、`persistIndex(dataDir)`\r\n  - `TOONGenerationService`：`fromMd(filePath)`、`fromCsv(filePath)`、`fromDocx(filePath)`、`fromPdf(filePath)`、`fromSvg(filePath)`\r\n  - `PreviewService`：`render(filePath)`（返回`PreviewContent`）\r\n- 工厂与规约（Factory & Specification）：\r\n  - `PreviewAdapterFactory`：按`fileType`返回适配器。\r\n  - `IndexSpecification`：黑白名单、符号链接、编码规范校验。\r\n- 交互关系：\r\n  - 应用层调用`ScanService`生成索引，持久化到`data/index.*`；\r\n  - 应用层调用`PreviewService`产出`PreviewContent`；\r\n  - Document聚合通过`DocumentRepository`装载与更新实体，保持读模型与索引文件一致。\r\n\r\n（Mermaid 可视化）\r\n\r\n```mermaid\r\nclassDiagram\r\ndirection TB\r\n\r\nclass Document {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +parentDir: String\r\n  +fileMetadata: FileMetadata\r\n  +toonStructure: TOONStructure\r\n  +previewContent: PreviewContent\r\n}\r\n\r\nclass FileMetadata {\r\n  +fileSize: long\r\n  +lastModifiedTime: Instant\r\n  +charset: String\r\n}\r\n\r\nclass TOONStructure {\r\n  +rootNode: String\r\n  +elementCount: int\r\n  +fields: List<String>\r\n  +data: List<Map<String,Object>>\r\n  +toonString: String\r\n}\r\n\r\nclass PreviewContent {\r\n  +contentType: String\r\n  +content: Any\r\n  +supportFullPreview: boolean\r\n}\r\n\r\nclass DirectoryTree {\r\n  +dirPath: String\r\n  +dirName: String\r\n  +subDirs: List<DirectoryTree>\r\n  +documents: List<DocumentSummary>\r\n}\r\n\r\nclass DocumentSummary {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +fileSize: long\r\n}\r\n\r\nclass DocumentRepository {\r\n  +findByPath(filePath: String): Document\r\n  +save(document: Document): void\r\n  +listByDir(dirPath: String): List<DocumentSummary>\r\n  +updateMetadata(filePath: String, metadata: FileMetadata): void\r\n}\r\n\r\nclass ScanService {\r\n  +scan(rootDirs: List<String>): void\r\n  +enumerate(dirPath: String): List<FilesIndexItem>\r\n  +persistIndex(dataDir: String): void\r\n}\r\n\r\nclass TOONGenerationService {\r\n  +fromMd(filePath: String): TOONStructure\r\n  +fromCsv(filePath: String): TOONStructure\r\n  +fromDocx(filePath: String): TOONStructure\r\n  +fromPdf(filePath: String): TOONStructure\r\n  +fromSvg(filePath: String): TOONStructure\r\n}\r\n\r\nclass PreviewService {\r\n  +render(filePath: String): PreviewContent\r\n}\r\n\r\nclass PreviewAdapterFactory {\r\n  +getAdapter(fileType: FileType): PreviewAdapter\r\n}\r\n\r\nclass PreviewAdapter\r\nclass MdAdapter\r\nclass PdfAdapter\r\nclass DocxAdapter\r\nclass CsvAdapter\r\nclass SvgAdapter\r\n\r\nDocument *-- FileMetadata\r\nDocument o-- TOONStructure\r\nDocument o-- PreviewContent\r\nDirectoryTree o-- DocumentSummary\r\nDocumentRepository ..> Document : load/save\r\nScanService ..> DocumentRepository : enumerate/listByDir\r\nScanService ..> DirectoryTree : derive\r\nTOONGenerationService ..> TOONStructure\r\nPreviewService ..> PreviewContent\r\nPreviewService ..> PreviewAdapterFactory\r\nPreviewAdapterFactory ..> PreviewAdapter\r\nPreviewAdapter <|.. MdAdapter\r\nPreviewAdapter <|.. PdfAdapter\r\nPreviewAdapter <|.. DocxAdapter\r\nPreviewAdapter <|.. CsvAdapter\r\nPreviewAdapter <|.. SvgAdapter\r\n```\r\n\r\n### 3.2.2 命令-事件-聚合表（草案）\r\n\r\n\r\n| 业务动作   | 命令              | 触发条件           | 领域事件                                              | 聚合/读模型            | 备注                                                  |\r\n| ---------- | ----------------- | ------------------ | ----------------------------------------------------- | ---------------------- | ----------------------------------------------------- |\r\n| 索引扫描   | `TriggerScan`     | 用户/定时/配置变更 | `DirectoryScanned`、`ItemEnumerated`                  | `DocumentRepository`   | 生成`FilesIndex`候选；跳过隐藏/黑名单                 |\r\n| 持久化索引 | `PersistIndex`    | 扫描完成           | `IndexPersisted`                                      | `DocumentRepository`   | 写入`data/index.toon`与`metadata`；可派生`index.json` |\r\n| 加载索引   | `LoadIndex`       | 前端或API请求      | `IndexLoaded`                                         | `FilesIndex`（读模型） | 返回TOON或JSON，支持内容协商                          |\r\n| 请求预览   | `RenderPreview`   | 用户点击文件       | `PreviewRequested`、`PreviewRendered`/`PreviewFailed` | `PreviewService`       | 支持md/docx/pdf/csv/svg；失败降级                     |\r\n| 清缓存     | `InvalidateCache` | 管理操作/变更检测  | `CacheInvalidated`                                    | Cache层                | 失效`toon:`/`preview:`键；ETag刷新                    |\r\n| 触发重扫   | `TriggerRescan`   | Admin接口调用      | `RescanTriggered`                                     | `ScanService`          | 全量或增量；更新`last_updated`                        |\r\n\r\n### 3.3.1 限界上下文图（草案表格）\r\n\r\n\r\n| 上下文（BC）     | 职责                        | 上游             | 下游             | 关系模式                 | 防腐层                 | UL关键词                                     |\r\n| ---------------- | --------------------------- | ---------------- | ---------------- | ------------------------ | ---------------------- | -------------------------------------------- |\r\n| 文档（Document） | 文档实体/TOON/目录树读模型  | 扫描（Scan）     | 预览（Preview）  | 客户-供应商（对Scan）    | 路径/编码规范；DTO映射 | `filePath`、`TOONStructure`、`DirectoryTree` |\r\n| 扫描（Scan）     | 遍历与索引生成、持久化index | Config Server    | 文档（Document） | 开放主机服务（暴露索引） | 黑白名单/符号链接校验  | `files[count]{path,type,name}`、`metadata`   |\r\n| 预览（Preview）  | 各类型预览内容生成          | 文档（Document） | 网关/前端        | 防腐层（对复杂格式库）   | 解析库接口封装         | `PreviewContent`、降级策略                   |\r\n| 网关（Gateway）  | 统一入口/CORS/限流          | 前端             | 各BC API         | 开放主机服务             | 统一错误映射           | `Accept`、`ETag`                             |\r\n\r\n### 3.7 实现（Code & UT）\r\n\r\n- 结构：模块-聚合-分层；接口层/应用层/领域层/基础设施层\r\n- 规约：业务规则单元测试、EBNF语法校验测试\r\n\r\n#### 3.7.1 关键模块清单（Backend）\r\n\r\n- `gateway`：路由、CORS、限流、错误映射、ETag处理。\r\n- `document-service`\r\n  - Controller：`DocumentController`（tree/toon/preview/scan/index接口）。\r\n  - Application：用例编排与事务控制（按目录粒度）。\r\n  - Domain：`ScanService`、`TOONGenerationService`、`PreviewService`、`DocumentRepository`。\r\n  - Infra：文件遍历器、TOON校验器、预览适配器（PDFBox/POI/OpenCSV等）。\r\n- `preview-worker`（可选）：队列消费者，异步执行重解析任务。\r\n\r\n#### 3.7.2 关键模块清单（Frontend）\r\n\r\n- 页面：`TreePage`（索引树与筛选）、`PreviewPage`（文档预览）、`AdminPage`（重扫与状态）。\r\n- 组件：`DirectoryTree`、`PreviewPane(md/pdf/docx/csv/svg)`、`SearchBar`、`StatusBadge`。\r\n- 状态：React Query 请求层、缓存策略与错误提示。\r\n\r\n#### 3.7.3 UT用例索引（Backend）\r\n\r\n- `ScanServiceTest`：\r\n  - 枚举跳过隐藏/黑名单；符号链接白名单校验；大目录性能阈值。\r\n  - `index.toon`生成与`metadata`时间格式（北京时区）。\r\n- `TOONGenerationServiceTest`：\r\n  - CSV/MD/DOCX/PDF/SVG五类解析一致性与转义校验；降级块生成。\r\n- `PreviewServiceTest`：\r\n  - 各类型适配与MIME；PDF Range分页；超时与内存限制保护。\r\n- `GatewayErrorMappingTest`：\r\n  - 错误码与HTTP映射；`traceId`传递；CORS预检缓存。\r\n\r\n#### 3.7.4 UT用例索引（Frontend）\r\n\r\n- `TreeRender.spec.tsx`：懒加载/虚拟滚动/分页段落；筛选与高亮。\r\n- `PreviewMd.spec.tsx`、`PreviewPdf.spec.tsx`、`PreviewDocx.spec.tsx`、`PreviewCsv.spec.tsx`、`PreviewSvg.spec.tsx`：渲染与错误降级。\r\n- `AdminRescan.spec.tsx`：重扫后更新时间刷新与提示。\r\n\r\n### 3.8 持续演进（Evolution）\r\n\r\n- 活动：领域事件回放、模型重构、定期事件风暴\r\n- 参考：12 运行保障；12 扩展性与演进\r\n\r\n#### 3.8.1 演进周期\r\n\r\n- 每周：事件风暴复盘（针对新增/变化的领域事件与命令），更新命令-事件-聚合表。\r\n- 每两周：Story Map梳理与迭代计划评审；MVP/V1/V2增量验收。\r\n- 每月：非功能指标回顾（`latency p95/p99`、`cache_hit_ratio`、`parse_success_rate`）与容量策略调整。\r\n\r\n#### 3.8.2 触发机制\r\n\r\n- 配置刷新（Config Server）：根目录或限流/缓存参数变更 → 增量/全量重扫（5分钟窗口）。\r\n- 文件系统事件（inotify）：新增/修改/删除 → 局部重扫与缓存失效。\r\n- 指标阈值：当`parse_success_rate`连续低于阈值或`api_latency_p99`升高 → 降级策略启用与资源上限调整。\r\n\r\n#### 3.8.3 版本演进\r\n\r\n- MVP → V1 → V2：对应“用户故事地图”的版本切片；优先保证索引浏览与`.md`预览，逐步引入其他格式与后台能力。\r\n\r\n#### 3.8.4 领域事件回放\r\n\r\n- 支持将扫描与预览关键步骤记录为事件流水，便于定位问题与重现；必要时对比两版索引差异（`diff index.toon`）。\r\n\r\n#### 3.8.5 风险与回退\r\n\r\n- 索引文件损坏或不可读：回退到最近一次可用索引并提示“索引可能过期”。\r\n- 预览解析崩溃：触发熔断与降级，限制并发与内存，记录失败样本用于事后分析。\r\n\r\n## 4. 架构设计（Spring Cloud + React）\r\n\r\n- 服务组件：\r\n  - `gateway`（统一入口、CORS策略、限流可选）。\r\n  - `eureka`（服务发现）。\r\n  - `config-server`（集中配置，含根目录数组与定时参数）。\r\n  - `document-service`（领域服务：扫描、TOON、预览API）。\r\n  - 可选 `preview-worker`（重解析任务异步化：PDF/DOCX转HTML）。\r\n- 技术选型：\r\n  - 后端：Java 17、Spring Boot 3、Lombok（简化）、POI（docx）、PDFBox（pdf）、OpenCSV（csv）、Tika（类型识别）、Redis（缓存）。\r\n  - 前端：React 18、TypeScript、Ant Design 5、Vite；预览库：`marked`（md）、`pdfjs-dist`（pdf）、`mammoth`（docx）、`papaparse`（csv）、原生`<svg>`（svg）。\r\n  - 部署：Docker、Nginx（负载均衡）、Jenkins + GitLab（CI/CD）、Kubernetes（可选）；监控：Prometheus + Grafana；日志：ELK。\r\n- 依赖关系：接口层（Web/网关）→ 应用层（用例编排）→ 领域层（模型与服务）→ 基础设施层（文件系统与解析库）。\r\n\r\n## 5. TOON语法规范\r\n\r\n- 语法范式：`blockName[count]{field1,field2,...}: record1; record2; ...`\r\n- 记录表达：每条记录为逗号分隔的字段值；记录间以分号或换行分隔；允许空值（空字符串）。\r\n- 转义规则：值中包含逗号/分号/换行时使用 `\\,` `\\;` `\\n`；反斜杠使用 `\\\\`；统一UTF-8编码。\r\n- 多块输出：响应可包含多个块，按语义顺序组织，例如：\r\n  - `directories[2]{path}: /docs; /images`\r\n  - `documents[3]{id,name,path,type}: 1,readme.md,/docs/readme.md,md; 2,report.docx,/docs/report.docx,docx; 3,data.csv,/data/data.csv,csv`\r\n- 元数据块：`metadata{total,last_updated,page,size}: 3,2025-11-24T11:27:16+08:00,1,100`（时间统一为北京时间，ISO-8601）。\r\n- 令牌优化：字段顺序固定；避免冗余键；尽量合并表头/重复值；非必要标点禁止；大集合按分页块分段返回。\r\n- 兼容性：中文目录/文档名与中文字段值允许；统一UTF-8；建议使用NFC规范化。\r\n- EBNF描述：\r\n  - `block ::= name '[' count ']' '{' fields '}' ':' records`\r\n  - `fields ::= field { ',' field }`\r\n  - `records ::= record { (';' | NEWLINE) record }`\r\n  - `record ::= value { ',' value }`\r\n  - `value ::= TEXT | ESCAPED`\r\n- `ESCAPED ::= '\\\\,' | '\\\\;' | '\\\\n' | '\\\\\\\\'`\r\n- `name, field, TEXT 采用 UTF-8；推荐NFC规范化`\r\n\r\n### 5.1 索引TOON（files块）规范\r\n\r\n- 目的：持久化指定根目录的目录与文件枚举，供Web应用加载展示。\r\n- 语义：`files[count]{path,type,name}:` 后接按行/分号分隔的记录；`type` 取 `directory|file`；`path` 为相对根的Linux风格路径；`name` 为条目名。\r\n- 元数据：附加 `metadata{total,last_updated,root}: count,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n- 示例：\r\n  - `files[12]{path,type,name}:`\r\n  - `hkt-knowledge/,directory,hkt-knowledge`\r\n  - `hkt-knowledge/hkt-product/,directory,hkt-product`\r\n  - `hkt-knowledge/hkt-product/hkt-agentic/,directory,hkt-agentic`\r\n  - `hkt-knowledge/hkt-product/industrial-brain/,directory,industrial-brain`\r\n  - `hkt-knowledge/hkt-project/,directory,hkt-project`\r\n  - `hkt-knowledge/hkt-project/docs/,directory,docs`\r\n  - `hkt-knowledge/hkt-project/docs/gitlab流水线触发指南.md,file,gitlab流水线触发指南.md`\r\n  - `hkt-knowledge/hkt-project/docs/会议纪要模版.md,file,会议纪要模版.md`\r\n  - `hkt-knowledge/hkt-project/docs/孚盟学习网址.md,file,孚盟学习网址.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.md,file,客户地理位置分布.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.xlsx,file,客户地理位置分布.xlsx`\r\n  - `hkt-knowledge/hkt-project/docs/广告推广国家.md,file,广告推广国家.md`\r\n  - `hkt-knowledge/test-document.md,file,test-document.md`\r\n  - `metadata{total,last_updated,root}: 12,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n\r\n## 6. 功能模块设计\r\n\r\n### 6.1 扫描模块\r\n\r\n- 配置根目录（单/多），在 `config-server` 配置，如 `app.scan.root-dirs=[\"/home/agentic/hkt-knowledge\"]`；默认取第一个根进行索引持久化。\r\n- 支持手动触发与定时扫描（默认每1小时，可配置）；跳过隐藏文件/目录（如 `.git/`）。\r\n- 扫描遍历目录与文件，生成 `files[count]{path,type,name}` 索引TOON；写入本地 `data/index.toon`（附 `metadata` 块）。\r\n- 可选生成派生 `data/index.json`（仅供前端树快速加载）。\r\n\r\n### 6.2 TOON生成模块\r\n\r\n- 首次访问懒加载生成，生成后按 `filePath` 缓存（Redis）默认1小时。\r\n- 无法提取结构化数据时生成默认TOON（例如PDF纯文本）。\r\n- 标准TOON输出包含对象字段与 `toonString` 字符串。\r\n\r\n### 6.3 Web展示模块\r\n\r\n- 左侧 Tree 展示 `DirectoryTree`，支持展开/折叠、类型图标区分。\r\n- 右侧预览按类型加载对应预览器：\r\n  - `.md` → `marked` 转 HTML；\r\n  - `.pdf` → `pdfjs-dist` 渲染二进制流，支持滚动/缩放；\r\n  - `.docx` → 后端 POI 转 HTML 或前端 `mammoth`；\r\n  - `.csv` → `papaparse` → `Antd Table`，支持排序；\r\n  - `.svg` → 原始文本嵌入 `<svg>`。\r\n- 交互限制：不提供下载按钮，禁用右键保存（前端限制）。\r\n\r\n## 7. API设计（REST）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 描述：获取目录树结构。\r\n  - 返回：`DirectoryTree`。\r\n- `GET /api/v1/document/toon?filePath=...`\r\n  - 描述：获取文档TOON结构。\r\n  - 返回：`TOONStructure`。\r\n- `GET /api/v1/document/preview?filePath=...`\r\n  - 描述：获取文档预览内容。\r\n  - 返回：`PreviewContent`（HTML字符串/PDF流/SVG文本）。\r\n- `POST /api/v1/document/scan`\r\n  - 描述：触发手动扫描。\r\n  - 返回：`ScanResult`（新增/更新/删除数量等）。\r\n\r\n### 7.1 索引加载接口\r\n\r\n- `GET /api/v1/index/toon`\r\n  - 描述：返回持久化的索引TOON（`data/index.toon`）。\r\n  - 返回：MIME `application/x-toon` 或 `text/plain; charset=UTF-8`。\r\n- `GET /api/v1/index/json`\r\n  - 描述：返回索引的JSON派生结构（`data/index.json`）。\r\n  - 返回：`FilesIndex`（数组）。\r\n\r\n### 7.2 请求参数\r\n\r\n- 获取目录树 `GET /api/v1/document/tree`\r\n  - 可选：`rootDir`（字符串，默认配置的全部根目录）、`path`（仅返回指定路径子树）、`depth`（整数，默认2）、`page`、`size`（分段加载）。\r\n- 获取文档TOON `GET /api/v1/document/toon`\r\n  - 必填：`filePath`；可选：`format=both|toon|json`（默认both）、`page`、`size`（大集合分页）。\r\n- 获取文档预览 `GET /api/v1/document/preview`\r\n  - 必填：`filePath`；可选（PDF）：`startPage`、`endPage`。\r\n- 触发手动扫描 `POST /api/v1/document/scan`\r\n  - 可选：`dirPath`（仅扫描指定目录）、`force`（布尔，是否跳过缓存直接重扫）。\r\n\r\n### 7.3 响应示例（节选）\r\n\r\n- 目录树（JSON）：\r\n  - `{ \"dirPath\": \"/opt/docs\", \"dirName\": \"docs\", \"subDirs\": [{\"dirPath\":\"/opt/docs/api\",\"dirName\":\"api\",\"subDirs\":[],\"documents\":[]}], \"documents\": [{\"filePath\":\"/opt/docs/readme.md\",\"fileName\":\"readme.md\",\"fileType\":\"MD\",\"fileSize\":1024}] }`\r\n- 文档TOON（both）：\r\n  - `{ \"rootNode\":\"users\", \"elementCount\":2, \"fields\":[\"id\",\"name\",\"role\"], \"data\":[{\"id\":1,\"name\":\"张三\",\"role\":\"admin\"},{\"id\":2,\"name\":\"李四\",\"role\":\"user\"}], \"toonString\":\"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n- 文档预览（PDF片段）：\r\n  - 头：`Content-Type: application/pdf`，支持 Range；体为二进制流；JSON模式示例：`{ \"contentType\":\"application/pdf\", \"content\":\"<base64>\", \"supportFullPreview\": false }`\r\n\r\n### 7.4 接口参数表（摘要）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 必填：无\r\n  - 可选：`rootDir`、`path`、`depth`、`page`、`size`\r\n- `GET /api/v1/document/toon`\r\n  - 必填：`filePath`\r\n  - 可选：`format=both|toon|json`、`page`、`size`\r\n- `GET /api/v1/document/preview`\r\n  - 必填：`filePath`\r\n  - 可选：`startPage`、`endPage`（PDF）\r\n- `POST /api/v1/document/scan`\r\n  - 必填：无\r\n  - 可选：`dirPath`、`force`\r\n\r\n### 7.5 OpenAPI草案（节选）\r\n\r\n```yaml\r\nopenapi: 3.0.0\r\ninfo:\r\n  title: 文档TOON结构生成与Web预览系统 API\r\n  version: 1.0.0\r\npaths:\r\n  /api/v1/document/tree:\r\n    get:\r\n      summary: 获取目录树结构\r\n      parameters:\r\n        - in: query\r\n          name: rootDir\r\n          schema: { type: string }\r\n        - in: query\r\n          name: path\r\n          schema: { type: string }\r\n        - in: query\r\n          name: depth\r\n          schema: { type: integer, minimum: 0, default: 2 }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer, minimum: 1, default: 1 }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer, minimum: 1, default: 200 }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/DirectoryTree' } } } }\r\n        '400': { $ref: '#/components/responses/Error400' }\r\n  /api/v1/document/toon:\r\n    get:\r\n      summary: 获取文档TOON结构\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: format\r\n          schema: { type: string, enum: [both, toon, json], default: both }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/TOONStructure' } }, application/x-toon: { schema: { type: string } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n        '422': { $ref: '#/components/responses/Error422' }\r\n  /api/v1/document/preview:\r\n    get:\r\n      summary: 获取文档预览内容\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: startPage\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: endPage\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/PreviewContent' } }, application/pdf: { schema: { type: string, format: binary } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n  /api/v1/document/scan:\r\n    post:\r\n      summary: 触发手动扫描\r\n      requestBody:\r\n        content:\r\n          application/json:\r\n            schema:\r\n              type: object\r\n              properties:\r\n                dirPath: { type: string }\r\n                force: { type: boolean, default: false }\r\n      responses:\r\n        '200': { description: OK }\r\ncomponents:\r\n  schemas:\r\n    DirectoryTree:\r\n      type: object\r\n      properties:\r\n        dirPath: { type: string }\r\n        dirName: { type: string }\r\n        subDirs:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DirectoryTree' }\r\n        documents:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DocumentSummary' }\r\n    DocumentSummary:\r\n      type: object\r\n      properties:\r\n        filePath: { type: string }\r\n        fileName: { type: string }\r\n        fileType: { type: string, enum: [MD, DOCX, PDF, CSV, SVG] }\r\n        fileSize: { type: integer }\r\n    TOONStructure:\r\n      type: object\r\n      properties:\r\n        rootNode: { type: string }\r\n        elementCount: { type: integer }\r\n        fields: { type: array, items: { type: string } }\r\n        data: { type: array, items: { type: object } }\r\n        toonString: { type: string }\r\n    PreviewContent:\r\n      type: object\r\n      properties:\r\n        contentType: { type: string }\r\n        content: { type: string }\r\n        supportFullPreview: { type: boolean }\r\n    ErrorResponse:\r\n      type: object\r\n      properties:\r\n        code: { type: string }\r\n        message: { type: string }\r\n        traceId: { type: string }\r\n        details: { type: object }\r\n  responses:\r\n    Error400:\r\n      description: Bad Request\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error404:\r\n      description: Not Found\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error422:\r\n      description: Unprocessable Entity\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n```\r\n\r\n### 7.6 API协商与返回模式\r\n\r\n- `GET /api/v1/document/toon?filePath=...&format=both|toon|json&page=1&size=100`\r\n  - `format`：返回模式；默认 `both`（结构体与 `toonString` 同时返回）。\r\n  - 分页：对大集合型TOON可使用 `page/size`；响应中同时返回 `metadata` 块说明总数、页码与最后更新时间。\r\n- 内容协商：支持 `Accept: application/x-toon` 强制仅返回 `toonString`（MIME：`application/x-toon`）；`application/json` 返回对象结构；无 `Accept` 或 `*/*` 返回默认 `both`。\r\n- 预览分页：`GET /api/v1/document/preview?filePath=...&startPage=1&endPage=10`（PDF），支持HTTP Range；单次最大返回页数 `<= 20`。\r\n- 响应示例：\r\n  - JSON：`{ rootNode: \"users\", elementCount: 2, fields: [\"id\",\"name\",\"role\"], data: [{id:1,name:\"张三\",role:\"admin\"},{id:2,name:\"李四\",role:\"user\"}], toonString: \"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n  - TOON：`users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- 兼容降级策略：若代理/浏览器不识别 `application/x-toon`，可回退使用 `text/plain; charset=UTF-8` 返回 `toonString`。\r\n- 配置项（Config Server）：`preview.pdf.max-pages-per-request=20`、`gateway.response.supported-accepts=application/json,application/x-toon,*/*`。\r\n\r\n## 8. 数据结构定义（概念约定）\r\n\r\n- 枚举 `FileType`：MD/DOCX/PDF/CSV/SVG。\r\n- 实体 `Document`：见 3.2。\r\n- 值对象 `TOONStructure`：见 3.2。\r\n- 前端 TypeScript 约定：\r\n  - `DirectoryTree { dirPath: string; dirName: string; subDirs: DirectoryTree[]; documents: DocumentSummary[] }`\r\n  - `DocumentSummary { filePath: string; fileName: string; fileType: FileType; fileSize: number }`\r\n  - `TOONStructure { rootNode: string; elementCount: number; fields: string[]; data: Array<Record<string, any>>; toonString: string }`\r\n  - `PreviewContent { contentType: string; content: string | ArrayBuffer; supportFullPreview: boolean }`\r\n  - `FilesIndexItem { path: string; type: 'directory' | 'file'; name: string }`\r\n  - `FilesIndex = FilesIndexItem[]`\r\n\r\n## 9. TOON生成规则（按格式）\r\n\r\n- CSV：第一行为 `fields`，其余行为 `data`；`rootNode` 为文件名；`elementCount` 为数据行数。\r\n- MD：优先提取表格数据（列名→`fields`，行→`data`）；次选列表结构。\r\n- DOCX：提取表格优先，其次段落标题；规则对齐MD。\r\n- PDF：尽力提取表格/结构化；若不可行，则 `fields=[\"content\"]`，`data` 为文本片段。\r\n- SVG：`fields=[\"width\",\"height\",\"elementsCount\"]`，`data` 为SVG元数据。\r\n\r\n## 10. 治理与合规\r\n\r\n### 10.1 路径与编码规范（Linux/中文）\r\n\r\n- 运行环境：Linux；路径分隔符 `/`；大小写敏感；禁止Windows样式路径。\r\n- 编码与规范化：文件/目录名统一UTF-8；建议NFC规范化；拒绝包含控制字符与非法路径片段（如 `..` 越权）。\r\n- 符号链接策略：禁止跨根目录的符号链接访问；允许根目录内的符号链接但需解析到真实路径并做白名单校验；检测越权即拒绝。\r\n- 默认黑名单：`.git/`、`.svn/`、`node_modules/`、`target/`、`.DS_Store`、临时/隐藏文件（以 `.` 开头）。\r\n- 白名单：所有访问严格限制在配置的根目录集合内；任何跨目录或符号链接越权访问拒绝。\r\n\r\n### 10.2 安全与访问限制\r\n\r\n- 根目录访问严格限制在配置集合内，拒绝跨目录访问与路径遍历（规范化路径校验）。\r\n- 网关层启用CORS白名单策略，仅允许指定来源域名。\r\n- 前端禁用右键保存与下载入口（仅UI限制，无法完全阻止恶意抓取）。\r\n\r\n### 10.3 错误与响应格式\r\n\r\n- 统一错误JSON：`{ code: string, message: string, traceId: string, details?: object, locale?: string }`\r\n- HTTP状态码：\r\n  - 400 参数错误（非法filePath、越权路径）。\r\n  - 404 文件不存在或不支持格式。\r\n  - 409 并发冲突（扫描进行中）。\r\n  - 422 解析失败（TOON/预览生成失败）。\r\n  - 429 请求过多（限流）。\r\n  - 500 服务器内部错误。\r\n- 网关错误映射：统一成上述错误结构并记录 `traceId`。\r\n- 错误码字典：`INVALID_PATH`、`UNSUPPORTED_TYPE`、`FILE_NOT_FOUND`、`PARSE_FAILED`、`CONFLICT`、`RATE_LIMITED`、`INTERNAL_ERROR`。\r\n- CORS与预检：配置 `Access-Control-Allow-Origin`（白名单）、`Access-Control-Allow-Methods`、`Access-Control-Allow-Headers`、`Access-Control-Max-Age=600`。\r\n\r\n#### 10.3.1 错误码与HTTP映射（示例）\r\n\r\n- `INVALID_PATH` → 400；消息：路径非法或越权访问\r\n- `FILE_NOT_FOUND` → 404；消息：文件不存在\r\n- `UNSUPPORTED_TYPE` → 404；消息：格式不支持\r\n- `CONFLICT` → 409；消息：资源冲突或扫描进行中\r\n- `PARSE_FAILED` → 422；消息：解析失败，返回降级内容或提示\r\n- `RATE_LIMITED` → 429；消息：请求过多，请稍后重试\r\n- `INTERNAL_ERROR` → 500；消息：服务器内部错误\r\n\r\n## 9. 非功能与性能\r\n\r\n- 异步扫描与大目录优化（并发遍历、I/O分离、批量缓存更新）。\r\n- 跳过隐藏文件与目录，避免无意义解析。\r\n- 大文件（>100MB）预览仅加载前10页（PDF），显示分页控件与提示。\r\n- TOON结构与预览内容缓存默认1小时，可配置；命中则直接返回。\r\n- 兼容性：现代浏览器（Chrome/Firefox/Edge ≥ 88）。\r\n\r\n## 10. 部署与运维\r\n\r\n- 容器化：Docker 镜像构建；Nginx 反向代理与负载均衡；Jenkins + GitLab CI/CD。\r\n- 微服务：Eureka 服务发现；Config Server 管理根目录与扫描周期；\r\n- 监控：Prometheus 采集接口与调度指标；Grafana 仪表盘；\r\n- 日志：ELK 聚合 `document-service` 扫描/预览日志与异常。\r\n\r\n## 11. 用户故事与验收标准\r\n\r\n- 用户故事1：查看文档树结构\r\n  - Given 配置的根目录存在，When 应用启动，Then 自动扫描并生成TOON数据，左侧显示树状结构。\r\n  - Given 树已显示，When 点击目录节点，Then 展开子目录与文档清单。\r\n  - Given 树已显示，When 点击文档节点，Then 右侧预览文档内容。\r\n- 用户故事2：预览文档内容\r\n  - Given 用户点击文档节点，When 文档类型为 md/docx/pdf/csv/svg，Then 在右侧渲染对应预览。\r\n  - Given 预览界面显示，When 文档格式不支持，Then 显示“预览不支持”提示。\r\n  - Given 预览功能，Then 不提供下载或上传选项。\r\n\r\n### 用户故事地图（Story Map）\r\n\r\n- Backbone（活动）：浏览索引 → 查找与筛选 → 查看预览 → 管理重扫 → 运行保障\r\n- 用户角色：访客（浏览/预览）、管理员（重扫/状态/清缓存）\r\n- 活动拆分与步骤：\r\n  - 浏览索引：加载`index.toon/json` → 渲染树 → 展开/折叠 → 类型图标\r\n  - 查找与筛选：关键字筛选（按`name/path`，可选）→ 类型过滤（file/directory）→ 清空筛选\r\n  - 查看预览：点击文件 → 加载对应预览器（md/docx/pdf/csv/svg）→ 错误降级提示\r\n  - 管理重扫：进入管理页 → 选择目录 → 触发`admin/rescan` → 观察更新时间\r\n  - 运行保障：限流/缓存生效 → 监控指标回报 → 故障时降级与重试\r\n- 版本切片：\r\n  - MVP：加载索引、树浏览、`.md`预览、错误页提示\r\n  - V1：`.pdf/.docx/.csv/.svg`预览、`index.json`派生、限流与缓存\r\n  - V2：异步预览worker、管理后台页面、监控与告警、筛选搜索\r\n- 验收视角：每步具备可见输出（树渲染/预览/状态）、错误有统一文案、操作有可回退路径。\r\n\r\n## 12. 扩展性与演进\r\n\r\n- 新增格式时：实现 `TOONGenerationService` 与 `PreviewService` 的新适配方法，注册到策略表。\r\n- 多根目录：`config-server` 支持数组配置与动态刷新；扫描服务按目录并发执行。\r\n- 异步预览：将重解析任务下沉至 `preview-worker`，通过Kafka异步处理与Redis结果回填。\r\n\r\n## 13. 参考来源与整合说明\r\n\r\n- 参考文档：\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（豆包）.md:193-198（技术选型）、269-317/281-307（API端点）、205-213（扫描策略）、141-149（TOON规则）、385-392（安全/CORS）、377-384（性能/缓存）、239-252（交互）、40-65/67-125（模型）、175-185（分层）、400-405（扩展性）、77-90（TOON对象）。\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（DeepSeek）.md:53-58（前后端建议与预览库）、45-48（预览不支持提示）、58（Docker容器化）、36-49（用户故事与验收）、124-125（异步与性能）。\r\n- 参考文章：知乎《TOON vs JSON：现代数据格式的巅峰对决》 https://zhuanlan.zhihu.com/p/1973687597361566533（TOON语法、块结构与令牌效率要点）。\r\n- 整合原则：以“豆包”工程化规则为主干，吸收“DeepSeek”的快速实现与容器建议，并统一到 React + AntD + Vite 前端与 Spring Cloud + Java 后端的栈约束下。\r\n\r\n## 12. 运行保障\r\n\r\n### 12.1 缓存与失效策略\r\n\r\n- Redis键设计：\r\n  - TOON：`toon:{sha256(filePath)}:{version}`；预览：`preview:{sha256(filePath)}:{pageRange}`。\r\n  - 版本计算：默认 `sha256(filePath + mtime + size)`；可选 `sha256(content)`（大文件时按区块）。\r\n- TTL：默认1小时；大文件预览可单独设置TTL。\r\n- 失效触发：\r\n  - 扫描发现变更（新增/修改/删除）即失效对应键。\r\n  - 手动触发重扫或管理接口清缓存。\r\n- HTTP缓存：使用 `ETag` 与 `Last-Modified`；命中直接返回304。\r\n- 容量与逐出：配置最大容量；策略LRU或LFU；指标监控命中率与逐出率。\r\n\r\n### 12.2 监控指标与限流建议\r\n\r\n- 监控指标：\r\n  - `scan_duration_ms`、`parse_success_rate`、`cache_hit_ratio`、`api_latency_p95`、`api_latency_p99`、`queue_backlog`。\r\n- 限流：\r\n  - 基于IP或令牌的令牌桶；默认每IP每分钟 120 次，突发 30；超限返回429并提供 `Retry-After` 与统一错误页文案。\r\n\r\n### 12.3 稳定性与运行策略\r\n\r\n- 扫描策略：\r\n  - 定时扫描（默认每小时）与Linux inotify文件事件监听结合；事件驱动优先，周期性补偿。\r\n  - 多根目录并发扫描需保证仓库更新的原子性与去重。\r\n- 并发与锁：Repository更新采用分段锁（按目录粒度）与批处理事务，避免写入冲突；去重基于 `filePath+hash`。\r\n- 重试与退避：解析失败指数退避（初始500ms，最大4s，最多3次）；区分可重试/不可重试错误并记录失败样本。\r\n- 资源限制：为PDFBox/POI设置并发线程上限（≤CPU核数）、单文件解析超时（≤10s）与内存上限，防止OOM。\r\n- 配置刷新：`config-server` 变更后触发增量重扫（变更目录）或在 5 分钟窗口内全量重扫。\r\n\r\n## 附录 A. 示例用例（各格式TOON）\r\n\r\n- CSV：\r\n  - `users[2]{id,name,role}: 1,张三,admin; 2,李四,user`\r\n  - `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- MD（表格）：\r\n  - `features[3]{name,status}: 目录树,done; 预览,doing; 缓存,pending`\r\n- DOCX（表格优先）：\r\n  - `requirements[2]{item,priority}: TOON语法规范,high; 错误格式统一,high`\r\n- DOCX 适配决策矩阵：\r\n  - 条件：文档体积 < 5MB，样式简单（纯文本/基本表格） → 选择：前端 `mammoth` → 理由：轻量、减少后端负载 → 降级：复杂样式检测失败则回退后端POI\r\n  - 条件：包含复杂表格/图片/页眉页脚/公式 → 选择：后端 POI 转 HTML → 理由：解析更稳定、可控 → 降级：无法完整转换时输出文本TOON块\r\n  - 条件：超大文件 ≥ 20MB → 选择：后端 POI 分段解析 → 理由：内存与性能控制 → 降级：仅抽取段落摘要或表格前N行\r\n  - 条件：中文大段与混合编码 → 选择：后端统一UTF-8并规范化 → 理由：保证TOON一致性 → 降级：不可识别字符替换为占位符\r\n- PDF（文本降级）：\r\n  - `content[1]{content}: 项目概述\\n支持五类文档\\n缓存1小时`\r\n- SVG（元数据）：\r\n  - `svg_meta[1]{width,height,elementsCount}: 800,600,42`\r\n- 复杂示例（多块顺序与关联）：\r\n  - `directories[1]{path}: /docs`\r\n  - `documents[2]{id,name,path,type}: 1,概述.md,/docs/概述.md,md; 2,设计.pdf,/docs/设计.pdf,pdf`\r\n- `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n\r\n## 附录 B. 前后端实现与测试建议\r\n\r\n- 前端状态管理：采用 React Query；设定 `staleTime=30s`、`retry=2`、指数退避；缓存接口数据与错误重试。\r\n- PDF.js配置：本地worker脚本路径 `/static/pdf.worker.min.js`；确保CORS允许；大文件按页加载与占位提示。\r\n- 树加载：分页/懒加载/虚拟滚动结合；每层最多加载 200 节点，超出分页请求后端。\r\n- 测试计划：\r\n  - 后端：各格式解析与TOON生成单元/集成测试；错误与降级用例；EBNF语法校验测试。\r\n  - 前端：预览渲染与交互回归测试；大数据性能用例；状态管理与错误提示一致性测试。\r\n- 持久化：`DocumentRepository` 默认落地 PostgreSQL；支持内存模式用于小规模或故障降级。\r\n- 前端错误体验与降级：损坏文件或不支持预览时显示统一错误页与操作建议；提供“查看原始TOON”回退。\r\n- ETag/Last-Modified 协同：前端请求携带 `If-None-Match/If-Modified-Since`；React Query 根据304直接复用缓存并跳过重试。\r\n\r\n## 附录 C. 树接口分页契约示例\r\n\r\n- 请求：`GET /api/v1/document/tree?path=/opt/docs&depth=1&page=1&size=200`\r\n- 返回：`DirectoryTree` 仅包含当前层 `subDirs/documents` 的分页片段，并附 `metadata{total,page,size}` TOON块或JSON元数据。\r\n- 交互：\r\n  - 展开节点时按需请求下一层；若节点子项超过 `size`，显示“加载更多”并继续分页。\r\n  - 前端虚拟滚动仅渲染可视区域；移除离屏节点；缓存已加载段落。\r\n  - 排序：默认按 `dirName/fileName` 字典序；可选 `fileType/lastModifiedTime`。\r\n\r\n## 附录 D. TOON 示例集与单测清单\r\n\r\n- 示例集：为 CSV/MD/DOCX/PDF/SVG 各提供至少3个复杂场景示例（中文/空值/转义/大集合分页）。\r\n- 单测：\r\n  - 语法校验：转义合法性、分隔符、块计数一致性、编码为UTF-8。\r\n  - 解析一致性：`fields/data/toonString` 对齐；降级块生成规则；分页合并一致性。\r\n  - 边界用例：损坏文件、非UTF-8、超长字段、嵌套列表/表格。\r\n\r\n## 23. 持久化模型（data目录TOON方案）\r\n\r\n- 索引文件：`data/index.toon`，内容为 `files[count]{path,type,name}` 块与 `metadata{total,last_updated,root}` 块。\r\n- JSON派生：`data/index.json`（可选），内容为 `FilesIndex` 数组，便于前端树加载与缓存。\r\n- 更新时间：`data/last_updated.txt`（可选），记录北京时间ISO-8601字符串，便于运维观察。\r\n- 生成策略：手动/定时扫描生成，命中缓存则复用；变更检测到后重写文件并更新ETag。\r\n- 读取策略：API优先读取 `index.toon`；前端可选择直接请求TOON或JSON派生。\r\n\r\n## 24. 管理与运维接口\r\n\r\n- `POST /api/v1/admin/rescan`（全量或指定目录重扫，更新 `data/index.*`）。\r\n- `POST /api/v1/admin/cache/clear?filePath=...`（清除单文件预览缓存，与索引无关）。\r\n- `GET /api/v1/admin/status`（查看任务队列、缓存命中率与 `index.toon` 更新时间）。\r\n- 访问控制：默认仅本地或白名单IP允许；可后续接入令牌校验。\r\n\r\n## 25. 本地化与时间格式\r\n\r\n- 错误消息默认中文，支持英文回退：`locale` 字段返回当前语言。\r\n- 时间统一使用北京时间ISO-8601，带时区偏移 `+08:00`；用于 `metadata` 与日志。\r\n\r\n## 26. 参数默认值与配置表（节选）\r\n\r\n- `app.scan.root-dirs`：数组，默认空，示例 `[/opt/docs,/opt/images]`\r\n- `app.scan.cron`：扫描周期（CRON），默认每小时\r\n- `app.data.dir`：索引持久化目录，默认 `./data`\r\n- `preview.pdf.max-pages-per-request`：单次最大页数，默认20\r\n- `gateway.response.supported-accepts`：`application/json,application/x-toon,*/*`\r\n- `gateway.rate-limit.ip.per-minute`：默认120\r\n- `gateway.rate-limit.ip.burst`：默认30\r\n- `cache.toon.ttl`：默认3600秒\r\n- `cache.preview.ttl`：默认600秒（大文件）\r\n\r\n## 27. 术语对照与一致性清单\r\n\r\n- 术语对照：\r\n  - 目录（Directory/Folder）→ `dirPath/dirName`\r\n  - 文档（Document/File）→ `filePath/fileName/fileType`\r\n  - TOON结构（TOONStructure）→ `rootNode/elementCount/fields/data/toonString`\r\n  - 预览（Preview）→ `PreviewContent`\r\n- 一致性检查：\r\n  - 字段命名在前后端、持久化与TOON中一致\r\n  - 时间格式统一为北京时间ISO-8601（`+08:00`）\r\n  - 路径为Linux风格，UTF-8编码，NFC规范化\r\n  - 错误码与HTTP映射一致，统一错误响应结构\r\n  - 缓存键命名、TTL与失效触发一致\r\n\r\n## 28. 需求覆盖评估\r\n\r\n- 覆盖项：\r\n  - 指定目录全量枚举与中文路径：由扫描模块与`files`索引TOON规范覆盖（含Linux路径与符号链接治理）。\r\n  - 索引持久化与加载：`data/index.toon`（必选）与`index.json`（可选）及对应API覆盖。\r\n  - 树展示与预览适配：React前端与五类预览器（md/docx/pdf/csv/svg）覆盖；错误统一降级与提示。\r\n  - 治理与运行保障：路径与编码、安全、错误、缓存、限流、监控、稳定性策略覆盖。\r\n  - 运维与管理：`admin/rescan/status/cache`接口覆盖索引更新与状态可观测。\r\n- 差距与建议：\r\n  - `.xlsx` 仅列于索引样例，当前“预览不支持”（不在五类之内）。建议：V2引入轻量预览（只读表格前N行）或标注“仅下载不预览”。\r\n  - 索引搜索/筛选：Story Map中为可选，当前规范未定义API参数。建议：前端本地筛选为先，必要时提供`GET /index/search?q=`。\r\n  - 索引规模极大（>10万项）分页：目前通过JSON派生与前端虚拟滚动缓解，建议后续提供分片索引（`index.part-N.toon`）。\r\n  - 缺失文件或`index.toon`不存在的降级：建议在API与前端加入“空索引占位”与重扫引导。\r\n  - 无登录与权限控制：按需求刻意不覆盖；如后续公开部署需考虑只读令牌与审计。\r\n- 结论：就“展示指定目录并持久化为TOON索引、提供预览”核心需求而言，规范已覆盖端到端路径与非功能治理；已知差距集中在`.xlsx`预览与搜索/大规模索引的增强项，可按版本切片推进。\r\n\r\n## 附录 E. DDD 完整链路图（Mermaid）\r\n\r\n```mermaid\r\n%% -------------- DDD 完整链路 -------------- \r\ngraph TB\r\n    %% ========== 0. 前期对齐 ==========\r\n    A0[0.组建跨职能战队<br/>对齐业务愿景] --> A1\r\n\r\n    %% ========== 1. 用户旅程 ==========\r\n    A1([1.用户旅程工作坊<br/>User Journey Mapping])\r\n    A1 -->|输出| A1_OUT1[用户旅程图<br/>痛点 & 机会]\r\n    A1_OUT1 -->|输出| A1_OUT2[角色 Persona]\r\n\r\n    %% ========== 2. 用户故事地图 ==========\r\n    A1 --> A2([2.用户故事地图<br/>Story Mapping])\r\n    A2 -->|输出| A2_OUT1[故事地图墙<br/>Epic → Story → Task]\r\n    A2 -->|输出| A2_OUT2[故事卡<br/>As-Who-Want-What]\r\n    A2 -->|输出| A2_OUT3[验收标准 AC<br/>Given-When-Then]\r\n\r\n    %% ========== 3. 事件风暴 ==========\r\n    A2_OUT2 --> B0([3.事件风暴<br/>Event Storming])\r\n    B0 -->|每张故事卡| B0_LINK[故事卡 ←→ 领域事件]\r\n    B0 -->|贴纸墙| B0_STEP1[橙色：领域事件]\r\n    B0_STEP1 --> B0_STEP2[蓝色：命令]\r\n    B0_STEP2 --> B0_STEP3[黄色：聚合候选]\r\n    B0_STEP3 --> B0_STEP4[红色：热点/矛盾]\r\n    B0 -->|输出| B0_OUT1[事件流大图]\r\n    B0 -->|输出| B0_OUT2[命令-事件-聚合表]\r\n\r\n    %% ========== 4. 战略设计 ==========\r\n    B0_OUT2 --> C1([4.划分限界上下文])\r\n    C1 -->|输出| C1_OUT[BC图 + 上下文映射]\r\n    C1_OUT --> C2([5.建立通用语言])\r\n    C2 -->|输出| C2_DICT[术语词典 + 代码词汇表]\r\n\r\n    %% ========== 5. 战术设计 ==========\r\n    C2_DICT --> D1([6.战术建模])\r\n    D1 --> D1_ENT[实体 Entity]\r\n    D1 --> D1_AR[聚合根 Aggregate Root]\r\n    D1 --> D1_VO[值对象 Value Object]\r\n    D1 --> D1_DS[领域服务 Domain Service]\r\n    D1 --> D1_REPO[仓储 Repository]\r\n    D1 --> D1_SPEC[规约 Specification]\r\n    D1 -->|输出| D1_MODEL[战术模型图 + 类图]\r\n\r\n    %% ========== 6. 敏捷迭代：故事 → 任务 → 代码 ==========\r\n    D1_MODEL --> E1[7.迭代 backlog]\r\n    E1 --> E2[8.故事卡拆任务]\r\n    E2 --> E3[9.TDD / 单元测试]\r\n    E3 --> E4[10.持续集成]\r\n    E4 --> E5[11.演示 & 验收]\r\n\r\n    %% ========== 7. 需求变更闭环 ==========\r\n    F1([12.新需求 / 变更]) --> F2[ diff 事件流 ]\r\n    F2 --> F3[快速定位受影响的聚合]\r\n    F3 --> F4[更新故事卡 & AC]\r\n    F4 --> E1\r\n    F4 --> B0\r\n\r\n    %% -------------- 样式定义 --------------\r\n    classDef workshop fill:#FFEAA7,stroke:#333,stroke-width:2px\r\n    classDef output fill:#D1F2EB,stroke:#333\r\n    classDef story fill:#FDEDEC,stroke:#333\r\n    classDef change fill:#FADBD8,stroke:#333\r\n    classDef role fill:#EAF2F8,stroke:#333\r\n\r\n    class A1,A2,B0,C1,C2,D1 workshop\r\n    class A1_OUT1,A1_OUT2,A2_OUT1,A2_OUT2,A2_OUT3,B0_OUT1,B0_OUT2,C1_OUT,C2_DICT,D1_MODEL output\r\n    class E1,E2,E3,E4,E5 story\r\n    class F1,F2,F3,F4 change\r\n    class P1,P2,P3,P4,P5,P6 role",
  "size" : 58324,
  "modifiedAt" : 1764658803443,
  "id" : "Web预览系统产品设计.md",
  "content" : "# 文档TOON结构生成与Web预览系统 - 统一产品设计文档（DDD + Spring Cloud + React）\r\n\r\n作者：伍志勇\r\n日期（北京时间）：2025-11-24 16:34:42\r\n版本：v1.0\r\n\r\n## 1. 产品概述\r\n\r\n- 目标：展示指定目录（示例 `/home/agentic/hkt-knowledge`）的全部子目录与文档清单；生成并持久化索引TOON数据到本地 `data/` 目录（不使用PostgreSQL）；左侧树展示结构，右侧预览文档内容。\r\n- 范围：完整枚举目录与文件（支持中文名与Linux路径）；文件预览支持 `.md/.docx/.pdf/.csv/.svg`。\r\n- 核心特性：索引TOON（`files` 块）生成与读取、树状展示、类型识别与预览、缓存与治理。\r\n- 场景：内部/公开文档库的轻量化展示与快速检索。\r\n\r\n## 2. 统一语言与术语（Ubiquitous Language）\r\n\r\n- 目录（Directory/Folder）：以`dirPath/dirName`表示的层级节点\r\n- 文档（Document/File）：以`filePath/fileName/fileType`表示的文件实体\r\n- TOON（面向词元的对象表示法）：结构化块表示，含`fields/data/toonString`\r\n- 预览（Preview）：以`PreviewContent`呈现的可视内容（HTML/PDF/SVG）\r\n\r\n## 3. 领域驱动设计（DDD）\r\n\r\n### 3.1 用户旅程工作坊（User Journey Mapping）\r\n\r\n- 输出：用户旅程图、痛点/机会点、角色与场景列表\r\n\r\n#### 3.1.1 角色（Persona）\r\n\r\n- 访客：浏览与预览文档，不进行上传/下载。\r\n- 管理员：触发重扫、查看状态、清理缓存，保障索引与预览稳定。\r\n\r\n#### 3.1.2 旅程阶段（Stages）\r\n\r\n- 进入应用 → 加载索引（`index.toon/json`） → 浏览树（展开/折叠） → 筛选与定位（关键字/类型过滤） → 点击文档 → 预览渲染（md/docx/pdf/csv/svg） → 错误与降级提示 → 管理操作（重扫/状态/清缓存）。\r\n\r\n#### 3.1.3 痛点与机会点（Pain & Opportunities）\r\n\r\n- 痛点：\r\n  - 大目录加载与渲染性能瓶颈（滚动卡顿、一次性渲染过多节点）。\r\n  - 多语言路径与中文字符的兼容性问题（编码与规范化）。\r\n  - 部分格式解析失败或不支持（例如复杂DOCX或超大PDF）。\r\n  - 索引刷新后前端状态一致性（缓存失效与ETag协同）。\r\n- 机会：\r\n  - 采用TOON高效索引与分页分块，减少传输体积与渲染压力。\r\n  - 树懒加载与虚拟滚动、按需加载预览器，显著提升体验。\r\n  - 统一错误与降级策略，保证“可视化回退”与操作指引。\r\n  - 管理接口支持重扫与状态观察，形成闭环运维能力。\r\n\r\n#### 3.1.4 场景清单（Scenarios）\r\n\r\n- 场景1：首次进入应用 → 自动加载`index.toon` → 左侧树显示根目录与首层节点。\r\n- 场景2：展开目录节点 → 按需请求下一层数据 → 渲染子目录与文档列表。\r\n- 场景3：关键字筛选 → 过滤`name/path`，高亮命中项 → 清空筛选恢复。\r\n- 场景4：点击`.md`文档 → 前端`marked`渲染 → 支持标题目录与代码高亮。\r\n- 场景5：点击`.pdf`文档 → 后端流式返回 → 前端`pdfjs`分页渲染与缩放。\r\n- 场景6：点击`.docx`文档 → 根据决策矩阵选择前端`mammoth`或后端POI → 输出HTML预览。\r\n- 场景7：点击`.csv`文档 → `papaparse`解析 → 表格排序与列宽调整。\r\n- 场景8：点击`.svg`文档 → 直接嵌入`<svg>` → 安全过滤可疑脚本。\r\n- 场景9：预览失败（解析或资源限制） → 显示降级内容或错误页 → 提供“查看原始TOON”。\r\n- 场景10：管理员在状态页触发重扫 → `data/index.toon`更新时间刷新 → 前端树自动刷新或提示手动刷新。\r\n\r\n### 3.2 事件风暴（Event Storming）摘要\r\n\r\n- 业务目标：从指定根目录快速构建可浏览的索引TOON，并按需预览文档。\r\n- 关键事件（Domain Events）：\r\n  - `IndexRequested`（用户/系统发起索引请求）\r\n  - `DirectoryScanned`（目录被遍历完成，发现条目）\r\n  - `ItemEnumerated`（发现目录/文件条目）\r\n  - `IndexPersisted`（索引TOON写入 `data/index.toon` 完成）\r\n  - `IndexLoaded`（前端/API读取索引TOON或JSON派生）\r\n  - `PreviewRequested`（预览请求到达）\r\n  - `PreviewRendered`（预览成功生成）\r\n  - `PreviewFailed`（预览失败，触发降级与错误事件）\r\n  - `RescanTriggered`（运维或配置变更触发重扫）\r\n  - `CacheInvalidated`（扫描变更导致缓存失效）\r\n- 命令（Commands）：`TriggerScan`、`PersistIndex`、`LoadIndex`、`RenderPreview`、`InvalidateCache`、`TriggerRescan`。\r\n- 聚合与读模型：\r\n  - 聚合：`DocumentRepository`（统一维护文件与目录条目、元数据）\r\n  - 读模型：`FilesIndex`（TOON/JSON）、`DirectoryTree`（派生树）、`PreviewContent`\r\n- 策略/规则（Policies）：\r\n  - 配置变更 → 触发 `TriggerRescan`\r\n  - 扫描完成 → `PersistIndex` → 通知前端刷新\r\n  - 预览失败 → 生成降级TOON块或错误响应\r\n- 外部系统：文件系统（Linux）、Redis（缓存）、Config Server（配置）、Nginx（入口）、Prometheus/Grafana（监控）。\r\n- 端到端路径（示例）：\r\n  - 用户打开页面 → `IndexRequested` → 后端`TriggerScan`（或直接`IndexLoaded`）→ 生成并`PersistIndex` → 前端树加载 → 用户点击文件 → `PreviewRequested` → `RenderPreview` → 展示或降级。\r\n\r\n#### 3.2.1 DDD 完整链路图（Mermaid）\r\n\r\n- 迁移说明：该图已移至“附录 E. DDD 完整链路图（Mermaid）”。\r\n\r\n### 3.3 划分限界上下文（Context Slicing）\r\n\r\n- 规则：语言边界、业务一致性、团队边界\r\n- 输出：限界上下文图（Context Map）\r\n\r\n#### 3.3.1 上下文清单（Bounded Contexts）\r\n\r\n- 文档（Document）：负责文档实体、目录树读模型与TOON结构的对外暴露。\r\n- 扫描（Scan）：负责遍历与索引生成、持久化`data/index.toon/index.json`。\r\n- 预览（Preview）：负责类型适配与内容生成（HTML/PDF/SVG）。\r\n- 网关（Gateway）：统一入口、CORS、限流、错误映射与内容协商。\r\n\r\n#### 3.3.2 边界描述（Boundary）\r\n\r\n- Document：\r\n  - 输入：来自Scan的索引、来自Preview的渲染请求。\r\n  - 输出：`DirectoryTree`、`FilesIndex`、`TOONStructure`。\r\n  - 自有模型：`Document`、`FileMetadata`、`TOONStructure`、`DirectoryTree`。\r\n  - 非功能：读取`data`目录只读；缓存命中直接返回；统一错误结构。\r\n- Scan：\r\n  - 输入：配置根目录（Config Server）、重扫命令（Admin）。\r\n  - 输出：`index.toon`与`index.json`、`metadata`更新时间。\r\n  - 自有模型：扫描任务、黑白名单、符号链接校验策略。\r\n  - 非功能：文件系统I/O与并发控制、去重与原子写入、指标监控。\r\n- Preview：\r\n  - 输入：`filePath`与类型参数。\r\n  - 输出：`PreviewContent`（HTML/PDF/SVG）。\r\n  - 自有模型：解析适配器、降级策略、资源限制（线程/内存/超时）。\r\n  - 非功能：安全过滤、内容类型协商、HTTP Range支持。\r\n- Gateway：\r\n  - 输入：前端请求。\r\n  - 输出：路由到各BC、统一错误映射、`ETag/Last-Modified`处理。\r\n  - 自有模型：CORS白名单、限流令牌桶、受支持`Accept`集合。\r\n  - 非功能：日志与审计、告警与熔断策略（可选）。\r\n\r\n#### 3.3.3 防腐层与契约（ACL & Contract）\r\n\r\n- Preview对复杂库（PDFBox/POI）设置适配接口，隔离库细节，返回统一`PreviewContent`。\r\n- Gateway对外统一MIME与错误结构；`Accept: application/x-toon`直通TOON契约；`application/json`返回结构化对象。\r\n- Document与Scan之间采用`index.toon/json`文件契约；更新时间通过`metadata.last_updated`传递。\r\n\r\n#### 3.3.4 团队边界\r\n\r\n- Scan与Preview可由后端团队维护；Document由后端与前端共同维护读模型；Gateway由平台/架构组维护。\r\n\r\n### 3.4 上下文映射（Context Mapping）\r\n\r\n- 模式：合作关系、共享内核、客户-供应商、防腐层ACL、开放主机服务\r\n- 输出：上下文映射图\r\n\r\n#### 3.4.1 关系矩阵（Relationship Matrix）\r\n\r\n- Document ↔ Scan：客户-供应商（Customer–Supplier）。Document消费Scan产出的索引；Scan遵循约定的TOON契约与更新时间规则。\r\n- Document ↔ Preview：开放主机服务（Open Host Service）。Document发起`RenderPreview`调用，Preview暴露统一接口与MIME；失败时返回统一错误结构。\r\n- Gateway ↔ 各BC：开放主机服务 + 防腐层（ACL）。Gateway只曝光稳定契约与错误映射；对内部对象进行DTO转换。\r\n\r\n#### 3.4.2 协作模式说明\r\n\r\n- Published Language：跨上下文统一采用`TOONStructure/PreviewContent/DirectoryTree/FilesIndex`术语与字段命名，避免翻译歧义。\r\n- Anti-Corruption Layer：Preview内部适配第三方解析库；Gateway对外统一MIME与错误；Document保持读模型纯净。\r\n- Shared Kernel（谨慎）：仅在通用工具层共享TOON校验器与时间/路径规范工具，业务模型不共享。\r\n\r\n#### 3.4.3 故障与降级路径\r\n\r\n- Scan失败：保留最近一次`index.toon`并标注`metadata`为旧时间；前端提示“索引可能不是最新”。\r\n- Preview失败：返回降级TOON或错误；前端提供“查看原始TOON”与“稍后重试”。\r\n- Gateway限流：返回429与`Retry-After`，避免雪崩；记录`traceId`与指标。\r\n\r\n#### 3.4.4 一致性与刷新\r\n\r\n- 索引刷新：`IndexPersisted`事件广播（可选）或前端轮询`last_updated`；命中ETag返回304。\r\n- 读写分离：Scan写`data/*`，Document读`data/*`；通过文件锁或原子替换保证一致性。\r\n\r\n### 3.5 建立通用语言（Ubiquitous Language）\r\n\r\n- 指引：术语统一见第2章；代码词汇表见第27章\r\n\r\n#### 3.5.1 角色词汇表\r\n\r\n- 访客（Visitor）：浏览索引、查看预览、不进行写操作。\r\n- 管理员（Admin）：触发重扫、查看运行状态、清理缓存。\r\n\r\n#### 3.5.2 场景词汇表\r\n\r\n- 浏览索引：加载`index.toon/json`并渲染树。\r\n- 展开节点：获取指定目录的子项并渲染。\r\n- 筛选搜索：按`name/path`过滤并高亮命中。\r\n- 预览渲染：根据`fileType`选择适配器生成`PreviewContent`。\r\n- 错误降级：当解析失败时渲染降级内容或错误页。\r\n- 管理重扫：管理员触发重新扫描根目录或子树。\r\n\r\n#### 3.5.3 示例用语（Examples）\r\n\r\n- 作为访客，我希望能快速加载文档树并展开我关心的目录。\r\n- 作为访客，当我点击文档时，系统应返回对应的预览内容或清晰的错误提示。\r\n- 作为管理员，我希望在索引过期或结构变化时，能够一键触发重扫并查看最新更新时间。\r\n\r\n#### 3.5.4 代码词汇一致性\r\n\r\n- 接口与模型统一使用：`filePath/fileName/fileType`、`TOONStructure`、`PreviewContent`、`DirectoryTree`、`FilesIndex`。\r\n- 错误统一：`ErrorResponse{code,message,traceId,details}`；日志包含`traceId`便于定位。\r\n\r\n### 3.6 战术设计（Tactical Modeling）\r\n\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 待补充：战术模型图与类图（ToDo）\r\n\r\n#### 3.6.1 核心领域与聚合\r\n\r\n- 聚合根：`DocumentRepository`，负责文档实体生命周期管理（创建、查询、更新、删除）。\r\n- 上下文划分：\r\n  - 文档领域（核心）：文档实体、TOON结构、文件元数据。\r\n  - 扫描领域：扫描任务与结果，目录遍历与目标格式识别。\r\n  - 预览领域：预览内容生成与格式适配。\r\n\r\n#### 3.6.2 实体与值对象\r\n\r\n- 实体 `Document`（唯一标识 `filePath`）：\r\n  - 属性：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure`（懒加载）、`previewContent`（懒加载）。\r\n- 值对象：\r\n  - `FileMetadata`：`fileSize`、`lastModifiedTime`、`charset`（默认UTF-8）。\r\n  - `TOONStructure`：`rootNode`、`elementCount`、`fields`（List<String>）、`data`（List<Map<String,Object>>）、`toonString`（标准TOON字符串）。\r\n  - `PreviewContent`：`contentType`（text/html、application/pdf、image/svg+xml 等）、`content`（HTML字符串/二进制流/SVG文本）、`supportFullPreview`（boolean）。\r\n  - `DirectoryTree`：`dirPath`、`dirName`、`subDirs`（List<DirectoryTree>）、`documents`（List<DocumentSummary>）。\r\n  - `DocumentSummary`：`filePath`、`fileName`、`fileType`、`fileSize`。\r\n\r\n#### 3.6.3 领域服务\r\n\r\n- `ScanService`：遍历根目录与子目录，识别目标格式、生成 `FileMetadata`，更新仓库。\r\n- `TOONGenerationService`：按文档格式提取结构化数据并生成 `TOONStructure`。\r\n- `PreviewService`：将文档转换为Web可展示的 `PreviewContent`（HTML/PDF/SVG）。\r\n\r\n#### 3.6.4 领域事件\r\n\r\n- 事件（可选）：`DocumentScannedEvent`（扫描完成）、`PreviewRequestedEvent`（预览请求）。\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 参考：3.2 实体与值对象；3.3 领域服务\r\n\r\n#### 3.6.5 战术模型图与类图（文本草案）\r\n\r\n- 实体与值对象：\r\n  - `Document`（Entity）：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure?`、`previewContent?`\r\n  - `FileMetadata`（ValueObject）：`fileSize`、`lastModifiedTime`、`charset`\r\n  - `TOONStructure`（ValueObject）：`rootNode`、`elementCount`、`fields: List<String>`、`data: List<Map<String,Object>>`、`toonString`\r\n  - `PreviewContent`（ValueObject）：`contentType`、`content`、`supportFullPreview`\r\n  - `DirectoryTree`（ValueObject）：`dirPath`、`dirName`、`subDirs: List<DirectoryTree>`、`documents: List<DocumentSummary>`\r\n- 仓储（Repository）：\r\n  - `DocumentRepository`：`findByPath(filePath)`、`save(document)`、`listByDir(dirPath)`、`updateMetadata(filePath, metadata)`\r\n- 领域服务（Domain Service）：\r\n  - `ScanService`：`scan(rootDirs)`、`enumerate(dirPath)`、`persistIndex(dataDir)`\r\n  - `TOONGenerationService`：`fromMd(filePath)`、`fromCsv(filePath)`、`fromDocx(filePath)`、`fromPdf(filePath)`、`fromSvg(filePath)`\r\n  - `PreviewService`：`render(filePath)`（返回`PreviewContent`）\r\n- 工厂与规约（Factory & Specification）：\r\n  - `PreviewAdapterFactory`：按`fileType`返回适配器。\r\n  - `IndexSpecification`：黑白名单、符号链接、编码规范校验。\r\n- 交互关系：\r\n  - 应用层调用`ScanService`生成索引，持久化到`data/index.*`；\r\n  - 应用层调用`PreviewService`产出`PreviewContent`；\r\n  - Document聚合通过`DocumentRepository`装载与更新实体，保持读模型与索引文件一致。\r\n\r\n（Mermaid 可视化）\r\n\r\n```mermaid\r\nclassDiagram\r\ndirection TB\r\n\r\nclass Document {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +parentDir: String\r\n  +fileMetadata: FileMetadata\r\n  +toonStructure: TOONStructure\r\n  +previewContent: PreviewContent\r\n}\r\n\r\nclass FileMetadata {\r\n  +fileSize: long\r\n  +lastModifiedTime: Instant\r\n  +charset: String\r\n}\r\n\r\nclass TOONStructure {\r\n  +rootNode: String\r\n  +elementCount: int\r\n  +fields: List<String>\r\n  +data: List<Map<String,Object>>\r\n  +toonString: String\r\n}\r\n\r\nclass PreviewContent {\r\n  +contentType: String\r\n  +content: Any\r\n  +supportFullPreview: boolean\r\n}\r\n\r\nclass DirectoryTree {\r\n  +dirPath: String\r\n  +dirName: String\r\n  +subDirs: List<DirectoryTree>\r\n  +documents: List<DocumentSummary>\r\n}\r\n\r\nclass DocumentSummary {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +fileSize: long\r\n}\r\n\r\nclass DocumentRepository {\r\n  +findByPath(filePath: String): Document\r\n  +save(document: Document): void\r\n  +listByDir(dirPath: String): List<DocumentSummary>\r\n  +updateMetadata(filePath: String, metadata: FileMetadata): void\r\n}\r\n\r\nclass ScanService {\r\n  +scan(rootDirs: List<String>): void\r\n  +enumerate(dirPath: String): List<FilesIndexItem>\r\n  +persistIndex(dataDir: String): void\r\n}\r\n\r\nclass TOONGenerationService {\r\n  +fromMd(filePath: String): TOONStructure\r\n  +fromCsv(filePath: String): TOONStructure\r\n  +fromDocx(filePath: String): TOONStructure\r\n  +fromPdf(filePath: String): TOONStructure\r\n  +fromSvg(filePath: String): TOONStructure\r\n}\r\n\r\nclass PreviewService {\r\n  +render(filePath: String): PreviewContent\r\n}\r\n\r\nclass PreviewAdapterFactory {\r\n  +getAdapter(fileType: FileType): PreviewAdapter\r\n}\r\n\r\nclass PreviewAdapter\r\nclass MdAdapter\r\nclass PdfAdapter\r\nclass DocxAdapter\r\nclass CsvAdapter\r\nclass SvgAdapter\r\n\r\nDocument *-- FileMetadata\r\nDocument o-- TOONStructure\r\nDocument o-- PreviewContent\r\nDirectoryTree o-- DocumentSummary\r\nDocumentRepository ..> Document : load/save\r\nScanService ..> DocumentRepository : enumerate/listByDir\r\nScanService ..> DirectoryTree : derive\r\nTOONGenerationService ..> TOONStructure\r\nPreviewService ..> PreviewContent\r\nPreviewService ..> PreviewAdapterFactory\r\nPreviewAdapterFactory ..> PreviewAdapter\r\nPreviewAdapter <|.. MdAdapter\r\nPreviewAdapter <|.. PdfAdapter\r\nPreviewAdapter <|.. DocxAdapter\r\nPreviewAdapter <|.. CsvAdapter\r\nPreviewAdapter <|.. SvgAdapter\r\n```\r\n\r\n### 3.2.2 命令-事件-聚合表（草案）\r\n\r\n\r\n| 业务动作   | 命令              | 触发条件           | 领域事件                                              | 聚合/读模型            | 备注                                                  |\r\n| ---------- | ----------------- | ------------------ | ----------------------------------------------------- | ---------------------- | ----------------------------------------------------- |\r\n| 索引扫描   | `TriggerScan`     | 用户/定时/配置变更 | `DirectoryScanned`、`ItemEnumerated`                  | `DocumentRepository`   | 生成`FilesIndex`候选；跳过隐藏/黑名单                 |\r\n| 持久化索引 | `PersistIndex`    | 扫描完成           | `IndexPersisted`                                      | `DocumentRepository`   | 写入`data/index.toon`与`metadata`；可派生`index.json` |\r\n| 加载索引   | `LoadIndex`       | 前端或API请求      | `IndexLoaded`                                         | `FilesIndex`（读模型） | 返回TOON或JSON，支持内容协商                          |\r\n| 请求预览   | `RenderPreview`   | 用户点击文件       | `PreviewRequested`、`PreviewRendered`/`PreviewFailed` | `PreviewService`       | 支持md/docx/pdf/csv/svg；失败降级                     |\r\n| 清缓存     | `InvalidateCache` | 管理操作/变更检测  | `CacheInvalidated`                                    | Cache层                | 失效`toon:`/`preview:`键；ETag刷新                    |\r\n| 触发重扫   | `TriggerRescan`   | Admin接口调用      | `RescanTriggered`                                     | `ScanService`          | 全量或增量；更新`last_updated`                        |\r\n\r\n### 3.3.1 限界上下文图（草案表格）\r\n\r\n\r\n| 上下文（BC）     | 职责                        | 上游             | 下游             | 关系模式                 | 防腐层                 | UL关键词                                     |\r\n| ---------------- | --------------------------- | ---------------- | ---------------- | ------------------------ | ---------------------- | -------------------------------------------- |\r\n| 文档（Document） | 文档实体/TOON/目录树读模型  | 扫描（Scan）     | 预览（Preview）  | 客户-供应商（对Scan）    | 路径/编码规范；DTO映射 | `filePath`、`TOONStructure`、`DirectoryTree` |\r\n| 扫描（Scan）     | 遍历与索引生成、持久化index | Config Server    | 文档（Document） | 开放主机服务（暴露索引） | 黑白名单/符号链接校验  | `files[count]{path,type,name}`、`metadata`   |\r\n| 预览（Preview）  | 各类型预览内容生成          | 文档（Document） | 网关/前端        | 防腐层（对复杂格式库）   | 解析库接口封装         | `PreviewContent`、降级策略                   |\r\n| 网关（Gateway）  | 统一入口/CORS/限流          | 前端             | 各BC API         | 开放主机服务             | 统一错误映射           | `Accept`、`ETag`                             |\r\n\r\n### 3.7 实现（Code & UT）\r\n\r\n- 结构：模块-聚合-分层；接口层/应用层/领域层/基础设施层\r\n- 规约：业务规则单元测试、EBNF语法校验测试\r\n\r\n#### 3.7.1 关键模块清单（Backend）\r\n\r\n- `gateway`：路由、CORS、限流、错误映射、ETag处理。\r\n- `document-service`\r\n  - Controller：`DocumentController`（tree/toon/preview/scan/index接口）。\r\n  - Application：用例编排与事务控制（按目录粒度）。\r\n  - Domain：`ScanService`、`TOONGenerationService`、`PreviewService`、`DocumentRepository`。\r\n  - Infra：文件遍历器、TOON校验器、预览适配器（PDFBox/POI/OpenCSV等）。\r\n- `preview-worker`（可选）：队列消费者，异步执行重解析任务。\r\n\r\n#### 3.7.2 关键模块清单（Frontend）\r\n\r\n- 页面：`TreePage`（索引树与筛选）、`PreviewPage`（文档预览）、`AdminPage`（重扫与状态）。\r\n- 组件：`DirectoryTree`、`PreviewPane(md/pdf/docx/csv/svg)`、`SearchBar`、`StatusBadge`。\r\n- 状态：React Query 请求层、缓存策略与错误提示。\r\n\r\n#### 3.7.3 UT用例索引（Backend）\r\n\r\n- `ScanServiceTest`：\r\n  - 枚举跳过隐藏/黑名单；符号链接白名单校验；大目录性能阈值。\r\n  - `index.toon`生成与`metadata`时间格式（北京时区）。\r\n- `TOONGenerationServiceTest`：\r\n  - CSV/MD/DOCX/PDF/SVG五类解析一致性与转义校验；降级块生成。\r\n- `PreviewServiceTest`：\r\n  - 各类型适配与MIME；PDF Range分页；超时与内存限制保护。\r\n- `GatewayErrorMappingTest`：\r\n  - 错误码与HTTP映射；`traceId`传递；CORS预检缓存。\r\n\r\n#### 3.7.4 UT用例索引（Frontend）\r\n\r\n- `TreeRender.spec.tsx`：懒加载/虚拟滚动/分页段落；筛选与高亮。\r\n- `PreviewMd.spec.tsx`、`PreviewPdf.spec.tsx`、`PreviewDocx.spec.tsx`、`PreviewCsv.spec.tsx`、`PreviewSvg.spec.tsx`：渲染与错误降级。\r\n- `AdminRescan.spec.tsx`：重扫后更新时间刷新与提示。\r\n\r\n### 3.8 持续演进（Evolution）\r\n\r\n- 活动：领域事件回放、模型重构、定期事件风暴\r\n- 参考：12 运行保障；12 扩展性与演进\r\n\r\n#### 3.8.1 演进周期\r\n\r\n- 每周：事件风暴复盘（针对新增/变化的领域事件与命令），更新命令-事件-聚合表。\r\n- 每两周：Story Map梳理与迭代计划评审；MVP/V1/V2增量验收。\r\n- 每月：非功能指标回顾（`latency p95/p99`、`cache_hit_ratio`、`parse_success_rate`）与容量策略调整。\r\n\r\n#### 3.8.2 触发机制\r\n\r\n- 配置刷新（Config Server）：根目录或限流/缓存参数变更 → 增量/全量重扫（5分钟窗口）。\r\n- 文件系统事件（inotify）：新增/修改/删除 → 局部重扫与缓存失效。\r\n- 指标阈值：当`parse_success_rate`连续低于阈值或`api_latency_p99`升高 → 降级策略启用与资源上限调整。\r\n\r\n#### 3.8.3 版本演进\r\n\r\n- MVP → V1 → V2：对应“用户故事地图”的版本切片；优先保证索引浏览与`.md`预览，逐步引入其他格式与后台能力。\r\n\r\n#### 3.8.4 领域事件回放\r\n\r\n- 支持将扫描与预览关键步骤记录为事件流水，便于定位问题与重现；必要时对比两版索引差异（`diff index.toon`）。\r\n\r\n#### 3.8.5 风险与回退\r\n\r\n- 索引文件损坏或不可读：回退到最近一次可用索引并提示“索引可能过期”。\r\n- 预览解析崩溃：触发熔断与降级，限制并发与内存，记录失败样本用于事后分析。\r\n\r\n## 4. 架构设计（Spring Cloud + React）\r\n\r\n- 服务组件：\r\n  - `gateway`（统一入口、CORS策略、限流可选）。\r\n  - `eureka`（服务发现）。\r\n  - `config-server`（集中配置，含根目录数组与定时参数）。\r\n  - `document-service`（领域服务：扫描、TOON、预览API）。\r\n  - 可选 `preview-worker`（重解析任务异步化：PDF/DOCX转HTML）。\r\n- 技术选型：\r\n  - 后端：Java 17、Spring Boot 3、Lombok（简化）、POI（docx）、PDFBox（pdf）、OpenCSV（csv）、Tika（类型识别）、Redis（缓存）。\r\n  - 前端：React 18、TypeScript、Ant Design 5、Vite；预览库：`marked`（md）、`pdfjs-dist`（pdf）、`mammoth`（docx）、`papaparse`（csv）、原生`<svg>`（svg）。\r\n  - 部署：Docker、Nginx（负载均衡）、Jenkins + GitLab（CI/CD）、Kubernetes（可选）；监控：Prometheus + Grafana；日志：ELK。\r\n- 依赖关系：接口层（Web/网关）→ 应用层（用例编排）→ 领域层（模型与服务）→ 基础设施层（文件系统与解析库）。\r\n\r\n## 5. TOON语法规范\r\n\r\n- 语法范式：`blockName[count]{field1,field2,...}: record1; record2; ...`\r\n- 记录表达：每条记录为逗号分隔的字段值；记录间以分号或换行分隔；允许空值（空字符串）。\r\n- 转义规则：值中包含逗号/分号/换行时使用 `\\,` `\\;` `\\n`；反斜杠使用 `\\\\`；统一UTF-8编码。\r\n- 多块输出：响应可包含多个块，按语义顺序组织，例如：\r\n  - `directories[2]{path}: /docs; /images`\r\n  - `documents[3]{id,name,path,type}: 1,readme.md,/docs/readme.md,md; 2,report.docx,/docs/report.docx,docx; 3,data.csv,/data/data.csv,csv`\r\n- 元数据块：`metadata{total,last_updated,page,size}: 3,2025-11-24T11:27:16+08:00,1,100`（时间统一为北京时间，ISO-8601）。\r\n- 令牌优化：字段顺序固定；避免冗余键；尽量合并表头/重复值；非必要标点禁止；大集合按分页块分段返回。\r\n- 兼容性：中文目录/文档名与中文字段值允许；统一UTF-8；建议使用NFC规范化。\r\n- EBNF描述：\r\n  - `block ::= name '[' count ']' '{' fields '}' ':' records`\r\n  - `fields ::= field { ',' field }`\r\n  - `records ::= record { (';' | NEWLINE) record }`\r\n  - `record ::= value { ',' value }`\r\n  - `value ::= TEXT | ESCAPED`\r\n- `ESCAPED ::= '\\\\,' | '\\\\;' | '\\\\n' | '\\\\\\\\'`\r\n- `name, field, TEXT 采用 UTF-8；推荐NFC规范化`\r\n\r\n### 5.1 索引TOON（files块）规范\r\n\r\n- 目的：持久化指定根目录的目录与文件枚举，供Web应用加载展示。\r\n- 语义：`files[count]{path,type,name}:` 后接按行/分号分隔的记录；`type` 取 `directory|file`；`path` 为相对根的Linux风格路径；`name` 为条目名。\r\n- 元数据：附加 `metadata{total,last_updated,root}: count,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n- 示例：\r\n  - `files[12]{path,type,name}:`\r\n  - `hkt-knowledge/,directory,hkt-knowledge`\r\n  - `hkt-knowledge/hkt-product/,directory,hkt-product`\r\n  - `hkt-knowledge/hkt-product/hkt-agentic/,directory,hkt-agentic`\r\n  - `hkt-knowledge/hkt-product/industrial-brain/,directory,industrial-brain`\r\n  - `hkt-knowledge/hkt-project/,directory,hkt-project`\r\n  - `hkt-knowledge/hkt-project/docs/,directory,docs`\r\n  - `hkt-knowledge/hkt-project/docs/gitlab流水线触发指南.md,file,gitlab流水线触发指南.md`\r\n  - `hkt-knowledge/hkt-project/docs/会议纪要模版.md,file,会议纪要模版.md`\r\n  - `hkt-knowledge/hkt-project/docs/孚盟学习网址.md,file,孚盟学习网址.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.md,file,客户地理位置分布.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.xlsx,file,客户地理位置分布.xlsx`\r\n  - `hkt-knowledge/hkt-project/docs/广告推广国家.md,file,广告推广国家.md`\r\n  - `hkt-knowledge/test-document.md,file,test-document.md`\r\n  - `metadata{total,last_updated,root}: 12,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n\r\n## 6. 功能模块设计\r\n\r\n### 6.1 扫描模块\r\n\r\n- 配置根目录（单/多），在 `config-server` 配置，如 `app.scan.root-dirs=[\"/home/agentic/hkt-knowledge\"]`；默认取第一个根进行索引持久化。\r\n- 支持手动触发与定时扫描（默认每1小时，可配置）；跳过隐藏文件/目录（如 `.git/`）。\r\n- 扫描遍历目录与文件，生成 `files[count]{path,type,name}` 索引TOON；写入本地 `data/index.toon`（附 `metadata` 块）。\r\n- 可选生成派生 `data/index.json`（仅供前端树快速加载）。\r\n\r\n### 6.2 TOON生成模块\r\n\r\n- 首次访问懒加载生成，生成后按 `filePath` 缓存（Redis）默认1小时。\r\n- 无法提取结构化数据时生成默认TOON（例如PDF纯文本）。\r\n- 标准TOON输出包含对象字段与 `toonString` 字符串。\r\n\r\n### 6.3 Web展示模块\r\n\r\n- 左侧 Tree 展示 `DirectoryTree`，支持展开/折叠、类型图标区分。\r\n- 右侧预览按类型加载对应预览器：\r\n  - `.md` → `marked` 转 HTML；\r\n  - `.pdf` → `pdfjs-dist` 渲染二进制流，支持滚动/缩放；\r\n  - `.docx` → 后端 POI 转 HTML 或前端 `mammoth`；\r\n  - `.csv` → `papaparse` → `Antd Table`，支持排序；\r\n  - `.svg` → 原始文本嵌入 `<svg>`。\r\n- 交互限制：不提供下载按钮，禁用右键保存（前端限制）。\r\n\r\n## 7. API设计（REST）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 描述：获取目录树结构。\r\n  - 返回：`DirectoryTree`。\r\n- `GET /api/v1/document/toon?filePath=...`\r\n  - 描述：获取文档TOON结构。\r\n  - 返回：`TOONStructure`。\r\n- `GET /api/v1/document/preview?filePath=...`\r\n  - 描述：获取文档预览内容。\r\n  - 返回：`PreviewContent`（HTML字符串/PDF流/SVG文本）。\r\n- `POST /api/v1/document/scan`\r\n  - 描述：触发手动扫描。\r\n  - 返回：`ScanResult`（新增/更新/删除数量等）。\r\n\r\n### 7.1 索引加载接口\r\n\r\n- `GET /api/v1/index/toon`\r\n  - 描述：返回持久化的索引TOON（`data/index.toon`）。\r\n  - 返回：MIME `application/x-toon` 或 `text/plain; charset=UTF-8`。\r\n- `GET /api/v1/index/json`\r\n  - 描述：返回索引的JSON派生结构（`data/index.json`）。\r\n  - 返回：`FilesIndex`（数组）。\r\n\r\n### 7.2 请求参数\r\n\r\n- 获取目录树 `GET /api/v1/document/tree`\r\n  - 可选：`rootDir`（字符串，默认配置的全部根目录）、`path`（仅返回指定路径子树）、`depth`（整数，默认2）、`page`、`size`（分段加载）。\r\n- 获取文档TOON `GET /api/v1/document/toon`\r\n  - 必填：`filePath`；可选：`format=both|toon|json`（默认both）、`page`、`size`（大集合分页）。\r\n- 获取文档预览 `GET /api/v1/document/preview`\r\n  - 必填：`filePath`；可选（PDF）：`startPage`、`endPage`。\r\n- 触发手动扫描 `POST /api/v1/document/scan`\r\n  - 可选：`dirPath`（仅扫描指定目录）、`force`（布尔，是否跳过缓存直接重扫）。\r\n\r\n### 7.3 响应示例（节选）\r\n\r\n- 目录树（JSON）：\r\n  - `{ \"dirPath\": \"/opt/docs\", \"dirName\": \"docs\", \"subDirs\": [{\"dirPath\":\"/opt/docs/api\",\"dirName\":\"api\",\"subDirs\":[],\"documents\":[]}], \"documents\": [{\"filePath\":\"/opt/docs/readme.md\",\"fileName\":\"readme.md\",\"fileType\":\"MD\",\"fileSize\":1024}] }`\r\n- 文档TOON（both）：\r\n  - `{ \"rootNode\":\"users\", \"elementCount\":2, \"fields\":[\"id\",\"name\",\"role\"], \"data\":[{\"id\":1,\"name\":\"张三\",\"role\":\"admin\"},{\"id\":2,\"name\":\"李四\",\"role\":\"user\"}], \"toonString\":\"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n- 文档预览（PDF片段）：\r\n  - 头：`Content-Type: application/pdf`，支持 Range；体为二进制流；JSON模式示例：`{ \"contentType\":\"application/pdf\", \"content\":\"<base64>\", \"supportFullPreview\": false }`\r\n\r\n### 7.4 接口参数表（摘要）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 必填：无\r\n  - 可选：`rootDir`、`path`、`depth`、`page`、`size`\r\n- `GET /api/v1/document/toon`\r\n  - 必填：`filePath`\r\n  - 可选：`format=both|toon|json`、`page`、`size`\r\n- `GET /api/v1/document/preview`\r\n  - 必填：`filePath`\r\n  - 可选：`startPage`、`endPage`（PDF）\r\n- `POST /api/v1/document/scan`\r\n  - 必填：无\r\n  - 可选：`dirPath`、`force`\r\n\r\n### 7.5 OpenAPI草案（节选）\r\n\r\n```yaml\r\nopenapi: 3.0.0\r\ninfo:\r\n  title: 文档TOON结构生成与Web预览系统 API\r\n  version: 1.0.0\r\npaths:\r\n  /api/v1/document/tree:\r\n    get:\r\n      summary: 获取目录树结构\r\n      parameters:\r\n        - in: query\r\n          name: rootDir\r\n          schema: { type: string }\r\n        - in: query\r\n          name: path\r\n          schema: { type: string }\r\n        - in: query\r\n          name: depth\r\n          schema: { type: integer, minimum: 0, default: 2 }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer, minimum: 1, default: 1 }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer, minimum: 1, default: 200 }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/DirectoryTree' } } } }\r\n        '400': { $ref: '#/components/responses/Error400' }\r\n  /api/v1/document/toon:\r\n    get:\r\n      summary: 获取文档TOON结构\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: format\r\n          schema: { type: string, enum: [both, toon, json], default: both }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/TOONStructure' } }, application/x-toon: { schema: { type: string } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n        '422': { $ref: '#/components/responses/Error422' }\r\n  /api/v1/document/preview:\r\n    get:\r\n      summary: 获取文档预览内容\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: startPage\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: endPage\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/PreviewContent' } }, application/pdf: { schema: { type: string, format: binary } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n  /api/v1/document/scan:\r\n    post:\r\n      summary: 触发手动扫描\r\n      requestBody:\r\n        content:\r\n          application/json:\r\n            schema:\r\n              type: object\r\n              properties:\r\n                dirPath: { type: string }\r\n                force: { type: boolean, default: false }\r\n      responses:\r\n        '200': { description: OK }\r\ncomponents:\r\n  schemas:\r\n    DirectoryTree:\r\n      type: object\r\n      properties:\r\n        dirPath: { type: string }\r\n        dirName: { type: string }\r\n        subDirs:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DirectoryTree' }\r\n        documents:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DocumentSummary' }\r\n    DocumentSummary:\r\n      type: object\r\n      properties:\r\n        filePath: { type: string }\r\n        fileName: { type: string }\r\n        fileType: { type: string, enum: [MD, DOCX, PDF, CSV, SVG] }\r\n        fileSize: { type: integer }\r\n    TOONStructure:\r\n      type: object\r\n      properties:\r\n        rootNode: { type: string }\r\n        elementCount: { type: integer }\r\n        fields: { type: array, items: { type: string } }\r\n        data: { type: array, items: { type: object } }\r\n        toonString: { type: string }\r\n    PreviewContent:\r\n      type: object\r\n      properties:\r\n        contentType: { type: string }\r\n        content: { type: string }\r\n        supportFullPreview: { type: boolean }\r\n    ErrorResponse:\r\n      type: object\r\n      properties:\r\n        code: { type: string }\r\n        message: { type: string }\r\n        traceId: { type: string }\r\n        details: { type: object }\r\n  responses:\r\n    Error400:\r\n      description: Bad Request\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error404:\r\n      description: Not Found\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error422:\r\n      description: Unprocessable Entity\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n```\r\n\r\n### 7.6 API协商与返回模式\r\n\r\n- `GET /api/v1/document/toon?filePath=...&format=both|toon|json&page=1&size=100`\r\n  - `format`：返回模式；默认 `both`（结构体与 `toonString` 同时返回）。\r\n  - 分页：对大集合型TOON可使用 `page/size`；响应中同时返回 `metadata` 块说明总数、页码与最后更新时间。\r\n- 内容协商：支持 `Accept: application/x-toon` 强制仅返回 `toonString`（MIME：`application/x-toon`）；`application/json` 返回对象结构；无 `Accept` 或 `*/*` 返回默认 `both`。\r\n- 预览分页：`GET /api/v1/document/preview?filePath=...&startPage=1&endPage=10`（PDF），支持HTTP Range；单次最大返回页数 `<= 20`。\r\n- 响应示例：\r\n  - JSON：`{ rootNode: \"users\", elementCount: 2, fields: [\"id\",\"name\",\"role\"], data: [{id:1,name:\"张三\",role:\"admin\"},{id:2,name:\"李四\",role:\"user\"}], toonString: \"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n  - TOON：`users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- 兼容降级策略：若代理/浏览器不识别 `application/x-toon`，可回退使用 `text/plain; charset=UTF-8` 返回 `toonString`。\r\n- 配置项（Config Server）：`preview.pdf.max-pages-per-request=20`、`gateway.response.supported-accepts=application/json,application/x-toon,*/*`。\r\n\r\n## 8. 数据结构定义（概念约定）\r\n\r\n- 枚举 `FileType`：MD/DOCX/PDF/CSV/SVG。\r\n- 实体 `Document`：见 3.2。\r\n- 值对象 `TOONStructure`：见 3.2。\r\n- 前端 TypeScript 约定：\r\n  - `DirectoryTree { dirPath: string; dirName: string; subDirs: DirectoryTree[]; documents: DocumentSummary[] }`\r\n  - `DocumentSummary { filePath: string; fileName: string; fileType: FileType; fileSize: number }`\r\n  - `TOONStructure { rootNode: string; elementCount: number; fields: string[]; data: Array<Record<string, any>>; toonString: string }`\r\n  - `PreviewContent { contentType: string; content: string | ArrayBuffer; supportFullPreview: boolean }`\r\n  - `FilesIndexItem { path: string; type: 'directory' | 'file'; name: string }`\r\n  - `FilesIndex = FilesIndexItem[]`\r\n\r\n## 9. TOON生成规则（按格式）\r\n\r\n- CSV：第一行为 `fields`，其余行为 `data`；`rootNode` 为文件名；`elementCount` 为数据行数。\r\n- MD：优先提取表格数据（列名→`fields`，行→`data`）；次选列表结构。\r\n- DOCX：提取表格优先，其次段落标题；规则对齐MD。\r\n- PDF：尽力提取表格/结构化；若不可行，则 `fields=[\"content\"]`，`data` 为文本片段。\r\n- SVG：`fields=[\"width\",\"height\",\"elementsCount\"]`，`data` 为SVG元数据。\r\n\r\n## 10. 治理与合规\r\n\r\n### 10.1 路径与编码规范（Linux/中文）\r\n\r\n- 运行环境：Linux；路径分隔符 `/`；大小写敏感；禁止Windows样式路径。\r\n- 编码与规范化：文件/目录名统一UTF-8；建议NFC规范化；拒绝包含控制字符与非法路径片段（如 `..` 越权）。\r\n- 符号链接策略：禁止跨根目录的符号链接访问；允许根目录内的符号链接但需解析到真实路径并做白名单校验；检测越权即拒绝。\r\n- 默认黑名单：`.git/`、`.svn/`、`node_modules/`、`target/`、`.DS_Store`、临时/隐藏文件（以 `.` 开头）。\r\n- 白名单：所有访问严格限制在配置的根目录集合内；任何跨目录或符号链接越权访问拒绝。\r\n\r\n### 10.2 安全与访问限制\r\n\r\n- 根目录访问严格限制在配置集合内，拒绝跨目录访问与路径遍历（规范化路径校验）。\r\n- 网关层启用CORS白名单策略，仅允许指定来源域名。\r\n- 前端禁用右键保存与下载入口（仅UI限制，无法完全阻止恶意抓取）。\r\n\r\n### 10.3 错误与响应格式\r\n\r\n- 统一错误JSON：`{ code: string, message: string, traceId: string, details?: object, locale?: string }`\r\n- HTTP状态码：\r\n  - 400 参数错误（非法filePath、越权路径）。\r\n  - 404 文件不存在或不支持格式。\r\n  - 409 并发冲突（扫描进行中）。\r\n  - 422 解析失败（TOON/预览生成失败）。\r\n  - 429 请求过多（限流）。\r\n  - 500 服务器内部错误。\r\n- 网关错误映射：统一成上述错误结构并记录 `traceId`。\r\n- 错误码字典：`INVALID_PATH`、`UNSUPPORTED_TYPE`、`FILE_NOT_FOUND`、`PARSE_FAILED`、`CONFLICT`、`RATE_LIMITED`、`INTERNAL_ERROR`。\r\n- CORS与预检：配置 `Access-Control-Allow-Origin`（白名单）、`Access-Control-Allow-Methods`、`Access-Control-Allow-Headers`、`Access-Control-Max-Age=600`。\r\n\r\n#### 10.3.1 错误码与HTTP映射（示例）\r\n\r\n- `INVALID_PATH` → 400；消息：路径非法或越权访问\r\n- `FILE_NOT_FOUND` → 404；消息：文件不存在\r\n- `UNSUPPORTED_TYPE` → 404；消息：格式不支持\r\n- `CONFLICT` → 409；消息：资源冲突或扫描进行中\r\n- `PARSE_FAILED` → 422；消息：解析失败，返回降级内容或提示\r\n- `RATE_LIMITED` → 429；消息：请求过多，请稍后重试\r\n- `INTERNAL_ERROR` → 500；消息：服务器内部错误\r\n\r\n## 9. 非功能与性能\r\n\r\n- 异步扫描与大目录优化（并发遍历、I/O分离、批量缓存更新）。\r\n- 跳过隐藏文件与目录，避免无意义解析。\r\n- 大文件（>100MB）预览仅加载前10页（PDF），显示分页控件与提示。\r\n- TOON结构与预览内容缓存默认1小时，可配置；命中则直接返回。\r\n- 兼容性：现代浏览器（Chrome/Firefox/Edge ≥ 88）。\r\n\r\n## 10. 部署与运维\r\n\r\n- 容器化：Docker 镜像构建；Nginx 反向代理与负载均衡；Jenkins + GitLab CI/CD。\r\n- 微服务：Eureka 服务发现；Config Server 管理根目录与扫描周期；\r\n- 监控：Prometheus 采集接口与调度指标；Grafana 仪表盘；\r\n- 日志：ELK 聚合 `document-service` 扫描/预览日志与异常。\r\n\r\n## 11. 用户故事与验收标准\r\n\r\n- 用户故事1：查看文档树结构\r\n  - Given 配置的根目录存在，When 应用启动，Then 自动扫描并生成TOON数据，左侧显示树状结构。\r\n  - Given 树已显示，When 点击目录节点，Then 展开子目录与文档清单。\r\n  - Given 树已显示，When 点击文档节点，Then 右侧预览文档内容。\r\n- 用户故事2：预览文档内容\r\n  - Given 用户点击文档节点，When 文档类型为 md/docx/pdf/csv/svg，Then 在右侧渲染对应预览。\r\n  - Given 预览界面显示，When 文档格式不支持，Then 显示“预览不支持”提示。\r\n  - Given 预览功能，Then 不提供下载或上传选项。\r\n\r\n### 用户故事地图（Story Map）\r\n\r\n- Backbone（活动）：浏览索引 → 查找与筛选 → 查看预览 → 管理重扫 → 运行保障\r\n- 用户角色：访客（浏览/预览）、管理员（重扫/状态/清缓存）\r\n- 活动拆分与步骤：\r\n  - 浏览索引：加载`index.toon/json` → 渲染树 → 展开/折叠 → 类型图标\r\n  - 查找与筛选：关键字筛选（按`name/path`，可选）→ 类型过滤（file/directory）→ 清空筛选\r\n  - 查看预览：点击文件 → 加载对应预览器（md/docx/pdf/csv/svg）→ 错误降级提示\r\n  - 管理重扫：进入管理页 → 选择目录 → 触发`admin/rescan` → 观察更新时间\r\n  - 运行保障：限流/缓存生效 → 监控指标回报 → 故障时降级与重试\r\n- 版本切片：\r\n  - MVP：加载索引、树浏览、`.md`预览、错误页提示\r\n  - V1：`.pdf/.docx/.csv/.svg`预览、`index.json`派生、限流与缓存\r\n  - V2：异步预览worker、管理后台页面、监控与告警、筛选搜索\r\n- 验收视角：每步具备可见输出（树渲染/预览/状态）、错误有统一文案、操作有可回退路径。\r\n\r\n## 12. 扩展性与演进\r\n\r\n- 新增格式时：实现 `TOONGenerationService` 与 `PreviewService` 的新适配方法，注册到策略表。\r\n- 多根目录：`config-server` 支持数组配置与动态刷新；扫描服务按目录并发执行。\r\n- 异步预览：将重解析任务下沉至 `preview-worker`，通过Kafka异步处理与Redis结果回填。\r\n\r\n## 13. 参考来源与整合说明\r\n\r\n- 参考文档：\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（豆包）.md:193-198（技术选型）、269-317/281-307（API端点）、205-213（扫描策略）、141-149（TOON规则）、385-392（安全/CORS）、377-384（性能/缓存）、239-252（交互）、40-65/67-125（模型）、175-185（分层）、400-405（扩展性）、77-90（TOON对象）。\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（DeepSeek）.md:53-58（前后端建议与预览库）、45-48（预览不支持提示）、58（Docker容器化）、36-49（用户故事与验收）、124-125（异步与性能）。\r\n- 参考文章：知乎《TOON vs JSON：现代数据格式的巅峰对决》 https://zhuanlan.zhihu.com/p/1973687597361566533（TOON语法、块结构与令牌效率要点）。\r\n- 整合原则：以“豆包”工程化规则为主干，吸收“DeepSeek”的快速实现与容器建议，并统一到 React + AntD + Vite 前端与 Spring Cloud + Java 后端的栈约束下。\r\n\r\n## 12. 运行保障\r\n\r\n### 12.1 缓存与失效策略\r\n\r\n- Redis键设计：\r\n  - TOON：`toon:{sha256(filePath)}:{version}`；预览：`preview:{sha256(filePath)}:{pageRange}`。\r\n  - 版本计算：默认 `sha256(filePath + mtime + size)`；可选 `sha256(content)`（大文件时按区块）。\r\n- TTL：默认1小时；大文件预览可单独设置TTL。\r\n- 失效触发：\r\n  - 扫描发现变更（新增/修改/删除）即失效对应键。\r\n  - 手动触发重扫或管理接口清缓存。\r\n- HTTP缓存：使用 `ETag` 与 `Last-Modified`；命中直接返回304。\r\n- 容量与逐出：配置最大容量；策略LRU或LFU；指标监控命中率与逐出率。\r\n\r\n### 12.2 监控指标与限流建议\r\n\r\n- 监控指标：\r\n  - `scan_duration_ms`、`parse_success_rate`、`cache_hit_ratio`、`api_latency_p95`、`api_latency_p99`、`queue_backlog`。\r\n- 限流：\r\n  - 基于IP或令牌的令牌桶；默认每IP每分钟 120 次，突发 30；超限返回429并提供 `Retry-After` 与统一错误页文案。\r\n\r\n### 12.3 稳定性与运行策略\r\n\r\n- 扫描策略：\r\n  - 定时扫描（默认每小时）与Linux inotify文件事件监听结合；事件驱动优先，周期性补偿。\r\n  - 多根目录并发扫描需保证仓库更新的原子性与去重。\r\n- 并发与锁：Repository更新采用分段锁（按目录粒度）与批处理事务，避免写入冲突；去重基于 `filePath+hash`。\r\n- 重试与退避：解析失败指数退避（初始500ms，最大4s，最多3次）；区分可重试/不可重试错误并记录失败样本。\r\n- 资源限制：为PDFBox/POI设置并发线程上限（≤CPU核数）、单文件解析超时（≤10s）与内存上限，防止OOM。\r\n- 配置刷新：`config-server` 变更后触发增量重扫（变更目录）或在 5 分钟窗口内全量重扫。\r\n\r\n## 附录 A. 示例用例（各格式TOON）\r\n\r\n- CSV：\r\n  - `users[2]{id,name,role}: 1,张三,admin; 2,李四,user`\r\n  - `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- MD（表格）：\r\n  - `features[3]{name,status}: 目录树,done; 预览,doing; 缓存,pending`\r\n- DOCX（表格优先）：\r\n  - `requirements[2]{item,priority}: TOON语法规范,high; 错误格式统一,high`\r\n- DOCX 适配决策矩阵：\r\n  - 条件：文档体积 < 5MB，样式简单（纯文本/基本表格） → 选择：前端 `mammoth` → 理由：轻量、减少后端负载 → 降级：复杂样式检测失败则回退后端POI\r\n  - 条件：包含复杂表格/图片/页眉页脚/公式 → 选择：后端 POI 转 HTML → 理由：解析更稳定、可控 → 降级：无法完整转换时输出文本TOON块\r\n  - 条件：超大文件 ≥ 20MB → 选择：后端 POI 分段解析 → 理由：内存与性能控制 → 降级：仅抽取段落摘要或表格前N行\r\n  - 条件：中文大段与混合编码 → 选择：后端统一UTF-8并规范化 → 理由：保证TOON一致性 → 降级：不可识别字符替换为占位符\r\n- PDF（文本降级）：\r\n  - `content[1]{content}: 项目概述\\n支持五类文档\\n缓存1小时`\r\n- SVG（元数据）：\r\n  - `svg_meta[1]{width,height,elementsCount}: 800,600,42`\r\n- 复杂示例（多块顺序与关联）：\r\n  - `directories[1]{path}: /docs`\r\n  - `documents[2]{id,name,path,type}: 1,概述.md,/docs/概述.md,md; 2,设计.pdf,/docs/设计.pdf,pdf`\r\n- `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n\r\n## 附录 B. 前后端实现与测试建议\r\n\r\n- 前端状态管理：采用 React Query；设定 `staleTime=30s`、`retry=2`、指数退避；缓存接口数据与错误重试。\r\n- PDF.js配置：本地worker脚本路径 `/static/pdf.worker.min.js`；确保CORS允许；大文件按页加载与占位提示。\r\n- 树加载：分页/懒加载/虚拟滚动结合；每层最多加载 200 节点，超出分页请求后端。\r\n- 测试计划：\r\n  - 后端：各格式解析与TOON生成单元/集成测试；错误与降级用例；EBNF语法校验测试。\r\n  - 前端：预览渲染与交互回归测试；大数据性能用例；状态管理与错误提示一致性测试。\r\n- 持久化：`DocumentRepository` 默认落地 PostgreSQL；支持内存模式用于小规模或故障降级。\r\n- 前端错误体验与降级：损坏文件或不支持预览时显示统一错误页与操作建议；提供“查看原始TOON”回退。\r\n- ETag/Last-Modified 协同：前端请求携带 `If-None-Match/If-Modified-Since`；React Query 根据304直接复用缓存并跳过重试。\r\n\r\n## 附录 C. 树接口分页契约示例\r\n\r\n- 请求：`GET /api/v1/document/tree?path=/opt/docs&depth=1&page=1&size=200`\r\n- 返回：`DirectoryTree` 仅包含当前层 `subDirs/documents` 的分页片段，并附 `metadata{total,page,size}` TOON块或JSON元数据。\r\n- 交互：\r\n  - 展开节点时按需请求下一层；若节点子项超过 `size`，显示“加载更多”并继续分页。\r\n  - 前端虚拟滚动仅渲染可视区域；移除离屏节点；缓存已加载段落。\r\n  - 排序：默认按 `dirName/fileName` 字典序；可选 `fileType/lastModifiedTime`。\r\n\r\n## 附录 D. TOON 示例集与单测清单\r\n\r\n- 示例集：为 CSV/MD/DOCX/PDF/SVG 各提供至少3个复杂场景示例（中文/空值/转义/大集合分页）。\r\n- 单测：\r\n  - 语法校验：转义合法性、分隔符、块计数一致性、编码为UTF-8。\r\n  - 解析一致性：`fields/data/toonString` 对齐；降级块生成规则；分页合并一致性。\r\n  - 边界用例：损坏文件、非UTF-8、超长字段、嵌套列表/表格。\r\n\r\n## 23. 持久化模型（data目录TOON方案）\r\n\r\n- 索引文件：`data/index.toon`，内容为 `files[count]{path,type,name}` 块与 `metadata{total,last_updated,root}` 块。\r\n- JSON派生：`data/index.json`（可选），内容为 `FilesIndex` 数组，便于前端树加载与缓存。\r\n- 更新时间：`data/last_updated.txt`（可选），记录北京时间ISO-8601字符串，便于运维观察。\r\n- 生成策略：手动/定时扫描生成，命中缓存则复用；变更检测到后重写文件并更新ETag。\r\n- 读取策略：API优先读取 `index.toon`；前端可选择直接请求TOON或JSON派生。\r\n\r\n## 24. 管理与运维接口\r\n\r\n- `POST /api/v1/admin/rescan`（全量或指定目录重扫，更新 `data/index.*`）。\r\n- `POST /api/v1/admin/cache/clear?filePath=...`（清除单文件预览缓存，与索引无关）。\r\n- `GET /api/v1/admin/status`（查看任务队列、缓存命中率与 `index.toon` 更新时间）。\r\n- 访问控制：默认仅本地或白名单IP允许；可后续接入令牌校验。\r\n\r\n## 25. 本地化与时间格式\r\n\r\n- 错误消息默认中文，支持英文回退：`locale` 字段返回当前语言。\r\n- 时间统一使用北京时间ISO-8601，带时区偏移 `+08:00`；用于 `metadata` 与日志。\r\n\r\n## 26. 参数默认值与配置表（节选）\r\n\r\n- `app.scan.root-dirs`：数组，默认空，示例 `[/opt/docs,/opt/images]`\r\n- `app.scan.cron`：扫描周期（CRON），默认每小时\r\n- `app.data.dir`：索引持久化目录，默认 `./data`\r\n- `preview.pdf.max-pages-per-request`：单次最大页数，默认20\r\n- `gateway.response.supported-accepts`：`application/json,application/x-toon,*/*`\r\n- `gateway.rate-limit.ip.per-minute`：默认120\r\n- `gateway.rate-limit.ip.burst`：默认30\r\n- `cache.toon.ttl`：默认3600秒\r\n- `cache.preview.ttl`：默认600秒（大文件）\r\n\r\n## 27. 术语对照与一致性清单\r\n\r\n- 术语对照：\r\n  - 目录（Directory/Folder）→ `dirPath/dirName`\r\n  - 文档（Document/File）→ `filePath/fileName/fileType`\r\n  - TOON结构（TOONStructure）→ `rootNode/elementCount/fields/data/toonString`\r\n  - 预览（Preview）→ `PreviewContent`\r\n- 一致性检查：\r\n  - 字段命名在前后端、持久化与TOON中一致\r\n  - 时间格式统一为北京时间ISO-8601（`+08:00`）\r\n  - 路径为Linux风格，UTF-8编码，NFC规范化\r\n  - 错误码与HTTP映射一致，统一错误响应结构\r\n  - 缓存键命名、TTL与失效触发一致\r\n\r\n## 28. 需求覆盖评估\r\n\r\n- 覆盖项：\r\n  - 指定目录全量枚举与中文路径：由扫描模块与`files`索引TOON规范覆盖（含Linux路径与符号链接治理）。\r\n  - 索引持久化与加载：`data/index.toon`（必选）与`index.json`（可选）及对应API覆盖。\r\n  - 树展示与预览适配：React前端与五类预览器（md/docx/pdf/csv/svg）覆盖；错误统一降级与提示。\r\n  - 治理与运行保障：路径与编码、安全、错误、缓存、限流、监控、稳定性策略覆盖。\r\n  - 运维与管理：`admin/rescan/status/cache`接口覆盖索引更新与状态可观测。\r\n- 差距与建议：\r\n  - `.xlsx` 仅列于索引样例，当前“预览不支持”（不在五类之内）。建议：V2引入轻量预览（只读表格前N行）或标注“仅下载不预览”。\r\n  - 索引搜索/筛选：Story Map中为可选，当前规范未定义API参数。建议：前端本地筛选为先，必要时提供`GET /index/search?q=`。\r\n  - 索引规模极大（>10万项）分页：目前通过JSON派生与前端虚拟滚动缓解，建议后续提供分片索引（`index.part-N.toon`）。\r\n  - 缺失文件或`index.toon`不存在的降级：建议在API与前端加入“空索引占位”与重扫引导。\r\n  - 无登录与权限控制：按需求刻意不覆盖；如后续公开部署需考虑只读令牌与审计。\r\n- 结论：就“展示指定目录并持久化为TOON索引、提供预览”核心需求而言，规范已覆盖端到端路径与非功能治理；已知差距集中在`.xlsx`预览与搜索/大规模索引的增强项，可按版本切片推进。\r\n\r\n## 附录 E. DDD 完整链路图（Mermaid）\r\n\r\n```mermaid\r\n%% -------------- DDD 完整链路 -------------- \r\ngraph TB\r\n    %% ========== 0. 前期对齐 ==========\r\n    A0[0.组建跨职能战队<br/>对齐业务愿景] --> A1\r\n\r\n    %% ========== 1. 用户旅程 ==========\r\n    A1([1.用户旅程工作坊<br/>User Journey Mapping])\r\n    A1 -->|输出| A1_OUT1[用户旅程图<br/>痛点 & 机会]\r\n    A1_OUT1 -->|输出| A1_OUT2[角色 Persona]\r\n\r\n    %% ========== 2. 用户故事地图 ==========\r\n    A1 --> A2([2.用户故事地图<br/>Story Mapping])\r\n    A2 -->|输出| A2_OUT1[故事地图墙<br/>Epic → Story → Task]\r\n    A2 -->|输出| A2_OUT2[故事卡<br/>As-Who-Want-What]\r\n    A2 -->|输出| A2_OUT3[验收标准 AC<br/>Given-When-Then]\r\n\r\n    %% ========== 3. 事件风暴 ==========\r\n    A2_OUT2 --> B0([3.事件风暴<br/>Event Storming])\r\n    B0 -->|每张故事卡| B0_LINK[故事卡 ←→ 领域事件]\r\n    B0 -->|贴纸墙| B0_STEP1[橙色：领域事件]\r\n    B0_STEP1 --> B0_STEP2[蓝色：命令]\r\n    B0_STEP2 --> B0_STEP3[黄色：聚合候选]\r\n    B0_STEP3 --> B0_STEP4[红色：热点/矛盾]\r\n    B0 -->|输出| B0_OUT1[事件流大图]\r\n    B0 -->|输出| B0_OUT2[命令-事件-聚合表]\r\n\r\n    %% ========== 4. 战略设计 ==========\r\n    B0_OUT2 --> C1([4.划分限界上下文])\r\n    C1 -->|输出| C1_OUT[BC图 + 上下文映射]\r\n    C1_OUT --> C2([5.建立通用语言])\r\n    C2 -->|输出| C2_DICT[术语词典 + 代码词汇表]\r\n\r\n    %% ========== 5. 战术设计 ==========\r\n    C2_DICT --> D1([6.战术建模])\r\n    D1 --> D1_ENT[实体 Entity]\r\n    D1 --> D1_AR[聚合根 Aggregate Root]\r\n    D1 --> D1_VO[值对象 Value Object]\r\n    D1 --> D1_DS[领域服务 Domain Service]\r\n    D1 --> D1_REPO[仓储 Repository]\r\n    D1 --> D1_SPEC[规约 Specification]\r\n    D1 -->|输出| D1_MODEL[战术模型图 + 类图]\r\n\r\n    %% ========== 6. 敏捷迭代：故事 → 任务 → 代码 ==========\r\n    D1_MODEL --> E1[7.迭代 backlog]\r\n    E1 --> E2[8.故事卡拆任务]\r\n    E2 --> E3[9.TDD / 单元测试]\r\n    E3 --> E4[10.持续集成]\r\n    E4 --> E5[11.演示 & 验收]\r\n\r\n    %% ========== 7. 需求变更闭环 ==========\r\n    F1([12.新需求 / 变更]) --> F2[ diff 事件流 ]\r\n    F2 --> F3[快速定位受影响的聚合]\r\n    F3 --> F4[更新故事卡 & AC]\r\n    F4 --> E1\r\n    F4 --> B0\r\n\r\n    %% -------------- 样式定义 --------------\r\n    classDef workshop fill:#FFEAA7,stroke:#333,stroke-width:2px\r\n    classDef output fill:#D1F2EB,stroke:#333\r\n    classDef story fill:#FDEDEC,stroke:#333\r\n    classDef change fill:#FADBD8,stroke:#333\r\n    classDef role fill:#EAF2F8,stroke:#333\r\n\r\n    class A1,A2,B0,C1,C2,D1 workshop\r\n    class A1_OUT1,A1_OUT2,A2_OUT1,A2_OUT2,A2_OUT3,B0_OUT1,B0_OUT2,C1_OUT,C2_DICT,D1_MODEL output\r\n    class E1,E2,E3,E4,E5 story\r\n    class F1,F2,F3,F4 change\r\n    class P1,P2,P3,P4,P5,P6 role",
  "lastModified" : 1764658803443
}, {
  "filePath" : "README.md",
  "fileName" : "README.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "README.md",
  "contentText" : "# 测试文档\n\n这是一个测试文档，用于验证文件预览功能。\n\n## 功能说明\n\n- 文件预览\n- 目录树显示\n- 搜索功能\n\n## 使用说明\n\n1. 启动后端服务\n2. 启动前端服务\n3. 访问 http://localhost:5187",
  "size" : 236,
  "modifiedAt" : 1764659818133,
  "id" : "README.md",
  "content" : "# 测试文档\n\n这是一个测试文档，用于验证文件预览功能。\n\n## 功能说明\n\n- 文件预览\n- 目录树显示\n- 搜索功能\n\n## 使用说明\n\n1. 启动后端服务\n2. 启动前端服务\n3. 访问 http://localhost:5187",
  "lastModified" : 1764659818133
}, {
  "filePath" : "sample.md",
  "fileName" : "sample.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "sample.md",
  "contentText" : "# 示例文档\n\n这是一个示例Markdown文档。\n\n## 章节1\n\n这里是章节1的内容。\n\n## 章节2\n\n这里是章节2的内容。\n\n### 子章节\n\n- 列表项1\n- 列表项2\n- 列表项3",
  "size" : 190,
  "modifiedAt" : 1764659823901,
  "id" : "sample.md",
  "content" : "# 示例文档\n\n这是一个示例Markdown文档。\n\n## 章节1\n\n这里是章节1的内容。\n\n## 章节2\n\n这里是章节2的内容。\n\n### 子章节\n\n- 列表项1\n- 列表项2\n- 列表项3",
  "lastModified" : 1764659823901
}, {
  "filePath" : "深度调研报告.html",
  "fileName" : "深度调研报告.html",
  "parentDir" : "",
  "fileType" : "HTML",
  "title" : "商业地产与公寓租赁认证体系详解及中国市场成功案例",
  "contentText" : "商业地产与公寓租赁认证体系详解及中国市场成功案例 目录 引言 LEED认证体系官方标准 LEED v5 核心变革 四大核心支柱 生命周期评估 性能导向方法 认证等级与评分体系 总分与等级 评估维度 官方标准文档 BOMA COE认证 认证核心目标 五项核心评估指标 官方标准文档 中国市场公寓租赁案例 城市更新与旧改公寓 高端服务式公寓 学生公寓与早期探索 其他商业地产案例 总结与展望 商业地产与公寓租赁 认证体系详解 深度解析LEED v5与BOMA COE认证标准，探索中国绿色地产成功案例 核心洞察 LEED v5将\"脱碳\"作为核心，强制要求全生命周期碳评估 BOMA COE认证要求五大领域均达到90分高标准 中国多个项目成功获得双重铂金级认证 研究范围 认证体系： LEED v5, BOMA COE, 及中国市场实践 案例覆盖： 北上广深等一线城市成功项目 时间跨度： 2013-2025年发展历程 引言 在可持续发展的全球浪潮下，商业地产与公寓租赁领域的绿色建筑及运营管理认证正成为提升资产价值、吸引优质租户和实现可持续发展的关键战略工具。随着环境法规日趋严格和投资者ESG意识的增强，LEED和BOMA COE等国际认证标准不仅成为建筑品质的权威背书，更是连接国际资本市场、提升融资优势的重要桥梁。 \"LEED v5版本将'脱碳'作为核心，强制要求对建筑全生命周期的碳排放进行评估，标志着绿色建筑认证进入了一个以性能为导向、全面关注建筑全生命周期影响的新阶段。\" 与此同时，BOMA COE认证通过评估建筑运营、营销、能源、培训和环境五大领域的90分高标准，确保卓越的资产管理水平。在中国市场上，已成功涌现出大量典型案例，如上海COZI可遇·虹桥通过旧改获得LEED金级认证，广州IFC服务式公寓同时获得LEED铂金级和BOMA全优认证，这些项目不仅提升了自身的市场竞争力，也为行业树立了绿色、高效运营的标杆。 商业地产认证体系官方标准详解 LEED认证体系 (能源与环境设计先锋) 最新标准：LEED v5 核心变革 LEED（能源与环境设计先锋）认证体系由美国绿色建筑委员会（USGBC）制定，是全球公认的绿色建筑评估标准。其最新版本LEED v5于2025年发布，标志着该体系进入了一个以性能为导向、全面关注建筑全生命周期影响的新阶段[358]。此次更新不仅是对现有标准的迭代，更是对全球气候变化、社会公平和生态系统退化等紧迫挑战的积极回应。 四大核心支柱：去碳化、生活质量、生态保护与恢复、公平性 graph TD A[\"LEED v5 四大核心支柱\"] --> B[\"去碳化 50%权重\"] A --> C[\"生活质量 25%权重\"] A --> D[\"生态保护与恢复 25%权重\"] A --> E[\"公平性 交叉主题\"] B --> B1[\"运营碳减排\"] B --> B2[\"隐含碳管理\"] B --> B3[\"能源效率提升\"] B --> B4[\"100%可再生能源\"] C --> C1[\"室内空气质量\"] C --> C2[\"亲生命性设计\"] C --> C3[\"无障碍通行\"] C --> C4[\"健康与福祉\"] D --> D1[\"生态系统保护\"] D --> D2[\"生物多样性\"] D --> D3[\"水资源管理\"] D --> D4[\"材料循环利用\"] E --> E1[\"社会包容性\"] E --> E2[\"社区影响\"] E --> E3[\"经济可及性\"] E --> E4[\"文化敏感性\"] style A fill:#2D5016,color:#ffffff,stroke:#87A96B,stroke-width:3px style B fill:#87A96B,color:#ffffff,stroke:#2D5016,stroke-width:2px style C fill:#F5F2E8,color:#2D5016,stroke:#87A96B,stroke-width:2px style D fill:#ffffff,color:#2D5016,stroke:#87A96B,stroke-width:2px style E fill:#2C2C2C,color:#ffffff,stroke:#87A96B,stroke-width:2px LEED v5的体系架构建立在四大核心支柱之上，旨在全面应对21世纪建筑行业面临的复杂挑战。\"去碳化\"作为首要支柱，占据了评分体系中高达50%的权重 [258] [278]，明确要求项目必须采取系统性措施来降低运营碳和隐含碳，推动建筑实现净零排放甚至负碳目标。 生命周期评估（LCA）：将隐含碳和运营碳纳入强制性评估 LEED v5在方法论上的一个重大突破是强制性地将生命周期评估（Life Cycle Assessment, LCA）纳入认证流程。新版标准引入了\"碳评估（Carbon Assessment）\"作为所有项目必须满足的先决条件，要求项目团队在设计早期就必须对建筑的运营碳排放和隐含碳排放进行量化估算和规划[253]。 LEED v5 碳评估新要求： 强制性生命周期评估 - 所有项目必须进行运营碳和隐含碳评估 隐含碳量化 - 使用符合ISO 14040/44标准的方法进行碳清查 碳减排策略 - 通过材料替代、设计优化等方式减少内含碳 持续监测 - 建立长期碳排放监测和管理机制 性能导向：强调建筑的实际运行性能而非仅设计指标 LEED v5的一个显著趋势是更加强调建筑的实际运行性能，而非仅仅停留在设计阶段的预测和承诺。新版标准鼓励并越来越多地要求使用基于性能的监测和验证方法[260]。 对于既有建筑，LEED O+M（运营与维护）体系更是完全基于实际运营数据来进行评估。这种向性能导向的转变，不仅提升了认证的公信力，也为建筑业主和运营商提供了持续改进的工具。 认证等级与评分体系 总分与等级 LEED认证的评分体系以110分为满分 [250] [252]，项目通过满足各项先决条件和选择性地完成得分项来累积分数。 认证级（Certified） 40-49分 银级（Silver） 50-59分 金级（Gold） 60-79分 铂金级（Platinum） ≥80分 *LEED v5对铂金级认证提出更高要求：必须实现100%可再生能源使用，消除现场化石燃料燃烧[278] 主要评估维度 LEED认证的评分体系围绕多个核心维度展开，全面评估建筑在环境、社会和经济方面的综合表现[252]。 整合过程（Integrative Process） 选址与交通（Location & Transportation） 可持续场地（Sustainable Sites） 节水效率（Water Efficiency） 能源与大气（Energy & Atmosphere） 材料与资源（Materials & Resources） 室内环境质量（Indoor Environmental Quality） 创新（Innovation） 区域优先（Regional Priority） *LEED v5将\"创新\"和\"区域优先\"合并为\"项目优先级（Project Priorities）\"[260] 官方标准文档与资源 官方参考指南 USGBC为每一种LEED评级系统都发布了详尽的官方参考指南，这是项目团队进行LEED认证的最核心、最权威的技术文件[247]。 • LEED v5 BD+C 参考指南 • LEED v5 ID+C 参考指南 • LEED v5 O+M 参考指南 评分卡（Scorecard） USGBC提供官方的评分卡，以表格形式清晰地列出每个评级系统下的所有先决条件和得分项，并标注相应分值[246]。 • 交互式在线评分工具 • PDF版本评分卡下载 • 实时总分计算功能 官方资源库 USGBC官网建立了庞大的在线资源库，包括LEED信用库和项目优先级库等[259]。 • LEED信用库查询 • 项目优先级库 • 试点信用和创新策略 BOMA COE认证 (建筑管理卓越认证) BOMA建筑管理卓越认证（Certificate of Excellence, COE）是由国际建筑业主与管理者协会（BOMA）推出的一项针对商业地产运营管理的专业认证。该认证旨在通过一套国际公认的、基于最佳实践的管理标准，全面评估和提升商业建筑在运营、管理、营销、能源及环境等方面的综合表现。 认证核心目标 提升资产价值 通过优化建筑运营管理、能源管理和环境管理等关键领域，认证项目能够显著降低运营成本，提高能源效率，从而直接增加净营业收入（NOI），最终反映为资产价值的提升。 • 降低运营成本 • 提高能源效率 • 增加净营业收入 • 提升租户满意度 风险管理 将风险管理理念融入到日常运营的各个环节，要求建立精细化和常态化的风险管理机制，提前识别和规避潜在风险。 • 预防性维护计划 • 应急预案制定 • 能源系统监控 • 合规性管理 五项核心评估指标与90分要求 BOMA COE认证的评估体系围绕商业地产运营管理的五个核心维度展开。根据BOMA中国的官方介绍，申请认证的项目必须在这五个方面的评估中，每一项的得分都达到90%或以上，才能获得最终的COE认证证书[218]。 评估维度 英文名称 核心内容 建筑运营管理 Building Operations and Management 评估建筑的日常运营效率，包括预防性维护计划、设备设施管理、安全与安保体系、清洁与保洁标准等。 营销与沟通 Marketing and Communications 评估管理团队与现有租户及潜在市场的沟通策略和效果，包括租户关系管理、市场推广活动、沟通渠道的多样性和有效性等。 能源管理 Energy Management 评估建筑的能源使用效率和管理策略，包括能源审计、节能改造、能源监控系统的应用以及节能目标的设定与达成。 培训管理 Training and Management 评估管理团队的专业能力和持续学习计划，包括员工培训体系、职业发展路径、应急预案培训以及对行业最佳实践的了解和应用。 环境管理 Environmental Management 评估建筑在环境保护和可持续发展方面的表现，包括废弃物管理与回收、室内空气质量监控、绿色采购政策以及对环境法规的遵守。 数据来源：[218] 官方标准文档与资源 官方指南 (Guidebook) BOMA发布针对特定年份和建筑类型的认证指南，如2025年的《Certificate of Excellence Guidebook for Office Buildings》[218]。 • 详细认证流程说明 • 五项核心评估指标要求 • 评分标准解释 • 证明材料清单 GRESB认可 BOMA中国COE认证获得了全球房地产可持续评估体系（GRESB）的认可 [218]，这是其国际影响力的重要体现。 • 提升ESG评级 • 增强融资优势 • 国际资本市场认可 • 投资者信心提升 中国市场公寓租赁场景认证成功案例 城市更新与旧改公寓案例 COZI可遇·虹桥 (上海) COZI可遇·虹桥项目是城市更新背景下，将存量商业资产改造为高品质长租公寓的典范之作。该项目由领盛投资主导，其前身是一处空置多年的旧商场。通过创新的改造理念和精细化的绿色设计，项目成功地将一个低效的城市空间转变为集舒适居住、绿色建筑、公共社交和商业配套于一体的现代化长租社区[359]。 认证成就 获得LEED v4.1住宅体系的金级认证，成为上海首个获此殊荣的长租公寓项目 [359]。 关键成功因素 绿色改造策略 • 优化建筑围护结构 • 高效节能机电设备 • 节水器具安装 • 环保本地装修材料 创新亮点 • 绿色金融支持城市更新 • 保留原有建筑主体结构 • 创造健康舒适室内环境 • 提升城市空间利用效率 高端服务式公寓与综合体内公寓案例 深圳前海嘉里中心公寓 深圳前海嘉里中心公寓是高端服务式公寓领域践行可持续发展理念的杰出代表。该项目位于深圳前海深港现代服务业合作区，凭借其创新的可持续设计、卓越的建造品质和对居住者体验的深度关注，成为中国首个入围USGBC年度LEED住宅大奖的项目 [361]。 认证等级：LEED金级认证 • 社区型LEED住宅项目 • 高效空调系统 • 节水器具应用 • 绿色建材选择 广州国际金融中心（IFC）服务式公寓 广州国际金融中心（IFC）作为华南地区的地标性超高层建筑，其服务式公寓部分在运营管理方面达到了国际顶尖水平。项目致力于将国际标准与本地实践相结合，通过精细化的管理和持续的技术创新，为租户提供卓越的服务和健康的室内环境[352]。 认证成就：LEED V4.1 O+M铂金级认证 + BOMA全优认证 • BOMA租户满意度高达89% • 双铂金级认证 • 以绿引商策略成功 • 超高层建筑标杆 学生公寓与早期探索案例 中欧国际工商学院学生公寓 (上海) 中欧国际工商学院（CEIBS）上海校区的学生公寓，是中国在教育建筑领域探索绿色可持续发展的早期先行者之一。该公寓建于2013年，从策划、设计到施工的全过程，都严格遵循了美国LEED认证标准[349]。 认证成就：LEED金奖认证，中国商学院首个获此殊荣的项目 设计特色 • 自然采光和通风优化 • 高效节能设备应用 • 环保材料选择 • 独立卫浴和24小时空调 创新意义 • 教育建筑绿色标杆 • 提升学院品牌形象 • 国际一流商学院标准 • 校园吸引力增强 深圳泰格公寓 深圳泰格公寓在中国绿色建筑发展史上占有重要地位，它是中国第一栋获得LEED认证的住宅建筑，由招商地产于2000年代初期开发[362]。 认证成就：LEED-NC (V2) 银级认证，总分37分（满分69分） 技术创新 • 被动式设计策略 • 建筑遮阳优化 • 自然通风系统 • 空气源热泵热水器 成本管理 • 生命周期成本分析 • 初投资增加挑战克服 • 长期运营成本节约 • \"特批\"创新管理模式 其他商业地产认证成功案例 北京嘉铭中心 北京嘉铭中心是位于北京核心商务区的高端商业办公楼，总建筑面积达90,504平方米。项目成为中国首个获得BOMA COE五项卓越证书的项目[351]。 认证成就：BOMA COE五项卓越证书 • 建筑运营管理 >90分 • 能源管理 >90分 • 培训管理 >90分 • 营销与沟通 >90分 • 环境管理 >90分 上海中心大厦 作为中国最高的建筑和上海的标志性摩天大楼，上海中心大厦成功获得了LEED铂金级认证和BOMA卓越管理认证[326]。 租户满意度：96分（远超行业平均水平） • 先进楼宇自控系统 • 精细化能源管理 • 优质租户服务 • 健康室内环境 武汉越秀财富中心 武汉越秀财富中心成功获得了LEED V4.1 O+M铂金级认证和\"净零碳建筑卓越级\"认证，在运营阶段实现了碳排放的显著降低。 双重认证：LEED铂金级 + 净零碳建筑 • 节能改造持续优化 • 智能化管理平台 • 绿色运营计划 • 低碳高效运营 总结与展望 关键趋势与洞察 脱碳成为核心焦点 LEED v5将生命周期评估作为强制性要求，推动建筑行业向净零碳目标迈进 性能导向评估 从设计指标向实际运行性能转变，确保认证建筑真正实现可持续目标 运营管理重要性提升 BOMA COE认证通过90分高标准，推动卓越资产管理实践 中国市场实践成果 双重认证项目涌现 广州IFC等项目同时获得LEED铂金级和BOMA全优认证，树立行业标杆 城市更新成功案例 上海COZI可遇·虹桥等项目通过旧改获得LEED金级认证，实现多方效益统一 教育建筑绿色探索 中欧国际工商学院学生公寓等早期项目为中国绿色建筑发展提供宝贵经验 未来发展展望 随着全球气候变化挑战日益严峻，绿色建筑认证体系将继续演进，更加注重建筑的全生命周期影响和实际运行性能。在中国市场，随着ESG投资理念的普及和政策法规的完善，LEED和BOMA等国际认证将发挥更加重要的作用，成为连接国际资本市场、提升资产价值的关键工具。 未来，我们预期将看到更多创新性的绿色技术和管理实践在中国商业地产领域得到应用，特别是在城市更新、既有建筑改造和高端服务式公寓等细分市场。同时，随着认证标准的不断细化和本土化，中国项目在国际认证中的表现将更加出色，为全球绿色建筑发展贡献中国智慧和方案。 \"绿色建筑认证不仅是技术标准的体现，更是可持续发展理念的实践。通过严格的认证标准和卓越的运营管理，商业地产项目能够实现环境效益、社会效益和经济效益的统一，为构建更加可持续的城市未来贡献力量。\"",
  "size" : 70638,
  "modifiedAt" : 1764746916793,
  "id" : "深度调研报告.html",
  "content" : "商业地产与公寓租赁认证体系详解及中国市场成功案例 目录 引言 LEED认证体系官方标准 LEED v5 核心变革 四大核心支柱 生命周期评估 性能导向方法 认证等级与评分体系 总分与等级 评估维度 官方标准文档 BOMA COE认证 认证核心目标 五项核心评估指标 官方标准文档 中国市场公寓租赁案例 城市更新与旧改公寓 高端服务式公寓 学生公寓与早期探索 其他商业地产案例 总结与展望 商业地产与公寓租赁 认证体系详解 深度解析LEED v5与BOMA COE认证标准，探索中国绿色地产成功案例 核心洞察 LEED v5将\"脱碳\"作为核心，强制要求全生命周期碳评估 BOMA COE认证要求五大领域均达到90分高标准 中国多个项目成功获得双重铂金级认证 研究范围 认证体系： LEED v5, BOMA COE, 及中国市场实践 案例覆盖： 北上广深等一线城市成功项目 时间跨度： 2013-2025年发展历程 引言 在可持续发展的全球浪潮下，商业地产与公寓租赁领域的绿色建筑及运营管理认证正成为提升资产价值、吸引优质租户和实现可持续发展的关键战略工具。随着环境法规日趋严格和投资者ESG意识的增强，LEED和BOMA COE等国际认证标准不仅成为建筑品质的权威背书，更是连接国际资本市场、提升融资优势的重要桥梁。 \"LEED v5版本将'脱碳'作为核心，强制要求对建筑全生命周期的碳排放进行评估，标志着绿色建筑认证进入了一个以性能为导向、全面关注建筑全生命周期影响的新阶段。\" 与此同时，BOMA COE认证通过评估建筑运营、营销、能源、培训和环境五大领域的90分高标准，确保卓越的资产管理水平。在中国市场上，已成功涌现出大量典型案例，如上海COZI可遇·虹桥通过旧改获得LEED金级认证，广州IFC服务式公寓同时获得LEED铂金级和BOMA全优认证，这些项目不仅提升了自身的市场竞争力，也为行业树立了绿色、高效运营的标杆。 商业地产认证体系官方标准详解 LEED认证体系 (能源与环境设计先锋) 最新标准：LEED v5 核心变革 LEED（能源与环境设计先锋）认证体系由美国绿色建筑委员会（USGBC）制定，是全球公认的绿色建筑评估标准。其最新版本LEED v5于2025年发布，标志着该体系进入了一个以性能为导向、全面关注建筑全生命周期影响的新阶段[358]。此次更新不仅是对现有标准的迭代，更是对全球气候变化、社会公平和生态系统退化等紧迫挑战的积极回应。 四大核心支柱：去碳化、生活质量、生态保护与恢复、公平性 graph TD A[\"LEED v5 四大核心支柱\"] --> B[\"去碳化 50%权重\"] A --> C[\"生活质量 25%权重\"] A --> D[\"生态保护与恢复 25%权重\"] A --> E[\"公平性 交叉主题\"] B --> B1[\"运营碳减排\"] B --> B2[\"隐含碳管理\"] B --> B3[\"能源效率提升\"] B --> B4[\"100%可再生能源\"] C --> C1[\"室内空气质量\"] C --> C2[\"亲生命性设计\"] C --> C3[\"无障碍通行\"] C --> C4[\"健康与福祉\"] D --> D1[\"生态系统保护\"] D --> D2[\"生物多样性\"] D --> D3[\"水资源管理\"] D --> D4[\"材料循环利用\"] E --> E1[\"社会包容性\"] E --> E2[\"社区影响\"] E --> E3[\"经济可及性\"] E --> E4[\"文化敏感性\"] style A fill:#2D5016,color:#ffffff,stroke:#87A96B,stroke-width:3px style B fill:#87A96B,color:#ffffff,stroke:#2D5016,stroke-width:2px style C fill:#F5F2E8,color:#2D5016,stroke:#87A96B,stroke-width:2px style D fill:#ffffff,color:#2D5016,stroke:#87A96B,stroke-width:2px style E fill:#2C2C2C,color:#ffffff,stroke:#87A96B,stroke-width:2px LEED v5的体系架构建立在四大核心支柱之上，旨在全面应对21世纪建筑行业面临的复杂挑战。\"去碳化\"作为首要支柱，占据了评分体系中高达50%的权重 [258] [278]，明确要求项目必须采取系统性措施来降低运营碳和隐含碳，推动建筑实现净零排放甚至负碳目标。 生命周期评估（LCA）：将隐含碳和运营碳纳入强制性评估 LEED v5在方法论上的一个重大突破是强制性地将生命周期评估（Life Cycle Assessment, LCA）纳入认证流程。新版标准引入了\"碳评估（Carbon Assessment）\"作为所有项目必须满足的先决条件，要求项目团队在设计早期就必须对建筑的运营碳排放和隐含碳排放进行量化估算和规划[253]。 LEED v5 碳评估新要求： 强制性生命周期评估 - 所有项目必须进行运营碳和隐含碳评估 隐含碳量化 - 使用符合ISO 14040/44标准的方法进行碳清查 碳减排策略 - 通过材料替代、设计优化等方式减少内含碳 持续监测 - 建立长期碳排放监测和管理机制 性能导向：强调建筑的实际运行性能而非仅设计指标 LEED v5的一个显著趋势是更加强调建筑的实际运行性能，而非仅仅停留在设计阶段的预测和承诺。新版标准鼓励并越来越多地要求使用基于性能的监测和验证方法[260]。 对于既有建筑，LEED O+M（运营与维护）体系更是完全基于实际运营数据来进行评估。这种向性能导向的转变，不仅提升了认证的公信力，也为建筑业主和运营商提供了持续改进的工具。 认证等级与评分体系 总分与等级 LEED认证的评分体系以110分为满分 [250] [252]，项目通过满足各项先决条件和选择性地完成得分项来累积分数。 认证级（Certified） 40-49分 银级（Silver） 50-59分 金级（Gold） 60-79分 铂金级（Platinum） ≥80分 *LEED v5对铂金级认证提出更高要求：必须实现100%可再生能源使用，消除现场化石燃料燃烧[278] 主要评估维度 LEED认证的评分体系围绕多个核心维度展开，全面评估建筑在环境、社会和经济方面的综合表现[252]。 整合过程（Integrative Process） 选址与交通（Location & Transportation） 可持续场地（Sustainable Sites） 节水效率（Water Efficiency） 能源与大气（Energy & Atmosphere） 材料与资源（Materials & Resources） 室内环境质量（Indoor Environmental Quality） 创新（Innovation） 区域优先（Regional Priority） *LEED v5将\"创新\"和\"区域优先\"合并为\"项目优先级（Project Priorities）\"[260] 官方标准文档与资源 官方参考指南 USGBC为每一种LEED评级系统都发布了详尽的官方参考指南，这是项目团队进行LEED认证的最核心、最权威的技术文件[247]。 • LEED v5 BD+C 参考指南 • LEED v5 ID+C 参考指南 • LEED v5 O+M 参考指南 评分卡（Scorecard） USGBC提供官方的评分卡，以表格形式清晰地列出每个评级系统下的所有先决条件和得分项，并标注相应分值[246]。 • 交互式在线评分工具 • PDF版本评分卡下载 • 实时总分计算功能 官方资源库 USGBC官网建立了庞大的在线资源库，包括LEED信用库和项目优先级库等[259]。 • LEED信用库查询 • 项目优先级库 • 试点信用和创新策略 BOMA COE认证 (建筑管理卓越认证) BOMA建筑管理卓越认证（Certificate of Excellence, COE）是由国际建筑业主与管理者协会（BOMA）推出的一项针对商业地产运营管理的专业认证。该认证旨在通过一套国际公认的、基于最佳实践的管理标准，全面评估和提升商业建筑在运营、管理、营销、能源及环境等方面的综合表现。 认证核心目标 提升资产价值 通过优化建筑运营管理、能源管理和环境管理等关键领域，认证项目能够显著降低运营成本，提高能源效率，从而直接增加净营业收入（NOI），最终反映为资产价值的提升。 • 降低运营成本 • 提高能源效率 • 增加净营业收入 • 提升租户满意度 风险管理 将风险管理理念融入到日常运营的各个环节，要求建立精细化和常态化的风险管理机制，提前识别和规避潜在风险。 • 预防性维护计划 • 应急预案制定 • 能源系统监控 • 合规性管理 五项核心评估指标与90分要求 BOMA COE认证的评估体系围绕商业地产运营管理的五个核心维度展开。根据BOMA中国的官方介绍，申请认证的项目必须在这五个方面的评估中，每一项的得分都达到90%或以上，才能获得最终的COE认证证书[218]。 评估维度 英文名称 核心内容 建筑运营管理 Building Operations and Management 评估建筑的日常运营效率，包括预防性维护计划、设备设施管理、安全与安保体系、清洁与保洁标准等。 营销与沟通 Marketing and Communications 评估管理团队与现有租户及潜在市场的沟通策略和效果，包括租户关系管理、市场推广活动、沟通渠道的多样性和有效性等。 能源管理 Energy Management 评估建筑的能源使用效率和管理策略，包括能源审计、节能改造、能源监控系统的应用以及节能目标的设定与达成。 培训管理 Training and Management 评估管理团队的专业能力和持续学习计划，包括员工培训体系、职业发展路径、应急预案培训以及对行业最佳实践的了解和应用。 环境管理 Environmental Management 评估建筑在环境保护和可持续发展方面的表现，包括废弃物管理与回收、室内空气质量监控、绿色采购政策以及对环境法规的遵守。 数据来源：[218] 官方标准文档与资源 官方指南 (Guidebook) BOMA发布针对特定年份和建筑类型的认证指南，如2025年的《Certificate of Excellence Guidebook for Office Buildings》[218]。 • 详细认证流程说明 • 五项核心评估指标要求 • 评分标准解释 • 证明材料清单 GRESB认可 BOMA中国COE认证获得了全球房地产可持续评估体系（GRESB）的认可 [218]，这是其国际影响力的重要体现。 • 提升ESG评级 • 增强融资优势 • 国际资本市场认可 • 投资者信心提升 中国市场公寓租赁场景认证成功案例 城市更新与旧改公寓案例 COZI可遇·虹桥 (上海) COZI可遇·虹桥项目是城市更新背景下，将存量商业资产改造为高品质长租公寓的典范之作。该项目由领盛投资主导，其前身是一处空置多年的旧商场。通过创新的改造理念和精细化的绿色设计，项目成功地将一个低效的城市空间转变为集舒适居住、绿色建筑、公共社交和商业配套于一体的现代化长租社区[359]。 认证成就 获得LEED v4.1住宅体系的金级认证，成为上海首个获此殊荣的长租公寓项目 [359]。 关键成功因素 绿色改造策略 • 优化建筑围护结构 • 高效节能机电设备 • 节水器具安装 • 环保本地装修材料 创新亮点 • 绿色金融支持城市更新 • 保留原有建筑主体结构 • 创造健康舒适室内环境 • 提升城市空间利用效率 高端服务式公寓与综合体内公寓案例 深圳前海嘉里中心公寓 深圳前海嘉里中心公寓是高端服务式公寓领域践行可持续发展理念的杰出代表。该项目位于深圳前海深港现代服务业合作区，凭借其创新的可持续设计、卓越的建造品质和对居住者体验的深度关注，成为中国首个入围USGBC年度LEED住宅大奖的项目 [361]。 认证等级：LEED金级认证 • 社区型LEED住宅项目 • 高效空调系统 • 节水器具应用 • 绿色建材选择 广州国际金融中心（IFC）服务式公寓 广州国际金融中心（IFC）作为华南地区的地标性超高层建筑，其服务式公寓部分在运营管理方面达到了国际顶尖水平。项目致力于将国际标准与本地实践相结合，通过精细化的管理和持续的技术创新，为租户提供卓越的服务和健康的室内环境[352]。 认证成就：LEED V4.1 O+M铂金级认证 + BOMA全优认证 • BOMA租户满意度高达89% • 双铂金级认证 • 以绿引商策略成功 • 超高层建筑标杆 学生公寓与早期探索案例 中欧国际工商学院学生公寓 (上海) 中欧国际工商学院（CEIBS）上海校区的学生公寓，是中国在教育建筑领域探索绿色可持续发展的早期先行者之一。该公寓建于2013年，从策划、设计到施工的全过程，都严格遵循了美国LEED认证标准[349]。 认证成就：LEED金奖认证，中国商学院首个获此殊荣的项目 设计特色 • 自然采光和通风优化 • 高效节能设备应用 • 环保材料选择 • 独立卫浴和24小时空调 创新意义 • 教育建筑绿色标杆 • 提升学院品牌形象 • 国际一流商学院标准 • 校园吸引力增强 深圳泰格公寓 深圳泰格公寓在中国绿色建筑发展史上占有重要地位，它是中国第一栋获得LEED认证的住宅建筑，由招商地产于2000年代初期开发[362]。 认证成就：LEED-NC (V2) 银级认证，总分37分（满分69分） 技术创新 • 被动式设计策略 • 建筑遮阳优化 • 自然通风系统 • 空气源热泵热水器 成本管理 • 生命周期成本分析 • 初投资增加挑战克服 • 长期运营成本节约 • \"特批\"创新管理模式 其他商业地产认证成功案例 北京嘉铭中心 北京嘉铭中心是位于北京核心商务区的高端商业办公楼，总建筑面积达90,504平方米。项目成为中国首个获得BOMA COE五项卓越证书的项目[351]。 认证成就：BOMA COE五项卓越证书 • 建筑运营管理 >90分 • 能源管理 >90分 • 培训管理 >90分 • 营销与沟通 >90分 • 环境管理 >90分 上海中心大厦 作为中国最高的建筑和上海的标志性摩天大楼，上海中心大厦成功获得了LEED铂金级认证和BOMA卓越管理认证[326]。 租户满意度：96分（远超行业平均水平） • 先进楼宇自控系统 • 精细化能源管理 • 优质租户服务 • 健康室内环境 武汉越秀财富中心 武汉越秀财富中心成功获得了LEED V4.1 O+M铂金级认证和\"净零碳建筑卓越级\"认证，在运营阶段实现了碳排放的显著降低。 双重认证：LEED铂金级 + 净零碳建筑 • 节能改造持续优化 • 智能化管理平台 • 绿色运营计划 • 低碳高效运营 总结与展望 关键趋势与洞察 脱碳成为核心焦点 LEED v5将生命周期评估作为强制性要求，推动建筑行业向净零碳目标迈进 性能导向评估 从设计指标向实际运行性能转变，确保认证建筑真正实现可持续目标 运营管理重要性提升 BOMA COE认证通过90分高标准，推动卓越资产管理实践 中国市场实践成果 双重认证项目涌现 广州IFC等项目同时获得LEED铂金级和BOMA全优认证，树立行业标杆 城市更新成功案例 上海COZI可遇·虹桥等项目通过旧改获得LEED金级认证，实现多方效益统一 教育建筑绿色探索 中欧国际工商学院学生公寓等早期项目为中国绿色建筑发展提供宝贵经验 未来发展展望 随着全球气候变化挑战日益严峻，绿色建筑认证体系将继续演进，更加注重建筑的全生命周期影响和实际运行性能。在中国市场，随着ESG投资理念的普及和政策法规的完善，LEED和BOMA等国际认证将发挥更加重要的作用，成为连接国际资本市场、提升资产价值的关键工具。 未来，我们预期将看到更多创新性的绿色技术和管理实践在中国商业地产领域得到应用，特别是在城市更新、既有建筑改造和高端服务式公寓等细分市场。同时，随着认证标准的不断细化和本土化，中国项目在国际认证中的表现将更加出色，为全球绿色建筑发展贡献中国智慧和方案。 \"绿色建筑认证不仅是技术标准的体现，更是可持续发展理念的实践。通过严格的认证标准和卓越的运营管理，商业地产项目能够实现环境效益、社会效益和经济效益的统一，为构建更加可持续的城市未来贡献力量。\"",
  "lastModified" : 1764746916793
}, {
  "filePath" : "mermaid-test.md",
  "fileName" : "mermaid-test.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "mermaid-test.md",
  "contentText" : "# Mermaid 图表测试\n\n## 流程图\n\n```mermaid\ngraph TD\n    A[开始] --> B{判断}\n    B -- 是 --> C[执行操作]\n    B -- 否 --> D[结束]\n    C --> D\n```\n\n## 时序图\n\n```mermaid\nsequenceDiagram\n    participant Alice\n    participant Bob\n    Alice->>John: Hello John, how are you?\n    loop Healthcheck\n        John->>John: Fight against hypochondria\n    end\n    Note right of John: Rational thoughts <br/>prevail!\n    John-->>Alice: Great!\n    John->>Bob: How about you?\n    Bob-->>John: Jolly good!\n```\n",
  "size" : 512,
  "modifiedAt" : 1764765122367,
  "id" : "mermaid-test.md",
  "content" : "# Mermaid 图表测试\n\n## 流程图\n\n```mermaid\ngraph TD\n    A[开始] --> B{判断}\n    B -- 是 --> C[执行操作]\n    B -- 否 --> D[结束]\n    C --> D\n```\n\n## 时序图\n\n```mermaid\nsequenceDiagram\n    participant Alice\n    participant Bob\n    Alice->>John: Hello John, how are you?\n    loop Healthcheck\n        John->>John: Fight against hypochondria\n    end\n    Note right of John: Rational thoughts <br/>prevail!\n    John-->>Alice: Great!\n    John->>Bob: How about you?\n    Bob-->>John: Jolly good!\n```\n",
  "lastModified" : 1764765122367
}, {
  "filePath" : "mermaid-test-plan.md",
  "fileName" : "mermaid-test-plan.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "mermaid-test-plan.md",
  "contentText" : "# Mermaid 交互功能测试计划\n\n## 1. 测试目标\n验证 Mermaid 图表组件的交互功能修复情况，包括：\n- 按钮功能（全屏、缩放、重置）\n- 全屏模式下的交互（拖拽、缩放、事件隔离）\n- 跨浏览器兼容性\n\n## 2. 测试环境\n- 浏览器：Chrome (Latest), Firefox (Latest), Safari (Latest)\n- 操作系统：当前开发环境 (Linux)\n- 测试文件：`docs/mermaid-test.md`\n\n## 3. 测试用例\n\n### 3.1 基础功能测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 图表渲染 | 打开 `docs/mermaid-test.md` | 流程图和时序图正确渲染，无报错 | 待测 |\n| 鼠标悬停 | 鼠标悬停在节点或连线上 | 出现高亮效果，光标变为手型 | 待测 |\n| 节点点击 | 点击任意节点 | 节点高亮，控制台无错误 | 待测 |\n\n### 3.2 普通模式交互测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 滚轮缩放 | 按住 Ctrl + 滚轮滚动 | 图表缩放，页面不滚动 | 待测 |\n| 滚轮平移 | 直接使用滚轮滚动 | 图表**不**平移，页面正常滚动（已禁用滚轮平移） | 待测 |\n| 鼠标拖拽 | 按住左键拖拽图表 | 图表跟随鼠标移动，有平滑动画，不超过边界 | 待测 |\n| 双击重置 | 双击图表区域 | 图表恢复初始位置和缩放比例 | 待测 |\n| 顶部按钮 | 点击放大/缩小按钮 | 图表缩放正常 | 待测 |\n\n### 3.3 全屏模式交互测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 进入全屏 | 点击\"全屏查看\"按钮 | 进入全屏模式，背景黑色不透明，覆盖所有内容 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"放大\"按钮 | 控制台输出日志 `[Mermaid] Zoom In clicked`，图表放大 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"缩小\"按钮 | 控制台输出日志 `[Mermaid] Zoom Out clicked`，图表缩小 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"重置\"按钮 | 控制台输出日志 `[Mermaid] Reset Zoom clicked`，图表重置 | 待测 |\n| 拖拽交互 | 在全屏模式下拖拽图表 | 图表平滑移动，不触发底层页面滚动 | 待测 |\n| 滚轮交互 | 全屏模式下滚动滚轮 | 底层页面**不**滚动（事件被阻止） | 待测 |\n| 退出全屏 | 点击\"退出全屏\"按钮 | 退出全屏模式，恢复原状 | 待测 |\n| ESC退出 | 按下 ESC 键 | 退出全屏模式 | 待测 |\n\n### 3.4 触摸屏交互测试（模拟）\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 单指拖拽 | 模拟单指触摸移动 | 图表跟随移动 | 待测 |\n| 双指缩放 | 模拟双指捏合 | 图表缩放 | 待测 |\n\n## 4. 验证记录\n请在执行测试后记录结果。\n",
  "size" : 2813,
  "modifiedAt" : 1764765877972,
  "id" : "mermaid-test-plan.md",
  "content" : "# Mermaid 交互功能测试计划\n\n## 1. 测试目标\n验证 Mermaid 图表组件的交互功能修复情况，包括：\n- 按钮功能（全屏、缩放、重置）\n- 全屏模式下的交互（拖拽、缩放、事件隔离）\n- 跨浏览器兼容性\n\n## 2. 测试环境\n- 浏览器：Chrome (Latest), Firefox (Latest), Safari (Latest)\n- 操作系统：当前开发环境 (Linux)\n- 测试文件：`docs/mermaid-test.md`\n\n## 3. 测试用例\n\n### 3.1 基础功能测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 图表渲染 | 打开 `docs/mermaid-test.md` | 流程图和时序图正确渲染，无报错 | 待测 |\n| 鼠标悬停 | 鼠标悬停在节点或连线上 | 出现高亮效果，光标变为手型 | 待测 |\n| 节点点击 | 点击任意节点 | 节点高亮，控制台无错误 | 待测 |\n\n### 3.2 普通模式交互测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 滚轮缩放 | 按住 Ctrl + 滚轮滚动 | 图表缩放，页面不滚动 | 待测 |\n| 滚轮平移 | 直接使用滚轮滚动 | 图表**不**平移，页面正常滚动（已禁用滚轮平移） | 待测 |\n| 鼠标拖拽 | 按住左键拖拽图表 | 图表跟随鼠标移动，有平滑动画，不超过边界 | 待测 |\n| 双击重置 | 双击图表区域 | 图表恢复初始位置和缩放比例 | 待测 |\n| 顶部按钮 | 点击放大/缩小按钮 | 图表缩放正常 | 待测 |\n\n### 3.3 全屏模式交互测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 进入全屏 | 点击\"全屏查看\"按钮 | 进入全屏模式，背景黑色不透明，覆盖所有内容 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"放大\"按钮 | 控制台输出日志 `[Mermaid] Zoom In clicked`，图表放大 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"缩小\"按钮 | 控制台输出日志 `[Mermaid] Zoom Out clicked`，图表缩小 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"重置\"按钮 | 控制台输出日志 `[Mermaid] Reset Zoom clicked`，图表重置 | 待测 |\n| 拖拽交互 | 在全屏模式下拖拽图表 | 图表平滑移动，不触发底层页面滚动 | 待测 |\n| 滚轮交互 | 全屏模式下滚动滚轮 | 底层页面**不**滚动（事件被阻止） | 待测 |\n| 退出全屏 | 点击\"退出全屏\"按钮 | 退出全屏模式，恢复原状 | 待测 |\n| ESC退出 | 按下 ESC 键 | 退出全屏模式 | 待测 |\n\n### 3.4 触摸屏交互测试（模拟）\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 单指拖拽 | 模拟单指触摸移动 | 图表跟随移动 | 待测 |\n| 双指缩放 | 模拟双指捏合 | 图表缩放 | 待测 |\n\n## 4. 验证记录\n请在执行测试后记录结果。\n",
  "lastModified" : 1764765877972
} ]