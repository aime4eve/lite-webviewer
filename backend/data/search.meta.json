[ {
  "filePath" : "售前资料/Individual_项目实施方案.md",
  "fileName" : "Individual_项目实施方案.md",
  "parentDir" : "售前资料",
  "fileType" : "MD",
  "title" : "Individual_项目实施方案.md",
  "contentText" : "\n# **长沙市机关事务管理局**\n# **智慧后勤服务管理平台项目**\n\n\n\n# **项目实施方案**\n\n\n\n\n## **编制单位：湖南华宽通科技股份有限公司**\n## **2023年1月**\n## **目**** ****录**\n第一章 项目概述 7\n1.1 项目信息 7\n1.2 遵循标准 7\n1.3 建设内容 8\n1.3.1 项目基础设施建设 8\n1.3.2 智慧后勤服务管理平台 8\n1.3.3 内外部系统对接集成 9\n1.4 建设目标 10\n1.5 实施地点 10\n1.6 实施周期 10\n第二章 项目实施组织架构 11\n2.1 项目实施组织架构图 11\n2.2 实施组织角色定义 11\n2.3 项目团队主要成员清单 13\n第三章 项目进度计划 15\n3.1 项目阶段定义 15\n3.2 项目交付周期 15\n3.3 项目里程碑计划 15\n3.4 项目详细计划 16\n3.5 进度保障措施 18\n3.5.1 进度保障概述 18\n3.5.2 明确建设范围 19\n3.5.3 工作分解结构（WBS） 19\n3.5.4 制定进度计划 20\n3.5.5 实施进度控制 20\n第四章 项目交付实施 22\n4.1 项目交付模型 22\n4.2 项目启动阶段 22\n4.2.1 项目团队组建 22\n4.2.2 项目商务合同 23\n4.2.3 项目启动会 23\n4.2.4 项目开工申请 24\n4.2.5 项目其他准备 24\n4.3 项目规划阶段 24\n4.3.1 勘测调研 24\n4.3.2 范围确认 25\n4.3.3 深化设计 25\n4.3.4 实施方案 26\n4.4 项目执行阶段 27\n4.4.1 项目采购 27\n4.4.2 到货验收 27\n4.4.3 实施准备 28\n4.4.4 硬件实施 30\n4.4.5 软件系统实施 34\n4.4.6 集成实施 38\n4.4.7 项目测试 39\n4.4.8 等保测评 39\n4.4.9 密码测评 40\n4.4.10 项目整改 41\n4.4.11 项目上线 41\n4.4.12 项目培训 42\n4.5 项目收尾阶段 42\n4.5.1 阶段验收 42\n4.5.2 项目试运行 43\n4.5.3 竣工验收 44\n第五章 硬件系统实施 45\n5.1 智慧安全用电 45\n5.1.1 实施内容 45\n5.1.2 设备清单 45\n5.1.3 实施位置 46\n5.1.4 实施人员 46\n5.1.5 实施时间 46\n5.1.6 实施方式 46\n5.1.7 实施流程 46\n5.1.8 安全文明施工措施 47\n5.1.9 施工报告 48\n5.2 智慧物联 48\n5.2.1 实施内容 48\n5.2.2 设备清单 50\n5.2.3 实施方式 50\n5.2.4 施工时间 50\n5.2.5 实施流程 51\n5.2.6 安全文明施工措施 51\n5.2.7 施工报告 51\n5.3 AI视频监控 52\n5.3.1 实施内容 52\n5.3.2 设备清单 52\n5.3.3 实施点位 53\n5.3.4 实施方式 53\n5.3.5 实施流程 53\n5.3.6 安全文明施工措施 54\n5.3.7 施工报告 54\n5.4 基础网络 55\n5.4.1 实施内容 55\n5.4.2 机房环境实施 55\n5.4.3 网络系统实施 55\n5.4.4 网络拓扑图 56\n5.4.5 设备清单 56\n5.4.6 实施位置 57\n5.4.7 实施流程 57\n5.4.8 安全文明施工措施 58\n5.4.9 施工报告 58\n5.5 智能交通 59\n5.5.1 实施内容 59\n5.5.2 设备清单 59\n5.5.3 设备点位 59\n5.5.4 实施方式 61\n5.5.5 实施流程 61\n5.5.6 安全文明施工措施 62\n5.5.7 施工报告 62\n第六章 项目系统集成实施 63\n6.1 集成实施概述 63\n6.2 集成实施原则 63\n6.3 集成实施内容 64\n6.4 集成实施架构 64\n6.5 集成融合实施 65\n6.5.1 中枢对接实施 65\n6.5.2 系统嵌入实施 77\n6.5.3 系统对接实施 80\n6.5.4 视频融合实施 86\n第七章 项目测试方案 90\n7.1 项目概述 90\n7.2 测试范围 91\n7.3 测试目标 91\n7.4 术语定义 92\n7.5 项目测试环境 92\n7.5.1 网络系统 92\n7.5.2 主机系统 93\n7.6 测试手段 93\n7.7 测试数据 93\n7.8 测试策略 94\n7.8.1 单元测试 94\n7.8.2 集成测试 94\n7.8.3 整体测试 95\n7.9 测试流程 96\n7.9.1 概述 96\n7.9.2 需求说明书分析 96\n7.9.3 制定测试计划 97\n7.9.4 设立测试配置库 97\n7.9.5 测试环境搭建 98\n7.9.6 测试执行 98\n第八章 项目管理方案 101\n8.1 项目整合管理 101\n8.2 项目范围管理 102\n8.3 项目进度管理 103\n8.3.1 概述 103\n8.3.2 明确项范围 104\n8.3.3 WBS 104\n8.3.4 制定计划 105\n8.3.5 控制进度 105\n8.4 项目成本管理 106\n8.5 项目质量管理 108\n8.5.1 规范与标准 108\n8.5.2 项目质量规划 109\n8.5.3 质量度量 109\n8.5.4 质量考核 109\n8.5.5 过程监控与阶段评审 110\n8.5.6 系统测试与验收 110\n8.5.7 配置管理 111\n8.5.8 文档管理 111\n8.5.9 项目审计 112\n8.6 人力资源管理 112\n8.6.1 项目组织架构 112\n8.6.2 角色定义 113\n8.6.3 人力资源管理计划 114\n8.6.4 资源的释放 115\n8.6.5 项目的延期 115\n8.7 项目沟通管理 115\n8.7.1 沟通管理概述 115\n8.7.2 干系人识别 116\n8.7.3 沟通方式与途径 116\n8.7.4 沟通管理计划 118\n8.7.5 沟通计划的管理 118\n8.7.6 监控项目沟通 118\n8.8 项目风险管理 119\n8.8.1 风险识别 119\n8.8.2 风险评估 123\n8.8.3 风险应对 125\n8.9 项目采购管理 126\n8.9.1 采购计划 127\n8.9.2 合同管理 127\n8.9.3 发货与接收 127\n第九章 项目培训方案 130\n9.1 培训概述 130\n9.2 培训范围 130\n9.3 培训对象 130\n9.4 培训目标 131\n9.5 培训时间 131\n9.6 培训方式 131\n9.7 培训场地 132\n9.8 培训教程 132\n9.9 培训讲师 132\n9.10 培训考核 132\n9.11 实施培训 133\n9.11.1 培训步骤 133\n9.11.2 培训名单确认 133\n9.11.3 计划编制 133\n9.11.4 通知发布 134\n9.11.5 实施培训 135\n9.11.6 培训评估 135\n第十章 项目验收方案 138\n10.1 验收概述 138\n10.2 验收内容 138\n10.3 验收标准 139\n10.4 验收组织 139\n10.5 验收方式 140\n10.6 验收准备 140\n10.7 验收步骤 140\n10.8 验收报告（模板） 141\n10.8.1 项目基本信息 141\n10.8.2 项目合同信息 141\n10.8.3 项目建设周期 141\n10.8.4 项目建设情况 142\n10.8.5 项目验收计划 143\n10.8.6 项目验收结论 145\n10.8.7 附件 145\n\n\n# \n# 项目概述\n## 项目信息\n项目名称：长沙市机关事务管理局智慧后勤服务管理平台项目\n建设单位：长沙市机关事务管理局\n监理单位：湖南天道信息技术咨询有限公司\n承建单位：湖南华宽通科技股份有限公司\n## 遵循标准\n- 国家、行业主管部门颁布的相关标准；\n- 国务院办公厅《信息共享互联互通平台建设指南（试行）》；\n- 《政府信息交换语言标准》；\n- 《国家电子政务工程建设项目管理暂行办法》（发改委2007)55号令）；\n- 《国家政务信息化项目建设管理办法》（国办发〔2019〕57号）；\n- GB/Z 19669-2005《XML在电子政务中的应用指南》；\n- GB/T 8567-2006《计算机软件文档编制规范》；\n- GB/T 9385-2008《计算机软件需求规格说明规范》；\n- GB/T 9386-2008《计算机软件测试文档编制规范》；\n- GB/T 11457-2006《信息技术软件工程术语》；\n- GB/T 25000.10-2016《系统与软件工程系统与软件质量要求和评价（SQuaRE）第10部分：系统与软件质量模型》；\n- GB/T 8566-2007《信息技术软件生存周期过程》；\n- GB/T 35273-2020《信息安全技术个人信息安全规范》；\n- GB/T 20271-2006《信息安全技术信息系统通用安全技术要求》；\n- GB/T 20270-2006《信息安全技术网络基础安全技术要求》；\n- GB/T 20269-2006《信息安全技术信息系统安全管理要求》；\n- GB/T 35282-2017《信息安全技术电子政务移动办公系统安全技术规范》；\n- GB/T 22239-2019《信息安全技术网络安全等级保护基本要求》；\n- GB/T 39412-2020《信息安全技术代码安全审计规范》；\n- GB/T 22240-2020《信息安全技术网络安全等级保护定级指南》；\n- GB/T 25068.1-2020《信息技术安全技术网络安全第1部分：综述和概念》；\n- GB/T 25068.2-2020《信息技术安全技术网络安全第2.部分：网络安全设计和实现指南》；\n- GB/T 22239-2019《信息安全技术网络安全等级保护基本要求第4部分：物联网安全扩展要求》。\n## 建设内容\n长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容包括以下三个方面：\n- 项目基础设施建设；\n- 智慧后勤服务管理平台建设；\n- 内外部系统对接与集成。\n### 项目基础设施建设\n长沙市机关事务管理局智慧后勤服务管理平台项目基础设施建设内容包括：智慧安全用电系统建设、智慧物联网络建设、AI视频监控系统建设、基础网络系统建设、智能交通系统建设。通过基础设施建设，一方面对现有的硬件系统提供可接入网络，另一方面也为项目提供信息和数据采集的终端，并同时通过AI视频监控系统与智能交通系统的建设为后勤管理提供更智能和直观的管理手段。\n### 智慧后勤服务管理平台\n智慧后勤服务管理平台的建设主要包括智慧后勤基础平台、智慧后勤应用平台、智慧后勤“一张图”、智慧后勤移动端应用相关内容的建设。\n智慧后勤基础平台是为项目应用部署提供基础运行环境，包括：操作系统的建设、数据库系统、中间件服务和应用基础服务或组件等。基础平台提供集约化、融合多种应用支撑服务，为整个项目提供数据初始化、统一入口、工作台、通用审批管理、物联网管理、数据资源建设、安全服务支撑等基础的服务。\n智慧后勤应用平台是为机关事务管理局各业务管理部门，提供业务后台管理的综合平台。从为机关事务局内部提供考勤管理、公文管理、用印管理、文印管理等应用，到对外的集体户口申办、应诉管理、接待管理、会务管理以及办公用房建设计划的审核、汇总和报批等功能，智慧后勤应用平台将提升机关事务局对外的服务体验及管理水平，实现业务的增效和智能化。\n智慧后勤 “一张图”，实现“所有资源一张图管理、所有设备一张图控制、所有事件一张图显示”，对数据进行直观、高效的可视化呈现，让机关大院的业务和数据变得可知可感，让决策有据可依。并帮助管理者实时了解机关大院整体的资产运行状况、车辆情况、安防情况、能效情况、服务情况等，推动机关后勤服务的管理精细化和服务专业化。\n智慧后勤移动端应用是为满足机关事务管理局在移动端的应用场景而单独开发的，它基于现有“长政通”APP和“我的长沙”城市移动综合服务平台开发，将开发完的移动应用嵌入到“长政通”App和我的长沙。其中嵌入到“长政通”APP的功能是提供给所有市直机关职工和干部的统一服务平台，实现机关后勤服务从被动到主动服务的转变，实现餐饮、物业、会务、通知公告、办公、生活等一站式服务的工具和入口，实现个人信息等基础功能、后勤主页、设施设备管理、培训管理、电子巡更、报事报修、通知公告、房屋维修项目管理等应用。\n嵌入“我的长沙”城市移动综合服务平台功能主要是提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能，提升市机关事务局的社会服务性。\n### 内外部系统对接集成\n内外部系统对接集成的建设内容包括将长沙市机关事务管理局目前已经建成的多个信息系统组网打通，实现信息的互联互通和数据共享。\n现有需要对接的系统有：智慧后勤服务管理平台与长沙市超脑服务平台、市物联网平台、人脸门禁系统、停车道闸系统、视频监控系统、长沙银行一卡通系统、办公用房系统、公务用车系统、智慧消防主机系统、巡更系统、垃圾分类称重系统、人防工程停车道闸系统、“我的长沙”城市移动综合服务平台、“长政通”app对接，以及智能交通系统与交警六合一平台对接。\n## 建设目标\n长沙市机关事务管理局智慧后勤服务管理平台项目建设目标包括以下三个方面：\n- 提高现代信息化技术在机关事务管理局各系统中应用的广度和深度，建成完善的大院基础设施、智能融合的信息技术应用和高度集成完善的智慧化大平台，充分发挥信息技术的生产力；\n- 利用最新信息化技术对各系统的相关要素进行整合，为大院内、外人员提供智慧化的办公、行政服务。通过机关综合整体信息化环境及新建的智慧后勤服务管理平台，更好的保障大院安防，减低大院能耗，提高大院管理水平，提升用户服务体验，创建绿色节约型智慧机关；\n- 为管理部门提供智慧化的管理手段，提高市直公共服务水平和行政管理效率，推动基于新技术的机关事务整体信息化发展，为机关事务管理局的管理决策提供信息化保障。\n## 实施地点\n实施地点：现场实施地点为长沙市政府园区。不需要在现场完成的工作由我方自行安排。\n## 实施周期\n实施周期：自项目合同签订完成后<u>四</u><u>个月</u><u>内</u>达到初步验收条件。\n# 项目实施组织架构\n## 项目实施组织架构图\n\n图 项目实施组织架构图\n## 实施组织角色定义\n我方在本项目中成立专门的项目管理小组以及实施团队来完成项目实施工作，在项目合同签订后，我方将指派专门的项目经理负责整个项目的执行与交付，并根据项目建设内容安排具体的实施和管理人员完成项目实施交付工作。具体角色定义如下表所示：\n表 实施组织角色定义表\n| 序号 | 角色 | 角色职责定义 |\n| :---: | :---: | :---: |\n| 1 | 项目中心 （PMO） | 参与立项评审； 指派项目经理，为项目分配合适的人力资源，协助项目经理建立项目团队； 监控项目执行过程，及时了解所有项目的人力资源、进度、质量情况，协商处理问题； 在项目结束后，对项目以及项目组成员进行综合评估； 协助项目完成项目对审与结算； 提升人员技能，考核人员绩效。 |\n| 2 | 决策支持组 | 由部门经理、中心以及公司管理层相关人员以及技术专家组成；主要职责是参与项目重大决策以及内部评审。 |\n| 3 | 项目经理 | 项目经理是立项之后的项目主要责任人，负责项目全生命周期管理。主要职责是带领项目团队在预定的时间和成本之内，交付质量合格的成果/产品。项目经理对本项目的进度、质量、成本负主要责任。 负责本项目的全面管理（包括整体、范围、时间、成本、质量、人力资源、沟通、风险、采购、干系人）； 确保项目能在既定的时间、成本范围内交付满足项目要求质量的成果或者产品； 参与以及配合项目对审以及核算相关的过程； 在项目结束时，总结项目知识和经验教训，完善文档； 对项目成员的业绩进行评估。 |\n| 4 | 质量管理组 | 质量管理组主要对项目质量情况进行监督。 监督项目的质量规划情况； 对项目过程质量进行监控； 核实项目整体交付质量。 |\n| 5 | 商务支持组 | 营销中心相关人员，包括销售人员以及商务人员。 负责产品（或合同项目）的销售，签订商务合同、跟踪合同执行过程。 负责项目客户关系维护； 商务沟通。 |\n| 6 | 售前支持组 | 项目中心解决方案部人员，主要是指参与前期解决方案的人员。 负责项目售前阶段的技术沟通； 以客户的需求为基础，在沟通的过程中根据公司产品情况以及公司的战略给客户推荐完整的解决方案； 完成项目售前阶段的其他工作，包括项目招投标过程等； 往售后完成项目知识转移； |\n| 7 | 产品支持组 | 公司产品部门相关人员，负责项目产品的相关工作： 负责参与项目自研产品相关的调研、勘测工作； 根据项目调研和需求分析情况完成项目交付产品的设计； 形成需求分析文档，并协调项目各方完成对文档的审批； 完成从需求分析到研发的知识转移过程。 |\n| 8 | 项目研发组 | 负责项目自研软件系统以及公司软件产品的相关工作： 负责软件系统的需求调研和需求分析过程； 配合项目经理完成项目的需求评审工作； 负责项目软件系统设计方案的编制以及设计评审工作； 完成软件系统的设计、开发、测试、上线工作； 根据项目要求提供项目软件相关的文档和过程提交物。 |\n| 9 | 项目实施组 | 系统集成部相关人员，按照项目实施流程规范完成项目整体实施工作： 实施前的施工现场勘测、调研和确认工作； 完成项目系统集成部分的深化设计工作； 负责硬件设备的进场报验工作； 完成项目现场的实施工作； 负责现场施工人员安全教育、技术交底和安全管理工作； 负责硬件设备调试工作； 配合完成项目的测试、测评工作。 |\n| 10 | 项目测试组 | 技术中心产品测试部相关人员，负责项目的测试工作，包括但不限于： 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |\n| 11 | 项目运维组 | 项目中心系统集成部相关人员，负责项目维护工作，包括但不限于： 项目维护方案编制； 项目现场维护工作，相关问题处理； 项目维护报告、问题处理报告编制。 |\n## 项目团队主要成员清单\n| 序号 | 姓名 | 角色 | 工作职责 | 备注说明 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 | 刘姝岐 | 总负责人 | 总领项目交付全过程，负责项目交付过程涉及到的所有商务事项 |   |\n| 2 | 余力 | 项目经理 | 负责整体项目的工作任务分解并统筹安排、跟进，协调处理项目交付过程中遇到的各种问题，确保项目按照计划有条不紊的完成交付 |   |\n| 3 | 高翔 | 产品经理 | 负责项目软件部分交付，包括软件现场调研、需求分析汇总确认、原型设计、大数据局需求对接等 |   |\n| 4 | 李义 | 技术经理 | 负责项目软件系统的设计、开发、测试、上线工作，并根据项目要求提供项目软件相关的文档和过程提交物 |   |\n| 5 | 杨湘英 | 测试组长 | 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |   |\n| 6 | 谭伟国 | 现场实施组长 | 硬件实施前的施工现场勘测、调研和确认工作； 完成项目现场硬件部分的实施和调试工作； 负责现场施工人员的安全教育、技术交底和安全管理工作。 配合完成项目硬件设备的测试、测评工作。 |   |\n| 7 | 李纯福 | 硬件工程师 | 1）智能硬件实施前的施工现场勘测、调研和确认工作； 2）完成项目现场智能硬件部分的实施工作及相关提交物的编制工作； 3）配合完成项目智能硬件设备的测试、测评工作。 |   |\n| 8 | 吉良 | 网络工程师 | 1）网络实施前的施工现场勘测、调研和确认工作； 2）完成项目现场网络部分的实施工作及相关提交物的编制工作； 3）配合完成项目网络设备的测试、测评工作。 |   |\n\n# \n# 项目进度计划\n## 项目阶段定义\n在项目的交付过程中，为了更好的对项目过程进行监控和管理，确保项目即使发生了偏差，也能通过赶工或其他调整手段来弥补项目偏差，确保项目的及时交付。长沙市机关事务管理局智慧后勤服务管理平台项目属于综合型系统集成项目，在一般项目的实施过程中，我们习惯于将项目分成以下阶段执行：\n- 项目准备阶段；\n- 项目规划阶段；\n- 项目执行阶段；\n- 项目收尾阶段。\n## 项目交付周期\n长沙市机关事务管理局智慧后勤服务管理平台项目交付周期：自项目合同签订完成后<u>四</u><u>个月内</u>达到初步验收条件。\n## 项目里程碑计划\n| 序号 | 里程碑 | 计划开始时间 | 计划结束时间 |\n| :---: | :---: | :---: | :---: |\n| 1 | 项目启动 | 2022年12月27日 | 2022年12月29日 |\n| 2 | 现场勘测 | 2022年12月28日 | 2022年12月30日 |\n| 3 | 需求调研 | 2022年12月28日 | 2023年02月17日 |\n| 4 | 项目采购 | 2022年12月27日 | 2023年01月18日 |\n| 5 | 硬件实施、单体调试 | 2023年01月05日 | 2023年02月22日 |\n| 6 | 系统开发 | 2023年01月05日 | 2023年03月15日 |\n| 7 | 系统对接 | 2023年01月20日 | 2023年02月13日 |\n| 8 | 软件测试 | 2023年02月27日 | 2023年03月23日 |\n| 9 | 系统联调测试 | 2023年03月21日 | 2023年03月29日 |\n| 10 | 项目收尾及初步验收 | 2023年03月30日 | 2023年04月27日 |\n## 项目详细计划\n| 序号 | 任务名称 | 开始时间 | 完成时间 |\n| :---: | :---: | :---: | :---: |\n| 1 | 长沙市智慧机关项目 | 2022年12月27日 | 2023年4月27日 |\n| 2 | 项目启动 | 2022年12月27日 | 2022年12月29日 |\n| 3 | 项目进度计划（初步计划） | 2022年12月27日 | 2022年12月27日 |\n| 4 | 项目人力资源计划 | 2022年12月28日 | 2022年12月28日 |\n| 5 | 项目成本预算 | 2022年12月29日 | 2022年12月29日 |\n| 6 | 项目执行 | 2022年12月27日 | 2023年3月29日 |\n| 7 | 现场勘测调研 | 2022年12月28日 | 2022年12月30日 |\n| 8 | 现场勘测 | 2022年12月28日 | 2022年12月28日 |\n| 9 | 勘测调研报告 | 2022年12月29日 | 2022年12月29日 |\n| 10 | 勘测出图 | 2022年12月30日 | 2022年12月30日 |\n| 11 | 项目采购 | 2022年12月27日 | 2023年1月18日 |\n| 12 | 项目采购计划 | 2023年1月2日 | 2023年1月4日 |\n| 13 | 机房硬件采购 | 2023年1月5日 | 2023年1月18日 |\n| 14 | 采购备货 | 2023年1月5日 | 2023年1月5日 |\n| 15 | 货物运输 | 2023年1月6日 | 2023年1月16日 |\n| 16 | 设备报验 | 2023年1月17日 | 2023年1月17日 |\n| 17 | 到货验收 | 2023年1月18日 | 2023年1月18日 |\n| 18 | 测试硬件采购 | 2022年12月27日 | 2023年1月4日 |\n| 19 | 终端设备批量采购 | 2023年1月5日 | 2023年1月18日 |\n| 20 | 采购备货 | 2023年1月5日 | 2023年1月5日 |\n| 21 | 货物运输 | 2023年1月6日 | 2023年1月16日 |\n| 22 | 设备报验 | 2023年1月17日 | 2023年1月17日 |\n| 23 | 到货验收 | 2023年1月18日 | 2023年1月18日 |\n| 24 | 项目现场启动会 | 2022年12月28日 | 2022年12月30日 |\n| 25 | 实施交付入场 | 2022年12月28日 | 2022年12月28日 |\n| 26 | 会议材料准备 | 2022年12月29日 | 2022年12月29日 |\n| 27 | 开踢会议（Kick-off Meeting） | 2022年12月30日 | 2022年12月30日 |\n| 28 | 软件需求调研分析 | 2022年12月28日 | 2023年2月17日 |\n| 29 | 需求调研 | 2022年12月28日 | 2023年2月17日 |\n| 30 | 第一阶段调研结果整理 | 2022年12月28日 | 2022年12月28日 |\n| 31 | 现有系统开发情况整理 | 2022年12月28日 | 2022年12月28日 |\n| 32 | 需求调研计划 | 2022年12月29日 | 2022年12月29日 |\n| 33 | 第二次需求调研 | 2022年12月30日 | 2023年1月19日 |\n| 34 | 原型设计与调整 | 2023年1月3日 | 2023年1月23日 |\n| 35 | 需求规格说明书 | 2023年1月24日 | 2023年2月15日 |\n| 36 | 需求评审 | 2023年2月16日 | 2023年2月17日 |\n| 37 | 外部系统对接 | 2022年12月28日 | 2023年2月13日 |\n| 38 | 客户沟通 | 2022年12月28日 | 2023年1月19日 |\n| 39 | 外部系统对接调研表 | 2022年12月28日 | 2022年12月30日 |\n| 40 | 对接系统具体情况调研 | 2023年1月17日 | 2023年1月19日 |\n| 41 | 系统对接（厂商对接） | 2023年1月20日 | 2023年2月13日 |\n| 42 | 对接需求明确（基于各对接系统） | 2023年1月20日 | 2023年2月9日 |\n| 43 | 双方确认对接技术方案 | 2023年1月24日 | 2023年2月13日 |\n| 44 | 系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 45 | 应用系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 46 | 系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 47 | 硬件对接 | 2023年1月5日 | 2023年1月12日 |\n| 48 | 对接开发调整 | 2023年1月5日 | 2023年1月11日 |\n| 49 | 对接调试 | 2023年1月6日 | 2023年1月12日 |\n| 50 | 外部系统对接 | 2023年2月14日 | 2023年3月8日 |\n| 51 | 系统对接开发 | 2023年2月14日 | 2023年3月6日 |\n| 52 | 对接调试 | 2023年2月16日 | 2023年3月8日 |\n| 53 | 软件测试 | 2023年2月27日 | 2023年3月23日 |\n| 54 | 功能性测试 | 2023年2月27日 | 2023年3月17日 |\n| 55 | 第一次BUG修复 | 2023年3月13日 | 2023年3月21日 |\n| 56 | 系统回归测试 | 2023年3月15日 | 2023年3月23日 |\n| 57 | 硬件以及基础环境实施 | 2023年1月19日 | 2023年2月22日 |\n| 58 | 机房环境实施 | 2023年1月19日 | 2023年1月25日 |\n| 59 | 硬件实施 | 2023年1月19日 | 2023年2月22日 |\n| 60 | 终端实施方案 | 2023年1月19日 | 2023年1月20日 |\n| 61 | 实施申请（甲方、物业、监理、保卫、消防） | 2023年1月23日 | 2023年1月25日 |\n| 62 | 硬件施工 | 2023年1月26日 | 2023年2月22日 |\n| 63 | 软件系统实施部署 | 2023年1月26日 | 2023年3月20日 |\n| 64 | 运行环境实施准备 | 2023年1月26日 | 2023年1月26日 |\n| 65 | 运行环境实施 | 2023年1月26日 | 2023年1月26日 |\n| 66 | 软件部署 | 2023年3月20日 | 2023年3月20日 |\n| 67 | 整体联调测试 | 2023年3月21日 | 2023年3月29日 |\n| 68 | 系统联调测试 | 2023年3月21日 | 2023年3月29日 |\n| 69 | 项目收尾 | 2023年3月30日 | 2023年4月27日 |\n| 70 | 项目培训 | 2023年3月30日 | 2023年4月19日 |\n| 71 | 项目培训方案 | 2023年3月30日 | 2023年3月31日 |\n| 72 | 培训资料准备 | 2023年4月3日 | 2023年4月7日 |\n| 73 | 实施培训 | 2023年4月10日 | 2023年4月19日 |\n| 74 | 项目初验 | 2023年4月21日 | 2023年4月27日 |\n\n## 进度保障措施\n### 进度保障概述\n在项目执行和管理的过程当中，因为不确定性以及渐进明细是项目的主要特性之一，长沙市机关事务管理局智慧后勤服务管理平台建设项目是一个综合型多系统相对负责的综合型系统集成项目，包括网络系统的建设、云平台的应用、新旧网络的融合、视频监控系统建设、智能交通建设、智慧后勤系统建设以及移动应用的建设等等，项目在执行交付过程中需要跨部门、跨单位多系统的协调和集成。项目要求在较短的实施周期内完成交付，从项目管理的角度来分析，项目的风险以及资源投入都将增加，为了保证项目进度以及项目的质量，特制定以下的项目进度保障。\n### 明确建设范围\n项目进度计划是项目管理计划的核心内容之一，也是指导整个项目进行的主要计划之一，项目计划的科学制定，是项目能确保进度的主要措施之一。\n项目进度的制定依赖于项目的建设范围，所以，在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n### 工作分解结构（WBS）\nWBS是项目进度计划制定的基础，WBS：工作分解结构是指将项目的交付成果以及完成相应成果所需要的工作进行分解，分解到40小时左右的工作包。WBS的分解遵循相应的规则：\n- 100%包含：分支上下100%包含；\n- 不可再分：最底层状态相对独立不可再分；\n- 信息透明：分解到可以充分估算完成该成果所需的时间、费用、资源等；\n- 独立责任：分解到可安排一个责任者；\n- 滚动规划：远期工作可暂时不分解。\n项目工作分解结构应包含项目所有必须交付的成果以及完成相关交付内容所需要做的工作。即WBS应能体现本项目所有的交付物与相应的工作。\n同时WBS也是整个项目管理过程的核心，项目经理通过WBS完成项目进度计划的制定，也需要通过WBS进行项目风险分析。项目的人力资源计划、项目人力成本估算均可以通过项目WBS来完成。\n### 制定进度计划\n在WBS的基础上，结合长沙市机关事务管理局智慧后勤服务管理平台建设项目的实际要求，通过排列活动顺序、估算活动持续时间、估算活动资源等动作完成项目进度计划的制定。\n在长沙市机关事务管理局智慧后勤服务管理平台建设项目中，根据项目实际情况采取倒推的方式进行进度计划的制定，在项目活动持续时间估算的过程中，先设定具体的交付和验收要求时间点，再逐步反推到项目各个阶段，相对合理的进行各个阶段时间的分配，再在各个阶段内进行各个活动时间的分配，最终根据各活动的紧前关系来评估计划的可行性和具体的资源需求以及资源冲突的可能性。\n### 实施进度控制\n在项目执行交付的过程中，本项目安排项目经理进行项目的全生命周期管理，在项目管理和监控过程中，控制进度是监控事项中的重点内容之一，控制进度的目标就是确保项目进度与项目计划之间的偏差尽量小。\n为了确保项目进度计划，项目经理乃至项目组需要进行包括但不限于下列事项的：\n- 项目执行过程中，尽量确保按照项目资源计划为项目提供相关的项目资源，以确保项目进度；\n- 制定明确的项目进度计划，确保项目按照计划执行，在项目执行过程中，应根据项目实际情况执行可落地执行的项目进度计划，并严格按照项目进度计划所规划的时间来约束项目进度，确保项目有明确的时间进度要求；\n- 明确项目采购计划，确保项目各个阶段的到货是按采购计划执行的；\n- 采取多项工作并行处理的方式，在本项目的执行过程中，因为项目的复杂性，有较多的工作是可以并行进行处理的，在项目执行过程中应尽量将能够并行处理的工作进行并行处理，确保项目进度；\n- 提前进行项目风险识别和评估，并制定风险应对措施，通过科学的风险应对确保项目进度；\n- 阶段性的进行项目进度检查，通过偏差分析，明确项目状态，并通过增加资源或成本的方式来确保进度计划，例如通过短期的赶工来确保项目进度；\n- 当项目进度确实出现较大偏差并无法纠正时，应及时的组织项目会议对项目进度计划进行调整，确保后续阶段的项目可控。\n# \n# 项目交付实施\n## 项目交付模型\n\n图 项目交付管理模型\n综合分析长沙市机关事务管理局智慧后勤服务管理平台项目的实际情况，在项目交付管理过程中，将项目根据项目具体工作大致分为四个阶段，即项目启动阶段、项目规划阶段、项目执行阶段、项目收尾阶段。项目经理根据项目阶段划分情况以及各项工作划分情况进行工作分解，并制定项目进度计划。\n## 项目启动阶段\n项目启动阶段是指项目中标至项目正式入场的阶段，本阶段的主要工作是签订商务合同、完成项目团队的组建、召开项目启动会、完成项目开工申请等主要工作。该阶段也是项目的准备阶段。\n### 项目团队组建\n在项目招投标中标后，我方将根据长沙市机关事务管理局智慧后勤服务管理平台项目的特性委派合适的项目经理负责该项目的项目交付管理。\n完成项目经理指派后，在公司内容完成项目的正式启动，并根据项目要求完成我方项目交付团队的组建。长沙市机关事务管理局智慧后勤服务管理平台项目属于综合型系统集成项目，该类型的项目，除具备综合型系统集成项目管理能力的项目经理以外，我方还将配备商务经理、售前经理、硬件产品经理、软件系统产品经理、软件系统技术经理以及开发团队、项目实施团队与项目运行维护团队参与项目的建设，根据项目不同阶段对人员的要求逐步进入或释放。\n项目团队组建完成后，召开项目内部启动会，通过项目内部启动会完成项目售前至项目售后的知识转移工作。\n同时，公司PMO（项目管理办公室）发布项目经理授权书以及项目团队组建通知。\n### 项目商务合同\n根据相关要求，在项目中标后一个月内需要完成项目《商务合同》的签订，我方将委派专门的商务经理负责该项目的商务合同签订事宜。确保在项目启动采购之前，完成项目商务合同的签订。\n### 项目启动会\n项目团队在正式入场前与建设单位、监理单位等一起召开项目启动会，项目启动会的主要作用包括以下几个方面：\n- 项目沟通机制的建立，通过项目启动会完成项目团队之间沟通机制的建立，包括项目例会制度、项目决策机制、周报要求等。\n- 项目里程碑计划的发布，在本次会议上，项目经理根据对项目情况的理解，制定基本的交付模式与里程碑计划，该里程碑计划也作为项目交付进度计划制定的基础。\n- 部分项目风险应对措施的制定，在项目启动会上，会议各方可根据项目实际情况提出在本阶段识别到的项目风险，并共同制定相应的应对措施和计划。\n- 宣布项目正式启动，近期工作的安排与计划。\n### 项目开工申请\n项目正式启动后，存在监理的情况下，项目经理需要申请《项目开工令》方可正式开工。一般情况下，项目经理根据项目具体情况编写《项目施工组织设计方案》，填写监理方提供的施工组织报验申请，监理方、建设单位评审后，签署开工令，项目正式开工。\n主要工作包括：\n- 编制项目施工组织设计方案；\n- 编制开工申请；\n- 监理方、建设单位下达项目开工令。\n### 项目其他准备\n在项目开工令申请过程中，项目经理根据项目近期工作安排情况做好项目入场准备。包括近期人员的入场协调与准备、办公场所以及环境的申请、近期详细工作计划安排等。\n## 项目规划阶段\n### 勘测调研\n项目正式启动后，项目人员入场，项目经理应根据项目建设内容组织项目现场的勘测调研工作。调研工作包括但不限于以下工作内容：\n- 编制项目勘测调研方案；\n- 根据勘测计划对项目现场进行勘测调研；\n- 编制调研报告。\n勘测调研内容根据项目建设内容的不同而不同，包括但不限于：\n- 本地机房物理环境以及基础环境调研；\n- 市政府大院网络情况调研；\n- 机关事务管理局业务情况以及软件系统需求调研；\n- 需要对接的外部系统情况调研；\n- AI视频监控系统实施环境调研以及点位确认；\n- 智慧交通系统实施环境调研以及点位确认；\n- 智能终端实施部署环境调研以及点位确认；\n- 其他用户需求调研。\n因为软件系统需求调研的工作可能持续一个较长的时间，在项目执行的过程中，我方将组建项目需求组（产品组）对长沙市机关事务管理局业务以及本次项目建设内容相关的业务进行。\n### 范围确认\n项目勘测调研工作完成后，项目经理组织项目团队对长沙市机关事务管理局智慧后勤服务管理平台项目范围进行辨识和确认。项目经理以及项目团队应根据项目前期的文档资料、现场勘测调研、客户座谈等方式收集到完整的项目需求后，完成《项目范围说明书》、《项目需求说明书》的编制。明确项目范围，并协调建设单位、监理方对项目范围达成共识。\n项目范围的明确，基本明确了项目的建设内容，也为项目目标的达成提供了建设基础。\n### 深化设计\n长沙市机关事务管理局智慧后勤服务管理平台项目属于一个综合型系统集成项目，项目涉及到的范围以及建设内容都比较广。在项目范围确认工作基本完成后，需要同步开展项目深化设计工作。深化设计工作包括两个部分，一部分是项目软件系统开发部分，需要在需求调研和需求分析的基础上开展软件系统的设计工作。另一方面是项目AI视频监控系统以及职能交通以及项目职能终端实施部分需要进行深化设计，包括具体实施点位的明确、综合布线的方式、施工的工序和安排等。\n同时，考虑项目前期设计与项目实际情况的偏差，项目往往会产生相应的变更，在深化设计的过程中，通过深化设计以及客户实际需求的情况提起项目变更，并通过设计评审过程完成变更的确认和评审。\n深化设计工作主要是基于项目前期的技术方案、现场勘测调研情况、项目前期变更要求等情况对项目设计方案（技术方案）进行调整、落地的过程。\n在项目交付过程中，基于项目交付要求，在对项目实际情况有一个全面系统了解后，明确项目实际需求，项目经理组织项目组成员对项目的技术方案进行再次进行梳理和编制，并根据项目的实际情况，落地项目的设计方案和技术方案，并确保方案的可执行。\n对于因为项目实际情况而导致项目设计方案发生变化时，项目经理应根据项目情况启动变更流程。\n设计方案包括但不限于：\n- 深化设计方案编制；\n- 提起变更；\n- 深化设计方案评审；\n- 基于评审意见的修订。\n### 实施方案\n项目实施方案是基于项目设计和项目管理计划正式启动项目实施的开始，项目经理组织项目团队对如何完成项目交付进行具体的规划，并形成相应的方案。长沙市机关事务管理局智慧后勤服务管理平台项目的实施方案应包括以下相关的内容：\n- 项目实施范围；\n- 项目工作目标分解结构；\n- 项目整体进度计划；\n- 项目人力资源规划；\n- 项目采购规划；\n- 项目本地机房实施规划；\n- 政务云环境实施规划；\n- 软件系统开发和实施规划；\n- 智能交通系统实施规划；\n- AI视频监控系统实施规划；\n- 项目系统对接融合实施规划；\n- 项目系统信创适配实施规划；\n- 项目安全等级保护测评实施规划；\n- 项目测试以及整体调整实施规划；\n- 项目运行维护规划；\n- 其他项目管理规划。\n## 项目执行阶段\n### 项目采购\n在项目规划工作进行过程中或者完成后，项目应进入实际执行，基于本项目的实际情况，为了确保项目进度，项目的实际执行工作与项目规划工作是以并行的方式进行。\n长沙市机关事务管理局智慧后勤服务管理平台项目中有较大数量的硬件设备以及终端的采购，相关设备的采购和到货直接影响到项目的实际交付。\n在项目合同签订完成后，我方即安排项目经理启动项目采购工作，公司供应链部门开始进行项目备货工作。在项目深化设计完成后，基本项目所有变更都审批完成，项目经理即开始采购。在本阶段主要工作包括：\n- 项目经理编制项目采购计划；\n- 相关计划报建设单位与监理单位，审批通过后执行。\n- 项目经理根据项目采购计划发起采购；\n- 项目经理根据项目采购情况跟踪项目到货情况。\n项目采购工作是一个相对持续的过程，在长沙市机关事务管理局智慧后勤服务管理平台项目中，项目采购工作将根据项目进度的推进和项目的实际需求完成项目备货、采购工作。\n### 到货验收\n项目经理指派具体的负责人全面负责本项目的到货验收工作。具体负责人根据项目采购计划对产品交付的时间、地点、方式以及其他条件事先完成到货规划，并提前与建设单位以及监理方进行沟通和确认，最后完成到货验收工作。\n在项目实际到货前，项目经理提前与监理单位进行到货报验。到货验收完成后，由参与到货验收的各方共同签署到货验收报告。\n到货验收方案包括但不限于：\n- 到货验收时间、地点、方式的确认；\n- 货物现场验收；\n- 完成货物入库清点；\n- 到货验收报告签署。\n对于因其他原因无法在到货现场完成到货验收的情况，项目经理在现场完成到货自检，入库清点后，再协调监理单位与建设单位共同参与到货验收。\n考虑集中到货的情况，在本项目执行过程中，项目经理将提前与机关事务管理局申请相应的设备库房，并做好设备出入库工作，以确保项目设备的安全。\n### 实施准备\n基于长沙市机关事务管理局智慧后勤服务管理平台项目的实际情况，实施准备工作非常重要，在项目正式启动实施工作之前，为了确保项目实施工作的顺利进行，同时也是在实施过程中为了确保项目实施工作不影响机关事务局以及市政府相关单位的正常办公与工作。\n相关准备工作包括：\n#### **环境考察确认**\n- 本地机房环境空间情况确认，包括但不限于机房位置、机柜空间等；\n- 基础环境强电情况确认，包括但不限于强电布线、接入条件、功率等；\n- 基础环境弱电情况确认，包括相关设备部署点位的网络情况、机房网络情况等；\n- 考虑网络系统的建设和网络改造以及物联网络的建设，需要提前完成网络VLAN以及IP申请和确认等工作。\n#### **各单位协调**\n- 在本项目中，考虑各种智能终端的安装与系统接入，需要提前完成与消防、物业、安保等部门与单位的沟通和协调，必要时，应出具建设单位同意的施工申请；\n- 考虑AI监控系统与智能交通系统的实施，需要提前与物业、安保等部门进行沟通和申请，按照市政府大院的统一规划和要求进行施工准备和施工；\n- 考虑智能交通系统需要与交警系统完成对接，需要提前协调建设单位完成与交警相关部门的对接；\n- 考虑项目有十四个需要网络改造以及对接的系统，事先应提前完成与各系统分管处室或部门进行沟通，并协调相关分管处室与部门完成与各建设厂商的对接，以确保网络改造以及系统对接的顺利；\n- 根据长沙市信息化项目建设管理办法等相关方面的要求，在长沙市机关事务管理局智慧后勤服务管理平台项目的建设过程中，软件系统应完成与中枢的能力调用对接，同时需要完成与“长政通”APP以及“我的长沙”的对接，在进行对接之前，应提前协调建设单位完成与相关监管单位以及建设厂商的对接；\n- 长沙市机关事务管理局智慧后勤服务管理平台项目中有较多的视频监控点位的建设，根据建设单位的统一规划，相关监控视频应接入到统一的视频监控系统平台中，在对接前，应提前完成与该项目的提前对接；\n- 项目建设前，应提前完成项目在政务云上相关资源的申请，并对云资源环境进行提前确认；\n- 其他需要提前申请和对接的事项。\n#### **施工入场准备**\n- 现场办公环境的协调；\n- 现场仓库的申请；\n- 施工入场准备事宜，包括施工人员安全与规范教育；\n- 施工材料以及施工设备的准备；\n#### **施工时间协调**\n- 考虑项目智能空开安装过程中不能影响建设单位以及其他相关单位的正常工作，在每个办公室空开安装时，需要协调各个办公安装的具体时间，并制定相应的安装时间表，同时在设备安装完成后必须在建设单位上班前恢复办公室的卫生以及电力，避免对建设单位以及相关单位的正常工作产生影响；\n- 在项目建设过程中，提前组建运维小组，运维小组对已经建设完成的点位在处理异常时进行机动维护。\n### 硬件实施\n#### 实施内容\n硬件实施主要包括是以下几个部分的内容：\n- 智慧安全用电硬件设备安装和调试；\n- 智慧物联硬件设备安装和调试；\n- AI视频监控硬件设备安装和调试；\n- 基础网络硬件设备安装和调试；\n- 智能交通硬件设备安装和调试。\n#### **各部分的施工方案和安全管理措施****请见****硬件系统实施****章节。**\n#### 设备清单\n| 序号 | 名称 | 规格型号 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 一 | 智慧安全用电 |   |   |\n| 1 | 智慧微断开关电源 | S3-P25 | 80 |\n| 2 | 1P 智慧微断 | S3-FC20 | 584 |\n| 3 | 2P 智慧微断 | S3-ZNC32 | 50 |\n| 4 | 3P 智慧微断 | S3-TZC63 | 31 |\n| 5 | 4P 智慧微断 | S3-TNZC63 | 47 |\n| 6 | 智慧微断通信模组 | HKT-TX01 | 80 |\n| 7 | 天线 | 定制 | 80 |\n| 8 | 导轨及箱体 | 定制 | 80 |\n| 二 | 智慧物联 |   |   |\n| 1 | 门磁传感器 | HKT-DMS01 | 115 |\n| 2 | 出入人体识别传感器 | HKT-IRC01 | 68 |\n| 3 | 多功能环境质量监测传感器 | HKT-HJC01 | 50 |\n| 4 | 温湿度传感器 | HKT-TH31 | 50 |\n| 5 | 喷淋管道压力传感器 | HKT-YL100 | 62 |\n| 6 | 水位监测传感器 | HKT-SW100 | 18 |\n| 7 | 室内消防栓压力监测传感器 | HKT-YL100 | 62 |\n| 8 | 消防主机数据采集和传输边缘计算终端 | F-ITD100-L | 2 |\n| 9 | 通信接口板卡 | F-PRC100 | 2 |\n| 10 | 室内消防栓消防阀门 | SN65-Y | 62 |\n| 11 | LoRa核心网络平台 | HKT-NS | 1 |\n| 12 | 物联网网关 | HKTGW-100 | 67 |\n| 三 | AI视频监控 |   |   |\n| 1 | 高空全景感知单元 | iDS-2VPE13-A845-ZFQM | 1 |\n| 2 | 高空全景感知单元-支架 | DS-1603ZJ-P | 1 |\n| 3 | 动火离人热成像 | DS-2TD1217T-2/PA/QM | 10 |\n| 4 | 明厨亮灶专用感知单元 | DS-2XA8225F-LZQ/MJ | 10 |\n| 5 | 明厨亮灶专用感知单元支架 | DS-1292ZJ | 10 |\n| 6 | 明厨亮灶显示屏 | DS-D5055UL-B | 4 |\n| 7 | 明厨亮灶显示屏支架 | 常规壁挂支架-3255-WA1-TS | 4 |\n| 8 | 明厨亮灶解码器 | DS-6901UD | 4 |\n| 9 | 智能警戒检测单元 | DS-2CD7347QMD-LZS(3.3-9mm)(B)(白) | 2 |\n| 10 | 客流统计智能单元 | DS-2XD8846/C-IW | 4 |\n| 11 | 客流统计智能单元支架 | DS-1227ZJ-P4 | 4 |\n| 12 | AI 开放平台系列摄像机 | DS-2XA8247F-IZS(B) | 1 |\n| 13 | 网络存储设备 | DS-A81016S（单电） | 2 |\n| 14 | 服务器 | 信创产品，XC-FF21C-B12（3671） | 2 |\n| 四 | 基础网络建设 |   |   |\n| 1 | 核心交换机 | S7706 | 2 |\n| 2 | 48 端口电接口板 | ES1M2G48TX5S | 2 |\n| 3 | 48 端口光接口板 | LSS7G48SX6S0 | 2 |\n| 4 | 集群业务子卡 | ES02VSTSA | 4 |\n| 5 | 光模块 | SFP-GE-LX-SM1310 | 36 |\n| 6 | 高速电缆 | QSFP-40G-CU3M | 8 |\n| 7 | 8口POE交换机 | TL-SG2210P | 13 |\n| 8 | 16 口百兆交换机 | TL-SG2016D | 1 |\n| 9 | 16 口百兆POE交换机 | TL-SL1218MP | 1 |\n| 10 | 24口千兆交换机 | S5735S-L24T4S-AQ2 | 1 |\n| 11 | UPS 主机 | UPS2000-G-15KRTL | 1 |\n| 12 | 电池 | 12V100AH | 16 |\n| 13 | 电池柜 | 国标 | 1 |\n| 14 | 机柜 | G28242 | 1 |\n| 五 | 智能交通 |   |   |\n| 1 | 视频融合平台一体机 | DH-DSS-T9100D-SZCQ | 1 |\n| 2 | 视频融合平台硬件务器 | 信创产品，DH-DSS-T9100D-HW/10000 | 2 |\n| 3 | 网络存储服务器 | DH-EVS5248S | 1 |\n| 4 | 硬盘 | ST6000NM021A | 48 |\n| 5 | 管理终端电脑 | 信创产品，XC-P421P/V2(256G+24+Kylin)(ZY+SMI) | 1 |\n| 6 | 液晶监视屏 | DH-LM86-S400 | 1 |\n| 7 | 核心交换机 | S7003X | 1 |\n| 8 | 800万全景AR网络摄像机 | DH-PSDW82449M-AAZYQ | 3 |\n| 9 | 高空瞭望球机 | DH-SD-8C3840-CQ | 2 |\n| 10 | 42U 机柜、机架 | G28242 | 1 |\n| 11 | 400 万星光级红外AI智慧网络球机 | DH-SDT-5X2437-SZFCQ | 15 |\n| 12 | 400万全结构化卡口摄像机 | DH-CP435-CQZYQ | 40 |\n| 13 | 补光灯 | DH-ITALE-060AA-CW3530 | 40 |\n| 14 | 交换机 | S5737-L24T4S-QA2 | 4 |\n| 15 | 光模块 | SFP-GE-LX-SM1310 | 8 |\n| 六 | 安装费用 |   |   |\n| 1 | 原电箱拆除 | 现场施工 | 80 |\n| 2 | 箱体安装 | 现场施工 | 80 |\n| 3 | 新装电箱墙面开槽及恢复 | 现场施工 | 80 |\n| 4 | 1P 智慧微断安装 | 现场施工 | 584 |\n| 5 | 2P 智慧微断安装 | 现场施工 | 50 |\n| 6 | 3P、4P 智慧微断安装 | 现场施工 | 78 |\n| 7 | 电源模组安装 | 现场施工 | 80 |\n| 8 | 通信模组安装 | 现场施工 | 80 |\n| 9 | 天线安装 | 现场施工 | 80 |\n| 10 | 物联网传感器安装 | 现场施工 | 160 |\n| 11 | 高空全景感知单元安装 | 现场施工 | 1 |\n| 12 | 动火离人热成像安装 | 现场施工 | 10 |\n| 13 | 明厨亮灶专用感知单元安装 | 现场施工 | 10 |\n| 14 | 明厨亮灶显示屏安装 | 现场施工 | 4 |\n| 15 | 明厨亮灶解码器安装 | 现场施工 | 4 |\n| 16 | 智能警戒检测单元安装 | 现场施工 | 2 |\n| 17 | 客流统计智能单元安装 | 现场施工 | 4 |\n| 18 | AI 开放平台系列摄像机安装 | 现场施工 | 1 |\n| 19 | 服务器安装 | 现场施工 | 2 |\n| 20 | 挖沟槽土方 | 现场施工 | 94.62 |\n| 21 | 回填方 | 现场施工 | 94.62 |\n| 22 | 混凝土构建拆除 | 现场施工 | 0.2 |\n| 23 | C20水泥混凝土路面恢复 | 现场施工 | 0.2 |\n| 24 | 整理绿化用地 | 现场施工 | 400 |\n| 25 | 视频监控系统 | 现场施工 | 1 |\n| 26 | 物联网传感器安装 | 现场施工 | 265 |\n| 27 | 消防主机控制器联网改造 | 现场施工 | 2 |\n| 28 | 室内消防栓阀门改造 | 现场施工 | 62 |\n| 29 | 物联网网关安装 | 现场施工 | 67 |\n| 30 | 防火墙安装 | 现场施工 | 2 |\n| 31 | 交换机安装 | 现场施工 | 18 |\n| 32 | UPS系统安装 | 现场施工 | 1 |\n| 33 | 4芯光缆 | GYTA 4 G652D | 11707 |\n| 34 | 12芯光缆 | GYTA 12 G652D | 5957 |\n| 35 | 24芯光缆 | GYTA 24 G652D | 2334 |\n| 36 | 网线 | 六类网线 | 7532 |\n| 37 | 配管DN20 | 联塑 DN20 | 3392 |\n| 38 | 电线RVV3*1.5mm2 | RVV3*1.5mm2 | 2539 |\n| 39 | 72芯光纤配线架 | Hbodier 72 空箱 | 4 |\n| 40 | 光纤终端盒安装 | 国标 | 6 |\n| 41 | 光纤熔接安装 | 现场施工 | 200 |\n| 42 | 光纤测试 | 现场施工 | 1 |\n| 43 | 综合设备箱 500*400*200mm | 定制 | 11 |\n| 44 | 综合设备箱 330*480*135mm | 定制 | 13 |\n| 45 | 混凝土构建拆除 | 现场施工 | 2 |\n| 46 | C20水泥混凝土路面恢复 | 现场施工 | 2 |\n| 47 | 整理绿化用地 | 现场施工 | 624 |\n| 48 | 室外设备机柜 | 定制 | 4 |\n| 49 | 室外设备箱560*210 | 300*400，定制 | 47 |\n| 50 | 光纤收发器(1光1电) | FC311A-3+FC311B-3 | 16 |\n| 51 | 光纤收发器(1光2电) | FC311A-3+FC314B-3 | 8 |\n| 52 | 光纤收发器(1光4电) | FC311A-3+FC314B-3 | 8 |\n| 53 | 光纤收发器机架 | TL-FC1400 | 5 |\n| 54 | 避雷器 | 绿联80740 | 42 |\n| 55 | 配线YJV3*6mm2 | YJV3*6mm2 | 2730 |\n| 56 | 配线RVV3*2.5 | RVV3*2.5 | 3917 |\n| 57 | 配管DN32 | 联塑 DN32 | 126 |\n| 58 | 室外立杆安装 | 定制 | 42 |\n| 59 | 光纤熔接安装 | 现场施工 | 200 |\n| 60 | 混凝土构建拆除 | 现场施工 | 4 |\n| 61 | C20水泥混凝土路面恢复 | 现场施工 | 4 |\n| 62 | 整理绿化用地 | 现场施工 | 400 |\n| 63 | 监控系统摄像头安装 | 现场施工 | 60 |\n| 64 | 智能交通系统 | 现场施工 | 1 |\n| 65 | 人脸识别门禁系统 | 现场施工 | 10 |\n| 66 | 停车道闸系统 | 现场施工 | 7 |\n| 67 | 长沙银行一卡通系统 | 现场施工 | 1 |\n| 68 | 视频监控系统 | 现场施工 | 1 |\n| 69 | 巡更系统 | 现场施工 | 1 |\n| 70 | 脚手架搭拆费 | 现场施工 | 1 |\n| 71 | PVC管 20mm | 联塑DN20 | 8087 |\n| 72 | PE管 20mm | 联塑DN20 | 113 |\n| 73 | 辅材 | 国标 | 1 |\n\n### 软件系统实施\n长沙市机关事务管理局智慧后勤服务管理平台项目软件系统实施工作采取软件工程通用的交付模式。\n#### 交付模型\n\n图 软件系统实施模型\n#### 需求分析\n##### 需求分析过程\n项目经理根据合同要求组织进行项目软件建设需求调研工作，包括以下工作内容：\n- 需求调研；\n- 需求分析；\n- 需求规格说明书；\n- 需求规格说明书评审；\n- 需求规格说明书修订。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 需求调研 | 《需求调研方案》 《需求调研报告》 | 项目经理、开发组 |\n| 需求分析 | 《需求规格说明书》 | 项目经理、开发组 |\n| 需求评审 | 《需求规格说明书》 | 项目经理、开发组 |\n\n软件系统的需求调研应该以项目前期知识为基础，包括技术方案、招投标文件、售前方案等。通过对前期需求整理完成后，并以此为基础开展需求的调研和确认工作。为了避免沟通过程中的噪声以及与建设方达成对目标系统的共识，应在需求整理完成后和用户进行需求的确认以及评审。\n##### 需求规格说明书\n需求规格说明书是需求分析阶段的主要成果，在需求分析过程中，提交物包括但不限于：\n- 需求调研大纲；\n- 需求调研方案；\n- 需求调研记录；\n- 需求调研报告；\n- 系统原型设计；\n- 需求规格说明书。\n需求规格说明书中应从长沙市机关事务管理局具体的业务开始进行分析，文档包括但不限于：\n- 项目背景介绍；\n- 项目建设的内容和目标；\n- 项目建设方和相关业务的现状分析、问题描述；\n- 项目用户方组织架构分析；\n- 项目建设单位业务需求分析，包括对各个业务的描述、业务流程（绘图）、业务承担的部门或者职位等；\n- 项目功能需求分析。项目功能需求分析是指从业务需求到功能需求的一个转换过程，文档要求完成从业务到功能的整体规划（功能架构）、功能模块规划、功能点规划、功能用例图、用例、界面原型、交互设计、数据项设计；\n- 需求追踪矩阵，包括横向需求追踪矩阵和纵向追踪矩阵。\n##### 需求确认与评审\n需求规格规格说明书完成后，项目经理将提起需求评审专题会议，根据项目情况由建设方或监理方组织项目需求评审会议，需求提出方或者相关专家组是项目需求评审会议的主要参会人员。项目经理准备需求评审材料，包括需求规格说明书、讲演PPT等。\n需求评审完成后，由评审组提出评审意见，对需求规格说明书调整后，由评审各方签订。\n评审通过的需求规格说明书将作为本项目软件系统验收的主要标准之一。\n#### 系统设计\n项目经理组织项目团队在需求分析的基础上进行系统设计工作，包括以下工作内容：\n- 系统概要设计；\n- 系统详细设计；\n- 系统设计评审。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统概要设计 | 《系统概要设计说明书》 | 项目经理、开发组 |\n| 系统详细设计 | 《系统详细设计说明书》 | 项目经理、开发组 |\n| 系统设计评审 | 《系统详细设计说明书》 | 项目经理、开发组 |\n#### 系统开发\n在系统设计通过的基础上，项目经理组织项目组成员完成项目软件开发过程，具体工作内容如下：\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统开发 | 项目软件 | 项目经理、开发组 |\n#### 集成融合\n长沙市机关事务管理局智慧后勤服务管理平台项目作为一个综合型系统集成项目，项目建设过程中有大量的项目系统集成融合与系统对接事项，具体包括：\n- 智慧后勤管理平台与十四个已建系统的对接；\n- 智慧后勤管理平台对能力中枢中部分共性能力的调用；\n- 智慧后勤管理平台移动端应用嵌入“长政通”APP；\n- 智慧后勤管理平台移动端应用嵌入“我的长沙”公众号；\n- 智慧后勤管理平台监控视频接入视频统一融合平台。\n#### 系统测试\n在研发过程中以及研发工作基本结束后，项目组对软件进行测试，测试过程的具体工作内容如下：\n- 项目软件系统测试；\n- 系统内部集成测试；\n- 外部系统集成测试；\n- 移动端融合测试；\n- 视频数据传输调试；\n- 数据资源共享测试。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 单元测试 | 《测试报告》 | 测试组长 |\n| 压力测试 | 《测试方案》 《测试报告》 | 测试组长 |\n| 性能测试 | 《测试方案》 《测试报告》 | 测试组长 |\n| 整体测试 | 《测试方案》 《测试报告》 | 测试组长 |\n上线部署\n系统整体测试完成后，项目组根据项目要求，将软件系统部署在建设方指定的基础环境中，并按找项目软件要求完成项目软件的启动和部署后的测试。测试完成满足要求后，宣布系统正式上线。\n长沙市机关事务管理局智慧后勤服务管理平台项目系统部署分为两个部分：\n- 智慧后勤系统平台在政务云上的部署；\n- 在本地资源上系统的部署。\n具体工作内容包括但不限于：\n- 系统上线方案；\n- 系统上线准备；\n- 系统上线申请；\n- 系统上线执行；\n- 系统上线报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统上线准备 | 《系统上线方案》 | 项目经理、开发组 |\n| 系统部署 | 《软件系统部署报告》 | 项目经理、开发组 |\n| 系统上线 | 《系统上线报告》 | 项目经理、开发组 |\n#### 用户测试\n在系统上线部署完成后，用户方队已经部署完成的系统进行测试，用户按照实际的使用情景进行测试，测试完成后，用户出具用户测试报告，项目组对测试结果中的相关问题进行确认和处理。\n长沙市机关事务管理局智慧后勤服务管理平台项目用户测试时间主要为项目试用期，系统上线完成后，在系统试用期内完成整个系统的用户测试过程。\n本阶段相关工作内容如下：\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 用户测试 | 《用户测试报告》 | 项目用户方 |\n| 问题处理 | 《用户测试问题处理报告》 | 项目经理以及项目团队成员 |\n### 集成实施\n请见项目系统集成实施章节。\n### 项目测试\n项目软硬件系统安装部署完成后，项目经理应根据项目合同要求，对项目范围内的集成系统进行集成测试，以确保集成系统的稳定性和可靠性。\n本项目包含多个内部智能终端的集成，同时也包含多个外部系统的集成，系统集成测试（系统联调）在整个项目执行过程中非常重要。\n测试前，我方测试组将制定完善的项目测试方案，测试方案应包含具体的测试范围定义、测试用例、测试时间、测试人员、测试用例数据等。\n测试方案完成后，提交项目各方进行审批，测试方案通过各方共同审批后，测试人员根据测试方案完成集成测试，并形成测试报告，由项目各方共同签署。\n测试报告将作为项目整体验收的依据之一。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| --- | :---: | :---: |\n| 制定测试方案 | 《测试方案》 《测试报告》 | 测试工程师/实施项目经理 |\n| 集成测试 | 《测试报告》（各方签署） | 测试工程师 |\n### 等保测评\n根据相关要求，长沙市机关事务管理局智慧后勤管理平台项目至少应满足等级保护二级以上的安全要求。项目等级保护是在项目设计过程中就开始进行规划，包括平台的部署环境、相关网络改造以及集成融合等各个方面。\n项目基本建设完成后，由我方编制《信息系统等级保护实施方案》，并按方案进行等级保护实施。在项目具备等保测评条件后，经项目经理提起，由建设单位申请相关机构对项目进行测评，并约定具体的测评时间。项目组应有相应的人员参与整个测评并协助完成测评相关的工作。\n测评过程中，根据测评机构反馈的相关问题和建议对信息系统进行整改，直至满足测评相关要求并通过等保测评。\n测评完成后，由测评机构出具正式的《项目信息系统等保测评报告》，并交建设方和项目组存档。\n等保测评包括但不限于：\n    - 和测评单位沟通测评工作和内容，制定测评计划，编制《信息系统等级保护实施方案》；\n    - 提起项目等保测评申请；\n    - 和建设单位、测评单位召开测评启动会议，明确测评方案和计划；\n    - 协助测评单位现场测评；\n    - 根据测评结果，反馈项目组进行整改，整改内容包括基础软硬件安全漏洞风险、应用系统安全漏洞风险等\n    - 协调测评单位复测；\n    - 根据测评结果考虑进行下一步；\n    - 和测评单位、建设单位一起编写等保制度；\n    - 对等保进度进行讨论，定稿后发布；\n    - 通过测评，归档《信息系统等保测评报告》。\n  - \n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 等级保护实施设计 | 《信息系统等级保护实施方案》 | 项目经理、实施组 |\n| 发起等保测评申请 | 《等保测评申请》 | 项目经理、实施组 |\n| 配合完成等保测评 |   | 项目经理、实施组 |\n| 系统整改 | 《系统整改报告》 | 项目经理、实施组 |\n| 测评完成 | 《信息系统等保测评报告》 | 项目经理、实施组 |\n### 密码测评\n密码测评主要针对需要通过密码技术保障信息系统物理和环境安全、网络和通信安全、设备和计算安全、应用和数据安全的项目，或针对项目合同有密码测评要求的项目。密码测评可同时针对非涉密信息系统项目和涉密信息系统项目。\n一般情况下，由项目承建单位编制好《密码应用建设方案》、《密码应用实施方案》、《密码应用应急处置方案》，并按实施方案进行密码应用实施。在项目具备密码测评条件后，经项目经理提起，由建设方申请相关机构对项目进行测评，并约定具体的测评时间。项目组应有相应的人员参与整个测评并协助完成测评相关的工作。\n测评过程中，根据测评机构反馈的相关问题和建议对信息系统进行整改，直至满足测评相关要求并通过密码测评。\n测评完成后，由测评机构出具正式的《XXX项目信息系统密码测评报告》，并交建设方和项目组存档。\n等保测评包括但不限于：\n    - 编制《密码应用建设方案》、《密码应用实施方案》、《密码应用应急处置方案》并按相关方案完成密码应用建设实施；\n    - 提起项目密码测评申请，协助建设方向测评机构申请密码测评；\n    - 协助完成密码测评；\n    - 根据测评意见和建议完成对信息系统的整改，编制整改报告；\n    - 通过密码测评，归档《项目信息系统密码测评报告》。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 密码应用建设设计 | 《密码应用建设方案》 《密码应用实施方案》 《密码应用应急处置方案》 | 项目经理、实施组 |\n| 密码测评 |   | 项目经理、实施组 |\n| 系统整改 | 《系统密码测评整改报告》 | 项目经理、实施组 |\n| 测评完成 | 《信息系统密码测评报告》 | 项目经理、实施组 |\n### 项目整改\n根据监理、客户及质量小组评估意见，全面规范项目交付质量、进度及技术资料管理。包括但不限于以下工作：\n    - 成立项目整改小组；\n    - 编制项目整改计划；\n    - 按计划进行项目整改；\n    - 输出项目整改报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 成立项目整改小组 | 整改小组名单 | 决策支撑组、PMO、项目经理、质量经理 |\n| 编制项目整改计划 | 《项目整改计划》 | PMO、项目经理、质量经理、质量工程师 |\n| 输出项目整改报告 | 《项目整改报告》 | 项目经理、质量经理、质量工程师 |\n### 项目上线\n项目系统整改完成并达到上线条件后，项目经理应申请项目上线运行。包括但不限于以下工作：\n- 项目上线申请；\n- 系统上线；\n- 系统上线问题处理；\n- 系统上线报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 上线申请 | 《系统上线申请》 《项目试运行方案》 | 项目经理 |\n| 系统上线 | 《系统上线报告》 | 项目经理 |\n### 项目培训\n系统上后，项目经理组织项目的培训活动。长沙市机关事务管理局智慧后勤管理平台项目的项目培训主要包括两个方面的培训：\n- 项目信息系统使用方面的培训；\n- 项目信息系统在日常使用过程中的简单维护和管理培训。\n具体包括但不限于以下内容：\n- 培训环境：根据项目合同培训要求准备培训环境，包括培训的场地，其他的培训设备，培训环境搭建等；\n- 培训讲师：项目根据项目实际情况指派具备培训能力的工程师担任培训讲师进行培训工作；\n- 培训方案：项目组根据项目最终的建设情况编制培训方案，对培训的具体事宜进行合理的安排，包括培训计划、批次等，编制培训教程，并根据培训方案完成培训工作；\n- 实施培训：根据培训方案完成培训工作，编制《培训报告》，建设单位以及监理单位签署培训报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 培训准备 |   | 项目经理、培训组 |\n| 制定方案 | 《培训方案》包括但不限于： 《培训计划》（培训具体安排） 《培训教程》 | 培训组 |\n| 完成培训 | 《培训报告》 | 培训组 |\n## 项目收尾阶段\n### 阶段验收\n阶段验收也称为项目初步验收。项目范围内的相关工作以及商务合同所承诺的项目成果基本提交完成后，项目经理向建设方申请项目阶段验收。\n项目阶段验收根据项目商务合同、合同附件、项目招投标文件中所要求进行项目初步验收工作。阶段验收由建设方组织验收团队（专家组）主要对项目建设内容、建设成果、提交物等进行逐一的核实确认和审阅，并对承建方进行现场质询。确保项目交付情况满足项目合同以及相关协议的要求。\n阶段验收会根据项目的具体情况（项目性质、复杂程度、用户技术力量以及项目当时的环境）来完成项目验收工作。\n本项目初步验收可采用集中验收方式，既在集中的相对比较短的时间内完成验收工作；也可以采用试运行方式进行验收，既根据项目产品在用户现场的具体运行情况来决定验收，在试运行的过程中，将运行情况进行记录，形成试运行报告，用户签字后作为验收的依据之一。\n\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 阶段验收申请 | 《阶段验收申请》 | 项目经理 |\n| 验收准备 | 《项目验收方案》 《项目阶段验收材料》 | 项目经理以及项目组成员 |\n| 阶段验收 | 《阶段验收报告》 | 项目经理以及项目组成员 |\n| 阶段验收整改 | 《阶段验收整改报告》 | 项目经理以及项目组成员 |\n### 项目试运行\n阶段验收通过，并根据项目初步验收意见完成整改后，项目经理向建设方和监理方提起项目系统试运行。\n具体包括但不限于以下工作：\n    - 申请系统试运行；\n    - 试运行方案；\n    - 试运行准备，例如：统初始化、基础数据准备等；\n    - 试运行报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 申请系统试运行 | 《项目试运行申请》 《项目试运行方案》 | 项目经理 |\n| 试运行报告 | 《试运行报告》 | 实施组 |\n### 竣工验收\n项目竣工验收是指项目完成了阶段验收中的整改内容，并通过试运行确保系统能满足建设方的整体要求，交付情况满足项目竣工验收标准，项目可启动竣工验收。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| --- | --- | --- |\n| 阶竣工验收申请 | 《竣工验收申请》 | 项目经理 |\n| 验收准备 | 《项目竣工验收方案》 《项目竣工验收材料》 | 项目经理以及项目组成员 |\n| 竣工验收 | 《竣工验收报告》 | 项目经理以及项目组成员 |\n\n\n# 硬件系统实施\n在本项目中硬件实施包括以下几个部分的内容：\n- 智慧安全用电硬件设备安装和调试；\n- 智慧物联硬件设备安装和调试；\n- AI视频监控硬件设备安装和调试；\n- 基础网络硬件设备安装和调试；\n智能交通硬件设备安装和调试。\n## 智慧安全用电\n### 实施内容\n智慧安全用电智能终端的安装包括以下的实施内容；\n- 智慧微断开关电源以及通信模组（含天线以及箱体）；\n- 1-4P智慧微断。\n在项目深化设计工作完成后，根据项目深化设计所规划的点位进行智慧微断及通讯模组的实施和部署。智慧微断开关电源以及通信模组（含天线以及箱体）一共为80套。共有80个强电箱需要改造。其中涉及到使用1P智慧微断共584个、2P智慧微断50个、3P智慧微断31个、4P智慧微断47个。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 智慧微断开关电源 | 个 | 80 |\n| 2 | 1P智慧微断 | 个 | 584 |\n| 3 | 2P智慧微断 | 个 | 50 |\n| 4 | 3P智慧微断 | 个 | 31 |\n| 5 | 4P智慧微断 | 个 | 47 |\n| 6 | 智慧微断通信模组 | 个 | 80 |\n| 7 | 天线 | 根 | 80 |\n| 8 | 导轨及箱体 | 套 | 80 |\n### 实施位置\n相关终端均部署于市政府大楼1F至13F和市委大楼1F至11F过道两侧现有的电箱位置，替换原来电箱里面的传统空开。\n### 实施人员\n因为相关内容的实施涉及到强电，为了保证安全，在项目实施过程中，相关实施人员必须持证上岗，我方位该项目配备具有强电施工证的人员进行相关内容的实施。\n### 实施时间\n因为在智能微断等设备的实施过程中必须关闭楼层电源或实施点位的总控制电源开关，同时还要完成安装后的测试，会影响到相应施工区域的用电，故我方对该项工作的施工时间安排在非正常工作时间进行，主要是利用市委、市政府大楼放假和下班后休息时间进行集中施工。\n### 实施方式\n智能微断的施工采用提前准备、分步规划、错时实施、单点测试的施工原则，即在智能微断的施工过程中，提前进行施工准备，包括在物业进行报备，并通知到相关施工区域的办公室。施工前制定详细的施工规划，并分步进行，每天只规划能够实施完成的施工内容。在时间上，错开办公和用电时间，利用休息时间进行施工，并留有充足的施工和测试以及整改的时间。在施工过程中，安装完成一个点位必须立刻进行通电测试，确保每次安装的点位取电正常后再开始下一个点位的安装。\n### 实施流程\n智慧微断的实施流程如下：\n- 制定各点位实施计划；\n- 施工前提前进行施工报备以及协调机关事务局发布施工点位的施工通知，当特殊情况时，临时调整施工计划；\n- 逐个点位施工并测试，确保各点位取电正常；\n- 清理施工现场，确保现场卫生。\n### 安全文明施工措施\n因为项目涉及到强电，在施工过程中的安全必须要进行保障，为确保施工安全，应采取如下措施：\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 禁止单人实施，施工过程至少两人一组，其中至少一人拥有电工证，无证人员禁止上手操作；\n- 实施期间安全员必须全程在岗监督；\n- 严禁带电操作，必须按照项目规范流程进行施工，施工前施工点位必须断电；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 终端安装完成后，应进行通电以及漏电测试，确保安装正确；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 智慧物联\n### 实施内容\n智慧物联终端的实施包括以下内容：门磁传感器、出入识别传感器、多功能空气质量传感器、温湿度传感器、喷淋管道压力监测传感器、室内消防栓压力监测传感器、水位监测传感器、消防控制器通信板卡、物联网网关。\n#### 门磁传感器\n数量：115个。\n部署于食堂的库房门和消防门、市政府和市委大楼B2、B1、1F~13F以及顶楼各层的消防门监测，确保消防门处于常闭状态；\n#### 出入识别传感器\n数量：68个。\n部署于食堂大楼的主要出入口、市政府和市委大楼B2、B1、1F~13F以及顶楼各层的出入口，用于监测当前会议室或者各楼层里面的实时人数统计；\n#### 多功能空气质量传感器\n数量：50个。\n部署于市政府和市委大楼各楼层过道以及会议室，用于监测所在环境的空气质量参数；\n#### 温湿度传感器\n数量：50个。\n部署于食堂库房、弱电机房、强电机房、空调机房以及水泵房，用于监测所在环境的温湿度状态，实现相关区域的安全管理\n#### 喷淋管道压力监测传感器\n数量：62个。\n部署于食堂、市政府和市委大楼各楼层的喷淋监测压力表处，实现实时监测喷淋管道的水压，确保喷淋管道水压安全。\n#### 室内消防栓压力监测传感器\n数量：62个。\n部署于食堂、市政府和市委大楼各楼层的消防栓压力表处，实现实时监测消防栓的水压，确保消防栓水压安全。\n#### 水位监测传感器\n数量：18个。\n具体部署于食堂、市委和市政府大楼内的生活用水水箱和消防用水箱，实现水位高度的监测，确保生活用水和消防用水安全。\n#### 消防控制器通信板卡\n消防控制器数据采集和传输边缘计算终端和通信接口板卡共2套，具体部署于食堂、市委和市政府大楼内的2个消防主机，实现现有消防主机的数据采集，对消防实现全方位的实时监测；\n#### 物联网网关\n数量：67台。\n具体部署于食堂、市委和市政府大楼内各楼层过道以及食堂库房、弱电机房、强电机房、空调机房以及水泵房，实现门磁传感器、出入识别传感器、多功能空气质量传感器、温湿度传感器、喷淋管道压力监测传感器、室内消防栓压力监测传感器和水位监测传感器接入物联网网关进行数据传输。\n### 设备清单\n| 序号 | 终端名称 | 单 | 数量 |\n| :---: | :---: | :---: | ---: |\n| 1 | 门磁传感器 | 个 | 115 |\n| 2 | 出入人体识别传感器 | 个 | 68 |\n| 3 | 多功能环境质量监测传感器 | 个 | 50 |\n| 4 | 温湿度传感器 | 个 | 50 |\n| 5 | 喷淋管道压力传感器 | 个 | 62 |\n| 6 | 水位监测传感器 | 个 | 18 |\n| 7 | 室内消防栓压力监测传感器 | 个 | 62 |\n| 8 | 消防主机数据采集和传输边缘计算终端 | 台 | 2 |\n| 9 | 通信接口板卡 | 个 | 2 |\n| 10 | 室内消防栓消防阀门 | 个 | 62 |\n| 11 | LoRa核心网络平台 | 套 | 1 |\n| 12 | 物联网网关 | 台 | 67 |\n### 实施方式\n在项目深化设计完成后，根据不同类型传感器所安装的区域、安装要求等情况对项目施工时间进行规划。根据各类传感器接入要求，先完成施工区域物联网网关的安装与调试，以确保其他终端安装后能尽快按成调试。\n### 施工时间\n市委市政府大楼的施工时间考虑安装过程中的噪声，主要是利用市委、市政府大楼放假和下班后休息时间进行集中施工。\n其他区域和点位在正常的上班时间施工。\n### 实施流程\n实施流程如下：\n- 制定各点位实施计划；\n- 施工前提前进行施工报备以及协调机关事务局发布施工点位的施工通知，当特殊情况时，临时调整施工计划；\n- 逐个点位施工并测试，确保各点位取电正常；\n- 清理施工现场，确保现场卫生。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## AI视频监控\nAI智能监控系统实施主要包括前端视频感知单元以及后段存储、管理以及显示设备的安装实施。\n### 实施内容\nAI视频监控系统的重点是对厨房区域进行视频感知单元的部署，通过部署全景网络智能摄像机、动火离人感知单元及摄像机等前端感知单元，实现对厨房工作人员的规范化操作进行监控，实现智能报警，对厨房门外进行余留垃圾报警，对区域内实现大场景监控，包括高空全景感知单元、明厨亮灶专用感知单元、明厨亮灶显示屏、AI开放平台系列摄像机等；\n基础网络建设为依托现有电子政务外网的网络架构，对前端设备进行接入，实现前端和后端应用的网络交互。\n本期AI视频监控系统新建28个摄像头，根据摄像头分辨率以及存储时间要求计算，至少需要存储空间28×3.7=103.6T，出于数据安全考虑和本地管理需要，配置两台本地磁盘阵列做数据备份，每台磁盘阵列含16块6T硬盘，二台存储空间合计192T，可以满足项目AI视频监控系统的视频数据存储要求。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 高空全景感知单元 | 台 | 1 |\n| 2 | 高空全景感知单元-支架 | 个 | 1 |\n| 3 | 动火离人热成像 | 台 | 10 |\n| 4 | 明厨亮灶专用感知单元 | 台 | 10 |\n| 5 | 明厨亮灶专用感知单元支架 | 台 | 10 |\n| 6 | 明厨亮灶显示屏 | 台 | 4 |\n| 7 | 明厨亮灶显示屏支架 | 台 | 4 |\n| 8 | 明厨亮灶解码器 | 台 | 4 |\n| 9 | 智能警戒检测单元 | 台 | 2 |\n| 10 | 客流统计智能单元 | 台 | 4 |\n| 11 | 客流统计智能单元支架 | 台 | 4 |\n| 12 | AI开放平台系列摄像机 | 台 | 1 |\n| 13 | 网络存储设备 | 台 | 2 |\n| 14 | 服务器 | 台 | 2 |\n### 实施点位\n| 序号 | 区域 | 位置 | 数量 | 设备 | 备注 |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 | 机关1食堂 | 机关1食堂1楼后厨南北两侧墙面 | 4 | 动火离人热成像摄像机 | 新建支架 |\n| 2 | 机关1食堂 | 机关1食堂2楼后厨东西各一台 | 2 | 动火离人热成像摄像机 | 新建支架 |\n| 3 | 机关1食堂 | 机关食堂1楼操作间西墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 4 | 机关1食堂 | 机关食堂1楼南门东侧厨房南侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 5 | 机关1食堂 | 机关食堂2楼南门北侧洗漱间北侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 6 | 机关1食堂 | 自助餐厅1楼厨房东侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 7 | 机关1食堂 | 机关1食堂后厨入口 | 1 | AI开放平台系列摄像机 | 新建立杆 |\n| 8 | 机关1食堂 | 一楼餐厅北面柱子 | 2 | 明厨亮灶显示屏 | 新建支架 |\n| 9 | 机关1食堂 | 二楼餐厅南面墙面 | 2 | 明厨亮灶显示屏 | 新建支架 |\n| 10 | 市政府大楼 | 南栋楼顶东南角 | 1 | 高空全景感知单元 | 新建支架 |\n| 11 | 市政府大楼 | 南栋1层东西侧走廊靠楼梯口 | 2 | 智能警戒检测单元 | 新建支架 |\n| 12 | 市政府大楼 | 南栋1层正门入口处 | 2 | 客流统计智能单元 | 新建支架 |\n| 13 | 市委大楼 | 北栋1层正门入口处 | 2 | 客流统计智能单元 | 新建支架 |\n### 实施方式\nAI视频监控系统的实施主要是AI摄像头的实施安装，相关的摄像头安装安装基本采用借杆或在墙壁安装的方式，仅在机关一食堂后厨入口需要新建立杆，其余均通过新建支架即可完成。\n### 实施流程\nAI视频监控系统实施流程如下：\n- 派遣施工人员进行实施现场点位的勘测与确认，再次明确具体安装方式，明确各个点位的电、网的接入方式；\n- 制定明确的安装方案与计划；\n- 新建立杆点位基坑挖掘、地笼放入、浇筑，可与智能交通系统同时实施；（隐蔽工程拍照）\n- 新建立杆点位立杆、电、网接入，其他各点位电、网接入到位；\n- 申请相关设备的IP地址，并提前将地址写入设备中；\n- 摄像头安装、（前置条件：视频监控平台部署完成。）系统接入调试；\n- 编写各点位设备安装实施单；\n- 实施完成，编写AI视频监控系统实施报告。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 基础网络\n### 实施内容\n硬件系统实施主要包括是以下几个部分的实施：\n- 网络系统的建设；\n- 本地机房设备的部署实施。\n市委市政府大院目前已经具备完整的网络系统，本次建设主要是在现有网络系统的基础上完成物联网网络系统的建设。另一部分是机房设备在本地机房的实施部署。\n### 机房环境实施\n本期项目包含设备间部署机柜、配线架、UPS以及设备间的综合布线工作，包括如下工作：\n- UPS主机以及电池箱的安装；\n- 本项目所采购的机柜的安装；\n- 机房强电线路部署；\n- 机房弱电网线的部署实施。\n目前将人防工程机房定位为数据机房，提供机房设备管理和部分业务服务。新增设备安装在既有机柜。为保障机房设备和安防监控系统设备能稳定不间断运行，设备间（机房）需配置一台UPS电源主机（15KVA），以及16只100AH/12V的UPS专用电池蓄电池。\n### 网络系统实施\n本项目配备两台核心交换机，作为本项目的汇聚交换设备，上连人防机房的核心交换，本项目其他设备主要以这两台设备作为汇聚接入。其中核心交换机（智能交通）作为智能交通系统的汇聚交换机上连本项目的核心交换。\n### 网络拓扑图\n\n图 网络系统建设拓扑图\n### 设备清单\n| 序号 | 设备 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 核心交换机 | 台 | 2 |\n| 2 | 48端口电接口板 | 块 | 2 |\n| 3 | 48端口光接口板 | 块 | 2 |\n| 4 | 集群业务子卡 | 块 | 4 |\n| 5 | 光模块 | 个 | 36 |\n| 6 | 高速电缆 | 根 | 8 |\n| 7 | 8口POE交换机 | 台 | 13 |\n| 8 | 16口百兆交换机 | 台 | 1 |\n| 9 | 16口百兆POE交换机 | 台 | 1 |\n| 10 | 24口千兆交换机 | 台 | 1 |\n| 11 | UPS主机 | 个 | 1 |\n| 12 | 电池 | 个 | 16 |\n| 13 | 电池柜 | 个 | 1 |\n| 14 | 机柜 | 个 | 1 |\n### 实施位置\n相关设备主要部署在人防工程机房，在本期项目中，部署两个42U标准机柜，新增2台核心交换以及1台智能交通核心交换机部署在该机房。同时，AI视频监控系统以及智能交通系统的NVR设备以及服务器设备均部署在该机房。\n其他交换设备根据项目设计，根据各视频点位以及传感器点位分步情况进行部署，各办公楼内可利用楼层交换设备进行部署。\n### 实施流程\n硬件系统实施是本期项目实施的基础实施内容，关系到后期的软件系统实施、智能终端实施（含智慧安全用电系统）以及AI视频监控系统、智能交通系统的实施。具体实施流程如下：\n- 完成实施环境勘测调研；\n- 项目VLAN、IP规划以及申请；\n- 制定项目实施方案、实施计划；\n- 检查环境内强电、弱电以及空间情况；\n- 申请进入人防工程机房启动实施；\n- 设备入场，包括机柜、电池柜等；\n- 机柜、UPS安装实施；\n- 强电部署到机柜；\n- 弱电部署到机柜；\n- 核心交换设备、服务器、存储设备上架安装；\n- 设备加电测试、设备初始化配置、网络测试；\n- 设备实施报告编写；\n- 工程检验以及交付。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 智能交通\n### 实施内容\n以政府机关大院为中心，通过增设卡口形成外围大防控圈，实现对车辆抓拍，并将抓拍的车辆图像及分析数据上传到管理平台实现统一管理应用，包括视频融合平台一体机、视频融合平台硬件服务器、网络存储服务器、管理终端电脑、全景AR网络摄像机等。建设智能车辆管控平台，实现对前端感知设备采集的数据进行统一接入、统一存储、统一订阅、统一推送服务，满足实时视频监控、车辆查询布控、车辆黑白名单管理、车辆超速、违停短信息提示等管理应用。\n本期共建设高空瞭望球机2台、全景AR网络摄像机3台、AI智慧网络球机15台、卡口摄像机40台、视频融合平台服务器、网络存储服务器等。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 视频融合平台一体机 | 台 | 1 |\n| 2 | 视频融合平台硬件务器 | 台 | 2 |\n| 3 | 网络存储服务器 | 块 | 1 |\n| 4 | 硬盘 | 块 | 48 |\n| 5 | 管理终端电脑 | 台 | 1 |\n| 6 | 液晶监视屏 | 台 | 1 |\n| 7 | 核心交换机 | 台 | 1 |\n| 8 | 800万全景AR网络摄像机 | 台 | 3 |\n| 9 | 高空瞭望球机 | 台 | 2 |\n| 10 | 42U机柜 | 台 | 1 |\n| 11 | 400 万星光级红外AI智慧网络球机 | 台 | 15 |\n| 12 | 400万全结构化卡口摄像机 | 台 | 40 |\n| 13 | 补光灯 | 台 | 40 |\n| 14 | 交换机 | 台 | 4 |\n| 15 | 光模块 | 块 | 8 |\n### 设备点位\n本期建设设备包括：高空瞭望 2 台、全景 AR3 台、智慧网络球机 15、卡口摄像机 40 台，摄像机共 60 台，新增支架 5 个，新立杆 34 根，共杆 8 处。\n其点位如下（最终已深化设计确认的定位位置为准）：\n| 序号 | 摄像机安装位置 | 摄像机类型 | 单位 | 数量 | 备注 |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 | 政府顶楼南边 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 2 | 市委顶楼北边 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 3 | 二办顶楼东南角 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 4 | 政府东边 | 高空瞭望球机 | 台 | 1 | 新增支架 |\n| 5 | 二办顶楼北边 | 高空瞭望球机 | 台 | 1 | 新增支架 |\n| 6 | 杜鹃广场西北 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 7 | 杜鹃广场西出口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 8 | 政协东北角人防出口东 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 9 | 档案馆院外西北角 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 10 | 一食堂南出入口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 11 | 武警中队东北角外 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 12 | 人工湖东侧车道中 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 13 | 人工湖东北角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 14 | 人工湖北杜鹃路出口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 15 | 八方小区车辆入口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 16 | 人工湖西南角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 17 | 二办东北角 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 18 | 二办前坪南侧马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 19 | 二办西南角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 20 | 人民会堂西北角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 21 | 杜鹃广场南侧中 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 22 | 杜鹃广场东侧入口 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 23 | 杜鹃广场东北角 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 24 | 市人大东南角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 25 | 杜鹃广场北侧中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 26 | 杜鹃广场西边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 27 | 杜鹃广场西出口 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 28 | 政协东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 29 | 政府月台西 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 30 | 市委月台西 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 31 | 党史研究楼前坪 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 32 | 武警中队南侧 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 33 | 一食堂南出入口 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 34 | 武警中队东北角外 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 35 | 人工湖东侧车道中 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 36 | 人工湖东北角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 37 | 人工湖北杜鹃路出口 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 38 | 人工湖北侧人防出口 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 39 | 警备司令部东边 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 40 | 警备司令部南边 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 41 | 警备司令部西边 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 42 | 恒晟南侧中 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 43 | 二办西南角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 44 | 生态停车场西北角 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 45 | 二办东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 46 | 政协南边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 47 | 人大东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n### 实施方式\n智能交通系统实施主要是摄像头的实施安装，相关的摄像头的安装基本采购新建立杆的方式进行规划，根据市政府大院的要求，所有摄像头的安装尽量不采用新建立杆的方式，而是尽量采用借杆或新建横臂的方式。\n### 实施流程\n智能交通系统实施流程如下：\n- 派遣施工人员进行实施现场点位的勘测与确认，再次明确具体安装方式，明确各个点位的电、网的接入方式；\n- 制定明确的安装方案与计划；\n- 新建立杆点位基坑挖掘、地笼放入、浇筑，可与智能交通系统同时实施；（隐蔽工程拍照）\n- 新建立杆点位立杆、电、网接入，其他各点位电、网接入到位；\n- 申请相关设备的IP地址，并提前将地址写入设备中；\n- 摄像头安装、（前置条件：视频监控平台部署完成。）系统接入调试；\n- 编写各点位设备安装实施单；\n- 实施完成，编写智能交通系统实施报告。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n- \n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n\n# 项目系统集成实施\n## 集成实施概述\n本项目涉及到十多个其他系统的集成实施，在项目交付过程中，项目系统的集成实施是项目建设过程中非常重要的实施内容之一。项目系统的集成涉及到智慧后勤管理系统与建设单位其他已建系统的对接、与智能终端的对接、能力中枢能力的调用、移动应用端的嵌入等多个方面。\n在项目的交付过程中，对于系统集成部分，需要从设计阶段开始将该部分内容作为重点，从设计、开发、实施、集成以及测试各个环节总体考虑才能确保项目的完整交付。\n## 集成实施原则\n综合考虑长沙市机关事务管理局智慧后勤管理平台项目的特性，在该项目中，项目系统集成实施的原则是统一规划、统一设计；统一规范、统一标准；分步实施、分步验收。\n统一规划、统一设计：是指长沙市机关事务管理局智慧后勤管理平台项目作为一个整体，在项目顶层设计开始就应该对项目交付过程中所需要完成的系统内外部集成与对接进行规划与设计。通过统一的规划和设计确保项目系统的整体性，也避免了在项目交付过程中出现系统对接上的遗漏。\n统一规范、统一标准：系统集成过程中有诸多的系统对接、视频对接以及智能终端对接要求，在项目交付过程中，应该对同类型的对接进行规范，统一对接规范和接口要求，特别是在数据对接与视频对接方面，采购统一的对接标准，确保各个系统对接的顺利，提升对接效率，减少后期的维护要求。\n分步实施、分步验收：智慧后勤管理系统与其他系统的集成涉及面非常广，所有的对接并非统一的整体，对接过程涉及到与其他系统监管单位、承建方、用户等各个方面的协调，在对接的过程中，基于不同系统的对接进度分步实施，每对接完成一个就验收一个，确保整体的对接进度。\n## 集成实施内容\n项目集成实施内容涉及到如下几个方面：\n- 系统嵌入实施，重要是指智慧后勤管理系统的移动端APP需要嵌入到“长政通”APP中。第二，智慧后勤管理系统的微信小程序需要嵌入“我的长沙”微信小程序内。\n- 智慧后勤管理系统与长沙市能力中枢的对接，主要是指智慧后勤管理系统对长沙市能力中枢所提供的共性能力的调用。\n- 系统之间的对接，包括垃圾分类、人防道闸系统等在内的十四个系统的对接，主要对接涉及到系统之间的数据交互和系统控制。\n- 智慧后勤管理系统与物联终端以及智慧安全用电终端设备的对接。\n- 智慧后勤管理系统中AI视频监控系统、智能交通系统与机关事务局在建视频监控统一平台系统的对接。\n- 智慧后勤管理系统中智能交通系统与交警六合一平台的对接。\n## 集成实施架构\n\n图 项目系统集成融合示意图\n## 集成融合实施\n### 中枢对接实施\n#### 概述\n根据《长沙市信息化建设项目管理办法》的相关要求，长沙市机关事务管理局智慧后勤管理平台在实施过程中部分长沙市城市大脑（中枢）具备的共性能力无须自行开发，可直接调用相关的服务。\n2021年12月，长沙正式发布上线“长沙城市超级大脑1.0”，发布智能中枢能力清单187项，数据中台归集汇聚数据总量达339亿多条，形成了人口、法人、地理信息、城市部件、房产房屋等基础数据库。\n#### 长沙市中枢能力清单\n| 系统 | 一级服务能力 | 二级服务能力 | 服务方式 | 服务状态 | 服务能力描述 |\n| --- | :---: | :---: | :---: | :---: | :---: |\n| 电子证照 | 生成证照 | 在线填报证照 | H5页面 | 已发布 | 用于各部门业务系统提交证照照面信息到电子证照综合管理系统，并且通过提交xml规范模版，让返回的页面就带有自动回填数据，减少在线填报的手工录入量 |\n| 电子证照 | 生成证照 | 证照照面信息提交服务 | 接口 | 已发布 | 电子证照照面信息提交接口，通过第三方系统后台合成数据格式，定时或手动触发推送照面信息，提交到电子证照综合管理系统 |\n| 电子证照 | 生成证照 | 在线签章证照 | 接口 | 已发布 | 获取指定的证照类型的待签章列表。该接口用于各部门业务系统获取待签章的证照列表，可以选择证照进行在线签章 |\n| 电子证照 | 生成证照 | 缺失证照在线提交 | H5页面 | 已发布 | 登记个人或企业缺失的证照信息，提供页面。 |\n| 电子证照 | 生成证照 | 生成结果获取服务 | 接口 | 已发布 | 第三方系统在提交证照生成请求后，可以通过提交时的唯一验证串（第三方系统自行产生的唯一ID）来获取此证照的相关信息，用于关联证照生成结果或其他业务场景，此接口可以在改造时通过在关键操作结束之后由后台触发或前端手动触发实现。 |\n| 电子证照 | 证照变更管理 | 电子证照作废服务 | 接口 | 已发布 | 各部门业务系统中的证照有做注销、作废等终止证照使用操作时，需调用电子证照综合管理系统的作废接口，同步实现电子证照的作废。 |\n| 电子证照 | 证照变更管理 | 电子证照变更申请页面获取服务 | H5页面 | 已发布 | 对指定的电子证照发起变更申请，适用本质是变更、换证的业务。 |\n| 电子证照 | 证照变更管理 | 电子证照变更申请数据提交 | 接口 | 已发布 | 对指定的电子证照发起变更，将新的证照数据填入xml提交，可以从其他证照共享接口或生成结果获取接口获得证照的标识，如文件编号、提取码、证照ID等。 |\n| 电子证照 | 证照信息查验 | 电子证照验证服务 | 接口 | 已发布 | 根据持证主体代码和证照信息查验证照的有效性 |\n| 电子证照 | 证照信息查验 | 基于证照标识信息获取服务 | 接口 | 已发布 | 根据证照标识检索证照信息。 |\n| 电子证照 | 证照信息查验 | 基于持证主体代码信息获取服务 | 接口 | 已发布 | 根据持证主体代码检索证照信息。 |\n| 电子证照 | 证照信息查验 | 电子证照检索服务 | 接口 | 已发布 | 根据持证主体代码检索证照列表。 |\n| 电子证照 | 证照信息查验 | 基于证照标识下载服务 | 接口 | 已发布 | 根据证照唯一标识下载证照。 |\n| 电子证照 | 证照信息查验 | 基于持证主体代码下载服务 | 接口 | 已发布 | 根据持证主体代码下载证照。 |\n| 微服务&容器平台 | 微服务/容器化框架 |   | SDK | 已发布 | 兼容springcloud框架，提供服务注册中心、api网关、服务的限流、服务鉴权、服务路由、弹性伸缩、日志归集、日志配置、熔断等功能 |\n| 微服务&容器平台 | 分布式事务 |   | SDK | 已发布 | 集成了分布式事务能力，支持 TCC 模式分布式事务管理功能。对于跨数据库、跨服务的分布式场景，用户可以在控制台上查看事务运行情况并进行超时事务处理，保证事务的一致性 |\n| 微服务&容器平台 | 自动化运维 |   | H5页面 | 已发布 | 提供从创建应用到运行应用的全程管理，功能包括创建、删除、部署、回滚、扩容、下线、启动和停止应用；支持可视化调用链查询和拓扑图；支持日志服务的查询及检索；支持系统参数的配置；有可视化的页面监控 |\n| 微服务&容器平台 | 镜像仓库 |   | H5页面 | 已发布 | 支持镜像仓库的管理，有公共仓库和租户仓库 |\n| 消息队列 | 消息发布 |   | SDK | 已发布 | 创建消息并进行发布，可以创建普通消息、延迟消息、事务消息、回溯消息等。 |\n| 消息队列 | 消息订阅 |   | SDK | 已发布 | 支持消费已发布的各种类型的消息。 |\n| 政务微信 | 即时通讯 | 聊天管理 | 工具 | 已发布 | 支持单聊、群聊方式；支持群管理和群成员的管理；支持发送文字消息、图片消息、表情、文件等消息 |\n| 政务微信 | 即时通讯 | 音视频 | 工具 | 已发布 | 支持在单人会话中，可以向对方发起视频/音频通话，并且支持开启/关闭摄像头、开启/关闭静音、开启/关闭免提；支持在多人会话中，可以向多人直接发起视频/音频通话，并且支持开启/关闭摄像头、开启/关闭静音、开启/关闭免提 |\n| 政务微信 | 即时通讯 | 红包发送 | 工具 | 已发布 | 支持在群聊中发送普照红包或者向指定成员发送专属红包 |\n| 政务微信 | 即时通讯 | 通讯录 | 工具 | 已发布 | 支持组织架构管理、成员管理及标签功能。标签功能可以管理员可以对某些同类型的成员添加同一个标签 |\n| 政务微信 | 即时通讯 | 搜索 | 工具 | 已发布 | 通过姓名、拼音、手机号码等方式可以搜索到联系人。 通过群名、群成员等方式可以搜索到群聊。 通过部门名称和相关关键字等方式可以搜索到组织节点。 通过应用名称或相关名称的关键字等方式可以搜索到应用。可通过群聊参与人、群名、聊天消息关键字、文件名、聊天时间等方法进行搜索聊天记录。 |\n| 政务微信 | 即时通讯 | 收藏 | 工具 | 已发布 | 支持收藏消息、表情、图片、文件、语音、视频、地理位置等，方便快速查找重要信息内容。 可将收藏的内容，发送至聊天中，支持分享聊天消息、表情、图片、文件、语音、视频、地理位置等。 若不需要已收藏的消息，移除收藏的内容。 |\n| 政务微信 | 协同办公支撑 | 工作邮箱接入 | 接口 | 已发布 | 支持绑定工作邮箱后，可在“机构邮箱”中进行邮件的收信、发信、读信、写信等操作，支持搜索。 支持发送邮件、分享邮件、回复邮件、转发邮件、删除邮件、收藏邮件、邮件标为未读、不再提醒他的邮件。 支持置顶邮箱提醒、消息免打扰、查找邮件、支持修改邮箱服务器设置。可以按邮箱文件夹中的分类，选择开启邮箱提醒的文件夹。 设置不提醒名单、邮箱更新频率、更换邮箱、解除邮箱绑定、加载邮件图片。 |\n| 政务微信 | 协同办公支撑 | 部门自建服务号 | SDK,接口 | 已发布 | 支持应用管理和应用能力设置。 应用管理支持设置或修改应用logo、应用名称、应用介绍、应用可见范围。支持删除应用，可以将不常用的应用，折叠到更多应用，消息提醒也会自动折叠，可以查看并回复成员发来的消息； 应用能力设置支持自定义菜单，支持发送消息，支持多媒体消息，防止截屏泄密设置，支持接收消息，支持自动回复，支持网页授权及JS—SDK等 |\n| 政务微信 | 开放平台 | 应用运营管理 | 接口 | 已发布 | 支持查看每个应用运营数据，包括：今日进入应用人数、今日进入应用次数、应用中人数。 |\n| 政务微信 | 开放平台 | 应用开发与管理 | SDK,接口 | 已发布 | 支持网页JS-SDK、SDK及接口的方式进行应用的开发，以及 应用开发的可视化管理 |\n| 政务微信 | 政务微信协同办公标准产品 | 办文 | H5页面 | 已发布 | 政务微信移动端提供基础的公文办理功能：审批流转，分发传阅，流程跟踪、审批、公文回执、公文协办、收文传阅、发文分发、关联文件、办理超时提醒，实现公文移动端办理。在政务微信端可对公文预览，签收，转办等操作，配备对应业务闭环web端后台支撑，与两办协同OA系统打通，在PC端支持国产化和X86双适配。 |\n| 政务微信 | 政务微信协同办公标准产品 | 办会 | H5页面 | 已发布 | 在政务微信端实现会议发送和回复等功能。包括：会议通知发送、短信跟踪、会议回复、会议跟踪，配备对应办会业务闭环web端后台。 |\n| 政务微信 | 政务微信协同办公标准产品 | 办事 | H5页面 | 已发布 | 政务微信端实现快捷的短信通知发送入口，指定用户、单位浏览权限，在政务微信端实现内部签呈起草，审批流转。 |\n| 统一物流 | 寄送邮件（新增物流信息）服务 | 无 | 接口 | 已发布 | 业务系统发起订单新增服务，传递给统一物流服务进而传递给物流系统处理。 支持在线资费。 在线付费或到付 支持消息推送给收寄件人 |\n| 统一物流 | 查询全国行政区划数据 | 无 | 接口 | 已发布 | 支持业务部门获取全国标准且完整的行政区划数据，用于收寄件地址填写 |\n| 统一物流 | 个人收件地址查询服务（地址库服务） | 无 | 接口 | 已发布 | 支持获取本人的邮寄地址信息 |\n| 统一物流 | 查询寄件记录服务 | 无 | 接口 | 已发布 | 支持查看本人的收寄件相关信息，包括收件人姓名，地址，联系方式，邮编。寄件人姓名，地址，联系方式，邮编 |\n| 统一物流 | 物流订单状态查询 | 无 | 接口 | 已发布 | 支持查看订单物流状态信息 |\n| 统一物流 | 物流订单取消 | 无 | 接口 | 已发布 | 支持在一定条件下取消本人的物流订单 |\n| 统一物流 | 物流订单变更 | 无 | 接口 | 已发布 | 支持在一定条件下变更本人的物流订单信息 |\n| 统一消息 | 短信通知发送 | 无 | 接口 | 已发布 | 支持通过短信渠道发送消息通知给到相关人 |\n| 统一消息 | 短信验证码发送 | 无 | 接口 | 已发布 | 支持通过短信渠道发送验证码消息给到相关人 |\n| 统一消息 | 站内信 | 无 | 接口 | 已发布 | 支持站内信系统之间发送消息 |\n| 统一消息 | 微信小程序通知 | 无 | 接口 | 已发布 | 支持通过微信小程序发送消息通知给相关人 |\n| 统一消息 | 微信服务号通知 | 无 | 接口 | 已发布 | 支持通过微信服务号发送消息通知给相关人 |\n| 统一消息 | 邮件 | 无 | 接口 | 已发布 | 支持通过邮件发送消息通知给相关人 |\n| 统一消息 | 政务微信消息通知 | 无 | 接口 | 已发布 | 支持通过政务微信发送消息通知给相关人 |\n| 统一身份认证 | 自然人认证 | 自然人账号密码登录 | 页面 | 已发布 | 提供统一的自然人通过账号密码进行验证登录 |\n| 统一身份认证 | 自然人认证 | 自然人刷脸核验登录 | 页面 | 已发布 | 提供身份认证小程序二维码，进行人像识别登录 |\n| 统一身份认证 | 自然人认证 | 自然人手机验证码核验登录 | 页面 | 已发布 | 提供用户注册时的手机号获取短信验证码登录 |\n| 统一身份认证 | 自然人认证 | 自然人微信登录 | 页面 | 已发布 | 提供的身份认证小程序二维码，进行城市服务登录 |\n| 统一身份认证 | 自然人认证 | 自然人省/国家政务服务平台登录 | 页面 | 已发布 | 提供湖南省认证平台登陆 |\n| 统一身份认证 | 自然人认证 | 自然人基本信息获取 | 页面 | 已发布 | 通过个人身份唯一标识获取本人的基本信息 |\n| 统一身份认证 | 自然人认证 | 自然人账号统一登出 | 页面 | 已发布 | 提供自然人用户对已登录的账号进行登出 |\n| 统一身份认证 | 法人认证 | 法人账号密码登录 | 页面 | 已发布 | 提供法人账号密码进行验证登录 |\n| 统一身份认证 | 法人认证 | 法人CA认证登录 | 页面 | 已发布 | 数字证书认证平台，用户通过数字证书及输入密码进行登录 |\n| 统一身份认证 | 法人认证 | 法人基本信息获取 | 页面 | 已发布 | 通过企业唯一标识，获取本企业基本信息 |\n| 统一身份认证 | 法人认证 | 法人省/国家政务服务平台登录 | 页面 | 已发布 | 提供湖南省认证平台登陆 |\n| 统一身份认证 | 法人认证 | 法人账号统一登出 | 页面 | 已发布 | 提供法人用户对已登录的账号进行登出 |\n| 统一身份认证 | 行政人员认证 | 账号密码登录 | 页面 | 已发布 | 提供政务人员通过账号和密码登录 |\n| 统一身份认证 | 行政人员认证 | 政务微信扫码登录 | 页面 | 已发布 | 提供政务微信身份认证二维码扫一扫登录 |\n| 统一身份认证 | 行政人员认证 | 基本信息获取 | 页面 | 已发布 | 通过政务人员唯一标识，获取本人基本信息 |\n| 统一身份认证 | 行政人员认证 | 账号统一登出 | 页面 | 已发布 | 提供政务人员用户对已登录的账号进行登出 |\n| 统一用户 | 个人信息 | 基本信息 | 接口 | 已发布 | 提供个人的基本信息获取，包括：姓名，性别，身份证号，住址，联系方式等 |\n| 统一用户 | 个人信息 | 政务服务办件材料 | 接口 | 待发布 | 提供政务服务办事材料获取，包括：文件名、类型、大小、上传时间 |\n| 统一用户 | 个人信息 | 电子证照 | 接口 | 已发布 | 提供电子证照信息获取，包括：证件名、证件类型、签发机构、签发时间、有效期（至）、证照状态 |\n| 统一用户 | 个人信息 | 政务服务办事记录 | 接口 | 待发布 | 提供政府服务办事记录获取，包括：事项名称，流水号，父级事项，申办时间，最新环节时间 详情：各环节受理部门，受理状态，受理时间 |\n| 统一用户 | 个人信息 | 身份证信息 | 接口 | 已发布 | 提供公积金信息获取，包括：公积金余额，缴费记录，贷款记录，贷款进度 |\n| 统一用户 | 个人信息 | 公积金信息 | 接口 | 已发布 | 提供社保信息获取，包括：参保单位，险种类型，参保日期，截止日期，参保状态 |\n| 统一用户 | 个人信息 | 社保信息 | 接口 | 已发布 | 提供不动产权信息获取，包括：共有情况，不动产单元号，不动产权证号，坐落地址，权利类型，权利性质，用途，面积，使用期限，权利其他状况，电子证照 |\n| 统一用户 | 个人信息 | 不动产权信息 | 接口 | 待发布 | 提供企业基本信息获取，包括：统一社会信用代码、法定代表人身份证、企业名称、企业类型、企业注册地、企业状态 |\n| 统一用户 | 企业信息 | 基本信息 | 接口 | 已发布 | 提供企业基本信息获取，包括：获取企业基本信息，包括：公司名称，注册资本，法定代表人，法人证件号码（主要指身份证号），法人证件名称，经营范围，营业期限等信息，负责人通信地址，负责人联系电话，负责人邮政编码，注册地址，企业成立日期，企业常用联系人联系电话，企业常用联系人姓名，企业常用联系人邮箱，统一社会信用码，企业类型，经营者姓名，邮箱，邮政编码，联系电话，备注等信息。 |\n| 统一用户 | 企业信息 | 政务服务办件材料 | 接口 | 待发布 | 提供政务服务办事材料获取，包括：文件名、类型、大小、上传时间 |\n| 统一用户 | 企业信息 | 电子证照 | 接口 | 已发布 | 提供电子证照信息获取，包括：证件名、证件类型、签发机构、签发时间、有效期（至）、证照状态 |\n| 统一用户 | 企业信息 | 政务服务办事记录 | 接口 | 待发布 | 提供政府服务办事记录获取，包括：事项名称，流水号，父级事项，申办时间，最新环节时间 详情：各环节受理部门，受理状态，受理时间 |\n| 统一用户 | 企业信息 | 法定代表人信息 | 接口 | 已发布 | 提供法定代表人信息获取，包括：法定代表人证件类型、法定代表人证件号码 |\n| 统一用户 | 企业信息 | 企业登记详情 | 接口 | 已发布 | 提供企业登记详情获取，包括：住所、业务范围、法定代表人姓名、注册资金、活动地域、业务主管单位、发证机关、有效期限、发证日期、经费来源、开办资金 |\n| 统一用户 | 企业信息 | 企业变更信息 | 接口 | 已发布 | 提供企业变更信息获取，包括：变更事项、变更前、变更后、变更日期、登记单位 |\n| 统一用户 | 政务人员信息 | 组织架构信息 | 接口 | 已发布 | 提供政务人员组织架构信息获取，包括：部门名称、职能描述、是否虚拟部门、上级部门、部门负责人、部门分管领导 |\n| 统一用户 | 政务人员信息 | 人员信息 | 接口 | 已发布 | 提供政务人员信息获取，包括：姓名、账号、性别、手机号、邮箱、证件类型、证件号码、所属部门职务、身份、入职时间 |\n| 统一待办 | 待办列表页面 | 无 | 页面 | 已发布 | 提供统一的待办汇总页面，展示用户所有待办数据 |\n| 统一待办 | 待阅列表页面 | 无 | 页面 | 已发布 | 提供统一的待阅汇总页面，展示用户所有待阅数据 |\n| 统一待办 | 待办信息管理接口 | 创建单据 | 接口 | 已发布 | 提供用户创建待办事项到待办列表 |\n| 统一待办 | 待办信息管理接口 | 关闭单据 | 接口 | 已发布 | 用户处理完待办事项（该待办事项置为已办事项，待阅置为已阅），通过请求参数传递关闭单据状态值 |\n| 统一待办 | 待办信息管理接口 | 收藏单据 | 接口 | 已发布 | 提供用户对特定单据进行收藏；根据taskId更新收藏状态 |\n| 统一待办 | 待办信息管理接口 | 废弃单据 | 接口 | 已发布 | 支持通过业务系统撤回待办事项 |\n| 统一待办 | 待办信息管理接口 | 单据已读 | 接口 | 已发布 | 用户已查看单据，原待办事项的阅读状态置为已读 |\n| 统一待办 | 查询指定用户的待办信息 | 无 | 页面 | 已发布 | 用户需查看某单个用户的所有单据（待办、待阅、已办、已阅）的数量；根据用户id、来源系统（特定应用或全部应用）获取单据数量 |\n| 统一待办 | 待办提醒 | 无 | 页面 | 已发布 | 用户催单或者单据超时未处理，需要再次提醒待办处理人时，业务系统调用单据提醒接口，给待办人下发单据通知消息 |\n| 政务开放平台 | 小程序开发框架 | 无 | 页面 | 已发布 | 为政务服务开发者提供政务服务小程序开发框架、UI组件库、脚手架工具、设计资源及相关教程 |\n| 政务开放平台 | WEB站点开发框架 | 无 | 页面 | 已发布 | 为政务服务开发者提供政务服务web站点UI组件库、前端编译工具及相关教程 |\n| 政务开放平台 | H5开发框架 | 无 | 页面 | 已发布 | 为各委办局业务系统开发商提供政务服务H5 UI组件库 |\n| 政务开放平台 | CDN静态资源管理 | 无 | 接口 | 已发布 | 为开发提供图片、json文件、csv表格等CDN静态资源提供管理与访问功能 |\n| 政务开放平台 | 动态配置管理 | 无 | 接口 | 已发布 | 提供小程序使用的配置文件、静态资源等资源 |\n| 政务运营平台 | 内置运营数据查看与分析 | 无 | 页面 | 已发布 | 提供强大数据处理分析能力，包括通用用户行为分析、专项分析、自定义报表分析和应用管理等基础能力，为产品数据运营提供支持。 |\n| 政务运营平台 | 运营报表自定义分析 | 无 | 页面 | 已发布 | 支持企业将自身的线下数据及业务数据可视化，通过数十种自定义的报表类型、多种筛选条件、维度、样式的设计，帮助企业根据自身业务特性构建数据分析报表，同时可以结合应用数据深度分析。 |\n| 政务运营平台 | 运营数据上报服务 | 无 | 接口 | 已发布 | 将埋点数通过上报接口上报至运营平台的运营数据管理中进行数据处理 |\n| 智能网关 | 反向代理服务 | 无 | 页面 | 已发布 | 提供站点全过程管理，支持由站点提供方发起站点创建，填写相关的站点配置信息，完成站点创建。 |\n| 智能网关 | 负载均衡服务 | 无 | 页面 | 已发布 | 为服务提供随机负载和会话保持的负载均衡方式 |\n| 智能网关 | 接口注册与订阅 | 无 | 页面 | 已发布 | 提供接口注册与订阅的全过程管理能力，支持由服务提供方发起服务创建，填写相关的服务配置信息，完成服务创建。 对于指定服务的订阅申请，建立审批机制，将由该服务的系统管理员进行审批，审批通过之后相应的应用即有权限调用该服务。 |\n| 表单引擎 | 可视化表单开发 | 无 | 页面 | 已发布 | 提供可视化的表单设计及开发能力，提供丰富的表单工具箱，以及可视化画板，便于开发快速完成表单的设计和代码生成，支持所见即所得预览。 |\n| 表单引擎 | 表单版本管理 | 无 | 页面 | 已发布 | 将发布的表单进行管理，主要包括版本的控制、表单的删除等，提供表单的创建，查看，编辑，复制，发布和删除功能。 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章注册接口服务 | 接口 | 已发布 | 电子印章制作单位制作的电子印章，需要在长沙市互联网+政务服务统一电子印章认证管理平台内进行应用，需要将电子印章在平台内进行注册 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章获取接口服务 | 接口 | 已发布 | 根据电子印章的签名证书信息获取电子印章数据 根据电子印章唯一赋码获取电子印章数据 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章状态查询接口服务 | 接口 | 已发布 | 电子印章状态查询 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 组织机构注册接口服务 | 接口 | 已发布 | 将组织机构注册到长沙市互联网+政务服务统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 用户注册接口服务 | 接口 | 已发布 | 将用户注册到长沙市互联网+政务服务统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 签章日志记录接口服务 | 接口 | 已发布 | 签章产品在做签章时将日志记录到统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 获取时间戳接口服务 | 接口 | 已发布 | 签章时获取时间戳信息 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 签章验证接口服务 | 接口 | 已发布 | 验证印章结构体数据和签章结构体数据 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF控件签章接口服务 | 接口 | 已发布 | 提供的对PDF格式的文件进行电子签章的功能，它包含了两部分：PDF格式文件签章和PDF格式文件签章验证。 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF单线程摘要计算接口服务 | 接口 | 已发布 | 提供PDF文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF单线程签名合并接口服务 | 接口 | 已发布 | 提供PDF文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF多线程摘要计算接口服务 | 接口 | 已发布 | 提供PDF文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF多线程签名合并接口服务 | 接口 | 已发布 | 提供PDF文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF会签接口服务 | 接口 | 已发布 | 提供PDF文件会签模式签章服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF撤销印章接口服务 | 接口 | 已发布 | 提供PDF文件撤销指定印章的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 文件上传接口服务 | 接口 | 已发布 | 提供PDF文件上传到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 文件下载接口服务 | 接口 | 已发布 | 提供PDF文件下载到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 签章文件验证接口服务 | 接口 | 已发布 | 查看当前印章的相关信息，例如：验章结果，印章标识、厂商标识、印章类型、签章人姓名、印章名称、签章时间、证书信息、制章人、制章日期、签名方法、软件版本号等。 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD控件签章接口服务 | 接口 | 已发布 | 对OFD文档加盖电子印章后，对文档摘要进行数字签名处理。通过阅读器上的电子签章对OFD文件进行签章，用户可以手动拖动印章到指定位置实现公章/个人签名。 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD单线程摘要计算接口服务 | 接口 | 已发布 | 提供OFD文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD单线程签名合并接口服务 | 接口 | 已发布 | 提供OFD文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD多线程摘要计算接口服务 | 接口 | 已发布 | 提供OFD文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD多线程签名合并接口服务 | 接口 | 已发布 | 提供OFD文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD会签接口服务 | 接口 | 已发布 | 提供OFD文件会签模式签章服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD撤销印章接口服务 | 接口 | 已发布 | 提供OFD文件撤销指定印章的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 文件上传接口服务 | 接口 | 已发布 | 提供OFD文件上传到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 文件下载接口服务 | 接口 | 已发布 | 提供OFD文件下载到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 签章文件验证接口服务 | 接口 | 已发布 | 查看当前印章的相关信息，例如：验章结果，印章标识、厂商标识、印章类型、签章人姓名、印章名称、签章时间、证书信息、制章人、制章日期、签名方法、软件版本号等。 |\n| 统一电子印章认证管理平台 | 文件批注 | PDF控件文档批注接口服务 | 接口 | 已发布 | PDF批注通过iWebPDFEditor在线控件打开PDF文档，通过接口或按钮在文档指定位置加入批注的功能，批注可以分为常规的附注、高亮、删除线、下划线等，还支持直线、椭圆、矩形、多边形、云线等非常规注释。 |\n| 统一电子印章认证管理平台 | 文件批注 | OFD控件文档批注接口服务 | 接口 | 已发布 | OFD批注通过iWebOFDEditor在线控件打开PDF文档，通过接口或按钮在文档指定位置加入批注的功能，批注可以分为常规的附注、高亮、删除线、下划线等，还支持直线、椭圆、矩形、多边形、云线等非常规注释。 |\n| 统一电子印章认证管理平台 | 文件差异对比 | PDF控件文档对比接口服务 | 接口 | 已发布 | 图纸修改人员进行相关图纸后，审图人员通过PDF文件对比技术则是通过将前后两个文件在同一软件窗口中进行不通点展示。清晰明了的展示出两文件的不同之处 |\n| 统一电子印章认证管理平台 | 文件差异对比 | CAD控件对比功能 | 工具 | 已发布 | 图纸修改人员进行相关图纸后，校审人员往往需要对修改部分进行审查，CAD文件对比技术则是通过将前后两个文件在同一软件窗口中进行不通点展示。清晰明了的展示出两文件的不同之处。 |\n| 统一电子印章认证管理平台 | CAD签章 | CAD控件签章功能 | 工具 | 已发布 | 采用电子签名技术，结合数字证书技术、网络加密技术而设计的数据安全产品，采用插件技术与AUTOCAD产品无缝连接，用户在正常编辑文档的方式下就可以在AUTOCAD图档（DWG格式）内部实现电子签名 |\n| 统一电子印章认证管理平台 | CAD签章 | CAD控件批量签章功能 | 工具 | 已发布 | CAD一键签章技术则是解决设计院的设计人员在CAD图纸中实现多图框批量自动签章 |\n| 统一电子印章认证管理平台 | CAD文件转换 | CAD转换功能（PDF/OFD） | 工具 | 已发布 | 设计图纸电子版成果基本都是基于AutoCAD平台生产的DWG格式。用于外部交互、做为法律凭证、长期保管的文档格式可以使用PDF/OFD。支持将单个多层DWG批量转换成多个PDF/OFD文件 |\n| 统一支付 | 生成订单 | 无 | 接口 | 已发布 | 按业务数据生成订单信息，支持非税和有税支付，非税支付需提供缴费事项和子事项明细，生成订单后返回订单编号 |\n| 统一支付 | 发起支付 | 无 | 接口 | 已发布 | 通过订单编号，和请求应用的类型，返回支付页面或支付参数，调起用户支付 |\n| 统一支付 | 订单查询 | 无 | 接口 | 已发布 | 通过订单编号，查询订单当前状态，用于确认缴费状态和缴费金额 |\n| 统一支付 | 订单退款 | 无 | 接口 | 已发布 | 前端业务判断是否可以退款，若允许退款，请求此接口可发起退款，非税缴费不能发起退款 |\n| 统一支付 | 支付订单通知 | 无 | 接口 | 已发布 | 订单支付成功后，异步通知前端业务系统进行后续业务处理，若通知失败，将在4小时内就行8次重试通知 |\n| 统一支付 | 退款订单通知 | 无 | 接口 | 已发布 | 发起退款后，异步通知前端业务系统退款退款状态，若通知失败，将在4小时内就行8次重试通知 |\n| 统一支付 | 下载对账单 | 无 | 接口 | 已发布 | 每天凌晨与支付通道完成对账后，前端业务系统可以访问此接口，获取前一天业务系统的交易对账单 |\n\n#### 中枢能力调用实施\n长沙市机关事务管理局智慧后勤服务管理平台主要调用“长沙市城市大脑”应用中台发布的相关能力。“长沙市城市大脑”应用中台作为基础性的⽀撑平台，主要定位为各类信息化应⽤提供功能完整、性能优良、可靠性⾼的业务、技术公共组件，满⾜应⽤系统建设中的共性⽀撑需求。应⽤中台建设主要内容包括应⽤服务平台、应⽤运营平台、业务⽀撑平台、技术⽀撑平台、应⽤接⼊平台以及中台与外部系统的对接。\n- 在相关建设实施过程中，在设计阶段，即根据长沙市中枢能力清单明确智慧后勤服务管理平台需要调用的共性业务或服务组件，形成《项目中枢共性能力调用申请》。\n- 根据设计情况，通过共性能力服务调用申请流程进行申请，包括测试环境的申请、应用环境能力的申请；并通过沟通，明确相关业务或服务组件的具体调用方式。\n- 在项目软件系统开发过程中完成调用调试和测试；\n- 完成软件系统上线部署的调试与测试。\n### 系统嵌入实施\n根据《长沙市信息化建设项目管理办法》的相关要求，长沙市机关事务管理局智慧机关后勤管理平台不在另行开发移动端应用平台，长沙市机关事务管理局智慧机关后勤管理平台相关应用嵌入到“我的长沙”以及“长政通”中。\n系统嵌入集成融合分为两个部分，一个部分为微信小程序的嵌入集成融合，另一部分为移动应用APP的嵌入集成融合。\n#### 嵌入“我的长沙”微信小程序\n微信小程序架构如下：\n\n图 微信小程序架构\n在项目实施过程中，在项目系统设计完成后，我方将按照微信小程序的正常开发流程进行开发、测试，测试完成后，申请“我的长沙”测试环境进行嵌入测试。完成测试后按照“我的长沙”微信小程序上线申请流程完成“智慧后勤”部分的上线流程申请。项目整体测试完成后，智慧后勤管理系统正式上线后，完成“智慧后勤”微信小程序板块的上线。\n微信小程序是面向社会开放，在权限以及用户方面不需要做过多的设置。\n#### 嵌入“长政通”APP\n##### 概述\n长政通是长沙市统一建设的协同办公平台移动端应用，当前注册用户已经突破10万，长政通APP推动全市移动办公更便捷、高效，同时也进一步提升了长沙市各级政府部门行政效率。\n“长政通”是长沙市数据资源管理局为全市公职人员量身打造的集协同办公、即时通讯、视频会议等功能为一体的移动办公平台，以“打造全市移动政务办公的总枢纽和移动客户端的唯一入口”为基本定位，由腾讯云提供技术支持。\n自2022年1月起，“长政通”已在全市政务单位全面推广，目前注册用户已超10万人，覆盖全市党委、人大、政府、政协等171家市级单位，16家园区管委会，9个区县（市）政府，并延伸至172个街道和1667个社区，接入移动政务应用20多个，充分满足了政府和事业单位内部办公、办事、办会等大量协同业务需求。\n\n图 长政通APP界面效果图\n本次长沙市机关事务管理局智慧后勤管理平台移动端应用将作为长征通“常用应用”中的一个子应用，同时，相关待办工作、通讯录、个人信息、消息机制等均用长政通现有的服务提供，智慧后勤管理平台提供数据支撑。\n##### 应用风格\n长沙市机关事务管理局智慧后勤管理平台移动端应用在UI风格上采用与长征通一致的风格，尽量确保“长政通”风格的一致性。\n##### 认证机制\n在用户信息管理方面，“智慧后勤”移动端应用不在规划独立的认证机制，统一沿用长政通的用户管理和认证机制，即与长政通统一用户、统一认证、统一授权、统一审计。\n用户方面，“智慧后勤”与长政通面向相同的用户群体，在用户管理上使用长政通现有的用户管理机制即可，不再另行建设用户库。\n身份认证方面，“智慧后勤”仍沿用长政通的身份认证机制，同时在应用授权、用户访问审计方面均采用长政通现有的认证、授权和审计机制。\n##### 共性能力\n除认证机制外，例如：消息机制、待办工作、工作台等界面，均通过“智慧后勤”服务平台提供相应的数据接口，由“长政通”进行统一调用。\n##### 业务数据\n“智慧后勤”移动端应用相关的业务数据存储在智慧后勤管理平台部署在政务云上的数据库中，该部分并不与长征通共用，当长征通对相关数据有需要时，根据具体需求，由“智慧后勤”平台提供相应的接口。\n##### 嵌入实施\n项目在设计阶段开始就必须考虑移动端应用需要嵌入“长政通”，在项目设计前，需要对“长政通”APP进行了解，并与开发厂商进行技术沟通，统一风格、明确具体的嵌入方式、确定相关的数据接口和接口提供方、接口规范和标准等。\n同时，双方必须约定好开发过程的联调方式、上线申请流程、上线发布流程等具体事物，确保整个移动端应用实施的顺利性。\n### 系统对接实施\n#### 对接系统清单\n长沙市机关事务管理局智慧后勤服务管理平台项目需要完成与多个已建系统的对接：\n需要对接的系统有：\n- 市物联网平台；\n- 人脸门禁系统；\n- 停车道闸系统；\n- 视频监控系统；\n- 长沙银行一卡通系统；\n- 办公用房系统；\n- 公务用车系统；\n- 智慧消防主机系统；\n- 巡更系统；\n- 垃圾分类称重系统；\n- 人防工程停车道闸系统；\n- 交警六合一平台；\n- “我的长沙”城市移动综合服务平台；\n- “长政通”app；\n- 长沙市超脑服务平台。\n与外部系统的关系主要体现在以下几方面：\n- 与市物联网平台的对接，实现传感器采集数据的共享；\n- 城市超脑对接，通过与长沙市数据大脑三中台的对接，实现重要支撑服务和数据的调用；\n- “长政通”app对接，实现本次建设的移动端功能与“长政通”app功能对接，提供后勤服务功能；\n- “我的长沙”城市移动综合服务平台对接，提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能；\n- 已有系统对接，通过对接已有信息化系统，获取相关数据，供本平台分析应用。\n#### 网络集成改造\n项目系统集成实施主要是指长沙市机关事务管理局智慧后勤服务管理平台与机关事务局管理的已建系统之间的打通与对接。通过系统的对接，实现系统之间数据的交互，通过对此类系统数据的采集和获取，为项目系统数据分析提供基础数据。\n在需要对接的系统中，人脸门禁系统、停车道闸系统、视频监控系统等目前均为独立的局域网，在对接前，需要将各个系统网络改造，将其接入整体网络。\n\n图 改造前道闸系统网络示意图\n目前对接系统中需要进行网络改造的系统包括：\n- 人脸门禁系统\n- 停车道闸系统\n- 视频监控系统；\n- 智慧消防主机系统对接。\n为了保证相关系统的对接，以停车道闸系统为例，售前需要解决网络物理隔离的问题。完成网络集成改造，主要包括以下相关的工作：\n- 在项目实施阶段前期，完成对各个需要进行网络改造系统的现场勘测调研，确认具体的网络链接情况、设备部署情况、所在环境的网络接入情况；\n- 申请各系统的网络接入；\n- 为接入网络的相关设备申请必须的IP地址，明确接入上连设备、端口以及通信策略开放要求；\n- 完成网络接入的综合布线；\n- 协调时间，完成相关系统的网络接入测试，确保相关测试工作不对相关系统的使用人群造成影响；\n- 完成网络改造接入。\n\n图 改造后停车道闸网络示意图\n#### 接口对接\n##### 概述\n长沙市机关事务管理局智慧后勤管理平台与其他已建系统的对接的基本需求是通过达到与各个系统的对接，完成系统之间的数据采集、数据交互，为项目数据分析和IOC数据展示提供数据支撑。\n对接系统网络改造完成后，即可进行智慧后勤系统与其他各已建系统的接口对接工作。\n软件接口是实现一个系统跟另外系统进行信息交互的桥梁，在不同的系统之间，根据系统的关联程度的不同存在紧耦合和松耦合两种：紧耦合要求接口响应反应快，消息不能阻塞；松耦合对响应反应要求比较低。在目前应用中， Socket 、消息队列（Message Queue）、 WebService等都有相应的应用，但是应用中发现各通讯方式有自己固有的特征。\n在接口和系统信息交互的过程中，两种模式使用得很普遍：同步调用和异步调用，同步调用要求接口发出请求消息后必须等待服务端系统的应答消息，接口阻塞直至超时；异步调用则发出请求消息后，接口可以从事其它处理，定时轮询服务端应答消息和消息或事件通知。同步方式简单，但是很容易造成接口阻塞，造成消息积压超时。\n接口设计总体上遵循高内聚、低耦合、精分解的设计原则，尽量减少各系统 间、系统内各模块间的耦合度、降低操作复杂度、保证实现的通用性、提高系统的 重用性和扩展性，具体原则如下：\n##### 接口定义\n接口是指用于完成各系统间和系统内部数据传递的接口。在系统中通常设计成 一个数据库文件或接口转换模块，传出数据的系统通常对数据事先进行必要的加工处理，需要接收数据的系统按照用户的要求（用户事先定义的数据模式），通过接口完成数据传递的任务。\n##### 数据模式\n接口的核心是数据模式，所谓数据模式是指应用系统对要传递的数据应在 数据 的来源、内容、定义、分类、汇总、数据格式、数据去向等方面的处理上做出相应的 规定。一般情况下，数据模式是在软件初始化阶段由用户设定的，投入应用时大量的数据采集完全自动化。同时根据系统的实际需要，用户也可以对数据模式进行修改和维护，甚至重新定义。\n##### 传递数据的形式\n对于传递数据的形式，根据本项目对接软件系统的差异可采用不同的策略：一种是由接收数据的系统釆取主动，按照数据接口定义到对方系统去识别、采集。一种是由要传出数据的系统先对数据进行加工，然后按照数据接口定义将数据传递过去。如果是系统内接口，一般采用的是第一种，系统内外系统间的数据传递一般是第二种。\n##### 接口对接流程\n\n图 系统集成融合实施流程图\n##### 对接流程说明\n长沙市事关事务管理局智慧后勤管理平台项目在集成融合方面需要结合项目硬件系统安装实施以及软件系统的开发进行综合考虑。项目集成融合流程如下：\n- 各对接系统的信息收集；\n- 协调项目相关干系人，完成与对接系统各监管单位、用户以及承建单位的初步对接；\n- 完成需要对接系统的现场勘测调研工作；\n- 完成对接系统的对接需求调研；\n- 在设计规划阶段，完成各个系统的对接设计，明确与各个厂商的对接方式，预计项目对接需求，编写项目系统接口设计文档，同时对接系统各方就对接方案达成共识；\n- 根据接口设计方案完成项目系统接口对接；\n- 完成各个系统接口对接的调试；\n- 完成系统的整体测试，确保各集成融合情况；\n- 系统上线。\n### 视频融合实施\n长沙市事关事务管理局智慧后勤管理平台项目包括AI视频智能监控、智慧交通两个部分的视频监控系统建设内容。根据项目建设要求，相关监控视频需要集成融合接入长沙市事关事务管理局统一视频监控平台（安防系统）中。\n#### AI视频智能监控\n本次AI视频监控主要包括高空全景感知单元、动火离人专用感知单元等智能摄像机，以及智能警戒摄像机、客流统计智能单元及交换机、显示器和解码器等设备。\n本系统包括28个摄像头的安装和实施，各摄像头统一接入AI分析器，通过AI分析器以及其相关的算法为各摄像头赋能。帮助监管方减少监管工作量、提高监管效率，实现全天候全时间段无死角监管。\n\n图 AI智能监控系统示意图\n#### 智慧交通\n智慧交通系统是通过视频技术的应用，对市政府大院内道路车辆行驶和停泊状态进行全面感知和监控，为机关大院周边及内部道路车辆管理提供准确实时的数据支撑。可以有效降低人工管理成本和提高管理效率。\n根据项目建设要求，智能交通系统需要支持与交警六合一平台对接，将本次建的感知前端和数据共享给交警部门，为交警部门对该区域的交通管理提供有效的数据支持。同时，本次建设的相关摄像头要求可全部接入机关事务管理局正在筹建的安防系统中。\n\n图 智能监控系统示意图\n#### 视频数据融合示意图\n\n图 视频数据融合网络示意图\n\n#### 视频数据融合\n视频监控系统均遵循公安部发布的国家标准《安全防范视频监控联网系统信息传输、交换、控制技术要求》GBT28181-2016，该标准解决了视频监控系统图像信息的联网整合、资源共享问题，为视频监控图像信息的联网共享奠定了技术基础，有效推动视频监控图像信息跨区域、跨部门的综合应用，因此在原各视频监控系统遵循GBT28181-2016的基础上，进行集成管控技术上没有问题；其他停车闸系统、一卡通系统等可以通过插件、标准API、SDK等不同形式应用接口进行系统对接，同时在本系统中进行数据清洗、数据交换、数据编目、数据分析、业务信息融合等数据服务，进行系统集成管控。\n关于视频数据的融合包括两种方式：一种方式是通过平台与平台的对接完成视频数据在安防系统的融合，另一种方式是将本项目建设的摄像头直接接入安防系统平台。\n在本次项目建设内容中，AI视频智能监控系统与智能交通系统均有独立建设的视频接入平台，通过两个平台接口的开放，实现与安防系统的对接。其二，我方将根据安防系统项目设备接入要求提供摄像头点位信息、IP地址信息、摄像头名称、摄像头型号等信息。安防系统通过其视频接入平台完成摄像头的接入。\n实施过程中可根据安防系统具体的建设情况明确接入方式，实现视频数据的融合集成。\n# \n# 项目测试方案\n## 项目概述\n长沙市机关事务管理局智慧后勤服务管理平台项目建设内容包括项目基础设施建设、智慧后勤服务管理平台建设、内外部系统对接与集成三个主要方面。\n项目基础设施建设方面，长沙市机关事务管理局智慧后勤服务管理平台项目基础设施建设内容包括：基础网络系统建设、智慧安全用电系统建设、智慧物联网络建设、AI视频监控系统建设、智能交通系统建设。通过基础设施建设，一方面对现有的硬件系统提供可接入网络，另一方面也为项目提供信息和数据采集的终端，并同时通过AI视频监控系统与智能交通系统的建设为后勤管理提供更智能和直观的管理手段。\n智慧后勤服务管理平台的建设主要包括智慧后勤基础平台、智慧后勤应用平台、智慧后勤“一张图”、智慧后勤移动端应用相关内容的建设。\n智慧后勤基础平台是为项目应用部署提供基础运行环境，包括：操作系统的建设、数据库系统、中间件服务和应用基础服务或组件等。基础平台提供集约化、融合多种应用支撑服务，为整个项目提供数据初始化、统一入口、工作台、通用审批管理、物联网管理、数据资源建设、安全服务支撑等基础的服务。\n智慧后勤应用平台是为机关事务管理局各业务管理部门，提供业务后台管理的综合平台。从为机关事务局内部提供考勤管理、公文管理、用印管理、文印管理等应用，到对外的集体户口申办、应诉管理、接待管理、会务管理以及办公用房建设计划的审核、汇总和报批等功能，智慧后勤应用平台将提升机关事务局对外的服务体验及管理水平，实现业务的增效和智能化。\n智慧后勤 “一张图”，实现“所有资源一张图管理、所有设备一张图控制、所有事件一张图显示”，对数据进行直观、高效的可视化呈现，让机关大院的业务和数据变得可知可感，让决策有据可依。并帮助管理者实时了解机关大院整体的资产运行状况、车辆情况、安防情况、能效情况、服务情况等，推动机关后勤服务的管理精细化和服务专业化。\n智慧后勤移动端应用是为满足机关事务管理局在移动端的应用场景而单独开发的，它基于现有“长政通”APP和“我的长沙”城市移动综合服务平台开发，将开发完的移动应用嵌入到“长政通”App和我的长沙。其中嵌入到“长政通”APP的功能是提供给所有市直机关职工和干部的统一服务平台，实现机关后勤服务从被动到主动服务的转变，实现餐饮、物业、会务、通知公告、办公、生活等一站式服务的工具和入口，实现个人信息等基础功能、后勤主页、设施设备管理、培训管理、电子巡更、报事报修、通知公告、房屋维修项目管理等应用。\n嵌入“我的长沙”城市移动综合服务平台功能主要是提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能，提升市机关事务局的社会服务性。\n内外部系统对接集成的建设内容包括将长沙市机关事务管理局目前已经建成的多个信息系统组网打通，实现信息的互联互通和数据共享。\n现有需要对接的系统有：智慧后勤服务管理平台与长沙市超脑服务平台、市物联网平台、人脸门禁系统、停车道闸系统、视频监控系统、长沙银行一卡通系统、办公用房系统、公务用车系统、智慧消防主机系统、巡更系统、垃圾分类称重系统、人防工程停车道闸系统、“我的长沙”城市移动综合服务平台、“长政通”app对接，以及智能交通系统与交警六合一平台对接。\n## 测试范围\n长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容。包括新建的基础网络环境、物联网络、智慧用电终端、物联终端、智能交通系统、AI智慧视频监控系统、智慧后勤管理平台以及其移动端应用。\n## 测试目标\n项目测试的主要目标主要包括以下几个方面：\n网络系统方面，确保本期建设的所有终端以及在人防工程机房所部署的设备能正常、安全的接入长沙市机关事务管理局现有网络，系统相关的各类业务端口开放正常，设备链接通信正常；\n软件系统功能、移动应用端功能完全满足和符合项目招标文件以及客户实际需求，软件系统的性能、应用安全、稳定性都满足项目建设和使用要求；\n智慧后勤管理平台与其对接的各个系统的对接工作已经完成，且相关的数据传输流畅，数据获取完整、正确，性能满足相应的使用和数据采集要求；\n长沙市机关事务管理局智慧后勤服务管理平台功能、性能等方面均可满足项目招标文件和建设单位实际需求。\n## 术语定义\n性能测试（performance testing）：运行这些测试通常要确定程序运行有多快，以便确定是否需要优化。\n负载测试(load testing)：通过在面临很多资源要求的系统上运行，攻击被测程序或系统。\n可靠性测试(reliability testing)：持续进行的性能测试，目标是发现短序列程序测试遗漏的情况。\n## 项目测试环境\n因为本项目的部署涉及到政务云、人防工程机房、电子政务外网以及与其他系统的对接测试，完全搭建测试环境的成本较高且不现实，项目测试除在政务云申请测试环境资源外，对接系统尽量协调相应的测试环境。智慧用电终端、物联网终端以及摄像头终端其均以项目实际系统进行测试。\n### 网络系统\n本期项目网络系统的建设是在原有网络系统的基础上进行网络延伸，网络系统的测试不会对项目建设环境中的现有网络造成影响。\n\n图 项目测试环境网络架构图\n### 主机系统\n本期智慧后勤管理系统部署在政务云外部数据区，在项目开发过程中，可在政务云申请相应的服务器资源作为测试环境。\n## 测试手段\n在项目测试工作开始前，项目测试组制定《测试计划》，本项目基本采用黑盒测试的方式进行软件系统测试，测试过程同时填写《测试记录表》。\n## 测试数据\n项目系统测试的主要依据是《项目需求分析说明书》，测试用例以及项目测试数据均以《项目需求分析说明为基础》、参考《项目概要设计说明书》、《项目详细设计说明书》来制定。\n## 测试策略\n长沙市机关事务管理局智慧后勤服务管理平台项目的测试过程分三个步骤进行，即单元测试、集成测试、整体测试。\n### 单元测试\n在软件系统启动开发时，我方即为项目开发人员配备项目测试组，主要通过测试管理工具进行测试管理。该测试过程，测试组人员伴随项目开发组进行项目单元测试。\n首先按照系统、子系统和模块进行划分，但最终的单元必须是功能模块，或面向对象过程中的若干个类。单元测试是对功能模块进行正确检验的测试工作，也是后续测试的基础。目的是在于发现各模块内部可能存在的各种差错，因此需要从程序的内部结构出发设计测试用例，着重考虑以下五个方面：\n1）模块接口：对所测模块的数据流进行测试。\n2）局部数据结构：检查不正确或不一致的数据类型说明、使用尚未附值或尚未初始化的变量、错误的初始值或缺省值。\n3）路径：虽然不可能做到穷举测试，但要设计测试用例查找由于不正确的计算（包括算法错、表达式符号表示不正确、运算精度不够等）、不正确的比较或不正常的控制流（包括不同数据类型量的相互比较、不适当地修改了循环变量、错误的或不可能的循环终止条件等）而导致的错误。\n4）错误处理：检查模块有没有对预见错误的条件设计比较完善的错误处理功能，保证其逻辑上的正确性。\n5）边界：注意设计数据流、控制流中刚好等于、大于或小于确定的比较值的用例。\n### 集成测试\n软件系统开发完成，即可以开始进行项目系统集成，包括与城市大脑、“长政通”、“我的长沙”、交警六合一平台等十多个系统，每一个系统对接开发完成，即需要进行联调，联调完成后，测试应该开始就系统集成情况进行系统集成测试，系统集成测试主要为了保证智慧后勤管理平台与其他系统的对接。\n集成测试也叫组装测试或联合测试。通常，在单元测试的基础上需要将所有的模块按照设计要求组装成系统，这时需要考虑的问题：\n- 在把各个模块连接起来的时候，穿越模块接口的数据是否会丢失。\n- 一个模块的功能是否会对另一个模块的功能产生不利的影响。\n- 各个子功能组合起来，能否达到预期要求的父功能。\n- 各个系统组合起来进行测试，测试各系统的联动和数据传输效果是否达到了项目建设要求。\n- 全局数据结构是否有问题。\n- 单元模块的误差累积起来，是否会放大，从而达到不能接受的程度。\n- 我们在组装时可参考采用一次性组装方式或增殖方式组装方式。\n### 整体测试\n项目整体上线前，为了确保系统在上线后的正常运行，需要对系统进行整体测试，测试以项目建设目标为基础，通过整体测试来确认系统是否按项目建设要求达到了系统的建设目标。\n系统测试目的是在于验证软件的功能和性能及其他特性是否与用户的要求一致，主要是下列类型的测试：\n1）用户界面测试：测试用户界面是否具有导航性、美观性、行业或公司的规范性、是否满足设计中要求的执行功能。\n2）性能测试：测试相应时间、事务处理效率和其他时间敏感的问题。\n3）强度测试：测试资源（内存、硬盘）敏感的问题。\n4）容量测试：测试大量数据对系统的影响。\n5）容错测试：测试软件系统克服软件、硬件故障的能力。\n6）安全性测试：测试软件系统对非法侵入的防范能力。\n7）配置测试：测试在不同网络、服务器、工作站的不同软硬件配置条件下，软件系统的质量。\n8）安装测试：确保软件系统在所有可能情况下的安装效果和一旦安装之后必须保证正确运行的质量。\n## 测试流程\n### 概述\n测试准备阶段是测试人员进行需求说明书分析、制定测试计划、设立测试配置库等活动，能有效的定义测试过程，制定出合理的测试策略和测试的进度安排，明确细化责任和分工，便于交流软件测试小组的意图，为执行测试阶段做准备，以保证整个项目的测试工作能顺利进行。\n相关人员职责见下表：\n| 序号 | 阶段任务 | 参与人员 |\n| :---: | :---: | :---: |\n| 1 | 提供需求说明书; 提供项目计划; 参与测试计划评审; | PM/项目组长 |\n| 2 | 需求说明书分析; 制定测试计划; 测试计划更新; 整理需求说明书检查点; | 测试组长/测试人员 |\n### 需求说明书分析\n    - 提供需求说明书：PM/项目组长向测试组长提供需求说明书。采用开发组向测试组开放配置库共享的方式。\n    - 需求说明书分析：测试组长/测试人员从配置库中得到需求说明书，在需求说明书分析理解过程中，如有不明确或无法理解之处，需提出疑问并整理成文档，并以会议（通过与PM/项目组长沟通确定时间）的方式请求PM/项目组长或者开发小组成员给予解答。\n    - 提供需求说明书检查点：PM/项目组长以邮件方式向测试组长提供需求说明书检查点，并抄送项目总监，测试组长将需求说明书检查点提交到测试区域的需求说明书检查点区并通知测试人员获取需求说明书检查点。\n    - 需求说明书检查点更新：在项目开发过程中，如需更新需求说明书检查点，PM/项目组长及时以邮件方式告知测试组长需求说明书检查点更新部分。\n### 制定测试计划\n    - 提交项目计划：PM/项目组长向测试组长提供项目计划。可采用开发组向测试组开放配置库共享的方式。\n    - 制定项目测试计划：测试组长从配置库中获取项目计划，根据项目计划制定测试计划。测试计划使用Microsoft Office Project 制定，详细拆分各阶段的任务以及任务的开始时间和完成时间以及指定测试人员。\n    - 评审、修改测试计划：PM/项目组长和测试组成员参与测试计划评审，并提出评审意见。测试组长根据项目组评审意见修改测试计划。测试计划存放于测试区域的测试计划区。\n    - 测试计划变更：在开发过程中，如遇到项目计划变更的情况，PM/项目组长应及时以邮件的方式告知测试组长，测试组长及时变更测试计划。\n### 设立测试配置库\n    - 确定配置管理工具：本公司常用配置库管理工具有VSS，SVN，ClearCase等，PM/\n    - 项目组长根据项目实际情况确定该项目所使用的配置管理工具。\n    - 在配置库中建立测试区域：测试组长在PM/项目组长确定的项目配置库中建立测试区域；测试区域包括测试计划、测试检查点、测试版本发布、BUG提交、测试报告等区域，分别用于存放相关测试文档。\n    - 测试组长设置测试区域权限：开发人员（读取权限）；PM/项目组长/测试组长/测试人员：(读写权限)。\n    - 测试人员向配置库提交测试文档：测试人员将所有的测试文档分门别类的提交到各自所属测试区域内。测试人员向配置库提交测试文档时，必须注明本次提交的内容，以便查询。\n| 文件路径 | 文件路径 | 存放内容 | 负责人 |\n| :---: | :---: | :---: | :---: |\n| 测试区域 | /测试计划区 | 《项目测试计划》 | 测试组长 |\n| 测试区域 | /需求规格说明书 | 《需求规格说明书》 | 测试组长 |\n| 测试区域 | /测试版本发布 | 《数据库文件》 《代码》 | 测试组长 |\n| 测试区域 | /BUG提交 | 《BUG记录表》 | 测试组长 |\n| 测试区域 | /测试报告 | 《项目测试报告》 | 测试组长 |\n### 测试环境搭建\n- 明确项目测试环境：PM/项目组长根据项目需求和项目实际情况确定该项目测试所需的必要环境。\n- 搭建项目测试环境：测试组长/测试人员根据PM/项目组长确定的测试环境搭建项目测试环境，包括测试服务器环境和测试机环境。\n### 测试执行\n该阶段为测试执行阶段，主要是测试人员对软件进行测试和验证的阶段，以测试准备阶段的工作成品为入口，开发人员测试人员按照各自的职责分工合作以达到该阶段的结束目标。\n#### 测试周计划管理\n配置库：测试计划区（所有活动在以下区域进行）\n#### 测试周计划内容\n    - 制定测试周计划：测试组长以本周二至下周一为单位制定测试周计划，确定本周应测试式样书，拆分测试任务。测试周计划存放于测试区域的测试计划区。\n    - 维护测试周计划：测试组长根据项目变更维护测试周计划。测试组长修改本周应测试式样书，维护式样书版本，重新拆分测试任务\n    - 查看测试周计划：测试人员从测试区域的测试计划中得到测试周计划，明确自己在本周的测试任务，如有不明确或无法理解之处，需提出疑问\n    - 测试周计划跟踪：测试组长在每天下班前确定本周当天测试任务完成情况（当天应测试式样书，当天未完成测试式样书，当天已完成测试式样书，是否需要加班），以便于评估本周测试任务是否能够按计划完成。\n#### 测试版本提交内容\n提交项目安装手册：PM/项目组长将安装测试手册提交至测试版本发布区。安装手册包括简述硬件软件环境（服务器端，客户端），项目工程发布步骤提交测试版本：PM/项目组长每天下班前统一将项目工程备份文件提交至测试版本发布区。\n获取测试版本发布测试服务器：测试组长从测试区域中的测试版本发布区获取最新项目备份文件以及数据库文件，并发布到测试服务器供测试人员测试。\n#### 测试状态发布\n配置库：BUG提交区。\n提交BUG：测试人员根据式样书检查点对项目进行测试，根据测试结果修改式样书检查点状态栏。式样书检查点状态为：通过不通过并截图。测试完成后将已执行测试的需求规格说明书检查点文档提交到测试区域中的BUG提交区。并告知对应的开发人员修改BUG以及要求开发人员邮件回馈BUG的原因和修改完成时间。\n- 修改BUG：开发人员从BUG提交区获取已测试完成的项目用例，根据检查点状态修改BUG后，指明BUG出现的原因，修改BUG状态栏。BUG状态栏为1 Fixed 2 Deferred 3 Closed 4 Reopen 5 Revalidated 6 Rejected。并邮件告知测试组长该本样式书已修正。\n- 回归验证：测试人员从BUG提交区获取已修正状态的式样书检查点进行回归验证直到该BUG关闭，此时修改式样书检查点状态为通过。\n- 协调开发与测试的沟通交流：测试组长每天跟踪测试执行情况和开发人员BUG修复情况以便能进行有效的沟通。每周收集测试人员测试过程中间的意见以及问题整理归纳并与PM/项目组长确认\n#### 测试报告\n整理测试数据：测试人员于测试结束后将测试数据提交测试组长。测试数据包括：应完成测试case数量，已完成测试case测试量，未完成测试用例（需求功能点）数量，完成度，BUG数量。\n测试报告：测试组长根据测试组成员提交的测试数据形成报告提交到测试总结区，并告知PM/项目组长。\n测试报告的目的：\n1、及时反应项目测试情况；\n2、开发人员及时了解项目开发质量，调整开发计划；\n3、测试人员不断改进测试方法以及测试效率，提高测试质量。\n\n# 项目管理方案\n## 项目整合管理\n项目整合管理包括为识别、定义、组合、统一与协调项目管理过程组的各过程及项目管理活动而进行的各种过程和活动。在项目管理中，“整合”兼具统一、合并、连接和一体化的性质，对完成项目、成功管理干系人期望和满足项目要求，都至关重要。\n项目整合管理就是为满足各方需求而进行协调以达到预期目的的过程。它是一项综合性、全局性的工作，主要内容是在相互冲突的目标或可选择的目标中权衡得失。虽然所有的项目管理过程在某种程度上都可看成是一个整体，但在整合管理中的这些过程是最基本的管理知识。整合管理主要包括：制定项目计划、实施项目计划、项目变更控制这三个过程。这些过程彼此相互影响，同时与其它领域中的过程也互相影响。\n在本项目实施过程中，通过对项目各个阶段的边界进行管理，保证项目各个阶段的协调推进。在项目整合管理过程中，主要包括以下几个方面：\n- 制定项目计划：制定项目计划是指制定项目管理计划，即对项目实施过程中所有阶段以及过程进行初步的规划；\n- 项目执行：制定阶段的项目计划，并按照相应的计划完成项目各阶段的工作，推进项目往前进展；\n- 监控项目：项目组将按照项目计划，跟踪、审查和调整项目进展，以实现项目管理计划中确定的绩效目标；\n- 变更控制：在该项目中，我们将建立项目变更管理机制，通过规范的变更流程，对项目的实施过程中产生的变更进行控制，保证项目不会因为变更而失控；\n- 项目收尾：制定项目验收标准，使得项目有明确的验收目标，并最终能在项目工作全部完成后，形成验收的依据，最终完成整个项目。\n## 项目范围管理\n在项目实施的过程中，我们考虑到项目的主要成本需要投入到项目想要做的事情上，项目范围管理能保证项目在实施过程“做对的事”。\n项目范围管理是指对项目包括什么与不包括什么进行定义并控制的过程。这个过程用于确保项目组和项目干系人对做为项目结果的项目产品以及生产这些产品所用到的过程有一个共同的理解。\n在项目范围管理方面，项目前期我们通过编制项目范围说明书、用户需求说明书来实现初步的范围控制。在项目交付过程中，通过项目现场勘测、需求调研分析、需求评审以及系统深化设计以及评审来明确项目包括哪些事情。\n在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n- 项目实施过程中，严格按照用户需求进行项目方案的制定，以此方案进行项目实施；同时为了进行范围控制，建立规范的项目变更管理机制，通过对变更的控制，保证项目在正确的范围内进行。\n- 项目收尾阶段，我们通过项目范围核实来对项目进行范围的确认，项目范围核实的依据可能包括项目建设方所提供的项目招标要求、合同、需求说明书以及相关的变更说明等。\n## 项目进度管理\n进度是项目管理过程中最重要的因素之一，我方在项目进度管理上首先将以用户在项目整体规划时所确立的项目实施周期为标准，在此基础上结合项目的实际情况，制定合理项目计划，对项目整体时间进行规划。并对项目各个阶段制定更为详细的项目阶段计划。计划的建立，首先保证了项目在进度上监控的可能。同时通过项目进度计划的制定，一定程度上规避了项目在进度上的风险，或者说为进度风险的识别建立了基础。\n在项目实施过程中，通过对项目计划的监督来保证项目的进度监控，当项目进度发生偏移时，我们将通过增加资源，或增大其他方面的投入来保证项目按时保质的进行。\n同时也将根据项目的实际情况或者用户项目建设方面的变更或者因为其他风险的影响对项目计划进行调整，保证项目计划可行、可监控。\n### 概述\n在项目执行和管理的过程当中，因为不确定性以及渐进明细是项目的主要特性之一，长沙市机关事务管理局智慧后勤服务管理平台建设项目是一个综合型多系统相对负责的综合型系统集成项目，包括网络系统的建设、云平台的应用、新旧网络的融合、视频监控系统建设、智能交通建设、智慧后勤系统建设以及移动应用的建设等等，项目在执行交付过程中需要跨部门、跨单位多系统的协调和集成。项目要求在较短的实施周期内完成交付，从项目管理的角度来分析，项目的风险以及资源投入都将增加，为了保证项目进度以及项目的质量，特制定以下的项目进度保障。\n### 明确项范围\n项目进度计划是项目管理计划的核心内容之一，也是指导整个项目进行的主要计划之一，项目计划的科学制定，是项目能确保进度的主要措施之一。\n项目进度的制定依赖于项目的建设范围，所以，在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n### WBS\nWBS是项目进度计划制定的基础，WBS：工作分解结构是指将项目的交付成果以及完成相应成果所需要的工作进行分解，分解到40小时左右的工作包。WBS的分解遵循相应的规则：\n- 100%包含：分支上下100%包含；\n- 不可再分：最底层状态相对独立不可再分；\n- 信息透明：分解到可以充分估算完成该成果所需的时间、费用、资源等；\n- 独立责任：分解到可安排一个责任者；\n- 滚动规划：远期工作可暂时不分解。\n项目工作分解结构应包含项目所有必须交付的成果以及完成相关交付内容所需要做的工作。即WBS应能体现本项目所有的交付物与相应的工作。\n同时WBS也是整个项目管理过程的核心，项目经理通过WBS完成项目进度计划的制定，也需要通过WBS进行项目风险分析。项目的人力资源计划、项目人力成本估算均可以通过项目WBS来完成。\n### 制定计划\n在WBS的基础上，结合长沙市机关事务管理局智慧后勤服务管理平台建设项目的实际要求，通过排列活动顺序、估算活动持续时间、估算活动资源等动作完成项目进度计划的制定。\n在长沙市机关事务管理局智慧后勤服务管理平台建设项目中，根据项目实际情况采取倒推的方式进行进度计划的制定，在项目活动持续时间估算的过程中，先设定具体的交付和验收要求时间点，再逐步反推到项目各个阶段，相对合理的进行各个阶段时间的分配，再在各个阶段内进行各个活动时间的分配，最终根据各活动的紧前关系来评估计划的可行性和具体的资源需求以及资源冲突的可能性。\n### 控制进度\n在项目执行交付的过程中，本项目安排项目经理进行项目的全生命周期管理，在项目管理和监控过程中，控制进度是监控事项中的重点内容之一，控制进度的目标就是确保项目进度与项目计划之间的偏差尽量小。\n为了确保项目进度计划，项目经理乃至项目组需要进行包括但不限于下列事项的：\n- 项目执行过程中，尽量确保项目资源按照项目资源计划提供给项目；\n- 明确项目采购计划，确保项目各个阶段的到货是按采购计划执行的；\n- 提前进行项目风险识别和评估，并制定风险应对措施，通过科学的风险应对确保项目进度；\n- 阶段性的进行项目进度检查，通过偏差分析，明确项目状态，并通过增加资源或成本的方式来确保进度计划，例如通过短期的赶工来确保项目进度；\n- 当项目进度确实出现较大偏差并无法纠正时，应及时的组织项目会议对项目进度计划进行调整，确保后续阶段的项目可控。\n## 项目成本管理\n在项目成本管理方面，我方通过对项目范围内所有工作进行整理分析，通过对项目需求进行详细的调研和分析后，进行成本预算的制作。\n为使项目成本控制在计划目标之内，我们将对项目计划、控制、调整、核算、分析和考核等管理工作进行严格的把空。确保在批准的预算内完成项目。\n具体包括制定成本管理计划、成本估算、成本预算、成本控制四个过程来完成。项目成本管理贯穿整个项目的实施过程中。\n\n图 项目成本管理流程图\n除此之外，在本项目的实施过程中，除通过对计划的监督来控制成本外，在方案制定阶段，尽量通过利旧、对采购设备的选型以满足用户需求为基准，保证用户投入最小能获得最大的项目成功。\n加强事先控制的措施。一是要加强制度建设。二是对项目成本费用的进行预测与计划。项目开工前必须作科学的分析论证,预测出完整项目所需要的总成本额,以此作为进行计划成本控制与目标考核的依据。对每一个项目的开展,都应当有精心的预测,以免造成不应有的失误。项目部人员应做好项目开工前的准备工作,选定先进的施工方案,选好合理的材料供应商,制定好该项目的成本计划,做到心中有数。在建设中严格审批,从而达到控制支出的目的。三是控制主要材料成本支出。一方面，在数量上,首先把住材料进场关,防止备料过程中材料数量亏吨现象。其次还要避免在项目开展过程中材料数量的损失浪费现象和料场保管过程中的流失现象,如果控制好材料运行中这“三个环节”完全可以保证材料数量避免亏吨现象。另一方面，在价格上,防止价格偏高现象。首先要了解市场价格以及产地、质量、厂家实力信誉情况,做到货比多家,以最低的价格选购同样数量的材料,既保证质量又达到成本价最低。\n加强事中控制(过程控制)的措施。应做到：一是加强信息化管理,提高统计分析的管理水平。要积极创造条件、优化施工方案、改进施工工艺、严格落实质量责任、克服质量通病,用杜绝质量事故、不停工、不返工来有效节约成本。安全是获取效益的保证。首先安全是项目管理中最重要的任务。项目安全管理必须要及时进行危害辨识,确定项目中安全管理重点部位,加大安全设施投入,落实管理责任和保证措施,同时项目安全主管经理和安全员要深入施工现场,确保万无一失。三是加强检查监督工作。要随时检查制定的规章制度落实和执行情况,与每道工序工艺和技术规范操作情况,控制好管理人员手中的权力,各负其责,检查监督各个环节的落实情况,发现问题及时解决、及时处理,做到信息反馈及时。\n加强事后控制的措施。进行事后分析是下一个循环事前控制科学预测的开始,是成本控制工作的继续。在坚持每个项目都实行综合分析的基础上,及时检查、分析、修正、补充,以达到控制成本和提高效益的目标。这些措施包括：一是进行成本费用分析。成本费用分析要以施工管理强弱、技术管理高低、材料费用节超、人工费用多少、机械使用费用大小、其他直接费支出情况、管理费用增减、预算收入余缺等为切入点。成本费用分析内容、数据必须真实准确,常用因素分析法进行分析对比,找出偏差原因,提出挖潜措施,改进成本管理工作,以提高企业的经济效益。二是开展项目责任成本执行情况考核。必须落实项目责任,做到完工一个、清理一个、考核一个、奖惩一个。\n## 项目质量管理\n本小结涉及内容为在项目管理过程中，我们所采用的质量控制方法及程序。这在指导与监督服务器系统建设有着非常重要的作用，是我们向最终用户提交高满意度成果的保证。\n具体内容包括几个方面：\n- 质量管理规范与标准\n- 项目质量保证策划\n- 质量度量\n- 质量考核\n- 过程监控与阶段评审\n- 系统测试与验收\n- 配置管理\n- 文档管理\n- 独立的项目审计\n### 规范与标准\n项目质量管理与企业质量管理的最大区别是由项目过程的一次性、项目产品的独特性和项目交付物的逐步形成特征决定的。ISO 9001标准主要是针对企业在经营管理中的具有重复性的要素或过程。实施ISO 9001质量管理体系标准的目的是企业通过持续的改进活动，不断发现过程误差、系统误差和纠正过程误差、系统误差，从而持续地改善过程输出的质量。而项目管理中的39个标准过程（PMI）或42个要素（ICB）全部是一次性过程或要素，故项目的质量管理核心是过程输出阶段结果的验证和预防措施的制定和实施。因为项目的有些质量缺陷并没有采取纠正措施的机会，或者质量缺陷的后果是毁灭性的。ISO 9001提供的是企业的质量管理体系模式，其中只有质量计划要素（ISO 9001：1994）或产品实现策划过程（ISO 9001：2000）涉及到项目质量管理。事实上，ISO组织确实制订了一个还没有被广泛认识的项目质量管理标准，既ISO 10006标准。\n### 项目质量规划\n在本项目中必须统一标准，明确定义保证项目质量的责任和方法。结合项目的实际情况，质量保证策划可分为以下几点：\n- 项目经理在项目的进度、问题上进行监督、协调和指导。\n- 项目技术负责人在项目的技术问题、实施进度上进行监督和指导。\n- 项目经理进行项目的总体管理与监控，听取客户的意见，寻求改进的方法，由始至终负责整个项目的实施。\n- 选派具备专业特长的工程师认真准备针对自己领域的工作、培训或实验环境，听取客户对培训内容的建议和意见，圆满解决客户提出的相关问题。\n- 每一个阶段的工作内容结束后，做工作总结和定期的状态报告会，以保证客户和项目负责人能及时跟踪工作的进展。\n### 质量度量\n质量保证是针对项目实施过程的特定度量，目的在于度量项目规模、项目成本、项目进度、客户满意度等。使用度量数据进行估计、监控项目的进度和执行情况、确定项目是否符合质量要求。对项目实施过程中的实施工艺进行量化过程，目的在于对项目实施工艺进行控制和改善。通过质量度量可以改进项目实施工艺，促进项目实施成功。度量方式是通过测试、审核、调查、统计等方式得出量化的指标。通过分析度量数据可及时发现项目实施中存在的问题，从而有针对性的制定解决方案。\n### 质量考核\n在项目实施过程中，对项目中的产品及实施工艺质量进行考核，方可保证项目实施的质量。一个项目的实施涉及到各方的密切合作，任何一方，任何一个阶段的工作都不是孤立的，与项目的其他各部分有着密切的关联，因此在系统实施过程中：\n- 项目实施人员要密切配合，并且要分工明确、责任分明，严格遵守项目各阶段的标准、规范和流程。\n- 项目各部分，各小组的设计文档，实施方案，测试计划和工程进度要充分考虑其他项目小组的工作要求，必要时需要其他小组或部门的人员参与，以确保系统实施顺利。\n- 成立质量小组，协调项目各方的工作，进行资源、人员的调配，保证项目的进展和质量。\n- 质量小组将定期或不定期的举行检查会议，检查系统实施的进度和质量，对存在的问题进行推动。\n### 过程监控与阶段评审\n在项目计划阶段，成立由技术专家与用户组成的项目评审小组，职责如下：\n- 对项目可行性进行评审；\n- 对项目实施计划进行评审；\n- 对每个阶段成果和阶段报告进行评审。\n### 系统测试与验收\n项目实施过程包括多个方面的工作和任务，每一项任务的完成、每一个文档的提交、每一个设备、软件或应用系统的交付，都有相应的完成标志和测试、评估和验收标准。对于系统、网络与应用等重大的工作里程碑事件，测试验收工作更为严谨和充分，计划更为周密。\n按照项目实施程序，整个项目实施过程中要对不同的交付项目进行如下各类测试和验收中的一种或几种。\n- 安装测试\n采用标准的测试程序(如硬件设备开机自检)和操作方法，对交付件进行测试。通常用于对硬件设备和系统软件的验收。\n- 系统集成测试\n对整个系统，包括硬件、系统软件、应用程序、网络等各个方面进行全面测试，验证系统是否达到设计目标的测试过程。\n- 性能测试、压力测试\n性能测试是对系统设计的各种数量化指标进行测试，检验交付系统是否达到设计要求的过程。压力测试的内容包括测试系统在特定工作负载下的性能表现。\n### 配置管理\n配置管理工作贯穿于整个项目实施过程中，配置管理人员的工作内容如下：\n- 制定配置管理计划\n为配合项目管理，在项目实施初期，配置管理人员与项目经理协商，制定配置管理的计划，规划未来的配置管理工作。\n配置管理计划的约束条件：\n- 配置管理的规划必须以项目开展的工作为基础，参考工作说明书；\n- 配置管理计划的编写必须以公司的流程为模版，与工作说明书和质量保证计划相一致；\n- 配置管理计划能够指导未来的配置管理工作，配置管理工作必须以配置管理计划为基准；\n- 配置管理计划必须经过最终的评审通过，才能够成立；\n- 如配置管理计划不能满足未来配置管理工作的需要，可以再增加配置管理工作计划作为配置管理计划的辅助，指导未来的配置管理工作；\n- 规范配置管理环境配置管理计划制定结束后，配置管理人员要依据计划实施配置管理的前期工作；\n- 与项目负责人讨论变更控制的实施与项目负责人讨论项目中变更控制实施的措施，指定出相应的变更控制流程。\n### 文档管理\n文档在技术实施人员、维护人员、用户以及计算机之间的关系是多向的。在项目的各个阶段中以文档作为前阶段工作成果的体现和后阶段工作的依据，这个作用是显而易见的。我们在文档管理中把文档分为三类：\n- 管理文档：项目实施人员需制定一些工作计划或工作报告，这些计划和报告都要提供给管理人员， 并得到必要的支持。管理人员则可通过这些文档了解项目安排、进度、资源使用和成果等。\n- 工程执行文档：这类文档是为了保证项目实施按照规范和正规流程来执行，也是为了保证工程质量。\n- 用户文档：实施人员为使用户了解产品的使用、操作和维护提供详细的资料。\n### 项目审计\n在项目的实施过程中，独立审计的目标是对被审计项目的合法性、完整性及实施方法的一致性表示意见。独立审计人员对于项目实施过程中发现的实施工艺、方案出现的缺陷或漏洞，可通过审计报告提交项目经理，并提出解决问题的建议。\n## 人力资源管理\n### 项目组织架构\n\n表 项目组织架构图\n### 角色定义\n表 项目组角色定义表\n| 角色 | 主要职责 |\n| :---: | :---: |\n| 项目中心 | 参与立项评审； 指派项目经理，为项目分配合适的人力资源，协助项目经理建立项目团队； 监控项目执行过程，及时了解所有项目的人力资源、进度、质量情况，协商处理问题； 在项目结束后，对项目以及项目组成员进行综合评估； 提升人员技能，考核人员绩效。 |\n| 项目经理 | 项目经理是立项之后的项目主要责任人，负责项目全生命周期管理，主要职责是带领团队在预定的时间和成本之内，交付质量合格的项目/产品。项目经理对本项目的进度、质量、成本负主要责任。 负责本项目的全面管理（包括整体、范围、时间、成本、质量、人力资源、沟通、风险、采购、干系人）； 确保项目能在既定的时间、成本范围内交付满足项目要求质量的成果或者产品； 在项目结束时，总结项目知识和经验教训，完善文档； 对项目成员的业绩进行评估。 |\n| 决策支持组 | 由部门经理、项目经理、专家等人员组成；主要职责是参与项目重大决策以及评审。 |\n| 质量管理组 | 质量管理组主要对项目质量情况进行监督 监督项目的质量规划情况； 对项目过程质量进行监控； 核实项目整体交付质量。 |\n| 商务组 | 负责产品（或合同项目）的销售，签订商务合同、跟踪合同执行过程。 负责项目客户关系维护； 商务沟通。 |\n| 售前组 | 1、负责项目售前阶段的技术沟通； 2、以客户的需求为基础，在沟通的过程中根据公司产品情况以及公司的战略给客户推荐完整的解决方案； 3、完成项目售前阶段的其他工作，包括项目招投标过程等； 4、往售后完成项目知识转移； |\n| 技术组 | 负责项目技术工作： 组织项目技术方案、技术标准的编制和审核； 参与相关的技术评审会议，在技术方面对项目实施过程进行指导和检查； 负责项目技术问题的处理，对专项施工、重要工序、重大问题进行处理； 进行项目总结，完成知识积累和转移。 |\n| 实施组 | 按照项目实施流程规范完成项目整体实施工作： 实施前的施工现场勘测、调研和确认工作； 完成项目现场的实施工作； 完成相关提交物的编制工作； 配合完成项目分保测评工作。 |\n| 培训组 | 负责项目的培训工作，包括但不限于： 制定项目培训方案； 完成项目培训工作，完成培训环境搭建、项目培训课程编制； 完成项目培训工作； |\n| 测试组 | 负责项目的测试工作，包括但不限于： 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |\n| 维护组 | 负责项目维护工作，包括但不限于： 项目维护方案编制； 项目现场维护工作，相关问题处理； 项目维护报告、问题处理报告编制。 |\n\n### 人力资源管理计划\n在项目管理过程中，人力资源管理计划非常重要，项目交付过程的各个环节都涉及到项目组成员的参与。项目组成员的能力要求、何时进入项目、何时释放资源都关系到项目是否以较低的成本高效、高质量完成项目交付的关键。\n在项目规划阶段，项目经理组织项目组成员对项目工作和交付内容进行工作分解，形成WBS，根据WBS的分解原则，每个工作包基本上都能分配给一个资源去完成相应的工作。\n在进行资源匹配的过程中，项目经理完成项目活动排序后即需要进行每项活动对项目资源的需求评估。同时，也需要评估相应资源匹配情况下活动需要的持续时间。在做资源分配时，一方面，需要考虑资源在项目交付过程的延续性，避免资源的浪费。另一方面，也需要考虑资源在项目执行过程中因过度分配而造成的资源冲突。\n### 资源的释放\n人力资源计划不仅是项目经理对人力资源的需求，同样也是约定在具体的时间完成资源的释放，节省人力成本。\n项目任务多是并行安排，串行推进，随着项目的进展，项目对人力资源的需求也会发生变化，项目经理应该根据项目对人力资源的变化调整对资源的申请，当资源在项目中的工作结束时，项目经理应尽快释放资源。\n### 项目的延期\n当项目某项或某几项工作出现延期时，如果按照人力资源计划释放资源则会导致项目工作无法完成，此时项目经理会根据项目延期情况制定相应的纠偏措施。\n通过赶工的方式来完成延期的工作，确保项目能恢复到预期的进度，此时，项目经理需要制定临时性的人力资源计划，在短时间内容协调更多的资源投入到项目中，并延时每天或每周的工作时间确保项目进度；\n项目经理发现偏差无法通过赶工等相应的措施纠偏时，项目经理会根据项目当前的实际情况调整项目进度计划，以确保计划与项目实际情况吻合。此时项目经理需要重新调整项目的人力资源计划，相关的项目资源也需要根据人力资源的调整来调整进出项目的时间。\n## 项目沟通管理\n### 沟通管理概述\n项目是一项需要多方的协调才可能成功的完成的临时性工作。沟通是项目管理过程中最重要的工作之一，也是确保项目各团队、各成员能协作推进项目的基础手段。项目沟通机制的建立是项目交付执行过程的重点工作之一。\n沟通管理是为了确保项目信息及时适当的产生、收集、传播、保存和最终配置所必须的过程。项目沟通管理是一系列过程的集合，这些过程有助于确保正确的人员发送、接收和理解正确的信息。项目沟通管理流程如下：\n- 规划沟通计划；\n- 管理沟通；\n- 监控沟通。\n本项目的实施过程中，为了保证项目的顺利进行，首先项目将建立稳定的项目组织，建立健全、多元的沟通机制，以便在项目实施过程中，各方都能顺畅的对项目中出现的任何状况进行沟通。项目经理需要清楚地概述将如何管理项目之间的沟通。这可以通过创建项目沟通管理计划来实现。\n### 干系人识别\n项目干系人的识别是明确项目沟通机制的基础，人作为沟通的主体，正确的识别项目干系人，明确干系人在项目当中的职责、对项目产生哪些影响，同时明确干系人以何种方式参与项目，且将产生哪些信息，并能以何种方式获取项目的信息。\n项目经理在完成干系人识别后，应建立干系人清单，项目经理在干系人清单中应对干洗人的基本信息进行描述和说明。\n### 沟通方式与途径\n项目管理过程中的沟通方式包括很多中，包括正式和非正式的沟通，项目经理应根据不同的项目事项采用不通的沟通方式，项目管理过程中的沟通包括：\n- 面谈、微信等及时远程沟通软件以及其他非正式沟通方式；\n- 远程沟通、语音或电话会议；\n- 项目例会；\n- 专题会议；\n- 评审会议；\n- 书面沟通。\n沟通的主要目标是通过沟通来达到各个沟通成员之间对某项事务达成一致或达成共同的认知，以便完成决策。项目经理应根据项目沟通管理计划采购不同的沟通方式来完成项目沟通。\n表 会议纪要\n| 会议名称： | 会议名称： |   |   |   |   |   |   |\n| ---: | ---: | --- | --- | --- | --- | --- | --- |\n| 会议时间： | 会议时间： |   |   | 会议地点： |   |   |   |\n| 会议召集人： | 会议召集人： |   |   | 会议主持人： |   |   |   |\n| 会议类型： | 会议类型： |   |   | 会议方式： |   |   |   |\n| 会议议题： | 会议议题： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： | 姓名 | 单位 | 单位 | 单位 | 职务 | 职务 |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 |\n|   |   |   |   |   |   |   |   |\n| 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 |\n| 序号 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 |\n| 1 |   |   |   |   |   |   |   |\n| 2 |   |   |   |   |   |   |   |\n| 3 |   |   |   |   |   |   |   |\n| 4 |   |   |   |   |   |   |   |\n| 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 |\n| 序号 | 问题描述 | 问题描述 | 问题描述 | 问题描述 | 问题责任人 | 问题责任人 | 解决时间 |\n|   |   |   |   |   |   |   |   |\n|   |   |   |   |   |   |   |   |\n\n### 沟通管理计划\n项目经理应根据项目的管理要求制定沟通管理计划，项目沟通管理计划包括：\n- 明确沟通的目标，例如：某变更专题会议的沟通目标是完成对项目某项变更内容的评审，以获得项目组包括甲方以及第三方项目参与单位的认可；\n- 明确沟通的干系人；\n- 明确沟通的途径，包括沟通采用的方式；\n- 建立沟通时间表。\n项目沟通管理计划应该足够详细，包括为什么要发送信息、发送给谁、发送哪些具体信息、如何发送以及何时发送。\n### 沟通计划的管理\n项目沟通管理计划被创建并批准后，项目经理的工作就是确保它的成功执行。同时，项目经理需要根据项目情况对管理计划定期审查和更新，以反映对项目的任何更改。项目经理还必须管理项目沟通管理计划的执行。这包括：\n- 数据的收集和分析；\n- 为沟通创建信息；\n- 沟通信息的传输或分配；\n- 储存任何通讯报告、档案或文件；\n- 检索任何存储的沟通；\n- 在项目结束或设定日期后处理任何旧的沟通。\n### 监控项目沟通\n监控项目沟通是指在项目交付管理过程中，项目经理对整个项目生命周期内的项目沟通进行控制和监控，具体包括但不限于以下工作：\n- 相关的项目沟通是否按计划进行；\n- 发布的信息是否被受众所接受；\n- 发布的信息是否被正确的理解，尽量消除项目沟通过程中的噪声；\n- 信息发布的过程是否确保不通的干系人是否收到了其应该收到的信息。\n在项目经理进行项目沟通管理监控是，对于项目沟通中的方式、沟通频率都是监控沟通中的一部分。\n## 项目风险管理\n风险管理是指在项目实施的过程中，通过对项目内外部相关的各个方面进行整体分析，来进行风险的识别，并通过对风险的分析来判断风险的影响，制定可行的风险应对计划，并由项目组成员对相关的进行跟踪和监控，以确保最大程度的减小风险对项目的危害。\n### 风险识别\n风险识别包含两方面内容：\n- 识别哪些风险可能影响项目进展及记录具体风险的各方面特征。风险识别 不是一次性行为，而应有规律的贯穿整个项目中。\n- 风险识别包括识别内在风险及外在风险。内在风险指项目工作组能加以控制和影响的风险，如人事任免和成本估计等。外在风险指超出项目工作组掌控力和影响力之外的风险。\n通过界定项目范围，明确项目范围，将项目范围内的任务细分为更具体更便于管理的部分，能够避免遗漏而产生风险。\n项目进行的过程中，加强对变更的控制，通过对变更的分析来评估变更带来的风险。\n当风险识别以后，我们将对已经识别的风险进行记录，以保证后续能对风险进行持续的跟踪。\n#### 风险识别原则\n风险识别在整个风险管理过程中都占有重要位置，只有正确认识风险，才能正确分析风险，进而才能合理应对和控制风险带来的影响。然而项目风险大多数情况下是潜在的，随着项目生命期的发展，新风险可能随时出现。因此，在项目风险识别过程中，最重要的就是不能遗漏风险因素，特别是对项目整体目标有重大影响的因素。为了更好地进行风险识别，风险识别过程中应遵循如下的主要原则。\n- 由粗及细，由细及粗\n由粗及细是指对风险因素进行全面分析，并通过多种途径对项目风险进行分解，逐渐细化，以获得对项目风险的广泛认识，从而得到项目初始的风险清单。由细及粗是指以项目初始风险清单为基础，从众多风险中，确定那些对建设项目目标实现有较大影响的风险因素，作为主要风险，详细识别其风险来源、风险特征和风险影响等。\n- 多种识别方法的选择与综合运用\n大多数项目可能同时遇到各种不同性质的风险，因此采用单一的识别方法是不可取的，必须综合运用多种方法，取长补短，多方面识别项目的风险。当然，对于特定活动或者事件，需要根据实际情况采用有效的识别方法。\n- 谨慎排除可能的风险\n不要轻易否定或排除某些风险，要通过认真的分析进行确认或排除。必要时，可进行实验论证，对于不能排除但又不能肯定予以确认的风险按确认考虑。\n- 全员参与原则\n由于风险识别的广泛性，要求项目的风险管理人员应尽量向与项目有关的人员广泛征求意见并进行归纳整理，以求对项目风险的全面了解。\n- 动态识别原则\n风险识别的全生命周期性表明随着项目生命期的发展，项目不同阶段会有不同的风险。为了识别随时可能出现的新风险，必须预先制定一个连续的风险识别计划，满足风险动态识别的需要。\n- 经济原则\n经济原则是指依据项目风险影响的大小来确定投入风险识别的资源和精力。对项目整体目标有重大影响的风险，需要花较大的精力、用多种方法进行识别，以期最大程度地掌握风险情况；但对于影响项目整体目标较小的风险因素，则没有必要花费大量时间和精力进行识别。如果风险识别的费用超过风险带来的损失就丧失了风险管理的意义。\n- 资料积累原则\n资料的不断积累是开展风险管理的重要基础，风险识别过程中产生的记录是主要的也是重要的风险资料之一，对于今后的风险管理以及类似项目的风险识别可以提供巨大帮助。风险识别工作开展前应准备好将要用到的记录表格，当风险识别工作完成后，将所获取的相关资料整理保存。\n#### 风险识别内容\n- 识别并确定项目有哪些潜在的风险\n这是项目风险识别的第一项工作目标，因为只有识别和确定项目可能会遇到哪些风险，才能够进一步分析这些风险的性质和后果。所以在项目风险识别中首先要全面分析项目发展变化的可能性，进而识别出项目的各种风险并汇总成项目风险登记册。\n- 识别引起项目风险的主要影响因素\n这是项目风险识别的第二项工作目标，因为只有识别出各项目风险的主要影响因素，才能把握项目风险的发展变化规律，才有可能对项目风险进行应对和控制。所以在项目风险识别中要全面分析各项目风险的主要影响因素及其对项目风险的影响方式、影响方向、影响力度等。\n- 识别项目风险可能引起的后果\n这是项目风险识别的第三项工作目标，因为只有识别出项目风险可能带来的后果及其严重程度，才能够全面地认识项目风险。项目风险识别的根本目的是找到项目风险以及消减项目风险不利后果的方法，所以识别项目风险可能引起的后果是项目风险识别的主要内容。\n#### 风险识别的目的\n项目风险识别的目的主要体现在三个方面：\n- 风险识别有助于确定风险管理的对象；\n- 存在于项目内部及外部环境的不确定因素是多种多样、错综复杂的，有的是静态的，有的是动态的；有的是潜在的，有的是已经存在的，因此需要利用科学的方法进行分析。没有风险识别的过程，无法解决项目不确定的复杂性，风险管理就是盲目的，不切实际的。通过风险识别，可以识别出可能对项目进展有影响的风险因素、性质以及产生的条件，并据此衡量风险的大小，作为制定风险应对计划的依据。\n- 通过风险识别，记录具体风险的各方面特征，并提供最适当的风险管理对策；\n- 风险识别是一项反复的过程，随着项目生命期的渐进，又会产生新的风险。风险反复发生的频率以及参与的各项目过程也会因项目而异，但这并不意味着风险识别是多余的工作，风险识别直接影响风险管理的决策质量，进而影响整个风险管理的最终结果，尤其是在项目的前期。\n- 风险识别有助于提高风险分析的有效性。\n险识别将风险可能引起的后果记录成册，为风险分析提供必要的信息，同时增强项目组织成员对项目成功的信心。风险识别包括识别项目的内在风险及外在风险：内在风险指项目管理组织能加以控制和影响的风险，如成本估计、工期预测、人事任免等；外在风险指超出项目管理组织控制力和影响力之外的风险，如某些市场风险、自然风险和政治风险等。任何一种风险因素在识别阶段被忽略，都可能导致整个风险管理的失败，从而造成不可估量的经济损失。\n#### 风险识别的结果\n- 已识别的项目风险\n已识别的项目风险是项目风险评估的最重要结果，它通过定性的项目风险清单来表示，该清单对项目风险的描述应该尽量简单，容易理解。\n- 潜在的项目风险\n潜在的项目风险是指没有迹象表明会发生的风险，但是人们可以主观判断预见的风险，如重要技术专家的流失。当然，潜在的项目风险可能会发展成为项目的真正风险，因此要给予足够的重视。项目承担单位应该根据风险来源进行适当的分类，并以表格或文字做清楚的描述，编制出潜在的项目风险清单，为风险管理的后续过程打好基础。\n- 对项目管理其他方面的改进\n在项目风险识别的过程中，可能会发现项目管理其他方面存在一些问题，借此机会可以进行修改和完善。\n### 风险评估\n项目风险评估是在风险识别之后，通过对项目所有不确定性和风险要素的充分、系统而又有条理的考虑，确定项目的单个风险。然后，对项目风险进行综合评价。它是在对项目风险进行规划、识别和估计的基础上，通过建立风险的系统模型，从而找到该项目的关键风险，确定项目的整体风险水平，为如何处置这些风险提供科学依据，以保障项目的顺利进行。\n要让所有的事情都去掉主观性是很困难的，但是实践和经验可以提高项目经理预测风险的概率和影响的能力。\n#### 项目风险评估流程\n风险评估过程由以下六个基本步骤构成：\n评估所有的方法：所有不同的方法都应该考虑到，所有影响风险的因素都必须考虑。头脑风暴法或其他的风险识别方法应该使用得透彻，所有可能影响风险发生的因素都应该考虑到。\n考虑风险态度：决策者的风险态度是需要重点考虑的。不同的人会用不同的态度估计风险，并且使用同样的数据做出不同的决定。一些决策者，与其他的决策者相比较，或多或少是厌恶风险的，并且会根据给定的数据，对风险的发生和影响做出不同的主观评估。\n考虑风险的特征：风险是否已经识别、它们是否可控和它们的影响将会怎样，这些都是需要考虑的。控制已经识别(例如内部可控的)的风险而不是其他的(例如外部不可控的)风险，这是可能的。所有可能的风险特征都需要识别。\n建立测量系统：风险需要用定量或定性(或综合的)方法测量和评估。一些方法是使用已经建立的模型，这些模型输入了风险的特征和风险面临的情况，这样，根据历史经验就可以做出预测。\n解释结果：测量中生产的数据需要解释。这种解释同样也有定性的或定量的。测量过程的结果给预测和可能的结果提供了一种暗示，但是这些仍需要解释。两个不同的解释人员可能用的是同样的数据和结果，但他们所做的评价却不相同。解释可能会根据观察到的数据用外推法对未来的结果做出预测。\n进行决策：整个过程的最后阶段需要决定哪些风险会保留，哪些风险要转移出去。风险是否保留取决于组织的实际情况和决策者的态度。\n#### 项目风险评估依据\n- 已识别的风险\n已识别的科技计划项目风险是项目风险评估的基础。\n- 项目的进展情况\n在项目的不同阶段，所面临的风险程度是不同的。一般来说，随着项目的进展，项目的风险和不确定性就会逐步降低。\n- 项目的性质和规模\n由于各科技计划项目的性质不同，风险对其影响程度也不一样。一般来说，较小的科技计划项目风险程度较低，大型、复杂的项目或高新技术项目的风险程度则会比较高。\n- 数据的准确性和可靠性\n数据的准确性和可靠性都会影响项目风险评估的结果，所以要对数据的准确性和可靠性进行评估。\n#### 项目风险评估结果\n项目风险评估最重要的结果就是量化了的项目风险清单。该清单综合考虑了项目风险发生的概率、风险后果的影响程度等因素，因此项目承担单位可依此对项目风险进行排序，从而确定采取什么样的风险应对措施以及控制措施应实施到什么程度。\n项目风险清单一般可包括以下内容：\n- 项目风险发生概率的大小；\n- 项目风险可能影响的范围；\n- 对项目风险预期发生时间的估算；\n- 项目风险可能产生的后果；\n- 项目风险等级的确定。\n项目风险可分为四个等级：\n| 序号 | 等级定义 | 说明 |\n| :---: | :---: | :---: |\n| a | 灾难级 | 这类等级的风险必须立即予以排除 |\n| b | 严重级 | 这类风险会造成项目偏离目标，需要立即采取控制措施 |\n| c | 轻微级 | 暂时不会对项目产生危害，但也要考虑采取应对措施 |\n| d | 忽略级 | 这类风险可以忽略，不采取控制措施 |\n### 风险应对\n项目风险应对措施主要包括如下几种：\n- 项目风险规避措施\n这是从根本上放弃项目或放弃使用有风险的项目资源、项目技术、项目设计方案等，从而避开项目风险的一类应对措施。例如，对于存在不成熟的技术坚决不在项目实施中采用就是一种项目风险规避的措施。\n- 项目风险遏制措施\n这是从遏制项目风险引发原因的角度出发应对项目风险的一种措施。例如，对可能因项目财务状况恶化而造成的项目风险(如因资金断绝而造成烂尾楼工程项目等)，采取注入新资金的保障措施就是一种典型的项目风险遏制措施。\n- 项目风险转移措施\n这类项目风险应对措施多数是用来对付那些概率小，但是损失大(超出了承受能力)或者项目组织很难控制的项目风险。例如，通过购买工程一切险等保险的方法将工程项目的风险转移给保险商的办法就属于风险转移措施。\n- 项目风险化解措施\n这类措施从化解项目风险产生出发，去控制和消除项目具体风险的引发原因。例如，对于可能出现的项目团队内部和外部的各种冲突风险，可以通过采取双向沟通、调解等各种消除矛盾的方法去解决，这就是一种项目风险的化解措施。\n- 项目风险消减措施\n这类风险应对措施是对付无预警信息项目风险的主要应对措施之一。例如，对于一个工程建设项目，在因雨天而无法进行室外施工时，采用尽可能安排各种项目团队成员与设备从事室内作业的方法就是一种项目风险消减的措施。\n- 项目风险储备措施\n这是应对无预警信息项目风险的一种主要措施，特别是对于那些潜在巨大损失的项目风险，应该积极采取这种风险应对措施。例如，储备资金和时间以对付项目风险、储备各种灭火器材以对付火灾、购买救护车以应对人身事故的救治等都属于项目风险储备措施。\n- 项目风险容忍措施\n这是针对那些项目风险发生概率很小而且项目风险所能造成的后果较轻的风险事件所采取的一种风险应对措施。这是一种最常使用的项目风险应对措施，但是要注意必须合理地确定不同组织的风险容忍度。\n- 项目风险分担措施\n这是指根据项目风险的大小和项目相关利益者承担风险的能力大小，分别由不同的项目相关利益主体合理分担项目风险的一种应对措施。这种项目风险应对措施多数采用合同或协议的方式确定项目风险的分担责任。\n- 项目风险开拓措施\n如果组织希望确保项目风险的机会能得以实现，这就具有采用积极的风险措施，该项发现措施的目标在于通过确保项目风险机会的实现。这种措施包括为项目分配更多和更好的资源，以便缩短完成时间或实现超过最初预期的好质量。\n- 项目风险提高措施\n这种策略旨在通过提高项目风险机遇的概率及其积极影响，识别并最大程度发挥这些项目风险机遇的驱动因素，致力于改变这种项目风险机遇的大小，最终促进或增强项目风险的机会，以及积极强化其触发条件，提高其发生的概率。\n## 项目采购管理\n项目采购管理包括从执行组织之外获取产品和服务的过程。项目采购主要包括以下几个方面：\n- 采购计划：决定采购什么，何时采购；我们将按照用户的要求制定详细的采购计划，保证项目采购活动的顺利进行。\n- 合同管理：与项目采购产品生产厂商或者供货厂商签订正规的合同，以项目建设方的要求为基础对合同条约进行要求，保证项目所需产品的高的服务标准，并及时的对项目第三方合同进行清算，确保项目的稳定，降低外部环境的其他风险。\n### 采购计划\n- 根据客户的要求和项目建设要求进行项目所需第三方产品的采购，在项目采购前，我们将根据项目合同要求以及项目建设时间要求等必要条件制定可行采购计划，对项目采购活动的采购内容、相关产品要求、时间计划、运输、交货验收等进行详细的安排，保证项目的采购活动能顺利的进行。\n### 合同管理\n- 在进行第三方产品采购时，我们将通过与供货商正规的合同签订来确保项目采购工作的自豪量，同时也将降低因第三方采购而给项目带来环境外的其他风险。\n### 发货与接收\n相关流程安排如下：\n- 在货物到达建设方指定地点前七天通知建设方货物准备以及到货情况等，其内容包括：\n- 相关合同号；\n- 设备名称；\n- 设备数量；\n- 价格；\n- 箱数；\n- 型号规格；\n- 重量和体积；\n- 拟发运的时间；\n- 其他必要的说明。\n- 向客户发出《交货计划和场地准备书》；\n- 安排所有货物均直接运送至项目建设方指定地点；\n- 发运的同时再次发出《收货通知》；\n- 在用户现场对检查货物包装与核对货单；\n- 若因我方延误告知而对用户造成的损失，由我方负责。\n#### 物流运输\n- 我方将联合长期合作的专业物流公司，仔细清点货物数量，检查货物包装是否完好。之后，安排运输方式（公路、铁路运输或空运），全程专人随同运输至最终用户指定地点，并负责搬运到指定设备安装位置，且我们承诺，我方将承担所有的运输费用。\n#### 包装和标记\n使用适于运输的坚固包装，并且根据合同货物的不同特性和要求采取防潮、防雨、防锈、防震、防腐和防粗暴装卸等保护措施，以确保合同货物安全无损地送达交货地点。由于包装不善所引起的货物锈蚀、损坏和损失均由我方承担。\n下面是一个包装箱四侧的标记实例：\n\n根据合同货物的不同特性和装卸运输上的不同要求，在包装箱相对的二个侧面上用中文标记“勿倒置”、“小心轻放”、“防潮”等标志和“重心”等装卸搬运时适用的通用图案，以利于装卸和搬运。每件包装箱内附一份详细装箱单和质量合格证。\n#### 货物接收\n在货物运抵用户指定地点后，我公司发货随同人员将与接收人按照货物包装箱数进行清点签收（完成开箱清点及初步检验的时间不迟于交货之日起四十日），并且双方都确认货物在运输过程中没有明显包装损坏。\n项目到货过程根据项目到货验收流程进行，我方在到货前进行到货报验申请，并将申请提交给建设单位、监理单位，项目到货时，监理单位组织项目到货验收工作，到货验收完成后，各方签署到货验收报告。\n\n# 项目培训方案\n## 培训概述\n长沙市机关事务管理局智慧后勤服务管理平台项目的培训工作主要是指在项目上线后进行的针对市机关事务管理局用户以及市机关事务管理局系统管理人员的针对性培训。\n在项目执行交付阶段，关键交付事项交付过程中，市机关事务管理局系统管理人员可选择性的参与项目交付工作，作为对项目系统熟悉的过程。\n长沙市机关事务管理局智慧后勤服务管理平台项目包括电子政务外网政务云资源的应用、移动应用端在长沙市现有移动应用平台上的嵌入、智慧安全用电系统的建设、本地机房建设、网络改造、AI视频监控系统以及智能交通管理系统的建设等内容。项目的培训也需要根据机关事务管理局对相关事项的管理智能进行培训。\n## 培训范围\n项目培训内容主要为长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容。具体包括：\n- 智慧后勤管理平台管理端；\n- 智慧后勤管理平台应用PC端；\n- 智慧后勤管理平台应用移动端；\n- 智慧安全用电终端设备；\n- AI视频监控系统终端、服务端设备；\n- 智能交通管理系统终端、服务端设备；\n- 项目新建以及改造网络系统以及相关的设备。\n## 培训对象\n长沙市机关事务管理局智慧后勤服务管理平台项目培训对象主要包括两个部分的人员：\n- 项目系统的相关使用人员；\n- 各部分业务的审批、管理人员；\n- 系统硬件设备以及网络系统的日常管理和维护人员。\n## 培训目标\n长沙市机关事务管理局智慧后勤服务管理平台项目培训目标主要包括以下几个部分：\n- 确保系统使用用户在日常工作和管理事务中能顺畅的使用系统，并通过系统的使用提升工作效率和管理效率。\n- 确保长沙市机关事务管理局智慧后勤服务管理平台项目后续相关的日常管理和维护人员能完成项目系统的日常运维和管理工作，并能对项目系统操作进行基本指导，同时能解决系统在运行过程中出现的轻微故障。\n- 确保长沙市机关事务管理局智慧后勤服务管理平台项目相关的硬件设备的管理和维护人员能完成项目的基本管理和运维，确保项目设备稳定的运行。\n项目培训目标能在无承建单位协助的情况下，系统能对建设单位形成稳定、顺畅的支撑。\n## 培训时间\n长沙市机关事务管理局智慧后勤服务管理平台项目培训时间安排在项目系统上线后，项目系统上线完成，项目系统初始化完成，项目正式进入试运行阶段。项目培训在系统上线部署完成、系统初始化完成后一个星期内完成。\n项目集中培训的时间大概为四个小时左右。\n## 培训方式\n项目采用多种培训方式结合的形式进行项目培训。对于项目系统运行维护和管理人员，可以在项目交付过程中采用一对一的培训方式，通过项目交付过程中一对一的培训完成对项目日常运维和管理人员的培训。\n对于项目普通用户以及系统管理审批人员，采用集中培训的方式，通过在统一的培训环境下安排项目培训讲师进行集中培训。\n## 培训场地\n长沙市机关事务管理局智慧后勤服务管理平台项目培训对象主要是机关事务管理局相关办公人员，培训场地可选用机关较大的会议室进行集中培训，以系统操作方式演示和讲解为主。\n培训中一对一的培训主要是在用户或管理人员操作过程中预以操作和管理指导。\n## 培训教程\n长沙市机关事务管理局智慧后勤服务管理平台项目培训教程主要包括演示系统、项目培训PPT、项目系统操作手册、项目运行维护手册。\n在项目培训工作开始之前，项目培训工作组根据本项目的建设内容和培训要求开始编织项目培训教程。\n## 培训讲师\n长沙市机关事务管理局智慧后勤服务管理平台项目我方将指派熟悉项目系统使用，且又有丰富的项目培训经历的项目组成员作为项目培训讲师。\n培训讲师负责项目培训教程的编写、项目培训场地确认、组织和协调项目培训环境的搭建，制定项目培训计划等工作。\n## 培训考核\n项目培训工作完成以后，可根据长沙市机关事务管理局智慧后勤服务管理平台项目的需要制定项目培训考核规划，包括考核的方式、考核时间等。\n项目培训考核的主要目标是确保项目培训工作能达到预期的目标，本项目可采取双向考核的方式，一方面，培训讲师通过培训过程和培训考核情况\n## 实施培训\n### 培训步骤\n根据项目培训的具体情况，在项目培训阶段以项目合同培训要求为基础制定培训流程如下：\n- 确认培训时间；\n- 确认培训内容以及培训课程；\n- 确认培训人员名单；\n- 确认培训环境以及培训方式；\n- 制作项目培训材料；\n- 协调项目培训资源；\n- 搭建项目培训环境；\n- 完成项目培训工作；\n- 培训情况评估。\n### 培训名单确认\n在项目培训工作进行前，我们将根据项目培训课程提供项目培训人员角色的建议，由机关事务管理局根据项目参与人员、项目软硬件系统使用人员的具体情况拟定项目受训人员名单。我方将根据课程时间以及培训人员名称拟定项目具体的培训计划。\n### 计划编制\n当项目建设方将项目培训地点情况、培训方式、培训人员名单、培训启动结束时间拟定完成后，我方将根据培训的具体情况编制项目培训计划，该计划将根据培训设施、人员、课程要求等情况对详细的课程时间安排，培训人员安排等作出详细的培训计划。该计划交由项目建设方审核后发布，并按该计划开始实施培训工作。\n### 通知发布\n在项目培训环境搭建完成，或能确认在培训开始前可搭建完成时，项目组将根据培训情况在机关事务管理局的协助下发布培训通知。或直接由机关事务管理局直接发布培训通知，主要的通知内容如下：\n| 培训通知 | 培训通知 | 培训通知 | 培训通知 | 培训通知 |\n| :---: | :---: | :---: | :---: | :---: |\n| 培训名称： |   |   |   |   |\n| 培训时间： | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 |\n| 培训地点： |   |   |   |   |\n| 培训单位： |   |   |   |   |\n| 培训讲师： |   |   |   |   |\n| 培训课程： | 课程名称 | 课程名称 | 课程内容 | 课程内容 |\n| 培训课程： |   |   |   |   |\n| 培训课程： |   |   |   |   |\n| 培训课程： |   |   |   |   |\n| 培训目的： |   |   |   |   |\n| 培训要求： |   |   |   |   |\n| 备注说明： |   |   |   |   |\n| 联系人： |   | 联系方式： | 联系方式： |   |\n| 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 |\n### 实施培训\n培训启动后，我方培训人员将培训材料、培训设备的准备完成，每天在培训开始之前对培训环境进行调试，保证培训的顺利进行。并将当天课程的培训以分天的方式或者在培训第一天统一发放给培训学员。\n给培训人员发放预制的课程表，以方便培训人员的培训学习。\n在培训时间段内，培训讲师或者培训辅助人员将根据当天培训的情况对培训人员进行签到考勤记录，做为培训评估的基础之一。\n在培训过程中，除正常的对课程的讲解之外，每节课程将设置专门的培训答疑时间，以保证培训质量。\n### 培训评估\n在培训实施进行过程以及培训结束后，我方将根据项目建设方的要求对培训进行评估，一共包括以下几个方面的评估：\n- 项目建设方对项目培训材料的评估，可通过项目组专题会议的形式或者预讲的形式对项目培训材料进行评估；\n- 培训人员以及项目管理人员对参与培训的人员进行评估，我方可协助项目建设方对项目培训人员的培训情况进行评估，可分为日常评估以及培训效果评估。日常评估主要以日常培训考勤情况为基础，同时也可通过实际操作情况对培训人员的培训效果进行评估；\n- 项目建设方以及参与培训的人员对培训讲师进行评估，通过培训人员对培训讲师的课程诠释能力，教学方式等进行评估；\n- 培训效果评估以及培训满意度评估。\n通过双向的评估以保证项目培训的质量，确保通过培训能达到该培训的预期目的。\n#### 培训材料评估\n| 评审意见表 | 评审意见表 | 评审意见表 |\n| :---: | :---: | :---: |\n| 评审材料名称： |   |   |\n| 评审会议时间： |   |   |\n| 评审会议地点： |   |   |\n| 评审人员名单： | 评审人员单位 | 评审人姓名 |\n| 评审人员名单： |   |   |\n| 评审人员名单： |   |   |\n| 评审人员名单： |   |   |\n| 评审主要内容： |   |   |\n| 评审建议： |   |   |\n| 评审签字： |   |   |\n#### 培训讲师评估\n| 讲师评审表 | 讲师评审表 |\n| :---: | :---: |\n| 讲师姓名： |   |\n| 负责课程： |   |\n| 评审时间： |   |\n| 整体满意程度： | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 评审项目 | 满意程度 |\n| 讲师授课态度 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 对知识的表达能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 专业知识能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 知识范围的宽广度 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 课程的诠释能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 问题解答能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 对讲师的建议 |   |\n\n# 项目验收方案\n## 验收概述\n根据项目要求，长沙市机关事务管理局智慧后勤服务管理平台项目设立两个验收点，即即项目初步验收和项目竣工验收（终验）。项目建设内容全部完成后，项目经过我方内测达到项目初步验收标准后，由我方向监理单位以及建设单位提请项目初步验收。初步验收完成后，我方对初验过程中所提的问题进行整改，整改完成，项目进入上线试运行阶段，一般为期1-3个月。项目初验以及试运行过程中相关问题整改完成并通过测试，我方向建设单位提请竣工验收。\n根据项目招标文件要求，本项目采用一般程序验收。项目验收国家有强制性规定的，按国家规定执行，验收费用由中标人承担，验收报告作为申请付款的凭证之一。\n## 验收内容\n长沙市机关事务管理局智慧后勤服务管理平台项目验收内容主要包括以下几个方面：\n- 项目所有采购货物是否按照项目招标文件要求完成采购到货；\n- 项目招标文件所要求的软件系统是否按建设单位需求开发完成，并在相关位置完成部署与实施；\n- 项目相关的硬件设备是否按照项目规划设计要求完成安装部署和实施；\n- 项目范围内需要进行改造的网络系统是否按照项目规划设计要求进行改造，并完成对接；\n- 项目范围内需要进行对接的十四个系统是否按照项目招标文件要求完成对接；\n- 项目范围内所有文档以及组织过程资产是否按照项目要求进行编写以及提交并审核通过。\n## 验收标准\n长沙市机关事务管理局后勤服务管理平台项目验收标准：\n- 项目合同范围内所有采购货物均按项目合同要求完成采购和到货验收工作，且相关货物完全满足项目合同以项目招标要求；\n- 项目合同范围内所要求的软件系统以及按照要求完成需求调研、开发以及测试工作，并通过测试能完全满足项目招标要求以及项目合同要求；\n- 项目软件系统以及按照项目设计要求和建设单位要求完成实施部署，项目系统运行稳定；\n- 项目范围内的硬件设备均已经按照项目规划和设计要求完成安装部署和实施，经过测试，相关系统满足项目合同与招标要求；\n- 项目范围内需要进行改造的网络系统均以及按照项目规划和设计要求进行改造，并完成网络系统对接，经测试，系统运行正常；\n- 项目范围内需要对接的十四个系统均已按照项目招标文件以及项目合同要求完成系统对接，经测试，系统对接稳定，数据交互均满足项目合同以及招标要求；\n- 项目范围内所有文档以及组织过程资产均按照项目要求进行编写以及提交并审核通过。\n## 验收组织\n长沙市机关事务管理局后勤服务管理平台项目的验收组织包括：\n- 项目建设单位，长沙市机关事务管理局；\n- 项目监理单位；\n- 项目验收专家组；\n- 项目监管单位；\n- 项目承建单位。\n由项目建设单位组织，项目专家组、项目监管单位、项目建设单位以及监理单位组成项目验收小组执行对项目的验收工作。\n\n## 验收方式\n基于长沙市机关事务管理局智慧后勤服务管理平台项目的特性，项目采用集中现场验收的方式。\n由建设单位组织项目验收小组对项目建设情况进行现场验收。验收小组通过对项目系统进行操作演示、对外部设备进行现场勘查、对项目文档进行审阅，并在项目验收会议上对建设单位进行质询。\n## 验收准备\n项目验收准备条件如下：\n- 所有建设内容按项目合同以及招标要求全部完成建设；\n- 各分项验收工作全部完成，且合格；\n- 招标文件以及合同所要求的软件系统测评工作全部完成，且测评通过；\n- 软件系统配置管理工作完成，BASELINE建立；\n- 项目验收资料以及文档编写完成，且符合项目招标以及合同要求；\n- 项目范围内相关设备上架，加电运行测试正常；\n- 项目验收申请提交监理单位，监理单位同意；\n- 项目验收申请提交后，项目建设单位以及主管单位同意启动验收；\n- 项目合同所要求的其他验收条件。\n## 验收步骤\n项目验收步骤如下：\n- 编写验收方案（计划书）；\n- 成立项目验收小组；\n- 项目验收实施；\n- 编写项目验收报告；\n- 召开验收评审会；\n- 签署项目验收报告。\n## 验收报告（模板）\n### 项目基本信息\n- 项目名称：\n- 项目编号：\n- 项目建设方：\n- 项目承建方：\n- 项目监理方：\n### 项目合同信息\n#### 合同基本信息\n- 项目合同编号：\n- 项目合同甲方：\n- 项目合同乙方：\n#### 合同变更情况\n*对项目合同的变更情况进行简要的描述和说明**。如果有多个变更，需要逐一描述。如无合同变更，记录无。*\n### 项目建设周期\n- 项目开工日期：\n- 项目竣工日期：\n- 项目服务周期：自 年 月 日开始至 年 月 日。\n\n### 项目建设情况\n#### 项目进度情况\n| 序号 | 阶段名称 | 开始时间 | 结束时间 | 项目提交物 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n\n#### 项目需求变更情况\n*记录项目需求变更（已经执行）情况，如果存在多个变更，需要逐一说明。*\n# \n### 项目验收计划\n#### 验收基本信息\n- 项目验收时间：\n- 项目验收方式：现场集中验收\n- 项目验收组：\n| 序号 | 验收人员 | 所属单位 | 所属角色 | 相关职责 |\n| ---: | --- | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n#### 项目验收原则\n- 对已经交付的项目成果进行核验，检查项目所有交付成果是否满足项目合同之要求；\n- 对项目任务以及技术服务等内容进行审查，确认相关的项目任务以及需要提供的技术服务已经全部按照合同完成；\n- 对项目实施进度情况进行审核，检查是否按照项目合同的时间进度要求完成了项目建设；\n- 对项目的投资情况进行审查；\n- 对项目的提交物（各类文档）进行审查；\n- 对项目的技术水平做出评价，并得出项目的验收结论。\n（正式编写的时候请写项目具体的交付成果和项目任务）\n#### 项目验收依据\n（正式编写的时候请写项目具体的验收依据）\n- 《项目商务合同》\n- 《项目工作说明书（SOW）》\n- 《项目技术方案》\n- 《项目实施方案》\n- 《项目测试报告》\n#### 项目验收内容\n（正式编写的时候请写项目具体的相关硬件环境和系统）\n- 项目硬件基础环境验收；\n- 项目软件系统平台验收；\n- 项目应用系统功能验收；\n- 项目外场设备的验收；\n- 项目文档验收。\n\n### 项目验收结论\n#### 专家组验收意见\n由专家组编制验收意见。\n#### 专家组（签字）：\n由验收组成员签字。\n### 附件\n#### 附件一：软件平台验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 软件类型 | 软件名称 | 验收结果 | 备注 （机器的IP地址等） |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n\n#### 附件二：功能模块验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 功能模块 | 验收内容 | 合同要求 | 验收结果 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n| 7 |   |   |   |   |\n\n#### 附件三：项目文档验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 文档名称 | 用 途 | 验收结果 | 备注 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n\n#### 附件四：硬件设备验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 硬件名称 | 型号 | 用途 | 配置情况 | 验收结果 | 备注 （机器的IP地址等） |\n| :---: | :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |   |   |\n| 2 |   |   |   |   |   |   |\n\n",
  "size" : 237862,
  "modifiedAt" : 1764646206617,
  "id" : "售前资料/Individual_项目实施方案.md",
  "content" : "\n# **长沙市机关事务管理局**\n# **智慧后勤服务管理平台项目**\n\n\n\n# **项目实施方案**\n\n\n\n\n## **编制单位：湖南华宽通科技股份有限公司**\n## **2023年1月**\n## **目**** ****录**\n第一章 项目概述 7\n1.1 项目信息 7\n1.2 遵循标准 7\n1.3 建设内容 8\n1.3.1 项目基础设施建设 8\n1.3.2 智慧后勤服务管理平台 8\n1.3.3 内外部系统对接集成 9\n1.4 建设目标 10\n1.5 实施地点 10\n1.6 实施周期 10\n第二章 项目实施组织架构 11\n2.1 项目实施组织架构图 11\n2.2 实施组织角色定义 11\n2.3 项目团队主要成员清单 13\n第三章 项目进度计划 15\n3.1 项目阶段定义 15\n3.2 项目交付周期 15\n3.3 项目里程碑计划 15\n3.4 项目详细计划 16\n3.5 进度保障措施 18\n3.5.1 进度保障概述 18\n3.5.2 明确建设范围 19\n3.5.3 工作分解结构（WBS） 19\n3.5.4 制定进度计划 20\n3.5.5 实施进度控制 20\n第四章 项目交付实施 22\n4.1 项目交付模型 22\n4.2 项目启动阶段 22\n4.2.1 项目团队组建 22\n4.2.2 项目商务合同 23\n4.2.3 项目启动会 23\n4.2.4 项目开工申请 24\n4.2.5 项目其他准备 24\n4.3 项目规划阶段 24\n4.3.1 勘测调研 24\n4.3.2 范围确认 25\n4.3.3 深化设计 25\n4.3.4 实施方案 26\n4.4 项目执行阶段 27\n4.4.1 项目采购 27\n4.4.2 到货验收 27\n4.4.3 实施准备 28\n4.4.4 硬件实施 30\n4.4.5 软件系统实施 34\n4.4.6 集成实施 38\n4.4.7 项目测试 39\n4.4.8 等保测评 39\n4.4.9 密码测评 40\n4.4.10 项目整改 41\n4.4.11 项目上线 41\n4.4.12 项目培训 42\n4.5 项目收尾阶段 42\n4.5.1 阶段验收 42\n4.5.2 项目试运行 43\n4.5.3 竣工验收 44\n第五章 硬件系统实施 45\n5.1 智慧安全用电 45\n5.1.1 实施内容 45\n5.1.2 设备清单 45\n5.1.3 实施位置 46\n5.1.4 实施人员 46\n5.1.5 实施时间 46\n5.1.6 实施方式 46\n5.1.7 实施流程 46\n5.1.8 安全文明施工措施 47\n5.1.9 施工报告 48\n5.2 智慧物联 48\n5.2.1 实施内容 48\n5.2.2 设备清单 50\n5.2.3 实施方式 50\n5.2.4 施工时间 50\n5.2.5 实施流程 51\n5.2.6 安全文明施工措施 51\n5.2.7 施工报告 51\n5.3 AI视频监控 52\n5.3.1 实施内容 52\n5.3.2 设备清单 52\n5.3.3 实施点位 53\n5.3.4 实施方式 53\n5.3.5 实施流程 53\n5.3.6 安全文明施工措施 54\n5.3.7 施工报告 54\n5.4 基础网络 55\n5.4.1 实施内容 55\n5.4.2 机房环境实施 55\n5.4.3 网络系统实施 55\n5.4.4 网络拓扑图 56\n5.4.5 设备清单 56\n5.4.6 实施位置 57\n5.4.7 实施流程 57\n5.4.8 安全文明施工措施 58\n5.4.9 施工报告 58\n5.5 智能交通 59\n5.5.1 实施内容 59\n5.5.2 设备清单 59\n5.5.3 设备点位 59\n5.5.4 实施方式 61\n5.5.5 实施流程 61\n5.5.6 安全文明施工措施 62\n5.5.7 施工报告 62\n第六章 项目系统集成实施 63\n6.1 集成实施概述 63\n6.2 集成实施原则 63\n6.3 集成实施内容 64\n6.4 集成实施架构 64\n6.5 集成融合实施 65\n6.5.1 中枢对接实施 65\n6.5.2 系统嵌入实施 77\n6.5.3 系统对接实施 80\n6.5.4 视频融合实施 86\n第七章 项目测试方案 90\n7.1 项目概述 90\n7.2 测试范围 91\n7.3 测试目标 91\n7.4 术语定义 92\n7.5 项目测试环境 92\n7.5.1 网络系统 92\n7.5.2 主机系统 93\n7.6 测试手段 93\n7.7 测试数据 93\n7.8 测试策略 94\n7.8.1 单元测试 94\n7.8.2 集成测试 94\n7.8.3 整体测试 95\n7.9 测试流程 96\n7.9.1 概述 96\n7.9.2 需求说明书分析 96\n7.9.3 制定测试计划 97\n7.9.4 设立测试配置库 97\n7.9.5 测试环境搭建 98\n7.9.6 测试执行 98\n第八章 项目管理方案 101\n8.1 项目整合管理 101\n8.2 项目范围管理 102\n8.3 项目进度管理 103\n8.3.1 概述 103\n8.3.2 明确项范围 104\n8.3.3 WBS 104\n8.3.4 制定计划 105\n8.3.5 控制进度 105\n8.4 项目成本管理 106\n8.5 项目质量管理 108\n8.5.1 规范与标准 108\n8.5.2 项目质量规划 109\n8.5.3 质量度量 109\n8.5.4 质量考核 109\n8.5.5 过程监控与阶段评审 110\n8.5.6 系统测试与验收 110\n8.5.7 配置管理 111\n8.5.8 文档管理 111\n8.5.9 项目审计 112\n8.6 人力资源管理 112\n8.6.1 项目组织架构 112\n8.6.2 角色定义 113\n8.6.3 人力资源管理计划 114\n8.6.4 资源的释放 115\n8.6.5 项目的延期 115\n8.7 项目沟通管理 115\n8.7.1 沟通管理概述 115\n8.7.2 干系人识别 116\n8.7.3 沟通方式与途径 116\n8.7.4 沟通管理计划 118\n8.7.5 沟通计划的管理 118\n8.7.6 监控项目沟通 118\n8.8 项目风险管理 119\n8.8.1 风险识别 119\n8.8.2 风险评估 123\n8.8.3 风险应对 125\n8.9 项目采购管理 126\n8.9.1 采购计划 127\n8.9.2 合同管理 127\n8.9.3 发货与接收 127\n第九章 项目培训方案 130\n9.1 培训概述 130\n9.2 培训范围 130\n9.3 培训对象 130\n9.4 培训目标 131\n9.5 培训时间 131\n9.6 培训方式 131\n9.7 培训场地 132\n9.8 培训教程 132\n9.9 培训讲师 132\n9.10 培训考核 132\n9.11 实施培训 133\n9.11.1 培训步骤 133\n9.11.2 培训名单确认 133\n9.11.3 计划编制 133\n9.11.4 通知发布 134\n9.11.5 实施培训 135\n9.11.6 培训评估 135\n第十章 项目验收方案 138\n10.1 验收概述 138\n10.2 验收内容 138\n10.3 验收标准 139\n10.4 验收组织 139\n10.5 验收方式 140\n10.6 验收准备 140\n10.7 验收步骤 140\n10.8 验收报告（模板） 141\n10.8.1 项目基本信息 141\n10.8.2 项目合同信息 141\n10.8.3 项目建设周期 141\n10.8.4 项目建设情况 142\n10.8.5 项目验收计划 143\n10.8.6 项目验收结论 145\n10.8.7 附件 145\n\n\n# \n# 项目概述\n## 项目信息\n项目名称：长沙市机关事务管理局智慧后勤服务管理平台项目\n建设单位：长沙市机关事务管理局\n监理单位：湖南天道信息技术咨询有限公司\n承建单位：湖南华宽通科技股份有限公司\n## 遵循标准\n- 国家、行业主管部门颁布的相关标准；\n- 国务院办公厅《信息共享互联互通平台建设指南（试行）》；\n- 《政府信息交换语言标准》；\n- 《国家电子政务工程建设项目管理暂行办法》（发改委2007)55号令）；\n- 《国家政务信息化项目建设管理办法》（国办发〔2019〕57号）；\n- GB/Z 19669-2005《XML在电子政务中的应用指南》；\n- GB/T 8567-2006《计算机软件文档编制规范》；\n- GB/T 9385-2008《计算机软件需求规格说明规范》；\n- GB/T 9386-2008《计算机软件测试文档编制规范》；\n- GB/T 11457-2006《信息技术软件工程术语》；\n- GB/T 25000.10-2016《系统与软件工程系统与软件质量要求和评价（SQuaRE）第10部分：系统与软件质量模型》；\n- GB/T 8566-2007《信息技术软件生存周期过程》；\n- GB/T 35273-2020《信息安全技术个人信息安全规范》；\n- GB/T 20271-2006《信息安全技术信息系统通用安全技术要求》；\n- GB/T 20270-2006《信息安全技术网络基础安全技术要求》；\n- GB/T 20269-2006《信息安全技术信息系统安全管理要求》；\n- GB/T 35282-2017《信息安全技术电子政务移动办公系统安全技术规范》；\n- GB/T 22239-2019《信息安全技术网络安全等级保护基本要求》；\n- GB/T 39412-2020《信息安全技术代码安全审计规范》；\n- GB/T 22240-2020《信息安全技术网络安全等级保护定级指南》；\n- GB/T 25068.1-2020《信息技术安全技术网络安全第1部分：综述和概念》；\n- GB/T 25068.2-2020《信息技术安全技术网络安全第2.部分：网络安全设计和实现指南》；\n- GB/T 22239-2019《信息安全技术网络安全等级保护基本要求第4部分：物联网安全扩展要求》。\n## 建设内容\n长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容包括以下三个方面：\n- 项目基础设施建设；\n- 智慧后勤服务管理平台建设；\n- 内外部系统对接与集成。\n### 项目基础设施建设\n长沙市机关事务管理局智慧后勤服务管理平台项目基础设施建设内容包括：智慧安全用电系统建设、智慧物联网络建设、AI视频监控系统建设、基础网络系统建设、智能交通系统建设。通过基础设施建设，一方面对现有的硬件系统提供可接入网络，另一方面也为项目提供信息和数据采集的终端，并同时通过AI视频监控系统与智能交通系统的建设为后勤管理提供更智能和直观的管理手段。\n### 智慧后勤服务管理平台\n智慧后勤服务管理平台的建设主要包括智慧后勤基础平台、智慧后勤应用平台、智慧后勤“一张图”、智慧后勤移动端应用相关内容的建设。\n智慧后勤基础平台是为项目应用部署提供基础运行环境，包括：操作系统的建设、数据库系统、中间件服务和应用基础服务或组件等。基础平台提供集约化、融合多种应用支撑服务，为整个项目提供数据初始化、统一入口、工作台、通用审批管理、物联网管理、数据资源建设、安全服务支撑等基础的服务。\n智慧后勤应用平台是为机关事务管理局各业务管理部门，提供业务后台管理的综合平台。从为机关事务局内部提供考勤管理、公文管理、用印管理、文印管理等应用，到对外的集体户口申办、应诉管理、接待管理、会务管理以及办公用房建设计划的审核、汇总和报批等功能，智慧后勤应用平台将提升机关事务局对外的服务体验及管理水平，实现业务的增效和智能化。\n智慧后勤 “一张图”，实现“所有资源一张图管理、所有设备一张图控制、所有事件一张图显示”，对数据进行直观、高效的可视化呈现，让机关大院的业务和数据变得可知可感，让决策有据可依。并帮助管理者实时了解机关大院整体的资产运行状况、车辆情况、安防情况、能效情况、服务情况等，推动机关后勤服务的管理精细化和服务专业化。\n智慧后勤移动端应用是为满足机关事务管理局在移动端的应用场景而单独开发的，它基于现有“长政通”APP和“我的长沙”城市移动综合服务平台开发，将开发完的移动应用嵌入到“长政通”App和我的长沙。其中嵌入到“长政通”APP的功能是提供给所有市直机关职工和干部的统一服务平台，实现机关后勤服务从被动到主动服务的转变，实现餐饮、物业、会务、通知公告、办公、生活等一站式服务的工具和入口，实现个人信息等基础功能、后勤主页、设施设备管理、培训管理、电子巡更、报事报修、通知公告、房屋维修项目管理等应用。\n嵌入“我的长沙”城市移动综合服务平台功能主要是提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能，提升市机关事务局的社会服务性。\n### 内外部系统对接集成\n内外部系统对接集成的建设内容包括将长沙市机关事务管理局目前已经建成的多个信息系统组网打通，实现信息的互联互通和数据共享。\n现有需要对接的系统有：智慧后勤服务管理平台与长沙市超脑服务平台、市物联网平台、人脸门禁系统、停车道闸系统、视频监控系统、长沙银行一卡通系统、办公用房系统、公务用车系统、智慧消防主机系统、巡更系统、垃圾分类称重系统、人防工程停车道闸系统、“我的长沙”城市移动综合服务平台、“长政通”app对接，以及智能交通系统与交警六合一平台对接。\n## 建设目标\n长沙市机关事务管理局智慧后勤服务管理平台项目建设目标包括以下三个方面：\n- 提高现代信息化技术在机关事务管理局各系统中应用的广度和深度，建成完善的大院基础设施、智能融合的信息技术应用和高度集成完善的智慧化大平台，充分发挥信息技术的生产力；\n- 利用最新信息化技术对各系统的相关要素进行整合，为大院内、外人员提供智慧化的办公、行政服务。通过机关综合整体信息化环境及新建的智慧后勤服务管理平台，更好的保障大院安防，减低大院能耗，提高大院管理水平，提升用户服务体验，创建绿色节约型智慧机关；\n- 为管理部门提供智慧化的管理手段，提高市直公共服务水平和行政管理效率，推动基于新技术的机关事务整体信息化发展，为机关事务管理局的管理决策提供信息化保障。\n## 实施地点\n实施地点：现场实施地点为长沙市政府园区。不需要在现场完成的工作由我方自行安排。\n## 实施周期\n实施周期：自项目合同签订完成后<u>四</u><u>个月</u><u>内</u>达到初步验收条件。\n# 项目实施组织架构\n## 项目实施组织架构图\n\n图 项目实施组织架构图\n## 实施组织角色定义\n我方在本项目中成立专门的项目管理小组以及实施团队来完成项目实施工作，在项目合同签订后，我方将指派专门的项目经理负责整个项目的执行与交付，并根据项目建设内容安排具体的实施和管理人员完成项目实施交付工作。具体角色定义如下表所示：\n表 实施组织角色定义表\n| 序号 | 角色 | 角色职责定义 |\n| :---: | :---: | :---: |\n| 1 | 项目中心 （PMO） | 参与立项评审； 指派项目经理，为项目分配合适的人力资源，协助项目经理建立项目团队； 监控项目执行过程，及时了解所有项目的人力资源、进度、质量情况，协商处理问题； 在项目结束后，对项目以及项目组成员进行综合评估； 协助项目完成项目对审与结算； 提升人员技能，考核人员绩效。 |\n| 2 | 决策支持组 | 由部门经理、中心以及公司管理层相关人员以及技术专家组成；主要职责是参与项目重大决策以及内部评审。 |\n| 3 | 项目经理 | 项目经理是立项之后的项目主要责任人，负责项目全生命周期管理。主要职责是带领项目团队在预定的时间和成本之内，交付质量合格的成果/产品。项目经理对本项目的进度、质量、成本负主要责任。 负责本项目的全面管理（包括整体、范围、时间、成本、质量、人力资源、沟通、风险、采购、干系人）； 确保项目能在既定的时间、成本范围内交付满足项目要求质量的成果或者产品； 参与以及配合项目对审以及核算相关的过程； 在项目结束时，总结项目知识和经验教训，完善文档； 对项目成员的业绩进行评估。 |\n| 4 | 质量管理组 | 质量管理组主要对项目质量情况进行监督。 监督项目的质量规划情况； 对项目过程质量进行监控； 核实项目整体交付质量。 |\n| 5 | 商务支持组 | 营销中心相关人员，包括销售人员以及商务人员。 负责产品（或合同项目）的销售，签订商务合同、跟踪合同执行过程。 负责项目客户关系维护； 商务沟通。 |\n| 6 | 售前支持组 | 项目中心解决方案部人员，主要是指参与前期解决方案的人员。 负责项目售前阶段的技术沟通； 以客户的需求为基础，在沟通的过程中根据公司产品情况以及公司的战略给客户推荐完整的解决方案； 完成项目售前阶段的其他工作，包括项目招投标过程等； 往售后完成项目知识转移； |\n| 7 | 产品支持组 | 公司产品部门相关人员，负责项目产品的相关工作： 负责参与项目自研产品相关的调研、勘测工作； 根据项目调研和需求分析情况完成项目交付产品的设计； 形成需求分析文档，并协调项目各方完成对文档的审批； 完成从需求分析到研发的知识转移过程。 |\n| 8 | 项目研发组 | 负责项目自研软件系统以及公司软件产品的相关工作： 负责软件系统的需求调研和需求分析过程； 配合项目经理完成项目的需求评审工作； 负责项目软件系统设计方案的编制以及设计评审工作； 完成软件系统的设计、开发、测试、上线工作； 根据项目要求提供项目软件相关的文档和过程提交物。 |\n| 9 | 项目实施组 | 系统集成部相关人员，按照项目实施流程规范完成项目整体实施工作： 实施前的施工现场勘测、调研和确认工作； 完成项目系统集成部分的深化设计工作； 负责硬件设备的进场报验工作； 完成项目现场的实施工作； 负责现场施工人员安全教育、技术交底和安全管理工作； 负责硬件设备调试工作； 配合完成项目的测试、测评工作。 |\n| 10 | 项目测试组 | 技术中心产品测试部相关人员，负责项目的测试工作，包括但不限于： 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |\n| 11 | 项目运维组 | 项目中心系统集成部相关人员，负责项目维护工作，包括但不限于： 项目维护方案编制； 项目现场维护工作，相关问题处理； 项目维护报告、问题处理报告编制。 |\n## 项目团队主要成员清单\n| 序号 | 姓名 | 角色 | 工作职责 | 备注说明 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 | 刘姝岐 | 总负责人 | 总领项目交付全过程，负责项目交付过程涉及到的所有商务事项 |   |\n| 2 | 余力 | 项目经理 | 负责整体项目的工作任务分解并统筹安排、跟进，协调处理项目交付过程中遇到的各种问题，确保项目按照计划有条不紊的完成交付 |   |\n| 3 | 高翔 | 产品经理 | 负责项目软件部分交付，包括软件现场调研、需求分析汇总确认、原型设计、大数据局需求对接等 |   |\n| 4 | 李义 | 技术经理 | 负责项目软件系统的设计、开发、测试、上线工作，并根据项目要求提供项目软件相关的文档和过程提交物 |   |\n| 5 | 杨湘英 | 测试组长 | 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |   |\n| 6 | 谭伟国 | 现场实施组长 | 硬件实施前的施工现场勘测、调研和确认工作； 完成项目现场硬件部分的实施和调试工作； 负责现场施工人员的安全教育、技术交底和安全管理工作。 配合完成项目硬件设备的测试、测评工作。 |   |\n| 7 | 李纯福 | 硬件工程师 | 1）智能硬件实施前的施工现场勘测、调研和确认工作； 2）完成项目现场智能硬件部分的实施工作及相关提交物的编制工作； 3）配合完成项目智能硬件设备的测试、测评工作。 |   |\n| 8 | 吉良 | 网络工程师 | 1）网络实施前的施工现场勘测、调研和确认工作； 2）完成项目现场网络部分的实施工作及相关提交物的编制工作； 3）配合完成项目网络设备的测试、测评工作。 |   |\n\n# \n# 项目进度计划\n## 项目阶段定义\n在项目的交付过程中，为了更好的对项目过程进行监控和管理，确保项目即使发生了偏差，也能通过赶工或其他调整手段来弥补项目偏差，确保项目的及时交付。长沙市机关事务管理局智慧后勤服务管理平台项目属于综合型系统集成项目，在一般项目的实施过程中，我们习惯于将项目分成以下阶段执行：\n- 项目准备阶段；\n- 项目规划阶段；\n- 项目执行阶段；\n- 项目收尾阶段。\n## 项目交付周期\n长沙市机关事务管理局智慧后勤服务管理平台项目交付周期：自项目合同签订完成后<u>四</u><u>个月内</u>达到初步验收条件。\n## 项目里程碑计划\n| 序号 | 里程碑 | 计划开始时间 | 计划结束时间 |\n| :---: | :---: | :---: | :---: |\n| 1 | 项目启动 | 2022年12月27日 | 2022年12月29日 |\n| 2 | 现场勘测 | 2022年12月28日 | 2022年12月30日 |\n| 3 | 需求调研 | 2022年12月28日 | 2023年02月17日 |\n| 4 | 项目采购 | 2022年12月27日 | 2023年01月18日 |\n| 5 | 硬件实施、单体调试 | 2023年01月05日 | 2023年02月22日 |\n| 6 | 系统开发 | 2023年01月05日 | 2023年03月15日 |\n| 7 | 系统对接 | 2023年01月20日 | 2023年02月13日 |\n| 8 | 软件测试 | 2023年02月27日 | 2023年03月23日 |\n| 9 | 系统联调测试 | 2023年03月21日 | 2023年03月29日 |\n| 10 | 项目收尾及初步验收 | 2023年03月30日 | 2023年04月27日 |\n## 项目详细计划\n| 序号 | 任务名称 | 开始时间 | 完成时间 |\n| :---: | :---: | :---: | :---: |\n| 1 | 长沙市智慧机关项目 | 2022年12月27日 | 2023年4月27日 |\n| 2 | 项目启动 | 2022年12月27日 | 2022年12月29日 |\n| 3 | 项目进度计划（初步计划） | 2022年12月27日 | 2022年12月27日 |\n| 4 | 项目人力资源计划 | 2022年12月28日 | 2022年12月28日 |\n| 5 | 项目成本预算 | 2022年12月29日 | 2022年12月29日 |\n| 6 | 项目执行 | 2022年12月27日 | 2023年3月29日 |\n| 7 | 现场勘测调研 | 2022年12月28日 | 2022年12月30日 |\n| 8 | 现场勘测 | 2022年12月28日 | 2022年12月28日 |\n| 9 | 勘测调研报告 | 2022年12月29日 | 2022年12月29日 |\n| 10 | 勘测出图 | 2022年12月30日 | 2022年12月30日 |\n| 11 | 项目采购 | 2022年12月27日 | 2023年1月18日 |\n| 12 | 项目采购计划 | 2023年1月2日 | 2023年1月4日 |\n| 13 | 机房硬件采购 | 2023年1月5日 | 2023年1月18日 |\n| 14 | 采购备货 | 2023年1月5日 | 2023年1月5日 |\n| 15 | 货物运输 | 2023年1月6日 | 2023年1月16日 |\n| 16 | 设备报验 | 2023年1月17日 | 2023年1月17日 |\n| 17 | 到货验收 | 2023年1月18日 | 2023年1月18日 |\n| 18 | 测试硬件采购 | 2022年12月27日 | 2023年1月4日 |\n| 19 | 终端设备批量采购 | 2023年1月5日 | 2023年1月18日 |\n| 20 | 采购备货 | 2023年1月5日 | 2023年1月5日 |\n| 21 | 货物运输 | 2023年1月6日 | 2023年1月16日 |\n| 22 | 设备报验 | 2023年1月17日 | 2023年1月17日 |\n| 23 | 到货验收 | 2023年1月18日 | 2023年1月18日 |\n| 24 | 项目现场启动会 | 2022年12月28日 | 2022年12月30日 |\n| 25 | 实施交付入场 | 2022年12月28日 | 2022年12月28日 |\n| 26 | 会议材料准备 | 2022年12月29日 | 2022年12月29日 |\n| 27 | 开踢会议（Kick-off Meeting） | 2022年12月30日 | 2022年12月30日 |\n| 28 | 软件需求调研分析 | 2022年12月28日 | 2023年2月17日 |\n| 29 | 需求调研 | 2022年12月28日 | 2023年2月17日 |\n| 30 | 第一阶段调研结果整理 | 2022年12月28日 | 2022年12月28日 |\n| 31 | 现有系统开发情况整理 | 2022年12月28日 | 2022年12月28日 |\n| 32 | 需求调研计划 | 2022年12月29日 | 2022年12月29日 |\n| 33 | 第二次需求调研 | 2022年12月30日 | 2023年1月19日 |\n| 34 | 原型设计与调整 | 2023年1月3日 | 2023年1月23日 |\n| 35 | 需求规格说明书 | 2023年1月24日 | 2023年2月15日 |\n| 36 | 需求评审 | 2023年2月16日 | 2023年2月17日 |\n| 37 | 外部系统对接 | 2022年12月28日 | 2023年2月13日 |\n| 38 | 客户沟通 | 2022年12月28日 | 2023年1月19日 |\n| 39 | 外部系统对接调研表 | 2022年12月28日 | 2022年12月30日 |\n| 40 | 对接系统具体情况调研 | 2023年1月17日 | 2023年1月19日 |\n| 41 | 系统对接（厂商对接） | 2023年1月20日 | 2023年2月13日 |\n| 42 | 对接需求明确（基于各对接系统） | 2023年1月20日 | 2023年2月9日 |\n| 43 | 双方确认对接技术方案 | 2023年1月24日 | 2023年2月13日 |\n| 44 | 系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 45 | 应用系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 46 | 系统开发 | 2023年1月5日 | 2023年3月15日 |\n| 47 | 硬件对接 | 2023年1月5日 | 2023年1月12日 |\n| 48 | 对接开发调整 | 2023年1月5日 | 2023年1月11日 |\n| 49 | 对接调试 | 2023年1月6日 | 2023年1月12日 |\n| 50 | 外部系统对接 | 2023年2月14日 | 2023年3月8日 |\n| 51 | 系统对接开发 | 2023年2月14日 | 2023年3月6日 |\n| 52 | 对接调试 | 2023年2月16日 | 2023年3月8日 |\n| 53 | 软件测试 | 2023年2月27日 | 2023年3月23日 |\n| 54 | 功能性测试 | 2023年2月27日 | 2023年3月17日 |\n| 55 | 第一次BUG修复 | 2023年3月13日 | 2023年3月21日 |\n| 56 | 系统回归测试 | 2023年3月15日 | 2023年3月23日 |\n| 57 | 硬件以及基础环境实施 | 2023年1月19日 | 2023年2月22日 |\n| 58 | 机房环境实施 | 2023年1月19日 | 2023年1月25日 |\n| 59 | 硬件实施 | 2023年1月19日 | 2023年2月22日 |\n| 60 | 终端实施方案 | 2023年1月19日 | 2023年1月20日 |\n| 61 | 实施申请（甲方、物业、监理、保卫、消防） | 2023年1月23日 | 2023年1月25日 |\n| 62 | 硬件施工 | 2023年1月26日 | 2023年2月22日 |\n| 63 | 软件系统实施部署 | 2023年1月26日 | 2023年3月20日 |\n| 64 | 运行环境实施准备 | 2023年1月26日 | 2023年1月26日 |\n| 65 | 运行环境实施 | 2023年1月26日 | 2023年1月26日 |\n| 66 | 软件部署 | 2023年3月20日 | 2023年3月20日 |\n| 67 | 整体联调测试 | 2023年3月21日 | 2023年3月29日 |\n| 68 | 系统联调测试 | 2023年3月21日 | 2023年3月29日 |\n| 69 | 项目收尾 | 2023年3月30日 | 2023年4月27日 |\n| 70 | 项目培训 | 2023年3月30日 | 2023年4月19日 |\n| 71 | 项目培训方案 | 2023年3月30日 | 2023年3月31日 |\n| 72 | 培训资料准备 | 2023年4月3日 | 2023年4月7日 |\n| 73 | 实施培训 | 2023年4月10日 | 2023年4月19日 |\n| 74 | 项目初验 | 2023年4月21日 | 2023年4月27日 |\n\n## 进度保障措施\n### 进度保障概述\n在项目执行和管理的过程当中，因为不确定性以及渐进明细是项目的主要特性之一，长沙市机关事务管理局智慧后勤服务管理平台建设项目是一个综合型多系统相对负责的综合型系统集成项目，包括网络系统的建设、云平台的应用、新旧网络的融合、视频监控系统建设、智能交通建设、智慧后勤系统建设以及移动应用的建设等等，项目在执行交付过程中需要跨部门、跨单位多系统的协调和集成。项目要求在较短的实施周期内完成交付，从项目管理的角度来分析，项目的风险以及资源投入都将增加，为了保证项目进度以及项目的质量，特制定以下的项目进度保障。\n### 明确建设范围\n项目进度计划是项目管理计划的核心内容之一，也是指导整个项目进行的主要计划之一，项目计划的科学制定，是项目能确保进度的主要措施之一。\n项目进度的制定依赖于项目的建设范围，所以，在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n### 工作分解结构（WBS）\nWBS是项目进度计划制定的基础，WBS：工作分解结构是指将项目的交付成果以及完成相应成果所需要的工作进行分解，分解到40小时左右的工作包。WBS的分解遵循相应的规则：\n- 100%包含：分支上下100%包含；\n- 不可再分：最底层状态相对独立不可再分；\n- 信息透明：分解到可以充分估算完成该成果所需的时间、费用、资源等；\n- 独立责任：分解到可安排一个责任者；\n- 滚动规划：远期工作可暂时不分解。\n项目工作分解结构应包含项目所有必须交付的成果以及完成相关交付内容所需要做的工作。即WBS应能体现本项目所有的交付物与相应的工作。\n同时WBS也是整个项目管理过程的核心，项目经理通过WBS完成项目进度计划的制定，也需要通过WBS进行项目风险分析。项目的人力资源计划、项目人力成本估算均可以通过项目WBS来完成。\n### 制定进度计划\n在WBS的基础上，结合长沙市机关事务管理局智慧后勤服务管理平台建设项目的实际要求，通过排列活动顺序、估算活动持续时间、估算活动资源等动作完成项目进度计划的制定。\n在长沙市机关事务管理局智慧后勤服务管理平台建设项目中，根据项目实际情况采取倒推的方式进行进度计划的制定，在项目活动持续时间估算的过程中，先设定具体的交付和验收要求时间点，再逐步反推到项目各个阶段，相对合理的进行各个阶段时间的分配，再在各个阶段内进行各个活动时间的分配，最终根据各活动的紧前关系来评估计划的可行性和具体的资源需求以及资源冲突的可能性。\n### 实施进度控制\n在项目执行交付的过程中，本项目安排项目经理进行项目的全生命周期管理，在项目管理和监控过程中，控制进度是监控事项中的重点内容之一，控制进度的目标就是确保项目进度与项目计划之间的偏差尽量小。\n为了确保项目进度计划，项目经理乃至项目组需要进行包括但不限于下列事项的：\n- 项目执行过程中，尽量确保按照项目资源计划为项目提供相关的项目资源，以确保项目进度；\n- 制定明确的项目进度计划，确保项目按照计划执行，在项目执行过程中，应根据项目实际情况执行可落地执行的项目进度计划，并严格按照项目进度计划所规划的时间来约束项目进度，确保项目有明确的时间进度要求；\n- 明确项目采购计划，确保项目各个阶段的到货是按采购计划执行的；\n- 采取多项工作并行处理的方式，在本项目的执行过程中，因为项目的复杂性，有较多的工作是可以并行进行处理的，在项目执行过程中应尽量将能够并行处理的工作进行并行处理，确保项目进度；\n- 提前进行项目风险识别和评估，并制定风险应对措施，通过科学的风险应对确保项目进度；\n- 阶段性的进行项目进度检查，通过偏差分析，明确项目状态，并通过增加资源或成本的方式来确保进度计划，例如通过短期的赶工来确保项目进度；\n- 当项目进度确实出现较大偏差并无法纠正时，应及时的组织项目会议对项目进度计划进行调整，确保后续阶段的项目可控。\n# \n# 项目交付实施\n## 项目交付模型\n\n图 项目交付管理模型\n综合分析长沙市机关事务管理局智慧后勤服务管理平台项目的实际情况，在项目交付管理过程中，将项目根据项目具体工作大致分为四个阶段，即项目启动阶段、项目规划阶段、项目执行阶段、项目收尾阶段。项目经理根据项目阶段划分情况以及各项工作划分情况进行工作分解，并制定项目进度计划。\n## 项目启动阶段\n项目启动阶段是指项目中标至项目正式入场的阶段，本阶段的主要工作是签订商务合同、完成项目团队的组建、召开项目启动会、完成项目开工申请等主要工作。该阶段也是项目的准备阶段。\n### 项目团队组建\n在项目招投标中标后，我方将根据长沙市机关事务管理局智慧后勤服务管理平台项目的特性委派合适的项目经理负责该项目的项目交付管理。\n完成项目经理指派后，在公司内容完成项目的正式启动，并根据项目要求完成我方项目交付团队的组建。长沙市机关事务管理局智慧后勤服务管理平台项目属于综合型系统集成项目，该类型的项目，除具备综合型系统集成项目管理能力的项目经理以外，我方还将配备商务经理、售前经理、硬件产品经理、软件系统产品经理、软件系统技术经理以及开发团队、项目实施团队与项目运行维护团队参与项目的建设，根据项目不同阶段对人员的要求逐步进入或释放。\n项目团队组建完成后，召开项目内部启动会，通过项目内部启动会完成项目售前至项目售后的知识转移工作。\n同时，公司PMO（项目管理办公室）发布项目经理授权书以及项目团队组建通知。\n### 项目商务合同\n根据相关要求，在项目中标后一个月内需要完成项目《商务合同》的签订，我方将委派专门的商务经理负责该项目的商务合同签订事宜。确保在项目启动采购之前，完成项目商务合同的签订。\n### 项目启动会\n项目团队在正式入场前与建设单位、监理单位等一起召开项目启动会，项目启动会的主要作用包括以下几个方面：\n- 项目沟通机制的建立，通过项目启动会完成项目团队之间沟通机制的建立，包括项目例会制度、项目决策机制、周报要求等。\n- 项目里程碑计划的发布，在本次会议上，项目经理根据对项目情况的理解，制定基本的交付模式与里程碑计划，该里程碑计划也作为项目交付进度计划制定的基础。\n- 部分项目风险应对措施的制定，在项目启动会上，会议各方可根据项目实际情况提出在本阶段识别到的项目风险，并共同制定相应的应对措施和计划。\n- 宣布项目正式启动，近期工作的安排与计划。\n### 项目开工申请\n项目正式启动后，存在监理的情况下，项目经理需要申请《项目开工令》方可正式开工。一般情况下，项目经理根据项目具体情况编写《项目施工组织设计方案》，填写监理方提供的施工组织报验申请，监理方、建设单位评审后，签署开工令，项目正式开工。\n主要工作包括：\n- 编制项目施工组织设计方案；\n- 编制开工申请；\n- 监理方、建设单位下达项目开工令。\n### 项目其他准备\n在项目开工令申请过程中，项目经理根据项目近期工作安排情况做好项目入场准备。包括近期人员的入场协调与准备、办公场所以及环境的申请、近期详细工作计划安排等。\n## 项目规划阶段\n### 勘测调研\n项目正式启动后，项目人员入场，项目经理应根据项目建设内容组织项目现场的勘测调研工作。调研工作包括但不限于以下工作内容：\n- 编制项目勘测调研方案；\n- 根据勘测计划对项目现场进行勘测调研；\n- 编制调研报告。\n勘测调研内容根据项目建设内容的不同而不同，包括但不限于：\n- 本地机房物理环境以及基础环境调研；\n- 市政府大院网络情况调研；\n- 机关事务管理局业务情况以及软件系统需求调研；\n- 需要对接的外部系统情况调研；\n- AI视频监控系统实施环境调研以及点位确认；\n- 智慧交通系统实施环境调研以及点位确认；\n- 智能终端实施部署环境调研以及点位确认；\n- 其他用户需求调研。\n因为软件系统需求调研的工作可能持续一个较长的时间，在项目执行的过程中，我方将组建项目需求组（产品组）对长沙市机关事务管理局业务以及本次项目建设内容相关的业务进行。\n### 范围确认\n项目勘测调研工作完成后，项目经理组织项目团队对长沙市机关事务管理局智慧后勤服务管理平台项目范围进行辨识和确认。项目经理以及项目团队应根据项目前期的文档资料、现场勘测调研、客户座谈等方式收集到完整的项目需求后，完成《项目范围说明书》、《项目需求说明书》的编制。明确项目范围，并协调建设单位、监理方对项目范围达成共识。\n项目范围的明确，基本明确了项目的建设内容，也为项目目标的达成提供了建设基础。\n### 深化设计\n长沙市机关事务管理局智慧后勤服务管理平台项目属于一个综合型系统集成项目，项目涉及到的范围以及建设内容都比较广。在项目范围确认工作基本完成后，需要同步开展项目深化设计工作。深化设计工作包括两个部分，一部分是项目软件系统开发部分，需要在需求调研和需求分析的基础上开展软件系统的设计工作。另一方面是项目AI视频监控系统以及职能交通以及项目职能终端实施部分需要进行深化设计，包括具体实施点位的明确、综合布线的方式、施工的工序和安排等。\n同时，考虑项目前期设计与项目实际情况的偏差，项目往往会产生相应的变更，在深化设计的过程中，通过深化设计以及客户实际需求的情况提起项目变更，并通过设计评审过程完成变更的确认和评审。\n深化设计工作主要是基于项目前期的技术方案、现场勘测调研情况、项目前期变更要求等情况对项目设计方案（技术方案）进行调整、落地的过程。\n在项目交付过程中，基于项目交付要求，在对项目实际情况有一个全面系统了解后，明确项目实际需求，项目经理组织项目组成员对项目的技术方案进行再次进行梳理和编制，并根据项目的实际情况，落地项目的设计方案和技术方案，并确保方案的可执行。\n对于因为项目实际情况而导致项目设计方案发生变化时，项目经理应根据项目情况启动变更流程。\n设计方案包括但不限于：\n- 深化设计方案编制；\n- 提起变更；\n- 深化设计方案评审；\n- 基于评审意见的修订。\n### 实施方案\n项目实施方案是基于项目设计和项目管理计划正式启动项目实施的开始，项目经理组织项目团队对如何完成项目交付进行具体的规划，并形成相应的方案。长沙市机关事务管理局智慧后勤服务管理平台项目的实施方案应包括以下相关的内容：\n- 项目实施范围；\n- 项目工作目标分解结构；\n- 项目整体进度计划；\n- 项目人力资源规划；\n- 项目采购规划；\n- 项目本地机房实施规划；\n- 政务云环境实施规划；\n- 软件系统开发和实施规划；\n- 智能交通系统实施规划；\n- AI视频监控系统实施规划；\n- 项目系统对接融合实施规划；\n- 项目系统信创适配实施规划；\n- 项目安全等级保护测评实施规划；\n- 项目测试以及整体调整实施规划；\n- 项目运行维护规划；\n- 其他项目管理规划。\n## 项目执行阶段\n### 项目采购\n在项目规划工作进行过程中或者完成后，项目应进入实际执行，基于本项目的实际情况，为了确保项目进度，项目的实际执行工作与项目规划工作是以并行的方式进行。\n长沙市机关事务管理局智慧后勤服务管理平台项目中有较大数量的硬件设备以及终端的采购，相关设备的采购和到货直接影响到项目的实际交付。\n在项目合同签订完成后，我方即安排项目经理启动项目采购工作，公司供应链部门开始进行项目备货工作。在项目深化设计完成后，基本项目所有变更都审批完成，项目经理即开始采购。在本阶段主要工作包括：\n- 项目经理编制项目采购计划；\n- 相关计划报建设单位与监理单位，审批通过后执行。\n- 项目经理根据项目采购计划发起采购；\n- 项目经理根据项目采购情况跟踪项目到货情况。\n项目采购工作是一个相对持续的过程，在长沙市机关事务管理局智慧后勤服务管理平台项目中，项目采购工作将根据项目进度的推进和项目的实际需求完成项目备货、采购工作。\n### 到货验收\n项目经理指派具体的负责人全面负责本项目的到货验收工作。具体负责人根据项目采购计划对产品交付的时间、地点、方式以及其他条件事先完成到货规划，并提前与建设单位以及监理方进行沟通和确认，最后完成到货验收工作。\n在项目实际到货前，项目经理提前与监理单位进行到货报验。到货验收完成后，由参与到货验收的各方共同签署到货验收报告。\n到货验收方案包括但不限于：\n- 到货验收时间、地点、方式的确认；\n- 货物现场验收；\n- 完成货物入库清点；\n- 到货验收报告签署。\n对于因其他原因无法在到货现场完成到货验收的情况，项目经理在现场完成到货自检，入库清点后，再协调监理单位与建设单位共同参与到货验收。\n考虑集中到货的情况，在本项目执行过程中，项目经理将提前与机关事务管理局申请相应的设备库房，并做好设备出入库工作，以确保项目设备的安全。\n### 实施准备\n基于长沙市机关事务管理局智慧后勤服务管理平台项目的实际情况，实施准备工作非常重要，在项目正式启动实施工作之前，为了确保项目实施工作的顺利进行，同时也是在实施过程中为了确保项目实施工作不影响机关事务局以及市政府相关单位的正常办公与工作。\n相关准备工作包括：\n#### **环境考察确认**\n- 本地机房环境空间情况确认，包括但不限于机房位置、机柜空间等；\n- 基础环境强电情况确认，包括但不限于强电布线、接入条件、功率等；\n- 基础环境弱电情况确认，包括相关设备部署点位的网络情况、机房网络情况等；\n- 考虑网络系统的建设和网络改造以及物联网络的建设，需要提前完成网络VLAN以及IP申请和确认等工作。\n#### **各单位协调**\n- 在本项目中，考虑各种智能终端的安装与系统接入，需要提前完成与消防、物业、安保等部门与单位的沟通和协调，必要时，应出具建设单位同意的施工申请；\n- 考虑AI监控系统与智能交通系统的实施，需要提前与物业、安保等部门进行沟通和申请，按照市政府大院的统一规划和要求进行施工准备和施工；\n- 考虑智能交通系统需要与交警系统完成对接，需要提前协调建设单位完成与交警相关部门的对接；\n- 考虑项目有十四个需要网络改造以及对接的系统，事先应提前完成与各系统分管处室或部门进行沟通，并协调相关分管处室与部门完成与各建设厂商的对接，以确保网络改造以及系统对接的顺利；\n- 根据长沙市信息化项目建设管理办法等相关方面的要求，在长沙市机关事务管理局智慧后勤服务管理平台项目的建设过程中，软件系统应完成与中枢的能力调用对接，同时需要完成与“长政通”APP以及“我的长沙”的对接，在进行对接之前，应提前协调建设单位完成与相关监管单位以及建设厂商的对接；\n- 长沙市机关事务管理局智慧后勤服务管理平台项目中有较多的视频监控点位的建设，根据建设单位的统一规划，相关监控视频应接入到统一的视频监控系统平台中，在对接前，应提前完成与该项目的提前对接；\n- 项目建设前，应提前完成项目在政务云上相关资源的申请，并对云资源环境进行提前确认；\n- 其他需要提前申请和对接的事项。\n#### **施工入场准备**\n- 现场办公环境的协调；\n- 现场仓库的申请；\n- 施工入场准备事宜，包括施工人员安全与规范教育；\n- 施工材料以及施工设备的准备；\n#### **施工时间协调**\n- 考虑项目智能空开安装过程中不能影响建设单位以及其他相关单位的正常工作，在每个办公室空开安装时，需要协调各个办公安装的具体时间，并制定相应的安装时间表，同时在设备安装完成后必须在建设单位上班前恢复办公室的卫生以及电力，避免对建设单位以及相关单位的正常工作产生影响；\n- 在项目建设过程中，提前组建运维小组，运维小组对已经建设完成的点位在处理异常时进行机动维护。\n### 硬件实施\n#### 实施内容\n硬件实施主要包括是以下几个部分的内容：\n- 智慧安全用电硬件设备安装和调试；\n- 智慧物联硬件设备安装和调试；\n- AI视频监控硬件设备安装和调试；\n- 基础网络硬件设备安装和调试；\n- 智能交通硬件设备安装和调试。\n#### **各部分的施工方案和安全管理措施****请见****硬件系统实施****章节。**\n#### 设备清单\n| 序号 | 名称 | 规格型号 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 一 | 智慧安全用电 |   |   |\n| 1 | 智慧微断开关电源 | S3-P25 | 80 |\n| 2 | 1P 智慧微断 | S3-FC20 | 584 |\n| 3 | 2P 智慧微断 | S3-ZNC32 | 50 |\n| 4 | 3P 智慧微断 | S3-TZC63 | 31 |\n| 5 | 4P 智慧微断 | S3-TNZC63 | 47 |\n| 6 | 智慧微断通信模组 | HKT-TX01 | 80 |\n| 7 | 天线 | 定制 | 80 |\n| 8 | 导轨及箱体 | 定制 | 80 |\n| 二 | 智慧物联 |   |   |\n| 1 | 门磁传感器 | HKT-DMS01 | 115 |\n| 2 | 出入人体识别传感器 | HKT-IRC01 | 68 |\n| 3 | 多功能环境质量监测传感器 | HKT-HJC01 | 50 |\n| 4 | 温湿度传感器 | HKT-TH31 | 50 |\n| 5 | 喷淋管道压力传感器 | HKT-YL100 | 62 |\n| 6 | 水位监测传感器 | HKT-SW100 | 18 |\n| 7 | 室内消防栓压力监测传感器 | HKT-YL100 | 62 |\n| 8 | 消防主机数据采集和传输边缘计算终端 | F-ITD100-L | 2 |\n| 9 | 通信接口板卡 | F-PRC100 | 2 |\n| 10 | 室内消防栓消防阀门 | SN65-Y | 62 |\n| 11 | LoRa核心网络平台 | HKT-NS | 1 |\n| 12 | 物联网网关 | HKTGW-100 | 67 |\n| 三 | AI视频监控 |   |   |\n| 1 | 高空全景感知单元 | iDS-2VPE13-A845-ZFQM | 1 |\n| 2 | 高空全景感知单元-支架 | DS-1603ZJ-P | 1 |\n| 3 | 动火离人热成像 | DS-2TD1217T-2/PA/QM | 10 |\n| 4 | 明厨亮灶专用感知单元 | DS-2XA8225F-LZQ/MJ | 10 |\n| 5 | 明厨亮灶专用感知单元支架 | DS-1292ZJ | 10 |\n| 6 | 明厨亮灶显示屏 | DS-D5055UL-B | 4 |\n| 7 | 明厨亮灶显示屏支架 | 常规壁挂支架-3255-WA1-TS | 4 |\n| 8 | 明厨亮灶解码器 | DS-6901UD | 4 |\n| 9 | 智能警戒检测单元 | DS-2CD7347QMD-LZS(3.3-9mm)(B)(白) | 2 |\n| 10 | 客流统计智能单元 | DS-2XD8846/C-IW | 4 |\n| 11 | 客流统计智能单元支架 | DS-1227ZJ-P4 | 4 |\n| 12 | AI 开放平台系列摄像机 | DS-2XA8247F-IZS(B) | 1 |\n| 13 | 网络存储设备 | DS-A81016S（单电） | 2 |\n| 14 | 服务器 | 信创产品，XC-FF21C-B12（3671） | 2 |\n| 四 | 基础网络建设 |   |   |\n| 1 | 核心交换机 | S7706 | 2 |\n| 2 | 48 端口电接口板 | ES1M2G48TX5S | 2 |\n| 3 | 48 端口光接口板 | LSS7G48SX6S0 | 2 |\n| 4 | 集群业务子卡 | ES02VSTSA | 4 |\n| 5 | 光模块 | SFP-GE-LX-SM1310 | 36 |\n| 6 | 高速电缆 | QSFP-40G-CU3M | 8 |\n| 7 | 8口POE交换机 | TL-SG2210P | 13 |\n| 8 | 16 口百兆交换机 | TL-SG2016D | 1 |\n| 9 | 16 口百兆POE交换机 | TL-SL1218MP | 1 |\n| 10 | 24口千兆交换机 | S5735S-L24T4S-AQ2 | 1 |\n| 11 | UPS 主机 | UPS2000-G-15KRTL | 1 |\n| 12 | 电池 | 12V100AH | 16 |\n| 13 | 电池柜 | 国标 | 1 |\n| 14 | 机柜 | G28242 | 1 |\n| 五 | 智能交通 |   |   |\n| 1 | 视频融合平台一体机 | DH-DSS-T9100D-SZCQ | 1 |\n| 2 | 视频融合平台硬件务器 | 信创产品，DH-DSS-T9100D-HW/10000 | 2 |\n| 3 | 网络存储服务器 | DH-EVS5248S | 1 |\n| 4 | 硬盘 | ST6000NM021A | 48 |\n| 5 | 管理终端电脑 | 信创产品，XC-P421P/V2(256G+24+Kylin)(ZY+SMI) | 1 |\n| 6 | 液晶监视屏 | DH-LM86-S400 | 1 |\n| 7 | 核心交换机 | S7003X | 1 |\n| 8 | 800万全景AR网络摄像机 | DH-PSDW82449M-AAZYQ | 3 |\n| 9 | 高空瞭望球机 | DH-SD-8C3840-CQ | 2 |\n| 10 | 42U 机柜、机架 | G28242 | 1 |\n| 11 | 400 万星光级红外AI智慧网络球机 | DH-SDT-5X2437-SZFCQ | 15 |\n| 12 | 400万全结构化卡口摄像机 | DH-CP435-CQZYQ | 40 |\n| 13 | 补光灯 | DH-ITALE-060AA-CW3530 | 40 |\n| 14 | 交换机 | S5737-L24T4S-QA2 | 4 |\n| 15 | 光模块 | SFP-GE-LX-SM1310 | 8 |\n| 六 | 安装费用 |   |   |\n| 1 | 原电箱拆除 | 现场施工 | 80 |\n| 2 | 箱体安装 | 现场施工 | 80 |\n| 3 | 新装电箱墙面开槽及恢复 | 现场施工 | 80 |\n| 4 | 1P 智慧微断安装 | 现场施工 | 584 |\n| 5 | 2P 智慧微断安装 | 现场施工 | 50 |\n| 6 | 3P、4P 智慧微断安装 | 现场施工 | 78 |\n| 7 | 电源模组安装 | 现场施工 | 80 |\n| 8 | 通信模组安装 | 现场施工 | 80 |\n| 9 | 天线安装 | 现场施工 | 80 |\n| 10 | 物联网传感器安装 | 现场施工 | 160 |\n| 11 | 高空全景感知单元安装 | 现场施工 | 1 |\n| 12 | 动火离人热成像安装 | 现场施工 | 10 |\n| 13 | 明厨亮灶专用感知单元安装 | 现场施工 | 10 |\n| 14 | 明厨亮灶显示屏安装 | 现场施工 | 4 |\n| 15 | 明厨亮灶解码器安装 | 现场施工 | 4 |\n| 16 | 智能警戒检测单元安装 | 现场施工 | 2 |\n| 17 | 客流统计智能单元安装 | 现场施工 | 4 |\n| 18 | AI 开放平台系列摄像机安装 | 现场施工 | 1 |\n| 19 | 服务器安装 | 现场施工 | 2 |\n| 20 | 挖沟槽土方 | 现场施工 | 94.62 |\n| 21 | 回填方 | 现场施工 | 94.62 |\n| 22 | 混凝土构建拆除 | 现场施工 | 0.2 |\n| 23 | C20水泥混凝土路面恢复 | 现场施工 | 0.2 |\n| 24 | 整理绿化用地 | 现场施工 | 400 |\n| 25 | 视频监控系统 | 现场施工 | 1 |\n| 26 | 物联网传感器安装 | 现场施工 | 265 |\n| 27 | 消防主机控制器联网改造 | 现场施工 | 2 |\n| 28 | 室内消防栓阀门改造 | 现场施工 | 62 |\n| 29 | 物联网网关安装 | 现场施工 | 67 |\n| 30 | 防火墙安装 | 现场施工 | 2 |\n| 31 | 交换机安装 | 现场施工 | 18 |\n| 32 | UPS系统安装 | 现场施工 | 1 |\n| 33 | 4芯光缆 | GYTA 4 G652D | 11707 |\n| 34 | 12芯光缆 | GYTA 12 G652D | 5957 |\n| 35 | 24芯光缆 | GYTA 24 G652D | 2334 |\n| 36 | 网线 | 六类网线 | 7532 |\n| 37 | 配管DN20 | 联塑 DN20 | 3392 |\n| 38 | 电线RVV3*1.5mm2 | RVV3*1.5mm2 | 2539 |\n| 39 | 72芯光纤配线架 | Hbodier 72 空箱 | 4 |\n| 40 | 光纤终端盒安装 | 国标 | 6 |\n| 41 | 光纤熔接安装 | 现场施工 | 200 |\n| 42 | 光纤测试 | 现场施工 | 1 |\n| 43 | 综合设备箱 500*400*200mm | 定制 | 11 |\n| 44 | 综合设备箱 330*480*135mm | 定制 | 13 |\n| 45 | 混凝土构建拆除 | 现场施工 | 2 |\n| 46 | C20水泥混凝土路面恢复 | 现场施工 | 2 |\n| 47 | 整理绿化用地 | 现场施工 | 624 |\n| 48 | 室外设备机柜 | 定制 | 4 |\n| 49 | 室外设备箱560*210 | 300*400，定制 | 47 |\n| 50 | 光纤收发器(1光1电) | FC311A-3+FC311B-3 | 16 |\n| 51 | 光纤收发器(1光2电) | FC311A-3+FC314B-3 | 8 |\n| 52 | 光纤收发器(1光4电) | FC311A-3+FC314B-3 | 8 |\n| 53 | 光纤收发器机架 | TL-FC1400 | 5 |\n| 54 | 避雷器 | 绿联80740 | 42 |\n| 55 | 配线YJV3*6mm2 | YJV3*6mm2 | 2730 |\n| 56 | 配线RVV3*2.5 | RVV3*2.5 | 3917 |\n| 57 | 配管DN32 | 联塑 DN32 | 126 |\n| 58 | 室外立杆安装 | 定制 | 42 |\n| 59 | 光纤熔接安装 | 现场施工 | 200 |\n| 60 | 混凝土构建拆除 | 现场施工 | 4 |\n| 61 | C20水泥混凝土路面恢复 | 现场施工 | 4 |\n| 62 | 整理绿化用地 | 现场施工 | 400 |\n| 63 | 监控系统摄像头安装 | 现场施工 | 60 |\n| 64 | 智能交通系统 | 现场施工 | 1 |\n| 65 | 人脸识别门禁系统 | 现场施工 | 10 |\n| 66 | 停车道闸系统 | 现场施工 | 7 |\n| 67 | 长沙银行一卡通系统 | 现场施工 | 1 |\n| 68 | 视频监控系统 | 现场施工 | 1 |\n| 69 | 巡更系统 | 现场施工 | 1 |\n| 70 | 脚手架搭拆费 | 现场施工 | 1 |\n| 71 | PVC管 20mm | 联塑DN20 | 8087 |\n| 72 | PE管 20mm | 联塑DN20 | 113 |\n| 73 | 辅材 | 国标 | 1 |\n\n### 软件系统实施\n长沙市机关事务管理局智慧后勤服务管理平台项目软件系统实施工作采取软件工程通用的交付模式。\n#### 交付模型\n\n图 软件系统实施模型\n#### 需求分析\n##### 需求分析过程\n项目经理根据合同要求组织进行项目软件建设需求调研工作，包括以下工作内容：\n- 需求调研；\n- 需求分析；\n- 需求规格说明书；\n- 需求规格说明书评审；\n- 需求规格说明书修订。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 需求调研 | 《需求调研方案》 《需求调研报告》 | 项目经理、开发组 |\n| 需求分析 | 《需求规格说明书》 | 项目经理、开发组 |\n| 需求评审 | 《需求规格说明书》 | 项目经理、开发组 |\n\n软件系统的需求调研应该以项目前期知识为基础，包括技术方案、招投标文件、售前方案等。通过对前期需求整理完成后，并以此为基础开展需求的调研和确认工作。为了避免沟通过程中的噪声以及与建设方达成对目标系统的共识，应在需求整理完成后和用户进行需求的确认以及评审。\n##### 需求规格说明书\n需求规格说明书是需求分析阶段的主要成果，在需求分析过程中，提交物包括但不限于：\n- 需求调研大纲；\n- 需求调研方案；\n- 需求调研记录；\n- 需求调研报告；\n- 系统原型设计；\n- 需求规格说明书。\n需求规格说明书中应从长沙市机关事务管理局具体的业务开始进行分析，文档包括但不限于：\n- 项目背景介绍；\n- 项目建设的内容和目标；\n- 项目建设方和相关业务的现状分析、问题描述；\n- 项目用户方组织架构分析；\n- 项目建设单位业务需求分析，包括对各个业务的描述、业务流程（绘图）、业务承担的部门或者职位等；\n- 项目功能需求分析。项目功能需求分析是指从业务需求到功能需求的一个转换过程，文档要求完成从业务到功能的整体规划（功能架构）、功能模块规划、功能点规划、功能用例图、用例、界面原型、交互设计、数据项设计；\n- 需求追踪矩阵，包括横向需求追踪矩阵和纵向追踪矩阵。\n##### 需求确认与评审\n需求规格规格说明书完成后，项目经理将提起需求评审专题会议，根据项目情况由建设方或监理方组织项目需求评审会议，需求提出方或者相关专家组是项目需求评审会议的主要参会人员。项目经理准备需求评审材料，包括需求规格说明书、讲演PPT等。\n需求评审完成后，由评审组提出评审意见，对需求规格说明书调整后，由评审各方签订。\n评审通过的需求规格说明书将作为本项目软件系统验收的主要标准之一。\n#### 系统设计\n项目经理组织项目团队在需求分析的基础上进行系统设计工作，包括以下工作内容：\n- 系统概要设计；\n- 系统详细设计；\n- 系统设计评审。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统概要设计 | 《系统概要设计说明书》 | 项目经理、开发组 |\n| 系统详细设计 | 《系统详细设计说明书》 | 项目经理、开发组 |\n| 系统设计评审 | 《系统详细设计说明书》 | 项目经理、开发组 |\n#### 系统开发\n在系统设计通过的基础上，项目经理组织项目组成员完成项目软件开发过程，具体工作内容如下：\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统开发 | 项目软件 | 项目经理、开发组 |\n#### 集成融合\n长沙市机关事务管理局智慧后勤服务管理平台项目作为一个综合型系统集成项目，项目建设过程中有大量的项目系统集成融合与系统对接事项，具体包括：\n- 智慧后勤管理平台与十四个已建系统的对接；\n- 智慧后勤管理平台对能力中枢中部分共性能力的调用；\n- 智慧后勤管理平台移动端应用嵌入“长政通”APP；\n- 智慧后勤管理平台移动端应用嵌入“我的长沙”公众号；\n- 智慧后勤管理平台监控视频接入视频统一融合平台。\n#### 系统测试\n在研发过程中以及研发工作基本结束后，项目组对软件进行测试，测试过程的具体工作内容如下：\n- 项目软件系统测试；\n- 系统内部集成测试；\n- 外部系统集成测试；\n- 移动端融合测试；\n- 视频数据传输调试；\n- 数据资源共享测试。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 单元测试 | 《测试报告》 | 测试组长 |\n| 压力测试 | 《测试方案》 《测试报告》 | 测试组长 |\n| 性能测试 | 《测试方案》 《测试报告》 | 测试组长 |\n| 整体测试 | 《测试方案》 《测试报告》 | 测试组长 |\n上线部署\n系统整体测试完成后，项目组根据项目要求，将软件系统部署在建设方指定的基础环境中，并按找项目软件要求完成项目软件的启动和部署后的测试。测试完成满足要求后，宣布系统正式上线。\n长沙市机关事务管理局智慧后勤服务管理平台项目系统部署分为两个部分：\n- 智慧后勤系统平台在政务云上的部署；\n- 在本地资源上系统的部署。\n具体工作内容包括但不限于：\n- 系统上线方案；\n- 系统上线准备；\n- 系统上线申请；\n- 系统上线执行；\n- 系统上线报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 系统上线准备 | 《系统上线方案》 | 项目经理、开发组 |\n| 系统部署 | 《软件系统部署报告》 | 项目经理、开发组 |\n| 系统上线 | 《系统上线报告》 | 项目经理、开发组 |\n#### 用户测试\n在系统上线部署完成后，用户方队已经部署完成的系统进行测试，用户按照实际的使用情景进行测试，测试完成后，用户出具用户测试报告，项目组对测试结果中的相关问题进行确认和处理。\n长沙市机关事务管理局智慧后勤服务管理平台项目用户测试时间主要为项目试用期，系统上线完成后，在系统试用期内完成整个系统的用户测试过程。\n本阶段相关工作内容如下：\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 用户测试 | 《用户测试报告》 | 项目用户方 |\n| 问题处理 | 《用户测试问题处理报告》 | 项目经理以及项目团队成员 |\n### 集成实施\n请见项目系统集成实施章节。\n### 项目测试\n项目软硬件系统安装部署完成后，项目经理应根据项目合同要求，对项目范围内的集成系统进行集成测试，以确保集成系统的稳定性和可靠性。\n本项目包含多个内部智能终端的集成，同时也包含多个外部系统的集成，系统集成测试（系统联调）在整个项目执行过程中非常重要。\n测试前，我方测试组将制定完善的项目测试方案，测试方案应包含具体的测试范围定义、测试用例、测试时间、测试人员、测试用例数据等。\n测试方案完成后，提交项目各方进行审批，测试方案通过各方共同审批后，测试人员根据测试方案完成集成测试，并形成测试报告，由项目各方共同签署。\n测试报告将作为项目整体验收的依据之一。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| --- | :---: | :---: |\n| 制定测试方案 | 《测试方案》 《测试报告》 | 测试工程师/实施项目经理 |\n| 集成测试 | 《测试报告》（各方签署） | 测试工程师 |\n### 等保测评\n根据相关要求，长沙市机关事务管理局智慧后勤管理平台项目至少应满足等级保护二级以上的安全要求。项目等级保护是在项目设计过程中就开始进行规划，包括平台的部署环境、相关网络改造以及集成融合等各个方面。\n项目基本建设完成后，由我方编制《信息系统等级保护实施方案》，并按方案进行等级保护实施。在项目具备等保测评条件后，经项目经理提起，由建设单位申请相关机构对项目进行测评，并约定具体的测评时间。项目组应有相应的人员参与整个测评并协助完成测评相关的工作。\n测评过程中，根据测评机构反馈的相关问题和建议对信息系统进行整改，直至满足测评相关要求并通过等保测评。\n测评完成后，由测评机构出具正式的《项目信息系统等保测评报告》，并交建设方和项目组存档。\n等保测评包括但不限于：\n    - 和测评单位沟通测评工作和内容，制定测评计划，编制《信息系统等级保护实施方案》；\n    - 提起项目等保测评申请；\n    - 和建设单位、测评单位召开测评启动会议，明确测评方案和计划；\n    - 协助测评单位现场测评；\n    - 根据测评结果，反馈项目组进行整改，整改内容包括基础软硬件安全漏洞风险、应用系统安全漏洞风险等\n    - 协调测评单位复测；\n    - 根据测评结果考虑进行下一步；\n    - 和测评单位、建设单位一起编写等保制度；\n    - 对等保进度进行讨论，定稿后发布；\n    - 通过测评，归档《信息系统等保测评报告》。\n  - \n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 等级保护实施设计 | 《信息系统等级保护实施方案》 | 项目经理、实施组 |\n| 发起等保测评申请 | 《等保测评申请》 | 项目经理、实施组 |\n| 配合完成等保测评 |   | 项目经理、实施组 |\n| 系统整改 | 《系统整改报告》 | 项目经理、实施组 |\n| 测评完成 | 《信息系统等保测评报告》 | 项目经理、实施组 |\n### 密码测评\n密码测评主要针对需要通过密码技术保障信息系统物理和环境安全、网络和通信安全、设备和计算安全、应用和数据安全的项目，或针对项目合同有密码测评要求的项目。密码测评可同时针对非涉密信息系统项目和涉密信息系统项目。\n一般情况下，由项目承建单位编制好《密码应用建设方案》、《密码应用实施方案》、《密码应用应急处置方案》，并按实施方案进行密码应用实施。在项目具备密码测评条件后，经项目经理提起，由建设方申请相关机构对项目进行测评，并约定具体的测评时间。项目组应有相应的人员参与整个测评并协助完成测评相关的工作。\n测评过程中，根据测评机构反馈的相关问题和建议对信息系统进行整改，直至满足测评相关要求并通过密码测评。\n测评完成后，由测评机构出具正式的《XXX项目信息系统密码测评报告》，并交建设方和项目组存档。\n等保测评包括但不限于：\n    - 编制《密码应用建设方案》、《密码应用实施方案》、《密码应用应急处置方案》并按相关方案完成密码应用建设实施；\n    - 提起项目密码测评申请，协助建设方向测评机构申请密码测评；\n    - 协助完成密码测评；\n    - 根据测评意见和建议完成对信息系统的整改，编制整改报告；\n    - 通过密码测评，归档《项目信息系统密码测评报告》。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 密码应用建设设计 | 《密码应用建设方案》 《密码应用实施方案》 《密码应用应急处置方案》 | 项目经理、实施组 |\n| 密码测评 |   | 项目经理、实施组 |\n| 系统整改 | 《系统密码测评整改报告》 | 项目经理、实施组 |\n| 测评完成 | 《信息系统密码测评报告》 | 项目经理、实施组 |\n### 项目整改\n根据监理、客户及质量小组评估意见，全面规范项目交付质量、进度及技术资料管理。包括但不限于以下工作：\n    - 成立项目整改小组；\n    - 编制项目整改计划；\n    - 按计划进行项目整改；\n    - 输出项目整改报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 成立项目整改小组 | 整改小组名单 | 决策支撑组、PMO、项目经理、质量经理 |\n| 编制项目整改计划 | 《项目整改计划》 | PMO、项目经理、质量经理、质量工程师 |\n| 输出项目整改报告 | 《项目整改报告》 | 项目经理、质量经理、质量工程师 |\n### 项目上线\n项目系统整改完成并达到上线条件后，项目经理应申请项目上线运行。包括但不限于以下工作：\n- 项目上线申请；\n- 系统上线；\n- 系统上线问题处理；\n- 系统上线报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 上线申请 | 《系统上线申请》 《项目试运行方案》 | 项目经理 |\n| 系统上线 | 《系统上线报告》 | 项目经理 |\n### 项目培训\n系统上后，项目经理组织项目的培训活动。长沙市机关事务管理局智慧后勤管理平台项目的项目培训主要包括两个方面的培训：\n- 项目信息系统使用方面的培训；\n- 项目信息系统在日常使用过程中的简单维护和管理培训。\n具体包括但不限于以下内容：\n- 培训环境：根据项目合同培训要求准备培训环境，包括培训的场地，其他的培训设备，培训环境搭建等；\n- 培训讲师：项目根据项目实际情况指派具备培训能力的工程师担任培训讲师进行培训工作；\n- 培训方案：项目组根据项目最终的建设情况编制培训方案，对培训的具体事宜进行合理的安排，包括培训计划、批次等，编制培训教程，并根据培训方案完成培训工作；\n- 实施培训：根据培训方案完成培训工作，编制《培训报告》，建设单位以及监理单位签署培训报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 培训准备 |   | 项目经理、培训组 |\n| 制定方案 | 《培训方案》包括但不限于： 《培训计划》（培训具体安排） 《培训教程》 | 培训组 |\n| 完成培训 | 《培训报告》 | 培训组 |\n## 项目收尾阶段\n### 阶段验收\n阶段验收也称为项目初步验收。项目范围内的相关工作以及商务合同所承诺的项目成果基本提交完成后，项目经理向建设方申请项目阶段验收。\n项目阶段验收根据项目商务合同、合同附件、项目招投标文件中所要求进行项目初步验收工作。阶段验收由建设方组织验收团队（专家组）主要对项目建设内容、建设成果、提交物等进行逐一的核实确认和审阅，并对承建方进行现场质询。确保项目交付情况满足项目合同以及相关协议的要求。\n阶段验收会根据项目的具体情况（项目性质、复杂程度、用户技术力量以及项目当时的环境）来完成项目验收工作。\n本项目初步验收可采用集中验收方式，既在集中的相对比较短的时间内完成验收工作；也可以采用试运行方式进行验收，既根据项目产品在用户现场的具体运行情况来决定验收，在试运行的过程中，将运行情况进行记录，形成试运行报告，用户签字后作为验收的依据之一。\n\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 阶段验收申请 | 《阶段验收申请》 | 项目经理 |\n| 验收准备 | 《项目验收方案》 《项目阶段验收材料》 | 项目经理以及项目组成员 |\n| 阶段验收 | 《阶段验收报告》 | 项目经理以及项目组成员 |\n| 阶段验收整改 | 《阶段验收整改报告》 | 项目经理以及项目组成员 |\n### 项目试运行\n阶段验收通过，并根据项目初步验收意见完成整改后，项目经理向建设方和监理方提起项目系统试运行。\n具体包括但不限于以下工作：\n    - 申请系统试运行；\n    - 试运行方案；\n    - 试运行准备，例如：统初始化、基础数据准备等；\n    - 试运行报告。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| :---: | :---: | :---: |\n| 申请系统试运行 | 《项目试运行申请》 《项目试运行方案》 | 项目经理 |\n| 试运行报告 | 《试运行报告》 | 实施组 |\n### 竣工验收\n项目竣工验收是指项目完成了阶段验收中的整改内容，并通过试运行确保系统能满足建设方的整体要求，交付情况满足项目竣工验收标准，项目可启动竣工验收。\n| 阶段活动 | 工作成果（提交物） | 责任人 |\n| --- | --- | --- |\n| 阶竣工验收申请 | 《竣工验收申请》 | 项目经理 |\n| 验收准备 | 《项目竣工验收方案》 《项目竣工验收材料》 | 项目经理以及项目组成员 |\n| 竣工验收 | 《竣工验收报告》 | 项目经理以及项目组成员 |\n\n\n# 硬件系统实施\n在本项目中硬件实施包括以下几个部分的内容：\n- 智慧安全用电硬件设备安装和调试；\n- 智慧物联硬件设备安装和调试；\n- AI视频监控硬件设备安装和调试；\n- 基础网络硬件设备安装和调试；\n智能交通硬件设备安装和调试。\n## 智慧安全用电\n### 实施内容\n智慧安全用电智能终端的安装包括以下的实施内容；\n- 智慧微断开关电源以及通信模组（含天线以及箱体）；\n- 1-4P智慧微断。\n在项目深化设计工作完成后，根据项目深化设计所规划的点位进行智慧微断及通讯模组的实施和部署。智慧微断开关电源以及通信模组（含天线以及箱体）一共为80套。共有80个强电箱需要改造。其中涉及到使用1P智慧微断共584个、2P智慧微断50个、3P智慧微断31个、4P智慧微断47个。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 智慧微断开关电源 | 个 | 80 |\n| 2 | 1P智慧微断 | 个 | 584 |\n| 3 | 2P智慧微断 | 个 | 50 |\n| 4 | 3P智慧微断 | 个 | 31 |\n| 5 | 4P智慧微断 | 个 | 47 |\n| 6 | 智慧微断通信模组 | 个 | 80 |\n| 7 | 天线 | 根 | 80 |\n| 8 | 导轨及箱体 | 套 | 80 |\n### 实施位置\n相关终端均部署于市政府大楼1F至13F和市委大楼1F至11F过道两侧现有的电箱位置，替换原来电箱里面的传统空开。\n### 实施人员\n因为相关内容的实施涉及到强电，为了保证安全，在项目实施过程中，相关实施人员必须持证上岗，我方位该项目配备具有强电施工证的人员进行相关内容的实施。\n### 实施时间\n因为在智能微断等设备的实施过程中必须关闭楼层电源或实施点位的总控制电源开关，同时还要完成安装后的测试，会影响到相应施工区域的用电，故我方对该项工作的施工时间安排在非正常工作时间进行，主要是利用市委、市政府大楼放假和下班后休息时间进行集中施工。\n### 实施方式\n智能微断的施工采用提前准备、分步规划、错时实施、单点测试的施工原则，即在智能微断的施工过程中，提前进行施工准备，包括在物业进行报备，并通知到相关施工区域的办公室。施工前制定详细的施工规划，并分步进行，每天只规划能够实施完成的施工内容。在时间上，错开办公和用电时间，利用休息时间进行施工，并留有充足的施工和测试以及整改的时间。在施工过程中，安装完成一个点位必须立刻进行通电测试，确保每次安装的点位取电正常后再开始下一个点位的安装。\n### 实施流程\n智慧微断的实施流程如下：\n- 制定各点位实施计划；\n- 施工前提前进行施工报备以及协调机关事务局发布施工点位的施工通知，当特殊情况时，临时调整施工计划；\n- 逐个点位施工并测试，确保各点位取电正常；\n- 清理施工现场，确保现场卫生。\n### 安全文明施工措施\n因为项目涉及到强电，在施工过程中的安全必须要进行保障，为确保施工安全，应采取如下措施：\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 禁止单人实施，施工过程至少两人一组，其中至少一人拥有电工证，无证人员禁止上手操作；\n- 实施期间安全员必须全程在岗监督；\n- 严禁带电操作，必须按照项目规范流程进行施工，施工前施工点位必须断电；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 终端安装完成后，应进行通电以及漏电测试，确保安装正确；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 智慧物联\n### 实施内容\n智慧物联终端的实施包括以下内容：门磁传感器、出入识别传感器、多功能空气质量传感器、温湿度传感器、喷淋管道压力监测传感器、室内消防栓压力监测传感器、水位监测传感器、消防控制器通信板卡、物联网网关。\n#### 门磁传感器\n数量：115个。\n部署于食堂的库房门和消防门、市政府和市委大楼B2、B1、1F~13F以及顶楼各层的消防门监测，确保消防门处于常闭状态；\n#### 出入识别传感器\n数量：68个。\n部署于食堂大楼的主要出入口、市政府和市委大楼B2、B1、1F~13F以及顶楼各层的出入口，用于监测当前会议室或者各楼层里面的实时人数统计；\n#### 多功能空气质量传感器\n数量：50个。\n部署于市政府和市委大楼各楼层过道以及会议室，用于监测所在环境的空气质量参数；\n#### 温湿度传感器\n数量：50个。\n部署于食堂库房、弱电机房、强电机房、空调机房以及水泵房，用于监测所在环境的温湿度状态，实现相关区域的安全管理\n#### 喷淋管道压力监测传感器\n数量：62个。\n部署于食堂、市政府和市委大楼各楼层的喷淋监测压力表处，实现实时监测喷淋管道的水压，确保喷淋管道水压安全。\n#### 室内消防栓压力监测传感器\n数量：62个。\n部署于食堂、市政府和市委大楼各楼层的消防栓压力表处，实现实时监测消防栓的水压，确保消防栓水压安全。\n#### 水位监测传感器\n数量：18个。\n具体部署于食堂、市委和市政府大楼内的生活用水水箱和消防用水箱，实现水位高度的监测，确保生活用水和消防用水安全。\n#### 消防控制器通信板卡\n消防控制器数据采集和传输边缘计算终端和通信接口板卡共2套，具体部署于食堂、市委和市政府大楼内的2个消防主机，实现现有消防主机的数据采集，对消防实现全方位的实时监测；\n#### 物联网网关\n数量：67台。\n具体部署于食堂、市委和市政府大楼内各楼层过道以及食堂库房、弱电机房、强电机房、空调机房以及水泵房，实现门磁传感器、出入识别传感器、多功能空气质量传感器、温湿度传感器、喷淋管道压力监测传感器、室内消防栓压力监测传感器和水位监测传感器接入物联网网关进行数据传输。\n### 设备清单\n| 序号 | 终端名称 | 单 | 数量 |\n| :---: | :---: | :---: | ---: |\n| 1 | 门磁传感器 | 个 | 115 |\n| 2 | 出入人体识别传感器 | 个 | 68 |\n| 3 | 多功能环境质量监测传感器 | 个 | 50 |\n| 4 | 温湿度传感器 | 个 | 50 |\n| 5 | 喷淋管道压力传感器 | 个 | 62 |\n| 6 | 水位监测传感器 | 个 | 18 |\n| 7 | 室内消防栓压力监测传感器 | 个 | 62 |\n| 8 | 消防主机数据采集和传输边缘计算终端 | 台 | 2 |\n| 9 | 通信接口板卡 | 个 | 2 |\n| 10 | 室内消防栓消防阀门 | 个 | 62 |\n| 11 | LoRa核心网络平台 | 套 | 1 |\n| 12 | 物联网网关 | 台 | 67 |\n### 实施方式\n在项目深化设计完成后，根据不同类型传感器所安装的区域、安装要求等情况对项目施工时间进行规划。根据各类传感器接入要求，先完成施工区域物联网网关的安装与调试，以确保其他终端安装后能尽快按成调试。\n### 施工时间\n市委市政府大楼的施工时间考虑安装过程中的噪声，主要是利用市委、市政府大楼放假和下班后休息时间进行集中施工。\n其他区域和点位在正常的上班时间施工。\n### 实施流程\n实施流程如下：\n- 制定各点位实施计划；\n- 施工前提前进行施工报备以及协调机关事务局发布施工点位的施工通知，当特殊情况时，临时调整施工计划；\n- 逐个点位施工并测试，确保各点位取电正常；\n- 清理施工现场，确保现场卫生。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## AI视频监控\nAI智能监控系统实施主要包括前端视频感知单元以及后段存储、管理以及显示设备的安装实施。\n### 实施内容\nAI视频监控系统的重点是对厨房区域进行视频感知单元的部署，通过部署全景网络智能摄像机、动火离人感知单元及摄像机等前端感知单元，实现对厨房工作人员的规范化操作进行监控，实现智能报警，对厨房门外进行余留垃圾报警，对区域内实现大场景监控，包括高空全景感知单元、明厨亮灶专用感知单元、明厨亮灶显示屏、AI开放平台系列摄像机等；\n基础网络建设为依托现有电子政务外网的网络架构，对前端设备进行接入，实现前端和后端应用的网络交互。\n本期AI视频监控系统新建28个摄像头，根据摄像头分辨率以及存储时间要求计算，至少需要存储空间28×3.7=103.6T，出于数据安全考虑和本地管理需要，配置两台本地磁盘阵列做数据备份，每台磁盘阵列含16块6T硬盘，二台存储空间合计192T，可以满足项目AI视频监控系统的视频数据存储要求。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 高空全景感知单元 | 台 | 1 |\n| 2 | 高空全景感知单元-支架 | 个 | 1 |\n| 3 | 动火离人热成像 | 台 | 10 |\n| 4 | 明厨亮灶专用感知单元 | 台 | 10 |\n| 5 | 明厨亮灶专用感知单元支架 | 台 | 10 |\n| 6 | 明厨亮灶显示屏 | 台 | 4 |\n| 7 | 明厨亮灶显示屏支架 | 台 | 4 |\n| 8 | 明厨亮灶解码器 | 台 | 4 |\n| 9 | 智能警戒检测单元 | 台 | 2 |\n| 10 | 客流统计智能单元 | 台 | 4 |\n| 11 | 客流统计智能单元支架 | 台 | 4 |\n| 12 | AI开放平台系列摄像机 | 台 | 1 |\n| 13 | 网络存储设备 | 台 | 2 |\n| 14 | 服务器 | 台 | 2 |\n### 实施点位\n| 序号 | 区域 | 位置 | 数量 | 设备 | 备注 |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 | 机关1食堂 | 机关1食堂1楼后厨南北两侧墙面 | 4 | 动火离人热成像摄像机 | 新建支架 |\n| 2 | 机关1食堂 | 机关1食堂2楼后厨东西各一台 | 2 | 动火离人热成像摄像机 | 新建支架 |\n| 3 | 机关1食堂 | 机关食堂1楼操作间西墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 4 | 机关1食堂 | 机关食堂1楼南门东侧厨房南侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 5 | 机关1食堂 | 机关食堂2楼南门北侧洗漱间北侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 6 | 机关1食堂 | 自助餐厅1楼厨房东侧墙面 | 1 | 动火离人热成像摄像机 | 新建支架 |\n| 7 | 机关1食堂 | 机关1食堂后厨入口 | 1 | AI开放平台系列摄像机 | 新建立杆 |\n| 8 | 机关1食堂 | 一楼餐厅北面柱子 | 2 | 明厨亮灶显示屏 | 新建支架 |\n| 9 | 机关1食堂 | 二楼餐厅南面墙面 | 2 | 明厨亮灶显示屏 | 新建支架 |\n| 10 | 市政府大楼 | 南栋楼顶东南角 | 1 | 高空全景感知单元 | 新建支架 |\n| 11 | 市政府大楼 | 南栋1层东西侧走廊靠楼梯口 | 2 | 智能警戒检测单元 | 新建支架 |\n| 12 | 市政府大楼 | 南栋1层正门入口处 | 2 | 客流统计智能单元 | 新建支架 |\n| 13 | 市委大楼 | 北栋1层正门入口处 | 2 | 客流统计智能单元 | 新建支架 |\n### 实施方式\nAI视频监控系统的实施主要是AI摄像头的实施安装，相关的摄像头安装安装基本采用借杆或在墙壁安装的方式，仅在机关一食堂后厨入口需要新建立杆，其余均通过新建支架即可完成。\n### 实施流程\nAI视频监控系统实施流程如下：\n- 派遣施工人员进行实施现场点位的勘测与确认，再次明确具体安装方式，明确各个点位的电、网的接入方式；\n- 制定明确的安装方案与计划；\n- 新建立杆点位基坑挖掘、地笼放入、浇筑，可与智能交通系统同时实施；（隐蔽工程拍照）\n- 新建立杆点位立杆、电、网接入，其他各点位电、网接入到位；\n- 申请相关设备的IP地址，并提前将地址写入设备中；\n- 摄像头安装、（前置条件：视频监控平台部署完成。）系统接入调试；\n- 编写各点位设备安装实施单；\n- 实施完成，编写AI视频监控系统实施报告。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 基础网络\n### 实施内容\n硬件系统实施主要包括是以下几个部分的实施：\n- 网络系统的建设；\n- 本地机房设备的部署实施。\n市委市政府大院目前已经具备完整的网络系统，本次建设主要是在现有网络系统的基础上完成物联网网络系统的建设。另一部分是机房设备在本地机房的实施部署。\n### 机房环境实施\n本期项目包含设备间部署机柜、配线架、UPS以及设备间的综合布线工作，包括如下工作：\n- UPS主机以及电池箱的安装；\n- 本项目所采购的机柜的安装；\n- 机房强电线路部署；\n- 机房弱电网线的部署实施。\n目前将人防工程机房定位为数据机房，提供机房设备管理和部分业务服务。新增设备安装在既有机柜。为保障机房设备和安防监控系统设备能稳定不间断运行，设备间（机房）需配置一台UPS电源主机（15KVA），以及16只100AH/12V的UPS专用电池蓄电池。\n### 网络系统实施\n本项目配备两台核心交换机，作为本项目的汇聚交换设备，上连人防机房的核心交换，本项目其他设备主要以这两台设备作为汇聚接入。其中核心交换机（智能交通）作为智能交通系统的汇聚交换机上连本项目的核心交换。\n### 网络拓扑图\n\n图 网络系统建设拓扑图\n### 设备清单\n| 序号 | 设备 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 核心交换机 | 台 | 2 |\n| 2 | 48端口电接口板 | 块 | 2 |\n| 3 | 48端口光接口板 | 块 | 2 |\n| 4 | 集群业务子卡 | 块 | 4 |\n| 5 | 光模块 | 个 | 36 |\n| 6 | 高速电缆 | 根 | 8 |\n| 7 | 8口POE交换机 | 台 | 13 |\n| 8 | 16口百兆交换机 | 台 | 1 |\n| 9 | 16口百兆POE交换机 | 台 | 1 |\n| 10 | 24口千兆交换机 | 台 | 1 |\n| 11 | UPS主机 | 个 | 1 |\n| 12 | 电池 | 个 | 16 |\n| 13 | 电池柜 | 个 | 1 |\n| 14 | 机柜 | 个 | 1 |\n### 实施位置\n相关设备主要部署在人防工程机房，在本期项目中，部署两个42U标准机柜，新增2台核心交换以及1台智能交通核心交换机部署在该机房。同时，AI视频监控系统以及智能交通系统的NVR设备以及服务器设备均部署在该机房。\n其他交换设备根据项目设计，根据各视频点位以及传感器点位分步情况进行部署，各办公楼内可利用楼层交换设备进行部署。\n### 实施流程\n硬件系统实施是本期项目实施的基础实施内容，关系到后期的软件系统实施、智能终端实施（含智慧安全用电系统）以及AI视频监控系统、智能交通系统的实施。具体实施流程如下：\n- 完成实施环境勘测调研；\n- 项目VLAN、IP规划以及申请；\n- 制定项目实施方案、实施计划；\n- 检查环境内强电、弱电以及空间情况；\n- 申请进入人防工程机房启动实施；\n- 设备入场，包括机柜、电池柜等；\n- 机柜、UPS安装实施；\n- 强电部署到机柜；\n- 弱电部署到机柜；\n- 核心交换设备、服务器、存储设备上架安装；\n- 设备加电测试、设备初始化配置、网络测试；\n- 设备实施报告编写；\n- 工程检验以及交付。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n## 智能交通\n### 实施内容\n以政府机关大院为中心，通过增设卡口形成外围大防控圈，实现对车辆抓拍，并将抓拍的车辆图像及分析数据上传到管理平台实现统一管理应用，包括视频融合平台一体机、视频融合平台硬件服务器、网络存储服务器、管理终端电脑、全景AR网络摄像机等。建设智能车辆管控平台，实现对前端感知设备采集的数据进行统一接入、统一存储、统一订阅、统一推送服务，满足实时视频监控、车辆查询布控、车辆黑白名单管理、车辆超速、违停短信息提示等管理应用。\n本期共建设高空瞭望球机2台、全景AR网络摄像机3台、AI智慧网络球机15台、卡口摄像机40台、视频融合平台服务器、网络存储服务器等。\n### 设备清单\n| 序号 | 设备名称 | 单位 | 数量 |\n| :---: | :---: | :---: | :---: |\n| 1 | 视频融合平台一体机 | 台 | 1 |\n| 2 | 视频融合平台硬件务器 | 台 | 2 |\n| 3 | 网络存储服务器 | 块 | 1 |\n| 4 | 硬盘 | 块 | 48 |\n| 5 | 管理终端电脑 | 台 | 1 |\n| 6 | 液晶监视屏 | 台 | 1 |\n| 7 | 核心交换机 | 台 | 1 |\n| 8 | 800万全景AR网络摄像机 | 台 | 3 |\n| 9 | 高空瞭望球机 | 台 | 2 |\n| 10 | 42U机柜 | 台 | 1 |\n| 11 | 400 万星光级红外AI智慧网络球机 | 台 | 15 |\n| 12 | 400万全结构化卡口摄像机 | 台 | 40 |\n| 13 | 补光灯 | 台 | 40 |\n| 14 | 交换机 | 台 | 4 |\n| 15 | 光模块 | 块 | 8 |\n### 设备点位\n本期建设设备包括：高空瞭望 2 台、全景 AR3 台、智慧网络球机 15、卡口摄像机 40 台，摄像机共 60 台，新增支架 5 个，新立杆 34 根，共杆 8 处。\n其点位如下（最终已深化设计确认的定位位置为准）：\n| 序号 | 摄像机安装位置 | 摄像机类型 | 单位 | 数量 | 备注 |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 | 政府顶楼南边 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 2 | 市委顶楼北边 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 3 | 二办顶楼东南角 | 全景AR网络摄像机 | 台 | 1 | 新增支架 |\n| 4 | 政府东边 | 高空瞭望球机 | 台 | 1 | 新增支架 |\n| 5 | 二办顶楼北边 | 高空瞭望球机 | 台 | 1 | 新增支架 |\n| 6 | 杜鹃广场西北 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 7 | 杜鹃广场西出口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 8 | 政协东北角人防出口东 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 9 | 档案馆院外西北角 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 10 | 一食堂南出入口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 11 | 武警中队东北角外 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 12 | 人工湖东侧车道中 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 13 | 人工湖东北角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 14 | 人工湖北杜鹃路出口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 15 | 八方小区车辆入口 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 16 | 人工湖西南角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 17 | 二办东北角 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 18 | 二办前坪南侧马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 19 | 二办西南角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 20 | 人民会堂西北角马路 | 智慧网络球机 | 台 | 1 | 新建立杆 |\n| 21 | 杜鹃广场南侧中 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 22 | 杜鹃广场东侧入口 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 23 | 杜鹃广场东北角 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 24 | 市人大东南角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 25 | 杜鹃广场北侧中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 26 | 杜鹃广场西边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 27 | 杜鹃广场西出口 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 28 | 政协东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 29 | 政府月台西 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 30 | 市委月台西 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 31 | 党史研究楼前坪 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 32 | 武警中队南侧 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 33 | 一食堂南出入口 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 34 | 武警中队东北角外 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 35 | 人工湖东侧车道中 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 36 | 人工湖东北角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 37 | 人工湖北杜鹃路出口 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 38 | 人工湖北侧人防出口 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 39 | 警备司令部东边 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 40 | 警备司令部南边 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 41 | 警备司令部西边 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 42 | 恒晟南侧中 | 卡口摄像机 | 台 | 2 | 共杆 |\n| 43 | 二办西南角马路 | 卡口摄像机 | 台 | 1 | 新建立杆 |\n| 44 | 生态停车场西北角 | 卡口摄像机 | 台 | 1 | 共杆 |\n| 45 | 二办东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 46 | 政协南边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n| 47 | 人大东边马路中 | 卡口摄像机 | 台 | 2 | 新建立杆 |\n### 实施方式\n智能交通系统实施主要是摄像头的实施安装，相关的摄像头的安装基本采购新建立杆的方式进行规划，根据市政府大院的要求，所有摄像头的安装尽量不采用新建立杆的方式，而是尽量采用借杆或新建横臂的方式。\n### 实施流程\n智能交通系统实施流程如下：\n- 派遣施工人员进行实施现场点位的勘测与确认，再次明确具体安装方式，明确各个点位的电、网的接入方式；\n- 制定明确的安装方案与计划；\n- 新建立杆点位基坑挖掘、地笼放入、浇筑，可与智能交通系统同时实施；（隐蔽工程拍照）\n- 新建立杆点位立杆、电、网接入，其他各点位电、网接入到位；\n- 申请相关设备的IP地址，并提前将地址写入设备中；\n- 摄像头安装、（前置条件：视频监控平台部署完成。）系统接入调试；\n- 编写各点位设备安装实施单；\n- 实施完成，编写智能交通系统实施报告。\n### 安全文明施工措施\n- 遵守建设单位以及用户单位相关要求和规定，严格按照相关要求进行施工；\n- 相关施工人员必须持证上岗，禁止无证人员进行违规操作；\n- 实施期间安全员必须全程在岗监督；\n- 施工前应与建设单位物业进行报备，施工过程中应有物业单位相关人员进行陪同；\n- 相关的接线必须严格按照国家要求和规范进行，应严格按照项目设计进行施工，禁止使用违规线材或私自更换线材；\n- 在未收到项目组明确设计要求的情况下，严禁私自更换施工点位；\n- 在未收到项目组明确设计要求的情况下，严禁私自帮助用户私拉乱接；\n- 施工过程中在进入用户办公区域后，禁止大声喧哗，严禁私动用户办公室任何器物；\n- 施工完成后应拍照存档，作为项目过程资产；\n- 施工完成后，必须将现场清扫干净。\n- \n### 施工报告\n施工过程中，我方施工人员将根据监理方要求编写每个点位的施工报验单，并拍照存档。作为隐蔽工程的验收依据之一。\n所有点位施工完成后，将所有施工材料进行整理，并编写整体的实施报告提交监理单位以建设单位。\n\n# 项目系统集成实施\n## 集成实施概述\n本项目涉及到十多个其他系统的集成实施，在项目交付过程中，项目系统的集成实施是项目建设过程中非常重要的实施内容之一。项目系统的集成涉及到智慧后勤管理系统与建设单位其他已建系统的对接、与智能终端的对接、能力中枢能力的调用、移动应用端的嵌入等多个方面。\n在项目的交付过程中，对于系统集成部分，需要从设计阶段开始将该部分内容作为重点，从设计、开发、实施、集成以及测试各个环节总体考虑才能确保项目的完整交付。\n## 集成实施原则\n综合考虑长沙市机关事务管理局智慧后勤管理平台项目的特性，在该项目中，项目系统集成实施的原则是统一规划、统一设计；统一规范、统一标准；分步实施、分步验收。\n统一规划、统一设计：是指长沙市机关事务管理局智慧后勤管理平台项目作为一个整体，在项目顶层设计开始就应该对项目交付过程中所需要完成的系统内外部集成与对接进行规划与设计。通过统一的规划和设计确保项目系统的整体性，也避免了在项目交付过程中出现系统对接上的遗漏。\n统一规范、统一标准：系统集成过程中有诸多的系统对接、视频对接以及智能终端对接要求，在项目交付过程中，应该对同类型的对接进行规范，统一对接规范和接口要求，特别是在数据对接与视频对接方面，采购统一的对接标准，确保各个系统对接的顺利，提升对接效率，减少后期的维护要求。\n分步实施、分步验收：智慧后勤管理系统与其他系统的集成涉及面非常广，所有的对接并非统一的整体，对接过程涉及到与其他系统监管单位、承建方、用户等各个方面的协调，在对接的过程中，基于不同系统的对接进度分步实施，每对接完成一个就验收一个，确保整体的对接进度。\n## 集成实施内容\n项目集成实施内容涉及到如下几个方面：\n- 系统嵌入实施，重要是指智慧后勤管理系统的移动端APP需要嵌入到“长政通”APP中。第二，智慧后勤管理系统的微信小程序需要嵌入“我的长沙”微信小程序内。\n- 智慧后勤管理系统与长沙市能力中枢的对接，主要是指智慧后勤管理系统对长沙市能力中枢所提供的共性能力的调用。\n- 系统之间的对接，包括垃圾分类、人防道闸系统等在内的十四个系统的对接，主要对接涉及到系统之间的数据交互和系统控制。\n- 智慧后勤管理系统与物联终端以及智慧安全用电终端设备的对接。\n- 智慧后勤管理系统中AI视频监控系统、智能交通系统与机关事务局在建视频监控统一平台系统的对接。\n- 智慧后勤管理系统中智能交通系统与交警六合一平台的对接。\n## 集成实施架构\n\n图 项目系统集成融合示意图\n## 集成融合实施\n### 中枢对接实施\n#### 概述\n根据《长沙市信息化建设项目管理办法》的相关要求，长沙市机关事务管理局智慧后勤管理平台在实施过程中部分长沙市城市大脑（中枢）具备的共性能力无须自行开发，可直接调用相关的服务。\n2021年12月，长沙正式发布上线“长沙城市超级大脑1.0”，发布智能中枢能力清单187项，数据中台归集汇聚数据总量达339亿多条，形成了人口、法人、地理信息、城市部件、房产房屋等基础数据库。\n#### 长沙市中枢能力清单\n| 系统 | 一级服务能力 | 二级服务能力 | 服务方式 | 服务状态 | 服务能力描述 |\n| --- | :---: | :---: | :---: | :---: | :---: |\n| 电子证照 | 生成证照 | 在线填报证照 | H5页面 | 已发布 | 用于各部门业务系统提交证照照面信息到电子证照综合管理系统，并且通过提交xml规范模版，让返回的页面就带有自动回填数据，减少在线填报的手工录入量 |\n| 电子证照 | 生成证照 | 证照照面信息提交服务 | 接口 | 已发布 | 电子证照照面信息提交接口，通过第三方系统后台合成数据格式，定时或手动触发推送照面信息，提交到电子证照综合管理系统 |\n| 电子证照 | 生成证照 | 在线签章证照 | 接口 | 已发布 | 获取指定的证照类型的待签章列表。该接口用于各部门业务系统获取待签章的证照列表，可以选择证照进行在线签章 |\n| 电子证照 | 生成证照 | 缺失证照在线提交 | H5页面 | 已发布 | 登记个人或企业缺失的证照信息，提供页面。 |\n| 电子证照 | 生成证照 | 生成结果获取服务 | 接口 | 已发布 | 第三方系统在提交证照生成请求后，可以通过提交时的唯一验证串（第三方系统自行产生的唯一ID）来获取此证照的相关信息，用于关联证照生成结果或其他业务场景，此接口可以在改造时通过在关键操作结束之后由后台触发或前端手动触发实现。 |\n| 电子证照 | 证照变更管理 | 电子证照作废服务 | 接口 | 已发布 | 各部门业务系统中的证照有做注销、作废等终止证照使用操作时，需调用电子证照综合管理系统的作废接口，同步实现电子证照的作废。 |\n| 电子证照 | 证照变更管理 | 电子证照变更申请页面获取服务 | H5页面 | 已发布 | 对指定的电子证照发起变更申请，适用本质是变更、换证的业务。 |\n| 电子证照 | 证照变更管理 | 电子证照变更申请数据提交 | 接口 | 已发布 | 对指定的电子证照发起变更，将新的证照数据填入xml提交，可以从其他证照共享接口或生成结果获取接口获得证照的标识，如文件编号、提取码、证照ID等。 |\n| 电子证照 | 证照信息查验 | 电子证照验证服务 | 接口 | 已发布 | 根据持证主体代码和证照信息查验证照的有效性 |\n| 电子证照 | 证照信息查验 | 基于证照标识信息获取服务 | 接口 | 已发布 | 根据证照标识检索证照信息。 |\n| 电子证照 | 证照信息查验 | 基于持证主体代码信息获取服务 | 接口 | 已发布 | 根据持证主体代码检索证照信息。 |\n| 电子证照 | 证照信息查验 | 电子证照检索服务 | 接口 | 已发布 | 根据持证主体代码检索证照列表。 |\n| 电子证照 | 证照信息查验 | 基于证照标识下载服务 | 接口 | 已发布 | 根据证照唯一标识下载证照。 |\n| 电子证照 | 证照信息查验 | 基于持证主体代码下载服务 | 接口 | 已发布 | 根据持证主体代码下载证照。 |\n| 微服务&容器平台 | 微服务/容器化框架 |   | SDK | 已发布 | 兼容springcloud框架，提供服务注册中心、api网关、服务的限流、服务鉴权、服务路由、弹性伸缩、日志归集、日志配置、熔断等功能 |\n| 微服务&容器平台 | 分布式事务 |   | SDK | 已发布 | 集成了分布式事务能力，支持 TCC 模式分布式事务管理功能。对于跨数据库、跨服务的分布式场景，用户可以在控制台上查看事务运行情况并进行超时事务处理，保证事务的一致性 |\n| 微服务&容器平台 | 自动化运维 |   | H5页面 | 已发布 | 提供从创建应用到运行应用的全程管理，功能包括创建、删除、部署、回滚、扩容、下线、启动和停止应用；支持可视化调用链查询和拓扑图；支持日志服务的查询及检索；支持系统参数的配置；有可视化的页面监控 |\n| 微服务&容器平台 | 镜像仓库 |   | H5页面 | 已发布 | 支持镜像仓库的管理，有公共仓库和租户仓库 |\n| 消息队列 | 消息发布 |   | SDK | 已发布 | 创建消息并进行发布，可以创建普通消息、延迟消息、事务消息、回溯消息等。 |\n| 消息队列 | 消息订阅 |   | SDK | 已发布 | 支持消费已发布的各种类型的消息。 |\n| 政务微信 | 即时通讯 | 聊天管理 | 工具 | 已发布 | 支持单聊、群聊方式；支持群管理和群成员的管理；支持发送文字消息、图片消息、表情、文件等消息 |\n| 政务微信 | 即时通讯 | 音视频 | 工具 | 已发布 | 支持在单人会话中，可以向对方发起视频/音频通话，并且支持开启/关闭摄像头、开启/关闭静音、开启/关闭免提；支持在多人会话中，可以向多人直接发起视频/音频通话，并且支持开启/关闭摄像头、开启/关闭静音、开启/关闭免提 |\n| 政务微信 | 即时通讯 | 红包发送 | 工具 | 已发布 | 支持在群聊中发送普照红包或者向指定成员发送专属红包 |\n| 政务微信 | 即时通讯 | 通讯录 | 工具 | 已发布 | 支持组织架构管理、成员管理及标签功能。标签功能可以管理员可以对某些同类型的成员添加同一个标签 |\n| 政务微信 | 即时通讯 | 搜索 | 工具 | 已发布 | 通过姓名、拼音、手机号码等方式可以搜索到联系人。 通过群名、群成员等方式可以搜索到群聊。 通过部门名称和相关关键字等方式可以搜索到组织节点。 通过应用名称或相关名称的关键字等方式可以搜索到应用。可通过群聊参与人、群名、聊天消息关键字、文件名、聊天时间等方法进行搜索聊天记录。 |\n| 政务微信 | 即时通讯 | 收藏 | 工具 | 已发布 | 支持收藏消息、表情、图片、文件、语音、视频、地理位置等，方便快速查找重要信息内容。 可将收藏的内容，发送至聊天中，支持分享聊天消息、表情、图片、文件、语音、视频、地理位置等。 若不需要已收藏的消息，移除收藏的内容。 |\n| 政务微信 | 协同办公支撑 | 工作邮箱接入 | 接口 | 已发布 | 支持绑定工作邮箱后，可在“机构邮箱”中进行邮件的收信、发信、读信、写信等操作，支持搜索。 支持发送邮件、分享邮件、回复邮件、转发邮件、删除邮件、收藏邮件、邮件标为未读、不再提醒他的邮件。 支持置顶邮箱提醒、消息免打扰、查找邮件、支持修改邮箱服务器设置。可以按邮箱文件夹中的分类，选择开启邮箱提醒的文件夹。 设置不提醒名单、邮箱更新频率、更换邮箱、解除邮箱绑定、加载邮件图片。 |\n| 政务微信 | 协同办公支撑 | 部门自建服务号 | SDK,接口 | 已发布 | 支持应用管理和应用能力设置。 应用管理支持设置或修改应用logo、应用名称、应用介绍、应用可见范围。支持删除应用，可以将不常用的应用，折叠到更多应用，消息提醒也会自动折叠，可以查看并回复成员发来的消息； 应用能力设置支持自定义菜单，支持发送消息，支持多媒体消息，防止截屏泄密设置，支持接收消息，支持自动回复，支持网页授权及JS—SDK等 |\n| 政务微信 | 开放平台 | 应用运营管理 | 接口 | 已发布 | 支持查看每个应用运营数据，包括：今日进入应用人数、今日进入应用次数、应用中人数。 |\n| 政务微信 | 开放平台 | 应用开发与管理 | SDK,接口 | 已发布 | 支持网页JS-SDK、SDK及接口的方式进行应用的开发，以及 应用开发的可视化管理 |\n| 政务微信 | 政务微信协同办公标准产品 | 办文 | H5页面 | 已发布 | 政务微信移动端提供基础的公文办理功能：审批流转，分发传阅，流程跟踪、审批、公文回执、公文协办、收文传阅、发文分发、关联文件、办理超时提醒，实现公文移动端办理。在政务微信端可对公文预览，签收，转办等操作，配备对应业务闭环web端后台支撑，与两办协同OA系统打通，在PC端支持国产化和X86双适配。 |\n| 政务微信 | 政务微信协同办公标准产品 | 办会 | H5页面 | 已发布 | 在政务微信端实现会议发送和回复等功能。包括：会议通知发送、短信跟踪、会议回复、会议跟踪，配备对应办会业务闭环web端后台。 |\n| 政务微信 | 政务微信协同办公标准产品 | 办事 | H5页面 | 已发布 | 政务微信端实现快捷的短信通知发送入口，指定用户、单位浏览权限，在政务微信端实现内部签呈起草，审批流转。 |\n| 统一物流 | 寄送邮件（新增物流信息）服务 | 无 | 接口 | 已发布 | 业务系统发起订单新增服务，传递给统一物流服务进而传递给物流系统处理。 支持在线资费。 在线付费或到付 支持消息推送给收寄件人 |\n| 统一物流 | 查询全国行政区划数据 | 无 | 接口 | 已发布 | 支持业务部门获取全国标准且完整的行政区划数据，用于收寄件地址填写 |\n| 统一物流 | 个人收件地址查询服务（地址库服务） | 无 | 接口 | 已发布 | 支持获取本人的邮寄地址信息 |\n| 统一物流 | 查询寄件记录服务 | 无 | 接口 | 已发布 | 支持查看本人的收寄件相关信息，包括收件人姓名，地址，联系方式，邮编。寄件人姓名，地址，联系方式，邮编 |\n| 统一物流 | 物流订单状态查询 | 无 | 接口 | 已发布 | 支持查看订单物流状态信息 |\n| 统一物流 | 物流订单取消 | 无 | 接口 | 已发布 | 支持在一定条件下取消本人的物流订单 |\n| 统一物流 | 物流订单变更 | 无 | 接口 | 已发布 | 支持在一定条件下变更本人的物流订单信息 |\n| 统一消息 | 短信通知发送 | 无 | 接口 | 已发布 | 支持通过短信渠道发送消息通知给到相关人 |\n| 统一消息 | 短信验证码发送 | 无 | 接口 | 已发布 | 支持通过短信渠道发送验证码消息给到相关人 |\n| 统一消息 | 站内信 | 无 | 接口 | 已发布 | 支持站内信系统之间发送消息 |\n| 统一消息 | 微信小程序通知 | 无 | 接口 | 已发布 | 支持通过微信小程序发送消息通知给相关人 |\n| 统一消息 | 微信服务号通知 | 无 | 接口 | 已发布 | 支持通过微信服务号发送消息通知给相关人 |\n| 统一消息 | 邮件 | 无 | 接口 | 已发布 | 支持通过邮件发送消息通知给相关人 |\n| 统一消息 | 政务微信消息通知 | 无 | 接口 | 已发布 | 支持通过政务微信发送消息通知给相关人 |\n| 统一身份认证 | 自然人认证 | 自然人账号密码登录 | 页面 | 已发布 | 提供统一的自然人通过账号密码进行验证登录 |\n| 统一身份认证 | 自然人认证 | 自然人刷脸核验登录 | 页面 | 已发布 | 提供身份认证小程序二维码，进行人像识别登录 |\n| 统一身份认证 | 自然人认证 | 自然人手机验证码核验登录 | 页面 | 已发布 | 提供用户注册时的手机号获取短信验证码登录 |\n| 统一身份认证 | 自然人认证 | 自然人微信登录 | 页面 | 已发布 | 提供的身份认证小程序二维码，进行城市服务登录 |\n| 统一身份认证 | 自然人认证 | 自然人省/国家政务服务平台登录 | 页面 | 已发布 | 提供湖南省认证平台登陆 |\n| 统一身份认证 | 自然人认证 | 自然人基本信息获取 | 页面 | 已发布 | 通过个人身份唯一标识获取本人的基本信息 |\n| 统一身份认证 | 自然人认证 | 自然人账号统一登出 | 页面 | 已发布 | 提供自然人用户对已登录的账号进行登出 |\n| 统一身份认证 | 法人认证 | 法人账号密码登录 | 页面 | 已发布 | 提供法人账号密码进行验证登录 |\n| 统一身份认证 | 法人认证 | 法人CA认证登录 | 页面 | 已发布 | 数字证书认证平台，用户通过数字证书及输入密码进行登录 |\n| 统一身份认证 | 法人认证 | 法人基本信息获取 | 页面 | 已发布 | 通过企业唯一标识，获取本企业基本信息 |\n| 统一身份认证 | 法人认证 | 法人省/国家政务服务平台登录 | 页面 | 已发布 | 提供湖南省认证平台登陆 |\n| 统一身份认证 | 法人认证 | 法人账号统一登出 | 页面 | 已发布 | 提供法人用户对已登录的账号进行登出 |\n| 统一身份认证 | 行政人员认证 | 账号密码登录 | 页面 | 已发布 | 提供政务人员通过账号和密码登录 |\n| 统一身份认证 | 行政人员认证 | 政务微信扫码登录 | 页面 | 已发布 | 提供政务微信身份认证二维码扫一扫登录 |\n| 统一身份认证 | 行政人员认证 | 基本信息获取 | 页面 | 已发布 | 通过政务人员唯一标识，获取本人基本信息 |\n| 统一身份认证 | 行政人员认证 | 账号统一登出 | 页面 | 已发布 | 提供政务人员用户对已登录的账号进行登出 |\n| 统一用户 | 个人信息 | 基本信息 | 接口 | 已发布 | 提供个人的基本信息获取，包括：姓名，性别，身份证号，住址，联系方式等 |\n| 统一用户 | 个人信息 | 政务服务办件材料 | 接口 | 待发布 | 提供政务服务办事材料获取，包括：文件名、类型、大小、上传时间 |\n| 统一用户 | 个人信息 | 电子证照 | 接口 | 已发布 | 提供电子证照信息获取，包括：证件名、证件类型、签发机构、签发时间、有效期（至）、证照状态 |\n| 统一用户 | 个人信息 | 政务服务办事记录 | 接口 | 待发布 | 提供政府服务办事记录获取，包括：事项名称，流水号，父级事项，申办时间，最新环节时间 详情：各环节受理部门，受理状态，受理时间 |\n| 统一用户 | 个人信息 | 身份证信息 | 接口 | 已发布 | 提供公积金信息获取，包括：公积金余额，缴费记录，贷款记录，贷款进度 |\n| 统一用户 | 个人信息 | 公积金信息 | 接口 | 已发布 | 提供社保信息获取，包括：参保单位，险种类型，参保日期，截止日期，参保状态 |\n| 统一用户 | 个人信息 | 社保信息 | 接口 | 已发布 | 提供不动产权信息获取，包括：共有情况，不动产单元号，不动产权证号，坐落地址，权利类型，权利性质，用途，面积，使用期限，权利其他状况，电子证照 |\n| 统一用户 | 个人信息 | 不动产权信息 | 接口 | 待发布 | 提供企业基本信息获取，包括：统一社会信用代码、法定代表人身份证、企业名称、企业类型、企业注册地、企业状态 |\n| 统一用户 | 企业信息 | 基本信息 | 接口 | 已发布 | 提供企业基本信息获取，包括：获取企业基本信息，包括：公司名称，注册资本，法定代表人，法人证件号码（主要指身份证号），法人证件名称，经营范围，营业期限等信息，负责人通信地址，负责人联系电话，负责人邮政编码，注册地址，企业成立日期，企业常用联系人联系电话，企业常用联系人姓名，企业常用联系人邮箱，统一社会信用码，企业类型，经营者姓名，邮箱，邮政编码，联系电话，备注等信息。 |\n| 统一用户 | 企业信息 | 政务服务办件材料 | 接口 | 待发布 | 提供政务服务办事材料获取，包括：文件名、类型、大小、上传时间 |\n| 统一用户 | 企业信息 | 电子证照 | 接口 | 已发布 | 提供电子证照信息获取，包括：证件名、证件类型、签发机构、签发时间、有效期（至）、证照状态 |\n| 统一用户 | 企业信息 | 政务服务办事记录 | 接口 | 待发布 | 提供政府服务办事记录获取，包括：事项名称，流水号，父级事项，申办时间，最新环节时间 详情：各环节受理部门，受理状态，受理时间 |\n| 统一用户 | 企业信息 | 法定代表人信息 | 接口 | 已发布 | 提供法定代表人信息获取，包括：法定代表人证件类型、法定代表人证件号码 |\n| 统一用户 | 企业信息 | 企业登记详情 | 接口 | 已发布 | 提供企业登记详情获取，包括：住所、业务范围、法定代表人姓名、注册资金、活动地域、业务主管单位、发证机关、有效期限、发证日期、经费来源、开办资金 |\n| 统一用户 | 企业信息 | 企业变更信息 | 接口 | 已发布 | 提供企业变更信息获取，包括：变更事项、变更前、变更后、变更日期、登记单位 |\n| 统一用户 | 政务人员信息 | 组织架构信息 | 接口 | 已发布 | 提供政务人员组织架构信息获取，包括：部门名称、职能描述、是否虚拟部门、上级部门、部门负责人、部门分管领导 |\n| 统一用户 | 政务人员信息 | 人员信息 | 接口 | 已发布 | 提供政务人员信息获取，包括：姓名、账号、性别、手机号、邮箱、证件类型、证件号码、所属部门职务、身份、入职时间 |\n| 统一待办 | 待办列表页面 | 无 | 页面 | 已发布 | 提供统一的待办汇总页面，展示用户所有待办数据 |\n| 统一待办 | 待阅列表页面 | 无 | 页面 | 已发布 | 提供统一的待阅汇总页面，展示用户所有待阅数据 |\n| 统一待办 | 待办信息管理接口 | 创建单据 | 接口 | 已发布 | 提供用户创建待办事项到待办列表 |\n| 统一待办 | 待办信息管理接口 | 关闭单据 | 接口 | 已发布 | 用户处理完待办事项（该待办事项置为已办事项，待阅置为已阅），通过请求参数传递关闭单据状态值 |\n| 统一待办 | 待办信息管理接口 | 收藏单据 | 接口 | 已发布 | 提供用户对特定单据进行收藏；根据taskId更新收藏状态 |\n| 统一待办 | 待办信息管理接口 | 废弃单据 | 接口 | 已发布 | 支持通过业务系统撤回待办事项 |\n| 统一待办 | 待办信息管理接口 | 单据已读 | 接口 | 已发布 | 用户已查看单据，原待办事项的阅读状态置为已读 |\n| 统一待办 | 查询指定用户的待办信息 | 无 | 页面 | 已发布 | 用户需查看某单个用户的所有单据（待办、待阅、已办、已阅）的数量；根据用户id、来源系统（特定应用或全部应用）获取单据数量 |\n| 统一待办 | 待办提醒 | 无 | 页面 | 已发布 | 用户催单或者单据超时未处理，需要再次提醒待办处理人时，业务系统调用单据提醒接口，给待办人下发单据通知消息 |\n| 政务开放平台 | 小程序开发框架 | 无 | 页面 | 已发布 | 为政务服务开发者提供政务服务小程序开发框架、UI组件库、脚手架工具、设计资源及相关教程 |\n| 政务开放平台 | WEB站点开发框架 | 无 | 页面 | 已发布 | 为政务服务开发者提供政务服务web站点UI组件库、前端编译工具及相关教程 |\n| 政务开放平台 | H5开发框架 | 无 | 页面 | 已发布 | 为各委办局业务系统开发商提供政务服务H5 UI组件库 |\n| 政务开放平台 | CDN静态资源管理 | 无 | 接口 | 已发布 | 为开发提供图片、json文件、csv表格等CDN静态资源提供管理与访问功能 |\n| 政务开放平台 | 动态配置管理 | 无 | 接口 | 已发布 | 提供小程序使用的配置文件、静态资源等资源 |\n| 政务运营平台 | 内置运营数据查看与分析 | 无 | 页面 | 已发布 | 提供强大数据处理分析能力，包括通用用户行为分析、专项分析、自定义报表分析和应用管理等基础能力，为产品数据运营提供支持。 |\n| 政务运营平台 | 运营报表自定义分析 | 无 | 页面 | 已发布 | 支持企业将自身的线下数据及业务数据可视化，通过数十种自定义的报表类型、多种筛选条件、维度、样式的设计，帮助企业根据自身业务特性构建数据分析报表，同时可以结合应用数据深度分析。 |\n| 政务运营平台 | 运营数据上报服务 | 无 | 接口 | 已发布 | 将埋点数通过上报接口上报至运营平台的运营数据管理中进行数据处理 |\n| 智能网关 | 反向代理服务 | 无 | 页面 | 已发布 | 提供站点全过程管理，支持由站点提供方发起站点创建，填写相关的站点配置信息，完成站点创建。 |\n| 智能网关 | 负载均衡服务 | 无 | 页面 | 已发布 | 为服务提供随机负载和会话保持的负载均衡方式 |\n| 智能网关 | 接口注册与订阅 | 无 | 页面 | 已发布 | 提供接口注册与订阅的全过程管理能力，支持由服务提供方发起服务创建，填写相关的服务配置信息，完成服务创建。 对于指定服务的订阅申请，建立审批机制，将由该服务的系统管理员进行审批，审批通过之后相应的应用即有权限调用该服务。 |\n| 表单引擎 | 可视化表单开发 | 无 | 页面 | 已发布 | 提供可视化的表单设计及开发能力，提供丰富的表单工具箱，以及可视化画板，便于开发快速完成表单的设计和代码生成，支持所见即所得预览。 |\n| 表单引擎 | 表单版本管理 | 无 | 页面 | 已发布 | 将发布的表单进行管理，主要包括版本的控制、表单的删除等，提供表单的创建，查看，编辑，复制，发布和删除功能。 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章注册接口服务 | 接口 | 已发布 | 电子印章制作单位制作的电子印章，需要在长沙市互联网+政务服务统一电子印章认证管理平台内进行应用，需要将电子印章在平台内进行注册 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章获取接口服务 | 接口 | 已发布 | 根据电子印章的签名证书信息获取电子印章数据 根据电子印章唯一赋码获取电子印章数据 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 印章状态查询接口服务 | 接口 | 已发布 | 电子印章状态查询 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 组织机构注册接口服务 | 接口 | 已发布 | 将组织机构注册到长沙市互联网+政务服务统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 用户注册接口服务 | 接口 | 已发布 | 将用户注册到长沙市互联网+政务服务统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 签章日志记录接口服务 | 接口 | 已发布 | 签章产品在做签章时将日志记录到统一电子印章认证管理平台 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 获取时间戳接口服务 | 接口 | 已发布 | 签章时获取时间戳信息 |\n| 统一电子印章认证管理平台 | 第三方电子印章系统互联接入 | 签章验证接口服务 | 接口 | 已发布 | 验证印章结构体数据和签章结构体数据 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF控件签章接口服务 | 接口 | 已发布 | 提供的对PDF格式的文件进行电子签章的功能，它包含了两部分：PDF格式文件签章和PDF格式文件签章验证。 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF单线程摘要计算接口服务 | 接口 | 已发布 | 提供PDF文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF单线程签名合并接口服务 | 接口 | 已发布 | 提供PDF文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF多线程摘要计算接口服务 | 接口 | 已发布 | 提供PDF文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF多线程签名合并接口服务 | 接口 | 已发布 | 提供PDF文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF会签接口服务 | 接口 | 已发布 | 提供PDF文件会签模式签章服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | PDF撤销印章接口服务 | 接口 | 已发布 | 提供PDF文件撤销指定印章的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 文件上传接口服务 | 接口 | 已发布 | 提供PDF文件上传到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 文件下载接口服务 | 接口 | 已发布 | 提供PDF文件下载到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | PDF签章 | 签章文件验证接口服务 | 接口 | 已发布 | 查看当前印章的相关信息，例如：验章结果，印章标识、厂商标识、印章类型、签章人姓名、印章名称、签章时间、证书信息、制章人、制章日期、签名方法、软件版本号等。 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD控件签章接口服务 | 接口 | 已发布 | 对OFD文档加盖电子印章后，对文档摘要进行数字签名处理。通过阅读器上的电子签章对OFD文件进行签章，用户可以手动拖动印章到指定位置实现公章/个人签名。 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD单线程摘要计算接口服务 | 接口 | 已发布 | 提供OFD文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD单线程签名合并接口服务 | 接口 | 已发布 | 提供OFD文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD多线程摘要计算接口服务 | 接口 | 已发布 | 提供OFD文档单线程模式HASH计算服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD多线程签名合并接口服务 | 接口 | 已发布 | 提供OFD文档进行数字签名后的合并服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD会签接口服务 | 接口 | 已发布 | 提供OFD文件会签模式签章服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | OFD撤销印章接口服务 | 接口 | 已发布 | 提供OFD文件撤销指定印章的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 文件上传接口服务 | 接口 | 已发布 | 提供OFD文件上传到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 文件下载接口服务 | 接口 | 已发布 | 提供OFD文件下载到签章服务中间件的服务能力 |\n| 统一电子印章认证管理平台 | OFD签章 | 签章文件验证接口服务 | 接口 | 已发布 | 查看当前印章的相关信息，例如：验章结果，印章标识、厂商标识、印章类型、签章人姓名、印章名称、签章时间、证书信息、制章人、制章日期、签名方法、软件版本号等。 |\n| 统一电子印章认证管理平台 | 文件批注 | PDF控件文档批注接口服务 | 接口 | 已发布 | PDF批注通过iWebPDFEditor在线控件打开PDF文档，通过接口或按钮在文档指定位置加入批注的功能，批注可以分为常规的附注、高亮、删除线、下划线等，还支持直线、椭圆、矩形、多边形、云线等非常规注释。 |\n| 统一电子印章认证管理平台 | 文件批注 | OFD控件文档批注接口服务 | 接口 | 已发布 | OFD批注通过iWebOFDEditor在线控件打开PDF文档，通过接口或按钮在文档指定位置加入批注的功能，批注可以分为常规的附注、高亮、删除线、下划线等，还支持直线、椭圆、矩形、多边形、云线等非常规注释。 |\n| 统一电子印章认证管理平台 | 文件差异对比 | PDF控件文档对比接口服务 | 接口 | 已发布 | 图纸修改人员进行相关图纸后，审图人员通过PDF文件对比技术则是通过将前后两个文件在同一软件窗口中进行不通点展示。清晰明了的展示出两文件的不同之处 |\n| 统一电子印章认证管理平台 | 文件差异对比 | CAD控件对比功能 | 工具 | 已发布 | 图纸修改人员进行相关图纸后，校审人员往往需要对修改部分进行审查，CAD文件对比技术则是通过将前后两个文件在同一软件窗口中进行不通点展示。清晰明了的展示出两文件的不同之处。 |\n| 统一电子印章认证管理平台 | CAD签章 | CAD控件签章功能 | 工具 | 已发布 | 采用电子签名技术，结合数字证书技术、网络加密技术而设计的数据安全产品，采用插件技术与AUTOCAD产品无缝连接，用户在正常编辑文档的方式下就可以在AUTOCAD图档（DWG格式）内部实现电子签名 |\n| 统一电子印章认证管理平台 | CAD签章 | CAD控件批量签章功能 | 工具 | 已发布 | CAD一键签章技术则是解决设计院的设计人员在CAD图纸中实现多图框批量自动签章 |\n| 统一电子印章认证管理平台 | CAD文件转换 | CAD转换功能（PDF/OFD） | 工具 | 已发布 | 设计图纸电子版成果基本都是基于AutoCAD平台生产的DWG格式。用于外部交互、做为法律凭证、长期保管的文档格式可以使用PDF/OFD。支持将单个多层DWG批量转换成多个PDF/OFD文件 |\n| 统一支付 | 生成订单 | 无 | 接口 | 已发布 | 按业务数据生成订单信息，支持非税和有税支付，非税支付需提供缴费事项和子事项明细，生成订单后返回订单编号 |\n| 统一支付 | 发起支付 | 无 | 接口 | 已发布 | 通过订单编号，和请求应用的类型，返回支付页面或支付参数，调起用户支付 |\n| 统一支付 | 订单查询 | 无 | 接口 | 已发布 | 通过订单编号，查询订单当前状态，用于确认缴费状态和缴费金额 |\n| 统一支付 | 订单退款 | 无 | 接口 | 已发布 | 前端业务判断是否可以退款，若允许退款，请求此接口可发起退款，非税缴费不能发起退款 |\n| 统一支付 | 支付订单通知 | 无 | 接口 | 已发布 | 订单支付成功后，异步通知前端业务系统进行后续业务处理，若通知失败，将在4小时内就行8次重试通知 |\n| 统一支付 | 退款订单通知 | 无 | 接口 | 已发布 | 发起退款后，异步通知前端业务系统退款退款状态，若通知失败，将在4小时内就行8次重试通知 |\n| 统一支付 | 下载对账单 | 无 | 接口 | 已发布 | 每天凌晨与支付通道完成对账后，前端业务系统可以访问此接口，获取前一天业务系统的交易对账单 |\n\n#### 中枢能力调用实施\n长沙市机关事务管理局智慧后勤服务管理平台主要调用“长沙市城市大脑”应用中台发布的相关能力。“长沙市城市大脑”应用中台作为基础性的⽀撑平台，主要定位为各类信息化应⽤提供功能完整、性能优良、可靠性⾼的业务、技术公共组件，满⾜应⽤系统建设中的共性⽀撑需求。应⽤中台建设主要内容包括应⽤服务平台、应⽤运营平台、业务⽀撑平台、技术⽀撑平台、应⽤接⼊平台以及中台与外部系统的对接。\n- 在相关建设实施过程中，在设计阶段，即根据长沙市中枢能力清单明确智慧后勤服务管理平台需要调用的共性业务或服务组件，形成《项目中枢共性能力调用申请》。\n- 根据设计情况，通过共性能力服务调用申请流程进行申请，包括测试环境的申请、应用环境能力的申请；并通过沟通，明确相关业务或服务组件的具体调用方式。\n- 在项目软件系统开发过程中完成调用调试和测试；\n- 完成软件系统上线部署的调试与测试。\n### 系统嵌入实施\n根据《长沙市信息化建设项目管理办法》的相关要求，长沙市机关事务管理局智慧机关后勤管理平台不在另行开发移动端应用平台，长沙市机关事务管理局智慧机关后勤管理平台相关应用嵌入到“我的长沙”以及“长政通”中。\n系统嵌入集成融合分为两个部分，一个部分为微信小程序的嵌入集成融合，另一部分为移动应用APP的嵌入集成融合。\n#### 嵌入“我的长沙”微信小程序\n微信小程序架构如下：\n\n图 微信小程序架构\n在项目实施过程中，在项目系统设计完成后，我方将按照微信小程序的正常开发流程进行开发、测试，测试完成后，申请“我的长沙”测试环境进行嵌入测试。完成测试后按照“我的长沙”微信小程序上线申请流程完成“智慧后勤”部分的上线流程申请。项目整体测试完成后，智慧后勤管理系统正式上线后，完成“智慧后勤”微信小程序板块的上线。\n微信小程序是面向社会开放，在权限以及用户方面不需要做过多的设置。\n#### 嵌入“长政通”APP\n##### 概述\n长政通是长沙市统一建设的协同办公平台移动端应用，当前注册用户已经突破10万，长政通APP推动全市移动办公更便捷、高效，同时也进一步提升了长沙市各级政府部门行政效率。\n“长政通”是长沙市数据资源管理局为全市公职人员量身打造的集协同办公、即时通讯、视频会议等功能为一体的移动办公平台，以“打造全市移动政务办公的总枢纽和移动客户端的唯一入口”为基本定位，由腾讯云提供技术支持。\n自2022年1月起，“长政通”已在全市政务单位全面推广，目前注册用户已超10万人，覆盖全市党委、人大、政府、政协等171家市级单位，16家园区管委会，9个区县（市）政府，并延伸至172个街道和1667个社区，接入移动政务应用20多个，充分满足了政府和事业单位内部办公、办事、办会等大量协同业务需求。\n\n图 长政通APP界面效果图\n本次长沙市机关事务管理局智慧后勤管理平台移动端应用将作为长征通“常用应用”中的一个子应用，同时，相关待办工作、通讯录、个人信息、消息机制等均用长政通现有的服务提供，智慧后勤管理平台提供数据支撑。\n##### 应用风格\n长沙市机关事务管理局智慧后勤管理平台移动端应用在UI风格上采用与长征通一致的风格，尽量确保“长政通”风格的一致性。\n##### 认证机制\n在用户信息管理方面，“智慧后勤”移动端应用不在规划独立的认证机制，统一沿用长政通的用户管理和认证机制，即与长政通统一用户、统一认证、统一授权、统一审计。\n用户方面，“智慧后勤”与长政通面向相同的用户群体，在用户管理上使用长政通现有的用户管理机制即可，不再另行建设用户库。\n身份认证方面，“智慧后勤”仍沿用长政通的身份认证机制，同时在应用授权、用户访问审计方面均采用长政通现有的认证、授权和审计机制。\n##### 共性能力\n除认证机制外，例如：消息机制、待办工作、工作台等界面，均通过“智慧后勤”服务平台提供相应的数据接口，由“长政通”进行统一调用。\n##### 业务数据\n“智慧后勤”移动端应用相关的业务数据存储在智慧后勤管理平台部署在政务云上的数据库中，该部分并不与长征通共用，当长征通对相关数据有需要时，根据具体需求，由“智慧后勤”平台提供相应的接口。\n##### 嵌入实施\n项目在设计阶段开始就必须考虑移动端应用需要嵌入“长政通”，在项目设计前，需要对“长政通”APP进行了解，并与开发厂商进行技术沟通，统一风格、明确具体的嵌入方式、确定相关的数据接口和接口提供方、接口规范和标准等。\n同时，双方必须约定好开发过程的联调方式、上线申请流程、上线发布流程等具体事物，确保整个移动端应用实施的顺利性。\n### 系统对接实施\n#### 对接系统清单\n长沙市机关事务管理局智慧后勤服务管理平台项目需要完成与多个已建系统的对接：\n需要对接的系统有：\n- 市物联网平台；\n- 人脸门禁系统；\n- 停车道闸系统；\n- 视频监控系统；\n- 长沙银行一卡通系统；\n- 办公用房系统；\n- 公务用车系统；\n- 智慧消防主机系统；\n- 巡更系统；\n- 垃圾分类称重系统；\n- 人防工程停车道闸系统；\n- 交警六合一平台；\n- “我的长沙”城市移动综合服务平台；\n- “长政通”app；\n- 长沙市超脑服务平台。\n与外部系统的关系主要体现在以下几方面：\n- 与市物联网平台的对接，实现传感器采集数据的共享；\n- 城市超脑对接，通过与长沙市数据大脑三中台的对接，实现重要支撑服务和数据的调用；\n- “长政通”app对接，实现本次建设的移动端功能与“长政通”app功能对接，提供后勤服务功能；\n- “我的长沙”城市移动综合服务平台对接，提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能；\n- 已有系统对接，通过对接已有信息化系统，获取相关数据，供本平台分析应用。\n#### 网络集成改造\n项目系统集成实施主要是指长沙市机关事务管理局智慧后勤服务管理平台与机关事务局管理的已建系统之间的打通与对接。通过系统的对接，实现系统之间数据的交互，通过对此类系统数据的采集和获取，为项目系统数据分析提供基础数据。\n在需要对接的系统中，人脸门禁系统、停车道闸系统、视频监控系统等目前均为独立的局域网，在对接前，需要将各个系统网络改造，将其接入整体网络。\n\n图 改造前道闸系统网络示意图\n目前对接系统中需要进行网络改造的系统包括：\n- 人脸门禁系统\n- 停车道闸系统\n- 视频监控系统；\n- 智慧消防主机系统对接。\n为了保证相关系统的对接，以停车道闸系统为例，售前需要解决网络物理隔离的问题。完成网络集成改造，主要包括以下相关的工作：\n- 在项目实施阶段前期，完成对各个需要进行网络改造系统的现场勘测调研，确认具体的网络链接情况、设备部署情况、所在环境的网络接入情况；\n- 申请各系统的网络接入；\n- 为接入网络的相关设备申请必须的IP地址，明确接入上连设备、端口以及通信策略开放要求；\n- 完成网络接入的综合布线；\n- 协调时间，完成相关系统的网络接入测试，确保相关测试工作不对相关系统的使用人群造成影响；\n- 完成网络改造接入。\n\n图 改造后停车道闸网络示意图\n#### 接口对接\n##### 概述\n长沙市机关事务管理局智慧后勤管理平台与其他已建系统的对接的基本需求是通过达到与各个系统的对接，完成系统之间的数据采集、数据交互，为项目数据分析和IOC数据展示提供数据支撑。\n对接系统网络改造完成后，即可进行智慧后勤系统与其他各已建系统的接口对接工作。\n软件接口是实现一个系统跟另外系统进行信息交互的桥梁，在不同的系统之间，根据系统的关联程度的不同存在紧耦合和松耦合两种：紧耦合要求接口响应反应快，消息不能阻塞；松耦合对响应反应要求比较低。在目前应用中， Socket 、消息队列（Message Queue）、 WebService等都有相应的应用，但是应用中发现各通讯方式有自己固有的特征。\n在接口和系统信息交互的过程中，两种模式使用得很普遍：同步调用和异步调用，同步调用要求接口发出请求消息后必须等待服务端系统的应答消息，接口阻塞直至超时；异步调用则发出请求消息后，接口可以从事其它处理，定时轮询服务端应答消息和消息或事件通知。同步方式简单，但是很容易造成接口阻塞，造成消息积压超时。\n接口设计总体上遵循高内聚、低耦合、精分解的设计原则，尽量减少各系统 间、系统内各模块间的耦合度、降低操作复杂度、保证实现的通用性、提高系统的 重用性和扩展性，具体原则如下：\n##### 接口定义\n接口是指用于完成各系统间和系统内部数据传递的接口。在系统中通常设计成 一个数据库文件或接口转换模块，传出数据的系统通常对数据事先进行必要的加工处理，需要接收数据的系统按照用户的要求（用户事先定义的数据模式），通过接口完成数据传递的任务。\n##### 数据模式\n接口的核心是数据模式，所谓数据模式是指应用系统对要传递的数据应在 数据 的来源、内容、定义、分类、汇总、数据格式、数据去向等方面的处理上做出相应的 规定。一般情况下，数据模式是在软件初始化阶段由用户设定的，投入应用时大量的数据采集完全自动化。同时根据系统的实际需要，用户也可以对数据模式进行修改和维护，甚至重新定义。\n##### 传递数据的形式\n对于传递数据的形式，根据本项目对接软件系统的差异可采用不同的策略：一种是由接收数据的系统釆取主动，按照数据接口定义到对方系统去识别、采集。一种是由要传出数据的系统先对数据进行加工，然后按照数据接口定义将数据传递过去。如果是系统内接口，一般采用的是第一种，系统内外系统间的数据传递一般是第二种。\n##### 接口对接流程\n\n图 系统集成融合实施流程图\n##### 对接流程说明\n长沙市事关事务管理局智慧后勤管理平台项目在集成融合方面需要结合项目硬件系统安装实施以及软件系统的开发进行综合考虑。项目集成融合流程如下：\n- 各对接系统的信息收集；\n- 协调项目相关干系人，完成与对接系统各监管单位、用户以及承建单位的初步对接；\n- 完成需要对接系统的现场勘测调研工作；\n- 完成对接系统的对接需求调研；\n- 在设计规划阶段，完成各个系统的对接设计，明确与各个厂商的对接方式，预计项目对接需求，编写项目系统接口设计文档，同时对接系统各方就对接方案达成共识；\n- 根据接口设计方案完成项目系统接口对接；\n- 完成各个系统接口对接的调试；\n- 完成系统的整体测试，确保各集成融合情况；\n- 系统上线。\n### 视频融合实施\n长沙市事关事务管理局智慧后勤管理平台项目包括AI视频智能监控、智慧交通两个部分的视频监控系统建设内容。根据项目建设要求，相关监控视频需要集成融合接入长沙市事关事务管理局统一视频监控平台（安防系统）中。\n#### AI视频智能监控\n本次AI视频监控主要包括高空全景感知单元、动火离人专用感知单元等智能摄像机，以及智能警戒摄像机、客流统计智能单元及交换机、显示器和解码器等设备。\n本系统包括28个摄像头的安装和实施，各摄像头统一接入AI分析器，通过AI分析器以及其相关的算法为各摄像头赋能。帮助监管方减少监管工作量、提高监管效率，实现全天候全时间段无死角监管。\n\n图 AI智能监控系统示意图\n#### 智慧交通\n智慧交通系统是通过视频技术的应用，对市政府大院内道路车辆行驶和停泊状态进行全面感知和监控，为机关大院周边及内部道路车辆管理提供准确实时的数据支撑。可以有效降低人工管理成本和提高管理效率。\n根据项目建设要求，智能交通系统需要支持与交警六合一平台对接，将本次建的感知前端和数据共享给交警部门，为交警部门对该区域的交通管理提供有效的数据支持。同时，本次建设的相关摄像头要求可全部接入机关事务管理局正在筹建的安防系统中。\n\n图 智能监控系统示意图\n#### 视频数据融合示意图\n\n图 视频数据融合网络示意图\n\n#### 视频数据融合\n视频监控系统均遵循公安部发布的国家标准《安全防范视频监控联网系统信息传输、交换、控制技术要求》GBT28181-2016，该标准解决了视频监控系统图像信息的联网整合、资源共享问题，为视频监控图像信息的联网共享奠定了技术基础，有效推动视频监控图像信息跨区域、跨部门的综合应用，因此在原各视频监控系统遵循GBT28181-2016的基础上，进行集成管控技术上没有问题；其他停车闸系统、一卡通系统等可以通过插件、标准API、SDK等不同形式应用接口进行系统对接，同时在本系统中进行数据清洗、数据交换、数据编目、数据分析、业务信息融合等数据服务，进行系统集成管控。\n关于视频数据的融合包括两种方式：一种方式是通过平台与平台的对接完成视频数据在安防系统的融合，另一种方式是将本项目建设的摄像头直接接入安防系统平台。\n在本次项目建设内容中，AI视频智能监控系统与智能交通系统均有独立建设的视频接入平台，通过两个平台接口的开放，实现与安防系统的对接。其二，我方将根据安防系统项目设备接入要求提供摄像头点位信息、IP地址信息、摄像头名称、摄像头型号等信息。安防系统通过其视频接入平台完成摄像头的接入。\n实施过程中可根据安防系统具体的建设情况明确接入方式，实现视频数据的融合集成。\n# \n# 项目测试方案\n## 项目概述\n长沙市机关事务管理局智慧后勤服务管理平台项目建设内容包括项目基础设施建设、智慧后勤服务管理平台建设、内外部系统对接与集成三个主要方面。\n项目基础设施建设方面，长沙市机关事务管理局智慧后勤服务管理平台项目基础设施建设内容包括：基础网络系统建设、智慧安全用电系统建设、智慧物联网络建设、AI视频监控系统建设、智能交通系统建设。通过基础设施建设，一方面对现有的硬件系统提供可接入网络，另一方面也为项目提供信息和数据采集的终端，并同时通过AI视频监控系统与智能交通系统的建设为后勤管理提供更智能和直观的管理手段。\n智慧后勤服务管理平台的建设主要包括智慧后勤基础平台、智慧后勤应用平台、智慧后勤“一张图”、智慧后勤移动端应用相关内容的建设。\n智慧后勤基础平台是为项目应用部署提供基础运行环境，包括：操作系统的建设、数据库系统、中间件服务和应用基础服务或组件等。基础平台提供集约化、融合多种应用支撑服务，为整个项目提供数据初始化、统一入口、工作台、通用审批管理、物联网管理、数据资源建设、安全服务支撑等基础的服务。\n智慧后勤应用平台是为机关事务管理局各业务管理部门，提供业务后台管理的综合平台。从为机关事务局内部提供考勤管理、公文管理、用印管理、文印管理等应用，到对外的集体户口申办、应诉管理、接待管理、会务管理以及办公用房建设计划的审核、汇总和报批等功能，智慧后勤应用平台将提升机关事务局对外的服务体验及管理水平，实现业务的增效和智能化。\n智慧后勤 “一张图”，实现“所有资源一张图管理、所有设备一张图控制、所有事件一张图显示”，对数据进行直观、高效的可视化呈现，让机关大院的业务和数据变得可知可感，让决策有据可依。并帮助管理者实时了解机关大院整体的资产运行状况、车辆情况、安防情况、能效情况、服务情况等，推动机关后勤服务的管理精细化和服务专业化。\n智慧后勤移动端应用是为满足机关事务管理局在移动端的应用场景而单独开发的，它基于现有“长政通”APP和“我的长沙”城市移动综合服务平台开发，将开发完的移动应用嵌入到“长政通”App和我的长沙。其中嵌入到“长政通”APP的功能是提供给所有市直机关职工和干部的统一服务平台，实现机关后勤服务从被动到主动服务的转变，实现餐饮、物业、会务、通知公告、办公、生活等一站式服务的工具和入口，实现个人信息等基础功能、后勤主页、设施设备管理、培训管理、电子巡更、报事报修、通知公告、房屋维修项目管理等应用。\n嵌入“我的长沙”城市移动综合服务平台功能主要是提供给非市直机关系统的广大市民群众使用，结合政府机关实际情况，开放包括访客预约、楼栋检索和查询、会议预定等功能，提升市机关事务局的社会服务性。\n内外部系统对接集成的建设内容包括将长沙市机关事务管理局目前已经建成的多个信息系统组网打通，实现信息的互联互通和数据共享。\n现有需要对接的系统有：智慧后勤服务管理平台与长沙市超脑服务平台、市物联网平台、人脸门禁系统、停车道闸系统、视频监控系统、长沙银行一卡通系统、办公用房系统、公务用车系统、智慧消防主机系统、巡更系统、垃圾分类称重系统、人防工程停车道闸系统、“我的长沙”城市移动综合服务平台、“长政通”app对接，以及智能交通系统与交警六合一平台对接。\n## 测试范围\n长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容。包括新建的基础网络环境、物联网络、智慧用电终端、物联终端、智能交通系统、AI智慧视频监控系统、智慧后勤管理平台以及其移动端应用。\n## 测试目标\n项目测试的主要目标主要包括以下几个方面：\n网络系统方面，确保本期建设的所有终端以及在人防工程机房所部署的设备能正常、安全的接入长沙市机关事务管理局现有网络，系统相关的各类业务端口开放正常，设备链接通信正常；\n软件系统功能、移动应用端功能完全满足和符合项目招标文件以及客户实际需求，软件系统的性能、应用安全、稳定性都满足项目建设和使用要求；\n智慧后勤管理平台与其对接的各个系统的对接工作已经完成，且相关的数据传输流畅，数据获取完整、正确，性能满足相应的使用和数据采集要求；\n长沙市机关事务管理局智慧后勤服务管理平台功能、性能等方面均可满足项目招标文件和建设单位实际需求。\n## 术语定义\n性能测试（performance testing）：运行这些测试通常要确定程序运行有多快，以便确定是否需要优化。\n负载测试(load testing)：通过在面临很多资源要求的系统上运行，攻击被测程序或系统。\n可靠性测试(reliability testing)：持续进行的性能测试，目标是发现短序列程序测试遗漏的情况。\n## 项目测试环境\n因为本项目的部署涉及到政务云、人防工程机房、电子政务外网以及与其他系统的对接测试，完全搭建测试环境的成本较高且不现实，项目测试除在政务云申请测试环境资源外，对接系统尽量协调相应的测试环境。智慧用电终端、物联网终端以及摄像头终端其均以项目实际系统进行测试。\n### 网络系统\n本期项目网络系统的建设是在原有网络系统的基础上进行网络延伸，网络系统的测试不会对项目建设环境中的现有网络造成影响。\n\n图 项目测试环境网络架构图\n### 主机系统\n本期智慧后勤管理系统部署在政务云外部数据区，在项目开发过程中，可在政务云申请相应的服务器资源作为测试环境。\n## 测试手段\n在项目测试工作开始前，项目测试组制定《测试计划》，本项目基本采用黑盒测试的方式进行软件系统测试，测试过程同时填写《测试记录表》。\n## 测试数据\n项目系统测试的主要依据是《项目需求分析说明书》，测试用例以及项目测试数据均以《项目需求分析说明为基础》、参考《项目概要设计说明书》、《项目详细设计说明书》来制定。\n## 测试策略\n长沙市机关事务管理局智慧后勤服务管理平台项目的测试过程分三个步骤进行，即单元测试、集成测试、整体测试。\n### 单元测试\n在软件系统启动开发时，我方即为项目开发人员配备项目测试组，主要通过测试管理工具进行测试管理。该测试过程，测试组人员伴随项目开发组进行项目单元测试。\n首先按照系统、子系统和模块进行划分，但最终的单元必须是功能模块，或面向对象过程中的若干个类。单元测试是对功能模块进行正确检验的测试工作，也是后续测试的基础。目的是在于发现各模块内部可能存在的各种差错，因此需要从程序的内部结构出发设计测试用例，着重考虑以下五个方面：\n1）模块接口：对所测模块的数据流进行测试。\n2）局部数据结构：检查不正确或不一致的数据类型说明、使用尚未附值或尚未初始化的变量、错误的初始值或缺省值。\n3）路径：虽然不可能做到穷举测试，但要设计测试用例查找由于不正确的计算（包括算法错、表达式符号表示不正确、运算精度不够等）、不正确的比较或不正常的控制流（包括不同数据类型量的相互比较、不适当地修改了循环变量、错误的或不可能的循环终止条件等）而导致的错误。\n4）错误处理：检查模块有没有对预见错误的条件设计比较完善的错误处理功能，保证其逻辑上的正确性。\n5）边界：注意设计数据流、控制流中刚好等于、大于或小于确定的比较值的用例。\n### 集成测试\n软件系统开发完成，即可以开始进行项目系统集成，包括与城市大脑、“长政通”、“我的长沙”、交警六合一平台等十多个系统，每一个系统对接开发完成，即需要进行联调，联调完成后，测试应该开始就系统集成情况进行系统集成测试，系统集成测试主要为了保证智慧后勤管理平台与其他系统的对接。\n集成测试也叫组装测试或联合测试。通常，在单元测试的基础上需要将所有的模块按照设计要求组装成系统，这时需要考虑的问题：\n- 在把各个模块连接起来的时候，穿越模块接口的数据是否会丢失。\n- 一个模块的功能是否会对另一个模块的功能产生不利的影响。\n- 各个子功能组合起来，能否达到预期要求的父功能。\n- 各个系统组合起来进行测试，测试各系统的联动和数据传输效果是否达到了项目建设要求。\n- 全局数据结构是否有问题。\n- 单元模块的误差累积起来，是否会放大，从而达到不能接受的程度。\n- 我们在组装时可参考采用一次性组装方式或增殖方式组装方式。\n### 整体测试\n项目整体上线前，为了确保系统在上线后的正常运行，需要对系统进行整体测试，测试以项目建设目标为基础，通过整体测试来确认系统是否按项目建设要求达到了系统的建设目标。\n系统测试目的是在于验证软件的功能和性能及其他特性是否与用户的要求一致，主要是下列类型的测试：\n1）用户界面测试：测试用户界面是否具有导航性、美观性、行业或公司的规范性、是否满足设计中要求的执行功能。\n2）性能测试：测试相应时间、事务处理效率和其他时间敏感的问题。\n3）强度测试：测试资源（内存、硬盘）敏感的问题。\n4）容量测试：测试大量数据对系统的影响。\n5）容错测试：测试软件系统克服软件、硬件故障的能力。\n6）安全性测试：测试软件系统对非法侵入的防范能力。\n7）配置测试：测试在不同网络、服务器、工作站的不同软硬件配置条件下，软件系统的质量。\n8）安装测试：确保软件系统在所有可能情况下的安装效果和一旦安装之后必须保证正确运行的质量。\n## 测试流程\n### 概述\n测试准备阶段是测试人员进行需求说明书分析、制定测试计划、设立测试配置库等活动，能有效的定义测试过程，制定出合理的测试策略和测试的进度安排，明确细化责任和分工，便于交流软件测试小组的意图，为执行测试阶段做准备，以保证整个项目的测试工作能顺利进行。\n相关人员职责见下表：\n| 序号 | 阶段任务 | 参与人员 |\n| :---: | :---: | :---: |\n| 1 | 提供需求说明书; 提供项目计划; 参与测试计划评审; | PM/项目组长 |\n| 2 | 需求说明书分析; 制定测试计划; 测试计划更新; 整理需求说明书检查点; | 测试组长/测试人员 |\n### 需求说明书分析\n    - 提供需求说明书：PM/项目组长向测试组长提供需求说明书。采用开发组向测试组开放配置库共享的方式。\n    - 需求说明书分析：测试组长/测试人员从配置库中得到需求说明书，在需求说明书分析理解过程中，如有不明确或无法理解之处，需提出疑问并整理成文档，并以会议（通过与PM/项目组长沟通确定时间）的方式请求PM/项目组长或者开发小组成员给予解答。\n    - 提供需求说明书检查点：PM/项目组长以邮件方式向测试组长提供需求说明书检查点，并抄送项目总监，测试组长将需求说明书检查点提交到测试区域的需求说明书检查点区并通知测试人员获取需求说明书检查点。\n    - 需求说明书检查点更新：在项目开发过程中，如需更新需求说明书检查点，PM/项目组长及时以邮件方式告知测试组长需求说明书检查点更新部分。\n### 制定测试计划\n    - 提交项目计划：PM/项目组长向测试组长提供项目计划。可采用开发组向测试组开放配置库共享的方式。\n    - 制定项目测试计划：测试组长从配置库中获取项目计划，根据项目计划制定测试计划。测试计划使用Microsoft Office Project 制定，详细拆分各阶段的任务以及任务的开始时间和完成时间以及指定测试人员。\n    - 评审、修改测试计划：PM/项目组长和测试组成员参与测试计划评审，并提出评审意见。测试组长根据项目组评审意见修改测试计划。测试计划存放于测试区域的测试计划区。\n    - 测试计划变更：在开发过程中，如遇到项目计划变更的情况，PM/项目组长应及时以邮件的方式告知测试组长，测试组长及时变更测试计划。\n### 设立测试配置库\n    - 确定配置管理工具：本公司常用配置库管理工具有VSS，SVN，ClearCase等，PM/\n    - 项目组长根据项目实际情况确定该项目所使用的配置管理工具。\n    - 在配置库中建立测试区域：测试组长在PM/项目组长确定的项目配置库中建立测试区域；测试区域包括测试计划、测试检查点、测试版本发布、BUG提交、测试报告等区域，分别用于存放相关测试文档。\n    - 测试组长设置测试区域权限：开发人员（读取权限）；PM/项目组长/测试组长/测试人员：(读写权限)。\n    - 测试人员向配置库提交测试文档：测试人员将所有的测试文档分门别类的提交到各自所属测试区域内。测试人员向配置库提交测试文档时，必须注明本次提交的内容，以便查询。\n| 文件路径 | 文件路径 | 存放内容 | 负责人 |\n| :---: | :---: | :---: | :---: |\n| 测试区域 | /测试计划区 | 《项目测试计划》 | 测试组长 |\n| 测试区域 | /需求规格说明书 | 《需求规格说明书》 | 测试组长 |\n| 测试区域 | /测试版本发布 | 《数据库文件》 《代码》 | 测试组长 |\n| 测试区域 | /BUG提交 | 《BUG记录表》 | 测试组长 |\n| 测试区域 | /测试报告 | 《项目测试报告》 | 测试组长 |\n### 测试环境搭建\n- 明确项目测试环境：PM/项目组长根据项目需求和项目实际情况确定该项目测试所需的必要环境。\n- 搭建项目测试环境：测试组长/测试人员根据PM/项目组长确定的测试环境搭建项目测试环境，包括测试服务器环境和测试机环境。\n### 测试执行\n该阶段为测试执行阶段，主要是测试人员对软件进行测试和验证的阶段，以测试准备阶段的工作成品为入口，开发人员测试人员按照各自的职责分工合作以达到该阶段的结束目标。\n#### 测试周计划管理\n配置库：测试计划区（所有活动在以下区域进行）\n#### 测试周计划内容\n    - 制定测试周计划：测试组长以本周二至下周一为单位制定测试周计划，确定本周应测试式样书，拆分测试任务。测试周计划存放于测试区域的测试计划区。\n    - 维护测试周计划：测试组长根据项目变更维护测试周计划。测试组长修改本周应测试式样书，维护式样书版本，重新拆分测试任务\n    - 查看测试周计划：测试人员从测试区域的测试计划中得到测试周计划，明确自己在本周的测试任务，如有不明确或无法理解之处，需提出疑问\n    - 测试周计划跟踪：测试组长在每天下班前确定本周当天测试任务完成情况（当天应测试式样书，当天未完成测试式样书，当天已完成测试式样书，是否需要加班），以便于评估本周测试任务是否能够按计划完成。\n#### 测试版本提交内容\n提交项目安装手册：PM/项目组长将安装测试手册提交至测试版本发布区。安装手册包括简述硬件软件环境（服务器端，客户端），项目工程发布步骤提交测试版本：PM/项目组长每天下班前统一将项目工程备份文件提交至测试版本发布区。\n获取测试版本发布测试服务器：测试组长从测试区域中的测试版本发布区获取最新项目备份文件以及数据库文件，并发布到测试服务器供测试人员测试。\n#### 测试状态发布\n配置库：BUG提交区。\n提交BUG：测试人员根据式样书检查点对项目进行测试，根据测试结果修改式样书检查点状态栏。式样书检查点状态为：通过不通过并截图。测试完成后将已执行测试的需求规格说明书检查点文档提交到测试区域中的BUG提交区。并告知对应的开发人员修改BUG以及要求开发人员邮件回馈BUG的原因和修改完成时间。\n- 修改BUG：开发人员从BUG提交区获取已测试完成的项目用例，根据检查点状态修改BUG后，指明BUG出现的原因，修改BUG状态栏。BUG状态栏为1 Fixed 2 Deferred 3 Closed 4 Reopen 5 Revalidated 6 Rejected。并邮件告知测试组长该本样式书已修正。\n- 回归验证：测试人员从BUG提交区获取已修正状态的式样书检查点进行回归验证直到该BUG关闭，此时修改式样书检查点状态为通过。\n- 协调开发与测试的沟通交流：测试组长每天跟踪测试执行情况和开发人员BUG修复情况以便能进行有效的沟通。每周收集测试人员测试过程中间的意见以及问题整理归纳并与PM/项目组长确认\n#### 测试报告\n整理测试数据：测试人员于测试结束后将测试数据提交测试组长。测试数据包括：应完成测试case数量，已完成测试case测试量，未完成测试用例（需求功能点）数量，完成度，BUG数量。\n测试报告：测试组长根据测试组成员提交的测试数据形成报告提交到测试总结区，并告知PM/项目组长。\n测试报告的目的：\n1、及时反应项目测试情况；\n2、开发人员及时了解项目开发质量，调整开发计划；\n3、测试人员不断改进测试方法以及测试效率，提高测试质量。\n\n# 项目管理方案\n## 项目整合管理\n项目整合管理包括为识别、定义、组合、统一与协调项目管理过程组的各过程及项目管理活动而进行的各种过程和活动。在项目管理中，“整合”兼具统一、合并、连接和一体化的性质，对完成项目、成功管理干系人期望和满足项目要求，都至关重要。\n项目整合管理就是为满足各方需求而进行协调以达到预期目的的过程。它是一项综合性、全局性的工作，主要内容是在相互冲突的目标或可选择的目标中权衡得失。虽然所有的项目管理过程在某种程度上都可看成是一个整体，但在整合管理中的这些过程是最基本的管理知识。整合管理主要包括：制定项目计划、实施项目计划、项目变更控制这三个过程。这些过程彼此相互影响，同时与其它领域中的过程也互相影响。\n在本项目实施过程中，通过对项目各个阶段的边界进行管理，保证项目各个阶段的协调推进。在项目整合管理过程中，主要包括以下几个方面：\n- 制定项目计划：制定项目计划是指制定项目管理计划，即对项目实施过程中所有阶段以及过程进行初步的规划；\n- 项目执行：制定阶段的项目计划，并按照相应的计划完成项目各阶段的工作，推进项目往前进展；\n- 监控项目：项目组将按照项目计划，跟踪、审查和调整项目进展，以实现项目管理计划中确定的绩效目标；\n- 变更控制：在该项目中，我们将建立项目变更管理机制，通过规范的变更流程，对项目的实施过程中产生的变更进行控制，保证项目不会因为变更而失控；\n- 项目收尾：制定项目验收标准，使得项目有明确的验收目标，并最终能在项目工作全部完成后，形成验收的依据，最终完成整个项目。\n## 项目范围管理\n在项目实施的过程中，我们考虑到项目的主要成本需要投入到项目想要做的事情上，项目范围管理能保证项目在实施过程“做对的事”。\n项目范围管理是指对项目包括什么与不包括什么进行定义并控制的过程。这个过程用于确保项目组和项目干系人对做为项目结果的项目产品以及生产这些产品所用到的过程有一个共同的理解。\n在项目范围管理方面，项目前期我们通过编制项目范围说明书、用户需求说明书来实现初步的范围控制。在项目交付过程中，通过项目现场勘测、需求调研分析、需求评审以及系统深化设计以及评审来明确项目包括哪些事情。\n在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n- 项目实施过程中，严格按照用户需求进行项目方案的制定，以此方案进行项目实施；同时为了进行范围控制，建立规范的项目变更管理机制，通过对变更的控制，保证项目在正确的范围内进行。\n- 项目收尾阶段，我们通过项目范围核实来对项目进行范围的确认，项目范围核实的依据可能包括项目建设方所提供的项目招标要求、合同、需求说明书以及相关的变更说明等。\n## 项目进度管理\n进度是项目管理过程中最重要的因素之一，我方在项目进度管理上首先将以用户在项目整体规划时所确立的项目实施周期为标准，在此基础上结合项目的实际情况，制定合理项目计划，对项目整体时间进行规划。并对项目各个阶段制定更为详细的项目阶段计划。计划的建立，首先保证了项目在进度上监控的可能。同时通过项目进度计划的制定，一定程度上规避了项目在进度上的风险，或者说为进度风险的识别建立了基础。\n在项目实施过程中，通过对项目计划的监督来保证项目的进度监控，当项目进度发生偏移时，我们将通过增加资源，或增大其他方面的投入来保证项目按时保质的进行。\n同时也将根据项目的实际情况或者用户项目建设方面的变更或者因为其他风险的影响对项目计划进行调整，保证项目计划可行、可监控。\n### 概述\n在项目执行和管理的过程当中，因为不确定性以及渐进明细是项目的主要特性之一，长沙市机关事务管理局智慧后勤服务管理平台建设项目是一个综合型多系统相对负责的综合型系统集成项目，包括网络系统的建设、云平台的应用、新旧网络的融合、视频监控系统建设、智能交通建设、智慧后勤系统建设以及移动应用的建设等等，项目在执行交付过程中需要跨部门、跨单位多系统的协调和集成。项目要求在较短的实施周期内完成交付，从项目管理的角度来分析，项目的风险以及资源投入都将增加，为了保证项目进度以及项目的质量，特制定以下的项目进度保障。\n### 明确项范围\n项目进度计划是项目管理计划的核心内容之一，也是指导整个项目进行的主要计划之一，项目计划的科学制定，是项目能确保进度的主要措施之一。\n项目进度的制定依赖于项目的建设范围，所以，在项目规划阶段，项目范围的明确非常重要，只有在相对明确的项目范围上制定进度计划，才能确保项目进度计划的可执行性。在长沙市机关事务管理局智慧后勤服务管理平台建设项目的规划阶段，我方将组织项目团队对项目施工现场进行勘测并对项目软件系统需求进行调研和分析，勘测调研以及需求调研目标即是尽量明确项目的建设范围，具体工作包括但不限于：\n- 项目资料的收集和知识转移，在项目规划阶段，通过对项目前期资料以及方案的收集、设计单位的知识转移等工作，完成项目的知识转移，让项目团队能尽量完整的获取项目前期的知识，明确项目的建设内容与建设目标；\n- 组织项目团队进行现场勘测调研，勘测调研的内容包括本次项目安装设备的机房环境的勘测调研、相关综合布线环境的勘测调研、需要对接系统的勘测调研、智能终端设备安装环境的勘测调研、智能交通设备施工安装环境的勘测调研等；\n- 组织产品组人员进行项目需求调研和分析，明确项目软件系统建设的范围。\n- 形成项目需求说明书，通过知识转移与初步的勘测调研和需求调研工作，形成项目需求说明书，作为项目进度计划制定的基础之一。\n### WBS\nWBS是项目进度计划制定的基础，WBS：工作分解结构是指将项目的交付成果以及完成相应成果所需要的工作进行分解，分解到40小时左右的工作包。WBS的分解遵循相应的规则：\n- 100%包含：分支上下100%包含；\n- 不可再分：最底层状态相对独立不可再分；\n- 信息透明：分解到可以充分估算完成该成果所需的时间、费用、资源等；\n- 独立责任：分解到可安排一个责任者；\n- 滚动规划：远期工作可暂时不分解。\n项目工作分解结构应包含项目所有必须交付的成果以及完成相关交付内容所需要做的工作。即WBS应能体现本项目所有的交付物与相应的工作。\n同时WBS也是整个项目管理过程的核心，项目经理通过WBS完成项目进度计划的制定，也需要通过WBS进行项目风险分析。项目的人力资源计划、项目人力成本估算均可以通过项目WBS来完成。\n### 制定计划\n在WBS的基础上，结合长沙市机关事务管理局智慧后勤服务管理平台建设项目的实际要求，通过排列活动顺序、估算活动持续时间、估算活动资源等动作完成项目进度计划的制定。\n在长沙市机关事务管理局智慧后勤服务管理平台建设项目中，根据项目实际情况采取倒推的方式进行进度计划的制定，在项目活动持续时间估算的过程中，先设定具体的交付和验收要求时间点，再逐步反推到项目各个阶段，相对合理的进行各个阶段时间的分配，再在各个阶段内进行各个活动时间的分配，最终根据各活动的紧前关系来评估计划的可行性和具体的资源需求以及资源冲突的可能性。\n### 控制进度\n在项目执行交付的过程中，本项目安排项目经理进行项目的全生命周期管理，在项目管理和监控过程中，控制进度是监控事项中的重点内容之一，控制进度的目标就是确保项目进度与项目计划之间的偏差尽量小。\n为了确保项目进度计划，项目经理乃至项目组需要进行包括但不限于下列事项的：\n- 项目执行过程中，尽量确保项目资源按照项目资源计划提供给项目；\n- 明确项目采购计划，确保项目各个阶段的到货是按采购计划执行的；\n- 提前进行项目风险识别和评估，并制定风险应对措施，通过科学的风险应对确保项目进度；\n- 阶段性的进行项目进度检查，通过偏差分析，明确项目状态，并通过增加资源或成本的方式来确保进度计划，例如通过短期的赶工来确保项目进度；\n- 当项目进度确实出现较大偏差并无法纠正时，应及时的组织项目会议对项目进度计划进行调整，确保后续阶段的项目可控。\n## 项目成本管理\n在项目成本管理方面，我方通过对项目范围内所有工作进行整理分析，通过对项目需求进行详细的调研和分析后，进行成本预算的制作。\n为使项目成本控制在计划目标之内，我们将对项目计划、控制、调整、核算、分析和考核等管理工作进行严格的把空。确保在批准的预算内完成项目。\n具体包括制定成本管理计划、成本估算、成本预算、成本控制四个过程来完成。项目成本管理贯穿整个项目的实施过程中。\n\n图 项目成本管理流程图\n除此之外，在本项目的实施过程中，除通过对计划的监督来控制成本外，在方案制定阶段，尽量通过利旧、对采购设备的选型以满足用户需求为基准，保证用户投入最小能获得最大的项目成功。\n加强事先控制的措施。一是要加强制度建设。二是对项目成本费用的进行预测与计划。项目开工前必须作科学的分析论证,预测出完整项目所需要的总成本额,以此作为进行计划成本控制与目标考核的依据。对每一个项目的开展,都应当有精心的预测,以免造成不应有的失误。项目部人员应做好项目开工前的准备工作,选定先进的施工方案,选好合理的材料供应商,制定好该项目的成本计划,做到心中有数。在建设中严格审批,从而达到控制支出的目的。三是控制主要材料成本支出。一方面，在数量上,首先把住材料进场关,防止备料过程中材料数量亏吨现象。其次还要避免在项目开展过程中材料数量的损失浪费现象和料场保管过程中的流失现象,如果控制好材料运行中这“三个环节”完全可以保证材料数量避免亏吨现象。另一方面，在价格上,防止价格偏高现象。首先要了解市场价格以及产地、质量、厂家实力信誉情况,做到货比多家,以最低的价格选购同样数量的材料,既保证质量又达到成本价最低。\n加强事中控制(过程控制)的措施。应做到：一是加强信息化管理,提高统计分析的管理水平。要积极创造条件、优化施工方案、改进施工工艺、严格落实质量责任、克服质量通病,用杜绝质量事故、不停工、不返工来有效节约成本。安全是获取效益的保证。首先安全是项目管理中最重要的任务。项目安全管理必须要及时进行危害辨识,确定项目中安全管理重点部位,加大安全设施投入,落实管理责任和保证措施,同时项目安全主管经理和安全员要深入施工现场,确保万无一失。三是加强检查监督工作。要随时检查制定的规章制度落实和执行情况,与每道工序工艺和技术规范操作情况,控制好管理人员手中的权力,各负其责,检查监督各个环节的落实情况,发现问题及时解决、及时处理,做到信息反馈及时。\n加强事后控制的措施。进行事后分析是下一个循环事前控制科学预测的开始,是成本控制工作的继续。在坚持每个项目都实行综合分析的基础上,及时检查、分析、修正、补充,以达到控制成本和提高效益的目标。这些措施包括：一是进行成本费用分析。成本费用分析要以施工管理强弱、技术管理高低、材料费用节超、人工费用多少、机械使用费用大小、其他直接费支出情况、管理费用增减、预算收入余缺等为切入点。成本费用分析内容、数据必须真实准确,常用因素分析法进行分析对比,找出偏差原因,提出挖潜措施,改进成本管理工作,以提高企业的经济效益。二是开展项目责任成本执行情况考核。必须落实项目责任,做到完工一个、清理一个、考核一个、奖惩一个。\n## 项目质量管理\n本小结涉及内容为在项目管理过程中，我们所采用的质量控制方法及程序。这在指导与监督服务器系统建设有着非常重要的作用，是我们向最终用户提交高满意度成果的保证。\n具体内容包括几个方面：\n- 质量管理规范与标准\n- 项目质量保证策划\n- 质量度量\n- 质量考核\n- 过程监控与阶段评审\n- 系统测试与验收\n- 配置管理\n- 文档管理\n- 独立的项目审计\n### 规范与标准\n项目质量管理与企业质量管理的最大区别是由项目过程的一次性、项目产品的独特性和项目交付物的逐步形成特征决定的。ISO 9001标准主要是针对企业在经营管理中的具有重复性的要素或过程。实施ISO 9001质量管理体系标准的目的是企业通过持续的改进活动，不断发现过程误差、系统误差和纠正过程误差、系统误差，从而持续地改善过程输出的质量。而项目管理中的39个标准过程（PMI）或42个要素（ICB）全部是一次性过程或要素，故项目的质量管理核心是过程输出阶段结果的验证和预防措施的制定和实施。因为项目的有些质量缺陷并没有采取纠正措施的机会，或者质量缺陷的后果是毁灭性的。ISO 9001提供的是企业的质量管理体系模式，其中只有质量计划要素（ISO 9001：1994）或产品实现策划过程（ISO 9001：2000）涉及到项目质量管理。事实上，ISO组织确实制订了一个还没有被广泛认识的项目质量管理标准，既ISO 10006标准。\n### 项目质量规划\n在本项目中必须统一标准，明确定义保证项目质量的责任和方法。结合项目的实际情况，质量保证策划可分为以下几点：\n- 项目经理在项目的进度、问题上进行监督、协调和指导。\n- 项目技术负责人在项目的技术问题、实施进度上进行监督和指导。\n- 项目经理进行项目的总体管理与监控，听取客户的意见，寻求改进的方法，由始至终负责整个项目的实施。\n- 选派具备专业特长的工程师认真准备针对自己领域的工作、培训或实验环境，听取客户对培训内容的建议和意见，圆满解决客户提出的相关问题。\n- 每一个阶段的工作内容结束后，做工作总结和定期的状态报告会，以保证客户和项目负责人能及时跟踪工作的进展。\n### 质量度量\n质量保证是针对项目实施过程的特定度量，目的在于度量项目规模、项目成本、项目进度、客户满意度等。使用度量数据进行估计、监控项目的进度和执行情况、确定项目是否符合质量要求。对项目实施过程中的实施工艺进行量化过程，目的在于对项目实施工艺进行控制和改善。通过质量度量可以改进项目实施工艺，促进项目实施成功。度量方式是通过测试、审核、调查、统计等方式得出量化的指标。通过分析度量数据可及时发现项目实施中存在的问题，从而有针对性的制定解决方案。\n### 质量考核\n在项目实施过程中，对项目中的产品及实施工艺质量进行考核，方可保证项目实施的质量。一个项目的实施涉及到各方的密切合作，任何一方，任何一个阶段的工作都不是孤立的，与项目的其他各部分有着密切的关联，因此在系统实施过程中：\n- 项目实施人员要密切配合，并且要分工明确、责任分明，严格遵守项目各阶段的标准、规范和流程。\n- 项目各部分，各小组的设计文档，实施方案，测试计划和工程进度要充分考虑其他项目小组的工作要求，必要时需要其他小组或部门的人员参与，以确保系统实施顺利。\n- 成立质量小组，协调项目各方的工作，进行资源、人员的调配，保证项目的进展和质量。\n- 质量小组将定期或不定期的举行检查会议，检查系统实施的进度和质量，对存在的问题进行推动。\n### 过程监控与阶段评审\n在项目计划阶段，成立由技术专家与用户组成的项目评审小组，职责如下：\n- 对项目可行性进行评审；\n- 对项目实施计划进行评审；\n- 对每个阶段成果和阶段报告进行评审。\n### 系统测试与验收\n项目实施过程包括多个方面的工作和任务，每一项任务的完成、每一个文档的提交、每一个设备、软件或应用系统的交付，都有相应的完成标志和测试、评估和验收标准。对于系统、网络与应用等重大的工作里程碑事件，测试验收工作更为严谨和充分，计划更为周密。\n按照项目实施程序，整个项目实施过程中要对不同的交付项目进行如下各类测试和验收中的一种或几种。\n- 安装测试\n采用标准的测试程序(如硬件设备开机自检)和操作方法，对交付件进行测试。通常用于对硬件设备和系统软件的验收。\n- 系统集成测试\n对整个系统，包括硬件、系统软件、应用程序、网络等各个方面进行全面测试，验证系统是否达到设计目标的测试过程。\n- 性能测试、压力测试\n性能测试是对系统设计的各种数量化指标进行测试，检验交付系统是否达到设计要求的过程。压力测试的内容包括测试系统在特定工作负载下的性能表现。\n### 配置管理\n配置管理工作贯穿于整个项目实施过程中，配置管理人员的工作内容如下：\n- 制定配置管理计划\n为配合项目管理，在项目实施初期，配置管理人员与项目经理协商，制定配置管理的计划，规划未来的配置管理工作。\n配置管理计划的约束条件：\n- 配置管理的规划必须以项目开展的工作为基础，参考工作说明书；\n- 配置管理计划的编写必须以公司的流程为模版，与工作说明书和质量保证计划相一致；\n- 配置管理计划能够指导未来的配置管理工作，配置管理工作必须以配置管理计划为基准；\n- 配置管理计划必须经过最终的评审通过，才能够成立；\n- 如配置管理计划不能满足未来配置管理工作的需要，可以再增加配置管理工作计划作为配置管理计划的辅助，指导未来的配置管理工作；\n- 规范配置管理环境配置管理计划制定结束后，配置管理人员要依据计划实施配置管理的前期工作；\n- 与项目负责人讨论变更控制的实施与项目负责人讨论项目中变更控制实施的措施，指定出相应的变更控制流程。\n### 文档管理\n文档在技术实施人员、维护人员、用户以及计算机之间的关系是多向的。在项目的各个阶段中以文档作为前阶段工作成果的体现和后阶段工作的依据，这个作用是显而易见的。我们在文档管理中把文档分为三类：\n- 管理文档：项目实施人员需制定一些工作计划或工作报告，这些计划和报告都要提供给管理人员， 并得到必要的支持。管理人员则可通过这些文档了解项目安排、进度、资源使用和成果等。\n- 工程执行文档：这类文档是为了保证项目实施按照规范和正规流程来执行，也是为了保证工程质量。\n- 用户文档：实施人员为使用户了解产品的使用、操作和维护提供详细的资料。\n### 项目审计\n在项目的实施过程中，独立审计的目标是对被审计项目的合法性、完整性及实施方法的一致性表示意见。独立审计人员对于项目实施过程中发现的实施工艺、方案出现的缺陷或漏洞，可通过审计报告提交项目经理，并提出解决问题的建议。\n## 人力资源管理\n### 项目组织架构\n\n表 项目组织架构图\n### 角色定义\n表 项目组角色定义表\n| 角色 | 主要职责 |\n| :---: | :---: |\n| 项目中心 | 参与立项评审； 指派项目经理，为项目分配合适的人力资源，协助项目经理建立项目团队； 监控项目执行过程，及时了解所有项目的人力资源、进度、质量情况，协商处理问题； 在项目结束后，对项目以及项目组成员进行综合评估； 提升人员技能，考核人员绩效。 |\n| 项目经理 | 项目经理是立项之后的项目主要责任人，负责项目全生命周期管理，主要职责是带领团队在预定的时间和成本之内，交付质量合格的项目/产品。项目经理对本项目的进度、质量、成本负主要责任。 负责本项目的全面管理（包括整体、范围、时间、成本、质量、人力资源、沟通、风险、采购、干系人）； 确保项目能在既定的时间、成本范围内交付满足项目要求质量的成果或者产品； 在项目结束时，总结项目知识和经验教训，完善文档； 对项目成员的业绩进行评估。 |\n| 决策支持组 | 由部门经理、项目经理、专家等人员组成；主要职责是参与项目重大决策以及评审。 |\n| 质量管理组 | 质量管理组主要对项目质量情况进行监督 监督项目的质量规划情况； 对项目过程质量进行监控； 核实项目整体交付质量。 |\n| 商务组 | 负责产品（或合同项目）的销售，签订商务合同、跟踪合同执行过程。 负责项目客户关系维护； 商务沟通。 |\n| 售前组 | 1、负责项目售前阶段的技术沟通； 2、以客户的需求为基础，在沟通的过程中根据公司产品情况以及公司的战略给客户推荐完整的解决方案； 3、完成项目售前阶段的其他工作，包括项目招投标过程等； 4、往售后完成项目知识转移； |\n| 技术组 | 负责项目技术工作： 组织项目技术方案、技术标准的编制和审核； 参与相关的技术评审会议，在技术方面对项目实施过程进行指导和检查； 负责项目技术问题的处理，对专项施工、重要工序、重大问题进行处理； 进行项目总结，完成知识积累和转移。 |\n| 实施组 | 按照项目实施流程规范完成项目整体实施工作： 实施前的施工现场勘测、调研和确认工作； 完成项目现场的实施工作； 完成相关提交物的编制工作； 配合完成项目分保测评工作。 |\n| 培训组 | 负责项目的培训工作，包括但不限于： 制定项目培训方案； 完成项目培训工作，完成培训环境搭建、项目培训课程编制； 完成项目培训工作； |\n| 测试组 | 负责项目的测试工作，包括但不限于： 测试方案制定； 测试环境搭建（必要的情况）； 项目测试用例编制； 根据项目要求配合第三方机构完成测试； 完成测试报告。 |\n| 维护组 | 负责项目维护工作，包括但不限于： 项目维护方案编制； 项目现场维护工作，相关问题处理； 项目维护报告、问题处理报告编制。 |\n\n### 人力资源管理计划\n在项目管理过程中，人力资源管理计划非常重要，项目交付过程的各个环节都涉及到项目组成员的参与。项目组成员的能力要求、何时进入项目、何时释放资源都关系到项目是否以较低的成本高效、高质量完成项目交付的关键。\n在项目规划阶段，项目经理组织项目组成员对项目工作和交付内容进行工作分解，形成WBS，根据WBS的分解原则，每个工作包基本上都能分配给一个资源去完成相应的工作。\n在进行资源匹配的过程中，项目经理完成项目活动排序后即需要进行每项活动对项目资源的需求评估。同时，也需要评估相应资源匹配情况下活动需要的持续时间。在做资源分配时，一方面，需要考虑资源在项目交付过程的延续性，避免资源的浪费。另一方面，也需要考虑资源在项目执行过程中因过度分配而造成的资源冲突。\n### 资源的释放\n人力资源计划不仅是项目经理对人力资源的需求，同样也是约定在具体的时间完成资源的释放，节省人力成本。\n项目任务多是并行安排，串行推进，随着项目的进展，项目对人力资源的需求也会发生变化，项目经理应该根据项目对人力资源的变化调整对资源的申请，当资源在项目中的工作结束时，项目经理应尽快释放资源。\n### 项目的延期\n当项目某项或某几项工作出现延期时，如果按照人力资源计划释放资源则会导致项目工作无法完成，此时项目经理会根据项目延期情况制定相应的纠偏措施。\n通过赶工的方式来完成延期的工作，确保项目能恢复到预期的进度，此时，项目经理需要制定临时性的人力资源计划，在短时间内容协调更多的资源投入到项目中，并延时每天或每周的工作时间确保项目进度；\n项目经理发现偏差无法通过赶工等相应的措施纠偏时，项目经理会根据项目当前的实际情况调整项目进度计划，以确保计划与项目实际情况吻合。此时项目经理需要重新调整项目的人力资源计划，相关的项目资源也需要根据人力资源的调整来调整进出项目的时间。\n## 项目沟通管理\n### 沟通管理概述\n项目是一项需要多方的协调才可能成功的完成的临时性工作。沟通是项目管理过程中最重要的工作之一，也是确保项目各团队、各成员能协作推进项目的基础手段。项目沟通机制的建立是项目交付执行过程的重点工作之一。\n沟通管理是为了确保项目信息及时适当的产生、收集、传播、保存和最终配置所必须的过程。项目沟通管理是一系列过程的集合，这些过程有助于确保正确的人员发送、接收和理解正确的信息。项目沟通管理流程如下：\n- 规划沟通计划；\n- 管理沟通；\n- 监控沟通。\n本项目的实施过程中，为了保证项目的顺利进行，首先项目将建立稳定的项目组织，建立健全、多元的沟通机制，以便在项目实施过程中，各方都能顺畅的对项目中出现的任何状况进行沟通。项目经理需要清楚地概述将如何管理项目之间的沟通。这可以通过创建项目沟通管理计划来实现。\n### 干系人识别\n项目干系人的识别是明确项目沟通机制的基础，人作为沟通的主体，正确的识别项目干系人，明确干系人在项目当中的职责、对项目产生哪些影响，同时明确干系人以何种方式参与项目，且将产生哪些信息，并能以何种方式获取项目的信息。\n项目经理在完成干系人识别后，应建立干系人清单，项目经理在干系人清单中应对干洗人的基本信息进行描述和说明。\n### 沟通方式与途径\n项目管理过程中的沟通方式包括很多中，包括正式和非正式的沟通，项目经理应根据不同的项目事项采用不通的沟通方式，项目管理过程中的沟通包括：\n- 面谈、微信等及时远程沟通软件以及其他非正式沟通方式；\n- 远程沟通、语音或电话会议；\n- 项目例会；\n- 专题会议；\n- 评审会议；\n- 书面沟通。\n沟通的主要目标是通过沟通来达到各个沟通成员之间对某项事务达成一致或达成共同的认知，以便完成决策。项目经理应根据项目沟通管理计划采购不同的沟通方式来完成项目沟通。\n表 会议纪要\n| 会议名称： | 会议名称： |   |   |   |   |   |   |\n| ---: | ---: | --- | --- | --- | --- | --- | --- |\n| 会议时间： | 会议时间： |   |   | 会议地点： |   |   |   |\n| 会议召集人： | 会议召集人： |   |   | 会议主持人： |   |   |   |\n| 会议类型： | 会议类型： |   |   | 会议方式： |   |   |   |\n| 会议议题： | 会议议题： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： | 姓名 | 单位 | 单位 | 单位 | 职务 | 职务 |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 与会人员： | 与会人员： |   |   |   |   |   |   |\n| 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 | 会议议程 |\n|   |   |   |   |   |   |   |   |\n| 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 | 会议结论 |\n| 序号 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 | 结论描述 |\n| 1 |   |   |   |   |   |   |   |\n| 2 |   |   |   |   |   |   |   |\n| 3 |   |   |   |   |   |   |   |\n| 4 |   |   |   |   |   |   |   |\n| 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 | 遗留问题 |\n| 序号 | 问题描述 | 问题描述 | 问题描述 | 问题描述 | 问题责任人 | 问题责任人 | 解决时间 |\n|   |   |   |   |   |   |   |   |\n|   |   |   |   |   |   |   |   |\n\n### 沟通管理计划\n项目经理应根据项目的管理要求制定沟通管理计划，项目沟通管理计划包括：\n- 明确沟通的目标，例如：某变更专题会议的沟通目标是完成对项目某项变更内容的评审，以获得项目组包括甲方以及第三方项目参与单位的认可；\n- 明确沟通的干系人；\n- 明确沟通的途径，包括沟通采用的方式；\n- 建立沟通时间表。\n项目沟通管理计划应该足够详细，包括为什么要发送信息、发送给谁、发送哪些具体信息、如何发送以及何时发送。\n### 沟通计划的管理\n项目沟通管理计划被创建并批准后，项目经理的工作就是确保它的成功执行。同时，项目经理需要根据项目情况对管理计划定期审查和更新，以反映对项目的任何更改。项目经理还必须管理项目沟通管理计划的执行。这包括：\n- 数据的收集和分析；\n- 为沟通创建信息；\n- 沟通信息的传输或分配；\n- 储存任何通讯报告、档案或文件；\n- 检索任何存储的沟通；\n- 在项目结束或设定日期后处理任何旧的沟通。\n### 监控项目沟通\n监控项目沟通是指在项目交付管理过程中，项目经理对整个项目生命周期内的项目沟通进行控制和监控，具体包括但不限于以下工作：\n- 相关的项目沟通是否按计划进行；\n- 发布的信息是否被受众所接受；\n- 发布的信息是否被正确的理解，尽量消除项目沟通过程中的噪声；\n- 信息发布的过程是否确保不通的干系人是否收到了其应该收到的信息。\n在项目经理进行项目沟通管理监控是，对于项目沟通中的方式、沟通频率都是监控沟通中的一部分。\n## 项目风险管理\n风险管理是指在项目实施的过程中，通过对项目内外部相关的各个方面进行整体分析，来进行风险的识别，并通过对风险的分析来判断风险的影响，制定可行的风险应对计划，并由项目组成员对相关的进行跟踪和监控，以确保最大程度的减小风险对项目的危害。\n### 风险识别\n风险识别包含两方面内容：\n- 识别哪些风险可能影响项目进展及记录具体风险的各方面特征。风险识别 不是一次性行为，而应有规律的贯穿整个项目中。\n- 风险识别包括识别内在风险及外在风险。内在风险指项目工作组能加以控制和影响的风险，如人事任免和成本估计等。外在风险指超出项目工作组掌控力和影响力之外的风险。\n通过界定项目范围，明确项目范围，将项目范围内的任务细分为更具体更便于管理的部分，能够避免遗漏而产生风险。\n项目进行的过程中，加强对变更的控制，通过对变更的分析来评估变更带来的风险。\n当风险识别以后，我们将对已经识别的风险进行记录，以保证后续能对风险进行持续的跟踪。\n#### 风险识别原则\n风险识别在整个风险管理过程中都占有重要位置，只有正确认识风险，才能正确分析风险，进而才能合理应对和控制风险带来的影响。然而项目风险大多数情况下是潜在的，随着项目生命期的发展，新风险可能随时出现。因此，在项目风险识别过程中，最重要的就是不能遗漏风险因素，特别是对项目整体目标有重大影响的因素。为了更好地进行风险识别，风险识别过程中应遵循如下的主要原则。\n- 由粗及细，由细及粗\n由粗及细是指对风险因素进行全面分析，并通过多种途径对项目风险进行分解，逐渐细化，以获得对项目风险的广泛认识，从而得到项目初始的风险清单。由细及粗是指以项目初始风险清单为基础，从众多风险中，确定那些对建设项目目标实现有较大影响的风险因素，作为主要风险，详细识别其风险来源、风险特征和风险影响等。\n- 多种识别方法的选择与综合运用\n大多数项目可能同时遇到各种不同性质的风险，因此采用单一的识别方法是不可取的，必须综合运用多种方法，取长补短，多方面识别项目的风险。当然，对于特定活动或者事件，需要根据实际情况采用有效的识别方法。\n- 谨慎排除可能的风险\n不要轻易否定或排除某些风险，要通过认真的分析进行确认或排除。必要时，可进行实验论证，对于不能排除但又不能肯定予以确认的风险按确认考虑。\n- 全员参与原则\n由于风险识别的广泛性，要求项目的风险管理人员应尽量向与项目有关的人员广泛征求意见并进行归纳整理，以求对项目风险的全面了解。\n- 动态识别原则\n风险识别的全生命周期性表明随着项目生命期的发展，项目不同阶段会有不同的风险。为了识别随时可能出现的新风险，必须预先制定一个连续的风险识别计划，满足风险动态识别的需要。\n- 经济原则\n经济原则是指依据项目风险影响的大小来确定投入风险识别的资源和精力。对项目整体目标有重大影响的风险，需要花较大的精力、用多种方法进行识别，以期最大程度地掌握风险情况；但对于影响项目整体目标较小的风险因素，则没有必要花费大量时间和精力进行识别。如果风险识别的费用超过风险带来的损失就丧失了风险管理的意义。\n- 资料积累原则\n资料的不断积累是开展风险管理的重要基础，风险识别过程中产生的记录是主要的也是重要的风险资料之一，对于今后的风险管理以及类似项目的风险识别可以提供巨大帮助。风险识别工作开展前应准备好将要用到的记录表格，当风险识别工作完成后，将所获取的相关资料整理保存。\n#### 风险识别内容\n- 识别并确定项目有哪些潜在的风险\n这是项目风险识别的第一项工作目标，因为只有识别和确定项目可能会遇到哪些风险，才能够进一步分析这些风险的性质和后果。所以在项目风险识别中首先要全面分析项目发展变化的可能性，进而识别出项目的各种风险并汇总成项目风险登记册。\n- 识别引起项目风险的主要影响因素\n这是项目风险识别的第二项工作目标，因为只有识别出各项目风险的主要影响因素，才能把握项目风险的发展变化规律，才有可能对项目风险进行应对和控制。所以在项目风险识别中要全面分析各项目风险的主要影响因素及其对项目风险的影响方式、影响方向、影响力度等。\n- 识别项目风险可能引起的后果\n这是项目风险识别的第三项工作目标，因为只有识别出项目风险可能带来的后果及其严重程度，才能够全面地认识项目风险。项目风险识别的根本目的是找到项目风险以及消减项目风险不利后果的方法，所以识别项目风险可能引起的后果是项目风险识别的主要内容。\n#### 风险识别的目的\n项目风险识别的目的主要体现在三个方面：\n- 风险识别有助于确定风险管理的对象；\n- 存在于项目内部及外部环境的不确定因素是多种多样、错综复杂的，有的是静态的，有的是动态的；有的是潜在的，有的是已经存在的，因此需要利用科学的方法进行分析。没有风险识别的过程，无法解决项目不确定的复杂性，风险管理就是盲目的，不切实际的。通过风险识别，可以识别出可能对项目进展有影响的风险因素、性质以及产生的条件，并据此衡量风险的大小，作为制定风险应对计划的依据。\n- 通过风险识别，记录具体风险的各方面特征，并提供最适当的风险管理对策；\n- 风险识别是一项反复的过程，随着项目生命期的渐进，又会产生新的风险。风险反复发生的频率以及参与的各项目过程也会因项目而异，但这并不意味着风险识别是多余的工作，风险识别直接影响风险管理的决策质量，进而影响整个风险管理的最终结果，尤其是在项目的前期。\n- 风险识别有助于提高风险分析的有效性。\n险识别将风险可能引起的后果记录成册，为风险分析提供必要的信息，同时增强项目组织成员对项目成功的信心。风险识别包括识别项目的内在风险及外在风险：内在风险指项目管理组织能加以控制和影响的风险，如成本估计、工期预测、人事任免等；外在风险指超出项目管理组织控制力和影响力之外的风险，如某些市场风险、自然风险和政治风险等。任何一种风险因素在识别阶段被忽略，都可能导致整个风险管理的失败，从而造成不可估量的经济损失。\n#### 风险识别的结果\n- 已识别的项目风险\n已识别的项目风险是项目风险评估的最重要结果，它通过定性的项目风险清单来表示，该清单对项目风险的描述应该尽量简单，容易理解。\n- 潜在的项目风险\n潜在的项目风险是指没有迹象表明会发生的风险，但是人们可以主观判断预见的风险，如重要技术专家的流失。当然，潜在的项目风险可能会发展成为项目的真正风险，因此要给予足够的重视。项目承担单位应该根据风险来源进行适当的分类，并以表格或文字做清楚的描述，编制出潜在的项目风险清单，为风险管理的后续过程打好基础。\n- 对项目管理其他方面的改进\n在项目风险识别的过程中，可能会发现项目管理其他方面存在一些问题，借此机会可以进行修改和完善。\n### 风险评估\n项目风险评估是在风险识别之后，通过对项目所有不确定性和风险要素的充分、系统而又有条理的考虑，确定项目的单个风险。然后，对项目风险进行综合评价。它是在对项目风险进行规划、识别和估计的基础上，通过建立风险的系统模型，从而找到该项目的关键风险，确定项目的整体风险水平，为如何处置这些风险提供科学依据，以保障项目的顺利进行。\n要让所有的事情都去掉主观性是很困难的，但是实践和经验可以提高项目经理预测风险的概率和影响的能力。\n#### 项目风险评估流程\n风险评估过程由以下六个基本步骤构成：\n评估所有的方法：所有不同的方法都应该考虑到，所有影响风险的因素都必须考虑。头脑风暴法或其他的风险识别方法应该使用得透彻，所有可能影响风险发生的因素都应该考虑到。\n考虑风险态度：决策者的风险态度是需要重点考虑的。不同的人会用不同的态度估计风险，并且使用同样的数据做出不同的决定。一些决策者，与其他的决策者相比较，或多或少是厌恶风险的，并且会根据给定的数据，对风险的发生和影响做出不同的主观评估。\n考虑风险的特征：风险是否已经识别、它们是否可控和它们的影响将会怎样，这些都是需要考虑的。控制已经识别(例如内部可控的)的风险而不是其他的(例如外部不可控的)风险，这是可能的。所有可能的风险特征都需要识别。\n建立测量系统：风险需要用定量或定性(或综合的)方法测量和评估。一些方法是使用已经建立的模型，这些模型输入了风险的特征和风险面临的情况，这样，根据历史经验就可以做出预测。\n解释结果：测量中生产的数据需要解释。这种解释同样也有定性的或定量的。测量过程的结果给预测和可能的结果提供了一种暗示，但是这些仍需要解释。两个不同的解释人员可能用的是同样的数据和结果，但他们所做的评价却不相同。解释可能会根据观察到的数据用外推法对未来的结果做出预测。\n进行决策：整个过程的最后阶段需要决定哪些风险会保留，哪些风险要转移出去。风险是否保留取决于组织的实际情况和决策者的态度。\n#### 项目风险评估依据\n- 已识别的风险\n已识别的科技计划项目风险是项目风险评估的基础。\n- 项目的进展情况\n在项目的不同阶段，所面临的风险程度是不同的。一般来说，随着项目的进展，项目的风险和不确定性就会逐步降低。\n- 项目的性质和规模\n由于各科技计划项目的性质不同，风险对其影响程度也不一样。一般来说，较小的科技计划项目风险程度较低，大型、复杂的项目或高新技术项目的风险程度则会比较高。\n- 数据的准确性和可靠性\n数据的准确性和可靠性都会影响项目风险评估的结果，所以要对数据的准确性和可靠性进行评估。\n#### 项目风险评估结果\n项目风险评估最重要的结果就是量化了的项目风险清单。该清单综合考虑了项目风险发生的概率、风险后果的影响程度等因素，因此项目承担单位可依此对项目风险进行排序，从而确定采取什么样的风险应对措施以及控制措施应实施到什么程度。\n项目风险清单一般可包括以下内容：\n- 项目风险发生概率的大小；\n- 项目风险可能影响的范围；\n- 对项目风险预期发生时间的估算；\n- 项目风险可能产生的后果；\n- 项目风险等级的确定。\n项目风险可分为四个等级：\n| 序号 | 等级定义 | 说明 |\n| :---: | :---: | :---: |\n| a | 灾难级 | 这类等级的风险必须立即予以排除 |\n| b | 严重级 | 这类风险会造成项目偏离目标，需要立即采取控制措施 |\n| c | 轻微级 | 暂时不会对项目产生危害，但也要考虑采取应对措施 |\n| d | 忽略级 | 这类风险可以忽略，不采取控制措施 |\n### 风险应对\n项目风险应对措施主要包括如下几种：\n- 项目风险规避措施\n这是从根本上放弃项目或放弃使用有风险的项目资源、项目技术、项目设计方案等，从而避开项目风险的一类应对措施。例如，对于存在不成熟的技术坚决不在项目实施中采用就是一种项目风险规避的措施。\n- 项目风险遏制措施\n这是从遏制项目风险引发原因的角度出发应对项目风险的一种措施。例如，对可能因项目财务状况恶化而造成的项目风险(如因资金断绝而造成烂尾楼工程项目等)，采取注入新资金的保障措施就是一种典型的项目风险遏制措施。\n- 项目风险转移措施\n这类项目风险应对措施多数是用来对付那些概率小，但是损失大(超出了承受能力)或者项目组织很难控制的项目风险。例如，通过购买工程一切险等保险的方法将工程项目的风险转移给保险商的办法就属于风险转移措施。\n- 项目风险化解措施\n这类措施从化解项目风险产生出发，去控制和消除项目具体风险的引发原因。例如，对于可能出现的项目团队内部和外部的各种冲突风险，可以通过采取双向沟通、调解等各种消除矛盾的方法去解决，这就是一种项目风险的化解措施。\n- 项目风险消减措施\n这类风险应对措施是对付无预警信息项目风险的主要应对措施之一。例如，对于一个工程建设项目，在因雨天而无法进行室外施工时，采用尽可能安排各种项目团队成员与设备从事室内作业的方法就是一种项目风险消减的措施。\n- 项目风险储备措施\n这是应对无预警信息项目风险的一种主要措施，特别是对于那些潜在巨大损失的项目风险，应该积极采取这种风险应对措施。例如，储备资金和时间以对付项目风险、储备各种灭火器材以对付火灾、购买救护车以应对人身事故的救治等都属于项目风险储备措施。\n- 项目风险容忍措施\n这是针对那些项目风险发生概率很小而且项目风险所能造成的后果较轻的风险事件所采取的一种风险应对措施。这是一种最常使用的项目风险应对措施，但是要注意必须合理地确定不同组织的风险容忍度。\n- 项目风险分担措施\n这是指根据项目风险的大小和项目相关利益者承担风险的能力大小，分别由不同的项目相关利益主体合理分担项目风险的一种应对措施。这种项目风险应对措施多数采用合同或协议的方式确定项目风险的分担责任。\n- 项目风险开拓措施\n如果组织希望确保项目风险的机会能得以实现，这就具有采用积极的风险措施，该项发现措施的目标在于通过确保项目风险机会的实现。这种措施包括为项目分配更多和更好的资源，以便缩短完成时间或实现超过最初预期的好质量。\n- 项目风险提高措施\n这种策略旨在通过提高项目风险机遇的概率及其积极影响，识别并最大程度发挥这些项目风险机遇的驱动因素，致力于改变这种项目风险机遇的大小，最终促进或增强项目风险的机会，以及积极强化其触发条件，提高其发生的概率。\n## 项目采购管理\n项目采购管理包括从执行组织之外获取产品和服务的过程。项目采购主要包括以下几个方面：\n- 采购计划：决定采购什么，何时采购；我们将按照用户的要求制定详细的采购计划，保证项目采购活动的顺利进行。\n- 合同管理：与项目采购产品生产厂商或者供货厂商签订正规的合同，以项目建设方的要求为基础对合同条约进行要求，保证项目所需产品的高的服务标准，并及时的对项目第三方合同进行清算，确保项目的稳定，降低外部环境的其他风险。\n### 采购计划\n- 根据客户的要求和项目建设要求进行项目所需第三方产品的采购，在项目采购前，我们将根据项目合同要求以及项目建设时间要求等必要条件制定可行采购计划，对项目采购活动的采购内容、相关产品要求、时间计划、运输、交货验收等进行详细的安排，保证项目的采购活动能顺利的进行。\n### 合同管理\n- 在进行第三方产品采购时，我们将通过与供货商正规的合同签订来确保项目采购工作的自豪量，同时也将降低因第三方采购而给项目带来环境外的其他风险。\n### 发货与接收\n相关流程安排如下：\n- 在货物到达建设方指定地点前七天通知建设方货物准备以及到货情况等，其内容包括：\n- 相关合同号；\n- 设备名称；\n- 设备数量；\n- 价格；\n- 箱数；\n- 型号规格；\n- 重量和体积；\n- 拟发运的时间；\n- 其他必要的说明。\n- 向客户发出《交货计划和场地准备书》；\n- 安排所有货物均直接运送至项目建设方指定地点；\n- 发运的同时再次发出《收货通知》；\n- 在用户现场对检查货物包装与核对货单；\n- 若因我方延误告知而对用户造成的损失，由我方负责。\n#### 物流运输\n- 我方将联合长期合作的专业物流公司，仔细清点货物数量，检查货物包装是否完好。之后，安排运输方式（公路、铁路运输或空运），全程专人随同运输至最终用户指定地点，并负责搬运到指定设备安装位置，且我们承诺，我方将承担所有的运输费用。\n#### 包装和标记\n使用适于运输的坚固包装，并且根据合同货物的不同特性和要求采取防潮、防雨、防锈、防震、防腐和防粗暴装卸等保护措施，以确保合同货物安全无损地送达交货地点。由于包装不善所引起的货物锈蚀、损坏和损失均由我方承担。\n下面是一个包装箱四侧的标记实例：\n\n根据合同货物的不同特性和装卸运输上的不同要求，在包装箱相对的二个侧面上用中文标记“勿倒置”、“小心轻放”、“防潮”等标志和“重心”等装卸搬运时适用的通用图案，以利于装卸和搬运。每件包装箱内附一份详细装箱单和质量合格证。\n#### 货物接收\n在货物运抵用户指定地点后，我公司发货随同人员将与接收人按照货物包装箱数进行清点签收（完成开箱清点及初步检验的时间不迟于交货之日起四十日），并且双方都确认货物在运输过程中没有明显包装损坏。\n项目到货过程根据项目到货验收流程进行，我方在到货前进行到货报验申请，并将申请提交给建设单位、监理单位，项目到货时，监理单位组织项目到货验收工作，到货验收完成后，各方签署到货验收报告。\n\n# 项目培训方案\n## 培训概述\n长沙市机关事务管理局智慧后勤服务管理平台项目的培训工作主要是指在项目上线后进行的针对市机关事务管理局用户以及市机关事务管理局系统管理人员的针对性培训。\n在项目执行交付阶段，关键交付事项交付过程中，市机关事务管理局系统管理人员可选择性的参与项目交付工作，作为对项目系统熟悉的过程。\n长沙市机关事务管理局智慧后勤服务管理平台项目包括电子政务外网政务云资源的应用、移动应用端在长沙市现有移动应用平台上的嵌入、智慧安全用电系统的建设、本地机房建设、网络改造、AI视频监控系统以及智能交通管理系统的建设等内容。项目的培训也需要根据机关事务管理局对相关事项的管理智能进行培训。\n## 培训范围\n项目培训内容主要为长沙市机关事务管理局智慧后勤服务管理平台项目本期建设内容。具体包括：\n- 智慧后勤管理平台管理端；\n- 智慧后勤管理平台应用PC端；\n- 智慧后勤管理平台应用移动端；\n- 智慧安全用电终端设备；\n- AI视频监控系统终端、服务端设备；\n- 智能交通管理系统终端、服务端设备；\n- 项目新建以及改造网络系统以及相关的设备。\n## 培训对象\n长沙市机关事务管理局智慧后勤服务管理平台项目培训对象主要包括两个部分的人员：\n- 项目系统的相关使用人员；\n- 各部分业务的审批、管理人员；\n- 系统硬件设备以及网络系统的日常管理和维护人员。\n## 培训目标\n长沙市机关事务管理局智慧后勤服务管理平台项目培训目标主要包括以下几个部分：\n- 确保系统使用用户在日常工作和管理事务中能顺畅的使用系统，并通过系统的使用提升工作效率和管理效率。\n- 确保长沙市机关事务管理局智慧后勤服务管理平台项目后续相关的日常管理和维护人员能完成项目系统的日常运维和管理工作，并能对项目系统操作进行基本指导，同时能解决系统在运行过程中出现的轻微故障。\n- 确保长沙市机关事务管理局智慧后勤服务管理平台项目相关的硬件设备的管理和维护人员能完成项目的基本管理和运维，确保项目设备稳定的运行。\n项目培训目标能在无承建单位协助的情况下，系统能对建设单位形成稳定、顺畅的支撑。\n## 培训时间\n长沙市机关事务管理局智慧后勤服务管理平台项目培训时间安排在项目系统上线后，项目系统上线完成，项目系统初始化完成，项目正式进入试运行阶段。项目培训在系统上线部署完成、系统初始化完成后一个星期内完成。\n项目集中培训的时间大概为四个小时左右。\n## 培训方式\n项目采用多种培训方式结合的形式进行项目培训。对于项目系统运行维护和管理人员，可以在项目交付过程中采用一对一的培训方式，通过项目交付过程中一对一的培训完成对项目日常运维和管理人员的培训。\n对于项目普通用户以及系统管理审批人员，采用集中培训的方式，通过在统一的培训环境下安排项目培训讲师进行集中培训。\n## 培训场地\n长沙市机关事务管理局智慧后勤服务管理平台项目培训对象主要是机关事务管理局相关办公人员，培训场地可选用机关较大的会议室进行集中培训，以系统操作方式演示和讲解为主。\n培训中一对一的培训主要是在用户或管理人员操作过程中预以操作和管理指导。\n## 培训教程\n长沙市机关事务管理局智慧后勤服务管理平台项目培训教程主要包括演示系统、项目培训PPT、项目系统操作手册、项目运行维护手册。\n在项目培训工作开始之前，项目培训工作组根据本项目的建设内容和培训要求开始编织项目培训教程。\n## 培训讲师\n长沙市机关事务管理局智慧后勤服务管理平台项目我方将指派熟悉项目系统使用，且又有丰富的项目培训经历的项目组成员作为项目培训讲师。\n培训讲师负责项目培训教程的编写、项目培训场地确认、组织和协调项目培训环境的搭建，制定项目培训计划等工作。\n## 培训考核\n项目培训工作完成以后，可根据长沙市机关事务管理局智慧后勤服务管理平台项目的需要制定项目培训考核规划，包括考核的方式、考核时间等。\n项目培训考核的主要目标是确保项目培训工作能达到预期的目标，本项目可采取双向考核的方式，一方面，培训讲师通过培训过程和培训考核情况\n## 实施培训\n### 培训步骤\n根据项目培训的具体情况，在项目培训阶段以项目合同培训要求为基础制定培训流程如下：\n- 确认培训时间；\n- 确认培训内容以及培训课程；\n- 确认培训人员名单；\n- 确认培训环境以及培训方式；\n- 制作项目培训材料；\n- 协调项目培训资源；\n- 搭建项目培训环境；\n- 完成项目培训工作；\n- 培训情况评估。\n### 培训名单确认\n在项目培训工作进行前，我们将根据项目培训课程提供项目培训人员角色的建议，由机关事务管理局根据项目参与人员、项目软硬件系统使用人员的具体情况拟定项目受训人员名单。我方将根据课程时间以及培训人员名称拟定项目具体的培训计划。\n### 计划编制\n当项目建设方将项目培训地点情况、培训方式、培训人员名单、培训启动结束时间拟定完成后，我方将根据培训的具体情况编制项目培训计划，该计划将根据培训设施、人员、课程要求等情况对详细的课程时间安排，培训人员安排等作出详细的培训计划。该计划交由项目建设方审核后发布，并按该计划开始实施培训工作。\n### 通知发布\n在项目培训环境搭建完成，或能确认在培训开始前可搭建完成时，项目组将根据培训情况在机关事务管理局的协助下发布培训通知。或直接由机关事务管理局直接发布培训通知，主要的通知内容如下：\n| 培训通知 | 培训通知 | 培训通知 | 培训通知 | 培训通知 |\n| :---: | :---: | :---: | :---: | :---: |\n| 培训名称： |   |   |   |   |\n| 培训时间： | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 | 0000年00月00日 00点开始 至 0000年00月00日 00点结束 |\n| 培训地点： |   |   |   |   |\n| 培训单位： |   |   |   |   |\n| 培训讲师： |   |   |   |   |\n| 培训课程： | 课程名称 | 课程名称 | 课程内容 | 课程内容 |\n| 培训课程： |   |   |   |   |\n| 培训课程： |   |   |   |   |\n| 培训课程： |   |   |   |   |\n| 培训目的： |   |   |   |   |\n| 培训要求： |   |   |   |   |\n| 备注说明： |   |   |   |   |\n| 联系人： |   | 联系方式： | 联系方式： |   |\n| 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 | 通知发送单位： 年 月 日 |\n### 实施培训\n培训启动后，我方培训人员将培训材料、培训设备的准备完成，每天在培训开始之前对培训环境进行调试，保证培训的顺利进行。并将当天课程的培训以分天的方式或者在培训第一天统一发放给培训学员。\n给培训人员发放预制的课程表，以方便培训人员的培训学习。\n在培训时间段内，培训讲师或者培训辅助人员将根据当天培训的情况对培训人员进行签到考勤记录，做为培训评估的基础之一。\n在培训过程中，除正常的对课程的讲解之外，每节课程将设置专门的培训答疑时间，以保证培训质量。\n### 培训评估\n在培训实施进行过程以及培训结束后，我方将根据项目建设方的要求对培训进行评估，一共包括以下几个方面的评估：\n- 项目建设方对项目培训材料的评估，可通过项目组专题会议的形式或者预讲的形式对项目培训材料进行评估；\n- 培训人员以及项目管理人员对参与培训的人员进行评估，我方可协助项目建设方对项目培训人员的培训情况进行评估，可分为日常评估以及培训效果评估。日常评估主要以日常培训考勤情况为基础，同时也可通过实际操作情况对培训人员的培训效果进行评估；\n- 项目建设方以及参与培训的人员对培训讲师进行评估，通过培训人员对培训讲师的课程诠释能力，教学方式等进行评估；\n- 培训效果评估以及培训满意度评估。\n通过双向的评估以保证项目培训的质量，确保通过培训能达到该培训的预期目的。\n#### 培训材料评估\n| 评审意见表 | 评审意见表 | 评审意见表 |\n| :---: | :---: | :---: |\n| 评审材料名称： |   |   |\n| 评审会议时间： |   |   |\n| 评审会议地点： |   |   |\n| 评审人员名单： | 评审人员单位 | 评审人姓名 |\n| 评审人员名单： |   |   |\n| 评审人员名单： |   |   |\n| 评审人员名单： |   |   |\n| 评审主要内容： |   |   |\n| 评审建议： |   |   |\n| 评审签字： |   |   |\n#### 培训讲师评估\n| 讲师评审表 | 讲师评审表 |\n| :---: | :---: |\n| 讲师姓名： |   |\n| 负责课程： |   |\n| 评审时间： |   |\n| 整体满意程度： | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 评审项目 | 满意程度 |\n| 讲师授课态度 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 对知识的表达能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 专业知识能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 知识范围的宽广度 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 课程的诠释能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 问题解答能力 | 【 】很满意 【 】满意 【 】一般 【 】不满意 【 】非常不满意 |\n| 对讲师的建议 |   |\n\n# 项目验收方案\n## 验收概述\n根据项目要求，长沙市机关事务管理局智慧后勤服务管理平台项目设立两个验收点，即即项目初步验收和项目竣工验收（终验）。项目建设内容全部完成后，项目经过我方内测达到项目初步验收标准后，由我方向监理单位以及建设单位提请项目初步验收。初步验收完成后，我方对初验过程中所提的问题进行整改，整改完成，项目进入上线试运行阶段，一般为期1-3个月。项目初验以及试运行过程中相关问题整改完成并通过测试，我方向建设单位提请竣工验收。\n根据项目招标文件要求，本项目采用一般程序验收。项目验收国家有强制性规定的，按国家规定执行，验收费用由中标人承担，验收报告作为申请付款的凭证之一。\n## 验收内容\n长沙市机关事务管理局智慧后勤服务管理平台项目验收内容主要包括以下几个方面：\n- 项目所有采购货物是否按照项目招标文件要求完成采购到货；\n- 项目招标文件所要求的软件系统是否按建设单位需求开发完成，并在相关位置完成部署与实施；\n- 项目相关的硬件设备是否按照项目规划设计要求完成安装部署和实施；\n- 项目范围内需要进行改造的网络系统是否按照项目规划设计要求进行改造，并完成对接；\n- 项目范围内需要进行对接的十四个系统是否按照项目招标文件要求完成对接；\n- 项目范围内所有文档以及组织过程资产是否按照项目要求进行编写以及提交并审核通过。\n## 验收标准\n长沙市机关事务管理局后勤服务管理平台项目验收标准：\n- 项目合同范围内所有采购货物均按项目合同要求完成采购和到货验收工作，且相关货物完全满足项目合同以项目招标要求；\n- 项目合同范围内所要求的软件系统以及按照要求完成需求调研、开发以及测试工作，并通过测试能完全满足项目招标要求以及项目合同要求；\n- 项目软件系统以及按照项目设计要求和建设单位要求完成实施部署，项目系统运行稳定；\n- 项目范围内的硬件设备均已经按照项目规划和设计要求完成安装部署和实施，经过测试，相关系统满足项目合同与招标要求；\n- 项目范围内需要进行改造的网络系统均以及按照项目规划和设计要求进行改造，并完成网络系统对接，经测试，系统运行正常；\n- 项目范围内需要对接的十四个系统均已按照项目招标文件以及项目合同要求完成系统对接，经测试，系统对接稳定，数据交互均满足项目合同以及招标要求；\n- 项目范围内所有文档以及组织过程资产均按照项目要求进行编写以及提交并审核通过。\n## 验收组织\n长沙市机关事务管理局后勤服务管理平台项目的验收组织包括：\n- 项目建设单位，长沙市机关事务管理局；\n- 项目监理单位；\n- 项目验收专家组；\n- 项目监管单位；\n- 项目承建单位。\n由项目建设单位组织，项目专家组、项目监管单位、项目建设单位以及监理单位组成项目验收小组执行对项目的验收工作。\n\n## 验收方式\n基于长沙市机关事务管理局智慧后勤服务管理平台项目的特性，项目采用集中现场验收的方式。\n由建设单位组织项目验收小组对项目建设情况进行现场验收。验收小组通过对项目系统进行操作演示、对外部设备进行现场勘查、对项目文档进行审阅，并在项目验收会议上对建设单位进行质询。\n## 验收准备\n项目验收准备条件如下：\n- 所有建设内容按项目合同以及招标要求全部完成建设；\n- 各分项验收工作全部完成，且合格；\n- 招标文件以及合同所要求的软件系统测评工作全部完成，且测评通过；\n- 软件系统配置管理工作完成，BASELINE建立；\n- 项目验收资料以及文档编写完成，且符合项目招标以及合同要求；\n- 项目范围内相关设备上架，加电运行测试正常；\n- 项目验收申请提交监理单位，监理单位同意；\n- 项目验收申请提交后，项目建设单位以及主管单位同意启动验收；\n- 项目合同所要求的其他验收条件。\n## 验收步骤\n项目验收步骤如下：\n- 编写验收方案（计划书）；\n- 成立项目验收小组；\n- 项目验收实施；\n- 编写项目验收报告；\n- 召开验收评审会；\n- 签署项目验收报告。\n## 验收报告（模板）\n### 项目基本信息\n- 项目名称：\n- 项目编号：\n- 项目建设方：\n- 项目承建方：\n- 项目监理方：\n### 项目合同信息\n#### 合同基本信息\n- 项目合同编号：\n- 项目合同甲方：\n- 项目合同乙方：\n#### 合同变更情况\n*对项目合同的变更情况进行简要的描述和说明**。如果有多个变更，需要逐一描述。如无合同变更，记录无。*\n### 项目建设周期\n- 项目开工日期：\n- 项目竣工日期：\n- 项目服务周期：自 年 月 日开始至 年 月 日。\n\n### 项目建设情况\n#### 项目进度情况\n| 序号 | 阶段名称 | 开始时间 | 结束时间 | 项目提交物 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n\n#### 项目需求变更情况\n*记录项目需求变更（已经执行）情况，如果存在多个变更，需要逐一说明。*\n# \n### 项目验收计划\n#### 验收基本信息\n- 项目验收时间：\n- 项目验收方式：现场集中验收\n- 项目验收组：\n| 序号 | 验收人员 | 所属单位 | 所属角色 | 相关职责 |\n| ---: | --- | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n#### 项目验收原则\n- 对已经交付的项目成果进行核验，检查项目所有交付成果是否满足项目合同之要求；\n- 对项目任务以及技术服务等内容进行审查，确认相关的项目任务以及需要提供的技术服务已经全部按照合同完成；\n- 对项目实施进度情况进行审核，检查是否按照项目合同的时间进度要求完成了项目建设；\n- 对项目的投资情况进行审查；\n- 对项目的提交物（各类文档）进行审查；\n- 对项目的技术水平做出评价，并得出项目的验收结论。\n（正式编写的时候请写项目具体的交付成果和项目任务）\n#### 项目验收依据\n（正式编写的时候请写项目具体的验收依据）\n- 《项目商务合同》\n- 《项目工作说明书（SOW）》\n- 《项目技术方案》\n- 《项目实施方案》\n- 《项目测试报告》\n#### 项目验收内容\n（正式编写的时候请写项目具体的相关硬件环境和系统）\n- 项目硬件基础环境验收；\n- 项目软件系统平台验收；\n- 项目应用系统功能验收；\n- 项目外场设备的验收；\n- 项目文档验收。\n\n### 项目验收结论\n#### 专家组验收意见\n由专家组编制验收意见。\n#### 专家组（签字）：\n由验收组成员签字。\n### 附件\n#### 附件一：软件平台验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 软件类型 | 软件名称 | 验收结果 | 备注 （机器的IP地址等） |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n\n#### 附件二：功能模块验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 功能模块 | 验收内容 | 合同要求 | 验收结果 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n| 7 |   |   |   |   |\n\n#### 附件三：项目文档验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 文档名称 | 用 途 | 验收结果 | 备注 |\n| :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |\n| 2 |   |   |   |   |\n| 3 |   |   |   |   |\n| 4 |   |   |   |   |\n| 5 |   |   |   |   |\n| 6 |   |   |   |   |\n\n#### 附件四：硬件设备验收单\n#### **验收人：**\n#### **验收时间：**\n| 序号 | 硬件名称 | 型号 | 用途 | 配置情况 | 验收结果 | 备注 （机器的IP地址等） |\n| :---: | :---: | :---: | :---: | :---: | :---: | :---: |\n| 1 |   |   |   |   |   |   |\n| 2 |   |   |   |   |   |   |\n\n",
  "lastModified" : 1764646206617
}, {
  "filePath" : "售前资料/goal.md",
  "fileName" : "goal.md",
  "parentDir" : "售前资料",
  "fileType" : "MD",
  "title" : "goal.md",
  "contentText" : "    We create high-quality houses with \"AI + hardware + software\" to achieve zero carbon emissions and constant comfort. The HKT Campus Agent Entity quantifies building performance and services into publicly available scores, breaks down revenue into shares and issues certificates, and rewards users with points based on usage and evaluation. It incorporates digital twins, IoT, and digital humans, enabling a self-circulating loop of perception, decision-making, and control for full-domain warning and dispatch, forming a closed loop from standards to data, assets, and transactions. This transforms buildings into measurable, tradable, and continuously appreciating smart assets, turning spaces into self-learning, self-appreciating urban cells that exchange value with the city in real-time.\n\n    We leverages AI+hardware+software to create Next-Gen Smart Buildings, turning buildings into embodied AI, self-valuing and tradable digital assets that reward use and trade with the city.\n\n    We leverages AI+hardware+software to create Next-Gen Smart Buildings, turning buildings into embodied AI, self-valuing and tradable digital assets that reward usage, form value loops within living parks & surrounding communities, and connect to digital cities.",
  "size" : 1255,
  "modifiedAt" : 1764663152070,
  "id" : "售前资料/goal.md",
  "content" : "    We create high-quality houses with \"AI + hardware + software\" to achieve zero carbon emissions and constant comfort. The HKT Campus Agent Entity quantifies building performance and services into publicly available scores, breaks down revenue into shares and issues certificates, and rewards users with points based on usage and evaluation. It incorporates digital twins, IoT, and digital humans, enabling a self-circulating loop of perception, decision-making, and control for full-domain warning and dispatch, forming a closed loop from standards to data, assets, and transactions. This transforms buildings into measurable, tradable, and continuously appreciating smart assets, turning spaces into self-learning, self-appreciating urban cells that exchange value with the city in real-time.\n\n    We leverages AI+hardware+software to create Next-Gen Smart Buildings, turning buildings into embodied AI, self-valuing and tradable digital assets that reward use and trade with the city.\n\n    We leverages AI+hardware+software to create Next-Gen Smart Buildings, turning buildings into embodied AI, self-valuing and tradable digital assets that reward usage, form value loops within living parks & surrounding communities, and connect to digital cities.",
  "lastModified" : 1764663152070
}, {
  "filePath" : "售前资料/作息时间安排.xlsx",
  "fileName" : "作息时间安排.xlsx",
  "parentDir" : "售前资料",
  "fileType" : "XLSX",
  "title" : "作息时间安排.xlsx",
  "contentText" : "工作表: Sheet1\n作息时间    任务安排  详细内容\n8：00-8：30   起床    穿衣  刷牙 洗漱 □\n8：30-9：00  吃早餐   吃饭  整理餐桌 □\n9：00：10：00   学习时间  斑马 叫叫阅读  写作业 □\n10：00-10：30   点心时光  吃水果 或零食  □\n10：30-11：30   玩玩具   积木拼搭，棋类 □\n11：30-11：50  收拾玩具 餐前洗手 整理餐桌 □\n12：00-12：30   午餐时间  □\n12：30-14：00  午睡 □\n14：00-15：00  亲子时光   户外活动 跳绳等 □\n15：00-16：30  兴趣时光   手工 美术 英语 做气球 □\n16：30-17：00 点心时光   吃水果或零食 □\n17：00-18：00  放松娱乐    看电视 □\n18：00-18：30  晚餐时间  餐前洗手 吃晚餐，整理餐桌 □\n18：30-20：30  睡前活动   和妈妈爸爸做游戏 讲故事  □\n20：30-21：00  晚安时间   睡前回顾  洗漱 □\n\n",
  "size" : 9069,
  "modifiedAt" : 1765532811042,
  "id" : "售前资料/作息时间安排.xlsx",
  "content" : "工作表: Sheet1\n作息时间    任务安排  详细内容\n8：00-8：30   起床    穿衣  刷牙 洗漱 □\n8：30-9：00  吃早餐   吃饭  整理餐桌 □\n9：00：10：00   学习时间  斑马 叫叫阅读  写作业 □\n10：00-10：30   点心时光  吃水果 或零食  □\n10：30-11：30   玩玩具   积木拼搭，棋类 □\n11：30-11：50  收拾玩具 餐前洗手 整理餐桌 □\n12：00-12：30   午餐时间  □\n12：30-14：00  午睡 □\n14：00-15：00  亲子时光   户外活动 跳绳等 □\n15：00-16：30  兴趣时光   手工 美术 英语 做气球 □\n16：30-17：00 点心时光   吃水果或零食 □\n17：00-18：00  放松娱乐    看电视 □\n18：00-18：30  晚餐时间  餐前洗手 吃晚餐，整理餐桌 □\n18：30-20：30  睡前活动   和妈妈爸爸做游戏 讲故事  □\n20：30-21：00  晚安时间   睡前回顾  洗漱 □\n\n",
  "lastModified" : 1765532811042
}, {
  "filePath" : "技术案例/Web预览系统产品设计.md",
  "fileName" : "Web预览系统产品设计.md",
  "parentDir" : "技术案例",
  "fileType" : "MD",
  "title" : "Web预览系统产品设计.md",
  "contentText" : "# 文档TOON结构生成与Web预览系统 - 统一产品设计文档（DDD + Spring Cloud + React）\r\n\r\n作者：伍志勇\r\n日期（北京时间）：2025-11-24 16:34:42\r\n版本：v1.0\r\n\r\n## 1. 产品概述\r\n\r\n- 目标：展示指定目录（示例 `/home/agentic/hkt-knowledge`）的全部子目录与文档清单；生成并持久化索引TOON数据到本地 `data/` 目录（不使用PostgreSQL）；左侧树展示结构，右侧预览文档内容。\r\n- 范围：完整枚举目录与文件（支持中文名与Linux路径）；文件预览支持 `.md/.docx/.pdf/.csv/.svg`。\r\n- 核心特性：索引TOON（`files` 块）生成与读取、树状展示、类型识别与预览、缓存与治理。\r\n- 场景：内部/公开文档库的轻量化展示与快速检索。\r\n\r\n## 2. 统一语言与术语（Ubiquitous Language）\r\n\r\n- 目录（Directory/Folder）：以`dirPath/dirName`表示的层级节点\r\n- 文档（Document/File）：以`filePath/fileName/fileType`表示的文件实体\r\n- TOON（面向词元的对象表示法）：结构化块表示，含`fields/data/toonString`\r\n- 预览（Preview）：以`PreviewContent`呈现的可视内容（HTML/PDF/SVG）\r\n\r\n## 3. 领域驱动设计（DDD）\r\n\r\n### 3.1 用户旅程工作坊（User Journey Mapping）\r\n\r\n- 输出：用户旅程图、痛点/机会点、角色与场景列表\r\n\r\n#### 3.1.1 角色（Persona）\r\n\r\n- 访客：浏览与预览文档，不进行上传/下载。\r\n- 管理员：触发重扫、查看状态、清理缓存，保障索引与预览稳定。\r\n\r\n#### 3.1.2 旅程阶段（Stages）\r\n\r\n- 进入应用 → 加载索引（`index.toon/json`） → 浏览树（展开/折叠） → 筛选与定位（关键字/类型过滤） → 点击文档 → 预览渲染（md/docx/pdf/csv/svg） → 错误与降级提示 → 管理操作（重扫/状态/清缓存）。\r\n\r\n#### 3.1.3 痛点与机会点（Pain & Opportunities）\r\n\r\n- 痛点：\r\n  - 大目录加载与渲染性能瓶颈（滚动卡顿、一次性渲染过多节点）。\r\n  - 多语言路径与中文字符的兼容性问题（编码与规范化）。\r\n  - 部分格式解析失败或不支持（例如复杂DOCX或超大PDF）。\r\n  - 索引刷新后前端状态一致性（缓存失效与ETag协同）。\r\n- 机会：\r\n  - 采用TOON高效索引与分页分块，减少传输体积与渲染压力。\r\n  - 树懒加载与虚拟滚动、按需加载预览器，显著提升体验。\r\n  - 统一错误与降级策略，保证“可视化回退”与操作指引。\r\n  - 管理接口支持重扫与状态观察，形成闭环运维能力。\r\n\r\n#### 3.1.4 场景清单（Scenarios）\r\n\r\n- 场景1：首次进入应用 → 自动加载`index.toon` → 左侧树显示根目录与首层节点。\r\n- 场景2：展开目录节点 → 按需请求下一层数据 → 渲染子目录与文档列表。\r\n- 场景3：关键字筛选 → 过滤`name/path`，高亮命中项 → 清空筛选恢复。\r\n- 场景4：点击`.md`文档 → 前端`marked`渲染 → 支持标题目录与代码高亮。\r\n- 场景5：点击`.pdf`文档 → 后端流式返回 → 前端`pdfjs`分页渲染与缩放。\r\n- 场景6：点击`.docx`文档 → 根据决策矩阵选择前端`mammoth`或后端POI → 输出HTML预览。\r\n- 场景7：点击`.csv`文档 → `papaparse`解析 → 表格排序与列宽调整。\r\n- 场景8：点击`.svg`文档 → 直接嵌入`<svg>` → 安全过滤可疑脚本。\r\n- 场景9：预览失败（解析或资源限制） → 显示降级内容或错误页 → 提供“查看原始TOON”。\r\n- 场景10：管理员在状态页触发重扫 → `data/index.toon`更新时间刷新 → 前端树自动刷新或提示手动刷新。\r\n\r\n### 3.2 事件风暴（Event Storming）摘要\r\n\r\n- 业务目标：从指定根目录快速构建可浏览的索引TOON，并按需预览文档。\r\n- 关键事件（Domain Events）：\r\n  - `IndexRequested`（用户/系统发起索引请求）\r\n  - `DirectoryScanned`（目录被遍历完成，发现条目）\r\n  - `ItemEnumerated`（发现目录/文件条目）\r\n  - `IndexPersisted`（索引TOON写入 `data/index.toon` 完成）\r\n  - `IndexLoaded`（前端/API读取索引TOON或JSON派生）\r\n  - `PreviewRequested`（预览请求到达）\r\n  - `PreviewRendered`（预览成功生成）\r\n  - `PreviewFailed`（预览失败，触发降级与错误事件）\r\n  - `RescanTriggered`（运维或配置变更触发重扫）\r\n  - `CacheInvalidated`（扫描变更导致缓存失效）\r\n- 命令（Commands）：`TriggerScan`、`PersistIndex`、`LoadIndex`、`RenderPreview`、`InvalidateCache`、`TriggerRescan`。\r\n- 聚合与读模型：\r\n  - 聚合：`DocumentRepository`（统一维护文件与目录条目、元数据）\r\n  - 读模型：`FilesIndex`（TOON/JSON）、`DirectoryTree`（派生树）、`PreviewContent`\r\n- 策略/规则（Policies）：\r\n  - 配置变更 → 触发 `TriggerRescan`\r\n  - 扫描完成 → `PersistIndex` → 通知前端刷新\r\n  - 预览失败 → 生成降级TOON块或错误响应\r\n- 外部系统：文件系统（Linux）、Redis（缓存）、Config Server（配置）、Nginx（入口）、Prometheus/Grafana（监控）。\r\n- 端到端路径（示例）：\r\n  - 用户打开页面 → `IndexRequested` → 后端`TriggerScan`（或直接`IndexLoaded`）→ 生成并`PersistIndex` → 前端树加载 → 用户点击文件 → `PreviewRequested` → `RenderPreview` → 展示或降级。\r\n\r\n#### 3.2.1 DDD 完整链路图（Mermaid）\r\n\r\n- 迁移说明：该图已移至“附录 E. DDD 完整链路图（Mermaid）”。\r\n\r\n### 3.3 划分限界上下文（Context Slicing）\r\n\r\n- 规则：语言边界、业务一致性、团队边界\r\n- 输出：限界上下文图（Context Map）\r\n\r\n#### 3.3.1 上下文清单（Bounded Contexts）\r\n\r\n- 文档（Document）：负责文档实体、目录树读模型与TOON结构的对外暴露。\r\n- 扫描（Scan）：负责遍历与索引生成、持久化`data/index.toon/index.json`。\r\n- 预览（Preview）：负责类型适配与内容生成（HTML/PDF/SVG）。\r\n- 网关（Gateway）：统一入口、CORS、限流、错误映射与内容协商。\r\n\r\n#### 3.3.2 边界描述（Boundary）\r\n\r\n- Document：\r\n  - 输入：来自Scan的索引、来自Preview的渲染请求。\r\n  - 输出：`DirectoryTree`、`FilesIndex`、`TOONStructure`。\r\n  - 自有模型：`Document`、`FileMetadata`、`TOONStructure`、`DirectoryTree`。\r\n  - 非功能：读取`data`目录只读；缓存命中直接返回；统一错误结构。\r\n- Scan：\r\n  - 输入：配置根目录（Config Server）、重扫命令（Admin）。\r\n  - 输出：`index.toon`与`index.json`、`metadata`更新时间。\r\n  - 自有模型：扫描任务、黑白名单、符号链接校验策略。\r\n  - 非功能：文件系统I/O与并发控制、去重与原子写入、指标监控。\r\n- Preview：\r\n  - 输入：`filePath`与类型参数。\r\n  - 输出：`PreviewContent`（HTML/PDF/SVG）。\r\n  - 自有模型：解析适配器、降级策略、资源限制（线程/内存/超时）。\r\n  - 非功能：安全过滤、内容类型协商、HTTP Range支持。\r\n- Gateway：\r\n  - 输入：前端请求。\r\n  - 输出：路由到各BC、统一错误映射、`ETag/Last-Modified`处理。\r\n  - 自有模型：CORS白名单、限流令牌桶、受支持`Accept`集合。\r\n  - 非功能：日志与审计、告警与熔断策略（可选）。\r\n\r\n#### 3.3.3 防腐层与契约（ACL & Contract）\r\n\r\n- Preview对复杂库（PDFBox/POI）设置适配接口，隔离库细节，返回统一`PreviewContent`。\r\n- Gateway对外统一MIME与错误结构；`Accept: application/x-toon`直通TOON契约；`application/json`返回结构化对象。\r\n- Document与Scan之间采用`index.toon/json`文件契约；更新时间通过`metadata.last_updated`传递。\r\n\r\n#### 3.3.4 团队边界\r\n\r\n- Scan与Preview可由后端团队维护；Document由后端与前端共同维护读模型；Gateway由平台/架构组维护。\r\n\r\n### 3.4 上下文映射（Context Mapping）\r\n\r\n- 模式：合作关系、共享内核、客户-供应商、防腐层ACL、开放主机服务\r\n- 输出：上下文映射图\r\n\r\n#### 3.4.1 关系矩阵（Relationship Matrix）\r\n\r\n- Document ↔ Scan：客户-供应商（Customer–Supplier）。Document消费Scan产出的索引；Scan遵循约定的TOON契约与更新时间规则。\r\n- Document ↔ Preview：开放主机服务（Open Host Service）。Document发起`RenderPreview`调用，Preview暴露统一接口与MIME；失败时返回统一错误结构。\r\n- Gateway ↔ 各BC：开放主机服务 + 防腐层（ACL）。Gateway只曝光稳定契约与错误映射；对内部对象进行DTO转换。\r\n\r\n#### 3.4.2 协作模式说明\r\n\r\n- Published Language：跨上下文统一采用`TOONStructure/PreviewContent/DirectoryTree/FilesIndex`术语与字段命名，避免翻译歧义。\r\n- Anti-Corruption Layer：Preview内部适配第三方解析库；Gateway对外统一MIME与错误；Document保持读模型纯净。\r\n- Shared Kernel（谨慎）：仅在通用工具层共享TOON校验器与时间/路径规范工具，业务模型不共享。\r\n\r\n#### 3.4.3 故障与降级路径\r\n\r\n- Scan失败：保留最近一次`index.toon`并标注`metadata`为旧时间；前端提示“索引可能不是最新”。\r\n- Preview失败：返回降级TOON或错误；前端提供“查看原始TOON”与“稍后重试”。\r\n- Gateway限流：返回429与`Retry-After`，避免雪崩；记录`traceId`与指标。\r\n\r\n#### 3.4.4 一致性与刷新\r\n\r\n- 索引刷新：`IndexPersisted`事件广播（可选）或前端轮询`last_updated`；命中ETag返回304。\r\n- 读写分离：Scan写`data/*`，Document读`data/*`；通过文件锁或原子替换保证一致性。\r\n\r\n### 3.5 建立通用语言（Ubiquitous Language）\r\n\r\n- 指引：术语统一见第2章；代码词汇表见第27章\r\n\r\n#### 3.5.1 角色词汇表\r\n\r\n- 访客（Visitor）：浏览索引、查看预览、不进行写操作。\r\n- 管理员（Admin）：触发重扫、查看运行状态、清理缓存。\r\n\r\n#### 3.5.2 场景词汇表\r\n\r\n- 浏览索引：加载`index.toon/json`并渲染树。\r\n- 展开节点：获取指定目录的子项并渲染。\r\n- 筛选搜索：按`name/path`过滤并高亮命中。\r\n- 预览渲染：根据`fileType`选择适配器生成`PreviewContent`。\r\n- 错误降级：当解析失败时渲染降级内容或错误页。\r\n- 管理重扫：管理员触发重新扫描根目录或子树。\r\n\r\n#### 3.5.3 示例用语（Examples）\r\n\r\n- 作为访客，我希望能快速加载文档树并展开我关心的目录。\r\n- 作为访客，当我点击文档时，系统应返回对应的预览内容或清晰的错误提示。\r\n- 作为管理员，我希望在索引过期或结构变化时，能够一键触发重扫并查看最新更新时间。\r\n\r\n#### 3.5.4 代码词汇一致性\r\n\r\n- 接口与模型统一使用：`filePath/fileName/fileType`、`TOONStructure`、`PreviewContent`、`DirectoryTree`、`FilesIndex`。\r\n- 错误统一：`ErrorResponse{code,message,traceId,details}`；日志包含`traceId`便于定位。\r\n\r\n### 3.6 战术设计（Tactical Modeling）\r\n\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 待补充：战术模型图与类图（ToDo）\r\n\r\n#### 3.6.1 核心领域与聚合\r\n\r\n- 聚合根：`DocumentRepository`，负责文档实体生命周期管理（创建、查询、更新、删除）。\r\n- 上下文划分：\r\n  - 文档领域（核心）：文档实体、TOON结构、文件元数据。\r\n  - 扫描领域：扫描任务与结果，目录遍历与目标格式识别。\r\n  - 预览领域：预览内容生成与格式适配。\r\n\r\n#### 3.6.2 实体与值对象\r\n\r\n- 实体 `Document`（唯一标识 `filePath`）：\r\n  - 属性：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure`（懒加载）、`previewContent`（懒加载）。\r\n- 值对象：\r\n  - `FileMetadata`：`fileSize`、`lastModifiedTime`、`charset`（默认UTF-8）。\r\n  - `TOONStructure`：`rootNode`、`elementCount`、`fields`（List<String>）、`data`（List<Map<String,Object>>）、`toonString`（标准TOON字符串）。\r\n  - `PreviewContent`：`contentType`（text/html、application/pdf、image/svg+xml 等）、`content`（HTML字符串/二进制流/SVG文本）、`supportFullPreview`（boolean）。\r\n  - `DirectoryTree`：`dirPath`、`dirName`、`subDirs`（List<DirectoryTree>）、`documents`（List<DocumentSummary>）。\r\n  - `DocumentSummary`：`filePath`、`fileName`、`fileType`、`fileSize`。\r\n\r\n#### 3.6.3 领域服务\r\n\r\n- `ScanService`：遍历根目录与子目录，识别目标格式、生成 `FileMetadata`，更新仓库。\r\n- `TOONGenerationService`：按文档格式提取结构化数据并生成 `TOONStructure`。\r\n- `PreviewService`：将文档转换为Web可展示的 `PreviewContent`（HTML/PDF/SVG）。\r\n\r\n#### 3.6.4 领域事件\r\n\r\n- 事件（可选）：`DocumentScannedEvent`（扫描完成）、`PreviewRequestedEvent`（预览请求）。\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 参考：3.2 实体与值对象；3.3 领域服务\r\n\r\n#### 3.6.5 战术模型图与类图（文本草案）\r\n\r\n- 实体与值对象：\r\n  - `Document`（Entity）：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure?`、`previewContent?`\r\n  - `FileMetadata`（ValueObject）：`fileSize`、`lastModifiedTime`、`charset`\r\n  - `TOONStructure`（ValueObject）：`rootNode`、`elementCount`、`fields: List<String>`、`data: List<Map<String,Object>>`、`toonString`\r\n  - `PreviewContent`（ValueObject）：`contentType`、`content`、`supportFullPreview`\r\n  - `DirectoryTree`（ValueObject）：`dirPath`、`dirName`、`subDirs: List<DirectoryTree>`、`documents: List<DocumentSummary>`\r\n- 仓储（Repository）：\r\n  - `DocumentRepository`：`findByPath(filePath)`、`save(document)`、`listByDir(dirPath)`、`updateMetadata(filePath, metadata)`\r\n- 领域服务（Domain Service）：\r\n  - `ScanService`：`scan(rootDirs)`、`enumerate(dirPath)`、`persistIndex(dataDir)`\r\n  - `TOONGenerationService`：`fromMd(filePath)`、`fromCsv(filePath)`、`fromDocx(filePath)`、`fromPdf(filePath)`、`fromSvg(filePath)`\r\n  - `PreviewService`：`render(filePath)`（返回`PreviewContent`）\r\n- 工厂与规约（Factory & Specification）：\r\n  - `PreviewAdapterFactory`：按`fileType`返回适配器。\r\n  - `IndexSpecification`：黑白名单、符号链接、编码规范校验。\r\n- 交互关系：\r\n  - 应用层调用`ScanService`生成索引，持久化到`data/index.*`；\r\n  - 应用层调用`PreviewService`产出`PreviewContent`；\r\n  - Document聚合通过`DocumentRepository`装载与更新实体，保持读模型与索引文件一致。\r\n\r\n（Mermaid 可视化）\r\n\r\n```mermaid\r\nclassDiagram\r\ndirection TB\r\n\r\nclass Document {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +parentDir: String\r\n  +fileMetadata: FileMetadata\r\n  +toonStructure: TOONStructure\r\n  +previewContent: PreviewContent\r\n}\r\n\r\nclass FileMetadata {\r\n  +fileSize: long\r\n  +lastModifiedTime: Instant\r\n  +charset: String\r\n}\r\n\r\nclass TOONStructure {\r\n  +rootNode: String\r\n  +elementCount: int\r\n  +fields: List<String>\r\n  +data: List<Map<String,Object>>\r\n  +toonString: String\r\n}\r\n\r\nclass PreviewContent {\r\n  +contentType: String\r\n  +content: Any\r\n  +supportFullPreview: boolean\r\n}\r\n\r\nclass DirectoryTree {\r\n  +dirPath: String\r\n  +dirName: String\r\n  +subDirs: List<DirectoryTree>\r\n  +documents: List<DocumentSummary>\r\n}\r\n\r\nclass DocumentSummary {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +fileSize: long\r\n}\r\n\r\nclass DocumentRepository {\r\n  +findByPath(filePath: String): Document\r\n  +save(document: Document): void\r\n  +listByDir(dirPath: String): List<DocumentSummary>\r\n  +updateMetadata(filePath: String, metadata: FileMetadata): void\r\n}\r\n\r\nclass ScanService {\r\n  +scan(rootDirs: List<String>): void\r\n  +enumerate(dirPath: String): List<FilesIndexItem>\r\n  +persistIndex(dataDir: String): void\r\n}\r\n\r\nclass TOONGenerationService {\r\n  +fromMd(filePath: String): TOONStructure\r\n  +fromCsv(filePath: String): TOONStructure\r\n  +fromDocx(filePath: String): TOONStructure\r\n  +fromPdf(filePath: String): TOONStructure\r\n  +fromSvg(filePath: String): TOONStructure\r\n}\r\n\r\nclass PreviewService {\r\n  +render(filePath: String): PreviewContent\r\n}\r\n\r\nclass PreviewAdapterFactory {\r\n  +getAdapter(fileType: FileType): PreviewAdapter\r\n}\r\n\r\nclass PreviewAdapter\r\nclass MdAdapter\r\nclass PdfAdapter\r\nclass DocxAdapter\r\nclass CsvAdapter\r\nclass SvgAdapter\r\n\r\nDocument *-- FileMetadata\r\nDocument o-- TOONStructure\r\nDocument o-- PreviewContent\r\nDirectoryTree o-- DocumentSummary\r\nDocumentRepository ..> Document : load/save\r\nScanService ..> DocumentRepository : enumerate/listByDir\r\nScanService ..> DirectoryTree : derive\r\nTOONGenerationService ..> TOONStructure\r\nPreviewService ..> PreviewContent\r\nPreviewService ..> PreviewAdapterFactory\r\nPreviewAdapterFactory ..> PreviewAdapter\r\nPreviewAdapter <|.. MdAdapter\r\nPreviewAdapter <|.. PdfAdapter\r\nPreviewAdapter <|.. DocxAdapter\r\nPreviewAdapter <|.. CsvAdapter\r\nPreviewAdapter <|.. SvgAdapter\r\n```\r\n\r\n### 3.2.2 命令-事件-聚合表（草案）\r\n\r\n\r\n| 业务动作   | 命令              | 触发条件           | 领域事件                                              | 聚合/读模型            | 备注                                                  |\r\n| ---------- | ----------------- | ------------------ | ----------------------------------------------------- | ---------------------- | ----------------------------------------------------- |\r\n| 索引扫描   | `TriggerScan`     | 用户/定时/配置变更 | `DirectoryScanned`、`ItemEnumerated`                  | `DocumentRepository`   | 生成`FilesIndex`候选；跳过隐藏/黑名单                 |\r\n| 持久化索引 | `PersistIndex`    | 扫描完成           | `IndexPersisted`                                      | `DocumentRepository`   | 写入`data/index.toon`与`metadata`；可派生`index.json` |\r\n| 加载索引   | `LoadIndex`       | 前端或API请求      | `IndexLoaded`                                         | `FilesIndex`（读模型） | 返回TOON或JSON，支持内容协商                          |\r\n| 请求预览   | `RenderPreview`   | 用户点击文件       | `PreviewRequested`、`PreviewRendered`/`PreviewFailed` | `PreviewService`       | 支持md/docx/pdf/csv/svg；失败降级                     |\r\n| 清缓存     | `InvalidateCache` | 管理操作/变更检测  | `CacheInvalidated`                                    | Cache层                | 失效`toon:`/`preview:`键；ETag刷新                    |\r\n| 触发重扫   | `TriggerRescan`   | Admin接口调用      | `RescanTriggered`                                     | `ScanService`          | 全量或增量；更新`last_updated`                        |\r\n\r\n### 3.3.1 限界上下文图（草案表格）\r\n\r\n\r\n| 上下文（BC）     | 职责                        | 上游             | 下游             | 关系模式                 | 防腐层                 | UL关键词                                     |\r\n| ---------------- | --------------------------- | ---------------- | ---------------- | ------------------------ | ---------------------- | -------------------------------------------- |\r\n| 文档（Document） | 文档实体/TOON/目录树读模型  | 扫描（Scan）     | 预览（Preview）  | 客户-供应商（对Scan）    | 路径/编码规范；DTO映射 | `filePath`、`TOONStructure`、`DirectoryTree` |\r\n| 扫描（Scan）     | 遍历与索引生成、持久化index | Config Server    | 文档（Document） | 开放主机服务（暴露索引） | 黑白名单/符号链接校验  | `files[count]{path,type,name}`、`metadata`   |\r\n| 预览（Preview）  | 各类型预览内容生成          | 文档（Document） | 网关/前端        | 防腐层（对复杂格式库）   | 解析库接口封装         | `PreviewContent`、降级策略                   |\r\n| 网关（Gateway）  | 统一入口/CORS/限流          | 前端             | 各BC API         | 开放主机服务             | 统一错误映射           | `Accept`、`ETag`                             |\r\n\r\n### 3.7 实现（Code & UT）\r\n\r\n- 结构：模块-聚合-分层；接口层/应用层/领域层/基础设施层\r\n- 规约：业务规则单元测试、EBNF语法校验测试\r\n\r\n#### 3.7.1 关键模块清单（Backend）\r\n\r\n- `gateway`：路由、CORS、限流、错误映射、ETag处理。\r\n- `document-service`\r\n  - Controller：`DocumentController`（tree/toon/preview/scan/index接口）。\r\n  - Application：用例编排与事务控制（按目录粒度）。\r\n  - Domain：`ScanService`、`TOONGenerationService`、`PreviewService`、`DocumentRepository`。\r\n  - Infra：文件遍历器、TOON校验器、预览适配器（PDFBox/POI/OpenCSV等）。\r\n- `preview-worker`（可选）：队列消费者，异步执行重解析任务。\r\n\r\n#### 3.7.2 关键模块清单（Frontend）\r\n\r\n- 页面：`TreePage`（索引树与筛选）、`PreviewPage`（文档预览）、`AdminPage`（重扫与状态）。\r\n- 组件：`DirectoryTree`、`PreviewPane(md/pdf/docx/csv/svg)`、`SearchBar`、`StatusBadge`。\r\n- 状态：React Query 请求层、缓存策略与错误提示。\r\n\r\n#### 3.7.3 UT用例索引（Backend）\r\n\r\n- `ScanServiceTest`：\r\n  - 枚举跳过隐藏/黑名单；符号链接白名单校验；大目录性能阈值。\r\n  - `index.toon`生成与`metadata`时间格式（北京时区）。\r\n- `TOONGenerationServiceTest`：\r\n  - CSV/MD/DOCX/PDF/SVG五类解析一致性与转义校验；降级块生成。\r\n- `PreviewServiceTest`：\r\n  - 各类型适配与MIME；PDF Range分页；超时与内存限制保护。\r\n- `GatewayErrorMappingTest`：\r\n  - 错误码与HTTP映射；`traceId`传递；CORS预检缓存。\r\n\r\n#### 3.7.4 UT用例索引（Frontend）\r\n\r\n- `TreeRender.spec.tsx`：懒加载/虚拟滚动/分页段落；筛选与高亮。\r\n- `PreviewMd.spec.tsx`、`PreviewPdf.spec.tsx`、`PreviewDocx.spec.tsx`、`PreviewCsv.spec.tsx`、`PreviewSvg.spec.tsx`：渲染与错误降级。\r\n- `AdminRescan.spec.tsx`：重扫后更新时间刷新与提示。\r\n\r\n### 3.8 持续演进（Evolution）\r\n\r\n- 活动：领域事件回放、模型重构、定期事件风暴\r\n- 参考：12 运行保障；12 扩展性与演进\r\n\r\n#### 3.8.1 演进周期\r\n\r\n- 每周：事件风暴复盘（针对新增/变化的领域事件与命令），更新命令-事件-聚合表。\r\n- 每两周：Story Map梳理与迭代计划评审；MVP/V1/V2增量验收。\r\n- 每月：非功能指标回顾（`latency p95/p99`、`cache_hit_ratio`、`parse_success_rate`）与容量策略调整。\r\n\r\n#### 3.8.2 触发机制\r\n\r\n- 配置刷新（Config Server）：根目录或限流/缓存参数变更 → 增量/全量重扫（5分钟窗口）。\r\n- 文件系统事件（inotify）：新增/修改/删除 → 局部重扫与缓存失效。\r\n- 指标阈值：当`parse_success_rate`连续低于阈值或`api_latency_p99`升高 → 降级策略启用与资源上限调整。\r\n\r\n#### 3.8.3 版本演进\r\n\r\n- MVP → V1 → V2：对应“用户故事地图”的版本切片；优先保证索引浏览与`.md`预览，逐步引入其他格式与后台能力。\r\n\r\n#### 3.8.4 领域事件回放\r\n\r\n- 支持将扫描与预览关键步骤记录为事件流水，便于定位问题与重现；必要时对比两版索引差异（`diff index.toon`）。\r\n\r\n#### 3.8.5 风险与回退\r\n\r\n- 索引文件损坏或不可读：回退到最近一次可用索引并提示“索引可能过期”。\r\n- 预览解析崩溃：触发熔断与降级，限制并发与内存，记录失败样本用于事后分析。\r\n\r\n## 4. 架构设计（Spring Cloud + React）\r\n\r\n- 服务组件：\r\n  - `gateway`（统一入口、CORS策略、限流可选）。\r\n  - `eureka`（服务发现）。\r\n  - `config-server`（集中配置，含根目录数组与定时参数）。\r\n  - `document-service`（领域服务：扫描、TOON、预览API）。\r\n  - 可选 `preview-worker`（重解析任务异步化：PDF/DOCX转HTML）。\r\n- 技术选型：\r\n  - 后端：Java 17、Spring Boot 3、Lombok（简化）、POI（docx）、PDFBox（pdf）、OpenCSV（csv）、Tika（类型识别）、Redis（缓存）。\r\n  - 前端：React 18、TypeScript、Ant Design 5、Vite；预览库：`marked`（md）、`pdfjs-dist`（pdf）、`mammoth`（docx）、`papaparse`（csv）、原生`<svg>`（svg）。\r\n  - 部署：Docker、Nginx（负载均衡）、Jenkins + GitLab（CI/CD）、Kubernetes（可选）；监控：Prometheus + Grafana；日志：ELK。\r\n- 依赖关系：接口层（Web/网关）→ 应用层（用例编排）→ 领域层（模型与服务）→ 基础设施层（文件系统与解析库）。\r\n\r\n## 5. TOON语法规范\r\n\r\n- 语法范式：`blockName[count]{field1,field2,...}: record1; record2; ...`\r\n- 记录表达：每条记录为逗号分隔的字段值；记录间以分号或换行分隔；允许空值（空字符串）。\r\n- 转义规则：值中包含逗号/分号/换行时使用 `\\,` `\\;` `\\n`；反斜杠使用 `\\\\`；统一UTF-8编码。\r\n- 多块输出：响应可包含多个块，按语义顺序组织，例如：\r\n  - `directories[2]{path}: /docs; /images`\r\n  - `documents[3]{id,name,path,type}: 1,readme.md,/docs/readme.md,md; 2,report.docx,/docs/report.docx,docx; 3,data.csv,/data/data.csv,csv`\r\n- 元数据块：`metadata{total,last_updated,page,size}: 3,2025-11-24T11:27:16+08:00,1,100`（时间统一为北京时间，ISO-8601）。\r\n- 令牌优化：字段顺序固定；避免冗余键；尽量合并表头/重复值；非必要标点禁止；大集合按分页块分段返回。\r\n- 兼容性：中文目录/文档名与中文字段值允许；统一UTF-8；建议使用NFC规范化。\r\n- EBNF描述：\r\n  - `block ::= name '[' count ']' '{' fields '}' ':' records`\r\n  - `fields ::= field { ',' field }`\r\n  - `records ::= record { (';' | NEWLINE) record }`\r\n  - `record ::= value { ',' value }`\r\n  - `value ::= TEXT | ESCAPED`\r\n- `ESCAPED ::= '\\\\,' | '\\\\;' | '\\\\n' | '\\\\\\\\'`\r\n- `name, field, TEXT 采用 UTF-8；推荐NFC规范化`\r\n\r\n### 5.1 索引TOON（files块）规范\r\n\r\n- 目的：持久化指定根目录的目录与文件枚举，供Web应用加载展示。\r\n- 语义：`files[count]{path,type,name}:` 后接按行/分号分隔的记录；`type` 取 `directory|file`；`path` 为相对根的Linux风格路径；`name` 为条目名。\r\n- 元数据：附加 `metadata{total,last_updated,root}: count,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n- 示例：\r\n  - `files[12]{path,type,name}:`\r\n  - `hkt-knowledge/,directory,hkt-knowledge`\r\n  - `hkt-knowledge/hkt-product/,directory,hkt-product`\r\n  - `hkt-knowledge/hkt-product/hkt-agentic/,directory,hkt-agentic`\r\n  - `hkt-knowledge/hkt-product/industrial-brain/,directory,industrial-brain`\r\n  - `hkt-knowledge/hkt-project/,directory,hkt-project`\r\n  - `hkt-knowledge/hkt-project/docs/,directory,docs`\r\n  - `hkt-knowledge/hkt-project/docs/gitlab流水线触发指南.md,file,gitlab流水线触发指南.md`\r\n  - `hkt-knowledge/hkt-project/docs/会议纪要模版.md,file,会议纪要模版.md`\r\n  - `hkt-knowledge/hkt-project/docs/孚盟学习网址.md,file,孚盟学习网址.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.md,file,客户地理位置分布.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.xlsx,file,客户地理位置分布.xlsx`\r\n  - `hkt-knowledge/hkt-project/docs/广告推广国家.md,file,广告推广国家.md`\r\n  - `hkt-knowledge/test-document.md,file,test-document.md`\r\n  - `metadata{total,last_updated,root}: 12,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n\r\n## 6. 功能模块设计\r\n\r\n### 6.1 扫描模块\r\n\r\n- 配置根目录（单/多），在 `config-server` 配置，如 `app.scan.root-dirs=[\"/home/agentic/hkt-knowledge\"]`；默认取第一个根进行索引持久化。\r\n- 支持手动触发与定时扫描（默认每1小时，可配置）；跳过隐藏文件/目录（如 `.git/`）。\r\n- 扫描遍历目录与文件，生成 `files[count]{path,type,name}` 索引TOON；写入本地 `data/index.toon`（附 `metadata` 块）。\r\n- 可选生成派生 `data/index.json`（仅供前端树快速加载）。\r\n\r\n### 6.2 TOON生成模块\r\n\r\n- 首次访问懒加载生成，生成后按 `filePath` 缓存（Redis）默认1小时。\r\n- 无法提取结构化数据时生成默认TOON（例如PDF纯文本）。\r\n- 标准TOON输出包含对象字段与 `toonString` 字符串。\r\n\r\n### 6.3 Web展示模块\r\n\r\n- 左侧 Tree 展示 `DirectoryTree`，支持展开/折叠、类型图标区分。\r\n- 右侧预览按类型加载对应预览器：\r\n  - `.md` → `marked` 转 HTML；\r\n  - `.pdf` → `pdfjs-dist` 渲染二进制流，支持滚动/缩放；\r\n  - `.docx` → 后端 POI 转 HTML 或前端 `mammoth`；\r\n  - `.csv` → `papaparse` → `Antd Table`，支持排序；\r\n  - `.svg` → 原始文本嵌入 `<svg>`。\r\n- 交互限制：不提供下载按钮，禁用右键保存（前端限制）。\r\n\r\n## 7. API设计（REST）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 描述：获取目录树结构。\r\n  - 返回：`DirectoryTree`。\r\n- `GET /api/v1/document/toon?filePath=...`\r\n  - 描述：获取文档TOON结构。\r\n  - 返回：`TOONStructure`。\r\n- `GET /api/v1/document/preview?filePath=...`\r\n  - 描述：获取文档预览内容。\r\n  - 返回：`PreviewContent`（HTML字符串/PDF流/SVG文本）。\r\n- `POST /api/v1/document/scan`\r\n  - 描述：触发手动扫描。\r\n  - 返回：`ScanResult`（新增/更新/删除数量等）。\r\n\r\n### 7.1 索引加载接口\r\n\r\n- `GET /api/v1/index/toon`\r\n  - 描述：返回持久化的索引TOON（`data/index.toon`）。\r\n  - 返回：MIME `application/x-toon` 或 `text/plain; charset=UTF-8`。\r\n- `GET /api/v1/index/json`\r\n  - 描述：返回索引的JSON派生结构（`data/index.json`）。\r\n  - 返回：`FilesIndex`（数组）。\r\n\r\n### 7.2 请求参数\r\n\r\n- 获取目录树 `GET /api/v1/document/tree`\r\n  - 可选：`rootDir`（字符串，默认配置的全部根目录）、`path`（仅返回指定路径子树）、`depth`（整数，默认2）、`page`、`size`（分段加载）。\r\n- 获取文档TOON `GET /api/v1/document/toon`\r\n  - 必填：`filePath`；可选：`format=both|toon|json`（默认both）、`page`、`size`（大集合分页）。\r\n- 获取文档预览 `GET /api/v1/document/preview`\r\n  - 必填：`filePath`；可选（PDF）：`startPage`、`endPage`。\r\n- 触发手动扫描 `POST /api/v1/document/scan`\r\n  - 可选：`dirPath`（仅扫描指定目录）、`force`（布尔，是否跳过缓存直接重扫）。\r\n\r\n### 7.3 响应示例（节选）\r\n\r\n- 目录树（JSON）：\r\n  - `{ \"dirPath\": \"/opt/docs\", \"dirName\": \"docs\", \"subDirs\": [{\"dirPath\":\"/opt/docs/api\",\"dirName\":\"api\",\"subDirs\":[],\"documents\":[]}], \"documents\": [{\"filePath\":\"/opt/docs/readme.md\",\"fileName\":\"readme.md\",\"fileType\":\"MD\",\"fileSize\":1024}] }`\r\n- 文档TOON（both）：\r\n  - `{ \"rootNode\":\"users\", \"elementCount\":2, \"fields\":[\"id\",\"name\",\"role\"], \"data\":[{\"id\":1,\"name\":\"张三\",\"role\":\"admin\"},{\"id\":2,\"name\":\"李四\",\"role\":\"user\"}], \"toonString\":\"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n- 文档预览（PDF片段）：\r\n  - 头：`Content-Type: application/pdf`，支持 Range；体为二进制流；JSON模式示例：`{ \"contentType\":\"application/pdf\", \"content\":\"<base64>\", \"supportFullPreview\": false }`\r\n\r\n### 7.4 接口参数表（摘要）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 必填：无\r\n  - 可选：`rootDir`、`path`、`depth`、`page`、`size`\r\n- `GET /api/v1/document/toon`\r\n  - 必填：`filePath`\r\n  - 可选：`format=both|toon|json`、`page`、`size`\r\n- `GET /api/v1/document/preview`\r\n  - 必填：`filePath`\r\n  - 可选：`startPage`、`endPage`（PDF）\r\n- `POST /api/v1/document/scan`\r\n  - 必填：无\r\n  - 可选：`dirPath`、`force`\r\n\r\n### 7.5 OpenAPI草案（节选）\r\n\r\n```yaml\r\nopenapi: 3.0.0\r\ninfo:\r\n  title: 文档TOON结构生成与Web预览系统 API\r\n  version: 1.0.0\r\npaths:\r\n  /api/v1/document/tree:\r\n    get:\r\n      summary: 获取目录树结构\r\n      parameters:\r\n        - in: query\r\n          name: rootDir\r\n          schema: { type: string }\r\n        - in: query\r\n          name: path\r\n          schema: { type: string }\r\n        - in: query\r\n          name: depth\r\n          schema: { type: integer, minimum: 0, default: 2 }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer, minimum: 1, default: 1 }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer, minimum: 1, default: 200 }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/DirectoryTree' } } } }\r\n        '400': { $ref: '#/components/responses/Error400' }\r\n  /api/v1/document/toon:\r\n    get:\r\n      summary: 获取文档TOON结构\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: format\r\n          schema: { type: string, enum: [both, toon, json], default: both }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/TOONStructure' } }, application/x-toon: { schema: { type: string } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n        '422': { $ref: '#/components/responses/Error422' }\r\n  /api/v1/document/preview:\r\n    get:\r\n      summary: 获取文档预览内容\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: startPage\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: endPage\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/PreviewContent' } }, application/pdf: { schema: { type: string, format: binary } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n  /api/v1/document/scan:\r\n    post:\r\n      summary: 触发手动扫描\r\n      requestBody:\r\n        content:\r\n          application/json:\r\n            schema:\r\n              type: object\r\n              properties:\r\n                dirPath: { type: string }\r\n                force: { type: boolean, default: false }\r\n      responses:\r\n        '200': { description: OK }\r\ncomponents:\r\n  schemas:\r\n    DirectoryTree:\r\n      type: object\r\n      properties:\r\n        dirPath: { type: string }\r\n        dirName: { type: string }\r\n        subDirs:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DirectoryTree' }\r\n        documents:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DocumentSummary' }\r\n    DocumentSummary:\r\n      type: object\r\n      properties:\r\n        filePath: { type: string }\r\n        fileName: { type: string }\r\n        fileType: { type: string, enum: [MD, DOCX, PDF, CSV, SVG] }\r\n        fileSize: { type: integer }\r\n    TOONStructure:\r\n      type: object\r\n      properties:\r\n        rootNode: { type: string }\r\n        elementCount: { type: integer }\r\n        fields: { type: array, items: { type: string } }\r\n        data: { type: array, items: { type: object } }\r\n        toonString: { type: string }\r\n    PreviewContent:\r\n      type: object\r\n      properties:\r\n        contentType: { type: string }\r\n        content: { type: string }\r\n        supportFullPreview: { type: boolean }\r\n    ErrorResponse:\r\n      type: object\r\n      properties:\r\n        code: { type: string }\r\n        message: { type: string }\r\n        traceId: { type: string }\r\n        details: { type: object }\r\n  responses:\r\n    Error400:\r\n      description: Bad Request\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error404:\r\n      description: Not Found\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error422:\r\n      description: Unprocessable Entity\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n```\r\n\r\n### 7.6 API协商与返回模式\r\n\r\n- `GET /api/v1/document/toon?filePath=...&format=both|toon|json&page=1&size=100`\r\n  - `format`：返回模式；默认 `both`（结构体与 `toonString` 同时返回）。\r\n  - 分页：对大集合型TOON可使用 `page/size`；响应中同时返回 `metadata` 块说明总数、页码与最后更新时间。\r\n- 内容协商：支持 `Accept: application/x-toon` 强制仅返回 `toonString`（MIME：`application/x-toon`）；`application/json` 返回对象结构；无 `Accept` 或 `*/*` 返回默认 `both`。\r\n- 预览分页：`GET /api/v1/document/preview?filePath=...&startPage=1&endPage=10`（PDF），支持HTTP Range；单次最大返回页数 `<= 20`。\r\n- 响应示例：\r\n  - JSON：`{ rootNode: \"users\", elementCount: 2, fields: [\"id\",\"name\",\"role\"], data: [{id:1,name:\"张三\",role:\"admin\"},{id:2,name:\"李四\",role:\"user\"}], toonString: \"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n  - TOON：`users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- 兼容降级策略：若代理/浏览器不识别 `application/x-toon`，可回退使用 `text/plain; charset=UTF-8` 返回 `toonString`。\r\n- 配置项（Config Server）：`preview.pdf.max-pages-per-request=20`、`gateway.response.supported-accepts=application/json,application/x-toon,*/*`。\r\n\r\n## 8. 数据结构定义（概念约定）\r\n\r\n- 枚举 `FileType`：MD/DOCX/PDF/CSV/SVG。\r\n- 实体 `Document`：见 3.2。\r\n- 值对象 `TOONStructure`：见 3.2。\r\n- 前端 TypeScript 约定：\r\n  - `DirectoryTree { dirPath: string; dirName: string; subDirs: DirectoryTree[]; documents: DocumentSummary[] }`\r\n  - `DocumentSummary { filePath: string; fileName: string; fileType: FileType; fileSize: number }`\r\n  - `TOONStructure { rootNode: string; elementCount: number; fields: string[]; data: Array<Record<string, any>>; toonString: string }`\r\n  - `PreviewContent { contentType: string; content: string | ArrayBuffer; supportFullPreview: boolean }`\r\n  - `FilesIndexItem { path: string; type: 'directory' | 'file'; name: string }`\r\n  - `FilesIndex = FilesIndexItem[]`\r\n\r\n## 9. TOON生成规则（按格式）\r\n\r\n- CSV：第一行为 `fields`，其余行为 `data`；`rootNode` 为文件名；`elementCount` 为数据行数。\r\n- MD：优先提取表格数据（列名→`fields`，行→`data`）；次选列表结构。\r\n- DOCX：提取表格优先，其次段落标题；规则对齐MD。\r\n- PDF：尽力提取表格/结构化；若不可行，则 `fields=[\"content\"]`，`data` 为文本片段。\r\n- SVG：`fields=[\"width\",\"height\",\"elementsCount\"]`，`data` 为SVG元数据。\r\n\r\n## 10. 治理与合规\r\n\r\n### 10.1 路径与编码规范（Linux/中文）\r\n\r\n- 运行环境：Linux；路径分隔符 `/`；大小写敏感；禁止Windows样式路径。\r\n- 编码与规范化：文件/目录名统一UTF-8；建议NFC规范化；拒绝包含控制字符与非法路径片段（如 `..` 越权）。\r\n- 符号链接策略：禁止跨根目录的符号链接访问；允许根目录内的符号链接但需解析到真实路径并做白名单校验；检测越权即拒绝。\r\n- 默认黑名单：`.git/`、`.svn/`、`node_modules/`、`target/`、`.DS_Store`、临时/隐藏文件（以 `.` 开头）。\r\n- 白名单：所有访问严格限制在配置的根目录集合内；任何跨目录或符号链接越权访问拒绝。\r\n\r\n### 10.2 安全与访问限制\r\n\r\n- 根目录访问严格限制在配置集合内，拒绝跨目录访问与路径遍历（规范化路径校验）。\r\n- 网关层启用CORS白名单策略，仅允许指定来源域名。\r\n- 前端禁用右键保存与下载入口（仅UI限制，无法完全阻止恶意抓取）。\r\n\r\n### 10.3 错误与响应格式\r\n\r\n- 统一错误JSON：`{ code: string, message: string, traceId: string, details?: object, locale?: string }`\r\n- HTTP状态码：\r\n  - 400 参数错误（非法filePath、越权路径）。\r\n  - 404 文件不存在或不支持格式。\r\n  - 409 并发冲突（扫描进行中）。\r\n  - 422 解析失败（TOON/预览生成失败）。\r\n  - 429 请求过多（限流）。\r\n  - 500 服务器内部错误。\r\n- 网关错误映射：统一成上述错误结构并记录 `traceId`。\r\n- 错误码字典：`INVALID_PATH`、`UNSUPPORTED_TYPE`、`FILE_NOT_FOUND`、`PARSE_FAILED`、`CONFLICT`、`RATE_LIMITED`、`INTERNAL_ERROR`。\r\n- CORS与预检：配置 `Access-Control-Allow-Origin`（白名单）、`Access-Control-Allow-Methods`、`Access-Control-Allow-Headers`、`Access-Control-Max-Age=600`。\r\n\r\n#### 10.3.1 错误码与HTTP映射（示例）\r\n\r\n- `INVALID_PATH` → 400；消息：路径非法或越权访问\r\n- `FILE_NOT_FOUND` → 404；消息：文件不存在\r\n- `UNSUPPORTED_TYPE` → 404；消息：格式不支持\r\n- `CONFLICT` → 409；消息：资源冲突或扫描进行中\r\n- `PARSE_FAILED` → 422；消息：解析失败，返回降级内容或提示\r\n- `RATE_LIMITED` → 429；消息：请求过多，请稍后重试\r\n- `INTERNAL_ERROR` → 500；消息：服务器内部错误\r\n\r\n## 9. 非功能与性能\r\n\r\n- 异步扫描与大目录优化（并发遍历、I/O分离、批量缓存更新）。\r\n- 跳过隐藏文件与目录，避免无意义解析。\r\n- 大文件（>100MB）预览仅加载前10页（PDF），显示分页控件与提示。\r\n- TOON结构与预览内容缓存默认1小时，可配置；命中则直接返回。\r\n- 兼容性：现代浏览器（Chrome/Firefox/Edge ≥ 88）。\r\n\r\n## 10. 部署与运维\r\n\r\n- 容器化：Docker 镜像构建；Nginx 反向代理与负载均衡；Jenkins + GitLab CI/CD。\r\n- 微服务：Eureka 服务发现；Config Server 管理根目录与扫描周期；\r\n- 监控：Prometheus 采集接口与调度指标；Grafana 仪表盘；\r\n- 日志：ELK 聚合 `document-service` 扫描/预览日志与异常。\r\n\r\n## 11. 用户故事与验收标准\r\n\r\n- 用户故事1：查看文档树结构\r\n  - Given 配置的根目录存在，When 应用启动，Then 自动扫描并生成TOON数据，左侧显示树状结构。\r\n  - Given 树已显示，When 点击目录节点，Then 展开子目录与文档清单。\r\n  - Given 树已显示，When 点击文档节点，Then 右侧预览文档内容。\r\n- 用户故事2：预览文档内容\r\n  - Given 用户点击文档节点，When 文档类型为 md/docx/pdf/csv/svg，Then 在右侧渲染对应预览。\r\n  - Given 预览界面显示，When 文档格式不支持，Then 显示“预览不支持”提示。\r\n  - Given 预览功能，Then 不提供下载或上传选项。\r\n\r\n### 用户故事地图（Story Map）\r\n\r\n- Backbone（活动）：浏览索引 → 查找与筛选 → 查看预览 → 管理重扫 → 运行保障\r\n- 用户角色：访客（浏览/预览）、管理员（重扫/状态/清缓存）\r\n- 活动拆分与步骤：\r\n  - 浏览索引：加载`index.toon/json` → 渲染树 → 展开/折叠 → 类型图标\r\n  - 查找与筛选：关键字筛选（按`name/path`，可选）→ 类型过滤（file/directory）→ 清空筛选\r\n  - 查看预览：点击文件 → 加载对应预览器（md/docx/pdf/csv/svg）→ 错误降级提示\r\n  - 管理重扫：进入管理页 → 选择目录 → 触发`admin/rescan` → 观察更新时间\r\n  - 运行保障：限流/缓存生效 → 监控指标回报 → 故障时降级与重试\r\n- 版本切片：\r\n  - MVP：加载索引、树浏览、`.md`预览、错误页提示\r\n  - V1：`.pdf/.docx/.csv/.svg`预览、`index.json`派生、限流与缓存\r\n  - V2：异步预览worker、管理后台页面、监控与告警、筛选搜索\r\n- 验收视角：每步具备可见输出（树渲染/预览/状态）、错误有统一文案、操作有可回退路径。\r\n\r\n## 12. 扩展性与演进\r\n\r\n- 新增格式时：实现 `TOONGenerationService` 与 `PreviewService` 的新适配方法，注册到策略表。\r\n- 多根目录：`config-server` 支持数组配置与动态刷新；扫描服务按目录并发执行。\r\n- 异步预览：将重解析任务下沉至 `preview-worker`，通过Kafka异步处理与Redis结果回填。\r\n\r\n## 13. 参考来源与整合说明\r\n\r\n- 参考文档：\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（豆包）.md:193-198（技术选型）、269-317/281-307（API端点）、205-213（扫描策略）、141-149（TOON规则）、385-392（安全/CORS）、377-384（性能/缓存）、239-252（交互）、40-65/67-125（模型）、175-185（分层）、400-405（扩展性）、77-90（TOON对象）。\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（DeepSeek）.md:53-58（前后端建议与预览库）、45-48（预览不支持提示）、58（Docker容器化）、36-49（用户故事与验收）、124-125（异步与性能）。\r\n- 参考文章：知乎《TOON vs JSON：现代数据格式的巅峰对决》 https://zhuanlan.zhihu.com/p/1973687597361566533（TOON语法、块结构与令牌效率要点）。\r\n- 整合原则：以“豆包”工程化规则为主干，吸收“DeepSeek”的快速实现与容器建议，并统一到 React + AntD + Vite 前端与 Spring Cloud + Java 后端的栈约束下。\r\n\r\n## 12. 运行保障\r\n\r\n### 12.1 缓存与失效策略\r\n\r\n- Redis键设计：\r\n  - TOON：`toon:{sha256(filePath)}:{version}`；预览：`preview:{sha256(filePath)}:{pageRange}`。\r\n  - 版本计算：默认 `sha256(filePath + mtime + size)`；可选 `sha256(content)`（大文件时按区块）。\r\n- TTL：默认1小时；大文件预览可单独设置TTL。\r\n- 失效触发：\r\n  - 扫描发现变更（新增/修改/删除）即失效对应键。\r\n  - 手动触发重扫或管理接口清缓存。\r\n- HTTP缓存：使用 `ETag` 与 `Last-Modified`；命中直接返回304。\r\n- 容量与逐出：配置最大容量；策略LRU或LFU；指标监控命中率与逐出率。\r\n\r\n### 12.2 监控指标与限流建议\r\n\r\n- 监控指标：\r\n  - `scan_duration_ms`、`parse_success_rate`、`cache_hit_ratio`、`api_latency_p95`、`api_latency_p99`、`queue_backlog`。\r\n- 限流：\r\n  - 基于IP或令牌的令牌桶；默认每IP每分钟 120 次，突发 30；超限返回429并提供 `Retry-After` 与统一错误页文案。\r\n\r\n### 12.3 稳定性与运行策略\r\n\r\n- 扫描策略：\r\n  - 定时扫描（默认每小时）与Linux inotify文件事件监听结合；事件驱动优先，周期性补偿。\r\n  - 多根目录并发扫描需保证仓库更新的原子性与去重。\r\n- 并发与锁：Repository更新采用分段锁（按目录粒度）与批处理事务，避免写入冲突；去重基于 `filePath+hash`。\r\n- 重试与退避：解析失败指数退避（初始500ms，最大4s，最多3次）；区分可重试/不可重试错误并记录失败样本。\r\n- 资源限制：为PDFBox/POI设置并发线程上限（≤CPU核数）、单文件解析超时（≤10s）与内存上限，防止OOM。\r\n- 配置刷新：`config-server` 变更后触发增量重扫（变更目录）或在 5 分钟窗口内全量重扫。\r\n\r\n## 附录 A. 示例用例（各格式TOON）\r\n\r\n- CSV：\r\n  - `users[2]{id,name,role}: 1,张三,admin; 2,李四,user`\r\n  - `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- MD（表格）：\r\n  - `features[3]{name,status}: 目录树,done; 预览,doing; 缓存,pending`\r\n- DOCX（表格优先）：\r\n  - `requirements[2]{item,priority}: TOON语法规范,high; 错误格式统一,high`\r\n- DOCX 适配决策矩阵：\r\n  - 条件：文档体积 < 5MB，样式简单（纯文本/基本表格） → 选择：前端 `mammoth` → 理由：轻量、减少后端负载 → 降级：复杂样式检测失败则回退后端POI\r\n  - 条件：包含复杂表格/图片/页眉页脚/公式 → 选择：后端 POI 转 HTML → 理由：解析更稳定、可控 → 降级：无法完整转换时输出文本TOON块\r\n  - 条件：超大文件 ≥ 20MB → 选择：后端 POI 分段解析 → 理由：内存与性能控制 → 降级：仅抽取段落摘要或表格前N行\r\n  - 条件：中文大段与混合编码 → 选择：后端统一UTF-8并规范化 → 理由：保证TOON一致性 → 降级：不可识别字符替换为占位符\r\n- PDF（文本降级）：\r\n  - `content[1]{content}: 项目概述\\n支持五类文档\\n缓存1小时`\r\n- SVG（元数据）：\r\n  - `svg_meta[1]{width,height,elementsCount}: 800,600,42`\r\n- 复杂示例（多块顺序与关联）：\r\n  - `directories[1]{path}: /docs`\r\n  - `documents[2]{id,name,path,type}: 1,概述.md,/docs/概述.md,md; 2,设计.pdf,/docs/设计.pdf,pdf`\r\n- `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n\r\n## 附录 B. 前后端实现与测试建议\r\n\r\n- 前端状态管理：采用 React Query；设定 `staleTime=30s`、`retry=2`、指数退避；缓存接口数据与错误重试。\r\n- PDF.js配置：本地worker脚本路径 `/static/pdf.worker.min.js`；确保CORS允许；大文件按页加载与占位提示。\r\n- 树加载：分页/懒加载/虚拟滚动结合；每层最多加载 200 节点，超出分页请求后端。\r\n- 测试计划：\r\n  - 后端：各格式解析与TOON生成单元/集成测试；错误与降级用例；EBNF语法校验测试。\r\n  - 前端：预览渲染与交互回归测试；大数据性能用例；状态管理与错误提示一致性测试。\r\n- 持久化：`DocumentRepository` 默认落地 PostgreSQL；支持内存模式用于小规模或故障降级。\r\n- 前端错误体验与降级：损坏文件或不支持预览时显示统一错误页与操作建议；提供“查看原始TOON”回退。\r\n- ETag/Last-Modified 协同：前端请求携带 `If-None-Match/If-Modified-Since`；React Query 根据304直接复用缓存并跳过重试。\r\n\r\n## 附录 C. 树接口分页契约示例\r\n\r\n- 请求：`GET /api/v1/document/tree?path=/opt/docs&depth=1&page=1&size=200`\r\n- 返回：`DirectoryTree` 仅包含当前层 `subDirs/documents` 的分页片段，并附 `metadata{total,page,size}` TOON块或JSON元数据。\r\n- 交互：\r\n  - 展开节点时按需请求下一层；若节点子项超过 `size`，显示“加载更多”并继续分页。\r\n  - 前端虚拟滚动仅渲染可视区域；移除离屏节点；缓存已加载段落。\r\n  - 排序：默认按 `dirName/fileName` 字典序；可选 `fileType/lastModifiedTime`。\r\n\r\n## 附录 D. TOON 示例集与单测清单\r\n\r\n- 示例集：为 CSV/MD/DOCX/PDF/SVG 各提供至少3个复杂场景示例（中文/空值/转义/大集合分页）。\r\n- 单测：\r\n  - 语法校验：转义合法性、分隔符、块计数一致性、编码为UTF-8。\r\n  - 解析一致性：`fields/data/toonString` 对齐；降级块生成规则；分页合并一致性。\r\n  - 边界用例：损坏文件、非UTF-8、超长字段、嵌套列表/表格。\r\n\r\n## 23. 持久化模型（data目录TOON方案）\r\n\r\n- 索引文件：`data/index.toon`，内容为 `files[count]{path,type,name}` 块与 `metadata{total,last_updated,root}` 块。\r\n- JSON派生：`data/index.json`（可选），内容为 `FilesIndex` 数组，便于前端树加载与缓存。\r\n- 更新时间：`data/last_updated.txt`（可选），记录北京时间ISO-8601字符串，便于运维观察。\r\n- 生成策略：手动/定时扫描生成，命中缓存则复用；变更检测到后重写文件并更新ETag。\r\n- 读取策略：API优先读取 `index.toon`；前端可选择直接请求TOON或JSON派生。\r\n\r\n## 24. 管理与运维接口\r\n\r\n- `POST /api/v1/admin/rescan`（全量或指定目录重扫，更新 `data/index.*`）。\r\n- `POST /api/v1/admin/cache/clear?filePath=...`（清除单文件预览缓存，与索引无关）。\r\n- `GET /api/v1/admin/status`（查看任务队列、缓存命中率与 `index.toon` 更新时间）。\r\n- 访问控制：默认仅本地或白名单IP允许；可后续接入令牌校验。\r\n\r\n## 25. 本地化与时间格式\r\n\r\n- 错误消息默认中文，支持英文回退：`locale` 字段返回当前语言。\r\n- 时间统一使用北京时间ISO-8601，带时区偏移 `+08:00`；用于 `metadata` 与日志。\r\n\r\n## 26. 参数默认值与配置表（节选）\r\n\r\n- `app.scan.root-dirs`：数组，默认空，示例 `[/opt/docs,/opt/images]`\r\n- `app.scan.cron`：扫描周期（CRON），默认每小时\r\n- `app.data.dir`：索引持久化目录，默认 `./data`\r\n- `preview.pdf.max-pages-per-request`：单次最大页数，默认20\r\n- `gateway.response.supported-accepts`：`application/json,application/x-toon,*/*`\r\n- `gateway.rate-limit.ip.per-minute`：默认120\r\n- `gateway.rate-limit.ip.burst`：默认30\r\n- `cache.toon.ttl`：默认3600秒\r\n- `cache.preview.ttl`：默认600秒（大文件）\r\n\r\n## 27. 术语对照与一致性清单\r\n\r\n- 术语对照：\r\n  - 目录（Directory/Folder）→ `dirPath/dirName`\r\n  - 文档（Document/File）→ `filePath/fileName/fileType`\r\n  - TOON结构（TOONStructure）→ `rootNode/elementCount/fields/data/toonString`\r\n  - 预览（Preview）→ `PreviewContent`\r\n- 一致性检查：\r\n  - 字段命名在前后端、持久化与TOON中一致\r\n  - 时间格式统一为北京时间ISO-8601（`+08:00`）\r\n  - 路径为Linux风格，UTF-8编码，NFC规范化\r\n  - 错误码与HTTP映射一致，统一错误响应结构\r\n  - 缓存键命名、TTL与失效触发一致\r\n\r\n## 28. 需求覆盖评估\r\n\r\n- 覆盖项：\r\n  - 指定目录全量枚举与中文路径：由扫描模块与`files`索引TOON规范覆盖（含Linux路径与符号链接治理）。\r\n  - 索引持久化与加载：`data/index.toon`（必选）与`index.json`（可选）及对应API覆盖。\r\n  - 树展示与预览适配：React前端与五类预览器（md/docx/pdf/csv/svg）覆盖；错误统一降级与提示。\r\n  - 治理与运行保障：路径与编码、安全、错误、缓存、限流、监控、稳定性策略覆盖。\r\n  - 运维与管理：`admin/rescan/status/cache`接口覆盖索引更新与状态可观测。\r\n- 差距与建议：\r\n  - `.xlsx` 仅列于索引样例，当前“预览不支持”（不在五类之内）。建议：V2引入轻量预览（只读表格前N行）或标注“仅下载不预览”。\r\n  - 索引搜索/筛选：Story Map中为可选，当前规范未定义API参数。建议：前端本地筛选为先，必要时提供`GET /index/search?q=`。\r\n  - 索引规模极大（>10万项）分页：目前通过JSON派生与前端虚拟滚动缓解，建议后续提供分片索引（`index.part-N.toon`）。\r\n  - 缺失文件或`index.toon`不存在的降级：建议在API与前端加入“空索引占位”与重扫引导。\r\n  - 无登录与权限控制：按需求刻意不覆盖；如后续公开部署需考虑只读令牌与审计。\r\n- 结论：就“展示指定目录并持久化为TOON索引、提供预览”核心需求而言，规范已覆盖端到端路径与非功能治理；已知差距集中在`.xlsx`预览与搜索/大规模索引的增强项，可按版本切片推进。\r\n\r\n## 附录 E. DDD 完整链路图（Mermaid）\r\n\r\n```mermaid\r\n%% -------------- DDD 完整链路 -------------- \r\ngraph TB\r\n    %% ========== 0. 前期对齐 ==========\r\n    A0[0.组建跨职能战队<br/>对齐业务愿景] --> A1\r\n\r\n    %% ========== 1. 用户旅程 ==========\r\n    A1([1.用户旅程工作坊<br/>User Journey Mapping])\r\n    A1 -->|输出| A1_OUT1[用户旅程图<br/>痛点 & 机会]\r\n    A1_OUT1 -->|输出| A1_OUT2[角色 Persona]\r\n\r\n    %% ========== 2. 用户故事地图 ==========\r\n    A1 --> A2([2.用户故事地图<br/>Story Mapping])\r\n    A2 -->|输出| A2_OUT1[故事地图墙<br/>Epic → Story → Task]\r\n    A2 -->|输出| A2_OUT2[故事卡<br/>As-Who-Want-What]\r\n    A2 -->|输出| A2_OUT3[验收标准 AC<br/>Given-When-Then]\r\n\r\n    %% ========== 3. 事件风暴 ==========\r\n    A2_OUT2 --> B0([3.事件风暴<br/>Event Storming])\r\n    B0 -->|每张故事卡| B0_LINK[故事卡 ←→ 领域事件]\r\n    B0 -->|贴纸墙| B0_STEP1[橙色：领域事件]\r\n    B0_STEP1 --> B0_STEP2[蓝色：命令]\r\n    B0_STEP2 --> B0_STEP3[黄色：聚合候选]\r\n    B0_STEP3 --> B0_STEP4[红色：热点/矛盾]\r\n    B0 -->|输出| B0_OUT1[事件流大图]\r\n    B0 -->|输出| B0_OUT2[命令-事件-聚合表]\r\n\r\n    %% ========== 4. 战略设计 ==========\r\n    B0_OUT2 --> C1([4.划分限界上下文])\r\n    C1 -->|输出| C1_OUT[BC图 + 上下文映射]\r\n    C1_OUT --> C2([5.建立通用语言])\r\n    C2 -->|输出| C2_DICT[术语词典 + 代码词汇表]\r\n\r\n    %% ========== 5. 战术设计 ==========\r\n    C2_DICT --> D1([6.战术建模])\r\n    D1 --> D1_ENT[实体 Entity]\r\n    D1 --> D1_AR[聚合根 Aggregate Root]\r\n    D1 --> D1_VO[值对象 Value Object]\r\n    D1 --> D1_DS[领域服务 Domain Service]\r\n    D1 --> D1_REPO[仓储 Repository]\r\n    D1 --> D1_SPEC[规约 Specification]\r\n    D1 -->|输出| D1_MODEL[战术模型图 + 类图]\r\n\r\n    %% ========== 6. 敏捷迭代：故事 → 任务 → 代码 ==========\r\n    D1_MODEL --> E1[7.迭代 backlog]\r\n    E1 --> E2[8.故事卡拆任务]\r\n    E2 --> E3[9.TDD / 单元测试]\r\n    E3 --> E4[10.持续集成]\r\n    E4 --> E5[11.演示 & 验收]\r\n\r\n    %% ========== 7. 需求变更闭环 ==========\r\n    F1([12.新需求 / 变更]) --> F2[ diff 事件流 ]\r\n    F2 --> F3[快速定位受影响的聚合]\r\n    F3 --> F4[更新故事卡 & AC]\r\n    F4 --> E1\r\n    F4 --> B0\r\n\r\n    %% -------------- 样式定义 --------------\r\n    classDef workshop fill:#FFEAA7,stroke:#333,stroke-width:2px\r\n    classDef output fill:#D1F2EB,stroke:#333\r\n    classDef story fill:#FDEDEC,stroke:#333\r\n    classDef change fill:#FADBD8,stroke:#333\r\n    classDef role fill:#EAF2F8,stroke:#333\r\n\r\n    class A1,A2,B0,C1,C2,D1 workshop\r\n    class A1_OUT1,A1_OUT2,A2_OUT1,A2_OUT2,A2_OUT3,B0_OUT1,B0_OUT2,C1_OUT,C2_DICT,D1_MODEL output\r\n    class E1,E2,E3,E4,E5 story\r\n    class F1,F2,F3,F4 change\r\n    class P1,P2,P3,P4,P5,P6 role",
  "size" : 58324,
  "modifiedAt" : 1764639821602,
  "id" : "技术案例/Web预览系统产品设计.md",
  "content" : "# 文档TOON结构生成与Web预览系统 - 统一产品设计文档（DDD + Spring Cloud + React）\r\n\r\n作者：伍志勇\r\n日期（北京时间）：2025-11-24 16:34:42\r\n版本：v1.0\r\n\r\n## 1. 产品概述\r\n\r\n- 目标：展示指定目录（示例 `/home/agentic/hkt-knowledge`）的全部子目录与文档清单；生成并持久化索引TOON数据到本地 `data/` 目录（不使用PostgreSQL）；左侧树展示结构，右侧预览文档内容。\r\n- 范围：完整枚举目录与文件（支持中文名与Linux路径）；文件预览支持 `.md/.docx/.pdf/.csv/.svg`。\r\n- 核心特性：索引TOON（`files` 块）生成与读取、树状展示、类型识别与预览、缓存与治理。\r\n- 场景：内部/公开文档库的轻量化展示与快速检索。\r\n\r\n## 2. 统一语言与术语（Ubiquitous Language）\r\n\r\n- 目录（Directory/Folder）：以`dirPath/dirName`表示的层级节点\r\n- 文档（Document/File）：以`filePath/fileName/fileType`表示的文件实体\r\n- TOON（面向词元的对象表示法）：结构化块表示，含`fields/data/toonString`\r\n- 预览（Preview）：以`PreviewContent`呈现的可视内容（HTML/PDF/SVG）\r\n\r\n## 3. 领域驱动设计（DDD）\r\n\r\n### 3.1 用户旅程工作坊（User Journey Mapping）\r\n\r\n- 输出：用户旅程图、痛点/机会点、角色与场景列表\r\n\r\n#### 3.1.1 角色（Persona）\r\n\r\n- 访客：浏览与预览文档，不进行上传/下载。\r\n- 管理员：触发重扫、查看状态、清理缓存，保障索引与预览稳定。\r\n\r\n#### 3.1.2 旅程阶段（Stages）\r\n\r\n- 进入应用 → 加载索引（`index.toon/json`） → 浏览树（展开/折叠） → 筛选与定位（关键字/类型过滤） → 点击文档 → 预览渲染（md/docx/pdf/csv/svg） → 错误与降级提示 → 管理操作（重扫/状态/清缓存）。\r\n\r\n#### 3.1.3 痛点与机会点（Pain & Opportunities）\r\n\r\n- 痛点：\r\n  - 大目录加载与渲染性能瓶颈（滚动卡顿、一次性渲染过多节点）。\r\n  - 多语言路径与中文字符的兼容性问题（编码与规范化）。\r\n  - 部分格式解析失败或不支持（例如复杂DOCX或超大PDF）。\r\n  - 索引刷新后前端状态一致性（缓存失效与ETag协同）。\r\n- 机会：\r\n  - 采用TOON高效索引与分页分块，减少传输体积与渲染压力。\r\n  - 树懒加载与虚拟滚动、按需加载预览器，显著提升体验。\r\n  - 统一错误与降级策略，保证“可视化回退”与操作指引。\r\n  - 管理接口支持重扫与状态观察，形成闭环运维能力。\r\n\r\n#### 3.1.4 场景清单（Scenarios）\r\n\r\n- 场景1：首次进入应用 → 自动加载`index.toon` → 左侧树显示根目录与首层节点。\r\n- 场景2：展开目录节点 → 按需请求下一层数据 → 渲染子目录与文档列表。\r\n- 场景3：关键字筛选 → 过滤`name/path`，高亮命中项 → 清空筛选恢复。\r\n- 场景4：点击`.md`文档 → 前端`marked`渲染 → 支持标题目录与代码高亮。\r\n- 场景5：点击`.pdf`文档 → 后端流式返回 → 前端`pdfjs`分页渲染与缩放。\r\n- 场景6：点击`.docx`文档 → 根据决策矩阵选择前端`mammoth`或后端POI → 输出HTML预览。\r\n- 场景7：点击`.csv`文档 → `papaparse`解析 → 表格排序与列宽调整。\r\n- 场景8：点击`.svg`文档 → 直接嵌入`<svg>` → 安全过滤可疑脚本。\r\n- 场景9：预览失败（解析或资源限制） → 显示降级内容或错误页 → 提供“查看原始TOON”。\r\n- 场景10：管理员在状态页触发重扫 → `data/index.toon`更新时间刷新 → 前端树自动刷新或提示手动刷新。\r\n\r\n### 3.2 事件风暴（Event Storming）摘要\r\n\r\n- 业务目标：从指定根目录快速构建可浏览的索引TOON，并按需预览文档。\r\n- 关键事件（Domain Events）：\r\n  - `IndexRequested`（用户/系统发起索引请求）\r\n  - `DirectoryScanned`（目录被遍历完成，发现条目）\r\n  - `ItemEnumerated`（发现目录/文件条目）\r\n  - `IndexPersisted`（索引TOON写入 `data/index.toon` 完成）\r\n  - `IndexLoaded`（前端/API读取索引TOON或JSON派生）\r\n  - `PreviewRequested`（预览请求到达）\r\n  - `PreviewRendered`（预览成功生成）\r\n  - `PreviewFailed`（预览失败，触发降级与错误事件）\r\n  - `RescanTriggered`（运维或配置变更触发重扫）\r\n  - `CacheInvalidated`（扫描变更导致缓存失效）\r\n- 命令（Commands）：`TriggerScan`、`PersistIndex`、`LoadIndex`、`RenderPreview`、`InvalidateCache`、`TriggerRescan`。\r\n- 聚合与读模型：\r\n  - 聚合：`DocumentRepository`（统一维护文件与目录条目、元数据）\r\n  - 读模型：`FilesIndex`（TOON/JSON）、`DirectoryTree`（派生树）、`PreviewContent`\r\n- 策略/规则（Policies）：\r\n  - 配置变更 → 触发 `TriggerRescan`\r\n  - 扫描完成 → `PersistIndex` → 通知前端刷新\r\n  - 预览失败 → 生成降级TOON块或错误响应\r\n- 外部系统：文件系统（Linux）、Redis（缓存）、Config Server（配置）、Nginx（入口）、Prometheus/Grafana（监控）。\r\n- 端到端路径（示例）：\r\n  - 用户打开页面 → `IndexRequested` → 后端`TriggerScan`（或直接`IndexLoaded`）→ 生成并`PersistIndex` → 前端树加载 → 用户点击文件 → `PreviewRequested` → `RenderPreview` → 展示或降级。\r\n\r\n#### 3.2.1 DDD 完整链路图（Mermaid）\r\n\r\n- 迁移说明：该图已移至“附录 E. DDD 完整链路图（Mermaid）”。\r\n\r\n### 3.3 划分限界上下文（Context Slicing）\r\n\r\n- 规则：语言边界、业务一致性、团队边界\r\n- 输出：限界上下文图（Context Map）\r\n\r\n#### 3.3.1 上下文清单（Bounded Contexts）\r\n\r\n- 文档（Document）：负责文档实体、目录树读模型与TOON结构的对外暴露。\r\n- 扫描（Scan）：负责遍历与索引生成、持久化`data/index.toon/index.json`。\r\n- 预览（Preview）：负责类型适配与内容生成（HTML/PDF/SVG）。\r\n- 网关（Gateway）：统一入口、CORS、限流、错误映射与内容协商。\r\n\r\n#### 3.3.2 边界描述（Boundary）\r\n\r\n- Document：\r\n  - 输入：来自Scan的索引、来自Preview的渲染请求。\r\n  - 输出：`DirectoryTree`、`FilesIndex`、`TOONStructure`。\r\n  - 自有模型：`Document`、`FileMetadata`、`TOONStructure`、`DirectoryTree`。\r\n  - 非功能：读取`data`目录只读；缓存命中直接返回；统一错误结构。\r\n- Scan：\r\n  - 输入：配置根目录（Config Server）、重扫命令（Admin）。\r\n  - 输出：`index.toon`与`index.json`、`metadata`更新时间。\r\n  - 自有模型：扫描任务、黑白名单、符号链接校验策略。\r\n  - 非功能：文件系统I/O与并发控制、去重与原子写入、指标监控。\r\n- Preview：\r\n  - 输入：`filePath`与类型参数。\r\n  - 输出：`PreviewContent`（HTML/PDF/SVG）。\r\n  - 自有模型：解析适配器、降级策略、资源限制（线程/内存/超时）。\r\n  - 非功能：安全过滤、内容类型协商、HTTP Range支持。\r\n- Gateway：\r\n  - 输入：前端请求。\r\n  - 输出：路由到各BC、统一错误映射、`ETag/Last-Modified`处理。\r\n  - 自有模型：CORS白名单、限流令牌桶、受支持`Accept`集合。\r\n  - 非功能：日志与审计、告警与熔断策略（可选）。\r\n\r\n#### 3.3.3 防腐层与契约（ACL & Contract）\r\n\r\n- Preview对复杂库（PDFBox/POI）设置适配接口，隔离库细节，返回统一`PreviewContent`。\r\n- Gateway对外统一MIME与错误结构；`Accept: application/x-toon`直通TOON契约；`application/json`返回结构化对象。\r\n- Document与Scan之间采用`index.toon/json`文件契约；更新时间通过`metadata.last_updated`传递。\r\n\r\n#### 3.3.4 团队边界\r\n\r\n- Scan与Preview可由后端团队维护；Document由后端与前端共同维护读模型；Gateway由平台/架构组维护。\r\n\r\n### 3.4 上下文映射（Context Mapping）\r\n\r\n- 模式：合作关系、共享内核、客户-供应商、防腐层ACL、开放主机服务\r\n- 输出：上下文映射图\r\n\r\n#### 3.4.1 关系矩阵（Relationship Matrix）\r\n\r\n- Document ↔ Scan：客户-供应商（Customer–Supplier）。Document消费Scan产出的索引；Scan遵循约定的TOON契约与更新时间规则。\r\n- Document ↔ Preview：开放主机服务（Open Host Service）。Document发起`RenderPreview`调用，Preview暴露统一接口与MIME；失败时返回统一错误结构。\r\n- Gateway ↔ 各BC：开放主机服务 + 防腐层（ACL）。Gateway只曝光稳定契约与错误映射；对内部对象进行DTO转换。\r\n\r\n#### 3.4.2 协作模式说明\r\n\r\n- Published Language：跨上下文统一采用`TOONStructure/PreviewContent/DirectoryTree/FilesIndex`术语与字段命名，避免翻译歧义。\r\n- Anti-Corruption Layer：Preview内部适配第三方解析库；Gateway对外统一MIME与错误；Document保持读模型纯净。\r\n- Shared Kernel（谨慎）：仅在通用工具层共享TOON校验器与时间/路径规范工具，业务模型不共享。\r\n\r\n#### 3.4.3 故障与降级路径\r\n\r\n- Scan失败：保留最近一次`index.toon`并标注`metadata`为旧时间；前端提示“索引可能不是最新”。\r\n- Preview失败：返回降级TOON或错误；前端提供“查看原始TOON”与“稍后重试”。\r\n- Gateway限流：返回429与`Retry-After`，避免雪崩；记录`traceId`与指标。\r\n\r\n#### 3.4.4 一致性与刷新\r\n\r\n- 索引刷新：`IndexPersisted`事件广播（可选）或前端轮询`last_updated`；命中ETag返回304。\r\n- 读写分离：Scan写`data/*`，Document读`data/*`；通过文件锁或原子替换保证一致性。\r\n\r\n### 3.5 建立通用语言（Ubiquitous Language）\r\n\r\n- 指引：术语统一见第2章；代码词汇表见第27章\r\n\r\n#### 3.5.1 角色词汇表\r\n\r\n- 访客（Visitor）：浏览索引、查看预览、不进行写操作。\r\n- 管理员（Admin）：触发重扫、查看运行状态、清理缓存。\r\n\r\n#### 3.5.2 场景词汇表\r\n\r\n- 浏览索引：加载`index.toon/json`并渲染树。\r\n- 展开节点：获取指定目录的子项并渲染。\r\n- 筛选搜索：按`name/path`过滤并高亮命中。\r\n- 预览渲染：根据`fileType`选择适配器生成`PreviewContent`。\r\n- 错误降级：当解析失败时渲染降级内容或错误页。\r\n- 管理重扫：管理员触发重新扫描根目录或子树。\r\n\r\n#### 3.5.3 示例用语（Examples）\r\n\r\n- 作为访客，我希望能快速加载文档树并展开我关心的目录。\r\n- 作为访客，当我点击文档时，系统应返回对应的预览内容或清晰的错误提示。\r\n- 作为管理员，我希望在索引过期或结构变化时，能够一键触发重扫并查看最新更新时间。\r\n\r\n#### 3.5.4 代码词汇一致性\r\n\r\n- 接口与模型统一使用：`filePath/fileName/fileType`、`TOONStructure`、`PreviewContent`、`DirectoryTree`、`FilesIndex`。\r\n- 错误统一：`ErrorResponse{code,message,traceId,details}`；日志包含`traceId`便于定位。\r\n\r\n### 3.6 战术设计（Tactical Modeling）\r\n\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 待补充：战术模型图与类图（ToDo）\r\n\r\n#### 3.6.1 核心领域与聚合\r\n\r\n- 聚合根：`DocumentRepository`，负责文档实体生命周期管理（创建、查询、更新、删除）。\r\n- 上下文划分：\r\n  - 文档领域（核心）：文档实体、TOON结构、文件元数据。\r\n  - 扫描领域：扫描任务与结果，目录遍历与目标格式识别。\r\n  - 预览领域：预览内容生成与格式适配。\r\n\r\n#### 3.6.2 实体与值对象\r\n\r\n- 实体 `Document`（唯一标识 `filePath`）：\r\n  - 属性：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure`（懒加载）、`previewContent`（懒加载）。\r\n- 值对象：\r\n  - `FileMetadata`：`fileSize`、`lastModifiedTime`、`charset`（默认UTF-8）。\r\n  - `TOONStructure`：`rootNode`、`elementCount`、`fields`（List<String>）、`data`（List<Map<String,Object>>）、`toonString`（标准TOON字符串）。\r\n  - `PreviewContent`：`contentType`（text/html、application/pdf、image/svg+xml 等）、`content`（HTML字符串/二进制流/SVG文本）、`supportFullPreview`（boolean）。\r\n  - `DirectoryTree`：`dirPath`、`dirName`、`subDirs`（List<DirectoryTree>）、`documents`（List<DocumentSummary>）。\r\n  - `DocumentSummary`：`filePath`、`fileName`、`fileType`、`fileSize`。\r\n\r\n#### 3.6.3 领域服务\r\n\r\n- `ScanService`：遍历根目录与子目录，识别目标格式、生成 `FileMetadata`，更新仓库。\r\n- `TOONGenerationService`：按文档格式提取结构化数据并生成 `TOONStructure`。\r\n- `PreviewService`：将文档转换为Web可展示的 `PreviewContent`（HTML/PDF/SVG）。\r\n\r\n#### 3.6.4 领域事件\r\n\r\n- 事件（可选）：`DocumentScannedEvent`（扫描完成）、`PreviewRequestedEvent`（预览请求）。\r\n- 实体/聚合根/值对象/领域服务/仓储/工厂\r\n- 参考：3.2 实体与值对象；3.3 领域服务\r\n\r\n#### 3.6.5 战术模型图与类图（文本草案）\r\n\r\n- 实体与值对象：\r\n  - `Document`（Entity）：`filePath`、`fileName`、`fileType`、`parentDir`、`fileMetadata`、`toonStructure?`、`previewContent?`\r\n  - `FileMetadata`（ValueObject）：`fileSize`、`lastModifiedTime`、`charset`\r\n  - `TOONStructure`（ValueObject）：`rootNode`、`elementCount`、`fields: List<String>`、`data: List<Map<String,Object>>`、`toonString`\r\n  - `PreviewContent`（ValueObject）：`contentType`、`content`、`supportFullPreview`\r\n  - `DirectoryTree`（ValueObject）：`dirPath`、`dirName`、`subDirs: List<DirectoryTree>`、`documents: List<DocumentSummary>`\r\n- 仓储（Repository）：\r\n  - `DocumentRepository`：`findByPath(filePath)`、`save(document)`、`listByDir(dirPath)`、`updateMetadata(filePath, metadata)`\r\n- 领域服务（Domain Service）：\r\n  - `ScanService`：`scan(rootDirs)`、`enumerate(dirPath)`、`persistIndex(dataDir)`\r\n  - `TOONGenerationService`：`fromMd(filePath)`、`fromCsv(filePath)`、`fromDocx(filePath)`、`fromPdf(filePath)`、`fromSvg(filePath)`\r\n  - `PreviewService`：`render(filePath)`（返回`PreviewContent`）\r\n- 工厂与规约（Factory & Specification）：\r\n  - `PreviewAdapterFactory`：按`fileType`返回适配器。\r\n  - `IndexSpecification`：黑白名单、符号链接、编码规范校验。\r\n- 交互关系：\r\n  - 应用层调用`ScanService`生成索引，持久化到`data/index.*`；\r\n  - 应用层调用`PreviewService`产出`PreviewContent`；\r\n  - Document聚合通过`DocumentRepository`装载与更新实体，保持读模型与索引文件一致。\r\n\r\n（Mermaid 可视化）\r\n\r\n```mermaid\r\nclassDiagram\r\ndirection TB\r\n\r\nclass Document {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +parentDir: String\r\n  +fileMetadata: FileMetadata\r\n  +toonStructure: TOONStructure\r\n  +previewContent: PreviewContent\r\n}\r\n\r\nclass FileMetadata {\r\n  +fileSize: long\r\n  +lastModifiedTime: Instant\r\n  +charset: String\r\n}\r\n\r\nclass TOONStructure {\r\n  +rootNode: String\r\n  +elementCount: int\r\n  +fields: List<String>\r\n  +data: List<Map<String,Object>>\r\n  +toonString: String\r\n}\r\n\r\nclass PreviewContent {\r\n  +contentType: String\r\n  +content: Any\r\n  +supportFullPreview: boolean\r\n}\r\n\r\nclass DirectoryTree {\r\n  +dirPath: String\r\n  +dirName: String\r\n  +subDirs: List<DirectoryTree>\r\n  +documents: List<DocumentSummary>\r\n}\r\n\r\nclass DocumentSummary {\r\n  +filePath: String\r\n  +fileName: String\r\n  +fileType: FileType\r\n  +fileSize: long\r\n}\r\n\r\nclass DocumentRepository {\r\n  +findByPath(filePath: String): Document\r\n  +save(document: Document): void\r\n  +listByDir(dirPath: String): List<DocumentSummary>\r\n  +updateMetadata(filePath: String, metadata: FileMetadata): void\r\n}\r\n\r\nclass ScanService {\r\n  +scan(rootDirs: List<String>): void\r\n  +enumerate(dirPath: String): List<FilesIndexItem>\r\n  +persistIndex(dataDir: String): void\r\n}\r\n\r\nclass TOONGenerationService {\r\n  +fromMd(filePath: String): TOONStructure\r\n  +fromCsv(filePath: String): TOONStructure\r\n  +fromDocx(filePath: String): TOONStructure\r\n  +fromPdf(filePath: String): TOONStructure\r\n  +fromSvg(filePath: String): TOONStructure\r\n}\r\n\r\nclass PreviewService {\r\n  +render(filePath: String): PreviewContent\r\n}\r\n\r\nclass PreviewAdapterFactory {\r\n  +getAdapter(fileType: FileType): PreviewAdapter\r\n}\r\n\r\nclass PreviewAdapter\r\nclass MdAdapter\r\nclass PdfAdapter\r\nclass DocxAdapter\r\nclass CsvAdapter\r\nclass SvgAdapter\r\n\r\nDocument *-- FileMetadata\r\nDocument o-- TOONStructure\r\nDocument o-- PreviewContent\r\nDirectoryTree o-- DocumentSummary\r\nDocumentRepository ..> Document : load/save\r\nScanService ..> DocumentRepository : enumerate/listByDir\r\nScanService ..> DirectoryTree : derive\r\nTOONGenerationService ..> TOONStructure\r\nPreviewService ..> PreviewContent\r\nPreviewService ..> PreviewAdapterFactory\r\nPreviewAdapterFactory ..> PreviewAdapter\r\nPreviewAdapter <|.. MdAdapter\r\nPreviewAdapter <|.. PdfAdapter\r\nPreviewAdapter <|.. DocxAdapter\r\nPreviewAdapter <|.. CsvAdapter\r\nPreviewAdapter <|.. SvgAdapter\r\n```\r\n\r\n### 3.2.2 命令-事件-聚合表（草案）\r\n\r\n\r\n| 业务动作   | 命令              | 触发条件           | 领域事件                                              | 聚合/读模型            | 备注                                                  |\r\n| ---------- | ----------------- | ------------------ | ----------------------------------------------------- | ---------------------- | ----------------------------------------------------- |\r\n| 索引扫描   | `TriggerScan`     | 用户/定时/配置变更 | `DirectoryScanned`、`ItemEnumerated`                  | `DocumentRepository`   | 生成`FilesIndex`候选；跳过隐藏/黑名单                 |\r\n| 持久化索引 | `PersistIndex`    | 扫描完成           | `IndexPersisted`                                      | `DocumentRepository`   | 写入`data/index.toon`与`metadata`；可派生`index.json` |\r\n| 加载索引   | `LoadIndex`       | 前端或API请求      | `IndexLoaded`                                         | `FilesIndex`（读模型） | 返回TOON或JSON，支持内容协商                          |\r\n| 请求预览   | `RenderPreview`   | 用户点击文件       | `PreviewRequested`、`PreviewRendered`/`PreviewFailed` | `PreviewService`       | 支持md/docx/pdf/csv/svg；失败降级                     |\r\n| 清缓存     | `InvalidateCache` | 管理操作/变更检测  | `CacheInvalidated`                                    | Cache层                | 失效`toon:`/`preview:`键；ETag刷新                    |\r\n| 触发重扫   | `TriggerRescan`   | Admin接口调用      | `RescanTriggered`                                     | `ScanService`          | 全量或增量；更新`last_updated`                        |\r\n\r\n### 3.3.1 限界上下文图（草案表格）\r\n\r\n\r\n| 上下文（BC）     | 职责                        | 上游             | 下游             | 关系模式                 | 防腐层                 | UL关键词                                     |\r\n| ---------------- | --------------------------- | ---------------- | ---------------- | ------------------------ | ---------------------- | -------------------------------------------- |\r\n| 文档（Document） | 文档实体/TOON/目录树读模型  | 扫描（Scan）     | 预览（Preview）  | 客户-供应商（对Scan）    | 路径/编码规范；DTO映射 | `filePath`、`TOONStructure`、`DirectoryTree` |\r\n| 扫描（Scan）     | 遍历与索引生成、持久化index | Config Server    | 文档（Document） | 开放主机服务（暴露索引） | 黑白名单/符号链接校验  | `files[count]{path,type,name}`、`metadata`   |\r\n| 预览（Preview）  | 各类型预览内容生成          | 文档（Document） | 网关/前端        | 防腐层（对复杂格式库）   | 解析库接口封装         | `PreviewContent`、降级策略                   |\r\n| 网关（Gateway）  | 统一入口/CORS/限流          | 前端             | 各BC API         | 开放主机服务             | 统一错误映射           | `Accept`、`ETag`                             |\r\n\r\n### 3.7 实现（Code & UT）\r\n\r\n- 结构：模块-聚合-分层；接口层/应用层/领域层/基础设施层\r\n- 规约：业务规则单元测试、EBNF语法校验测试\r\n\r\n#### 3.7.1 关键模块清单（Backend）\r\n\r\n- `gateway`：路由、CORS、限流、错误映射、ETag处理。\r\n- `document-service`\r\n  - Controller：`DocumentController`（tree/toon/preview/scan/index接口）。\r\n  - Application：用例编排与事务控制（按目录粒度）。\r\n  - Domain：`ScanService`、`TOONGenerationService`、`PreviewService`、`DocumentRepository`。\r\n  - Infra：文件遍历器、TOON校验器、预览适配器（PDFBox/POI/OpenCSV等）。\r\n- `preview-worker`（可选）：队列消费者，异步执行重解析任务。\r\n\r\n#### 3.7.2 关键模块清单（Frontend）\r\n\r\n- 页面：`TreePage`（索引树与筛选）、`PreviewPage`（文档预览）、`AdminPage`（重扫与状态）。\r\n- 组件：`DirectoryTree`、`PreviewPane(md/pdf/docx/csv/svg)`、`SearchBar`、`StatusBadge`。\r\n- 状态：React Query 请求层、缓存策略与错误提示。\r\n\r\n#### 3.7.3 UT用例索引（Backend）\r\n\r\n- `ScanServiceTest`：\r\n  - 枚举跳过隐藏/黑名单；符号链接白名单校验；大目录性能阈值。\r\n  - `index.toon`生成与`metadata`时间格式（北京时区）。\r\n- `TOONGenerationServiceTest`：\r\n  - CSV/MD/DOCX/PDF/SVG五类解析一致性与转义校验；降级块生成。\r\n- `PreviewServiceTest`：\r\n  - 各类型适配与MIME；PDF Range分页；超时与内存限制保护。\r\n- `GatewayErrorMappingTest`：\r\n  - 错误码与HTTP映射；`traceId`传递；CORS预检缓存。\r\n\r\n#### 3.7.4 UT用例索引（Frontend）\r\n\r\n- `TreeRender.spec.tsx`：懒加载/虚拟滚动/分页段落；筛选与高亮。\r\n- `PreviewMd.spec.tsx`、`PreviewPdf.spec.tsx`、`PreviewDocx.spec.tsx`、`PreviewCsv.spec.tsx`、`PreviewSvg.spec.tsx`：渲染与错误降级。\r\n- `AdminRescan.spec.tsx`：重扫后更新时间刷新与提示。\r\n\r\n### 3.8 持续演进（Evolution）\r\n\r\n- 活动：领域事件回放、模型重构、定期事件风暴\r\n- 参考：12 运行保障；12 扩展性与演进\r\n\r\n#### 3.8.1 演进周期\r\n\r\n- 每周：事件风暴复盘（针对新增/变化的领域事件与命令），更新命令-事件-聚合表。\r\n- 每两周：Story Map梳理与迭代计划评审；MVP/V1/V2增量验收。\r\n- 每月：非功能指标回顾（`latency p95/p99`、`cache_hit_ratio`、`parse_success_rate`）与容量策略调整。\r\n\r\n#### 3.8.2 触发机制\r\n\r\n- 配置刷新（Config Server）：根目录或限流/缓存参数变更 → 增量/全量重扫（5分钟窗口）。\r\n- 文件系统事件（inotify）：新增/修改/删除 → 局部重扫与缓存失效。\r\n- 指标阈值：当`parse_success_rate`连续低于阈值或`api_latency_p99`升高 → 降级策略启用与资源上限调整。\r\n\r\n#### 3.8.3 版本演进\r\n\r\n- MVP → V1 → V2：对应“用户故事地图”的版本切片；优先保证索引浏览与`.md`预览，逐步引入其他格式与后台能力。\r\n\r\n#### 3.8.4 领域事件回放\r\n\r\n- 支持将扫描与预览关键步骤记录为事件流水，便于定位问题与重现；必要时对比两版索引差异（`diff index.toon`）。\r\n\r\n#### 3.8.5 风险与回退\r\n\r\n- 索引文件损坏或不可读：回退到最近一次可用索引并提示“索引可能过期”。\r\n- 预览解析崩溃：触发熔断与降级，限制并发与内存，记录失败样本用于事后分析。\r\n\r\n## 4. 架构设计（Spring Cloud + React）\r\n\r\n- 服务组件：\r\n  - `gateway`（统一入口、CORS策略、限流可选）。\r\n  - `eureka`（服务发现）。\r\n  - `config-server`（集中配置，含根目录数组与定时参数）。\r\n  - `document-service`（领域服务：扫描、TOON、预览API）。\r\n  - 可选 `preview-worker`（重解析任务异步化：PDF/DOCX转HTML）。\r\n- 技术选型：\r\n  - 后端：Java 17、Spring Boot 3、Lombok（简化）、POI（docx）、PDFBox（pdf）、OpenCSV（csv）、Tika（类型识别）、Redis（缓存）。\r\n  - 前端：React 18、TypeScript、Ant Design 5、Vite；预览库：`marked`（md）、`pdfjs-dist`（pdf）、`mammoth`（docx）、`papaparse`（csv）、原生`<svg>`（svg）。\r\n  - 部署：Docker、Nginx（负载均衡）、Jenkins + GitLab（CI/CD）、Kubernetes（可选）；监控：Prometheus + Grafana；日志：ELK。\r\n- 依赖关系：接口层（Web/网关）→ 应用层（用例编排）→ 领域层（模型与服务）→ 基础设施层（文件系统与解析库）。\r\n\r\n## 5. TOON语法规范\r\n\r\n- 语法范式：`blockName[count]{field1,field2,...}: record1; record2; ...`\r\n- 记录表达：每条记录为逗号分隔的字段值；记录间以分号或换行分隔；允许空值（空字符串）。\r\n- 转义规则：值中包含逗号/分号/换行时使用 `\\,` `\\;` `\\n`；反斜杠使用 `\\\\`；统一UTF-8编码。\r\n- 多块输出：响应可包含多个块，按语义顺序组织，例如：\r\n  - `directories[2]{path}: /docs; /images`\r\n  - `documents[3]{id,name,path,type}: 1,readme.md,/docs/readme.md,md; 2,report.docx,/docs/report.docx,docx; 3,data.csv,/data/data.csv,csv`\r\n- 元数据块：`metadata{total,last_updated,page,size}: 3,2025-11-24T11:27:16+08:00,1,100`（时间统一为北京时间，ISO-8601）。\r\n- 令牌优化：字段顺序固定；避免冗余键；尽量合并表头/重复值；非必要标点禁止；大集合按分页块分段返回。\r\n- 兼容性：中文目录/文档名与中文字段值允许；统一UTF-8；建议使用NFC规范化。\r\n- EBNF描述：\r\n  - `block ::= name '[' count ']' '{' fields '}' ':' records`\r\n  - `fields ::= field { ',' field }`\r\n  - `records ::= record { (';' | NEWLINE) record }`\r\n  - `record ::= value { ',' value }`\r\n  - `value ::= TEXT | ESCAPED`\r\n- `ESCAPED ::= '\\\\,' | '\\\\;' | '\\\\n' | '\\\\\\\\'`\r\n- `name, field, TEXT 采用 UTF-8；推荐NFC规范化`\r\n\r\n### 5.1 索引TOON（files块）规范\r\n\r\n- 目的：持久化指定根目录的目录与文件枚举，供Web应用加载展示。\r\n- 语义：`files[count]{path,type,name}:` 后接按行/分号分隔的记录；`type` 取 `directory|file`；`path` 为相对根的Linux风格路径；`name` 为条目名。\r\n- 元数据：附加 `metadata{total,last_updated,root}: count,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n- 示例：\r\n  - `files[12]{path,type,name}:`\r\n  - `hkt-knowledge/,directory,hkt-knowledge`\r\n  - `hkt-knowledge/hkt-product/,directory,hkt-product`\r\n  - `hkt-knowledge/hkt-product/hkt-agentic/,directory,hkt-agentic`\r\n  - `hkt-knowledge/hkt-product/industrial-brain/,directory,industrial-brain`\r\n  - `hkt-knowledge/hkt-project/,directory,hkt-project`\r\n  - `hkt-knowledge/hkt-project/docs/,directory,docs`\r\n  - `hkt-knowledge/hkt-project/docs/gitlab流水线触发指南.md,file,gitlab流水线触发指南.md`\r\n  - `hkt-knowledge/hkt-project/docs/会议纪要模版.md,file,会议纪要模版.md`\r\n  - `hkt-knowledge/hkt-project/docs/孚盟学习网址.md,file,孚盟学习网址.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.md,file,客户地理位置分布.md`\r\n  - `hkt-knowledge/hkt-project/docs/客户地理位置分布.xlsx,file,客户地理位置分布.xlsx`\r\n  - `hkt-knowledge/hkt-project/docs/广告推广国家.md,file,广告推广国家.md`\r\n  - `hkt-knowledge/test-document.md,file,test-document.md`\r\n  - `metadata{total,last_updated,root}: 12,2025-11-24T16:34:42+08:00,/home/agentic/hkt-knowledge`\r\n\r\n## 6. 功能模块设计\r\n\r\n### 6.1 扫描模块\r\n\r\n- 配置根目录（单/多），在 `config-server` 配置，如 `app.scan.root-dirs=[\"/home/agentic/hkt-knowledge\"]`；默认取第一个根进行索引持久化。\r\n- 支持手动触发与定时扫描（默认每1小时，可配置）；跳过隐藏文件/目录（如 `.git/`）。\r\n- 扫描遍历目录与文件，生成 `files[count]{path,type,name}` 索引TOON；写入本地 `data/index.toon`（附 `metadata` 块）。\r\n- 可选生成派生 `data/index.json`（仅供前端树快速加载）。\r\n\r\n### 6.2 TOON生成模块\r\n\r\n- 首次访问懒加载生成，生成后按 `filePath` 缓存（Redis）默认1小时。\r\n- 无法提取结构化数据时生成默认TOON（例如PDF纯文本）。\r\n- 标准TOON输出包含对象字段与 `toonString` 字符串。\r\n\r\n### 6.3 Web展示模块\r\n\r\n- 左侧 Tree 展示 `DirectoryTree`，支持展开/折叠、类型图标区分。\r\n- 右侧预览按类型加载对应预览器：\r\n  - `.md` → `marked` 转 HTML；\r\n  - `.pdf` → `pdfjs-dist` 渲染二进制流，支持滚动/缩放；\r\n  - `.docx` → 后端 POI 转 HTML 或前端 `mammoth`；\r\n  - `.csv` → `papaparse` → `Antd Table`，支持排序；\r\n  - `.svg` → 原始文本嵌入 `<svg>`。\r\n- 交互限制：不提供下载按钮，禁用右键保存（前端限制）。\r\n\r\n## 7. API设计（REST）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 描述：获取目录树结构。\r\n  - 返回：`DirectoryTree`。\r\n- `GET /api/v1/document/toon?filePath=...`\r\n  - 描述：获取文档TOON结构。\r\n  - 返回：`TOONStructure`。\r\n- `GET /api/v1/document/preview?filePath=...`\r\n  - 描述：获取文档预览内容。\r\n  - 返回：`PreviewContent`（HTML字符串/PDF流/SVG文本）。\r\n- `POST /api/v1/document/scan`\r\n  - 描述：触发手动扫描。\r\n  - 返回：`ScanResult`（新增/更新/删除数量等）。\r\n\r\n### 7.1 索引加载接口\r\n\r\n- `GET /api/v1/index/toon`\r\n  - 描述：返回持久化的索引TOON（`data/index.toon`）。\r\n  - 返回：MIME `application/x-toon` 或 `text/plain; charset=UTF-8`。\r\n- `GET /api/v1/index/json`\r\n  - 描述：返回索引的JSON派生结构（`data/index.json`）。\r\n  - 返回：`FilesIndex`（数组）。\r\n\r\n### 7.2 请求参数\r\n\r\n- 获取目录树 `GET /api/v1/document/tree`\r\n  - 可选：`rootDir`（字符串，默认配置的全部根目录）、`path`（仅返回指定路径子树）、`depth`（整数，默认2）、`page`、`size`（分段加载）。\r\n- 获取文档TOON `GET /api/v1/document/toon`\r\n  - 必填：`filePath`；可选：`format=both|toon|json`（默认both）、`page`、`size`（大集合分页）。\r\n- 获取文档预览 `GET /api/v1/document/preview`\r\n  - 必填：`filePath`；可选（PDF）：`startPage`、`endPage`。\r\n- 触发手动扫描 `POST /api/v1/document/scan`\r\n  - 可选：`dirPath`（仅扫描指定目录）、`force`（布尔，是否跳过缓存直接重扫）。\r\n\r\n### 7.3 响应示例（节选）\r\n\r\n- 目录树（JSON）：\r\n  - `{ \"dirPath\": \"/opt/docs\", \"dirName\": \"docs\", \"subDirs\": [{\"dirPath\":\"/opt/docs/api\",\"dirName\":\"api\",\"subDirs\":[],\"documents\":[]}], \"documents\": [{\"filePath\":\"/opt/docs/readme.md\",\"fileName\":\"readme.md\",\"fileType\":\"MD\",\"fileSize\":1024}] }`\r\n- 文档TOON（both）：\r\n  - `{ \"rootNode\":\"users\", \"elementCount\":2, \"fields\":[\"id\",\"name\",\"role\"], \"data\":[{\"id\":1,\"name\":\"张三\",\"role\":\"admin\"},{\"id\":2,\"name\":\"李四\",\"role\":\"user\"}], \"toonString\":\"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n- 文档预览（PDF片段）：\r\n  - 头：`Content-Type: application/pdf`，支持 Range；体为二进制流；JSON模式示例：`{ \"contentType\":\"application/pdf\", \"content\":\"<base64>\", \"supportFullPreview\": false }`\r\n\r\n### 7.4 接口参数表（摘要）\r\n\r\n- `GET /api/v1/document/tree`\r\n  - 必填：无\r\n  - 可选：`rootDir`、`path`、`depth`、`page`、`size`\r\n- `GET /api/v1/document/toon`\r\n  - 必填：`filePath`\r\n  - 可选：`format=both|toon|json`、`page`、`size`\r\n- `GET /api/v1/document/preview`\r\n  - 必填：`filePath`\r\n  - 可选：`startPage`、`endPage`（PDF）\r\n- `POST /api/v1/document/scan`\r\n  - 必填：无\r\n  - 可选：`dirPath`、`force`\r\n\r\n### 7.5 OpenAPI草案（节选）\r\n\r\n```yaml\r\nopenapi: 3.0.0\r\ninfo:\r\n  title: 文档TOON结构生成与Web预览系统 API\r\n  version: 1.0.0\r\npaths:\r\n  /api/v1/document/tree:\r\n    get:\r\n      summary: 获取目录树结构\r\n      parameters:\r\n        - in: query\r\n          name: rootDir\r\n          schema: { type: string }\r\n        - in: query\r\n          name: path\r\n          schema: { type: string }\r\n        - in: query\r\n          name: depth\r\n          schema: { type: integer, minimum: 0, default: 2 }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer, minimum: 1, default: 1 }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer, minimum: 1, default: 200 }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/DirectoryTree' } } } }\r\n        '400': { $ref: '#/components/responses/Error400' }\r\n  /api/v1/document/toon:\r\n    get:\r\n      summary: 获取文档TOON结构\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: format\r\n          schema: { type: string, enum: [both, toon, json], default: both }\r\n        - in: query\r\n          name: page\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: size\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/TOONStructure' } }, application/x-toon: { schema: { type: string } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n        '422': { $ref: '#/components/responses/Error422' }\r\n  /api/v1/document/preview:\r\n    get:\r\n      summary: 获取文档预览内容\r\n      parameters:\r\n        - in: query\r\n          name: filePath\r\n          required: true\r\n          schema: { type: string }\r\n        - in: query\r\n          name: startPage\r\n          schema: { type: integer }\r\n        - in: query\r\n          name: endPage\r\n          schema: { type: integer }\r\n      responses:\r\n        '200': { description: OK, content: { application/json: { schema: { $ref: '#/components/schemas/PreviewContent' } }, application/pdf: { schema: { type: string, format: binary } } } }\r\n        '404': { $ref: '#/components/responses/Error404' }\r\n  /api/v1/document/scan:\r\n    post:\r\n      summary: 触发手动扫描\r\n      requestBody:\r\n        content:\r\n          application/json:\r\n            schema:\r\n              type: object\r\n              properties:\r\n                dirPath: { type: string }\r\n                force: { type: boolean, default: false }\r\n      responses:\r\n        '200': { description: OK }\r\ncomponents:\r\n  schemas:\r\n    DirectoryTree:\r\n      type: object\r\n      properties:\r\n        dirPath: { type: string }\r\n        dirName: { type: string }\r\n        subDirs:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DirectoryTree' }\r\n        documents:\r\n          type: array\r\n          items: { $ref: '#/components/schemas/DocumentSummary' }\r\n    DocumentSummary:\r\n      type: object\r\n      properties:\r\n        filePath: { type: string }\r\n        fileName: { type: string }\r\n        fileType: { type: string, enum: [MD, DOCX, PDF, CSV, SVG] }\r\n        fileSize: { type: integer }\r\n    TOONStructure:\r\n      type: object\r\n      properties:\r\n        rootNode: { type: string }\r\n        elementCount: { type: integer }\r\n        fields: { type: array, items: { type: string } }\r\n        data: { type: array, items: { type: object } }\r\n        toonString: { type: string }\r\n    PreviewContent:\r\n      type: object\r\n      properties:\r\n        contentType: { type: string }\r\n        content: { type: string }\r\n        supportFullPreview: { type: boolean }\r\n    ErrorResponse:\r\n      type: object\r\n      properties:\r\n        code: { type: string }\r\n        message: { type: string }\r\n        traceId: { type: string }\r\n        details: { type: object }\r\n  responses:\r\n    Error400:\r\n      description: Bad Request\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error404:\r\n      description: Not Found\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n    Error422:\r\n      description: Unprocessable Entity\r\n      content:\r\n        application/json:\r\n          schema: { $ref: '#/components/schemas/ErrorResponse' }\r\n```\r\n\r\n### 7.6 API协商与返回模式\r\n\r\n- `GET /api/v1/document/toon?filePath=...&format=both|toon|json&page=1&size=100`\r\n  - `format`：返回模式；默认 `both`（结构体与 `toonString` 同时返回）。\r\n  - 分页：对大集合型TOON可使用 `page/size`；响应中同时返回 `metadata` 块说明总数、页码与最后更新时间。\r\n- 内容协商：支持 `Accept: application/x-toon` 强制仅返回 `toonString`（MIME：`application/x-toon`）；`application/json` 返回对象结构；无 `Accept` 或 `*/*` 返回默认 `both`。\r\n- 预览分页：`GET /api/v1/document/preview?filePath=...&startPage=1&endPage=10`（PDF），支持HTTP Range；单次最大返回页数 `<= 20`。\r\n- 响应示例：\r\n  - JSON：`{ rootNode: \"users\", elementCount: 2, fields: [\"id\",\"name\",\"role\"], data: [{id:1,name:\"张三\",role:\"admin\"},{id:2,name:\"李四\",role:\"user\"}], toonString: \"users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100\" }`\r\n  - TOON：`users[2]{id,name,role}: 1,张三,admin; 2,李四,user\\nmetadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- 兼容降级策略：若代理/浏览器不识别 `application/x-toon`，可回退使用 `text/plain; charset=UTF-8` 返回 `toonString`。\r\n- 配置项（Config Server）：`preview.pdf.max-pages-per-request=20`、`gateway.response.supported-accepts=application/json,application/x-toon,*/*`。\r\n\r\n## 8. 数据结构定义（概念约定）\r\n\r\n- 枚举 `FileType`：MD/DOCX/PDF/CSV/SVG。\r\n- 实体 `Document`：见 3.2。\r\n- 值对象 `TOONStructure`：见 3.2。\r\n- 前端 TypeScript 约定：\r\n  - `DirectoryTree { dirPath: string; dirName: string; subDirs: DirectoryTree[]; documents: DocumentSummary[] }`\r\n  - `DocumentSummary { filePath: string; fileName: string; fileType: FileType; fileSize: number }`\r\n  - `TOONStructure { rootNode: string; elementCount: number; fields: string[]; data: Array<Record<string, any>>; toonString: string }`\r\n  - `PreviewContent { contentType: string; content: string | ArrayBuffer; supportFullPreview: boolean }`\r\n  - `FilesIndexItem { path: string; type: 'directory' | 'file'; name: string }`\r\n  - `FilesIndex = FilesIndexItem[]`\r\n\r\n## 9. TOON生成规则（按格式）\r\n\r\n- CSV：第一行为 `fields`，其余行为 `data`；`rootNode` 为文件名；`elementCount` 为数据行数。\r\n- MD：优先提取表格数据（列名→`fields`，行→`data`）；次选列表结构。\r\n- DOCX：提取表格优先，其次段落标题；规则对齐MD。\r\n- PDF：尽力提取表格/结构化；若不可行，则 `fields=[\"content\"]`，`data` 为文本片段。\r\n- SVG：`fields=[\"width\",\"height\",\"elementsCount\"]`，`data` 为SVG元数据。\r\n\r\n## 10. 治理与合规\r\n\r\n### 10.1 路径与编码规范（Linux/中文）\r\n\r\n- 运行环境：Linux；路径分隔符 `/`；大小写敏感；禁止Windows样式路径。\r\n- 编码与规范化：文件/目录名统一UTF-8；建议NFC规范化；拒绝包含控制字符与非法路径片段（如 `..` 越权）。\r\n- 符号链接策略：禁止跨根目录的符号链接访问；允许根目录内的符号链接但需解析到真实路径并做白名单校验；检测越权即拒绝。\r\n- 默认黑名单：`.git/`、`.svn/`、`node_modules/`、`target/`、`.DS_Store`、临时/隐藏文件（以 `.` 开头）。\r\n- 白名单：所有访问严格限制在配置的根目录集合内；任何跨目录或符号链接越权访问拒绝。\r\n\r\n### 10.2 安全与访问限制\r\n\r\n- 根目录访问严格限制在配置集合内，拒绝跨目录访问与路径遍历（规范化路径校验）。\r\n- 网关层启用CORS白名单策略，仅允许指定来源域名。\r\n- 前端禁用右键保存与下载入口（仅UI限制，无法完全阻止恶意抓取）。\r\n\r\n### 10.3 错误与响应格式\r\n\r\n- 统一错误JSON：`{ code: string, message: string, traceId: string, details?: object, locale?: string }`\r\n- HTTP状态码：\r\n  - 400 参数错误（非法filePath、越权路径）。\r\n  - 404 文件不存在或不支持格式。\r\n  - 409 并发冲突（扫描进行中）。\r\n  - 422 解析失败（TOON/预览生成失败）。\r\n  - 429 请求过多（限流）。\r\n  - 500 服务器内部错误。\r\n- 网关错误映射：统一成上述错误结构并记录 `traceId`。\r\n- 错误码字典：`INVALID_PATH`、`UNSUPPORTED_TYPE`、`FILE_NOT_FOUND`、`PARSE_FAILED`、`CONFLICT`、`RATE_LIMITED`、`INTERNAL_ERROR`。\r\n- CORS与预检：配置 `Access-Control-Allow-Origin`（白名单）、`Access-Control-Allow-Methods`、`Access-Control-Allow-Headers`、`Access-Control-Max-Age=600`。\r\n\r\n#### 10.3.1 错误码与HTTP映射（示例）\r\n\r\n- `INVALID_PATH` → 400；消息：路径非法或越权访问\r\n- `FILE_NOT_FOUND` → 404；消息：文件不存在\r\n- `UNSUPPORTED_TYPE` → 404；消息：格式不支持\r\n- `CONFLICT` → 409；消息：资源冲突或扫描进行中\r\n- `PARSE_FAILED` → 422；消息：解析失败，返回降级内容或提示\r\n- `RATE_LIMITED` → 429；消息：请求过多，请稍后重试\r\n- `INTERNAL_ERROR` → 500；消息：服务器内部错误\r\n\r\n## 9. 非功能与性能\r\n\r\n- 异步扫描与大目录优化（并发遍历、I/O分离、批量缓存更新）。\r\n- 跳过隐藏文件与目录，避免无意义解析。\r\n- 大文件（>100MB）预览仅加载前10页（PDF），显示分页控件与提示。\r\n- TOON结构与预览内容缓存默认1小时，可配置；命中则直接返回。\r\n- 兼容性：现代浏览器（Chrome/Firefox/Edge ≥ 88）。\r\n\r\n## 10. 部署与运维\r\n\r\n- 容器化：Docker 镜像构建；Nginx 反向代理与负载均衡；Jenkins + GitLab CI/CD。\r\n- 微服务：Eureka 服务发现；Config Server 管理根目录与扫描周期；\r\n- 监控：Prometheus 采集接口与调度指标；Grafana 仪表盘；\r\n- 日志：ELK 聚合 `document-service` 扫描/预览日志与异常。\r\n\r\n## 11. 用户故事与验收标准\r\n\r\n- 用户故事1：查看文档树结构\r\n  - Given 配置的根目录存在，When 应用启动，Then 自动扫描并生成TOON数据，左侧显示树状结构。\r\n  - Given 树已显示，When 点击目录节点，Then 展开子目录与文档清单。\r\n  - Given 树已显示，When 点击文档节点，Then 右侧预览文档内容。\r\n- 用户故事2：预览文档内容\r\n  - Given 用户点击文档节点，When 文档类型为 md/docx/pdf/csv/svg，Then 在右侧渲染对应预览。\r\n  - Given 预览界面显示，When 文档格式不支持，Then 显示“预览不支持”提示。\r\n  - Given 预览功能，Then 不提供下载或上传选项。\r\n\r\n### 用户故事地图（Story Map）\r\n\r\n- Backbone（活动）：浏览索引 → 查找与筛选 → 查看预览 → 管理重扫 → 运行保障\r\n- 用户角色：访客（浏览/预览）、管理员（重扫/状态/清缓存）\r\n- 活动拆分与步骤：\r\n  - 浏览索引：加载`index.toon/json` → 渲染树 → 展开/折叠 → 类型图标\r\n  - 查找与筛选：关键字筛选（按`name/path`，可选）→ 类型过滤（file/directory）→ 清空筛选\r\n  - 查看预览：点击文件 → 加载对应预览器（md/docx/pdf/csv/svg）→ 错误降级提示\r\n  - 管理重扫：进入管理页 → 选择目录 → 触发`admin/rescan` → 观察更新时间\r\n  - 运行保障：限流/缓存生效 → 监控指标回报 → 故障时降级与重试\r\n- 版本切片：\r\n  - MVP：加载索引、树浏览、`.md`预览、错误页提示\r\n  - V1：`.pdf/.docx/.csv/.svg`预览、`index.json`派生、限流与缓存\r\n  - V2：异步预览worker、管理后台页面、监控与告警、筛选搜索\r\n- 验收视角：每步具备可见输出（树渲染/预览/状态）、错误有统一文案、操作有可回退路径。\r\n\r\n## 12. 扩展性与演进\r\n\r\n- 新增格式时：实现 `TOONGenerationService` 与 `PreviewService` 的新适配方法，注册到策略表。\r\n- 多根目录：`config-server` 支持数组配置与动态刷新；扫描服务按目录并发执行。\r\n- 异步预览：将重解析任务下沉至 `preview-worker`，通过Kafka异步处理与Redis结果回填。\r\n\r\n## 13. 参考来源与整合说明\r\n\r\n- 参考文档：\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（豆包）.md:193-198（技术选型）、269-317/281-307（API端点）、205-213（扫描策略）、141-149（TOON规则）、385-392（安全/CORS）、377-384（性能/缓存）、239-252（交互）、40-65/67-125（模型）、175-185（分层）、400-405（扩展性）、77-90（TOON对象）。\r\n  - e:\\Doc-Tree Viewer\\docs\\Web服务器文件预览系统的产品设计文档（DeepSeek）.md:53-58（前后端建议与预览库）、45-48（预览不支持提示）、58（Docker容器化）、36-49（用户故事与验收）、124-125（异步与性能）。\r\n- 参考文章：知乎《TOON vs JSON：现代数据格式的巅峰对决》 https://zhuanlan.zhihu.com/p/1973687597361566533（TOON语法、块结构与令牌效率要点）。\r\n- 整合原则：以“豆包”工程化规则为主干，吸收“DeepSeek”的快速实现与容器建议，并统一到 React + AntD + Vite 前端与 Spring Cloud + Java 后端的栈约束下。\r\n\r\n## 12. 运行保障\r\n\r\n### 12.1 缓存与失效策略\r\n\r\n- Redis键设计：\r\n  - TOON：`toon:{sha256(filePath)}:{version}`；预览：`preview:{sha256(filePath)}:{pageRange}`。\r\n  - 版本计算：默认 `sha256(filePath + mtime + size)`；可选 `sha256(content)`（大文件时按区块）。\r\n- TTL：默认1小时；大文件预览可单独设置TTL。\r\n- 失效触发：\r\n  - 扫描发现变更（新增/修改/删除）即失效对应键。\r\n  - 手动触发重扫或管理接口清缓存。\r\n- HTTP缓存：使用 `ETag` 与 `Last-Modified`；命中直接返回304。\r\n- 容量与逐出：配置最大容量；策略LRU或LFU；指标监控命中率与逐出率。\r\n\r\n### 12.2 监控指标与限流建议\r\n\r\n- 监控指标：\r\n  - `scan_duration_ms`、`parse_success_rate`、`cache_hit_ratio`、`api_latency_p95`、`api_latency_p99`、`queue_backlog`。\r\n- 限流：\r\n  - 基于IP或令牌的令牌桶；默认每IP每分钟 120 次，突发 30；超限返回429并提供 `Retry-After` 与统一错误页文案。\r\n\r\n### 12.3 稳定性与运行策略\r\n\r\n- 扫描策略：\r\n  - 定时扫描（默认每小时）与Linux inotify文件事件监听结合；事件驱动优先，周期性补偿。\r\n  - 多根目录并发扫描需保证仓库更新的原子性与去重。\r\n- 并发与锁：Repository更新采用分段锁（按目录粒度）与批处理事务，避免写入冲突；去重基于 `filePath+hash`。\r\n- 重试与退避：解析失败指数退避（初始500ms，最大4s，最多3次）；区分可重试/不可重试错误并记录失败样本。\r\n- 资源限制：为PDFBox/POI设置并发线程上限（≤CPU核数）、单文件解析超时（≤10s）与内存上限，防止OOM。\r\n- 配置刷新：`config-server` 变更后触发增量重扫（变更目录）或在 5 分钟窗口内全量重扫。\r\n\r\n## 附录 A. 示例用例（各格式TOON）\r\n\r\n- CSV：\r\n  - `users[2]{id,name,role}: 1,张三,admin; 2,李四,user`\r\n  - `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n- MD（表格）：\r\n  - `features[3]{name,status}: 目录树,done; 预览,doing; 缓存,pending`\r\n- DOCX（表格优先）：\r\n  - `requirements[2]{item,priority}: TOON语法规范,high; 错误格式统一,high`\r\n- DOCX 适配决策矩阵：\r\n  - 条件：文档体积 < 5MB，样式简单（纯文本/基本表格） → 选择：前端 `mammoth` → 理由：轻量、减少后端负载 → 降级：复杂样式检测失败则回退后端POI\r\n  - 条件：包含复杂表格/图片/页眉页脚/公式 → 选择：后端 POI 转 HTML → 理由：解析更稳定、可控 → 降级：无法完整转换时输出文本TOON块\r\n  - 条件：超大文件 ≥ 20MB → 选择：后端 POI 分段解析 → 理由：内存与性能控制 → 降级：仅抽取段落摘要或表格前N行\r\n  - 条件：中文大段与混合编码 → 选择：后端统一UTF-8并规范化 → 理由：保证TOON一致性 → 降级：不可识别字符替换为占位符\r\n- PDF（文本降级）：\r\n  - `content[1]{content}: 项目概述\\n支持五类文档\\n缓存1小时`\r\n- SVG（元数据）：\r\n  - `svg_meta[1]{width,height,elementsCount}: 800,600,42`\r\n- 复杂示例（多块顺序与关联）：\r\n  - `directories[1]{path}: /docs`\r\n  - `documents[2]{id,name,path,type}: 1,概述.md,/docs/概述.md,md; 2,设计.pdf,/docs/设计.pdf,pdf`\r\n- `metadata{total,last_updated,page,size}: 2,2025-11-24T11:27:16+08:00,1,100`\r\n\r\n## 附录 B. 前后端实现与测试建议\r\n\r\n- 前端状态管理：采用 React Query；设定 `staleTime=30s`、`retry=2`、指数退避；缓存接口数据与错误重试。\r\n- PDF.js配置：本地worker脚本路径 `/static/pdf.worker.min.js`；确保CORS允许；大文件按页加载与占位提示。\r\n- 树加载：分页/懒加载/虚拟滚动结合；每层最多加载 200 节点，超出分页请求后端。\r\n- 测试计划：\r\n  - 后端：各格式解析与TOON生成单元/集成测试；错误与降级用例；EBNF语法校验测试。\r\n  - 前端：预览渲染与交互回归测试；大数据性能用例；状态管理与错误提示一致性测试。\r\n- 持久化：`DocumentRepository` 默认落地 PostgreSQL；支持内存模式用于小规模或故障降级。\r\n- 前端错误体验与降级：损坏文件或不支持预览时显示统一错误页与操作建议；提供“查看原始TOON”回退。\r\n- ETag/Last-Modified 协同：前端请求携带 `If-None-Match/If-Modified-Since`；React Query 根据304直接复用缓存并跳过重试。\r\n\r\n## 附录 C. 树接口分页契约示例\r\n\r\n- 请求：`GET /api/v1/document/tree?path=/opt/docs&depth=1&page=1&size=200`\r\n- 返回：`DirectoryTree` 仅包含当前层 `subDirs/documents` 的分页片段，并附 `metadata{total,page,size}` TOON块或JSON元数据。\r\n- 交互：\r\n  - 展开节点时按需请求下一层；若节点子项超过 `size`，显示“加载更多”并继续分页。\r\n  - 前端虚拟滚动仅渲染可视区域；移除离屏节点；缓存已加载段落。\r\n  - 排序：默认按 `dirName/fileName` 字典序；可选 `fileType/lastModifiedTime`。\r\n\r\n## 附录 D. TOON 示例集与单测清单\r\n\r\n- 示例集：为 CSV/MD/DOCX/PDF/SVG 各提供至少3个复杂场景示例（中文/空值/转义/大集合分页）。\r\n- 单测：\r\n  - 语法校验：转义合法性、分隔符、块计数一致性、编码为UTF-8。\r\n  - 解析一致性：`fields/data/toonString` 对齐；降级块生成规则；分页合并一致性。\r\n  - 边界用例：损坏文件、非UTF-8、超长字段、嵌套列表/表格。\r\n\r\n## 23. 持久化模型（data目录TOON方案）\r\n\r\n- 索引文件：`data/index.toon`，内容为 `files[count]{path,type,name}` 块与 `metadata{total,last_updated,root}` 块。\r\n- JSON派生：`data/index.json`（可选），内容为 `FilesIndex` 数组，便于前端树加载与缓存。\r\n- 更新时间：`data/last_updated.txt`（可选），记录北京时间ISO-8601字符串，便于运维观察。\r\n- 生成策略：手动/定时扫描生成，命中缓存则复用；变更检测到后重写文件并更新ETag。\r\n- 读取策略：API优先读取 `index.toon`；前端可选择直接请求TOON或JSON派生。\r\n\r\n## 24. 管理与运维接口\r\n\r\n- `POST /api/v1/admin/rescan`（全量或指定目录重扫，更新 `data/index.*`）。\r\n- `POST /api/v1/admin/cache/clear?filePath=...`（清除单文件预览缓存，与索引无关）。\r\n- `GET /api/v1/admin/status`（查看任务队列、缓存命中率与 `index.toon` 更新时间）。\r\n- 访问控制：默认仅本地或白名单IP允许；可后续接入令牌校验。\r\n\r\n## 25. 本地化与时间格式\r\n\r\n- 错误消息默认中文，支持英文回退：`locale` 字段返回当前语言。\r\n- 时间统一使用北京时间ISO-8601，带时区偏移 `+08:00`；用于 `metadata` 与日志。\r\n\r\n## 26. 参数默认值与配置表（节选）\r\n\r\n- `app.scan.root-dirs`：数组，默认空，示例 `[/opt/docs,/opt/images]`\r\n- `app.scan.cron`：扫描周期（CRON），默认每小时\r\n- `app.data.dir`：索引持久化目录，默认 `./data`\r\n- `preview.pdf.max-pages-per-request`：单次最大页数，默认20\r\n- `gateway.response.supported-accepts`：`application/json,application/x-toon,*/*`\r\n- `gateway.rate-limit.ip.per-minute`：默认120\r\n- `gateway.rate-limit.ip.burst`：默认30\r\n- `cache.toon.ttl`：默认3600秒\r\n- `cache.preview.ttl`：默认600秒（大文件）\r\n\r\n## 27. 术语对照与一致性清单\r\n\r\n- 术语对照：\r\n  - 目录（Directory/Folder）→ `dirPath/dirName`\r\n  - 文档（Document/File）→ `filePath/fileName/fileType`\r\n  - TOON结构（TOONStructure）→ `rootNode/elementCount/fields/data/toonString`\r\n  - 预览（Preview）→ `PreviewContent`\r\n- 一致性检查：\r\n  - 字段命名在前后端、持久化与TOON中一致\r\n  - 时间格式统一为北京时间ISO-8601（`+08:00`）\r\n  - 路径为Linux风格，UTF-8编码，NFC规范化\r\n  - 错误码与HTTP映射一致，统一错误响应结构\r\n  - 缓存键命名、TTL与失效触发一致\r\n\r\n## 28. 需求覆盖评估\r\n\r\n- 覆盖项：\r\n  - 指定目录全量枚举与中文路径：由扫描模块与`files`索引TOON规范覆盖（含Linux路径与符号链接治理）。\r\n  - 索引持久化与加载：`data/index.toon`（必选）与`index.json`（可选）及对应API覆盖。\r\n  - 树展示与预览适配：React前端与五类预览器（md/docx/pdf/csv/svg）覆盖；错误统一降级与提示。\r\n  - 治理与运行保障：路径与编码、安全、错误、缓存、限流、监控、稳定性策略覆盖。\r\n  - 运维与管理：`admin/rescan/status/cache`接口覆盖索引更新与状态可观测。\r\n- 差距与建议：\r\n  - `.xlsx` 仅列于索引样例，当前“预览不支持”（不在五类之内）。建议：V2引入轻量预览（只读表格前N行）或标注“仅下载不预览”。\r\n  - 索引搜索/筛选：Story Map中为可选，当前规范未定义API参数。建议：前端本地筛选为先，必要时提供`GET /index/search?q=`。\r\n  - 索引规模极大（>10万项）分页：目前通过JSON派生与前端虚拟滚动缓解，建议后续提供分片索引（`index.part-N.toon`）。\r\n  - 缺失文件或`index.toon`不存在的降级：建议在API与前端加入“空索引占位”与重扫引导。\r\n  - 无登录与权限控制：按需求刻意不覆盖；如后续公开部署需考虑只读令牌与审计。\r\n- 结论：就“展示指定目录并持久化为TOON索引、提供预览”核心需求而言，规范已覆盖端到端路径与非功能治理；已知差距集中在`.xlsx`预览与搜索/大规模索引的增强项，可按版本切片推进。\r\n\r\n## 附录 E. DDD 完整链路图（Mermaid）\r\n\r\n```mermaid\r\n%% -------------- DDD 完整链路 -------------- \r\ngraph TB\r\n    %% ========== 0. 前期对齐 ==========\r\n    A0[0.组建跨职能战队<br/>对齐业务愿景] --> A1\r\n\r\n    %% ========== 1. 用户旅程 ==========\r\n    A1([1.用户旅程工作坊<br/>User Journey Mapping])\r\n    A1 -->|输出| A1_OUT1[用户旅程图<br/>痛点 & 机会]\r\n    A1_OUT1 -->|输出| A1_OUT2[角色 Persona]\r\n\r\n    %% ========== 2. 用户故事地图 ==========\r\n    A1 --> A2([2.用户故事地图<br/>Story Mapping])\r\n    A2 -->|输出| A2_OUT1[故事地图墙<br/>Epic → Story → Task]\r\n    A2 -->|输出| A2_OUT2[故事卡<br/>As-Who-Want-What]\r\n    A2 -->|输出| A2_OUT3[验收标准 AC<br/>Given-When-Then]\r\n\r\n    %% ========== 3. 事件风暴 ==========\r\n    A2_OUT2 --> B0([3.事件风暴<br/>Event Storming])\r\n    B0 -->|每张故事卡| B0_LINK[故事卡 ←→ 领域事件]\r\n    B0 -->|贴纸墙| B0_STEP1[橙色：领域事件]\r\n    B0_STEP1 --> B0_STEP2[蓝色：命令]\r\n    B0_STEP2 --> B0_STEP3[黄色：聚合候选]\r\n    B0_STEP3 --> B0_STEP4[红色：热点/矛盾]\r\n    B0 -->|输出| B0_OUT1[事件流大图]\r\n    B0 -->|输出| B0_OUT2[命令-事件-聚合表]\r\n\r\n    %% ========== 4. 战略设计 ==========\r\n    B0_OUT2 --> C1([4.划分限界上下文])\r\n    C1 -->|输出| C1_OUT[BC图 + 上下文映射]\r\n    C1_OUT --> C2([5.建立通用语言])\r\n    C2 -->|输出| C2_DICT[术语词典 + 代码词汇表]\r\n\r\n    %% ========== 5. 战术设计 ==========\r\n    C2_DICT --> D1([6.战术建模])\r\n    D1 --> D1_ENT[实体 Entity]\r\n    D1 --> D1_AR[聚合根 Aggregate Root]\r\n    D1 --> D1_VO[值对象 Value Object]\r\n    D1 --> D1_DS[领域服务 Domain Service]\r\n    D1 --> D1_REPO[仓储 Repository]\r\n    D1 --> D1_SPEC[规约 Specification]\r\n    D1 -->|输出| D1_MODEL[战术模型图 + 类图]\r\n\r\n    %% ========== 6. 敏捷迭代：故事 → 任务 → 代码 ==========\r\n    D1_MODEL --> E1[7.迭代 backlog]\r\n    E1 --> E2[8.故事卡拆任务]\r\n    E2 --> E3[9.TDD / 单元测试]\r\n    E3 --> E4[10.持续集成]\r\n    E4 --> E5[11.演示 & 验收]\r\n\r\n    %% ========== 7. 需求变更闭环 ==========\r\n    F1([12.新需求 / 变更]) --> F2[ diff 事件流 ]\r\n    F2 --> F3[快速定位受影响的聚合]\r\n    F3 --> F4[更新故事卡 & AC]\r\n    F4 --> E1\r\n    F4 --> B0\r\n\r\n    %% -------------- 样式定义 --------------\r\n    classDef workshop fill:#FFEAA7,stroke:#333,stroke-width:2px\r\n    classDef output fill:#D1F2EB,stroke:#333\r\n    classDef story fill:#FDEDEC,stroke:#333\r\n    classDef change fill:#FADBD8,stroke:#333\r\n    classDef role fill:#EAF2F8,stroke:#333\r\n\r\n    class A1,A2,B0,C1,C2,D1 workshop\r\n    class A1_OUT1,A1_OUT2,A2_OUT1,A2_OUT2,A2_OUT3,B0_OUT1,B0_OUT2,C1_OUT,C2_DICT,D1_MODEL output\r\n    class E1,E2,E3,E4,E5 story\r\n    class F1,F2,F3,F4 change\r\n    class P1,P2,P3,P4,P5,P6 role",
  "lastModified" : 1764639821602
}, {
  "filePath" : "技术案例/全文检索技术设计.md",
  "fileName" : "全文检索技术设计.md",
  "parentDir" : "技术案例",
  "fileType" : "MD",
  "title" : "全文检索技术设计.md",
  "contentText" : "在nexus-lite项目中，确保Elasticsearch对 /root/lite-webviewer/src/main/resources/application.yml 文件中第33行的 root-dirs: /root/lite-webviewer/docs 配置项建立搜索索引的完整流程如下：\n\n### 配置与实现关联\n1. 配置设置 ：\n   \n   - 在 `application.yml` 中，您可以看到三个关键配置：\n     - app.scan.root-dirs: /root/lite-webviewer/docs - 指定要扫描的文档根目录\n     - app.search.use-es: true - 启用Elasticsearch功能\n     - app.search.es-index-name: nexus-lite-docs - 设置Elasticsearch索引名称\n2. 文件扫描流程 ：\n   \n   - `FileScanServiceImpl.java` 通过 @Value(\"${app.scan.root-dirs}\") 直接读取您配置的根目录\n   - 它使用 ForkJoinPool 并行扫描这些目录下的所有文件\n   - 对每个文件，调用 searchMetaBuilder.build() 构建搜索元数据\n   - 最后通过 searchMetaRepository.saveAll(metas) 将元数据保存到本地JSON文件\n3. Elasticsearch索引同步 ：\n   \n   - `EsIndexService.java` 负责将本地元数据同步到Elasticsearch\n   - 它使用 @ConditionalOnProperty(value = \"app.search.use-es\", havingValue = \"true\") 注解，确保只有在启用ES时才会生效\n   - reindexFromMeta() 方法从本地存储加载所有SearchMeta对象\n   - 将每个SearchMeta转换为 `EsDocument.java` 对象\n   - 最后通过 repo.saveAll(docs) 将文档保存到Elasticsearch\n4. Elasticsearch映射 ：\n   \n   - EsDocument类使用 @Document(indexName = \"${app.search.es-index-name}\") 注解，确保数据被保存到配置的索引中\n   - 每个字段都有相应的Elasticsearch类型注解，如 @Field(type = FieldType.Text) 用于全文搜索\n### 确保ES索引正确建立的关键\n1. 确认配置启用 ： app.search.use-es: true 必须设置为true，否则Elasticsearch功能不会激活\n2. 文档根目录正确 ： app.scan.root-dirs 必须指向包含您文档的正确路径\n3. Elasticsearch连接 ： spring.elasticsearch.uris: http://localhost:9200 必须正确指向运行中的Elasticsearch服务\n### 工作原理总结\n整个系统的工作流程是：\n\n1. 应用启动时读取配置的根目录\n2. 文件扫描服务扫描指定目录下的所有文档\n3. 提取文档内容和元数据，保存到本地JSON文件\n4. Elasticsearch索引服务定期或按需将本地元数据同步到Elasticsearch索引\n5. 搜索服务可以直接查询Elasticsearch获取搜索结果\n这种设计实现了文档扫描与索引创建的解耦，同时确保了配置的根目录中的所有文档都会被正确索引到Elasticsearch中。",
  "size" : 2562,
  "modifiedAt" : 1764639821582,
  "id" : "技术案例/全文检索技术设计.md",
  "content" : "在nexus-lite项目中，确保Elasticsearch对 /root/lite-webviewer/src/main/resources/application.yml 文件中第33行的 root-dirs: /root/lite-webviewer/docs 配置项建立搜索索引的完整流程如下：\n\n### 配置与实现关联\n1. 配置设置 ：\n   \n   - 在 `application.yml` 中，您可以看到三个关键配置：\n     - app.scan.root-dirs: /root/lite-webviewer/docs - 指定要扫描的文档根目录\n     - app.search.use-es: true - 启用Elasticsearch功能\n     - app.search.es-index-name: nexus-lite-docs - 设置Elasticsearch索引名称\n2. 文件扫描流程 ：\n   \n   - `FileScanServiceImpl.java` 通过 @Value(\"${app.scan.root-dirs}\") 直接读取您配置的根目录\n   - 它使用 ForkJoinPool 并行扫描这些目录下的所有文件\n   - 对每个文件，调用 searchMetaBuilder.build() 构建搜索元数据\n   - 最后通过 searchMetaRepository.saveAll(metas) 将元数据保存到本地JSON文件\n3. Elasticsearch索引同步 ：\n   \n   - `EsIndexService.java` 负责将本地元数据同步到Elasticsearch\n   - 它使用 @ConditionalOnProperty(value = \"app.search.use-es\", havingValue = \"true\") 注解，确保只有在启用ES时才会生效\n   - reindexFromMeta() 方法从本地存储加载所有SearchMeta对象\n   - 将每个SearchMeta转换为 `EsDocument.java` 对象\n   - 最后通过 repo.saveAll(docs) 将文档保存到Elasticsearch\n4. Elasticsearch映射 ：\n   \n   - EsDocument类使用 @Document(indexName = \"${app.search.es-index-name}\") 注解，确保数据被保存到配置的索引中\n   - 每个字段都有相应的Elasticsearch类型注解，如 @Field(type = FieldType.Text) 用于全文搜索\n### 确保ES索引正确建立的关键\n1. 确认配置启用 ： app.search.use-es: true 必须设置为true，否则Elasticsearch功能不会激活\n2. 文档根目录正确 ： app.scan.root-dirs 必须指向包含您文档的正确路径\n3. Elasticsearch连接 ： spring.elasticsearch.uris: http://localhost:9200 必须正确指向运行中的Elasticsearch服务\n### 工作原理总结\n整个系统的工作流程是：\n\n1. 应用启动时读取配置的根目录\n2. 文件扫描服务扫描指定目录下的所有文档\n3. 提取文档内容和元数据，保存到本地JSON文件\n4. Elasticsearch索引服务定期或按需将本地元数据同步到Elasticsearch索引\n5. 搜索服务可以直接查询Elasticsearch获取搜索结果\n这种设计实现了文档扫描与索引创建的解耦，同时确保了配置的根目录中的所有文档都会被正确索引到Elasticsearch中。",
  "lastModified" : 1764639821582
}, {
  "filePath" : "技术案例/full-text-search-implementation.md",
  "fileName" : "full-text-search-implementation.md",
  "parentDir" : "技术案例",
  "fileType" : "MD",
  "title" : "full-text-search-implementation.md",
  "contentText" : "# Nexus-Lite 全文检索实现文档\n\n## 1. 系统概述\n\nNexus-Lite的全文检索功能提供了高效的文档内容搜索能力，支持多种文件格式的内容提取、索引和检索。该功能基于Elasticsearch实现，支持全文搜索、多条件筛选、结果高亮等高级特性。\n\n## 2. 核心工作流程\n\n全文检索功能的完整工作流程包含以下主要步骤：\n\n1. **文档扫描与内容提取**：系统扫描配置的根目录，提取支持的文件格式的内容\n2. **元数据生成与存储**：将提取的内容和文件元数据生成SearchMeta对象并本地存储\n3. **Elasticsearch索引同步**：将SearchMeta数据转换并同步到Elasticsearch索引\n4. **用户查询处理**：接收并处理用户的搜索请求\n5. **结果高亮与返回**：处理搜索结果，高亮关键字并返回给用户\n\n## 3. 核心组件详解\n\n### 3.1 文档扫描与内容提取\n\n#### FileScanServiceImpl\n\n负责扫描文件系统，检测文件变化，并触发内容提取：\n\n- 扫描配置的根目录（通过`app.scan.root-dirs`配置）\n- 使用多线程高效处理大量文件\n- 调用SearchMetaBuilder提取文件内容\n- 将提取的SearchMeta保存到本地文件系统\n- 发布扫描完成事件（ScanFinishedEvent）\n\n关键代码流程：\n```java\n// 扫描目录并收集文件信息\nfor (String dirPath : dirPaths) {\n    Path rootPath = Paths.get(dirPath);\n    // 递归遍历文件树\n    Files.walkFileTree(rootPath, new SimpleFileVisitor<Path>() {\n        @Override\n        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\n            // 检查文件是否需要处理\n            if (shouldProcessFile(file)) {\n                // 提取文件元数据\n                metas.add(searchMetaBuilder.build(rootPath, file, lastModified));\n            }\n            return FileVisitResult.CONTINUE;\n        }\n    });\n}\n// 保存搜索元数据\nsearchMetaRepository.saveAll(metas);\n```\n\n#### SearchMetaBuilder\n\n负责从不同格式的文件中提取内容：\n\n- 支持多种文件格式的内容提取：PDF、DOCX、XLSX、MD、HTML、CSV等\n- 针对不同文件类型使用专门的解析器\n- 提取文件名、路径、内容、修改时间等元数据\n- 处理大文件时进行智能截断，避免内存溢出\n\n关键实现：\n```java\npublic SearchMeta build(Path rootPath, Path filePath, long modifiedAt) {\n    // 提取基本信息\n    String rel = rootPath.relativize(filePath).toString().replace(\"\\\\\", \"/\");\n    String fileName = filePath.getFileName().toString();\n    FileType type = FileType.fromExtension(ext);\n    \n    // 根据文件类型提取内容\n    if (type == FileType.PDF) {\n        // 使用PDFBox提取PDF内容\n        // 只提取头部和尾部几页，兼顾内容覆盖和性能\n    } else if (type == FileType.DOCX) {\n        // 使用Apache POI提取Word文档内容\n    } else if (type == FileType.MD) {\n        // 直接读取文本内容\n    }\n    \n    // 限制内容长度，避免过大的JSON\n    if (contentText != null && contentText.length() > 20000) {\n        contentText = contentText.substring(0, 20000);\n    }\n    \n    // 创建并返回SearchMeta对象\n    return new SearchMeta(rel, fileName, parentDir, type, title, contentText, size, modifiedAt);\n}\n```\n\n### 3.2 元数据存储与管理\n\n#### SearchMetaRepository\n\n负责SearchMeta数据的持久化和加载：\n\n- 将SearchMeta列表保存为JSON文件\n- 从JSON文件加载SearchMeta数据\n- 处理文件IO异常\n- 使用Jackson库进行JSON序列化和反序列化\n\n关键代码：\n```java\npublic Result<List<SearchMeta>> saveAll(List<SearchMeta> list) {\n    try {\n        // 确保数据目录存在\n        Path dir = Paths.get(dataDir);\n        if (!Files.exists(dir)) Files.createDirectories(dir);\n        // 保存为JSON文件\n        Path jsonPath = dir.resolve(SEARCH_META_JSON);\n        objectMapper.writeValue(jsonPath.toFile(), list);\n        return Result.success(list);\n    } catch (Exception e) {\n        // 错误处理\n        return Result.failure(\"Failed to save search meta: \" + e.getMessage());\n    }\n}\n```\n\n### 3.3 Elasticsearch索引同步\n\n#### EsIndexService\n\n负责将本地SearchMeta数据同步到Elasticsearch索引：\n\n- 只有当`app.search.use-es=true`时才会启用\n- 从SearchMetaRepository加载所有元数据\n- 将SearchMeta转换为EsDocument对象\n- 批量保存到Elasticsearch索引\n- 支持清除旧索引并重建\n\n核心逻辑：\n```java\n@ConditionalOnProperty(\"app.search.use-es\")\npublic Result<Long> reindexFromMeta(boolean clear) {\n    // 加载所有SearchMeta数据\n    Result<List<SearchMeta>> loadResult = searchMetaRepository.loadAll();\n    if (loadResult.isFailure()) {\n        return Result.failure(loadResult.getErrorMessage().orElse(\"Failed to load search meta\"));\n    }\n    \n    // 转换为EsDocument\n    List<EsDocument> docs = loadResult.getValue().get().stream()\n        .map(meta -> new EsDocument(\n            meta.getFilePath(),\n            meta.getFileName(),\n            meta.getParentDir(),\n            meta.getFileType(),\n            meta.getTitle(),\n            meta.getContent(),\n            meta.getSize(),\n            meta.getModifiedAt()\n        ))\n        .collect(Collectors.toList());\n    \n    // 批量保存到Elasticsearch\n    repo.saveAll(docs);\n    return Result.success((long) docs.size());\n}\n```\n\n#### EsDocumentRepository\n\n基于Spring Data Elasticsearch的仓库接口：\n\n- 继承ElasticsearchRepository提供基本数据访问功能\n- 支持Elasticsearch的CRUD操作\n- 自动映射EsDocument对象到Elasticsearch索引\n\n```java\npublic interface EsDocumentRepository extends ElasticsearchRepository<EsDocument, String> {\n    // 提供基本的数据访问功能\n}\n```\n\n### 3.4 搜索服务实现\n\n#### EsSearchService\n\n实现全文检索功能：\n\n- 构建Elasticsearch查询DSL\n- 支持多字段搜索（content、title、fileName等）\n- 处理过滤条件（文件类型、目录、大小、时间等）\n- 实现搜索结果高亮显示\n- 截取关键片段展示给用户\n\n搜索实现：\n```java\npublic Result<List<SearchResult>> search(SearchRequest request, int limit) {\n    // 构建搜索查询\n    Map<String, Object> query = new HashMap<>();\n    // 多字段匹配查询\n    Map<String, Object> multiMatch = new HashMap<>();\n    multiMatch.put(\"query\", request.getKeyword());\n    multiMatch.put(\"fields\", Arrays.asList(\"content\", \"title\", \"fileName\"));\n    multiMatch.put(\"type\", \"best_fields\");\n    \n    // 添加过滤条件\n    if (request.getFileType() != null) {\n        // 添加文件类型过滤\n    }\n    \n    // 执行搜索\n    SearchHits<EsDocument> searchHits = operations.search(searchQuery, EsDocument.class);\n    \n    // 处理结果和高亮\n    List<SearchResult> results = new ArrayList<>();\n    for (SearchHit<EsDocument> hit : searchHits.getSearchHits()) {\n        EsDocument doc = hit.getContent();\n        // 处理高亮显示\n        String snippet = extractSnippetWithHighlight(hit, request.getKeyword());\n        results.add(new SearchResult(\n            doc.getFilePath(),\n            doc.getFileName(),\n            doc.getFileType(),\n            snippet,\n            hit.getScore(),\n            doc.getModifiedAt()\n        ));\n    }\n    \n    return Result.success(results);\n}\n```\n\n#### SearchController\n\n处理HTTP搜索请求：\n\n- 提供基础搜索和高级搜索API\n- 支持重建索引操作\n- 实现ES搜索失败时自动降级到本地搜索的机制\n- 增强的ES可用性检测和故障转移\n- 统一的错误处理和日志记录\n\n```java\n@PostMapping(\"/advanced\")\npublic ResponseEntity<?> advancedSearch(@RequestBody SearchRequest request, @RequestParam int limit) {\n    String keyword = (request.getKeyword() == null ? \"\" : request.getKeyword()).trim();\n    boolean useEs = (esSearchService != null && esSearchService.enabled());\n    logger.info(\"Advanced search request received with keyword: '{}', limit: {}, using ES: {}\", keyword, limit, useEs);\n    \n    Result<List<SearchResult>> r;\n    if (useEs) {\n        // 首先尝试使用ES搜索\n        r = esSearchService.search(request, limit);\n        // 如果ES搜索失败，自动降级到本地搜索\n        if (r.isFailure()) {\n            logger.warn(\"ES search failed, falling back to local search: {}\", r.getErrorMessage().orElse(\"Unknown error\"));\n            r = advancedSearchService.search(request, limit);\n        }\n    } else {\n        logger.info(\"Elasticsearch not enabled or unavailable, using local search\");\n        r = advancedSearchService.search(request, limit);\n    }\n    \n    if (r.isFailure()) {\n        logger.warn(\"Advanced search failed for keyword: '{}', error: {}\", \n                    keyword, r.getErrorMessage().orElse(\"Unknown error\"));\n        return ResponseEntity.status(500).body(r.getErrorMessage().orElse(\"Advanced search failed\"));\n    }\n    List<SearchResult> list = r.getValue().get();\n    int originalSize = list.size();\n    if (!keyword.isEmpty()) {\n        list = list.stream().limit(Math.max(1, limit)).collect(Collectors.toList());\n    }\n    logger.info(\"Advanced search completed with {} filtered results ({} original results) for keyword: '{}', using ES: {}\", \n                list.size(), originalSize, keyword, useEs);\n    return ResponseEntity.ok(list);\n}\n```\n\n## 4. 关键数据结构\n\n### 4.1 SearchMeta\n\n文件搜索元数据，包含文件的基本信息和内容：\n\n- `filePath`: 文件相对路径\n- `fileName`: 文件名\n- `parentDir`: 父目录\n- `fileType`: 文件类型\n- `title`: 标题（可能从文档内容提取）\n- `content`: 提取的文本内容\n- `size`: 文件大小\n- `modifiedAt`: 最后修改时间\n\n### 4.2 EsDocument\n\n映射到Elasticsearch索引的文档对象：\n\n- 与SearchMeta类似的字段结构\n- 专为Elasticsearch索引优化的设计\n- 包含TOON结构嵌套字段（用于文档结构索引）\n\n### 4.3 SearchRequest\n\n搜索请求参数：\n\n- `keyword`: 搜索关键词\n- `fileType`: 文件类型过滤\n- `parentDir`: 目录过滤\n- `minSize`/`maxSize`: 大小范围过滤\n- `startTime`/`endTime`: 时间范围过滤\n\n### 4.4 SearchResult\n\n搜索结果对象：\n\n- `filePath`: 文件路径\n- `fileName`: 文件名\n- `fileType`: 文件类型\n- `snippet`: 包含关键词的内容片段（带高亮）\n- `score`: 相关性评分\n- `modifiedAt`: 最后修改时间\n\n## 5. 配置与依赖\n\n### 5.1 核心配置项\n\n在`application.yml`中配置：\n\n```yaml\n# 扫描配置\napp:\n  scan:\n    root-dirs: /path/to/docs  # 扫描的根目录\n  \n# Elasticsearch配置\napp:\n  search:\n    use-es: true  # 是否启用Elasticsearch\n    es-index-name: nexus-lite-docs  # 索引名称\n\n# Elasticsearch连接配置\nspring:\n  elasticsearch:\n    uris: http://localhost:9200  # Elasticsearch服务地址\n```\n\n### 5.2 主要依赖\n\n- **Elasticsearch 8.x**: 全文搜索引擎\n- **Spring Data Elasticsearch**: Elasticsearch集成\n- **PDFBox**: PDF文件处理\n- **Apache POI**: Office文件处理\n- **JSoup**: HTML解析\n- **Jackson**: JSON处理\n\n## 6. 错误处理与日志\n\n系统在关键环节都有完善的错误处理和日志记录：\n\n- 文件内容提取失败时记录详细错误信息\n- 增强的Elasticsearch可用性检测，包括连接状态和索引存在性验证\n- 搜索请求失败时的自动降级机制，确保即使ES不可用也能提供基本搜索功能\n- 搜索请求失败的友好错误响应\n- 性能关键操作的详细日志记录\n- 完整的错误追踪和调试信息\n\n## 7. 性能优化\n\n### 7.1 索引优化\n\n- 合理的分片和副本设置（单节点环境下副本为0）\n- 字段权重设置，优先匹配更重要的字段\n- 适当的分词器配置，优化中文搜索效果\n\n### 7.2 查询优化\n\n- 使用过滤查询提高性能\n- 合理的分页设置\n- 避免全表扫描操作\n\n### 7.3 缓存策略\n\n- 利用Elasticsearch自身缓存\n- 应用层缓存热点搜索结果\n- 智能缓存失效策略\n\n## 8. 扩展性设计\n\n- **模块化架构**：搜索功能与其他模块解耦\n- **可插拔设计**：支持切换不同的搜索引擎实现\n- **自定义扩展点**：支持添加新的文件类型处理器\n- **配置驱动**：通过配置灵活控制功能行为\n\n## 9. 监控与维护\n\n- 索引健康状态监控\n- 搜索性能指标收集\n- 定期重建索引机制\n- 索引大小和文档数量监控\n\n## 10. 总结\n\nNexus-Lite的全文检索功能通过模块化设计和优秀的架构，提供了高效、可扩展的文档搜索能力。系统集成了多种文件格式处理、智能内容提取、Elasticsearch索引管理和高级搜索功能，为用户提供了良好的文档检索体验。\n\n通过合理的性能优化和错误处理，系统能够稳定高效地运行，支持大规模文档集合的检索需求。同时，灵活的配置和扩展性设计也使得系统能够适应不同的部署环境和业务需求。",
  "size" : 12854,
  "modifiedAt" : 1764639821582,
  "id" : "技术案例/full-text-search-implementation.md",
  "content" : "# Nexus-Lite 全文检索实现文档\n\n## 1. 系统概述\n\nNexus-Lite的全文检索功能提供了高效的文档内容搜索能力，支持多种文件格式的内容提取、索引和检索。该功能基于Elasticsearch实现，支持全文搜索、多条件筛选、结果高亮等高级特性。\n\n## 2. 核心工作流程\n\n全文检索功能的完整工作流程包含以下主要步骤：\n\n1. **文档扫描与内容提取**：系统扫描配置的根目录，提取支持的文件格式的内容\n2. **元数据生成与存储**：将提取的内容和文件元数据生成SearchMeta对象并本地存储\n3. **Elasticsearch索引同步**：将SearchMeta数据转换并同步到Elasticsearch索引\n4. **用户查询处理**：接收并处理用户的搜索请求\n5. **结果高亮与返回**：处理搜索结果，高亮关键字并返回给用户\n\n## 3. 核心组件详解\n\n### 3.1 文档扫描与内容提取\n\n#### FileScanServiceImpl\n\n负责扫描文件系统，检测文件变化，并触发内容提取：\n\n- 扫描配置的根目录（通过`app.scan.root-dirs`配置）\n- 使用多线程高效处理大量文件\n- 调用SearchMetaBuilder提取文件内容\n- 将提取的SearchMeta保存到本地文件系统\n- 发布扫描完成事件（ScanFinishedEvent）\n\n关键代码流程：\n```java\n// 扫描目录并收集文件信息\nfor (String dirPath : dirPaths) {\n    Path rootPath = Paths.get(dirPath);\n    // 递归遍历文件树\n    Files.walkFileTree(rootPath, new SimpleFileVisitor<Path>() {\n        @Override\n        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\n            // 检查文件是否需要处理\n            if (shouldProcessFile(file)) {\n                // 提取文件元数据\n                metas.add(searchMetaBuilder.build(rootPath, file, lastModified));\n            }\n            return FileVisitResult.CONTINUE;\n        }\n    });\n}\n// 保存搜索元数据\nsearchMetaRepository.saveAll(metas);\n```\n\n#### SearchMetaBuilder\n\n负责从不同格式的文件中提取内容：\n\n- 支持多种文件格式的内容提取：PDF、DOCX、XLSX、MD、HTML、CSV等\n- 针对不同文件类型使用专门的解析器\n- 提取文件名、路径、内容、修改时间等元数据\n- 处理大文件时进行智能截断，避免内存溢出\n\n关键实现：\n```java\npublic SearchMeta build(Path rootPath, Path filePath, long modifiedAt) {\n    // 提取基本信息\n    String rel = rootPath.relativize(filePath).toString().replace(\"\\\\\", \"/\");\n    String fileName = filePath.getFileName().toString();\n    FileType type = FileType.fromExtension(ext);\n    \n    // 根据文件类型提取内容\n    if (type == FileType.PDF) {\n        // 使用PDFBox提取PDF内容\n        // 只提取头部和尾部几页，兼顾内容覆盖和性能\n    } else if (type == FileType.DOCX) {\n        // 使用Apache POI提取Word文档内容\n    } else if (type == FileType.MD) {\n        // 直接读取文本内容\n    }\n    \n    // 限制内容长度，避免过大的JSON\n    if (contentText != null && contentText.length() > 20000) {\n        contentText = contentText.substring(0, 20000);\n    }\n    \n    // 创建并返回SearchMeta对象\n    return new SearchMeta(rel, fileName, parentDir, type, title, contentText, size, modifiedAt);\n}\n```\n\n### 3.2 元数据存储与管理\n\n#### SearchMetaRepository\n\n负责SearchMeta数据的持久化和加载：\n\n- 将SearchMeta列表保存为JSON文件\n- 从JSON文件加载SearchMeta数据\n- 处理文件IO异常\n- 使用Jackson库进行JSON序列化和反序列化\n\n关键代码：\n```java\npublic Result<List<SearchMeta>> saveAll(List<SearchMeta> list) {\n    try {\n        // 确保数据目录存在\n        Path dir = Paths.get(dataDir);\n        if (!Files.exists(dir)) Files.createDirectories(dir);\n        // 保存为JSON文件\n        Path jsonPath = dir.resolve(SEARCH_META_JSON);\n        objectMapper.writeValue(jsonPath.toFile(), list);\n        return Result.success(list);\n    } catch (Exception e) {\n        // 错误处理\n        return Result.failure(\"Failed to save search meta: \" + e.getMessage());\n    }\n}\n```\n\n### 3.3 Elasticsearch索引同步\n\n#### EsIndexService\n\n负责将本地SearchMeta数据同步到Elasticsearch索引：\n\n- 只有当`app.search.use-es=true`时才会启用\n- 从SearchMetaRepository加载所有元数据\n- 将SearchMeta转换为EsDocument对象\n- 批量保存到Elasticsearch索引\n- 支持清除旧索引并重建\n\n核心逻辑：\n```java\n@ConditionalOnProperty(\"app.search.use-es\")\npublic Result<Long> reindexFromMeta(boolean clear) {\n    // 加载所有SearchMeta数据\n    Result<List<SearchMeta>> loadResult = searchMetaRepository.loadAll();\n    if (loadResult.isFailure()) {\n        return Result.failure(loadResult.getErrorMessage().orElse(\"Failed to load search meta\"));\n    }\n    \n    // 转换为EsDocument\n    List<EsDocument> docs = loadResult.getValue().get().stream()\n        .map(meta -> new EsDocument(\n            meta.getFilePath(),\n            meta.getFileName(),\n            meta.getParentDir(),\n            meta.getFileType(),\n            meta.getTitle(),\n            meta.getContent(),\n            meta.getSize(),\n            meta.getModifiedAt()\n        ))\n        .collect(Collectors.toList());\n    \n    // 批量保存到Elasticsearch\n    repo.saveAll(docs);\n    return Result.success((long) docs.size());\n}\n```\n\n#### EsDocumentRepository\n\n基于Spring Data Elasticsearch的仓库接口：\n\n- 继承ElasticsearchRepository提供基本数据访问功能\n- 支持Elasticsearch的CRUD操作\n- 自动映射EsDocument对象到Elasticsearch索引\n\n```java\npublic interface EsDocumentRepository extends ElasticsearchRepository<EsDocument, String> {\n    // 提供基本的数据访问功能\n}\n```\n\n### 3.4 搜索服务实现\n\n#### EsSearchService\n\n实现全文检索功能：\n\n- 构建Elasticsearch查询DSL\n- 支持多字段搜索（content、title、fileName等）\n- 处理过滤条件（文件类型、目录、大小、时间等）\n- 实现搜索结果高亮显示\n- 截取关键片段展示给用户\n\n搜索实现：\n```java\npublic Result<List<SearchResult>> search(SearchRequest request, int limit) {\n    // 构建搜索查询\n    Map<String, Object> query = new HashMap<>();\n    // 多字段匹配查询\n    Map<String, Object> multiMatch = new HashMap<>();\n    multiMatch.put(\"query\", request.getKeyword());\n    multiMatch.put(\"fields\", Arrays.asList(\"content\", \"title\", \"fileName\"));\n    multiMatch.put(\"type\", \"best_fields\");\n    \n    // 添加过滤条件\n    if (request.getFileType() != null) {\n        // 添加文件类型过滤\n    }\n    \n    // 执行搜索\n    SearchHits<EsDocument> searchHits = operations.search(searchQuery, EsDocument.class);\n    \n    // 处理结果和高亮\n    List<SearchResult> results = new ArrayList<>();\n    for (SearchHit<EsDocument> hit : searchHits.getSearchHits()) {\n        EsDocument doc = hit.getContent();\n        // 处理高亮显示\n        String snippet = extractSnippetWithHighlight(hit, request.getKeyword());\n        results.add(new SearchResult(\n            doc.getFilePath(),\n            doc.getFileName(),\n            doc.getFileType(),\n            snippet,\n            hit.getScore(),\n            doc.getModifiedAt()\n        ));\n    }\n    \n    return Result.success(results);\n}\n```\n\n#### SearchController\n\n处理HTTP搜索请求：\n\n- 提供基础搜索和高级搜索API\n- 支持重建索引操作\n- 实现ES搜索失败时自动降级到本地搜索的机制\n- 增强的ES可用性检测和故障转移\n- 统一的错误处理和日志记录\n\n```java\n@PostMapping(\"/advanced\")\npublic ResponseEntity<?> advancedSearch(@RequestBody SearchRequest request, @RequestParam int limit) {\n    String keyword = (request.getKeyword() == null ? \"\" : request.getKeyword()).trim();\n    boolean useEs = (esSearchService != null && esSearchService.enabled());\n    logger.info(\"Advanced search request received with keyword: '{}', limit: {}, using ES: {}\", keyword, limit, useEs);\n    \n    Result<List<SearchResult>> r;\n    if (useEs) {\n        // 首先尝试使用ES搜索\n        r = esSearchService.search(request, limit);\n        // 如果ES搜索失败，自动降级到本地搜索\n        if (r.isFailure()) {\n            logger.warn(\"ES search failed, falling back to local search: {}\", r.getErrorMessage().orElse(\"Unknown error\"));\n            r = advancedSearchService.search(request, limit);\n        }\n    } else {\n        logger.info(\"Elasticsearch not enabled or unavailable, using local search\");\n        r = advancedSearchService.search(request, limit);\n    }\n    \n    if (r.isFailure()) {\n        logger.warn(\"Advanced search failed for keyword: '{}', error: {}\", \n                    keyword, r.getErrorMessage().orElse(\"Unknown error\"));\n        return ResponseEntity.status(500).body(r.getErrorMessage().orElse(\"Advanced search failed\"));\n    }\n    List<SearchResult> list = r.getValue().get();\n    int originalSize = list.size();\n    if (!keyword.isEmpty()) {\n        list = list.stream().limit(Math.max(1, limit)).collect(Collectors.toList());\n    }\n    logger.info(\"Advanced search completed with {} filtered results ({} original results) for keyword: '{}', using ES: {}\", \n                list.size(), originalSize, keyword, useEs);\n    return ResponseEntity.ok(list);\n}\n```\n\n## 4. 关键数据结构\n\n### 4.1 SearchMeta\n\n文件搜索元数据，包含文件的基本信息和内容：\n\n- `filePath`: 文件相对路径\n- `fileName`: 文件名\n- `parentDir`: 父目录\n- `fileType`: 文件类型\n- `title`: 标题（可能从文档内容提取）\n- `content`: 提取的文本内容\n- `size`: 文件大小\n- `modifiedAt`: 最后修改时间\n\n### 4.2 EsDocument\n\n映射到Elasticsearch索引的文档对象：\n\n- 与SearchMeta类似的字段结构\n- 专为Elasticsearch索引优化的设计\n- 包含TOON结构嵌套字段（用于文档结构索引）\n\n### 4.3 SearchRequest\n\n搜索请求参数：\n\n- `keyword`: 搜索关键词\n- `fileType`: 文件类型过滤\n- `parentDir`: 目录过滤\n- `minSize`/`maxSize`: 大小范围过滤\n- `startTime`/`endTime`: 时间范围过滤\n\n### 4.4 SearchResult\n\n搜索结果对象：\n\n- `filePath`: 文件路径\n- `fileName`: 文件名\n- `fileType`: 文件类型\n- `snippet`: 包含关键词的内容片段（带高亮）\n- `score`: 相关性评分\n- `modifiedAt`: 最后修改时间\n\n## 5. 配置与依赖\n\n### 5.1 核心配置项\n\n在`application.yml`中配置：\n\n```yaml\n# 扫描配置\napp:\n  scan:\n    root-dirs: /path/to/docs  # 扫描的根目录\n  \n# Elasticsearch配置\napp:\n  search:\n    use-es: true  # 是否启用Elasticsearch\n    es-index-name: nexus-lite-docs  # 索引名称\n\n# Elasticsearch连接配置\nspring:\n  elasticsearch:\n    uris: http://localhost:9200  # Elasticsearch服务地址\n```\n\n### 5.2 主要依赖\n\n- **Elasticsearch 8.x**: 全文搜索引擎\n- **Spring Data Elasticsearch**: Elasticsearch集成\n- **PDFBox**: PDF文件处理\n- **Apache POI**: Office文件处理\n- **JSoup**: HTML解析\n- **Jackson**: JSON处理\n\n## 6. 错误处理与日志\n\n系统在关键环节都有完善的错误处理和日志记录：\n\n- 文件内容提取失败时记录详细错误信息\n- 增强的Elasticsearch可用性检测，包括连接状态和索引存在性验证\n- 搜索请求失败时的自动降级机制，确保即使ES不可用也能提供基本搜索功能\n- 搜索请求失败的友好错误响应\n- 性能关键操作的详细日志记录\n- 完整的错误追踪和调试信息\n\n## 7. 性能优化\n\n### 7.1 索引优化\n\n- 合理的分片和副本设置（单节点环境下副本为0）\n- 字段权重设置，优先匹配更重要的字段\n- 适当的分词器配置，优化中文搜索效果\n\n### 7.2 查询优化\n\n- 使用过滤查询提高性能\n- 合理的分页设置\n- 避免全表扫描操作\n\n### 7.3 缓存策略\n\n- 利用Elasticsearch自身缓存\n- 应用层缓存热点搜索结果\n- 智能缓存失效策略\n\n## 8. 扩展性设计\n\n- **模块化架构**：搜索功能与其他模块解耦\n- **可插拔设计**：支持切换不同的搜索引擎实现\n- **自定义扩展点**：支持添加新的文件类型处理器\n- **配置驱动**：通过配置灵活控制功能行为\n\n## 9. 监控与维护\n\n- 索引健康状态监控\n- 搜索性能指标收集\n- 定期重建索引机制\n- 索引大小和文档数量监控\n\n## 10. 总结\n\nNexus-Lite的全文检索功能通过模块化设计和优秀的架构，提供了高效、可扩展的文档搜索能力。系统集成了多种文件格式处理、智能内容提取、Elasticsearch索引管理和高级搜索功能，为用户提供了良好的文档检索体验。\n\n通过合理的性能优化和错误处理，系统能够稳定高效地运行，支持大规模文档集合的检索需求。同时，灵活的配置和扩展性设计也使得系统能够适应不同的部署环境和业务需求。",
  "lastModified" : 1764639821582
}, {
  "filePath" : "技术案例/TDD-数据资产管理平台-详细设计.md",
  "fileName" : "TDD-数据资产管理平台-详细设计.md",
  "parentDir" : "技术案例",
  "fileType" : "MD",
  "title" : "TDD-数据资产管理平台-详细设计.md",
  "contentText" : "# 数据资产管理平台 - 详细设计文档 (TDD)\n\n版本：v1.0  \n状态：草案  \n创建日期：2025-10-09  \n适用读者：产品经理、架构师、后端/前端开发、数据工程师、测试工程师、运维工程师、实施顾问、治理与合规人员\n\n---\n\n## 1. 文档概述\n\n### 1.1 编写目的\n\n本详细设计文档（TDD）在 BRD 与 PRD 的基础上，进一步明确“数据资产管理平台”的技术实现边界、架构路径与交付物清单，为研发、测试与运维团队提供统一的技术说明与可落地的设计依据。\n\n目标与产出：\n\n- 将业务需求转化为可实施的技术方案，细化到模块、接口、数据模型、状态机与关键流程。\n- 统一非功能需求（性能、可用性、安全、可观测性）及工程约束，形成可验证的验收标准。\n- 输出可复用的设计资产：接口规范（OpenAPI/GraphQL Schema）、领域事件与错误码、数据模型定义、序列/活动图、配置与部署说明、测试与验收用例框架。\n\n### 1.2 适用范围\n\n本文件适用于“数据资产管理平台”的整体系统与主要业务场景，范围与 PRD 的八个核心模块保持一致，并明确本期边界：\n\n- 数据资产模块（资产目录、资产详情、资产搜索、资产标签）。\n- 数据源管理（多源连接、采集、健康监控）。\n- 元数据管理（采集、目录与展示、血缘）。\n- 数据质量管理（规则库、任务编排、检测与报告）。\n- 数据标准管理（标准制定、映射与执行、规范校验）。\n- 数据服务管理（API 注册、白名单与限流、监控与日志）。\n- 系统管理（用户/角色/权限、系统配置与审计）。\n\n不在本期范围（Out of Scope）：\n\n- 非平台内的第三方商业数据治理套件的二次开发与深度集成。\n- 复杂离线大数据作业编排引擎的实现（采用外部调度/计算平台对接）。\n- BI 可视化报表产品内核开发（以资产接口/数据集导出与对接为主）。\n\n### 1.3 术语定义\n\n为避免歧义，本文对关键术语进行统一与约定：\n\n- 数据资产：对业务有价值的数据实体及其附属能力集合，通常包含数据集（表/视图/文件）、元数据（技术/业务/运维）、服务接口（API/SQL/报表）、质量度量与评估、访问策略等。\n- 元数据（Metadata）：用于描述数据的“数据”，按用途分为技术元数据、业务元数据与运维/可观测性元数据。\n- 技术元数据：与底层实现相关的元信息，如数据源、库/模式、表/视图、列/字段、类型、索引、约束、存储过程、作业任务、运行时属性等。\n- 业务元数据：与业务语义相关的元信息，如主题域/子域、业务对象、指标/维度、口径说明、流程/活动、数据解释、所有者与责任人等。\n- 数据血缘（Lineage）：数据在采集、加工、存储与服务化过程中的来源、流转与依赖关系的可视化与可追溯能力，支持上/下游、直接/间接依赖与变更影响分析。\n- 数据标准（Standard）：用于统一命名、编码、元素定义、结构与映射关系的规范集合，包含命名标准、编码标准、元素标准与规则库；支持规范校验与执行度量。\n- 数据质量（Data Quality）：围绕完整性、唯一性、一致性、准确性、及时性、可用性等维度进行规则定义、检测与报告的能力。\n- 主题域（Domain）：围绕业务主题组织的模型与数据边界，可包含子域与关联流程，是仓库分层与模型治理的基础。\n- 资产目录（Catalog）：以统一结构呈现资产实体（系统/库/表/字段、API、指标、标签等）的索引与检索视图，支持列表/卡片、条件检索、详情等。\n- 模型（Model）：数据的逻辑或物理结构化表示，包含实体、属性与关系。\n- 标准映射（Mapping）：将源数据与标准定义进行对齐的规则与关系集合，包括字段映射、编码转换与口径一致性校验。\n- 数据服务（Data Service）：通过 API 或其他接口暴露数据资产，支持白名单访问、限流与监控日志。\n\n### 1.4 参考资料\n\n- BRD-数据资产管理平台.md（版本：v1.0；路径：docs/business-design/BRD-数据资产管理平台.md）。\n- PRD-数据资产管理平台.md（版本：v1.0；路径：docs/business-design/PRD-数据资产管理平台.md）。\n- 技术架构与流程图（路径：docs/technical-design/images/）。\n- 开发规范与接口风格指引（统一错误码、分页/过滤、版本策略等）。\n\n### 1.5 文档读者与角色\n\n- 产品经理：需求澄清与验收标准对齐。\n- 架构师：架构方案审定与技术决策。\n- 后端/前端开发：模块实现与接口契约遵循。\n- 数据工程师：数据模型、采集/加工与质量规则落地。\n- 测试工程师：用例设计与验收验证。\n- 运维工程师：部署、监控与可观测性配置。\n- 治理与合规：权限策略、审计与合规要求对齐。\n\n### 1.6 文档结构与阅读指引\n\n- 2 章系统概述：背景与目标，总体设计思路。\n- 3 章总体设计：业务/技术架构、分层与服务边界。\n- 4 章模块设计：逐模块的接口、数据模型与流程。\n- 5 章接口设计：API 契约、错误码与示例。\n- 6 章数据模型：核心表/索引/约束与版本策略。\n- 7 章系统部署与集成设计：服务器角色、网络架构、安全策略。\n- 8 章非功能设计：性能、可用性、安全与可观测性指标。\n\n---\n\n## 2. 系统概述\n\n### 2.1 业务背景\n\n为支撑产业大脑建设与数据驱动决策，当前企业在数据资产管理方面普遍存在如下痛点：\n\n- 标准分散且执行弱：命名、编码与元素标准在不同系统与团队间不一致，落地校验不足，数据复用与治理成本高。\n- 元数据不透明：来源、口径、变更与血缘信息缺失或不可追溯，难以支撑跨域数据理解与问题定位。\n- 质量治理缺乏闭环：规则定义零散、检测与整改缺少统一平台与流程，问题响应慢、同类问题重复发生。\n- 模型与主题治理不足：模型版本管理与复用体系不健全，主题域边界模糊，影响数据一致性与共享效率。\n- 资产发现与运营弱：资产目录不全、检索与评估能力弱，服务上架与订阅流程不标准，资产价值难量化。\n- 接口与服务管理不统一：API发布、鉴权、监控与日志分散在各系统，出现性能与稳定性问题难以统一治理。\n- 可视化与度量不足：资产地图与运营指标缺少统一视图，治理成效难以量化，管理决策支撑不足。\n\n### 2.2 系统目标\n\n为解决上述痛点，平台设定以下概括性目标，作为架构与实现的指导纲领；具体量化指标将随实施阶段与业务反馈逐步细化与调整：\n\n- 核心功能目标（方向性）\n  - 建立覆盖主要数据源与模型的统一元数据体系，提供可追溯的血缘、变更与口径管理。\n  - 构建可落地的数据标准治理闭环，包括标准制定、映射、校验、度量与优化。\n  - 形成可持续运行的质量治理体系，支持规则管理、任务编排、检测报表。\n  - 建立模型与主题域治理能力，支持版本管理、复用与跨域协同。\n  - 推动数据资产服务化，完善资产登记、目录检索与使用评估。\n  - 实现统一的API管理与监控能力，并与网关协同保障鉴权、限流与可观测。\n- 技术目标（原则性）\n  - 以高可用、可扩展、可维护为设计原则，支持水平扩展与容错降级。\n  - 构建统一的安全与合规体系，涵盖数据分级、脱敏与审计追踪。\n  - 提供完善的可观测性，包括指标、日志与链路追踪的一体化。\n  - 通过插件化与标准化接口，兼容主流数据源与多种部署环境。\n  - 设计满足主流性能体验的交互与检索能力，并支持大规模图谱与关系查询。\n- 业务预期成果（价值导向）\n  - 提升数据资产的可发现、可理解、可复用与可服务化水平，促进跨团队协同。\n  - 降低数据治理与对齐成本，提升关键数据质量与治理效率。\n  - 增强标准执行与治理透明度，为管理决策提供统一的资产视图与度量看板。\n  - 通过持续迭代与反馈闭环，稳步提升用户体验与满意度。\n\n---\n\n## 3. 系统总体设计\n\n本章从业务架构、技术架构与数据流角度，对平台的整体设计进行描述，确保“需求-架构-实现-验收”链路可追踪、可落地。\n\n### 3.1 业务架构设计\n\n#### 3.1.1 目标与范围\n\n- 将 PRD 的业务需求转化为可实施的业务架构蓝图，明确能力域、核心流程、模块边界与交互契约，确保“需求-架构-实现-验收”链路一致。\n- 适用范围：覆盖数据资产管理平台所有核心业务流程与能力域，支撑资产化→标准化→服务化→价值化的价值链闭环。\n\n#### 3.1.2 设计原则\n\n- 用户中心：围绕数据分析师、数据管理员、技术用户的差异化需求设计视图与能力。\n- 流程驱动：以“数据发现、数据治理、数据使用、数据服务”四条主流程为主线，模块围绕流程节点协作。\n- 价值导向：以资产化→标准化→服务化→价值化的链条衡量架构取舍。\n- 模块化与可扩展：模块高内聚、低耦合，支持独立演进与横向扩展；交互采用契约与事件驱动。\n\n#### 3.1.3 业务能力与功能域\n\n| 能力域  | 业务目标      | 关键功能            | 对应 PRD 模块 |\n|------|-----------|-----------------|-----------|\n| 数据发现 | 快速定位可信数据  | 元数据目录、全局检索、血缘导航 | 元数据管理     |\n| 数据治理 | 提升数据质量与规范 | 质量规则、标准映射       | 质量管理、标准管理 |\n| 数据建模 | 统一业务与技术语义 | 主题域、分层模型        | 数据架构      |\n| 资产运营 | 最大化数据价值   | 资产目录            | 数据资产      |\n| 数据服务 | 安全可控地开放数据 | API 注册、发布、鉴权、监控 | 数据服务      |\n| 治理合规 | 满足审计与权限要求 | 用户/角色/权限、审计日志   | 系统管理      |\n\n#### 3.1.4 业务流程与泳道图\n\n##### 1. 数据发现流程\n\n- **目标**：帮助用户（数据分析师、技术用户）快速、准确地找到所需的数据资产。\n- **参与者**：数据分析师、技术用户。\n- **触发条件**：用户通过全局搜索入口或数据目录进行探索。\n- **核心步骤**： \n  1. **检索与筛选**：用户输入关键字，或通过数据源、主题域、标签、负责人等多维度进行筛选。\n  2. **详情查看**：用户点击感兴趣的资产，查看其技术元数据、业务属性、字段信息等。\n  3. **血缘分析**：用户查看资产的上下游依赖关系，理解数据来龙去脉。\n- **关键产出**： \n  - `用户检索行为日志`：用于后续的资产推荐与热度分析。\n- **图示**： \n\n  > ![数据发现流程泳道图](./images/swimlane-data-discovery.svg)\n\n##### 2. 数据治理流程\n\n- **目标**：识别并报告数据资产的质量与标准问题，为线下治理提供数据支持。\n- **参与者**：数据管理员、系统。\n- **触发条件**： \n  - 系统定时执行的数据质量稽核任务发现问题。\n  - 数据标准映射关系发生变更。\n  - 用户提交数据质量反馈。\n- **核心步骤**： \n  1. **问题识别与报告**：系统自动检测到数据质量问题（如空值、重复、不一致）或标准不合规，并生成数据质量报告。\n- **关键产出**： \n  - `数据质量报告`：包含质量评分、问题分布、趋势分析。\n- **图示**： \n\n  > ![数据治理流程泳道图](./images/swimlane-data-governance.svg)\n\n##### 4. 数据服务流程\n\n- **目标**：将数据资产封装为标准、可控的数据服务（API），实现数据价值变现。\n- **参与者**：技术用户、API网关/系统。\n- **触发条件**：技术用户希望将某个数据资产或查询能力发布为API。\n- **核心步骤**： \n  1. **API注册与发布**：用户在平台注册新的API，定义其请求参数、返回结构等，并直接发布。\n  2. **服务调用与鉴权**：应用方通过获取的凭证调用API。API网关负责统一的认证、鉴权、路由和限流。\n  3. **监控**：平台记录每次API调用的日志，包括调用方、延迟、成功率等。\n- **关键产出**： \n  - `API调用审计日志`：用于问题排查和安全审计。\n  - `API运营报表`：统计服务调用量、成功率、Top应用等。\n- **图示**： \n\n  > ![数据服务流程泳道图](./images/swimlane-data-service.svg)\n\n##### 5. 元数据采集流程\n\n- **目标**：自动发现和收集企业内各类数据源的元数据，构建统一的数据资产目录和血缘关系图谱。\n- **参与者**：数据源管理员、元数据采集引擎（Apache Atlas/DataHub）、系统。\n- **触发条件**： \n  - 新数据源注册到平台。\n  - 定时采集任务触发（如每日凌晨）。\n  - 数据源结构发生变更时主动推送。\n- **核心步骤**： \n  1. **数据源连接配置**：数据源管理员在平台中配置数据源连接信息（JDBC连接串、认证信息等）。\n  2. **元数据采集**：采集引擎通过JDBC、API等方式连接数据源，自动扫描库表结构、字段信息、分区信息等元数据。\n  3. **血缘关系构建**：通过SQL解析、ETL工具集成等方式，自动识别表与表之间的依赖关系，构建数据血缘图谱。\n  4. **元数据标准化**：将采集到的元数据按照平台标准进行清洗、转换和标准化处理。\n  5. **资产目录生成**：将标准化后的元数据注册到数据资产目录中，形成可检索的数据资产。\n- **技术实现**： \n  - **Apache Atlas方案**：利用Atlas的Hook机制，自动捕获Hive、HBase等大数据组件的元数据变更。\n  - **DataHub方案**：采用DataHub的Metadata Ingestion框架，支持多种数据源的批量和流式采集。\n  - **自定义采集器**：对于特殊数据源，开发自定义采集器，通过REST API将元数据推送到平台。\n- **关键产出**： \n  - `数据资产目录`：包含所有数据源的库表结构、字段信息、统计信息等。\n  - `数据血缘图谱`：展示数据从源系统到目标系统的完整流转路径。\n  - `元数据变更日志`：记录元数据的变更历史，支持版本追溯。\n- **图示**： \n\n  > ![元数据采集流程泳道图](./images/swimlane-metadata-collection.svg)\n\n#### 3.1.5 业务事件与契约\n\n#### 3.1.6 业务架构视图\n\n![业务架构图](./images/business-architecture.svg)\n\n**架构说明：**\n\n### 3.2 技术架构设计\n\n#### 3.2.1 架构目标与原则\n\n- 目标：支撑“发现→治理→标准化→服务化→价值化”的资产价值链闭环，确保高可用、可扩展、可观测与可审计。\n- 原则： \n  - 模块边界清晰，按领域拆分服务。\n  - 事件驱动与契约优先。\n  - API First/Contract First（OpenAPI），版本治理与向后兼容。\n  - 权限最小化与可审计。\n\n#### 3.2.2 技术栈与基础设施\n\n- 前端：Vue3 + TypeScript + Vite + Element Plus，统一组件与主题。\n- 网关：Spring Cloud Gateway，REST/GraphQL，统一鉴权、限流/熔断、灰度发布、路由与观测埋点。\n- 后端：Java 17 + Spring Boot 3；模块化微服务： \n  - metadata-service（元数据/血缘）\n  - quality-service（质量规则/任务/监控）\n  - standard-service（数据元/代码/命名/建模/映射）\n  - architecture-service（分层/主题域）\n  - api-service（API 管理/调用日志）\n  - asset-ops-service（资产运营）\n- 存储：MySQL（主库）、Neo4j（血缘图谱）、ElasticSearch（搜索与索引）、Redis（缓存/会话/分布式锁）、MinIO（对象存储）。\n- 消息：Kafka（事件总线，保障最终一致与异步处理）。\n- 身份与权限：Keycloak（OAuth2/OIDC + JWT），RBAC/ABAC 。\n- 可观测性：OpenTelemetry + Prometheus + Grafana + Loki/ELK，统一指标/日志/追踪与告警。\n- 部署：\n\n**系统技术架构图**\n\n![系统技术架构图](./images/system-architecture.svg)\n\n- 图例说明：网关路由至各领域服务；底层依赖 MySQL/Neo4j/ElasticSearch/Redis/Kafka/对象存储；安全与可观测为横切能力。\n\n#### 3.2.3 分层架构与服务边界\n\n- 展示层（Web 门户/控制台）：统一导航、检索、列表与详情、配置与审批。\n- 接入层（API 网关）：协议适配、鉴权与流控、审计埋点、灰度发布、统一错误码。\n- 领域服务层： \n  - discovery-service：元数据目录、全局检索、血缘导航、影响分析；存储 MySQL + Neo4j + ElasticSearch；对外 API：目录检索、血缘导航、影响分析。\n  - collector-service：Atlas/DataHub 接入、自动扫描、血缘与影响评估写入；存储 MySQL + Neo4j；对外 API：数据源接入、采集任务、扫描结果。\n  - governance-service：质量规则、标准映射、问题识别、报告生成、质量监控；存储 MySQL；对外 API：规则/任务/监控、报告。\n  - modeling-service：主题域、分层模型、物理模型、模型管理；存储 MySQL；对外 API：域/分层/物理模型设计与版本。\n  - api-service：API 注册/发布、鉴权与监控、服务编排、流量控制；存储 MySQL + ElasticSearch（日志索引）；对外 API：API CRUD、发布、调用统计与监控。\n  - asset-ops-service：资产目录、价值评估、使用统计、运营分析、优化建议；存储 MySQL + ElasticSearch；对外 API：资产检索、使用统计、运营建议。\n  - auth-service：统一认证授权、角色与策略、审计日志；与网关/各服务联动。\n- 基础设施层：RDBMS/图数据库/搜索/缓存/对象存储/消息队列；统一配置中心与服务发现。\n- 横切：安全（权限/审计/隐私）与可观测性（指标/日志/追踪）贯穿各层。\n\n#### 3.2.4 数据模型与存储设计\n\n- RDBMS（MySQL）：面向资产、元数据、质量、标准、架构、API、系统等核心实体，采用版本化、软删除；读写分离与索引按模块优化。\n- 图数据库（Neo4j）：覆盖 DataSource/Table/View/Field/Model/API 节点，支持血缘可视化、影响分析与路径计算。\n- 搜索索引（ElasticSearch）：对资产与元数据建立去范式索引（名称/标签/域/更新时间/热度/评分/所有者），统一分页/过滤/排序；字段映射与类型规范化。\n- 缓存（Redis）：热点列表与详情、统计概览、鉴权会话与限流令牌；TTL + 主动失效，防穿透/击穿/雪崩。\n- 对象存储（MinIO）：资产文件（如模型/映射/文档）、日志备份、临时文件存储；按资产类型/时间分片。\n\n#### 3.2.6 API 规范与网关策略\n\n- 统一规范：REST/JSON；/v1 版本路径；分页/过滤/排序统一；错误码/错误消息统一（含建议与文档链接）。\n- 幂等：PUT/DELETE/任务触发提供幂等键；重复消费与重试安全。\n- 限流与熔断：按租户/用户/接口限流；超时/重试与断路器策略；静默期与退避策略。\n- 鉴权与权限：OAuth2/OIDC + JWT；RBAC（角色）与 ABAC（属性）结合；细粒度到对象/字段级；审计事件全量记录。\n\n#### 3.2.7 安全与隐私\n\n- 脱敏与最小暴露：详情页与导出遵循脱敏策略；仅暴露必要字段与聚合指标。\n- 密钥与凭据：集中管理与轮换；最小权限访问；审计与告警。\n- 合规：日志留存策略、数据保留与删除、审批与留痕；外发文档水印与访问签名。\n\n#### 3.2.8 可观测性与运维\n\n- 指标：系统（CPU/内存/磁盘/带宽）、应用（QPS/延迟分位 P50/P95/P99/错误率）、业务（资产/模型/API 计数与增量）。\n- 日志：统一字段（traceId/spanId/tenantId/userId/module）；采样与聚合；慢查询与异常聚合面板。\n- 追踪：端到端分布式追踪；关键链路（搜索、发布、任务执行）必接入。\n\n### 3.3 数据流图设计\n\n- 完整数据流程（DFD）概述\n  - 从数据生产者（外部系统/数据仓库/日志/服务）进入平台，经“数据源接入→元数据采集与归一化→标准校验与映射→质量检测与整改→模型登记与版本管理→标签与分类治理→资产上架与目录发布→API 注册与网关发布→消费者使用与反馈”形成治理与价值闭环。\n  - 关键支撑存储与总线：MySQL（元数据/资产/标准/质量/模型等核心实体）、Neo4j（血缘图谱）、ElasticSearch（检索与规则索引）、Redis（缓存/会话/令牌）、Kafka（事件总线）、对象存储（导入包/报表/附件）。\n- 数据处理过程说明\n  - 数据源接入：注册连接与健康检测，触发采集任务。\n  - 元数据采集与归一化：自动扫描并解析技术/业务元数据，写入 MySQL 与 Neo4j；发布事件 `metadata.collected`。\n  - 标准校验与映射：根据命名/编码/元素标准进行校验，生成映射并入索引；发布事件 `standard.applied`。\n  - 质量检测与整改：按规则库编排检测任务，产出报告；发布事件 `quality.checked`。\n  - 模型登记与版本管理：登记逻辑/物理模型与变更，维护版本与影响分析。\n  - 标签与分类治理：为资产打标与分类，提升检索与导航能力。\n  - 资产上架与目录发布：审核后上架，目录与订阅可用；同步到 ElasticSearch。\n  - API 注册与发布：将服务化资产注册与发布，统一鉴权/限流/监控；调用日志写入 ELK/ElasticSearch。\n- 关键数据存储节点与流转描述\n  - MySQL：核心实体的结构化存储，版本化与审计支撑治理与查询。\n  - Neo4j：存储数据依赖与流转关系，支持血缘可视化与影响分析。\n  - ElasticSearch：索引资产与元数据、标准与规则，支持快速检索与聚合。\n  - Redis：缓存热点数据与会话，提升读性能与限流控制。\n  - Kafka：承载跨服务事件，驱动最终一致与异步处理。\n  - 对象存储：模板、导入包、导出文档与报表等文件。\n- 数据流图与说明\n  - 图示：\n\n    ![数据流图（时序）](./images/data-flow-sequence.svg)\n  - 说明：以参与者为横向、时间为纵向，使用实线表达主动调用/写入，虚线表达事件驱动；旁注标明对 MySQL/Neo4j/ElasticSearch/Redis/Kafka/对象存储的读写与事件，便于按时间维度追踪端到端交互。\n\n## 4. 功能模块设计\n\n### 4.1 功能模块划分\n\n模块划分：\n\n- MOD-SOURCE：数据源接入与采集。\n- MOD-METADATA：元数据采集与归一化、血缘构建。\n- MOD-STANDARD：标准项与映射下发、校验与映射。\n- MOD-QUALITY：质量规则执行、结果回写与监控。\n- MOD-ARCH：模型定义与版本管理。\n- MOD-ASSET：资产目录。\n- MOD-API：API 注册与发布。\n- MOD-SYS：系统管理与治理。\n\n跨模块主链路与协同\n\n- 采集→目录/血缘：数据源扫描/采集（MOD-SOURCE）→ 元数据入库与血缘构建（MOD-METADATA）。\n- 标准→校验与度量：标准项与映射下发（MOD-STANDARD）→ 元数据校验与 API 字段规范统一 → 合规度量事件回流。\n- 质量→报告与整改：质量规则执行（MOD-QUALITY）→ 结果回写元数据与服务监控 → 生成质量报告。\n- 建模→资产→服务：模型定义与版本（MOD-ARCH）→ 资产目录（MOD-ASSET）→ API 注册与发布（MOD-API）。\n- 运营回流：服务调用量与可用性（MOD-API）→ 回流资产运营视图（MOD-ASSET），支撑评估与优化。\n- 治理与合规横切：系统管理策略（MOD-SYS）贯穿各模块，权限/审计/合规策略统一生效。\n\n---\n\n### 4.2 模块详细设计\n\n为确保复杂模块设计清晰可落地，本章节按模块逐一给出：模块描述、功能组成、处理流程（配图）、数据流图（可选）、设计实现、关键算法（可选）与人机交互说明。\n\n#### 4.2.1 数据源管理\n\n##### 4.2.1.1 模块描述\n\n- 范围：提供对企业各类数据源的标准化接入与治理，包括数据源注册/配置、连接测试、发现扫描（库/模式/表/字段）等。\n- 目标：用于配置和管理平台所需的各类数据源连接，是数据采集、元数据获取、任务执行等功能的基础支撑模块。\n\n##### 4.2.1.2 功能组成\n\n- 数据源连接列表 - 展示所有已配置数据源的概要信息\n- 新增数据源 - 提供表单界面用于添加新的数据源配置\n- 测试连接 - 验证数据源配置的正确性和连通性\n- 数据源详情 - 显示选定数据源的完整配置信息\n- 修改数据源 - 允许编辑现有数据源的配置参数\n- 删除数据源 - 提供安全删除数据源配置的功能\n\n##### 4.2.1.3 处理流程\n\n![数据源管理流程图](./images/data-source-management-flowchart.svg)\n\n数据源管理流程采用严谨的多层验证机制，确保系统安全性和数据一致性：\n\n- **新增数据源**：权限验证 → 表单校验（必填项、格式、唯一性） → 连接测试（网络、认证、数据库） → 事务存储 → 审计日志记录\n- **连接测试**：权限验证 → 参数校验 → 网络连通性测试 → 身份认证验证 → 数据库连接测试 → 详细结果反馈\n- **修改数据源**：权限验证 → 数据源存在性检查 → 表单校验 → 名称唯一性检查 → 连接测试 → 事务更新 → 审计日志\n- **删除数据源**：权限验证 → 数据源存在性检查 → 引用关系检查 → 用户二次确认 → 事务删除 → 审计日志记录\n\n每个流程都包含完整的错误处理分支，确保异常情况下的系统稳定性和用户体验。\n\n##### 4.2.1.4 数据流图（可选）\n\n##### 4.2.1.5 设计实现\n\n- 新增数据源\n  - 表单元素（*为必填）：数据源名称*、数据源类型*、账号*、密码*、数据库IP*、端口号*、所属项目、数据源描述、备注、连接选项（随类型动态展示）。\n  - 校验规则： \n    - 必填校验：名称、类型、账号、密码、IP、端口。\n    - 唯一性：同项目下数据源名称唯一。\n    - 格式校验：IP 支持 IPv4/域名；端口 1–65535；名称≤64字符；描述/备注≤2000字符；去除首尾空格。\n    - 安全校验：密码不回显，强度≥中；仅在变更时传输；服务端加密存储（secret_ref）。\n    - 类型特定：如 Oracle 需 SID/ServiceName；Kafka 需 bootstrapServers；ClickHouse 需 database 可选等，按类型动态校验。\n  - 交互与流程：填写→实时校验→“测试连接”→展示分阶段结果→“确定”提交保存→跳转详情并记录审计。\n  - 后端实现：`POST /v1/datasources`→Service 验证与归一化→凭据写入 KMS/Vault→Repository 写入→发布事件 `ds.created`。\n- 测试连接\n  - 入口：新增/编辑表单中的“测试连接”按钮。\n  - 前置校验：必填字段与类型特定项齐全，否则阻断并给出提示。\n  - 测试阶段：网络连通（DNS/端口）→ TLS/证书 → 认证/授权 → 轻量查询（select 1 或等效）。\n  - 策略：指数退避重试（50ms×2^n，n≤5），单阶段超时≤3s；错误分类（网络/证书/鉴权/驱动）与修复建议。\n  - 返回结构：`{status: pass|fail|degraded, steps:[{name, result, latency, message}], suggestions:[]}`；结果写入健康状态与审计。\n  - 接口：`POST /v1/datasources/test`（新增态）或 `POST /v1/datasources/{id}/test`（编辑态）。\n- 编辑数据源\n  - 加载：`GET /v1/datasources/{id}` 返回基础信息，密码字段置空且不回显；提供最近健康与事件概览。\n  - 可编辑项：名称、账号/密码、IP/端口、选项/标签/环境、描述/备注；`type` 默认不可修改（避免兼容风险，如需变更建议新建）。\n  - 校验：同新增；名称唯一性忽略自身；若密码为空表示不变，若有值则轮换并更新 `secret_ref`。\n  - 提交：`PUT /v1/datasources/{id}`；并发控制使用 `If-Match`/版本号或 `updatedAt` 比较；审计事件 `ds.updated`。\n- 删除数据源\n  - 入口：列表/详情页操作区。\n  - 引用检查：采集任务、目录实体、权限 ACL 等；存在引用时阻断并给出解绑/迁移指引。\n  - 策略：默认逻辑删除（`status=deleted`）并保留审计；支持禁用替代；物理删除仅在无引用且管理员 `force=true`。\n  - 接口：`DELETE /v1/datasources/{id}?force=false`；成功后发布事件 `ds.deleted` 并刷新关联缓存。\n  - 回滚：提供最近删除项恢复入口（逻辑删除可迅速恢复）。\n- 校验规则汇总（前端/后端一致）\n  - 名称：必填，唯一，[a-zA-Z0-9\\_-]，长度 1–64。\n  - 类型：必填，枚举值 `mysql|postgres|sqlserver|oracle|clickhouse|hive|kafka|...`。\n  - 账号/密码：必填，长度 1–128；密码强度建议≥中。\n  - IP/主机：必填，IPv4 或域名；端口：必填，1–65535。\n  - 项目：按权限范围可选/必选；标签：0–20 个，单个长度≤32。\n  - 描述/备注：≤2000 字符；所有文本去除首尾空格。\n- 审计与权限\n  - 所有新增/编辑/测试/删除操作记录审计日志（actor、action、target、payload 摘要、结果）。\n  - 权限：仅具备项目权限与模块操作权限的用户可进行相应操作；凭据脱敏展示。\n\n##### 4.2.1.6 关键算法（可选）\n\n##### 4.2.1.7 人机交互\n\n---\n\n#### 4.2.2 元数据管理\n\n- 定位与范围：统一采集、管理与服务化企业级元数据，覆盖系统/库/模式/表/字段/作业、模型与指标等实体及其关系（血缘/版本/标签/所有者/权限）。\n- 目标与作用：构建“权威元数据源”，为检索与目录、血缘与影响分析、标准治理与质量治理、资产地图与数据服务提供一致的基础能力与接口。\n- 核心能力： \n  - 目录管理与检索：分层组织、全文/条件检索、左树右表视图；支持批量归档与导出。\n  - 元数据采集：数据源扫描、ETL/调度与SQL解析、外部工具导入与人工补录；增量/全量与版本对比。\n  - 版本与变更：快照、差异比对、变更审计与回溯；冲突检测与灰度发布。\n  - 血缘与影响分析：作业/SQL解析构图，支持上/下游遍历与影响域评估、路径高亮与截图导出。\n- 数据来源：连接测试与扫描（库/表/字段）、ETL与调度作业、SQL解析、外部工具（如 Apache Atlas/Glue）导入、人工补录与批量导入。\n\n---\n\n##### 4.2.2.1 元数据目录\n\n###### 4.2.2.1.1 模块描述\n\n- 定位与作用：作为企业级元数据的统一目录与导航入口，提供分层组织与高效检索，串联实体详情、血缘与影响分析、版本差异与导出能力，支撑跨模块协同与治理。\n- 视图与交互：左树右表结构+检索栏；支持列表/卡片视图切换、详情抽屉/页面、血缘弹窗、版本比对视图与批量导出。\n\n###### 4.2.2.1.2 功能组成\n\n- 元数据列表：支持列表/卡片视图、关键字/条件筛选（主题域/系统/库/表/类型/更新时间/负责人等）、分页与排序；行级快捷操作（查看详情/收藏/归档/导出）；状态标识（新/变更/下线）。\n- 元数据详情： \n  - 技术元数据：库/表/字段属性（类型/长度/主键/索引/是否可空/存储与统计信息等）。\n  - 业务元数据：中文名、业务口径、主题域、所属系统、负责人/所有者、标签、重要级别、保密级别、备注与变更记录。\n  - 字段详情：字段名、字段注释、数据类型、长度/精度、是否可空、默认值、是否主键。\n  - 交互形态：详情页/抽屉，Tabs（概览/技术/业务/字段/血缘/版本）。\n- 元数据编辑（业务元数据）：仅编辑业务元数据（中文名/业务口径/主题域/标签/负责人/重要级别/备注等）；变更二次确认与可回滚。\n- 血缘关系：展示上游/下游血缘与影响范围；支持层级/类型过滤、路径高亮、节点折叠与截图导出；从血缘节点跳转相关实体详情。\n- 导出：支持批量导出目录实体（库/表/字段）为 CSV/Excel 格式，包含所有元数据字段。\n\n###### 4.2.2.1.3 处理流程\n\n![元数据目录处理流程](./images/metadata-ingestion-flow.svg)\n\n- 元数据采集（技术元数据）：数据源 → Atlas/DataHub Connector → 解析/抽取（Schema/SQL/Job/Lineage/Stats） → 推送至元数据仓库。\n- 仓库入库与事件：统一技术元模型入库 → 构建索引/版本/血缘 → 发布事件 `metadata.created/updated`、`lineage.updated`。\n- 业务元数据维护：用户在“元数据编辑”提交 → 服务端校验 → 入库（审计记录与可回滚，不参与采集）。\n- 目录与详情展示：目录服务读取仓库 → 检索聚合/分页 → 前端列表/卡片 → 详情页按需拉取技术/业务/字段与血缘。\n\n###### 4.2.2.1.4 数据流图（可选）\n\n###### 4.2.2.1.5 关键算法\n\n###### 4.2.2.1.6 设计实现\n\n实现要点（按“列表/编辑/血缘/详情”展开，含展示元素、筛选与操作）\n\n- 元数据列表（展示元素 / 筛选条件 / 行级操作） \n  - 展示元素：名称（高亮命中）/类型/所属系统/数据源/主题域/更新时间/热度（引用次数或hot_score）/标签（Badge）/状态。\n  - 筛选条件：关键字（模糊命中 name/full_name/tags）/类型（多选）/主题域（多选）/所属系统/数据源/更新时间范围/状态/标签（多选）；排序：`hot_score|updated_at`；分页与每页条数；支持“清空筛选”“保存筛选方案”。\n  - 行级操作：查看详情、编辑业务元数据、查看血缘（上下游）、复制全名、快速添加/移除标签、导出实体。\n  - 接口：`GET /v1/metadata/catalog?keyword=&domain=&system=&datasource=&type=&updatedFrom=&updatedTo=&sort=hot|updated_at&page=1&pageSize=20`；返回 `{items,page,total}` 并包含高亮与分数。\n- 元数据编辑（业务元数据） \n  - 可编辑项：中文名、业务口径、主题域、标签（多选）、负责人、重要级别、备注、业务状态（在架/下架/归档）。\n  - 不可编辑：技术名称/类型/所属数据源/系统（源自采集的技术元数据，仅阅读）。\n  - 校验：必填与长度/字符集；主题域与标签存在性；负责人合法性；重复中文名提示但允许保存（与技术名解耦）。\n  - 接口：`PUT /v1/metadata/entities/{id}/business`（Body 携带编辑项与 `version`）；回滚：`POST /v1/metadata/entities/{id}/business/rollback`。\n- 元数据血缘（上下游） \n  - 视图：上下游切换（`upstream|downstream`）、深度 1..5、图/列表双视图；过滤节点类型（table/view/job）；路径高亮与节点折叠。\n  - 接口：`GET /v1/metadata/lineage/graph?entityId={id}&direction=up|down&depth=1..5&filter=table|job`；返回 `nodes/edges/stats`。\n- 元数据详情（技术/业务/字段属性） \n  - 技术元数据：类型、全名、所属系统/数据源、版本、更新时间、状态；采集信息（最近采集时间/任务ID/采集版本）；统计（行数/存储大小/分区信息，按类型可选）。\n  - 字段属性（技术）：字段名/类型/是否主键/是否敏感/注释；字段列表支持列筛选与排序。\n  - 业务元数据：中文名、业务口径、主题域、标签、负责人、重要级别、备注、业务状态；来源为“元数据编辑”记录，可审计与回滚。\n  - 接口：`GET /v1/metadata/entities/{id}?include=technical,fields,versions`、`GET /v1/metadata/entities/{id}/business`。\n- 导出与一致性 \n  - 导出：`POST /v1/metadata/catalog/export`（携带当前筛选）→ 异步任务；进度 `GET /v1/exports/{jobId}`；下载 `GET /v1/exports/{jobId}/download`（签名 URL）。\n  - 一致性：采集/编辑事件驱动索引刷新；读侧缓存命中则返回；收到相关事件失效缓存；最终一致可观测。\n\n###### 4.2.2.1.7人机交互\n\n---\n\n##### 4.2.2.2 元数据采集\n\n###### 4.2.2.2.1 模块描述\n\n元数据采集模块负责从配置的数据源中定期或手动提取技术元数据（如库/表/字段结构、统计信息、血缘关系等），并推送至元数据仓库，形成统一的元数据资产基础。支持多种数据源类型（关系型数据库、NoSQL、文件系统、大数据平台等），采用插件化架构以便扩展。采集过程强调增量采集、错误重试与监控告警，确保数据新鲜度和完整性。与元数据目录模块紧密协作，提供采集后的技术元数据供目录浏览与编辑使用。\n\n###### 4.2.2.2.2 功能组成\n\n- 采集任务管理：创建/编辑/删除采集任务，配置数据源、采集范围（库/表/字段级别）、调度策略（定时/手动/事件触发）、采集类型（全量/增量）。\n- 采集执行与监控：任务调度执行、进度监控、日志查看、错误重试与告警通知。\n- 插件扩展：支持多种数据源插件（JDBC、Kafka、HDFS等），插件注册与版本管理。\n- 增量检测：基于时间戳/变更日志的增量采集机制。\n- 集成与通知：采集完成后发布事件通知下游模块（如目录索引刷新、血缘分析）。\n\n###### 4.2.2.2.3 处理流程\n\n![元数据采集流程图](./images/metadata-collection-flow.svg)\n\n采用开源工具（如DataHub）后，处理流程简化如下：\n\n- 任务调度：使用DataHub调度器触发采集任务，校验数据源连接。\n- 元数据摄取：通过DataHub的Ingestion Framework从数据源提取元数据，支持全量或增量模式。\n- 数据同步：将采集的元数据转换为平台统一模型，并推送至元数据仓库。\n- 监控与异常处理：利用DataHub的监控工具跟踪进度，处理错误并发送告警。\n\n###### 4.2.2.2.4 数据流图\n\n（可选，可后续补充数据源 → 采集器 → 转换器 → 仓库的数据流向图，标注数据格式与转换点。）\n\n###### 4.2.2.2.5 关键算法\n\n- 增量采集算法：使用时间戳比较或变更日志订阅，实现 O(1) 变更检测；结合哈希校验避免重复推送。\n- 血缘解析算法：SQL解析（ANTLR/JSQLParser）提取表/字段依赖，构建DAG图；支持跨源血缘（Job调度日志）。\n\n###### 4.2.2.2.6 设计实现\n\n为提升元数据采集的灵活性和可扩展性，本模块将整合DataHub作为核心采集引擎，利用其流式架构和丰富的连接器生态来处理多种数据源。DataHub的选择基于其实时元数据处理能力、社区活跃度和与现代数据栈的兼容性（相较于Apache Atlas更侧重Hadoop生态）。整合策略包括：使用DataHub的Ingestion Framework替换自定义插件机制，通过自定义Source/Sink适配平台数据源和仓库；保留原有接口，但后端代理到DataHub的REST API或Python SDK；增量采集借助DataHub的Stateful Ingestion支持。\n\n- 任务管理接口：`POST /v1/ingestion/tasks` 创建任务（Body: datasourceId, scope, schedule, type），代理到DataHub的Recipe配置；`GET /v1/ingestion/tasks/{id}` 详情，从DataHub查询执行状态；`PUT /v1/ingestion/tasks/{id}` 编辑，更新DataHub Recipe；`DELETE /v1/ingestion/tasks/{id}` 删除（需无运行实例，调用DataHub删除Pipeline）。\n- 执行与监控：`POST /v1/ingestion/tasks/{id}/run` 手动触发，调用DataHub的Ingestion Run API；`GET /v1/ingestion/tasks/{id}/status` 进度（progress, logs, errors），从DataHub获取实时日志；`GET /v1/ingestion/tasks/{id}/history` 历史执行记录，查询DataHub的Run History。\n- 插件机制：借助DataHub的Source Connectors（JDBC、Kafka等）替换自定义IngestionPlugin；自定义Connector通过DataHub Python SDK开发并注册；版本管理集成DataHub的Pipeline版本控制。\n- 增量实现：利用DataHub的Stateful Ingestion维护状态（last_ingested_at, watermark），支持增量查询如 `WHERE updated_at > last_watermark`；与平台快照表同步。\n- 集成点：采集完成后，通过DataHub的Metadata Change Events（MCE）发布事件（metadata.ingested）携带 entityUrns；下游模块订阅DataHub的Kafka Topic刷新缓存/索引。\n- 性能与可靠性：异步执行借助DataHub的Airflow/DAG整合；重试机制配置DataHub的Retry Policy（maxAttempts=3, backoff=exponential）；监控指标（success_rate, duration, ingested_count）通过DataHub的Telemetry暴露到Prometheus。\n- 备选方案：若需Hadoop-centric治理，可切换到Apache Atlas，通过其Hook/Bridge机制采集元数据，并映射到平台模型；但优先推荐DataHub以支持更广泛的数据源。\n\n###### 4.2.2.2.7 人机交互\n\n---\n\n#### 4.2.3 数据标准管理\n\n本模块按照 PRD 4.5（数据标准管理）要求进行设计与实现，覆盖词根管理、字段级标准、模型命名标准、表命名标准以及标准建模五个子模块，形成“标准定义 → 标准执行 → 度量反馈 → 标准优化”的闭环治理能力。\n\n---\n\n##### 4.2.3.1 词根管理\n\n###### 4.2.3.1.1 模块描述\n\n- 功能描述：统一管理数据资产中的“词根”，作为命名规范的基础组成单元，支撑模型/表/字段命名生成与一致性治理。提供新增/编辑、导入/导出、搜索筛选、左侧树导航、右侧列表分页与影响分析。与命名标准、字段级标准形成内聚协同，确保口径一致与可追踪。\n\n###### 4.2.3.1.2 功能组成\n\n- 功能组成： \n  - 左侧类目树：按主题域/目录/类别分层导航与筛选。\n  - 词根列表：分页展示，支持批量选择与批量操作。\n  - 词根维护：支持新增、编辑、启用/禁用、删除全流程。\n  - 导入/导出：基于标准 Excel 模板，支持导入与导出。\n  - 影响分析：统计字段与数据元引用及影响范围。\n- 协同机制：词根变更 → 触发命名规则与依赖对象一致性校验 → 推送影响提示 → 审批通过后生效并记录审计。\n\n###### 4.2.3.1.3 处理流程\n\n- 输入：用户操作（新增/编辑/导入）、筛选条件；系统引用关系（命名规则、模型/表/字段）。\n- 流程：\n  1. 新增/编辑提交 → 服务端进行唯一性与规范校验 → 通过后入库；\n  2. 导入 Excel → 模板解析与逐条校验 → 通过项批量入库，失败项返回定位与重试指引；\n  3. 变更前触发影响分析 → 弹窗展示受影响对象与数量 → 二次确认；\n  4. 生效后更新缓存与索引，并推送审计日志。\n- 可视化：词根管理流程图（images/root-management-flow.svg）；状态机图（启用/禁用/删除与引用约束，images/root-state-machine.svg）。\n\n  配图：\n\n  ![词根管理流程图](./images/root-management-flow.svg)\n\n###### 4.2.3.1.4 数据流图（可选）\n\n###### 4.2.3.1.5 设计实现\n\n本节按“新增、编辑、启用禁用、删除、导出”五类操作阐述要素信息、约束规范、接口契约与处理逻辑，并补充并发一致性、审计事件、权限与性能策略。\n\n- 统一校验规范（后端与前端一致）\n  - 唯一性：编码全局唯一；中文名称在主题域范围内建议唯一（可配置）。\n  - 规范性：编码仅允许小写字母、数字与下划线，长度 2-32；中文名称 1-32；英文名称 2-64。\n  - 保留与冲突：禁止使用保留词（例如 db、tbl），同义词不能与其他词根的主名或同义词冲突。\n  - 引用约束：删除与归档需满足“无引用”守卫；禁用允许但需提示已有引用影响。\n  - 状态机：启用 ↔ 禁用；禁用 → 归档（需无引用）；归档 → 删除（需无引用且审批）。\n  - 版本与并发：采用版本号字段进行乐观锁；编辑需校验 If-Match（实体标签，ETag）或版本号。\n- 新增流程（POST /create）\n  - 输入要素：编码、中文名称、英文名称（可选）、主题域ID、类别ID、分隔符（可选）、同义词（可选）、描述、示例（可选）。 \n    - 处理步骤： \n      1. 规范与唯一性校验 → 保留词检查 → 同义词冲突检查；\n      2. 入库（默认状态为禁用）→ 写入变更日志；\n      3. 发布“词根创建”事件 → 刷新检索索引与缓存；\n      4. 返回详情与审计关联ID。\n  - 交互要点：成功后提供“立即启用”与“创建命名规则”引导。\n- 编辑流程（PUT /{id}）\n  - 可编辑字段：中文名称、英文名称、主题域ID、类别ID、分隔符、同义词、描述、示例；不支持修改编码。 \n    - 处理步骤： \n      1. 版本与并发校验 → 唯一与规范校验；\n      2. 影响分析（统计使用引用记录，提示受影响对象数量）→ 二次确认；\n      3. 更新入库 → 记录变更日志；\n      4. 发布“词根更新”事件 → 刷新索引与缓存。\n  - 交互要点：编辑提交前弹窗展示影响对象清单与数量，支持导出影响列表。\n- 启用与禁用流程（PATCH /{id}/status）\n  - 启用：校验状态不可为“已归档”或“已删除”；校验必填要素完整；通过后切换状态并发布“词根启用”事件。\n  - 禁用：允许存在引用，但需提示对命名生成与校验的影响；切换后发布“词根禁用”事件。\n  - 后置处理：刷新缓存与索引，更新启用度量（可选）。\n- 删除流程（DELETE /{id}，软删除）\n  - 守卫：需满足“无引用”才允许删除；否则引导“禁用或归档”，并提供解绑指引与批量替换建议。\n  - 处理步骤：标记删除时间并切换状态为删除 → 记录日志 → 发布“词根删除”事件 → 索引与缓存清理。\n  - 恢复策略：仅归档状态可恢复为禁用；已删除不支持直接恢复（需重新创建）。\n- 导出流程（POST /export）\n  - 输入要素：筛选条件（主题域ID、类别ID、状态、时间范围、关键词）、导出格式（CSV、XLSX）、列选项。\n  - 处理步骤：服务端按条件查询 → 流式导出（大数据量） → 字段值转义与规范化（分隔符、特殊字符） → 生成文件 → 审计记录。\n  - 输出列建议：编码、中文名称、英文名称、主题域、类别、分隔符、同义词、状态、更新时间、使用次数。\n  - 交互要点：提供“当前筛选导出”与“全部导出”，展示预计条数与耗时提示。\n- 异常处理与错误码（示例）\n  - 示例错误：编码已存在、名称冲突、保留词冲突、状态冲突、存在引用、版本不匹配、导出数据量过大、导入模板无效。\n  - 返回建议与定位信息：冲突对象、错误行号与列号、替代建议。\n\n###### 4.2.3.1.6 关键算法（可选）\n\n- 影响分析计算：对使用引用记录进行分组聚合与差异比较，复杂度 O(n)；对高并发变更采用批处理与队列削峰。\n\n###### 4.2.3.1.7 人机交互\n\n---\n\n##### 4.2.3.2 数据元标准\n\n###### 4.2.3.2.1 模块描述\n\n- 功能描述：统一管理数据元（编号、定义、类型、长度/精度、值域、命名标准、代码值、单位与状态），支撑字段层面的一致性与复用；提供新增、编辑、发布/撤销发布与删除的受控状态流转。\n\n###### 4.2.3.2.2 功能组成\n\n- 子功能：新建/编辑数据元、搜索与筛选（类型/发布状态）、列表分页、详情查看、导出。\n- 协同机制：数据元发布后可被模型/表/字段引用；撤销发布后触发依赖对象校验与提示。\n\n###### 4.2.3.2.3 处理流程\n\n本节提供“新增、编辑、发布/撤销发布、删除”的综合流程图与说明，作为产品设计与研发实现的统一参照。\n\n![数据元标准-综合流程图](./images/element-standard-operations-flow.svg)\n\n- 新增（创建）：填写表单 → 规范与唯一性校验（编码/名称/数据类型/长度/精度/值域） → 入库（默认“未发布+启用”） → 审计日志 → 刷新索引与缓存 → 返回详情与后续引导（发布/绑定引用）。\n- 编辑：加载详情 → 并发与版本校验（If-Match/版本号） → 修改项校验（唯一性/类型一致性/值域） → 影响分析（引用对象计数与清单） → 二次确认 → 入库更新 → 审计差异 → 刷新索引与缓存。\n- 发布：状态检查（仅启用可发布） → 完整性校验 → 切换为“已发布+启用” → 事件（element.published） → 刷新索引与缓存 → 通知引用方可用。\n- 撤销发布：检查当前状态（已发布） → 影响分析与二次确认 → 切换为“未发布+启用” → 事件（element.unpublished） → 通知引用方（替代或兼容策略）。\n- 删除：检查引用关系（必须“无引用”）与状态（仅禁用可删） → 二次确认 → 软删除（记录操作者与时间） → 事件（element.deleted） → 清理索引与缓存。\n\n注：如需状态机配图，可后续补充统一状态机图（启用/禁用/发布/撤销发布/归档/删除），此处暂以流程图为主。\n\n###### 4.2.3.2.4 数据流图（可选）\n\n###### 4.2.3.2.5 设计实现\n\n本节从“输入与输出、展示要素、约束与校验、并发与权限、索引与缓存、审计与事件、错误码与接口契约”七方面，给出数据元标准的可落地实现设计；流程参考 4.2.3.2.3 的综合流程图。\n\n- 输入与输出 \n  - 新增（创建） \n    - 输入（表单/接口）：编码`code`、中文名`name_cn`、定义`definition`、类型`data_type`、长度`length`、精度`precision`、值域（数值：`value_min`/`value_max`；枚举：`code_set_id`）、命名规则`naming_rule_id`、单位`unit`、备注`description`、启用状态`enable_status`。\n    - 约束：`code`唯一；类型-长度/精度矩阵合法；值域与定义语义一致；必填项完整。\n    - 输出：返回详情（含`id`、`publish_status=unpublished`、`enable_status=enabled`）、审计记录ID；刷新检索索引与缓存。\n  - 编辑 \n    - 输入：`id`、允许编辑项（除`code`外）、并发控制`version`或HTTP头`If-Match`（ETag）。\n    - 约束：已发布编辑需二次确认并出具影响分析报告（引用对象计数与清单）；类型/长度/精度与值域一致性校验。\n    - 输出：差异列表（before/after）、审计记录ID、索引与缓存刷新状态。\n  - 发布 \n    - 输入：`id`；前置条件：`enable_status=enabled`、要素完整（编码/中文名/类型/长度/精度/值域/单位/定义等）。\n    - 输出：状态切换为`published`；事件`element.published`；通知引用方可用（异步）。\n  - 撤销发布 \n    - 输入：`id`；前置条件：当前状态为`published`。\n    - 输出：状态切换为`unpublished`；事件`element.unpublished`；提示替代或兼容策略（版本锁/替代项建议）。\n  - 删除（软删除） \n    - 输入：`id`；前置条件：`enable_status=disabled`、引用计数为0。\n    - 输出：软删除（记录操作者与时间戳）、事件`element.deleted`；清理索引与缓存。\n- 展示要素与交互状态 \n  - 列表页（展示元素/筛选与排序/行级操作） \n    - 展示元素：编码、中文名、类型、长度/精度、值域摘要（范围/代码集）、发布状态、启用状态、更新时间、引用计数。\n    - 筛选条件：关键字、类型、发布状态、启用状态、主题域、代码集、更新时间范围；排序：更新时间/引用计数；分页与每页条数。\n    - 行级操作：查看详情、编辑、发布/撤销发布、启用/禁用、删除、导出影响清单。\n  - 详情页/抽屉（Tabs：概览/要素与约束/引用与影响/审计与事件/版本） \n    - 概览：名称/编码/定义/单位/类型/长度/精度/值域/状态；状态 Chips 与工具提示（不合法状态给出原因）。\n    - 要素与约束：类型-长度/精度矩阵、值域规则与代码集绑定、命名规则与单位说明。\n    - 引用与影响：引用对象列表（字段/模型/表）、引用计数、导出影响清单（CSV）。\n    - 审计与事件：时间线视图，支持动作筛选与导出。\n    - 版本：版本号与变更摘要，支持最近版本对比。\n  - 编辑表单 \n    - 字段分组：基本信息、类型与长度、值域、命名与单位、备注。\n    - 动态校验：跟随类型变化展示长度/精度与值域控件；枚举型显示代码集选择器；数值型显示最小/最大值。\n    - 引导：保存成功后引导“发布/绑定引用”。\n- 约束与校验 \n  - 唯一性：`code`全局唯一；重复提示包含定位信息与替代建议。\n  - 类型-长度/精度矩阵： \n    - 数值型：`length`/`precision`合规；`value_min`≤`value_max`。\n    - 字符型：`length`为正且符合字符集；不支持`precision`。\n    - 日期/时间型：不需要`length/precision`；格式说明与示例。\n    - 布尔/枚举：布尔无需长度；枚举必须绑定`code_set_id`。\n  - 值域一致性：定义与值域语义一致；枚举项与定义关键字匹配建议与提示。\n  - 状态机约束：仅允许合法路径（启用/禁用、发布/撤销发布、归档、删除），非法动作阻断并提示原因。\n  - 并发与版本：乐观锁（`version`/`If-Match`）；冲突返回`409 CONFLICT`并提示重试路径（刷新/合并）。\n  - 权限门禁：按角色/域配置细粒度动作权限（新增/编辑/发布/撤销/启用/禁用/删除/导出）。\n- 索引与缓存策略 \n  - 索引字段：编码、中文名、类型、主题域、更新时间、发布/启用状态、标签；支持拼音与同义词召回。\n  - 缓存：列表与详情缓存；TTL + 主动失效；按事件驱动刷新（published/unpublished/updated/deleted）。\n- 错误码与提示（示例） \n  - `STD_001` 编码已存在；`STD_002` 类型与长度/精度不合法；`STD_003` 值域不合法；`STD_004` 非启用状态不可发布；\n  - `STD_005` 已发布不可删除；`STD_006` 存在引用不可删除；`STD_007` 并发冲突请重试；`STD_008` 要素不完整不可发布。\n\n###### 4.2.3.2.6 关键算法（可选）\n\n###### 4.2.3.2.7 人机交互\n\n---\n\n##### 4.2.3.3 代码标准\n\n###### 4.2.3.3.1 模块描述\n\n- 功能描述：以“代码集-代码值”结构管理值域标准，支持左树右表、新增/编辑/删除、导入/导出、拖拽排序与分页浏览，确保跨系统编码一致与值域规范。\n\n###### 4.2.3.3.2 功能组成\n\n- 子功能：代码集维护、代码值维护（新增/编辑/删除/排序）、搜索与筛选、导入/导出、分页。\n- 协同机制：数据元引用代码集；代码集变更触发数据元合法性复核与通知。\n\n###### 4.2.3.3.3 处理流程\n\n- 可视化：\n\n  ![代码标准维护流程图](./images/code-standard-flow.svg)\n- 输入：用户操作（新增/编辑/删除/排序/导入/导出）与筛选条件；系统引用关系（数据元引用代码集）。\n- 流程说明\n  - 新增（代码集/代码值） \n    - 新建代码集：填写名称/域/描述 → 唯一性校验（`name+domain`）→ 入库（记录`sort_order`初始值）→ 事件`element.code_set.created` → 刷新索引与缓存。\n    - 新增代码值：选择代码集 → 填写`code/name/sort_order` → 唯一性校验（`set_id+code`）与排序合法性 → 入库 → 事件`element.code_value.created` → 刷新索引与缓存。\n  - 编辑（代码集/代码值） \n    - 编辑代码集：变更`name/description/domain/sort_order` → 冲突与唯一性校验 → 更新 → 事件`element.code_set.updated` → 索引与缓存刷新。\n    - 编辑代码值：允许变更`name/sort_order`（`code`如需变更，需唯一性复核与高风险提示）→ 更新 → 事件`element.code_value.updated` → 索引与缓存刷新。\n  - 删除（代码集/代码值） \n    - 删除代码值：二次确认 → 检查是否被数据元引用（存在引用则阻断并提示替代建议）→ 通过则删除 → 清理索引与缓存 → 事件`element.code_value.deleted`。\n    - 删除代码集：二次确认 → 检查是否包含代码值或被数据元引用 → 任一为真则阻断并提示；均为假则删除 → 清理索引与缓存 → 事件`element.code_set.deleted`。\n  - 排序与导入/导出 \n    - 导入/导出：Excel模板解析与字段校验（必填/类型/重复）→ 批量入库或拒绝（错误定位与行号提示）→ 索引与缓存刷新；导出按当前筛选或选中代码集。\n\n###### 4.2.3.3.4 数据流图（可选）\n\n###### 4.2.3.3.5 设计实现\n\n- 输入与输出 \n  - 接口分层：`/api/standards/code-sets`（代码集）与`/api/standards/code-values`（代码值）。 \n    - 查询：支持分页/排序/筛选（域`domain`、启用`enabled`、关键词）。\n    - 新增：代码集与代码值分别提供新增接口，返回资源`id`与`version`；批量导入支持一次性校验与事务写入。\n    - 编辑：基于乐观锁（`If-Match: <version>`）提交差异字段变更；支持代码值的重命名与排序调整。\n    - 删除：代码值可删除（需引用校验通过）；代码集删除需为空集且无外部引用。\n    - 排序：拖拽触发批量更新`sort_order`（稳定重排），返回新的版本戳。\n    - 导入/导出：Excel模板上传解析后进行字段/重复/引用校验；导出按当前筛选或选中集合生成文件。\n  - 关键字段（示例）： \n    - 代码集：`id, code, name, description, domain, version, enabled, sort_order, created_at, updated_at`。\n    - 代码值：`id, code_set_id, code, name, description, sort_order, enabled, metadata, version`。\n  - 事件输出：`element.code_set.created/updated/deleted`，`element.code_value.created/updated/deleted`；用于索引刷新与缓存失效。\n- 展示要素与交互状态 \n  - 左侧树：代码集列表（域/启用状态筛选、关键词搜索），支持新增/编辑/删除与排序；显示引用计数与启用标记。\n  - 右侧表：代码值列表（支持分页/排序/多选），列包含`code/name/sort_order/enabled/description`；行内编辑与拖拽排序。\n  - 表单： \n    - 代码集：`code`（只读或受控变更）、`name`、`domain`、`description`、`enabled`、`sort_order`。\n    - 代码值：`code`（默认不可变，需高风险确认才允许变更）、`name`、`description`、`enabled`、`sort_order`、`metadata`（JSON）。\n  - 状态提示：保存中/并发冲突/校验失败/存在引用不可删除/导入错误定位（行号与原因）。\n  - 交互守护：未保存变更离开提醒；批量操作进度与失败重试；权限不足指示与申请通道。\n- 约束条件与校验 \n  - 唯一性： \n    - 代码集：`(domain, code)`唯一。\n    - 代码值：`(code_set_id, code)`唯一。\n  - 引用完整性： \n    - 代码值删除需确认无数据元引用；代码集删除需无代码值且无数据元引用。\n  - 不变性策略： \n    - 默认`code`不可变；如需变更，走高风险流程（二次确认+引用影响分析+审计）。\n  - 字段校验：长度/字符集/必填/类型；`sort_order`为非负整数；`metadata`为JSON对象。\n  - 导入校验：模板必填列（`domain/code_set_code/code_set_name/code/code_name/sort_order`）、重复检测、非法字符、引用检测；错误按行号与字段返回。\n- 并发与版本控制 \n  - 乐观锁：资源携带`version`；编辑与排序批量提交头`If-Match`；冲突返回`409 CONFLICT`并附带最新`ETag`与合并建议。\n  - 幂等性：导入/排序批量接口通过请求幂等键（`Idempotency-Key`）避免重复提交；安全失败可重试。\n- 索引与缓存 \n  - 索引： \n    - 代码集：按`domain`、`enabled`、关键词（`code/name/description`）。\n    - 代码值：按`code_set_id`、关键词、`enabled`、`sort_order`。\n  - 缓存：常用代码集与其代码值聚合缓存（域级与集合级）；事件驱动失效与预热；分页列表采用只读短TTL缓存。\n- 错误码与提示（示例） \n  - `CST_001` 代码集重复；`CST_002` 代码值重复；`CST_003` 排序非法；`CST_004` 存在引用不可删除；`CST_005` 模板校验失败；`CST_006` 并发冲突；`CST_007` 权限不足。\n- 导入/导出模板 \n  - 列头：`domain, code_set_code, code_set_name, code, code_name, sort_order, enabled, description`。\n  - 校验：模板列完整、类型与范围正确、重复行与重复`code`检测、非法字符与长度限制、引用关系检查；失败逐行返回错误说明与列名。\n- 测试要点 \n  - 单元：唯一性校验、引用禁止删除、排序稳定性、模板解析与错误定位。\n  - 并发：版本冲突与幂等重试、批量排序一致性。\n  - 权限：不同角色操作覆盖与审计记录完整性。\n  - 性能：分页查询与缓存命中、批量导入写入与回滚路径。\n\n###### 4.2.3.3.6 关键算法\n\n###### 4.2.3.3.7 人机交互\n\n---\n\n##### 4.2.3.6 标准建模\n\n###### 4.2.3.6.1 模块描述\n\n- 核心逻辑：以建立“标准逻辑模型”（主题域/模型/表/字段）为主，沉淀可复用的逻辑模型库；支持物化能力，可基于逻辑模型一键生成或同步物理表/视图/数据集，并与标准映射、校验与差异报告联动，推动标准落地。\n\n###### 4.2.3.6.2 功能组成\n\n- 子功能： \n  - 模型管理（增删改查）：新建/编辑/删除/详情、启用/禁用、分页查询与筛选；\n  - 物化生成与同步：基于逻辑模型生成/更新物理表；可选择目标数据源与Schema；\n  - 标准映射：字段对齐、数据元/代码集绑定、命名规则绑定；\n\n###### 4.2.3.6.3 处理流程\n\n图示：\n![标准建模处理流程](./images/standard-modeling-flow.svg)\n\n###### 4.2.3.6.4 数据流图（可选）\n\n###### 4.2.3.6.5 设计实现\n\n- 输入与输出设计\n  - 输入（前端/用户）： \n    - 选择模型/表（模型目录与元数据详情）；\n    - 字段级标准映射（选择数据元/代码集，支持绑定/解绑/批量操作/智能推荐）；\n    - 命名规则绑定（选择分层/域规则，预校验命名一致性）；\n    - 批量校验触发（选择校验范围与策略）；\n    - 导入模板（CSV/Excel/JSON）批量映射；\n    - 版本标记/发布/撤销（含灰度与生效范围）。\n  - 输出（系统/页面）： \n    - 覆盖/合规进度、缺陷清单与建议；\n    - 字段级校验结果与高亮提示（类型/长度/代码集/命名一致性）；\n    - DDL 建议与重命名建议（预览与复制）；\n    - 差异报告（与上版对比，支持导出）；\n    - 审计事件与操作结果（成功/失败与错误码）。\n- 展示要素与交互状态\n  - 布局： \n    - 左侧筛选与选择区（模型/表选择、过滤条件、搜索关键字）；\n    - 中部字段映射区（字段列表 + 标准元素/代码集绑定控件 + 行级操作）；\n    - 右侧预览区（覆盖/合规进度、DDL 建议、校验摘要、发布操作）。\n  - 交互状态： \n    - 行级状态：未映射/已映射/校验通过/校验失败（类型/长度/代码集/命名）；\n    - 批量操作：全选/按条件选/智能推荐补齐；\n    - 预览联动：绑定/解绑、命名规则切换、类型映射策略变更后实时刷新；\n    - 发布状态：草稿/验证中/部分合规/合规/已发布；支持撤销与灰度窗口。\n- 处理流程（与 4.2.3.6.3 对齐）\n  1. 逻辑建模/模型登记 → 加载字段与上下文；\n  2. 字段标准映射（数据元/代码集）→ 绑定/解绑/批量/推荐；\n  3. 命名规则绑定 → 预校验命名一致性与冲突；\n  4. 批量校验执行 → 生成校验结果与度量；\n  5. 差异报告与优化建议 → 行级修复/批量补齐；\n  6. 映射版本存档与对比 → 版本标签/回滚；\n  7. 发布/撤销（灰度）→ 审计与联动整改闭环。\n- 校验与约束（规则清单）\n  - 类型兼容：源字段类型需与标准元素类型兼容（如 string↔varchar，int↔integer）；\n  - 长度/精度：字符长度与数值精度需满足标准元素声明的上限与范围；\n  - 代码集值域：绑定代码集时，需验证值域与枚举一致性（含别名与大小写策略）；\n  - 必填/可空：标准元素标记为必填时，字段不可为空（或需提供默认与修复策略）；\n  - 命名一致性：表/字段命名需与绑定的命名规则一致，冲突需提供替代建议；\n  - 唯一性：标准映射同一字段仅允许一个有效数据元绑定；\n  - 版本一致：不同版本规则在同一映射集内需保持可解释一致/隔离；\n  - DDL 生成：建议变更不得破坏现有索引/约束，需提供安全迁移脚本；\n  - 导入模板约束：列名/类型/枚举值需合法，重复映射需显式覆盖标记；\n  - 发布门槛：覆盖率与合规率需达到阈值（可配置），阻断项需清零。\n- 并发与一致性\n  - 乐观锁：mapping_set 与 mapping_entry 采用 entityVersion/ETag，防止并发覆盖；\n  - 幂等：绑定/解绑与发布操作支持幂等键（Idempotency-Key）；\n  - 行级锁：必要时对单字段映射采用短暂行锁，避免热点写入冲突；\n  - 事件一致：采用 Outbox + Kafka，校验结果与度量异步下发，保证最终一致；\n  - 去重与退避：批量导入时对重复项去重，失败按指数退避重试。\n- 索引与缓存\n  - 索引：ElasticSearch 建立字段/元素/代码集去范式索引（名称/标签/域/更新时间）；\n  - 缓存：映射上下文、命名规则编译产物、代码集值域；TTL + 主动失效；\n  - 失效策略：绑定/解绑/发布后主动失效相关缓存与索引片段；\n  - 分页与排序：统一分页（page/size），排序（更新时间/覆盖率/合规率）。\n- 错误码与消息（示例）\n  - STDMAP-4001 缺失映射项（MissingMapping）\n  - STDMAP-4201 类型不兼容（TypeMismatch）\n  - STDMAP-4202 代码集值域非法（CodeSetInvalid）\n  - STDMAP-4301 命名冲突（NamingConflict）\n  - STDMAP-4401 版本冲突（VersionConflict）\n  - STDMAP-4501 发布条件未满足（PublishForbidden）\n  - STDMAP-4091 重复请求（DuplicateRequest）\n  - STDMAP-5001 内部错误（InternalError）\n- 测试与验收点\n  - 单元测试：类型兼容、长度校验、代码集值域、命名规则一致性；\n  - 集成测试：绑定/解绑流程、批量校验/度量生成、版本存档/回滚、发布/撤销；\n  - 并发与幂等：多用户同时操作下的最终一致与无重复；\n  - 性能：索引检索 P95<200ms，批量校验可并行（队列削峰）；\n  - 可观测：指标/日志/追踪三件套接入，错误码与建议链接可检索；\n  - 安全与权限：对象/字段级权限生效，审计事件完整。\n\n###### 4.2.3.6.6 关键算法（可选）\n\n###### 4.2.3.6.7 人机交互\n\n---\n\n#### 4.2.4 数据质量治理\n\n本模块围绕“质量监控、质量规则库、质量检查任务”三大核心能力构建闭环的数据质量治理体系，严格对齐 PRD 4.3 的规格（质量监控概览、质量规则库、质量检查任务），形成从“规则→任务→执行→指标与评分→质量监控”的端到端治理链路。\n\n---\n\n##### 4.2.4.1 数据质量监控\n\n##### 4.2.4.1.1 模块描述\n\n- 核心功能：提供端到端质量监控大盘，围绕质量评分、异常概览、规则执行与趋势分析，支持快速筛选、图表分析、列表/卡片展示、报告导出与多渠道告警（站内/邮件/IM）。\n- 业务逻辑：汇聚任务执行产生的原子指标（空值率、重复率、延迟等），按源/库/表/字段/主题域/时间维进行聚合与评分；对异常项标注严重级别并提供处理入口；支持按筛选导出概览与明细报告。\n- 定位与作用：作为治理看板，支撑运维与治理决策，连接规则库与任务执行结果，是质量度量与异常处置的统一入口。\n\n###### 4.2.4.1.2 功能组成\n\n- 模块组织结构：\n\n  ![数据质量监控模块组织结构](./images/quality-monitoring-organization.svg)\n- 子功能组成（与协同关系）：\n\n  | 子功能        | 描述                         | 输入/输出           | 交互/协同               |\n  |------------|----------------------------|-----------------|---------------------|\n  | 概览仪表盘      | 规则总数、合格率、当日失败次数、告警数、DQ评分卡片 | 输入聚合指标；输出卡片与提示  | 点击卡片进入详情；与筛选联动      |\n  | 合格率趋势      | 折线展示过去7/30/90天合格率变化        | 输入时间序列指标；输出图表   | 区间切换、缩放、与筛选联动       |\n  | 失败规则次数（按域） | 柱状展示各域失败次数排名               | 输入域维度聚合数据；输出柱状图 | 点击域过滤异常列表与规则列表      |\n  | 快速筛选栏      | 时间范围、数据源、状态、关键字            | 输入筛选条件；输出过滤后的数据 | 驱动图表与列表联动更新；可重置     |\n  | 异常列表与处理    | 展示异常项并提供处理入口               | 输入异常事件集；输出处理动作  | 触发工单创建与状态更新；与告警关闭联动 |\n  | 质量监控规则列表   | 规则名称、类型、运行状态与行级操作          | 输入规则元数据与执行状态    | 管理规则、启/禁用、查看执行记录    |\n\n###### 4.2.4.1.3 处理流程\n\n- 流程图：\n\n  ![数据质量监控流程](./images/quality-monitoring-flow.svg)\n- 步骤说明：\n  1. 接收质量检查任务的原子指标与样本结果。\n  2. 指标聚合：按源/库/表/字段/域/时间维度聚合。\n  3. 质量评分：对完整性/准确性/一致性/及时性进行加权评分（可配置）。\n  4. 异常检测：采用阈值、分位数、滑动窗口/EWMA 检测异常并分级。\n  5. 输出监控大盘、异常列表、告警通知与报告导出。\n\n###### 4.2.4.1.4 数据流图（可选）\n\n- 引用总体 DFD 展示监控模块与指标/告警/报告服务之间的数据流。\n\n###### 4.2.4.1.5 设计实现\n\n- 展示元素（页面结构与组件） \n  - 顶部筛选栏：时间范围（相对/绝对）、数据源/库/表、域/主题、质量规则类型、告警状态、关键字；提供“重置”“应用”操作。\n  - 概览卡片：质量总分、当日检查次数、异常数与处理中数、规则覆盖率；支持趋势箭头、点击联动到对应列表或图表。\n  - 图表洞察： \n    - 趋势折线图（按日/小时质量分、异常计数）；\n    - 异常严重度分布柱状图（critical/high/medium/low）；\n    - 域/数据源维度分解（占比、Top N）。\n    - 交互：缩放、时间窗切换、点击筛选联动。\n  - 异常列表：字段包含来源库表/字段、指标类型（空值率、唯一性、值域等）、观测值/期望阈值、严重度、状态（新建/处理中/已解决/已忽略）、最近检查时间；操作包括“查看详情”“创建处理单”“静默”“关闭”。\n  - 规则运行列表：展示规则名称、类型、最近运行状态、成功/失败次数、平均耗时；支持启停、编辑、查看执行日志（联动质量规则模块）。\n- 流程说明（前后端与服务协作） \n  - 指标接入：离线/实时质量任务上报指标与异常事件，写入指标仓与事件流。\n  - 聚合服务：按筛选条件汇总指标、归档趋势、计算覆盖率，输出仪表盘数据切片并更新缓存。\n  - 评分服务：结合权重对各维度计算质量分（域/源/表/字段），生成总分与分解项。\n  - 异常检测：基于阈值/ EWMA / 分位数判定异常，分级严重度，写入事件流并触发告警。\n  - 仪表盘渲染：前端并行拉取“概览卡片、趋势、分布、列表”数据，Skeleton 与增量刷新，筛选联动触发重拉与局部更新。\n  - 告警触发与处置：达到策略阈值后推送到所选通道；页面支持确认、静默（时间窗）、关闭与备注，状态反写事件仓与审计日志。\n- 错误码（示例） \n  - `QMON-4001` 参数校验失败（时间窗口或筛选条件非法）。\n  - `QMON-4101` 指标数据缺失（可提示缩小时间窗或稍后重试）。\n  - `QMON-4201` 请求范围过大导致超时或被限流（建议分批查询）。\n  - `QMON-4301` 导出任务繁忙或超出并发限制（排队或稍后再试）。\n  - `QMON-4401` 告警策略不合法（参数或通道配置错误）。\n  - `QMON-5001` 服务器内部错误（展示故障页并记录审计）。\n- 测试与验收要点 \n  - 单元：聚合/评分/异常检测边界、阈值策略校验、缓存命中与失效。\n  - 接口：筛选组合正确性、分页一致性、SSE/轮询容错、导出任务生命周期。\n  - 前端：筛选联动、图表交互、虚拟滚动性能、Skeleton与错误态展示。\n  - 性能：热点仪表盘QPS压力、缓存命中率、导出并发下服务器负载与响应时间。\n  - 安全与权限：不同角色操作边界、审计日志完整性与可追溯性。\n\n###### 4.2.4.1.6 关键算法（可选）\n\n###### 4.2.4.1.7 人机交互\n\n---\n\n##### 4.2.4.2 质量规则库\n\n###### 4.2.4.2.1 模块描述\n\n- 核心功能：统一管理所有质量规则，支持规则的创建、编辑、搜索筛选、分页浏览、启用/禁用与导出，供质量检查任务引用。\n- 业务逻辑：以统一规则模型抽象不同类型（完整性/准确性/及时性/一致性/自定义）规则，提供参数模板与多源适配，校验兼容性与唯一性。\n- 定位与作用：作为规则资产的中心仓库，向任务模块提供可复用、可版本化的规则能力。\n\n###### 4.2.4.2.2 功能组成\n\n- 组织结构图：\n\n  ![质量规则库组织结构](./images/quality-rule-library-structure.svg)\n- 子功能组成：\n\n  | 子功能           | 描述                           | 输入/输出          | 交互/协同             |\n  |---------------|------------------------------|----------------|-------------------|\n  | 新增/编辑规则（抽屉表单） | 基础信息、规则类型、适用数据源、参数定义、状态开关、描述 | 输入表单；输出规则记录与版本 | 与唯一性校验、兼容性校验、审计联动 |\n  | 搜索与筛选         | 名称关键词、类型、状态                  | 输入筛选条件；输出规则列表  | 与分页与懒加载联动；行级操作    |\n  | 规则列表与分页       | 列：名称、类型、适用源、参数模板、状态、操作       | 输入规则元数据        | 查看/编辑/启禁/删除/导出    |\n  | 兼容性与适配        | 规则与数据源类型兼容性提示                | 输入源类型与规则类型     | 不支持即高亮标注与说明       |\n  | 导出            | 导出当前筛选的规则                    | 输入筛选视图；输出文件    | 二次确认与进度反馈；审计记录    |\n  | 权限与审计         | 角色权限控制与审计日志                  | 输入操作事件         | 输出审计日志与合规报告       |\n\n###### 4.2.4.2.3 处理流程\n\n**主要处理流程说明：**\n\n- **新增/编辑流程**：\n  - 用户在前端填写规则表单（名称、类型、适用数据源、参数定义等）→ 提交至规则服务\n  - 规则服务接收并解析表单数据 → 校验引擎执行唯一性校验（名称/英文名重复检查）\n  - 通过唯一性校验后 → 执行兼容性校验（规则类型与数据源类型匹配性）\n  - 校验通过 → 保存至 quality_rule 表，创建版本记录，构建搜索索引\n  - 同步记录审计日志，发布规则变更事件至事件总线\n  - 失败时返回具体校验错误信息并在前端定位显示\n- **搜索筛选流程**：\n  - 用户输入搜索条件（名称关键词、类型、状态筛选）→ 规则服务查询处理\n  - 利用索引引擎进行关键词匹配和条件筛选 → 从数据存储检索规则数据\n  - 应用分页排序逻辑 → 返回规则列表结果 → 前端展示\n- **启用/禁用流程**：\n  - 用户切换规则状态 → 规则服务处理状态更新请求\n  - 校验引擎执行影响分析，检查是否有任务依赖该规则\n  - 更新规则状态，记录版本变更 → 缓存状态信息\n  - 记录审计日志，发布状态变更事件，提示影响范围\n- **导出流程**：\n  - 用户触发导出操作 → 规则服务处理导出请求\n  - 校验引擎根据用户权限筛选可导出数据 → 生成导出文件\n  - 存储临时文件 → 返回下载链接 → 记录导出审计事件\n  - 支持进度反馈、失败重试与断点续传机制\n\n**异常处理与回退机制：**\n\n- 校验失败时提供明确错误信息和修改建议\n- 不兼容规则允许保存为禁用状态，并引导用户调整\n- 删除操作检查依赖关系，存在引用时阻止硬删除并提示影响范围\n- 所有关键操作支持审计追踪和必要时的回滚操作\n\n###### 4.2.4.2.4 数据流图（可选）\n\n- 与总体 DFD 的“规则库/规则表/版本”节点一致，支撑任务引用与执行器拉取规则。\n\n###### 4.2.4.2.5 设计实现\n\n- 算法设计： \n  - 表单校验：唯一性、必填、长度与字符集、兼容性矩阵校验。\n  - 规则 DSL → 执行计划：根据数据源类型适配生成 SQL/表达式，支持参数模板展开与校验。\n  - 索引与搜索：基于关键词与类型的倒排索引，分页与懒加载优化。\n- 异常处理： \n  - 名称重复与冲突：明确错误并给出改名建议。\n  - 不兼容规则：高亮提示并允许保存为禁用状态，或引导改为支持源。\n  - 删除与依赖：若被任务引用，阻止硬删除，改为禁用并提示影响范围。\n- 问题与方案： \n  - 多源适配复杂度：抽象统一执行接口与模板引擎，降低源适配耦合；引入单元测试覆盖常见源。\n\n###### 4.2.4.2.6 关键算法（可选）\n\n- 规则编译与适配：模板化 DSL 编译为各源可执行的语句；复杂度取决于参数展开（平均 O(k)），编译缓存提升命中率。\n\n###### 4.2.4.2.7 人机交互\n\n---\n\n##### 4.2.4.3 质量检查任务\n\n###### 4.2.4.3.1 模块描述\n\n- 核心功能：管理质量检查任务，支持任务创建（分步表单）、搜索筛选、列表查看、执行与监控，统一记录执行结果与状态流转，支持失败重试与日志查看。\n- 业务逻辑：任务绑定规则与目标对象范围（库/表/字段），配置执行策略（定时/手动/实时）、并发度与重试策略、失败告警与阈值；执行器拉取规则并编译计划，产出指标与异常事件。\n- 需求映射：完全对齐 PRD 4.3.3 的页面结构（统计卡片、筛选栏、列表与操作、分步弹窗）、权限与审计、性能与可用性（分页、懒加载、异步提示与进度反馈）。\n- 定位与作用：作为质量执行的载体连接规则库与监控大盘，支撑计划性与按需执行。\n\n###### 4.2.4.3.2 功能组成\n\n| 子功能            | 描述                                             | 输入/输出          | 交互/协同            |\n|----------------|------------------------------------------------|----------------|------------------|\n| 分步创建（步骤1：基础信息） | 名称、目标源与对象范围（库/表选择）、执行策略（定时/手动/实时）、并发度、重试、失败告警  | 输入表单；输出任务草稿    | 与规则选择与参数绑定联动     |\n| 分步创建（步骤2：选择规则） | 左侧规则列表（类型徽章、搜索与选择）、右侧参数输入区（模板生成控件）、已选规则汇总与校验提示 | 输入规则与参数；输出绑定关系 | 兼容性与参数校验；保存后更新列表 |\n| 任务列表与筛选        | 名称、数据源、执行状态（待执行/执行中/成功/失败）                     | 输入筛选条件；输出列表    | 行级操作（查看、编辑、执行）   |\n| 执行与监控          | 状态流转、最近执行时间、耗时、检查对象数、成功/失败统计                   | 输入运行记录；输出进度与日志 | 支持失败重试、暂停、恢复     |\n| 权限与审计          | 角色权限控制；审计新增、编辑、状态变更、执行与删除                      | 输入操作事件         | 输出审计日志           |\n\n###### 4.2.4.3.3 处理流程\n\n- 执行序列：\n\n  ![质量检查任务执行序列](./images/quality-task-sequence.svg)\n- 步骤说明：\n  1. 前端创建并保存任务；后端反馈成功或错误信息。\n  2. 调度器按策略下发至执行器，附带并发与重试配置。\n  3. 执行器拉取规则与参数，规则引擎编译与校验执行计划。\n  4. 执行产出指标与异常事件，更新监控与告警，前端查询展示。\n  5. 运行过程中上报进度与日志；支持失败重试、暂停与恢复。\n\n###### 4.2.4.3.4 数据流图（可选）\n\n- 与总体 DFD 的“任务服务/执行器/指标与异常库/报告服务/审计库”一致。\n\n###### 4.2.4.3.5 设计实现\n\n- 算法设计： \n  - 调度：支持 Cron/固定频率/立即执行；执行队列削峰与优先级；同源/同对象串并行策略。\n  - 重试与退避：固定/指数退避；幂等与断点续跑；失败快照与定位。\n  - 并发控制：基于连接池与资源配额的动态并发；限流与熔断。\n  - 日志与进度：统一结构化日志，实时上报进度与状态；支持日志检索与查看。\n- 异常处理： \n  - 连接失败/超时：快速失败与重试，告警通知与定位。\n  - 规则编译错误：回显具体错误，阻断执行并记录审计。\n  - 资源不足：熔断与降级；排队与延迟执行。\n- 问题与方案： \n  - 海量任务管理：分页/懒加载、批量操作与筛选一致性；异步提示与进度反馈。\n  - 任务与规则变更：版本化与兼容性校验，动态装载与热更新。\n\n###### 4.2.4.3.6 关键算法（可选）\n\n- 动态并发与优先级调度：根据任务大小、源负载与配额，动态调整并发与队列优先级；复杂度近似 O(n log n)。\n- 指标归并与压缩：结果写入采用列式/分区策略与压缩编码，降低存储与提升查询性能。\n\n###### 4.2.4.3.7 人机交互\n\n---\n\n#### 4.2.5 数据架构\n\n本章节对齐 PRD 4.7“数据架构”，拆分为两个分节：“数仓分层管理”与“主题域管理”。从模块描述、功能组成、处理流程、数据流（可选）、设计实现、关键算法（可选）、人机交互等维度进行完整阐述，确保技术实现与业务需求一致。\n\n##### 4.2.5.1 数仓分层管理\n\n###### 4.2.5.1.1 模块描述\n\n- 目标与定位：以卡片化列表清晰呈现 ODS/STD/DWD/DWS/ADS/DIM/OTHER/TMP 分层定位与主链路，支撑关键字与分层筛选、基础维护（新增/编辑/删除）与关联信息查看（血缘/版本对比/权限设置），提升数据架构一致性与导航效率。\n- 业务逻辑：结合元数据与标准治理，对分层对象的职责定义、上下游关系与并行维度（DIM）进行统一治理；TMP/OTHER 层以辅助策略管理，TMP需定期清理、OTHER用于特殊接入。\n- 需求映射：对齐 PRD 4.7.1 的标题区、关系总览、筛选区、分层卡片列表与模态框（版本对比/权限设置/元数据关联/新建分层）等要求。\n\n###### 4.2.5.1.2 功能组成\n\n- 结构概览： \n  - 标题与操作区：页面标题、副标题说明；“新建分层”“权限设置”。\n  - 关系总览：ODS → STD → DWD → DWS → ADS 主链路；DIM 并行；OTHER/TMP 辅助通道。\n  - 筛选区：关键字、分层下拉、筛选/重置按钮。\n  - 分层卡片列表：分层图标+名称+描述、分层短码（Badge）、示例模型 Chips、查看血缘/版本对比、编辑/删除。\n  - 模态框：版本对比、权限设置、元数据关联、新建分层。\n- 协同与数据依赖：与元数据目录/血缘、标准与质量校验、版本管理联动；筛选与统计联动更新，权限影响可见性与操作入口。\n\n###### 4.2.5.1.3 处理流程\n\n- 说明：初始化加载关系总览与卡片→设置筛选条件→检索分层及示例模型→返回列表与统计→用户交互（查看血缘/版本对比/编辑/删除）→权限与审计记录。\n- 流程图（嵌入）：\n\n  ![数仓分层管理-流程图](./images/warehouse-layers-flow.svg)\n\n###### 4.2.5.1.4 数据流图（可选）\n\n- 描述：筛选条件进入检索与聚合模块，输出分层卡片与统计结果；DIM 层并行为事实/汇总层提供维度一致支撑；TMP/OTHER 辅助对象参与特殊场景的数据流动。\n- 参考DFD：可与“data-flow-dfd.svg”结合，标注分层对象、血缘服务与权限模块的数据通路。\n\n###### 4.2.5.1.5 设计实现\n\n- 算法与策略： \n  - 检索与排序：关键字匹配（前缀/拼音/同义词）+ 分层过滤 + 卡片权重排序（最近更新/示例模型数量）。\n  - 版本对比：结构差异（新增/删除/变更）与影响分析（拓扑路径对比）。\n  - 血缘与影响：基于拓扑图的上游/下游计算与可视化呈现。\n- 异常处理： \n  - 删除拦截：存在绑定模型或引用关系时提示影响范围与二次确认。\n  - 唯一性校验：分层编码唯一且建议不变更，变更需提示影响。\n  - 并发与一致性：编辑冲突采用版本号与乐观锁，回滚支持。\n- 性能与可用性： \n  - 栅格响应式与虚拟滚动；筛选防抖与缓存；空/错状态与重置引导。\n  - 无障碍：键盘导航与高对比度支持。\n\n###### 4.2.5.1.6 关键算法（可选）\n\n- 差异比对：针对版本间分层下模型列表的 LCS/集合差分；复杂度 O(n log n)。\n- 拓扑影响计算：对血缘图做有向图遍历，限定层级深度与去环处理。\n\n###### 4.2.5.1.7 人机交互\n\n##### 4.2.5.2 主题域管理\n\n###### 4.2.5.2.1 模块描述\n\n- 目标与定位：管理主题域与子域结构，左侧树形导航+右侧域详情与过程管理，支持关键字搜索、选择与批量操作，配合面包屑与高亮反馈，提升业务语义组织与治理能力。\n- 业务逻辑：统一域层级、域实体与事件、指标口径、模型挂载与版本发布流程；提供血缘与影响分析、治理准入规则（命名/字段规范/口径一致）与权限审计。\n- 需求映射：对齐 PRD 4.7.2 的标题栏、面包屑、左侧树、右侧内容（搜索区/业务过程列表/操作）、选择与批量、搜索与重置、规则与约束、权限与审计、性能与可用性。\n\n###### 4.2.5.2.2 功能组成\n\n- 结构概览： \n  - 顶部标题栏与面包屑：默认选中与返回行为；“新建主题域”“设置”。\n  - 左侧主题域树：主域/子域节点展示、展开/收起、选中高亮与联动。\n  - 右侧域详情（标签页）：概览/实体/指标/模型/血缘/版本；支持搜索与重置。\n  - 业务过程列表：选择框（全选/单选）、新增/修改/删除、缩写计算与行高亮。\n- 协同与数据依赖：域层级变更联动模型与指标；血缘分析与影响评估覆盖变更范围；版本发布与权限审计贯穿过程。\n\n###### 4.2.5.2.3 处理流程\n\n- 说明：新建主题域→维护实体与事件→定义指标口径→挂载模型（维度/事实/汇总）→血缘与影响分析→版本管理与发布→治理规则校验与审计。\n- 流程图（嵌入）：\n\n  ![主题域管理-流程图](./images/domain-management-flow.svg)\n\n###### 4.2.5.2.4 数据流图（可选）\n\n- 描述：域/实体/指标/模型配置入库→血缘服务计算拓扑与影响→版本服务记录发布变更→权限审计记录关键操作与上下文。\n- 参考DFD：可结合“metadata-catalog-dfd.svg”“lineage-impact.svg”标注域内对象与服务的数据流动。\n\n###### 4.2.5.2.5 设计实现\n\n- 算法与策略： \n  - 缩写计算：按下划线分段取首字母并大写（如 TRADE_ORDER_CREATE → TOC）。\n  - 搜索过滤：关键字匹配域/实体/指标/过程；支持 Enter 快速查询与重置。\n  - 版本发布：草稿→评审→发布→归档的状态机控制与校验。\n- 异常处理： \n  - 删除/修改二次确认与影响提示（下游模型/指标/过程）。\n  - 唯一性与合法性校验（名称/编码/路径/描述）。\n  - 并发冲突：乐观锁与版本号控制。\n- 性能与可用性： \n  - 左树右表懒加载与滚动优化，批量选择稳态反馈；响应式布局与键盘可访问；空/错状态与重试引导；统一图标与主题色。\n\n###### 4.2.5.2.6 关键算法（可选）\n\n- 血缘影响评估：对域内对象构建有向图，计算受影响对象集合与变更路径；支持层级限制与缓存。\n\n###### 4.2.5.2.7 人机交互\n\n#### 4.2.6 数据资产管理\n\n- 模块总体说明\n  - 综合“资产地图、资产类目配置、资产标签配置、资产超市”四个子模块，形成从资产组织与标注→可视化地图→上架与目录→订阅与运营评估的端到端闭环能力。\n  - 目标：提升资产可发现性、可理解性与服务化能力，打通“标签/类目→地图视图→目录检索→订阅计量”的业务链路，并与元数据、标准与质量治理深度联动。\n- 模块间逻辑关联（优化）\n  - 标签/类目作为资产的组织与标注基础，为资产地图提供分组/聚合维度，并为资产超市的检索与排序提供特征信号（热度、关联度）。\n  - 资产上架审核通过后进入目录，同时在资产地图中以最新分组呈现，用户可从地图跳转到目录详情或订阅页；订阅与使用评估数据回流到标签/类目的运营看板，用于策略优化。\n  - 与元数据/质量联动：上架检查引用元数据实体与质量评分，地图与目录支持基于质量分数的过滤与标识。\n\n##### 4.2.6.1 资产地图\n\n###### 4.2.6.1.1 模块描述\n\n- 核心功能与业务逻辑：提供资产全景可视化与高效检索能力，页面包含标题与操作区（“资产地图”+“新增资产”）、四类统计卡片（资产总数/已发布/未发布/今日新增）、左侧资产分类树与右侧搜索筛选及资产列表/卡片视图，严格对齐PRD 4.1.1的布局与交互要求。\n- 需求满足：实现分类树联动筛选、卡片悬浮与快捷操作（详情/收藏/申请使用）、排序与视图切换、分页与移动端适配；权限与审计覆盖新增、查询/筛选、查看详情、收藏/申请使用等关键行为。\n- 关键功能点及业务价值：提高资产发现与导航效率，统一统计口径与联动反馈；作为目录与订阅的入口，促进资产复用与运营闭环。\n\n###### 4.2.6.1.2 功能组成\n\n- 子功能结构： \n  - 标题区与操作：页面标题、右侧“新增资产”。\n  - 统计卡片：资产总数、已发布、未发布、今日新增（联动筛选结果）。\n  - 资产分类树：展开/折叠、关键词过滤、节点计数与高亮选中。\n  - 搜索与筛选：名称、类型、业务领域、更新周期、访问权限、标签；查询/重置。\n  - 列表/卡片视图：资产基础信息、标签、更新时间、热度与评分；快捷操作（详情/收藏/申请）。\n  - 结果工具条：排序（最近更新/评分/热度）、视图切换（列表/卡片）。\n  - 分页组件：页码导航、每页条数、跳页、加载态与键盘可访问。\n- 协同机制与数据依赖：分类树与筛选条件双向联动；统计卡片基于查询结果实时聚合；权限控制影响可见性与操作入口；审计记录关键操作及参数。\n\n###### 4.2.6.1.3 处理流程\n\n- 流程说明：初始化加载分类树与基础统计→用户输入关键词/筛选条件→触发查询→服务端检索与聚合统计→返回列表/卡片数据与统计概览→前端渲染并联动更新→用户交互（排序、视图切换、分页、卡片操作）→跳转详情/收藏/申请使用→审计与权限校验。\n- 序列图（可选）：搜索发起→服务端检索→统计聚合→结果返回→渲染与交互（参考“metadata-search-sequence.svg”）。\n- 嵌入序列图：![资产地图-序列图](./images/assets-map-sequence.svg)\n\n###### 4.2.6.1.4 数据流图（可选）\n\n- 说明：数据从筛选条件进入检索与聚合模块，输出资产列表/卡片及统计结果，分类树与标签/类目作为过滤维度参与计算。\n- DFD示例：可参考模块级数据检索与聚合的DFD表示，关联分类/标签过滤与资产实体检索的处理节点。\n\n###### 4.2.6.1.5 设计实现\n\n- 核心数据结构：asset(id, key, name, type, domain, categories\\[\\], tags\\[\\], visibility, updated_at, popularity, rating)、category(id, name, level, parent_id, count)、search_filter(name, type, domain, period, visibility, tags\\[\\])、stats(total, published, unpublished, added_today)。\n- 关键算法选型：检索排序（BM25/向量召回）+ 特征加权（最近更新、评分、热度、可见性）；分类树过滤（树遍历与节点计数）；分页与懒加载。\n- 异常处理机制：空结果与错误提示（重试与条件建议）；权限拒绝的可见性回退；并发查询取消与结果一致性校验。\n- 性能优化策略：索引与缓存、虚拟滚动、视图切换的按需渲染、统计聚合预计算与增量更新、移动端响应式优化。\n- 技术风险与应对：大结果集分页与跳页体验；多维筛选组合的性能与一致性；跨维度统计联动延迟→采用异步加载与骨架屏。\n\n###### 4.2.6.1.6 关键算法（可选）\n\n- 排序融合：BM25得分与特征（更新时间、热度、评分）线性加权或学习排序；支持置顶与黑名单规则。\n- 分类树计数：前序/后序遍历与计数缓存；关键词过滤采用前缀索引。\n\n###### 4.2.6.1.7 人机交互\n\n---\n\n##### 4.2.6.2 资产类目配置\n\n###### 4.2.6.2.1 模块描述\n\n- 核心功能与业务逻辑：配置多级分类层级（级别管理）与分类树（资产分类管理），统一平台类目结构基线，管理分类属性与资产绑定，保障目录/地图的分组与治理一致性，对齐PRD 4.1.2与4.1.3。\n- 需求满足：级别管理支持新增/编辑/启停/拖拽排序与删除确认；分类树支持新增/编辑/删除/拖拽移动父子关系、批量导入/导出、搜索筛选与变更影响提示；字段唯一性与循环引用校验；权限与审计完整覆盖。\n- 关键功能点及业务价值：规范化层级与分类树，降低治理复杂度与变更风险，提升检索组织效率与联动运营度量。\n\n###### 4.2.6.2.2 功能组成\n\n- 子功能结构： \n  - 分类级别管理：级别列表、启停状态、拖拽排序、删除确认与影响提示。\n  - 资产分类管理：左侧分类树+右侧详情、搜索与筛选、节点新增/编辑/移动与批量导入/导出。\n  - 资产绑定与运营度量：分类与资产关联、资产计数、变更历史与运营看板。\n- 交互关系与数据依赖：级别变更影响分类树结构与资产归属；分类树变更影响目录/地图分组与统计；绑定关系驱动检索与度量更新。\n\n###### 4.2.6.2.3 处理流程\n\n- 流程说明：配置级别→维护分类树（新增/编辑/移动/删除）→资产绑定与计数更新→检索与筛选→策略下发与效果评估→变更日志与回滚。\n- 序列图（可选）：分类移动→影响分析→确认→结构更新→资产归属调整→目录/地图联动（可参考“category-management-sequence.svg”）。\n- 嵌入序列图（参考）：![资产类目配置-序列图](./images/category-management-sequence.svg)\n\n###### 4.2.6.2.4 数据流图（可选）\n\n- 说明：级别/分类配置数据经校验后入库；资产绑定更新驱动计数与度量；目录与地图消费分组数据进行展示与检索过滤。\n- DFD示例：参见“category-levels-flow.svg”“asset-categories-flow.svg”。\n\n###### 4.2.6.2.5 设计实现\n\n- 核心数据结构：category_level(id, name, code, order, status)、category(id, name, code, level, parent_id, owner, visibility, tags_group_id, status)、category_change_log(id, category_id, change_type, before, after, changed_by, changed_at)、asset_category_binding(asset_id, category_id, weight)。\n- 关键算法选型：层级遍历/路径缓存、拖拽排序持久化、批量导入/导出的结构校验与唯一性检查。\n- 异常处理机制：环路/越级校验、受控资产节点删除拦截与迁移指引、并发编辑冲突解决（版本号与乐观锁）。\n- 性能优化策略：大树懒加载与虚拟滚动、索引与缓存优化、批量绑定与解绑。\n- 技术风险与应对：结构变更影响广→预评估与回滚计划；跨团队协同→操作权限划分与审计追踪。\n\n###### 4.2.6.2.6 关键算法（可选）\n\n- 拖拽排序稳定性：O(n)重排与引用更新；路径缓存增量重建。\n\n###### 4.2.6.2.7 人机交互\n\n---\n\n##### 4.2.6.3 资产标签配置\n\n###### 4.2.6.3.1 模块描述\n\n- 核心功能与业务逻辑：管理资产标签与标签组，支持创建/编辑/删除/查询/导出，统计标签使用与关联资产数，提升检索与归类效率；对齐PRD 4.1.4（资产标签管理）与4.1.5（标签组管理）。\n- 需求满足：标签名称在标签组维度内唯一；标签组编码唯一且不可变；支持批量删除与批量关联；提供空状态/错误提示与并发冲突提示；权限与审计覆盖增删改查与导出。\n- 关键功能点及业务价值：标签体系规范化与可运营，支撑检索过滤、策略下发与地图着色分组。\n\n###### 4.2.6.3.2 功能组成\n\n- 子功能结构： \n  - 标签管理：新建/编辑/删除/查询与导出、分页展示与当前页描述。\n  - 标签组管理：新建/编辑/删除、统计每组标签数量与关联资产数。\n  - 使用统计与运营：热门标签聚合与排序、标签使用趋势、组内标签数量与资产关联数。\n- 交互关系与数据依赖：标签与标签组互相关联；标签绑定驱动检索过滤与运营度量；删除与变更需影响分析与提示。\n\n###### 4.2.6.3.3 处理流程\n\n- 流程说明：创建标签组→创建标签并绑定资产→查询与筛选→批量操作（导出/删除/批量关联）→运营统计与优化。\n- 状态机（可选）：标签/标签组（启用/停用/删除/归档）。\n- 嵌入状态机（参考）：![标签分类-状态机](./images/tags-categories-state-machine.svg)\n- 序列图（可选）：标签删除→影响确认→解绑资产→更新统计→日志记录。\n- 嵌入序列图：![资产标签配置-序列图](./images/asset-tags-sequence.svg)\n\n###### 4.2.6.3.4 数据流图（可选）\n\n- 说明：标签/标签组配置入库→资产绑定更新倒排索引→检索过滤与运营统计消费索引与度量。\n- DFD示例：参见“tags-categories-dfd.svg”“tags-categories-state-machine.svg”。\n\n###### 4.2.6.3.5 设计实现\n\n- 核心数据结构：tag(id, name, code, group_id, description, status, created_at)、tag_group(id, name, code, description, status, created_at)、asset_tag_binding(asset_id, tag_id, weight)、tag_usage_stats(tag_id, assets_count, usage_count, last_used_at)。\n- 关键算法选型：倒排索引/ES检索、热门标签聚合与排序（Top-N、时间衰减权重）。\n- 异常处理机制：唯一性与准入规则校验、删除确认与影响范围提示、并发编辑冲突（乐观锁）。\n- 性能优化策略：索引优化与缓存、分页与客户端筛选、批量绑定与批量删除。\n- 技术风险与应对：标签泛滥与质量下滑→治理策略与准入；标签组失衡→合并与迁移策略。\n\n###### 4.2.6.3.6 关键算法（可选）\n\n- 热门标签排序：基于使用频次、关联资产数与时间衰减的综合评分；支持黑名单与置顶。\n\n###### 4.2.6.3.7 人机交互\n\n---\n\n##### 4.2.6.4 资产超市\n\n###### 4.2.6.4.1 模块描述\n\n- 核心功能与业务逻辑：集中发现、筛选与获取全域数据资产，支持关键词搜索、分类筛选、评分/热度/最近更新排序，提供推荐与热门资产，支持网格/列表视图与快捷操作（查看详情、下载/申请、收藏、评价），严格对齐PRD 4.1.6的页面结构与交互。\n- 需求满足：全局搜索与筛选条（关键词、类型、领域、更新周期、权限、快速标签）；左侧分类与高级筛选（评分下限滑条、更新时间预设）；右侧推荐资产横滑与热门资产侧栏；结果工具条（排序/视图切换）；卡片快捷操作与状态反馈；权限与审计覆盖申请/下载/评价/收藏等行为。\n- 关键功能点及业务价值：提升资产曝光与转化，形成运营闭环（曝光-点击-收藏/申请-下载-评价），为推荐与排序提供埋点数据支持。\n\n###### 4.2.6.4.2 功能组成\n\n- 子功能结构： \n  - 全局搜索与筛选条：关键词、类型、领域、更新周期、访问权限、快速标签；查询/重置与联动更新。\n  - 左侧分类与高级筛选：数据类型、业务领域、评分下限（滑条）、更新时间（24h/7d/30d）。\n  - 推荐/热门区域：推荐资产横滑组件与热门资产侧栏（热度Top）。\n  - 结果列表与卡片：网格/列表视图切换、排序（最近更新/评分优先/热度优先）、卡片快捷操作（查看/下载或申请/评价/收藏）。\n  - 分页与懒加载：页码导航、每页条数、跳页、加载态与空状态提示。\n- 协同机制与数据依赖：筛选条件与结果联动；权限控制影响操作入口；埋点事件驱动推荐与排序特征更新；审计记录关键操作。\n\n###### 4.2.6.4.3 处理流程\n\n- 流程说明：初始化加载推荐与热门→用户设置搜索与筛选→服务端检索与排序→返回结果与统计→用户交互（视图切换、排序、分页、卡片操作）→申请/下载/评价/收藏→审计与埋点采集→推荐与排序特征更新。\n- 状态机（可选）：资产条目（草稿/待审/已发布/下架/冻结）、订阅（申请中/已批准/已拒绝/已取消/过期）。\n- 嵌入状态机：![资产超市-状态机](./images/asset-market-state-machine.svg)\n- 序列图（可选）：申请使用→权限校验→审批流→订阅创建→计量与限流→结果反馈与审计记录。\n- 嵌入序列图：![资产超市-序列图](./images/asset-market-sequence.svg)\n\n###### 4.2.6.4.4 数据流图（可选）\n\n- 说明：筛选条件流入检索与排序模块，结合推荐特征与权限过滤生成结果；用户行为（申请/下载/评价/收藏）写入审计与埋点服务，回流至推荐特征库。\n\n###### 4.2.6.4.5 设计实现\n\n- 核心数据结构：asset_item(id, key, name, owner, type, domain, categories\\[\\], tags\\[\\], visibility, updated_at, popularity, rating, status)、catalog_entry(item_id, visible, search_tokens, synonyms, pinyin)、subscription(id, item_id, user_id, quota, status)、download_log(id, item_id, user_id, ts)、rating_log(id, item_id, user_id, rating, ts)、favorite(id, item_id, user_id, ts)、recommend_feature(item_id, ctr, conversion, recency, tag_hot, category_hot)。\n- 关键算法选型：检索排序（BM25/向量召回）+ 特征加权（评分、热度、最近更新、可见性、推荐特征）；推荐与热门（曝光/点击/收藏/申请转化等埋点的加权与时间衰减）。\n- 异常处理机制：权限拒绝与限流反馈、空结果与错误提示、申请审批失败处理与回退、下载失败重试与审计标记。\n- 性能优化策略：索引与缓存、分页与懒加载、推荐与热门数据预聚合、前端虚拟滚动与骨架屏、移动端响应式与低带宽优化。\n- 技术风险与应对：特征偏置与“冷启动”→规则兜底与带宽采样；高并发申请与下载→限流与队列；跨维度排序一致性→异步更新与用户提示。\n\n###### 4.2.6.4.6 关键算法（可选）\n\n- 推荐特征融合：曝光/点击/收藏/申请/下载/评价的多事件加权评分，采用时间衰减与去噪处理；支持置顶/屏蔽策略。\n\n###### 4.2.6.4.7 人机交互\n\n---\n\n#### 4.2.7 数据服务\n\n为统一企业数据服务治理，数据服务模块，涵盖 API 管理与调用日志两个子章节，严格对齐 PRD 第4.6章节规范（4.6.1 与 4.6.2）。\n\n##### 4.2.7.1 API管理\n\n###### 4.2.7.1.1 模块描述\n\n- 核心功能：统一管理企业数据服务 API，支持检索、筛选、排序、批量操作与导出文档，并提供基础状态监控（调用量、错误率、延迟）。\n- 主要业务逻辑与功能点： \n  - 标题与操作区：新增 API、批量启停/删除、导出 API 文档（按筛选范围）。\n  - 搜索与高级筛选：关键词（名称/路径/描述）、状态（启用/停用/草稿）、方法（GET/POST/PUT/DELETE）、标签（订单/用户/库存/支付等）、所属域、负责人、更新时间（24h/7d/30d）、常用预设 Chips（最近更新/调用量高/错误率低）。\n  - 主体布局：左侧筛选器（快速过滤与重置、简易看板展示调用量/错误率/延迟）+ 右侧表格与分页。\n  - 表格交互：选择与批量、行内状态开关、列排序（名称/状态/更新时间/调用量/创建时间）、详情/修改/删除。\n- 需求满足说明：以上功能点与交互严格对应 PRD 4.6.1 的页面结构、交互与权限/审计/性能要求。\n\n###### 4.2.7.1.2 功能组成\n\n- 组织结构图：API目录管理→筛选与排序→批量操作→发布与状态→导出与监控（见 images/api-management-flow.svg）。\n- 子功能说明与协作： \n\n  | 子功能      | 能力项               | 说明                     | 关联数据对象                    |\n  |----------|-------------------|------------------------|---------------------------|\n  | 新增/编辑    | 基础信息/路径/方法/标签/负责人 | 字段校验与唯一性校验，支持版本信息展示    | api_service, api_version  |\n  | 启停/删除    | 行内开关/批量操作         | 需权限与审计；启停实时下发到网关策略     | api_policy, gateway_route |\n  | 检索/筛选/排序 | 多维条件与预设 Chips     | 条件联动更新列表与分页；排序稳定且状态保持  | api_index                 |\n  | 导出文档     | 按筛选范围导出           | 导出API清单与字段说明（CSV/JSON） | export_task               |\n  | 状态监控     | 调用量/错误率/延迟        | 简易看板读取监控索引，支持区间过滤      | api_metrics               |\n\n###### 4.2.7.1.3 处理流程\n\n- 流程图：![API 管理流程图](./images/api-management-flow.svg)\n\n###### 4.2.7.1.4 数据流图（可选）\n\n- 说明：API元数据经检索索引与监控指标流转；启停/发布动作经策略下发到网关；调用日志回流至监控与日志索引，供看板与审计使用。\n\n###### 4.2.7.1.5 设计实现\n\n- 算法与机制： \n  - 列表排序：稳定排序（字段+次级键），预设“调用量高”=按 call_count 降序，“错误率低”=按 error_rate 升序。\n  - 防抖与分页：前端查询防抖200-300ms，分页每页默认10条，上限100条。\n  - 权限与审计：管理员可新增/编辑/启停/删除/批量/导出；普通用户可查询与详情；审计记录上述所有行为。\n- 异常处理： \n  - 发布失败（校验/网关不可用）→回退至草稿或保留已发布但显示告警；策略冲突→提示并阻止提交。\n  - 启停失败→策略补偿与重试；删除需前置检查无路由引用与无活跃调用。\n- 性能优化： \n  - 路由缓存与策略预编译；鉴权令牌校验优化；限流就近策略；监控与日志异步处理。\n\n###### 4.2.7.1.6 关键算法（可选）\n\n- 限流算法：令牌桶/漏桶参数设定与就近生效策略，保证高并发下的平滑控制。\n\n###### 4.2.7.1.7 人机交互\n\n---\n\n##### 4.2.7.2 调用日志\n\n###### 4.2.7.2.1 模块描述\n\n- 核心功能：查看与分析数据服务的调用记录，支持多维筛选、分页、跳转与导出，便于定位问题与统计趋势。\n- 主要业务逻辑与功能点： \n  - 标题与操作区：导出 CSV（按当前筛选范围）。\n  - 筛选区：服务名称/路径关键词、请求方法（GET/POST/PUT/DELETE）、状态码分组（2xx/4xx/5xx）、精确状态码（200/404/500等）、时间范围选择、重置筛选按钮。\n  - 列表与操作：列（时间戳、服务名称、调用者IP、方法、路径、状态码、耗时ms、操作-详情），详情页展示请求/响应头与体示例。\n  - 分页与跳转：每页条数选择（10/20/50）、上一页/下一页与当前页/总页显示、页码跳转。\n- 需求满足说明：以上功能与交互对齐 PRD 4.6.2 的页面结构、权限与性能要求。\n\n###### 4.2.7.2.2 功能组成\n\n- 组织结构图：采集→存储与索引→查询筛选→分页与跳转→导出与详情（见 images/api-logs-flow.svg）。\n- 子功能说明与协作： \n\n  | 子功能   | 能力项                    | 说明            | 关联数据对象      |\n  |-------|------------------------|---------------|-------------|\n  | 多维筛选  | 关键词/方法/状态码(分组/精确)/时间范围 | 实时生效与重置恢复默认   | log_query   |\n  | 列表与排序 | 按时间倒序                  | 支持耗时/状态码辅助排序  | log_index   |\n  | 分页与跳转 | 每页条数选择/页码跳转            | 页码输入+GO，防误触校验 | page_state  |\n  | 导出CSV | 按当前筛选范围                | 后端生成CSV并提供下载  | export_task |\n  | 详情查看  | 请求/响应头/体示例             | 通过日志ID跳转详情页   | log_detail  |\n\n###### 4.2.7.2.3 处理流程\n\n- 流程图：![调用日志流程图](./images/api-logs-flow.svg)\n\n###### 4.2.7.2.4 数据流图（可选）\n\n- 说明：网关/服务采集→日志库/索引→查询与分页→导出到文件系统；详情页二次查询加载完整请求与响应示例。\n\n###### 4.2.7.2.5 设计实现\n\n- 算法与机制： \n  - 查询解析→构造检索DSL（时间范围/状态分组/方法/关键词），支持倒序与分页游标。\n  - 颜色区分：2xx绿色、4xx橙色、5xx红色；错误快速定位（状态分组+耗时阈值）。\n- 异常处理： \n  - 导出任务失败重试与错误反馈；详情加载失败显示简要错误并支持重试。\n- 性能优化： \n  - 客户端分页与筛选优化；索引预聚合（按时间桶与状态分组）；响应式布局与空/错提示优化体验。\n\n###### 4.2.7.2.6 关键算法（可选）\n\n- 索引与检索优化：倒排+时间桶+分组索引设计，保障在高吞吐日志下的快速查询与分页。\n\n###### 4.2.7.2.7 人机交互\n\n---\n\n## 5. 接口设计\n\n### 5.1 设计原则与规范\n\n- 风格与版本控制：全面采用RESTful风格，资源化命名，使用统一版本前缀 /api/v1/；后续演进以 /api/v2/ 进行兼容发布。\n- 资源与动作： \n  - GET（查询/读取）、POST（创建/执行）、PUT（更新整体）、PATCH（局部更新，可选）、DELETE（删除）。\n  - 动作型子资源以动词后缀表达（如 /publish、/remediation、/versions）。\n- 统一约定： \n  - 认证与授权：Authorization: Bearer <token>。\n  - Content-Type: application/json；所有请求/响应采用UTF-8编码。\n  - 分页参数：page（从1开始）、size（默认20，最大100）、sort（字段）、order（asc/desc）。\n  - 过滤参数：统一使用驼峰命名与明确取值范围，布尔型采用 true/false。\n  - 幂等性：PUT/DELETE需幂等，POST执行型端点返回202 Accepted或200 OK（视场景）。\n  - 状态码：200/201/202/204成功类；4xx客户端错误；5xx服务端错误。\n- 错误响应统一结构： \n  - { code: string, message: string, details?: object, requestId?: string, retryable?: boolean }\n- 成功响应示例（列表）： \n  - { items: [...], page: number, size: number, total: number }\n\n---\n\n### 5.2 接口清单（可检索表）\n\n| 接口编号     | 接口名称       | 接口类型 | 功能模块     | HTTP方法 | 接口端点                                    |\n|----------|------------|------|----------|--------|-----------------------------------------|\n| MET-001  | 查询元数据实体列表  | 查询   | 元数据管理    | GET    | /api/v1/metadata/entities               |\n| MET-002  | 获取元数据实体详情  | 查询   | 元数据管理    | GET    | /api/v1/metadata/entities/{id}          |\n| MET-003  | 创建元数据实体    | 创建   | 元数据管理    | POST   | /api/v1/metadata/entities               |\n| MET-004  | 查询数据血缘     | 查询   | 元数据管理    | GET    | /api/v1/metadata/lineage/{id}           |\n| STD-001  | 创建标准条目     | 创建   | 数据标准管理   | POST   | /api/v1/standards/items                 |\n| STD-002  | 查询标准映射规则列表 | 查询   | 数据标准管理   | GET    | /api/v1/standards/mappings              |\n| QLT-001  | 创建质量检测任务   | 执行   | 数据质量治理   | POST   | /api/v1/quality/tasks                   |\n| QLT-002  | 获取质量检测报表   | 查询   | 数据质量治理   | GET    | /api/v1/quality/reports/{taskId}        |\n| QLT-003  | 创建问题整改动作   | 执行   | 数据质量治理   | POST   | /api/v1/quality/issues/{id}/remediation |\n| ASM-001  | 发布资产到目录    | 发布   | 资产目录与市场  | POST   | /api/v1/assets/{id}/publish             |\n| CAT-001  | 查询资产目录     | 查询   | 资产目录与市场  | GET    | /api/v1/catalog                         |\n| API-001  | 发布API到网关   | 发布   | API管理    | POST   | /api/v1/apis/{id}/publish               |\n| API-002  | 查询API调用日志  | 查询   | API管理    | GET    | /api/v1/apis/{id}/logs                  |\n| TAG-001  | 绑定资产标签     | 更新   | 资产标签与分类  | POST   | /api/v1/assets/{id}/tags                |\n| MOD-001  | 创建模型版本     | 创建   | 模型与主题域   | POST   | /api/v1/models/{id}/versions            |\n| DASH-001 | 查询仪表盘指标    | 查询   | 仪表盘与资产地图 | GET    | /api/v1/metrics/dashboard               |\n| SEC-001  | 查询当前用户信息   | 查询   | 治理与合规    | GET    | /api/v1/auth/me                         |\n| SEC-002  | 评估权限策略     | 执行   | 治理与合规    | POST   | /api/v1/permissions/evaluate            |\n\n---\n\n### 5.3 接口详细说明\n\n#### MET-001 查询元数据实体列表\n\n- 接口说明： \n  - 功能模块归属：元数据管理\n  - 核心业务逻辑：按条件检索元数据实体，支持分页、排序与过滤。\n  - 系统级作用：提供统一的资产发现入口，为后续详情、血缘、版本操作提供基础。\n  - 使用场景说明：元数据目录页面检索、治理任务选择对象、运营看板汇总。\n- 接口端点： \n  - URL：/api/v1/metadata/entities\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数： \n\n  | 参数名称     | 数据类型   | 必填 | 默认值       | 取值范围                     | 示例                           |\n  |----------|--------|----|-----------|--------------------------|------------------------------|\n  | query    | string | 否  | \"\"        | 1-200字符                  | name:customer AND type:table |\n  | type     | string | 否  | all       | table/view/job/domain    | table                        |\n  | sourceId | string | 否  | \\-         | 任意合法ID                   | src_001                      |\n  | page     | number | 否  | 1         | \\>=1                      | 1                            |\n  | size     | number | 否  | 20        | 1-100                    | 20                           |\n  | sort     | string | 否  | updatedAt | name/createdAt/updatedAt | name                         |\n  | order    | string | 否  | desc      | asc/desc                 | asc                          |\n- 成功响应：200 OK \n  - JSON：{ \"items\": [{ \"id\": \"md_001\", \"name\": \"customer\", \"type\": \"table\", \"sourceId\": \"src_001\", \"createdAt\": \"2025-10-01T10:00:00Z\", \"updatedAt\": \"2025-10-08T12:00:00Z\" }], \"page\": 1, \"size\": 20, \"total\": 135 }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"size must be between 1 and 100\", \"requestId\": \"...\", \"retryable\": false }\n  - 401 Unauthorized：{ \"code\": \"UNAUTHORIZED\", \"message\": \"invalid token\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：检查分页与过滤参数；客户端提示并修正后重试。\n  - UNAUTHORIZED：引导重新登录或刷新令牌；不建议自动重试。\n\n#### MET-002 获取元数据实体详情\n\n- 接口说明： \n  - 功能模块归属：元数据管理\n  - 核心业务逻辑：根据ID返回实体的技术/业务属性与关联关系摘要。\n  - 系统级作用：为详情页与后续操作（血缘、版本、变更）提供数据基础。\n  - 使用场景说明：详情页、治理与分析任务上下文。\n- 接口端点： \n  - URL：/api/v1/metadata/entities/{id}\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：路径变量 \n\n  | 参数名称 | 数据类型   | 必填 | 默认值 | 取值范围 | 示例     |\n  |------|--------|----|-----|------|--------|\n  | id   | string | 是  | \\-   | 合法ID | md_001 |\n- 成功响应：200 OK \n  - JSON：{ \"id\": \"md_001\", \"name\": \"customer\", \"type\": \"table\", \"schema\": { \"columns\": [{\"name\":\"id\",\"type\":\"string\"}] }, \"business\": { \"domain\": \"客户域\" }, \"relations\": { \"upstream\": [\"src_001\"], \"downstream\": [\"dw_321\"] }, \"createdAt\": \"...\", \"updatedAt\": \"...\" }\n- 错误响应： \n  - 404 Not Found：{ \"code\": \"NOT_FOUND\", \"message\": \"metadata entity not found\" }\n- 错误码及处理： \n  - NOT_FOUND：提示资源不存在或已删除；客户端可引导返回列表。\n\n#### MET-003 创建元数据实体\n\n- 接口说明： \n  - 功能模块归属：元数据管理\n  - 核心业务逻辑：登记新元数据实体，写入技术/业务属性与初始关系。\n  - 系统级作用：支持手工登记与自动采集的补录；作为治理入口。\n  - 使用场景说明：人工登记、第三方接入脚本。\n- 接口端点： \n  - URL：/api/v1/metadata/entities\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body）： \n\n  | 参数名称     | 数据类型   | 必填 | 默认值 | 取值范围                  | 示例                                          |\n  |----------|--------|----|-----|-----------------------|---------------------------------------------|\n  | name     | string | 是  | \\-   | 1-100字符               | customer                                    |\n  | type     | string | 是  | \\-   | table/view/job/domain | table                                       |\n  | sourceId | string | 否  | \\-   | 合法ID                  | src_001                                     |\n  | schema   | object | 否  | {}  | JSON对象                | {\"columns\":[{\"name\":\"id\",\"type\":\"string\"}]} |\n  | business | object | 否  | {}  | JSON对象                | {\"domain\":\"客户域\"}                            |\n- 成功响应：201 Created \n  - JSON：{ \"id\": \"md_789\", \"name\": \"customer\", \"type\": \"table\", \"sourceId\": \"src_001\", \"createdAt\": \"...\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"name already exists in source\" }\n- 错误码及处理： \n  - CONFLICT：提示命名冲突；客户端建议修改名称或来源后重试。\n\n#### MET-004 查询数据血缘\n\n- 接口说明： \n  - 功能模块归属：元数据管理\n  - 核心业务逻辑：返回指定实体的血缘图（节点与边）。\n  - 系统级作用：用于可视化溯源与影响分析。\n  - 使用场景说明：血缘视图、变更影响分析。\n- 接口端点： \n  - URL：/api/v1/metadata/lineage/{id}\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：路径+查询 \n\n  | 参数名称      | 数据类型   | 必填 | 默认值  | 取值范围                     | 示例     |\n  |-----------|--------|----|------|--------------------------|--------|\n  | id        | string | 是  | \\-    | 合法ID                     | md_001 |\n  | depth     | number | 否  | 3    | 1-6                      | 3      |\n  | direction | string | 否  | both | upstream/downstream/both | both   |\n- 成功响应：200 OK \n  - JSON：{ \"nodes\": [{\"id\":\"md_001\",\"label\":\"customer\"}], \"edges\": [{\"from\":\"md_001\",\"to\":\"dw_321\",\"type\":\"ETL\"}] }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"depth out of range\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：提示参数纠正；修正后重试。\n\n#### STD-001 创建标准条目\n\n- 接口说明： \n  - 功能模块归属：数据标准管理\n  - 核心业务逻辑：创建命名/编码/元素标准条目并版本化。\n  - 系统级作用：作为标准治理的基础实体。\n  - 使用场景说明：标准目录维护、治理项目初始化。\n- 接口端点： \n  - URL：/api/v1/standards/items\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body）： \n\n  | 参数名称        | 数据类型   | 必填 | 默认值    | 取值范围                  | 示例             |\n  |-------------|--------|----|--------|-----------------------|----------------|\n  | code        | string | 是  | \\-      | 1-50字符                | STD_NAMING_001 |\n  | name        | string | 是  | \\-      | 1-100字符               | 表命名规范          |\n  | category    | string | 是  | \\-      | naming/codes/elements | naming         |\n  | description | string | 否  | \"\"     | 0-500字符               | \"统一表命名规则\"      |\n  | version     | string | 否  | \"v1.0\" | 1-20字符                | v1.0           |\n- 成功响应：201 Created \n  - JSON：{ \"id\": \"std_001\", \"code\": \"STD_NAMING_001\", \"name\": \"表命名规范\", \"category\": \"naming\", \"version\": \"v1.0\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"standard code already exists\" }\n- 错误码及处理： \n  - CONFLICT：提醒更换code或版本；修正后重试。\n\n#### STD-002 查询标准映射规则列表\n\n- 接口说明： \n  - 功能模块归属：数据标准管理\n  - 核心业务逻辑：检索标准与数据源之间的映射规则。\n  - 系统级作用：为校验执行与度量提供规则依据。\n  - 使用场景说明：标准映射页面、执行计划配置。\n- 接口端点： \n  - URL：/api/v1/standards/mappings\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数： \n\n  | 参数名称       | 数据类型   | 必填 | 默认值 | 取值范围  | 示例      |\n  |------------|--------|----|-----|-------|---------|\n  | standardId | string | 否  | \\-   | 合法ID  | std_001 |\n  | sourceId   | string | 否  | \\-   | 合法ID  | src_001 |\n  | page       | number | 否  | 1   | \\>=1   | 1       |\n  | size       | number | 否  | 20  | 1-100 | 20      |\n- 成功响应：200 OK \n  - JSON：{ \"items\": [{ \"id\": \"map_001\", \"standardId\": \"std_001\", \"sourceId\": \"src_001\", \"rule\": \"table_name -> naming\" }], \"page\": 1, \"size\": 20, \"total\": 45 }\n- 错误响应： \n  - 401 Unauthorized：{ \"code\": \"UNAUTHORIZED\", \"message\": \"invalid token\" }\n- 错误码及处理： \n  - UNAUTHORIZED：引导登录；不可自动重试。\n\n#### QLT-001 创建质量检测任务\n\n- 接口说明： \n  - 功能模块归属：数据质量治理\n  - 核心业务逻辑：创建/触发质量检测任务，支持立即执行或定时。\n  - 系统级作用：质量治理执行入口，产出报表与工单。\n  - 使用场景说明：规则页面发起执行、调度编排。\n- 接口端点： \n  - URL：/api/v1/quality/tasks\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body）： \n\n  | 参数名称         | 数据类型          | 必填 | 默认值  | 取值范围       | 示例                  |\n  |--------------|---------------|----|------|------------|---------------------|\n  | name         | string        | 是  | \\-    | 1-100字符    | \"客户数据完整性检测\"         |\n  | ruleIds      | array<string> | 是  | \\-    | 非空数组       | [\"qr_001\",\"qr_002\"] |\n  | scheduleCron | string        | 否  | \"\"   | Cron表达式    | \"0 0 * * *\"         |\n  | immediate    | boolean       | 否  | true | true/false | true                |\n- 成功响应：202 Accepted \n  - JSON：{ \"taskId\": \"qt_001\", \"status\": \"queued\" }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"ruleIds must not be empty\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：提示修正请求体；重试生效。\n\n#### QLT-002 获取质量检测报表\n\n- 接口说明： \n  - 功能模块归属：数据质量治理\n  - 核心业务逻辑：返回指定任务的执行状态与结果摘要。\n  - 系统级作用：供报表展示与治理决策使用。\n  - 使用场景说明：报表页面、仪表盘聚合。\n- 接口端点： \n  - URL：/api/v1/quality/reports/{taskId}\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：路径+查询 \n\n  | 参数名称              | 数据类型    | 必填 | 默认值   | 取值范围       | 示例     |\n  |-------------------|---------|----|-------|------------|--------|\n  | taskId            | string  | 是  | \\-     | 合法ID       | qt_001 |\n  | includeViolations | boolean | 否  | false | true/false | true   |\n- 成功响应：200 OK \n  - JSON：{ \"taskId\": \"qt_001\", \"status\": \"done\", \"summary\": { \"rules\": 2, \"violations\": 5 }, \"violations\": [{\"ruleId\":\"qr_001\",\"count\":3}] }\n- 错误响应： \n  - 404 Not Found：{ \"code\": \"NOT_FOUND\", \"message\": \"report not found\" }\n- 错误码及处理： \n  - NOT_FOUND：任务尚未完成或不存在；提示稍后刷新。\n\n#### QLT-003 创建问题整改动作\n\n- 接口说明： \n  - 功能模块归属：数据质量治理\n  - 核心业务逻辑：为指定问题创建整改任务并进入闭环流程。\n  - 系统级作用：闭环治理入口，串联整改与验证。\n  - 使用场景说明：工单页面发起整改。\n- 接口端点： \n  - URL：/api/v1/quality/issues/{id}/remediation\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称    | 数据类型   | 必填 | 默认值 | 取值范围      | 示例           |\n  |---------|--------|----|-----|-----------|--------------|\n  | id      | string | 是  | \\-   | 合法ID      | iq_001       |\n  | action  | string | 是  | \\-   | 1-200字符   | \"补齐缺失字段\"     |\n  | owner   | string | 是  | \\-   | 用户ID/名称   | \"u_123\"      |\n  | dueDate | string | 否  | \\-   | ISO8601日期 | \"2025-10-20\" |\n- 成功响应：201 Created \n  - JSON：{ \"issueId\": \"iq_001\", \"remediationId\": \"rm_777\", \"status\": \"in_progress\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"issue already in remediation\" }\n- 错误码及处理： \n  - CONFLICT：提示当前进度；避免重复提交。\n\n#### ASM-001 发布资产到目录\n\n- 接口说明： \n  - 功能模块归属：资产目录与市场\n  - 核心业务逻辑：将资产上架到目录，经过审核后发布可检索。\n  - 系统级作用：资产服务化入口，联动目录与订阅。\n  - 使用场景说明：资产上架审核通过后发起发布。\n- 接口端点： \n  - URL：/api/v1/assets/{id}/publish\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称       | 数据类型          | 必填 | 默认值      | 取值范围            | 示例            |\n  |------------|---------------|----|----------|-----------------|---------------|\n  | id         | string        | 是  | \\-        | 合法ID            | asset_001     |\n  | visibility | string        | 否  | internal | internal/public | public        |\n  | categories | array<string> | 否  | \\[\\]       | 分类ID数组          | [\"cat_sales\"] |\n- 成功响应：201 Created \n  - JSON：{ \"catalogId\": \"cat_001\", \"assetId\": \"asset_001\", \"status\": \"published\" }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"asset missing required metadata\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：提示完善元数据后重试。\n\n#### CAT-001 查询资产目录\n\n- 接口说明： \n  - 功能模块归属：资产目录与市场\n  - 核心业务逻辑：基于关键词、标签、分类检索目录条目。\n  - 系统级作用：资产发现与订阅入口。\n  - 使用场景说明：目录页面检索、订阅决策。\n- 接口端点： \n  - URL：/api/v1/catalog\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数： \n\n  | 参数名称     | 数据类型          | 必填 | 默认值 | 取值范围    | 示例          |\n  |----------|---------------|----|-----|---------|-------------|\n  | q        | string        | 否  | \"\"  | 0-200字符 | \"客户\"        |\n  | tags     | array<string> | 否  | \\[\\]  | 标签ID数组  | [\"t_vip\"]   |\n  | category | string        | 否  | \\-   | 分类ID    | \"cat_sales\" |\n  | page     | number        | 否  | 1   | \\>=1     | 1           |\n  | size     | number        | 否  | 20  | 1-100   | 20          |\n- 成功响应：200 OK \n  - JSON：{ \"items\": [{ \"catalogId\": \"cat_001\", \"assetId\": \"asset_001\", \"name\": \"客户画像\" }], \"page\": 1, \"size\": 20, \"total\": 12 }\n- 错误响应： \n  - 500 Internal Server Error：{ \"code\": \"INTERNAL_ERROR\", \"message\": \"search engine unavailable\" }\n- 错误码及处理： \n  - INTERNAL_ERROR：稍后重试；客户端可降级提示或回退本地缓存。\n\n#### API-001 发布API到网关\n\n- 接口说明： \n  - 功能模块归属：API管理\n  - 核心业务逻辑：根据API定义下发路由与策略至网关。\n  - 系统级作用：统一接入与治理的关键环节。\n  - 使用场景说明：API详情页发布操作，CI/CD自动发布。\n- 接口端点： \n  - URL：/api/v1/apis/{id}/publish\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称      | 数据类型   | 必填 | 默认值 | 取值范围          | 示例      |\n  |-----------|--------|----|-----|---------------|---------|\n  | id        | string | 是  | \\-   | 合法ID          | api_001 |\n  | env       | string | 是  | \\-   | dev/test/prod | prod    |\n  | rateLimit | number | 否  | 0   | \\>=0（0表示不限制）   | 1000    |\n- 成功响应：200 OK \n  - JSON：{ \"apiId\": \"api_001\", \"env\": \"prod\", \"status\": \"published\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"route conflict in gateway\" }\n- 错误码及处理： \n  - CONFLICT：调整路由或策略后重试；避免重复发布。\n\n#### API-002 查询API调用日志\n\n- 接口说明： \n  - 功能模块归属：API管理\n  - 核心业务逻辑：按时间范围与过滤条件返回调用日志。\n  - 系统级作用：可观测性与审计基础数据。\n  - 使用场景说明：日志页面、故障排查、审计。\n- 接口端点： \n  - URL：/api/v1/apis/{id}/logs\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：路径+查询 \n\n  | 参数名称   | 数据类型   | 必填 | 默认值 | 取值范围      | 示例                     |\n  |--------|--------|----|-----|-----------|------------------------|\n  | id     | string | 是  | \\-   | 合法ID      | api_001                |\n  | from   | string | 否  | \\-   | ISO8601时间 | \"2025-10-08T00:00:00Z\" |\n  | to     | string | 否  | \\-   | ISO8601时间 | \"2025-10-09T00:00:00Z\" |\n  | status | number | 否  | \\-   | 100-599   | 200                    |\n  | limit  | number | 否  | 100 | 1-1000    | 500                    |\n- 成功响应：200 OK \n  - JSON：{ \"items\": [{ \"ts\": \"2025-10-08T10:00:00Z\", \"status\": 200, \"latencyMs\": 45, \"path\": \"/customer/{id}\" }], \"count\": 500 }\n- 错误响应： \n  - 403 Forbidden：{ \"code\": \"FORBIDDEN\", \"message\": \"insufficient privilege\" }\n- 错误码及处理： \n  - FORBIDDEN：提示权限不足；引导申请权限或联系管理员。\n\n#### TAG-001 绑定资产标签\n\n- 接口说明： \n  - 功能模块归属：资产标签与分类\n  - 核心业务逻辑：为指定资产批量绑定标签。\n  - 系统级作用：支撑检索与运营策略。\n  - 使用场景说明：标签维护页面、资产运营。\n- 接口端点： \n  - URL：/api/v1/assets/{id}/tags\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称 | 数据类型          | 必填 | 默认值 | 取值范围 | 示例                      |\n  |------|---------------|----|-----|------|-------------------------|\n  | id   | string        | 是  | \\-   | 合法ID | asset_001               |\n  | tags | array<string> | 是  | \\-   | 非空数组 | [\"t_vip\",\"t_sensitive\"] |\n- 成功响应：200 OK \n  - JSON：{ \"assetId\": \"asset_001\", \"boundTags\": [\"t_vip\",\"t_sensitive\"] }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"tags must not be empty\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：修正请求后重试。\n\n#### MOD-001 创建模型版本\n\n- 接口说明： \n  - 功能模块归属：模型与主题域\n  - 核心业务逻辑：为指定模型创建新版本并记录变更摘要。\n  - 系统级作用：模型版本化与一致性治理。\n  - 使用场景说明：模型编辑后的版本发布。\n- 接口端点： \n  - URL：/api/v1/models/{id}/versions\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称          | 数据类型   | 必填 | 默认值 | 取值范围    | 示例                   |\n  |---------------|--------|----|-----|---------|----------------------|\n  | id            | string | 是  | \\-   | 合法ID    | model_001            |\n  | versionName   | string | 是  | \\-   | 1-50字符  | \"v1.1\"               |\n  | changeSummary | string | 否  | \"\"  | 0-500字符 | \"新增字段customer_level\" |\n- 成功响应：201 Created \n  - JSON：{ \"modelId\": \"model_001\", \"versionId\": \"ver_002\", \"versionName\": \"v1.1\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"versionName already exists\" }\n- 错误码及处理： \n  - CONFLICT：调整版本名后重试。\n\n#### DASH-001 查询仪表盘指标\n\n- 接口说明： \n  - 功能模块归属：仪表盘与资产地图\n  - 核心业务逻辑：返回治理与运营指标的聚合结果。\n  - 系统级作用：管理看板与趋势分析数据源。\n  - 使用场景说明：首页仪表盘、运营看板加载。\n- 接口端点： \n  - URL：/api/v1/metrics/dashboard\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数： \n\n  | 参数名称           | 数据类型    | 必填 | 默认值   | 取值范围       | 示例   |\n  |----------------|---------|----|-------|------------|------|\n  | range          | string  | 否  | 7d    | 1d/7d/30d  | 30d  |\n  | includeDetails | boolean | 否  | false | true/false | true |\n- 成功响应：200 OK \n  - JSON：{ \"kpis\": { \"assets\": 1200, \"standards\": 80, \"qualityViolations\": 25 }, \"trends\": [{\"metric\":\"assets\",\"points\":[...] }] }\n- 错误响应： \n  - 503 Service Unavailable：{ \"code\": \"SERVICE_UNAVAILABLE\", \"message\": \"metrics backend busy\" }\n- 错误码及处理： \n  - SERVICE_UNAVAILABLE：建议稍后重试；客户端可做退避（指数回退）。\n\n#### SEC-001 查询当前用户信息\n\n- 接口说明： \n  - 功能模块归属：治理与合规\n  - 核心业务逻辑：返回当前登录用户基本信息与角色。\n  - 系统级作用：前端权限控制与审计上下文。\n  - 使用场景说明：登录后初始化、权限判断。\n- 接口端点： \n  - URL：/api/v1/auth/me\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：无\n- 成功响应：200 OK \n  - JSON：{ \"userId\": \"u_123\", \"name\": \"Alice\", \"roles\": [\"admin\",\"viewer\"], \"permissions\": [\"asset.read\",\"api.publish\"] }\n- 错误响应： \n  - 401 Unauthorized：{ \"code\": \"UNAUTHORIZED\", \"message\": \"token expired\" }\n- 错误码及处理： \n  - UNAUTHORIZED：刷新令牌或重新登录。\n\n#### SEC-002 评估权限策略\n\n- 接口说明： \n  - 功能模块归属：治理与合规\n  - 核心业务逻辑：对指定资源与动作进行策略评估，返回允许/拒绝与原因。\n  - 系统级作用：后端统一鉴权与解释性审计。\n  - 使用场景说明：敏感操作前置校验。\n- 接口端点： \n  - URL：/api/v1/permissions/evaluate\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body）： \n\n  | 参数名称     | 数据类型   | 必填 | 默认值  | 取值范围    | 示例                                   |\n  |----------|--------|----|------|---------|--------------------------------------|\n  | resource | string | 是  | \\-    | 1-100字符 | \"asset\"                              |\n  | action   | string | 是  | \\-    | 1-50字符  | \"publish\"                            |\n  | subject  | object | 否  | 当前用户 | JSON对象  | {\"userId\":\"u_123\",\"roles\":[\"admin\"]} |\n- 成功响应：200 OK \n  - JSON：{ \"decision\": \"allow\", \"reasons\": [\"role:admin\"], \"policyId\": \"pol_777\" }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"resource/action required\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：修正参数后重试。\n\n---\n\n### 5.4 标准错误码与处理建议\n\n| 错误码                 | HTTP状态码 | 错误信息示例          | 客户端处理建议      | 重试机制    |\n|---------------------|---------|-----------------|--------------|---------|\n| INVALID_ARGUMENT    | 400     | 参数非法或超出范围       | 提示用户修正参数     | 否，修正后重试 |\n| UNAUTHORIZED        | 401     | 认证失败或令牌过期       | 刷新令牌/重新登录    | 否       |\n| FORBIDDEN           | 403     | 权限不足            | 引导申请权限或联系管理员 | 否       |\n| NOT_FOUND           | 404     | 资源不存在           | 引导返回列表或刷新数据  | 否       |\n| CONFLICT            | 409     | 资源冲突（命名/版本/路由等） | 调整后重试        | 否       |\n| RATE_LIMITED        | 429     | 触发限流            | 等待后重试，建议退避   | 是（指数退避） |\n| INTERNAL_ERROR      | 500     | 服务器内部错误         | 友好提示，稍后重试    | 是       |\n| SERVICE_UNAVAILABLE | 503     | 服务不可用/后端繁忙      | 退避重试或降级显示    | 是       |\n| TIMEOUT             | 504     | 上游超时            | 稍后重试，优化请求    | 是       |\n\n- 统一错误响应结构： \n  - { \"code\": \"...\", \"message\": \"...\", \"details\": { ... }, \"requestId\": \"...\", \"retryable\": true|false }\n- 客户端重试建议： \n  - 对429/500/503/504实施指数回退（如base=500ms, factor=2, max=5次）。\n  - 对400/401/403/404不建议自动重试，需用户/权限/资源层面修正。\n\n---\n\n注：后续若需扩展PATCH端点、批量操作（/bulk）或导出下载（/export），应遵循上述RESTful与错误码规范，并在接口清单与详细说明中补充完整要素。\n\n## 6. 数据库设计\n\n### 6.1 设计概述\n\n- 数据库类型选型：\n  - MySQL（关系型事务库，核心业务库） \n    - 技术理由：支持ACID事务（InnoDB）、严格的主外键与约束、丰富索引（BTREE、FULLTEXT、SPATIAL）、分区与复制能力（主从/组复制）、原生JSON数据类型支持，适合多类型数据的统一治理与强一致写入场景。\n    - 应用场景：资产目录、元数据字典、标准规范、质量规则与任务、API发布与订阅、权限与审计等核心业务数据持久化。\n  - Neo4j（图数据库，关系/血缘管理） \n    - 技术理由：原生图存储与遍历，Cypher查询语义友好，适合复杂多跳的实体关系、血缘追踪与影响分析；支持关系版本化与属性化维护。\n    - 应用场景：元数据实体之间的血缘关系（上游/下游）、资产到模型/API的依赖关系、术语关联网络等。\n  - Elasticsearch（全文检索与聚合分析） \n    - 技术理由：倒排索引、中文分词、同义词与拼写纠错，支持聚合（terms、date_histogram）与排序，高并发查询性能优良。\n    - 应用场景：资产/标准/术语/API的统一搜索、目录筛选、标签/分类聚合、文档说明检索等。\n  - Redis（缓存与限流） \n    - 技术理由：内存Key-Value、高性能、支持TTL、布隆过滤器、发布/订阅与分布式锁；适合热数据与令牌/会话状态。\n    - 应用场景：鉴权缓存、热门资产/API缓存、速率限制计数、质量任务队列调度辅助等。\n  - MinIO/S3（对象存储） \n    - 技术理由：兼容S3协议，适合大对象与文件；支持版本控制与分层存储，低成本扩展。\n    - 应用场景：数据样例、数据字典附件、标准规范附件、API规格文档（OpenAPI/AsyncAPI）、模型文件与评估报告等。\n- 核心数据库设计目标：\n  - 数据完整性： \n    - 全面主键/外键约束、唯一性约束、非空约束与检查约束；通过事务确保跨表写入一致性。\n    - 版本化与审计字段（created_at/updated_at/created_by/updated_by），可追溯。\n  - 安全性： \n    - 行级/列级访问控制（资源+动作），最小权限原则；敏感字段加密/脱敏。\n    - 审计日志与请求链路ID，满足合规要求。\n  - 性能与可扩展性： \n    - 热路径索引设计（前缀、覆盖索引）、分区（时间/组织维度）、读写分离（必要时）。\n    - 缓存与异步化（Redis）、检索侧加速（Elasticsearch）。\n  - 大数据处理能力： \n    - 大表分区/归档策略、批量导入/导出流水线、异构索引构建与回填。\n    - 线索数据（日志、质量事件）按时间分区与生命周期管理。\n- 设计原则：\n  - 数据分层与域划分： \n    - 以“元数据/治理/交付/安全”四域划分业务库与对象存储；不同域内表按功能模块组织，降低耦合。\n  - 规范化与适度反规范化： \n    - 以第三范式为基准；对高频查询的聚合维度适度冗余（如资产统计字段、标签计数），同时保留来源事实。\n    - 利用JSONB承载可扩展属性，明确字段字典与校验规则。\n  - 事务与一致性管理： \n    - 单库内强一致交易；跨系统通过“Outbox事件+幂等消费+重试”的最终一致性模式。\n    - 写入接口要求幂等键（自然键或业务键），避免重复。\n  - 性能优化策略： \n    - 索引策略（选择性、覆盖度、维护成本）、合理分页与游标、批量接口（批处理大小与事务边界）。\n    - 观测性：慢查询采集、执行计划分析、容量与热点监控，定期优化。\n\n### 6.2 数据模型\n\n- 概念ER图：\n  - 见：![数据资产平台概念ER图](./images/er-conceptual.svg)\n  - 说明：该图将实体分为“来源与元数据”“标准/质量/模型”“资产/API/市场”“安全与权限”四类，展示主键、关键属性与主要关系。\n- 核心实体与关系（文本说明与约束）：\n  1. DataSource（数据源）\n  - 主键：id（UUID）\n  - 关键字段：code（唯一）、name、type（db/file/api）、conn_profile（JSONB）、owner_org、status\n  - 约束：code唯一；type枚举；状态校验；与资产/元数据建立外键引用。\n  - 用途：描述来源系统与连接信息，资产与元数据均可归属到数据源。\n  1. MetadataEntity（元数据实体）\n  - 主键：id（UUID）\n  - 外键：data_source_id → DataSource.id\n  - 字段：namespace、name、entity_type（table/view/file/api）、schema_json（JSONB）、version、description\n  - 约束：namespace+name唯一；entity_type枚举；版本递增。\n  - 用途：统一抽象物理/逻辑对象，供血缘、标准、术语链接。\n  1. BusinessGlossaryTerm（术语）\n  - 主键：id（UUID）\n  - 字段：term、definition、synonyms（JSONB）、owner_org、status\n  - 关系（N:N）：与MetadataEntity通过GlossaryTermLink（term_id, entity_id）关联。\n  - 约束：term唯一；状态枚举（draft/published/retired）。\n  - 用途：统一业务术语定义与实体映射，提升认知一致性。\n  1. LineageEdge（血缘边）\n  - 主键：id（UUID）或复合键（from_entity_id, to_entity_id, relation_type, version）\n  - 字段：from_entity_id → MetadataEntity.id，to_entity_id → MetadataEntity.id，relation_type（derive/consume/export），version，properties（JSONB）\n  - 约束：防止自环；版本与关系类型校验。\n  - 用途：描述上游/下游依赖，支持影响分析与可视化。\n  1. StandardItem（标准条目）\n  - 主键：id（UUID）\n  - 外键：entity_id → MetadataEntity.id（可选）\n  - 字段：code（唯一）、name、category（naming/schema/security/quality）、content（JSONB）、effective_from、effective_to\n  - 约束：时间有效性；category枚举；code唯一。\n  - 用途：定义治理标准（命名、模式、安全、质量等）。\n  1. ValidationRule（质量规则）\n  - 主键：id（UUID）\n  - 可引用：standard_item_id → StandardItem.id（可选）\n  - 字段：name、rule_type（not_null/range/regex/duplicate/custom）、expression（JSONB/SQL）、severity（info/warn/error）\n  - 用途：对资产或实体实施数据质量校验。\n  1. QualityTask（质量任务）\n  - 主键：id（UUID）\n  - 外键：asset_id → Asset.id（或entity_id → MetadataEntity.id）、rule_id → ValidationRule.id\n  - 字段：schedule（cron/once）、status（pending/running/succeeded/failed）、last_run_at、stats（JSONB）\n  - 用途：规则的调度与执行记录。\n  1. QualityIssue（质量问题）\n  - 主键：id（UUID）\n  - 外键：task_id → QualityTask.id\n  - 字段：occurred_at、sample_ref（对象存储Key）、details（JSONB）、status（open/triaged/resolved/ignored）\n  - 用途：保存质量异常与处置过程。\n  1. Model（数据/算法模型）\n  - 主键：id（UUID）\n  - 关系：input_asset_id → Asset.id（可选），或input_entity_id → MetadataEntity.id\n  - 字段：name、type（feature/etl/ml）、owner_org、description\n  - 用途：沉淀数据加工/机器学习等可复用模型。\n  1. ModelVersion（模型版本）\n  - 主键：id（UUID）\n  - 外键：model_id → Model.id\n  - 字段：version（语义化版本）、artifacts_ref（对象存储Key）、metrics（JSONB）、status\n  - 用途：版本化管理与效果评估。\n  1. Asset（数据资产）\n  - 主键：id（UUID）\n  - 外键：data_source_id → DataSource.id，category_id → AssetCategory.id\n  - 字段：code（唯一）、name、type（dataset/table/view/file/api）、schema_json（JSONB）、owner_org、lifecycle（draft/published/retired）、stats（JSONB）\n  - 关系： \n    - N:N 标签：通过AssetTag（asset_id, tag_id）与Tag关联。\n    - 1:N API：一个资产可暴露多个API。\n    - N:1 元数据：可映射到具体MetadataEntity。\n  - 用途：统一对可交付的数据产品进行编目与治理。\n  1. AssetCategory（资产分类）\n  - 主键：id（UUID）\n  - 字段：code（唯一）、name、parent_id（自关联）、path（冗余层级路径）\n  - 用途：目录树组织与权限/订阅范围控制。\n  1. TagGroup（标签组）与 Tag（标签）\n  - TagGroup主键：id（UUID）；字段：code、name、scope（asset/api/metadata）\n  - Tag主键：id（UUID）；外键：group_id → TagGroup.id；字段：code（唯一）、name、color\n  - 用途：主题化管理标签，支持资产/API/实体的多维打标。\n  1. API（服务接口）\n  - 主键：id（UUID）\n  - 外键：asset_id → Asset.id\n  - 字段：code（唯一）、name、version、spec_ref（对象存储Key，OpenAPI/GraphQL）、rate_limit、auth_type、status\n  - 用途：对外提供数据服务能力，支持发布/变更/下架。\n  1. APILog（接口访问日志）\n  - 主键：id（UUID）或复合键（api_id, occurred_at, request_id）\n  - 外键：api_id → API.id\n  - 字段：occurred_at、latency_ms、status_code、client_id、error_code、extra（JSONB）\n  - 用途：审计与性能分析，作为大表按时间分区。\n  1. MarketListing（数据市场上架）\n  - 主键：id（UUID）\n  - 外键：asset_id → Asset.id\n  - 字段：title、summary、pricing（JSONB）、visibility（public/internal/restricted）、status（draft/review/published/retired）\n  - 用途：资产对外展示与交易配置。\n  1. Subscription（订阅）\n  - 主键：id（UUID）\n  - 外键：listing_id → MarketListing.id，user_id → User.id\n  - 字段：subs_type（trial/purchase/quota）、quota、expired_at、status\n  - 用途：用户对上架资产的订阅与额度管理。\n  1. User（用户）、Role（角色）、Permission（权限）\n  - User主键：id（UUID）；字段：username（唯一）、display_name、email、org、status\n  - Role主键：id（UUID）；字段：code（唯一）、name、scope\n  - Permission主键：id（UUID）；字段：code（唯一）、name、resource、action\n  - 关系（N:N）： \n    - UserRole（user_id, role_id）\n    - RolePermission（role_id, permission_id）\n  - 用途：统一的RBAC权限与资源动作控制。\n- 主要关系汇总（与ER图一致）：\n  - DataSource 1:N MetadataEntity，DataSource 1:N Asset。\n  - MetadataEntity N:N BusinessGlossaryTerm（GlossaryTermLink）。\n  - MetadataEntity 通过 LineageEdge 形成有向血缘图（同库或Neo4j存储）。\n  - Asset 1:N API，Asset N:N Tag（AssetTag），Asset N:1 AssetCategory。\n  - API 1:N APILog；MarketListing N:1 Asset；Subscription N:1 MarketListing 与 N:1 User。\n  - User N:N Role（UserRole），Role N:N Permission（RolePermission）。\n- 一致性与约束策略：\n  - 所有外键默认RESTRICT删除，重要对象采用软删除（deleted=false），避免级联误删；日志类按分区与生命周期归档。\n  - 关键自然键（code/term/username）建立唯一索引；高频查询列建立覆盖索引，结合分区提高范围检索性能。\n  - 变更事件（资产发布、API更新、标准生效）通过Outbox事件异步分发到Elasticsearch与缓存层，确保最终一致。\n  - 敏感字段（邮箱、凭据、连接信息）按字段级加密与访问控制，审计日志全量保留。\n\n### 6.3 数据表设计（MySQL）\n\n说明与约定：\n\n- 数据库：MySQL 8.0（InnoDB，utf8mb4）。遵循第三范式（3NF）与键值分离原则，在高频检索场景下适度反范式（如冗余path、聚合统计摘要）。\n- 通用审计字段：id（BIGINT UNSIGNED，自增，PK）、created_at（DATETIME，默认 CURRENT_TIMESTAMP）、updated_at（DATETIME，默认 CURRENT_TIMESTAMP ON UPDATE）、created_by/updated_by（BIGINT UNSIGNED，可空）、is_deleted（TINYINT(1) 默认0）、deleted_at（DATETIME 可空）。为避免冗长，以下表格如无特别说明，均隐含上述审计字段。JSON 用于可变结构（schema/config/extra），并结合必要的覆盖索引保证检索能力。\n\n#### 6.3.1 基础与安全域\n\n表：user（用户）\n\n- 设计意图：承载平台登录与主体信息，username 唯一；password_hash 仅存散列；status 控制启用/禁用。\n\n| 字段名           | 数据类型            | 长度  | 允许为空 | 默认值      | 自增 | 字段注释                      |\n|---------------|-----------------|-----|------|----------|----|---------------------------|\n| id            | BIGINT UNSIGNED | \\-   | 否    | \\-        | 是  | 主键，自增ID                   |\n| username      | VARCHAR         | 64  | 否    | \\-        | 否  | 登录用户名（唯一）                 |\n| password_hash | VARCHAR         | 255 | 否    | \\-        | 否  | 密码哈希                      |\n| display_name  | VARCHAR         | 128 | 是    | NULL     | 否  | 显示名称                      |\n| email         | VARCHAR         | 255 | 是    | NULL     | 否  | 邮箱                        |\n| phone         | VARCHAR         | 32  | 是    | NULL     | 否  | 手机号                       |\n| status        | VARCHAR         | 32  | 否    | 'active' | 否  | 状态：active/locked/disabled |\n| org           | VARCHAR         | 128 | 是    | NULL     | 否  | 所属组织                      |\n| extra         | JSON            | \\-   | 是    | NULL     | 否  | 额外信息（头像、偏好等）              |\n\n表：role（角色）\n\n- 设计意图：系统角色，code 唯一，支持跨模块授权分配。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                |\n|-------------|-----------------|-----|------|------|----|---------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                  |\n| code        | VARCHAR         | 64  | 否    | \\-    | 否  | 角色编码（唯一）            |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 角色名称                |\n| scope       | VARCHAR         | 64  | 是    | NULL | 否  | 作用域（module/project） |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                  |\n\n表：permission（权限）\n\n- 设计意图：以资源+动作构成权限点，便于细粒度控制与审计。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                   |\n|-------------|-----------------|-----|------|------|----|------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                     |\n| code        | VARCHAR         | 64  | 否    | \\-    | 否  | 权限编码（唯一）               |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 权限名称                   |\n| resource    | VARCHAR         | 128 | 否    | \\-    | 否  | 资源标识（模块/接口）            |\n| action      | VARCHAR         | 32  | 否    | \\-    | 否  | 操作（read/write/execute） |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                     |\n\n表：user_role（用户-角色，M:N）\n\n- 设计意图：用户与角色多对多关联，复合唯一避免重复授权。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释             |\n|------------|-----------------|----|------|-------------------|----|------------------|\n| user_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 用户ID（FK→user.id） |\n| role_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 角色ID（FK→role.id） |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间             |\n\n表：role_permission（角色-权限，M:N）\n\n- 设计意图：角色绑定权限，支持按资源维度授权。\n\n| 字段名           | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                   |\n|---------------|-----------------|----|------|-------------------|----|------------------------|\n| role_id       | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 角色ID（FK→role.id）       |\n| permission_id | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 权限ID（FK→permission.id） |\n| created_at    | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                   |\n\n#### 6.3.2 数据源与元数据域\n\n设计对齐与目标\n\n- 严格对齐 <mcfile name=\"PRD-数据资产管理平台.md\" path=\"d:\\\\工作文件\\\\产业大脑\\\\数据资产管理平台\\\\docs\\\\business-design\\\\PRD-数据资产管理平台.md\"></mcfile> 第4.2章（4.2.1 元数据目录、4.2.2 数据源管理、4.2.3 元数据采集），覆盖“采集→登记→索引→检索/展示→变更/版本→血缘”的端到端能力。\n- 设计原则：减少JSON重字段存储的查询开销，采用规范化实体拆分与必要的索引；敏感信息不落库明文，采用密钥引用；面向检索与血缘的高频查询优化（BTREE/FullText/组合索引）。\n\n表：data_source（数据源）\n\n- 设计意图：统一管理数据源的连接/鉴权与运行状态，支撑连接测试与采集任务调度；避免明文凭据存储，采用密钥引用。\n\n| 字段名             | 数据类型            | 长度                                                                                  | 允许为空 | 默认值               | 自增 | 字段注释              |\n|-----------------|-----------------|-------------------------------------------------------------------------------------|------|-------------------|----|-------------------|\n| id              | BIGINT UNSIGNED | \\-                                                                                   | 否    | \\-                 | 是  | 主键                |\n| code            | VARCHAR         | 64                                                                                  | 否    | \\-                 | 否  | 数据源编码（唯一）         |\n| name            | VARCHAR         | 128                                                                                 | 否    | \\-                 | 否  | 数据源名称             |\n| type            | ENUM            | ('mysql','postgres','oracle','sqlserver','mongo','redis','es','hive','kafka','api') | 否    | \\-                 | 否  | 数据源类型             |\n| host            | VARCHAR         | 255                                                                                 | 是    | NULL              | 否  | 主机/地址（API可为空）     |\n| port            | INT UNSIGNED    | \\-                                                                                   | 是    | NULL              | 否  | 端口                |\n| database_name   | VARCHAR         | 128                                                                                 | 是    | NULL              | 否  | 数据库/仓库名           |\n| schema_name     | VARCHAR         | 128                                                                                 | 是    | NULL              | 否  | Schema（可选）        |\n| auth_type       | ENUM            | ('username_password','token','conn_string','key_ref')                               | 否    | \\-                 | 否  | 认证方式              |\n| secret_ref      | VARCHAR         | 255                                                                                 | 是    | NULL              | 否  | 密钥引用（外部秘密管理ID）    |\n| conn_config     | JSON            | \\-                                                                                   | 是    | NULL              | 否  | 连接配置（SSL/参数），脱敏展示 |\n| owner           | VARCHAR         | 128                                                                                 | 是    | NULL              | 否  | 所属业务/团队           |\n| status          | ENUM            | ('active','disabled','error')                                                       | 否    | 'active'          | 否  | 状态                |\n| connectivity    | TINYINT(1)      | \\-                                                                                   | 否    | 0                 | 否  | 可达性（0/1）          |\n| last_connect_at | DATETIME        | \\-                                                                                   | 是    | NULL              | 否  | 最近连接测试时间          |\n| last_sync_at    | DATETIME        | \\-                                                                                   | 是    | NULL              | 否  | 最近采集同步时间          |\n| created_by      | BIGINT UNSIGNED | \\-                                                                                   | 否    | \\-                 | 否  | 创建人（FK→user.id）   |\n| updated_by      | BIGINT UNSIGNED | \\-                                                                                   | 否    | \\-                 | 否  | 更新人（FK→user.id）   |\n| created_at      | DATETIME        | \\-                                                                                   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间              |\n| updated_at      | DATETIME        | \\-                                                                                   | 否    | CURRENT_TIMESTAMP | 否  | 更新时间（ON UPDATE）   |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；组合唯一（type, host, port, database_name, schema_name）可选。\n- 索引建议：type、status、owner、last_sync_at；连接测试/采集任务按 last_sync_at 倒序。\n- 安全约束：不存储明文凭据，secret_ref 仅保存外部密钥系统的引用。\n\n表：data_source_sync_task（数据源采集任务）\n\n- 设计意图：记录元数据采集任务与执行摘要，对齐 PRD 4.2.3 的采集与状态监控。\n\n| 字段名          | 数据类型            | 长度                                       | 允许为空 | 默认值       | 自增 | 字段注释                     |\n|--------------|-----------------|------------------------------------------|------|-----------|----|--------------------------|\n| id           | BIGINT UNSIGNED | \\-                                        | 否    | \\-         | 是  | 主键                       |\n| source_id    | BIGINT UNSIGNED | \\-                                        | 否    | \\-         | 否  | 数据源ID（FK→data_source.id） |\n| task_type    | ENUM            | ('full','incremental','heartbeat')       | 否    | \\-         | 否  | 任务类型                     |\n| status       | ENUM            | ('pending','running','success','failed') | 否    | 'pending' | 否  | 任务状态                     |\n| started_at   | DATETIME        | \\-                                        | 是    | NULL      | 否  | 开始时间                     |\n| finished_at  | DATETIME        | \\-                                        | 是    | NULL      | 否  | 完成时间                     |\n| summary      | JSON            | \\-                                        | 是    | NULL      | 否  | 采集摘要（表/列数量、耗时、错误）        |\n| triggered_by | BIGINT UNSIGNED | \\-                                        | 是    | NULL      | 否  | 触发人（FK→user.id）          |\n\n索引建议：\n\n- source_id+started_at（倒序）；status；task_type。\n\n表：metadata_database（数据库/仓库）\n\n- 设计意图：将“数据库/仓库”实体规范化，减少在 metadata_entity.schema 中的重数据存储，提升检索与过滤效率。\n\n| 字段名         | 数据类型            | 长度                      | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|-------------|-----------------|-------------------------|------|-------------------|----|--------------------------|\n| id          | BIGINT UNSIGNED | \\-                       | 否    | \\-                 | 是  | 主键                       |\n| source_id   | BIGINT UNSIGNED | \\-                       | 否    | \\-                 | 否  | 数据源ID（FK→data_source.id） |\n| name        | VARCHAR         | 128                     | 否    | \\-                 | 否  | 名称                       |\n| full_name   | VARCHAR         | 255                     | 是    | NULL              | 否  | 全名（系统/实例.库）              |\n| description | TEXT            | \\-                       | 是    | NULL              | 否  | 描述                       |\n| charset     | VARCHAR         | 64                      | 是    | NULL              | 否  | 字符集                      |\n| collate     | VARCHAR         | 64                      | 是    | NULL              | 否  | 排序规则                     |\n| status      | ENUM            | ('active','deprecated') | 否    | 'active'          | 否  | 状态                       |\n| created_at  | DATETIME        | \\-                       | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                     |\n| updated_at  | DATETIME        | \\-                       | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                     |\n\n唯一性与约束：\n\n- 复合唯一：source_id+name。\n- 索引建议：source_id、status。\n\n表：metadata_schema（Schema）\n\n- 设计意图：规范化 Schema，支撑“库/Schema/表/列”的层级过滤与目录构建。\n\n| 字段名         | 数据类型            | 长度                      | 允许为空 | 默认值               | 自增 | 字段注释                           |\n|-------------|-----------------|-------------------------|------|-------------------|----|--------------------------------|\n| id          | BIGINT UNSIGNED | \\-                       | 否    | \\-                 | 是  | 主键                             |\n| database_id | BIGINT UNSIGNED | \\-                       | 否    | \\-                 | 否  | 数据库ID（FK→metadata_database.id） |\n| name        | VARCHAR         | 128                     | 否    | \\-                 | 否  | 名称                             |\n| full_name   | VARCHAR         | 255                     | 是    | NULL              | 否  | 全名（库.Schema）                   |\n| description | TEXT            | \\-                       | 是    | NULL              | 否  | 描述                             |\n| status      | ENUM            | ('active','deprecated') | 否    | 'active'          | 否  | 状态                             |\n| created_at  | DATETIME        | \\-                       | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                           |\n| updated_at  | DATETIME        | \\-                       | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                           |\n\n唯一性与约束：\n\n- 复合唯一：database_id+name；索引：database_id、status。\n\n表：metadata_table（数据表/视图）\n\n- 设计意图：表级元数据的规范化实体，支撑列表/详情/比对/血缘与采集的高频查询；分离统计属性与结构属性。\n\n| 字段名                | 数据类型            | 长度                                 | 允许为空 | 默认值               | 自增 | 字段注释                            |\n|--------------------|-----------------|------------------------------------|------|-------------------|----|---------------------------------|\n| id                 | BIGINT UNSIGNED | \\-                                  | 否    | \\-                 | 是  | 主键                              |\n| schema_id          | BIGINT UNSIGNED | \\-                                  | 否    | \\-                 | 否  | SchemaID（FK→metadata_schema.id） |\n| name               | VARCHAR         | 128                                | 否    | \\-                 | 否  | 表/视图名称                          |\n| full_name          | VARCHAR         | 255                                | 是    | NULL              | 否  | 全名（库.Schema.表）                  |\n| table_type         | ENUM            | ('table','view','external')        | 否    | 'table'           | 否  | 类型                              |\n| row_count          | BIGINT UNSIGNED | \\-                                  | 是    | NULL              | 否  | 行数（采集统计）                        |\n| storage_size_bytes | BIGINT UNSIGNED | \\-                                  | 是    | NULL              | 否  | 存储大小（采集统计）                      |\n| last_ddl_time      | DATETIME        | \\-                                  | 是    | NULL              | 否  | 最近DDL时间                         |\n| business_semantic  | TEXT            | \\-                                  | 是    | NULL              | 否  | 业务语义说明                          |\n| lifecycle_status   | ENUM            | ('active','deprecated','archived') | 否    | 'active'          | 否  | 生命周期状态                          |\n| partition_info     | JSON            | \\-                                  | 是    | NULL              | 否  | 分区/分桶信息                         |\n| version_no         | VARCHAR         | 32                                 | 是    | NULL              | 否  | 版本编号（快照）                        |\n| created_at         | DATETIME        | \\-                                  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                            |\n| updated_at         | DATETIME        | \\-                                  | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                            |\n\n唯一性与约束：\n\n- 复合唯一：schema_id+name；索引：table_type、lifecycle_status、last_ddl_time、row_count、storage_size_bytes。\n\n表：metadata_column（字段）\n\n- 设计意图：字段级元数据的规范化实体，支撑详情展示、标准映射与检索筛选；与 PRD 的列表与详情字段一致。\n\n| 字段名              | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                                 |\n|------------------|-----------------|-----|------|-------------------|----|--------------------------------------|\n| id               | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                                   |\n| table_id         | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 表ID（FK→metadata_table.id）            |\n| name             | VARCHAR         | 128 | 否    | \\-                 | 否  | 字段名                                  |\n| data_type        | VARCHAR         | 64  | 否    | \\-                 | 否  | 数据类型                                 |\n| length           | INT UNSIGNED    | \\-   | 是    | NULL              | 否  | 长度（字符串）                              |\n| precision        | INT UNSIGNED    | \\-   | 是    | NULL              | 否  | 精度（数值）                               |\n| nullable         | TINYINT(1)      | \\-   | 否    | 1                 | 否  | 可为空（0/1）                             |\n| is_pk            | TINYINT(1)      | \\-   | 否    | 0                 | 否  | 主键（0/1）                              |\n| is_fk            | TINYINT(1)      | \\-   | 否    | 0                 | 否  | 外键（0/1）                              |\n| default_value    | VARCHAR         | 256 | 是    | NULL              | 否  | 默认值（脱敏展示）                            |\n| comment          | VARCHAR         | 512 | 是    | NULL              | 否  | 注释                                   |\n| order_no         | INT UNSIGNED    | \\-   | 是    | NULL              | 否  | 字段序号                                 |\n| std_element_id   | BIGINT UNSIGNED | \\-   | 是    | NULL              | 否  | 数据元标准ID（FK→standard_element.id）      |\n| code_set_id      | BIGINT UNSIGNED | \\-   | 是    | NULL              | 否  | 代码集ID（FK→code_set.id）                |\n| glossary_term_id | BIGINT UNSIGNED | \\-   | 是    | NULL              | 否  | 业务术语ID（FK→business_glossary_term.id） |\n| created_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                 |\n| updated_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                                 |\n\n索引建议：\n\n- 复合唯一：table_id+name；筛选索引：table_id、std_element_id、code_set_id、glossary_term_id、is_pk、is_fk、data_type。\n\n表：metadata_version（元数据版本快照）\n\n- 设计意图：记录实体的版本快照，用于版本比对与回溯，对齐 PRD 的“版本管理与比对”。\n\n| 字段名           | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释            |\n|---------------|-----------------|----------------------------------------|------|-------------------|----|-----------------|\n| id            | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键              |\n| entity_type   | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型            |\n| entity_id     | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID（对应类型FK）    |\n| version_no    | VARCHAR         | 32                                     | 否    | \\-                 | 否  | 版本号             |\n| snapshot_json | JSON            | \\-                                      | 否    | \\-                 | 否  | 快照内容            |\n| created_at    | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 创建时间            |\n| created_by    | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 创建人（FK→user.id） |\n\n唯一性与约束：\n\n- 复合唯一：entity_type+entity_id+version_no；索引：entity_type+entity_id（查询最近版本）。\n\n表：metadata_search_index（检索索引）\n\n- 设计意图：为目录检索提供倒排/全词索引，含拼音与同义词，支撑 PRD 4.2.1 的“关键字/条件检索与排序”。\n\n| 字段名            | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释            |\n|----------------|-----------------|----------------------------------------|------|-------------------|----|-----------------|\n| id             | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键              |\n| entity_type    | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型            |\n| entity_id      | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID            |\n| tokens         | TEXT            | \\-                                      | 否    | \\-                 | 否  | 分词索引（含别名/注释关键字） |\n| pinyin_tokens  | TEXT            | \\-                                      | 是    | NULL              | 否  | 拼音索引            |\n| synonyms       | TEXT            | \\-                                      | 是    | NULL              | 否  | 同义词索引           |\n| popularity     | INT UNSIGNED    | \\-                                      | 否    | 0                 | 否  | 热度（访问/引用次数）     |\n| last_access_at | DATETIME        | \\-                                      | 是    | NULL              | 否  | 最近访问时间          |\n| updated_at     | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 更新时间            |\n\n索引建议：\n\n- FullText：tokens（InnoDB FULLTEXT）；BTREE：popularity、last_access_at、entity_type+entity_id。\n\n表：business_glossary_term（业务术语）\n\n- 设计意图：术语/口径的标准化定义，支撑术语到实体的引用与同义关系管理。\n\n| 字段名        | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释   |\n|------------|-----------------|-----|------|------|----|--------|\n| id         | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键     |\n| term       | VARCHAR         | 128 | 否    | \\-    | 否  | 术语（唯一） |\n| definition | TEXT            | \\-   | 否    | \\-    | 否  | 术语定义   |\n| domain     | VARCHAR         | 64  | 是    | NULL | 否  | 主题域    |\n| owner      | VARCHAR         | 128 | 是    | NULL | 否  | 维护人/团队 |\n| synonyms   | JSON            | \\-   | 是    | NULL | 否  | 同义词集合  |\n| extra      | JSON            | \\-   | 是    | NULL | 否  | 扩展属性   |\n\n唯一性与约束：\n\n- 唯一索引：term；可选全文索引：definition。\n\n表：glossary_term_entity_map（术语↔实体映射）\n\n- 设计意图：管理术语与元数据实体的关联，用于详情展示与检索增强。\n\n| 字段名           | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释                               |\n|---------------|-----------------|----------------------------------------|------|-------------------|----|------------------------------------|\n| term_id       | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 术语ID（FK→business_glossary_term.id） |\n| entity_type   | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型                               |\n| entity_id     | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID                               |\n| relation_type | ENUM            | ('defines','alias_of','related_to')    | 否    | 'defines'         | 否  | 关系类型                               |\n| created_at    | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                               |\n\n唯一性与约束：\n\n- 复合唯一：term_id+entity_type+entity_id；索引：entity_type+entity_id。\n\n表：metadata_entity_tag（实体标签映射）\n\n- 设计意图：将标签结构化为键值映射，替代 JSON tags 的查询瓶颈，支撑 PRD 的筛选与统计。\n\n| 字段名         | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释 |\n|-------------|-----------------|----------------------------------------|------|-------------------|----|------|\n| id          | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键   |\n| entity_type | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型 |\n| entity_id   | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID |\n| tag_key     | VARCHAR         | 64                                     | 否    | \\-                 | 否  | 标签键  |\n| tag_value   | VARCHAR         | 128                                    | 否    | \\-                 | 否  | 标签值  |\n| bound_at    | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 绑定时间 |\n\n唯一性与约束：\n\n- 复合唯一：entity_type+entity_id+tag_key；索引：tag_key+tag_value（筛选）。\n\n表：lineage_edge（血缘边）\n\n- 设计意图：抽象血缘关系，优化查询与去重；支撑上下游追踪与影响分析。\n\n| 字段名             | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释            |\n|-----------------|-----------------|----------------------------------------|------|-------------------|----|-----------------|\n| id              | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键              |\n| src_entity_type | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 源实体类型           |\n| src_entity_id   | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 源实体ID           |\n| dst_entity_type | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 目标实体类型          |\n| dst_entity_id   | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 目标实体ID          |\n| edge_type       | ENUM            | ('process','map','derive')             | 否    | 'process'         | 否  | 边类型             |\n| transform       | JSON            | \\-                                      | 是    | NULL              | 否  | 变换规则/SQL摘要      |\n| confidence      | DECIMAL         | 5,2                                    | 否    | 1.00              | 否  | 置信度             |\n| created_at      | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 创建时间            |\n| created_by      | BIGINT UNSIGNED | \\-                                      | 是    | NULL              | 否  | 创建人（FK→user.id） |\n\n唯一性与约束：\n\n- 复合唯一：src_entity_type+src_entity_id+dst_entity_type+dst_entity_id+edge_type（避免重复边）。\n- 索引建议：src_entity_type+src_entity_id、dst_entity_type+dst_entity_id、edge_type。\n\n表：change_log（变更记录）\n\n- 设计意图：记录实体变更前后快照，用于差异比对与审计追踪；支持按时间与类型检索。\n\n| 字段名             | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释              |\n|-----------------|-----------------|----------------------------------------|------|-------------------|----|-------------------|\n| id              | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键                |\n| entity_type     | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型              |\n| entity_id       | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID              |\n| change_type     | ENUM            | ('add','update','delete')              | 否    | \\-                 | 否  | 变更类型              |\n| before_snapshot | JSON            | \\-                                      | 是    | NULL              | 否  | 变更前快照             |\n| after_snapshot  | JSON            | \\-                                      | 是    | NULL              | 否  | 变更后快照             |\n| diff_summary    | JSON            | \\-                                      | 是    | NULL              | 否  | 差异摘要（字段新增/删除/变更等） |\n| operated_by     | BIGINT UNSIGNED | \\-                                      | 是    | NULL              | 否  | 操作人（FK→user.id）   |\n| operated_at     | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 操作时间              |\n\n索引建议：\n\n- entity_type+entity_id+operated_at（倒序）；change_type；operated_by。\n\n说明与对齐\n\n- 存储效率：通过实体规范化（database/schema/table/column）与标签/术语映射表，减少 JSON 结构的重复存储与横表扫描；字段层面按需建立筛选索引，满足 PRD 的列表/筛选/排序要求。\n- 查询性能：为血缘与检索提供组合索引与FullText索引（tokens），上下游追踪按 src/dst 维度建立覆盖索引；版本与变更按时间与实体维度提供高效检索。\n- 采集闭环：data_source + data_source_sync_task 支撑连接测试与采集任务，metadata\\_* 表承载采集产出；change_log/metadata_version用于回溯与比对；search_index用于目录检索增强。\n- 安全与合规：data_source 不存储明文凭据，统一采用 secret_ref；所有变更与采集任务记录操作者与时间戳，满足审计要求。\n\n#### 6.3.3 标准治理域\n\n表设计清单（汇总）：\n\n| 表名                                     | 设计意图                         | 主键 | 唯一约束                                   | 外键(FK)                                                                                                            | 索引建议                                                                                                     | 对齐PRD章节      | 备注                 |\n|----------------------------------------|------------------------------|----|----------------------------------------|-------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|--------------|--------------------|\n| word_root（词根主表）                        | 统一词根规范，支撑跨域命名与组合引用           | id | code 唯一                                | category_id → word_root_category.id                                                                               | code（唯一）                                                                                                 | 4.5.1 词根管理   | 状态/用途/域等属性         |\n| word_root_category（词根类别）               | 词根层级分类管理                     | id | code 唯一；可选 parent_id+name 层内唯一         | parent_id 自关联 → word_root_category.id                                                                             | parent_id+name（建议）                                                                                       | 4.5.1 词根管理   | 支撑目录化治理            |\n| word_root_usage_constraint（词根使用约束）     | 词根在 model/table/column 的使用规则 | id | root_id+scope 复合唯一                     | root_id → word_root.id                                                                                            | root_id+scope（唯一）                                                                                        | 4.5.1 词根管理   | 位置/大小写/重复等规则       |\n| standard_element（数据元标准）                | 数据元编号/定义/类型/值域与发布状态          | id | code 唯一                                | code_set_id → code_set.id；published_by/revoked_by → user.id                                                       | data_type、publish_status、enabled 组合索引（建议）                                                                | 4.5.2 数据标准   | 发布/撤销与值域约束         |\n| code_set（代码集标准）                        | 可枚举代码值集合及版本管理                | id | code 唯一；建议 code+version 唯一             | created_by/updated_by → user.id                                                                                   | code+version（唯一，建议）                                                                                      | 4.5.2 数据标准   | 版本/启用/发布           |\n| code_set_item（代码集条目）                   | 代码集的具体可选值                    | id | set_id+item_code 复合唯一                  | set_id → code_set.id                                                                                              | set_id（筛选）                                                                                               | 4.5.2 数据标准   | 枚举值条目              |\n| model_naming_refresh_freq（刷新频率标准）      | 模型命名中的刷新频率标准库                | id | code 唯一                                | created_by/updated_by → user.id                                                                                   | code（唯一）                                                                                                 | 4.5.5.1 逻辑建模 | 统一频率（h/d/w/m 等）    |\n| model_naming_stat_cycle（统计周期标准）        | 模型命名中的统计周期标准库                | id | code 唯一                                | created_by/updated_by → user.id                                                                                   | code（唯一）                                                                                                 | 4.5.5.1 逻辑建模 | 统一周期（小时/日/周 等）     |\n| model_naming_load_strategy（增量/全量）      | 模型命名中的加载策略标准库                | id | category+code 复合唯一                     | created_by/updated_by → user.id                                                                                   | category+code（唯一）                                                                                        | 4.5.5.1 逻辑建模 | 启用/禁用受控            |\n| table_naming_standard（表命名标准）           | 分层+主题域的表命名规则文本与启用状态          | id | layer+domain_id+standard_name 复合唯一     | domain_id → theme_domain.id；created_by/updated_by → user.id                                                       | layer+domain_id+enabled（筛选，建议）                                                                           | 4.5.4 表命名标准  | 用于“使用表数量”统计        |\n| table_naming_standard_ref（表命名标准引用）     | 记录命名标准被表/模型引用                | id | standard_id+ref_type+ref_id 复合唯一       | standard_id → table_naming_standard.id                                                                            | standard_id（筛选）                                                                                          | 4.5.4 表命名标准  | 删除/禁用前依赖校验         |\n| logical_model（逻辑模型）                    | 列表/新增/编辑/物化的核心实体             | id | name_en 全局唯一；domain_id+layer+name 复合唯一 | domain_id → theme_domain.id                                                                                       | domain_id+layer；status；is_materialized；created_at                                                        | 4.5.5.1 逻辑建模 | 刷新频率/策略枚举；目录只读     |\n| logical_model_materialization（物化任务）    | 记录模型物化任务与结果摘要                | id | \\-                                      | model_id → logical_model.id                                                                                       | model_id；status；triggered_at                                                                             | 4.5.5.1 逻辑建模 | 批量物化与审计            |\n| logical_model_field（逻辑模型-属性字段）         | 模型详情的字段明细与标准/代码集引用           | id | model_id+field_name_en 复合唯一            | model_id → logical_model.id；std_element_id → standard_element.id；code_set_id → code_set.id                        | model_id；std_element_id；code_set_id；order_no                                                             | 4.5.5.1 逻辑建模 | 主键不可为空；类型/语义一致性校验  |\n| field_standard_mapping（字段级标准映射）        | 数据表字段 ↔ 数据元 的有效绑定            | id | 业务唯一：同一字段仅允许一个 status='valid' 绑定       | source_id → data_source.id；table_entity_id/column_entity_id → metadata_entity.id；element_id → standard_element.id | uniq_active（column_entity_id,status）；idx_source/idx_table/idx_column/idx_element/idx_status/idx_bound_at | 4.5.5.2 标准映射 | 列表与映射管理双视角；批量操作与审计 |\n| field_standard_mapping_history（标准映射历史） | 保留绑定/解绑/状态变更快照               | id | \\-                                      | mapping_id → field_standard_mapping.id；source_id/table_entity_id/column_entity_id/element_id                      | mapping_id；column_entity_id；element_id；operated_at；operation                                             | 4.5.5.2 标准映射 | 历史不删除，回溯合规         |\n\n表：word_root（词根主表）\n\n- 设计意图：承载标准词根的规范化定义，保证跨域统一命名与组合引用；code 作为唯一业务主键。\n\n| 字段名          | 数据类型            | 长度 | 允许为空 | 默认值      | 自增 | 字段注释                           |\n|--------------|-----------------|----|------|----------|----|--------------------------------|\n| id           | BIGINT UNSIGNED | \\-  | 否    | \\-        | 是  | 主键                             |\n| code         | VARCHAR         | 64 | 否    | \\-        | 否  | 词根编码（唯一）                       |\n| root         | VARCHAR         | 64 | 否    | \\-        | 否  | 词根正文（标准形）                      |\n| en_root      | VARCHAR         | 64 | 是    | NULL     | 否  | 英文词根（可选）                       |\n| pos          | VARCHAR         | 16 | 是    | NULL     | 否  | 词性（noun/verb/adj/…）            |\n| usage        | VARCHAR         | 32 | 否    | 'token'  | 否  | 用途（prefix/stem/suffix/token）   |\n| domain       | VARCHAR         | 64 | 是    | NULL     | 否  | 主题域（如订单/用户）                    |\n| category_id  | BIGINT UNSIGNED | \\-  | 是    | NULL     | 否  | 类别ID（FK→word_root_category.id） |\n| abbreviation | VARCHAR         | 32 | 是    | NULL     | 否  | 缩写（如 qty）                      |\n| is_reserved  | TINYINT(1)      | \\-  | 否    | 0        | 否  | 是否保留字（0/1）                     |\n| status       | VARCHAR         | 32 | 否    | 'active' | 否  | 状态（active/deprecated）          |\n| source       | VARCHAR         | 32 | 是    | NULL     | 否  | 来源（manual/import）              |\n| remark       | TEXT            | \\-  | 是    | NULL     | 否  | 备注                             |\n| extra        | JSON            | \\-  | 是    | NULL     | 否  | 扩展属性（形态规则/拆分等）                 |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；。\n- 外键：category_id → word_root_category.id（RESTRICT 删除）。\n\n表：word_root_category（词根类别）\n\n- 设计意图：为词根提供层级化分类，支撑按业务域或使用场景的筛选与治理。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                                |\n|-------------|-----------------|-----|------|------|----|-------------------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                                  |\n| code        | VARCHAR         | 64  | 否    | \\-    | 否  | 类别编码（唯一）                            |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 类别名称                                |\n| parent_id   | BIGINT UNSIGNED | \\-   | 是    | NULL | 否  | 父类别ID（自关联 FK→word_root_category.id） |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                                  |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；可建立 parent_id+name 层内唯一。\n- 外键：parent_id 自关联（RESTRICT 删除）。\n\n表：word_root_usage_constraint（词根使用约束）\n\n- 设计意图：限定词根在不同对象命名中的使用规则，用于标准化校验与自动生成。\n\n| 字段名                 | 数据类型            | 长度 | 允许为空 | 默认值     | 自增 | 字段注释                              |\n|---------------------|-----------------|----|------|---------|----|-----------------------------------|\n| id                  | BIGINT UNSIGNED | \\-  | 否    | \\-       | 是  | 主键                                |\n| root_id             | BIGINT UNSIGNED | \\-  | 否    | \\-       | 否  | 词根ID（FK→word_root.id）             |\n| scope               | VARCHAR         | 32 | 否    | 'model' | 否  | 适用范围（model/table/column）          |\n| position_constraint | VARCHAR         | 32 | 否    | 'any'   | 否  | 位置约束（prefix-only/suffix-only/any） |\n| repeat_limit        | INT UNSIGNED    | \\-  | 否    | 1       | 否  | 最大重复次数                            |\n| case_rule           | VARCHAR         | 32 | 否    | 'lower' | 否  | 大小写规则（lower/upper/capitalized）    |\n| max_length          | INT UNSIGNED    | \\-  | 是    | NULL    | 否  | 最大长度（可选）                          |\n| extra               | JSON            | \\-  | 是    | NULL    | 否  | 其他约束（正则/黑白名单）                     |\n\n唯一性与约束：\n\n- 复合唯一：root_id+scope；外键：root_id → word_root.id（RESTRICT 删除）。\n\n表：standard_element（数据元标准）\n\n- 设计意图：对齐 PRD 4.5.2.1“数据元标准”，统一管理数据元的编号、定义、类型、长度/精度、单位、值域约束与发布/启用状态；支撑模型/表/字段的引用与校验，并与词根/命名标准联动。\n\n| 字段名                    | 数据类型            | 长度                                | 允许为空 | 默认值           | 自增 | 字段注释                    |\n|------------------------|-----------------|-----------------------------------|------|---------------|----|-------------------------|\n| id                     | BIGINT UNSIGNED | \\-                                 | 否    | \\-             | 是  | 主键                      |\n| code                   | VARCHAR         | 64                                | 否    | \\-             | 否  | 数据元编号（唯一）               |\n| name                   | VARCHAR         | 128                               | 否    | \\-             | 否  | 中文名称                    |\n| name_en                | VARCHAR         | 128                               | 是    | NULL          | 否  | 英文名称（可选）                |\n| definition             | TEXT            | \\-                                 | 否    | \\-             | 否  | 定义/业务含义                 |\n| data_type              | ENUM            | ('string','number','date','bool') | 否    | \\-             | 否  | 数据类型（字符串/数值/日期/布尔）      |\n| length                 | INT UNSIGNED    | \\-                                 | 是    | NULL          | 否  | 长度（适用于字符串）              |\n| precision              | INT UNSIGNED    | \\-                                 | 是    | NULL          | 否  | 精度（适用于数值）               |\n| unit                   | VARCHAR         | 32                                | 是    | NULL          | 否  | 单位（可选）                  |\n| value_domain           | JSON            | \\-                                 | 是    | NULL          | 否  | 值域（min/max/说明），用于非枚举型约束 |\n| code_set_id            | BIGINT UNSIGNED | \\-                                 | 是    | NULL          | 否  | 代码集标准ID（FK→code_set.id） |\n| naming_standard_config | JSON            | \\-                                 | 是    | NULL          | 否  | 命名标准配置（词根组合code + 正则）   |\n| publish_status         | ENUM            | ('unpublished','published')       | 否    | 'unpublished' | 否  | 发布状态                    |\n| enabled                | TINYINT(1)      | \\-                                 | 否    | 1             | 否  | 启用状态（1启用/0禁用）           |\n| published_at           | DATETIME        | \\-                                 | 是    | NULL          | 否  | 发布时间（已发布时填充）            |\n| published_by           | BIGINT UNSIGNED | \\-                                 | 是    | NULL          | 否  | 发布人（FK→user.id，可选）      |\n| revoked_at             | DATETIME        | \\-                                 | 是    | NULL          | 否  | 撤销发布时间（撤销时填充）           |\n| revoked_by             | BIGINT UNSIGNED | \\-                                 | 是    | NULL          | 否  | 撤销发布人（FK→user.id，可选）    |\n| extra                  | JSON            | \\-                                 | 是    | NULL          | 否  | 扩展属性（示例/参考链接/校验提示）      |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；推荐建立 data_type、publish_status、enabled 组合索引以提升检索性能。\n- 外键：code_set_id → code_set.id（RESTRICT 删除）；published_by/revoked_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）： \n  1. 仅启用（enabled=1）状态允许发布；发布后不可编辑；撤销发布后方可编辑；\n  2. 已发布（published）状态可被引用；未发布（unpublished）不可被引用；\n  3. 长度/精度与数据类型的合法组合（如 date 不配置长度/精度）。\n- 值域约束：当 data_type='number' 时，value_domain 中 min≤max；当选择代码集时，code_set_id 非空。\n\n表：code_set（代码集标准）\n\n- 设计意图：管理可枚举的代码值集合，供数据元值域为“枚举型”时引用；支持版本与发布/启用状态，保障跨系统一致性。\n\n| 字段名            | 数据类型            | 长度                          | 允许为空 | 默认值           | 自增 | 字段注释            |\n|----------------|-----------------|-----------------------------|------|---------------|----|-----------------|\n| id             | BIGINT UNSIGNED | \\-                           | 否    | \\-             | 是  | 主键              |\n| code           | VARCHAR         | 64                          | 否    | \\-             | 否  | 代码集编码（唯一）       |\n| name           | VARCHAR         | 128                         | 否    | \\-             | 否  | 代码集名称           |\n| version        | VARCHAR         | 32                          | 否    | 'v1'          | 否  | 版本号             |\n| description    | TEXT            | \\-                           | 是    | NULL          | 否  | 描述              |\n| domain         | VARCHAR         | 64                          | 是    | NULL          | 否  | 主题域（如订单/用户）     |\n| publish_status | ENUM            | ('unpublished','published') | 否    | 'unpublished' | 否  | 发布状态            |\n| enabled        | TINYINT(1)      | \\-                           | 否    | 1             | 否  | 启用状态            |\n| extra          | JSON            | \\-                           | 是    | NULL          | 否  | 扩展属性            |\n| created_by     | BIGINT UNSIGNED | \\-                           | 否    | \\-             | 否  | 创建人（FK→user.id） |\n| created_at     | DATETIME        | \\-                           | 否    | \\-             | 否  | 创建时间            |\n| updated_by     | BIGINT UNSIGNED | \\-                           | 是    | NULL          | 否  | 更新人（FK→user.id） |\n| updated_at     | DATETIME        | \\-                           | 是    | NULL          | 否  | 更新时间            |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；推荐建立 code+version 复合唯一以支持多版本。\n- 外键：created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束：仅启用状态允许发布；发布后条目不可编辑；撤销发布后可编辑。\n\n表：code_set_item（代码集条目）\n\n- 设计意图：承载代码集的具体可选值条目，供数据元枚举值域引用与校验。\n\n| 字段名        | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                  |\n|------------|-----------------|-----|------|------|----|-----------------------|\n| id         | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                    |\n| set_id     | BIGINT UNSIGNED | \\-   | 否    | \\-    | 否  | 代码集ID（FK→code_set.id） |\n| item_code  | VARCHAR         | 64  | 否    | \\-    | 否  | 条目编码                  |\n| item_label | VARCHAR         | 128 | 否    | \\-    | 否  | 条目名称/标签               |\n| item_order | INT UNSIGNED    | \\-   | 否    | 0    | 否  | 排序                    |\n| enabled    | TINYINT(1)      | \\-   | 否    | 1    | 否  | 启用状态                  |\n| extra      | JSON            | \\-   | 是    | NULL | 否  | 扩展属性                  |\n\n唯一性与约束：\n\n- 复合唯一：set_id+item_code 唯一；\n- 外键：set_id → code_set.id（RESTRICT 删除）。\n\n<!-- 表：standard_element_ref（数据元引用关系）\n\n- 设计意图：记录数据元被模型/表/字段等对象的引用关系，保障删除/撤销发布时的依赖校验与提示。\n\n| 字段名          | 数据类型            | 长度                        | 允许为空 | 默认值  | 自增 | 字段注释                          |\n|--------------|-----------------|---------------------------|------|------|----|-------------------------------|\n| id           | BIGINT UNSIGNED | \\-                         | 否    | \\-    | 是  | 主键                            |\n| element_id   | BIGINT UNSIGNED | \\-                         | 否    | \\-    | 否  | 数据元ID（FK→standard_element.id） |\n| ref_type     | ENUM            | ('field','model','table') | 否    | \\-    | 否  | 引用类型                          |\n| ref_id       | BIGINT UNSIGNED | \\-                         | 否    | \\-    | 否  | 引用对象ID（对应域内对象主键）              |\n| ref_snapshot | JSON            | \\-                         | 是    | NULL | 否  | 引用对象快照（名称/版本等）                |\n| created_at   | DATETIME        | \\-                         | 否    | \\-    | 否  | 创建时间                          |\n\n唯一性与约束：\n\n- 复合唯一：element_id+ref_type+ref_id 唯一；\n- 外键：element_id → standard_element.id（RESTRICT 删除）。\n- 业务约束：存在引用记录时禁止删除数据元；撤销发布需二次确认并通知引用方。 -->\n\n表：model_naming_refresh_freq（模型命名-刷新频率）\n\n- 设计意图：管理模型命名中的“刷新频率”标准项，用于统一表示模型的更新频率（如小时/日/周/月），在命名与逻辑建模中引用。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                   |\n|-------------|-----------------|-----|------|------|----|------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                     |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 刷新频率名称（如：小时刷新/日刷新/月刷新） |\n| code        | VARCHAR         | 8   | 否    | \\-    | 否  | 标识（如：h/d/w/m）          |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                     |\n| created_by  | BIGINT UNSIGNED | \\-   | 否    | \\-    | 否  | 创建人（FK→user.id）        |\n| created_at  | DATETIME        | \\-   | 否    | \\-    | 否  | 创建时间                   |\n| updated_by  | BIGINT UNSIGNED | \\-   | 是    | NULL | 否  | 更新人（FK→user.id）        |\n| updated_at  | DATETIME        | \\-   | 是    | NULL | 否  | 更新时间                   |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；\n- 外键：created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）：标识仅允许小写字母，长度 1-4；删除需二次确认；不可禁用（状态开关不适用）。\n\n表：model_naming_stat_cycle（模型命名-统计周期）\n\n- 设计意图：管理模型命名中的“统计周期”标准项，用于统一表示统计口径（如小时/日/周），在命名与逻辑建模中引用。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                   |\n|-------------|-----------------|-----|------|------|----|------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                     |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 统计周期名称（如：小时统计/日统计/周统计） |\n| code        | VARCHAR         | 8   | 否    | \\-    | 否  | 标识（如：ht/dt/wt）         |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                     |\n| created_by  | BIGINT UNSIGNED | \\-   | 否    | \\-    | 否  | 创建人（FK→user.id）        |\n| created_at  | DATETIME        | \\-   | 否    | \\-    | 否  | 创建时间                   |\n| updated_by  | BIGINT UNSIGNED | \\-   | 是    | NULL | 否  | 更新人（FK→user.id）        |\n| updated_at  | DATETIME        | \\-   | 是    | NULL | 否  | 更新时间                   |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；\n- 外键：created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）：标识仅允许小写字母，长度 1-4；删除需二次确认；不可禁用（状态开关不适用）。\n\n表：model_naming_load_strategy（模型命名-增量/全量）\n\n- 设计意图：管理模型命名中的“增量/全量”标准项，用于统一表示加载方式；支持启用/禁用状态开关，并记录审计。\n\n| 字段名         | 数据类型            | 长度                     | 允许为空 | 默认值  | 自增 | 字段注释            |\n|-------------|-----------------|------------------------|------|------|----|-----------------|\n| id          | BIGINT UNSIGNED | \\-                      | 否    | \\-    | 是  | 主键              |\n| category    | ENUM            | ('incremental','full') | 否    | \\-    | 否  | 分类（增量/全量）       |\n| code        | VARCHAR         | 8                      | 否    | \\-    | 否  | 标识（如：i/f）       |\n| name        | VARCHAR         | 128                    | 否    | \\-    | 否  | 名称（如：增量/全量）     |\n| description | TEXT            | \\-                      | 是    | NULL | 否  | 描述              |\n| enabled     | TINYINT(1)      | \\-                      | 否    | 1    | 否  | 启用状态（1启用/0禁用）   |\n| created_by  | BIGINT UNSIGNED | \\-                      | 否    | \\-    | 否  | 创建人（FK→user.id） |\n| created_at  | DATETIME        | \\-                      | 否    | \\-    | 否  | 创建时间            |\n| updated_by  | BIGINT UNSIGNED | \\-                      | 是    | NULL | 否  | 更新人（FK→user.id） |\n| updated_at  | DATETIME        | \\-                      | 是    | NULL | 否  | 更新时间            |\n\n唯一性与约束：\n\n- 复合唯一：category+code 唯一（同一分类内标识唯一）；\n- 外键：created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）：仅该表支持启用/禁用状态开关；禁用后保留历史引用但不再提供新引用；删除需二次确认并记录审计。\n\n表：table_naming_standard（表命名标准）\n\n- 设计意图：对齐 PRD 4.5.4“表命名标准”，统一管理按“数仓分层+主题域”的表命名规则文本与启用状态，支持列表查询、状态切换、使用表数量统计与行级编辑/删除。\n\n| 字段名              | 数据类型            | 长度                                    | 允许为空 | 默认值  | 自增 | 字段注释                                    |\n|------------------|-----------------|---------------------------------------|------|------|----|-----------------------------------------|\n| id               | BIGINT UNSIGNED | \\-                                     | 否    | \\-    | 是  | 主键                                      |\n| layer            | ENUM            | ('STG','ODS','DWD','DWS','DIM','ADS') | 否    | \\-    | 否  | 数仓分层                                    |\n| domain_id        | BIGINT UNSIGNED | \\-                                     | 否    | \\-    | 否  | 主题域ID（FK→theme_domain.id）               |\n| directory_name   | VARCHAR         | 128                                   | 否    | \\-    | 否  | 目录名称（如：DWD > 客户域；由 layer 与主题域生成，存储用于展示） |\n| standard_name    | VARCHAR         | 128                                   | 否    | \\-    | 否  | 命名标准名称（如：客户交易增量日表命名标准）                  |\n| naming_rule      | VARCHAR         | 256                                   | 否    | \\-    | 否  | 命名规则（如：dwd_kh_jy\\_[自定义]\\_di；统一下划线分隔）      |\n| enabled          | TINYINT(1)      | \\-                                     | 否    | 1    | 否  | 启用状态（1启用/0禁用）                           |\n| used_table_count | INT UNSIGNED    | \\-                                     | 否    | 0    | 否  | 使用表数量（展示用，来自引用关系计数）                     |\n| rule_desc        | TEXT            | \\-                                     | 是    | NULL | 否  | 规则说明（可选）                                |\n| created_by       | BIGINT UNSIGNED | \\-                                     | 否    | \\-    | 否  | 创建人（FK→user.id）                         |\n| created_at       | DATETIME        | \\-                                     | 否    | \\-    | 否  | 创建时间                                    |\n| updated_by       | BIGINT UNSIGNED | \\-                                     | 是    | NULL | 否  | 更新人（FK→user.id）                         |\n| updated_at       | DATETIME        | \\-                                     | 是    | NULL | 否  | 更新时间                                    |\n\n唯一性与约束：\n\n- 复合唯一：layer+domain_id+standard_name 唯一；推荐建立 layer+domain_id+enabled 索引，支撑筛选。\n- 外键：domain_id → theme_domain.id（RESTRICT 删除）；created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）： \n  1. 必填：layer、domain_id、standard_name、naming_rule；\n  2. 命名规则规范：统一使用小写英文字母、数字与下划线，避免空格与特殊符号；\n  3. directory_name 按“<layer> > <主题域名称>”生成并只读展示；\n  4. 启用状态切换即时生效并记录审计；删除需二次确认；\n  5. 命名规则建议由“分层前缀 + 域缩写 + 可自定义片段 + 时效后缀”等组成，但不强制校验结构。\n\n表：table_naming_standard_ref（表命名标准引用关系）\n\n- 设计意图：记录表命名标准被“物理表/模型”等对象的引用，用于计算“使用表数量”与删除/禁用前的依赖校验与提示。\n\n| 字段名          | 数据类型            | 长度                | 允许为空 | 默认值     | 自增 | 字段注释                                |\n|--------------|-----------------|-------------------|------|---------|----|-------------------------------------|\n| id           | BIGINT UNSIGNED | \\-                 | 否    | \\-       | 是  | 主键                                  |\n| standard_id  | BIGINT UNSIGNED | \\-                 | 否    | \\-       | 否  | 命名标准ID（FK→table_naming_standard.id） |\n| ref_type     | ENUM            | ('table','model') | 否    | 'table' | 否  | 引用类型（默认 table）                      |\n| ref_id       | BIGINT UNSIGNED | \\-                 | 否    | \\-       | 否  | 引用对象ID（对应域内对象主键）                    |\n| ref_snapshot | JSON            | \\-                 | 是    | NULL    | 否  | 引用对象快照（库/表/模型名称、分层、域缩写等）            |\n| created_at   | DATETIME        | \\-                 | 否    | \\-       | 否  | 创建时间                                |\n\n唯一性与约束：\n\n- 复合唯一：standard_id+ref_type+ref_id 唯一；\n- 外键：standard_id → table_naming_standard.id（RESTRICT 删除）。\n- 业务约束：存在引用记录时禁止删除命名标准；禁用需二次确认并提示影响范围。\n\n表：logical_model（逻辑模型）\n\n- 设计意图：对齐 PRD 4.5.5.1“逻辑建模”列表与新增/编辑/物化/删除操作所需的核心实体，统一存储模型的基本属性、分层与目录、刷新频率与加载策略、状态与物化标识，并支撑分页查询与筛选。\n\n| 字段名             | 数据类型            | 长度                           | 允许为空 | 默认值               | 自增 | 字段注释                           |\n|-----------------|-----------------|------------------------------|------|-------------------|----|--------------------------------|\n| id              | BIGINT UNSIGNED | \\-                            | 否    | \\-                 | 是  | 主键                             |\n| name_en         | VARCHAR         | 128                          | 否    | \\-                 | 否  | 英文名称（大写字母与下划线；禁止非法字符）          |\n| name            | VARCHAR         | 128                          | 否    | \\-                 | 否  | 中文名称                           |\n| layer           | ENUM            | ('DWD','DWS','ADS','DIM')    | 否    | \\-                 | 否  | 数仓分层（限定值域）                     |\n| domain_id       | BIGINT UNSIGNED | \\-                            | 否    | \\-                 | 否  | 主题域ID（FK→theme_domain.id）      |\n| directory_name  | VARCHAR         | 128                          | 否    | \\-                 | 否  | 主题域目录（由 layer 与主题域生成，展示用，不可编辑） |\n| refresh_freq    | ENUM            | ('daily','weekly','monthly') | 否    | \\-                 | 否  | 刷新频率（日/周/月）                    |\n| strategy        | ENUM            | ('incremental','full')       | 否    | \\-                 | 否  | 策略（增量/全量）                      |\n| status          | ENUM            | ('enabled','disabled')       | 否    | 'enabled'         | 否  | 状态（启用/禁用）                      |\n| is_materialized | ENUM            | ('yes','no')                 | 否    | 'no'              | 否  | 是否物化（是/否）                      |\n| description     | TEXT            | \\-                            | 是    | NULL              | 否  | 描述（可选）                         |\n| created_at      | DATETIME        | \\-                            | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                           |\n| updated_at      | DATETIME        | \\-                            | 否    | CURRENT_TIMESTAMP | 否  | 最近更新时间                         |\n\n- 唯一性与约束： \n  - name_en 全局唯一；避免重复创建逻辑模型（唯一索引：uniq_logical_model_name_en）。\n  - 组合约束：在同一主题域与分层下，name 的复合唯一（domain_id, layer, name）（唯一索引：uniq_domain_layer_name）。\n  - 值域约束：layer 仅限 DWD/DWS/ADS/DIM；refresh_freq 仅限 daily/weekly/monthly；strategy 仅限 incremental/full；status 仅限 enabled/disabled；is_materialized 仅限 yes/no（应用层校验与DDL枚举共同约束）。\n  - 业务约束：directory_name 由分层与主题域自动生成，不允许编辑；删除需二次确认。\n- 索引建议： \n  - idx_domain_layer（domain_id, layer）：筛选与分页；\n  - idx_status（status）：按启用/禁用筛选；\n  - idx_materialized（is_materialized）：按是否物化筛选；\n  - idx_created_at（created_at）：时间排序。\n\n表：logical_model_materialization（逻辑模型物化任务）\n\n- 设计意图：记录“物化”操作的任务、状态与结果摘要，支撑批量物化与审计。\n\n| 字段名            | 数据类型            | 长度                                      | 允许为空 | 默认值               | 自增 | 字段注释                        |\n|----------------|-----------------|-----------------------------------------|------|-------------------|----|-----------------------------|\n| id             | BIGINT UNSIGNED | \\-                                       | 否    | \\-                 | 是  | 主键                          |\n| model_id       | BIGINT UNSIGNED | \\-                                       | 否    | \\-                 | 否  | 逻辑模型ID（FK→logical_model.id） |\n| triggered_by   | VARCHAR         | 128                                     | 否    | \\-                 | 否  | 触发人                         |\n| triggered_at   | DATETIME        | \\-                                       | 否    | CURRENT_TIMESTAMP | 否  | 触发时间                        |\n| status         | ENUM            | ('queued','running','success','failed') | 否    | 'queued'          | 否  | 任务状态                        |\n| result_summary | JSON            | \\-                                       | 是    | NULL              | 否  | 结果摘要（行数/目标表/错误信息等）          |\n| job_ref        | VARCHAR         | 128                                     | 是    | NULL              | 否  | 任务引用（外部调度/作业ID）             |\n\n- 唯一性与约束： \n  - FK：model_id 引用 logical_model.id；逻辑删除不影响历史任务查询。\n  - 任务执行前需存在已选项（批量校验在应用层实现）。\n- 索引建议： \n  - idx_model（model_id）：按模型查看任务；\n  - idx_status（status）：状态筛选；\n  - idx_triggered_at（triggered_at）：时间排序。\n\n表：logical_model_field（逻辑模型-属性字段）\n\n- 设计意图：支撑“逻辑模型详情”页面中字段明细的展示与维护，记录每个逻辑模型的属性字段（名称、类型、长度/精度、是否为空、默认值、主键等），并可选引用数据元与代码集以实现标准化与值域约束。\n\n| 字段名            | 数据类型            | 长度                                   | 允许为空 | 默认值               | 自增 | 字段注释                          |\n|----------------|-----------------|--------------------------------------|------|-------------------|----|-------------------------------|\n| id             | BIGINT UNSIGNED | \\-                                    | 否    | \\-                 | 是  | 主键                            |\n| model_id       | BIGINT UNSIGNED | \\-                                    | 否    | \\-                 | 否  | 逻辑模型ID（FK→logical_model.id）   |\n| field_name_en  | VARCHAR         | 128                                  | 否    | \\-                 | 否  | 属性英文名（大写字母与下划线；模型内唯一）         |\n| field_name     | VARCHAR         | 128                                  | 否    | \\-                 | 否  | 属性中文名                         |\n| data_type      | ENUM            | ('string','number','date','boolean') | 否    | \\-                 | 否  | 数据类型（与数据元标准一致）                |\n| length         | INT             | \\-                                    | 是    | NULL              | 否  | 长度（非负整数；仅字符串/数值适用）            |\n| precision      | INT             | \\-                                    | 是    | NULL              | 否  | 精度（非负整数；仅数值适用）                |\n| nullable       | ENUM            | ('yes','no')                         | 否    | 'yes'             | 否  | 允许为空                          |\n| default_value  | VARCHAR         | 256                                  | 是    | NULL              | 否  | 默认值（可选）                       |\n| is_primary_key | ENUM            | ('yes','no')                         | 否    | 'no'              | 否  | 是否主键                          |\n| std_element_id | BIGINT UNSIGNED | \\-                                    | 是    | NULL              | 否  | 引用数据元（FK→standard_element.id） |\n| code_set_id    | BIGINT UNSIGNED | \\-                                    | 是    | NULL              | 否  | 引用代码集（FK→code_set.id）         |\n| order_no       | INT             | \\-                                    | 否    | 0                 | 否  | 展示排序（行序）                      |\n| description    | TEXT            | \\-                                    | 是    | NULL              | 否  | 字段描述                          |\n| created_at     | DATETIME        | \\-                                    | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                          |\n| updated_at     | DATETIME        | \\-                                    | 否    | CURRENT_TIMESTAMP | 否  | 最近更新时间                        |\n\n- 唯一性与约束： \n  - 复合唯一：同一模型内属性英文名唯一（唯一索引：uniq_model_field_en → (model_id, field_name_en)）。\n  - 值域约束：data_type 仅限 string/number/date/boolean；length/precision 为非负整数且类型适用；nullable/is_primary_key 仅限 yes/no。\n  - 语义一致性：若 std_element_id 引用的数据元的类型与 data_type 不一致需警示并二次确认；code_set_id 存在时的枚举值需与字段语义合理（应用层校验）。\n  - 业务约束：主键字段（is_primary_key='yes'）不允许 nullable='yes'；删除需二次确认。\n- 索引建议： \n  - idx_model（model_id）：按模型查询字段；\n  - idx_std_element（std_element_id）：按数据元引用筛选；\n  - idx_code_set（code_set_id）：按代码集筛选；\n  - idx_order（model_id, order_no）：详情展示排序。\n\n表：field_standard_mapping（标准映射：数据表字段 ↔ 数据元）\n\n- 设计意图：对齐 PRD 4.5.5.2“标准映射”，统一维护“数据表字段 ↔ 标准元数据（数据元）”的绑定关系，支撑列表视角与映射管理视角的检索、筛选、排序与批量操作，并与审计服务联动记录绑定/解绑/状态变更与导出行为。\n\n| 字段名              | 数据类型            | 长度                  | 是否为空 | 默认值               | 自增 | 字段注释                                               |\n|------------------|-----------------|---------------------|------|-------------------|----|----------------------------------------------------|\n| id               | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 是  | 主键ID                                               |\n| source_id        | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 否  | 数据源ID（FK→data_source.id；用于筛选与统计）                   |\n| table_entity_id  | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 否  | 表实体ID（FK→metadata_entity.id，entity_type='table'）   |\n| column_entity_id | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 否  | 字段实体ID（FK→metadata_entity.id，entity_type='column'） |\n| element_id       | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 否  | 数据元ID（FK→standard_element.id）                      |\n| status           | ENUM            | ('valid','invalid') | 否    | 'valid'           | 否  | 绑定状态（有效/失效）                                        |\n| bound_by         | VARCHAR         | 64                  | 否    | 'system'          | 否  | 绑定人（操作账号或用户编码）                                     |\n| bound_at         | DATETIME        | \\-                   | 否    | CURRENT_TIMESTAMP | 否  | 绑定时间                                               |\n| updated_by       | VARCHAR         | 64                  | 是    | NULL              | 否  | 最近变更人                                              |\n| updated_at       | DATETIME        | \\-                   | 是    | NULL              | 否  | 最近变更时间                                             |\n| unbound_reason   | VARCHAR         | 256                 | 是    | NULL              | 否  | 解绑原因（可选）                                           |\n| remark           | VARCHAR         | 256                 | 是    | NULL              | 否  | 备注（可选）                                             |\n\n- 唯一与约束：\n  - 业务唯一：同一“数据源-表-字段”在“有效”状态下仅允许绑定一个数据元；重新绑定时需先将现有绑定置为“失效”。\n  - 外键：source_id → data_source.id；table_entity_id/column_entity_id → metadata_entity.id（分别要求 entity_type='table'/'column'，由应用层校验）；element_id → standard_element.id（RESTRICT 删除）。\n  - 一致性校验：绑定的数据元的数据类型需与字段语义与类型合理；不一致时前端需警示并二次确认（保留审计）。\n  - 解绑限制：执行解绑需二次确认；unbound_reason 可选填写并写入审计。\n  - 检索与分页：列表支持按数据源/表名/字段/数据元名称/编码/状态/绑定人/绑定时间排序与筛选（配合索引）。\n- 索引建议：\n  - uniq_active（column_entity_id, status）+ 业务规约：仅允许一个 status='valid' 的记录；若需保留多条历史“失效”记录，依赖审计日志与历史表；\n  - idx_source（source_id）、idx_table（table_entity_id）、idx_column（column_entity_id）、idx_element（element_id）、idx_status（status）、idx_bound_at（bound_at）。\n\n表：field_standard_mapping_history（标准映射历史）\n\n- 设计意图：保留映射关系的历史变更与失效记录，满足“失效不删除历史绑定关系”的要求；与审计日志协同支持回溯与合规检查。\n\n| 字段名              | 数据类型            | 长度                                | 是否为空 | 默认值               | 自增 | 字段注释                                      |\n|------------------|-----------------|-----------------------------------|------|-------------------|----|-------------------------------------------|\n| id               | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 是  | 主键ID                                      |\n| mapping_id       | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 当前映射ID（FK→field_standard_mapping.id；快照来源） |\n| source_id        | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 数据源ID（FK→data_source.id）                  |\n| table_entity_id  | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 表实体ID（FK→metadata_entity.id）              |\n| column_entity_id | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 字段实体ID（FK→metadata_entity.id）             |\n| element_id       | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 数据元ID（FK→standard_element.id）             |\n| status           | ENUM            | ('valid','invalid')               | 否    | 'valid'           | 否  | 当时状态（有效/失效）                               |\n| operation        | ENUM            | ('bind','unbind','status_change') | 否    | 'bind'            | 否  | 操作类型（绑定/解绑/状态变更）                          |\n| operated_by      | VARCHAR         | 64                                | 否    | 'system'          | 否  | 操作人                                       |\n| operated_at      | DATETIME        | \\-                                 | 否    | CURRENT_TIMESTAMP | 否  | 操作时间                                      |\n| reason           | VARCHAR         | 256                               | 是    | NULL              | 否  | 原因（如解绑/失效原因）                              |\n\n- 唯一与约束：\n  - 外键：mapping_id → field_standard_mapping.id（RESTRICT 删除）；source_id → data_source.id；table_entity_id/column_entity_id → metadata_entity.id；element_id → standard_element.id。\n  - 历史保留：每次绑定、解绑或状态切换均追加一条快照记录，不做唯一性限制，用于全量回溯。\n- 索引建议：\n  - idx_mapping（mapping_id）、idx_column（column_entity_id）、idx_element（element_id）、idx_operated_at（operated_at）、idx_operation（operation）。\n- 审计与权限：\n  - 行为审计：所有绑定/解绑/状态切换与导出行为统一写入 audit_log 表（已在通用审计域定义），包含上下文：字段标识、数据元ID/编码、操作人、时间、来源视图等；本历史表用于领域内便捷回溯与统计。\n  - 权限：标准管理员/域管理员可执行绑定、解绑、状态切换与导出；普通用户仅可查询与查看详情。\n\n#### 6.3.4 质量治理域\n\n设计对齐与目标\n\n- 对齐业务规格：严格对应 <PRD 4.3 数据质量管理> 的三大能力域——质量监控概览、质量规则库、质量检查任务（原型：quality-rules.html、quality-tasks.html）。\n- 设计目标：以“规则→任务→运行→指标/评分→异常/告警→工单整改→验证关闭”的闭环为主线，优化存储与索引，支撑高并发查询与监控渲染；避免结果冗余，提升聚合与过滤性能。\n- 安全与合规：不落地明文敏感数据样本；通过审计与权限域统一管控（见 6.3.1）。\n\n表：validation_rule（质量规则库）\n\n- 设计意图：统一沉淀质量规则的定义、分类与参数模板，供任务引用与检索。\n\n| 字段名              | 数据类型            | 长度                                                                                                   | 允许为空 | 默认值               | 自增 | 字段注释                       |\n|------------------|-----------------|------------------------------------------------------------------------------------------------------|------|-------------------|----|----------------------------|\n| id               | BIGINT UNSIGNED | \\-                                                                                                    | 否    | \\-                 | 是  | 主键                         |\n| code             | VARCHAR         | 64                                                                                                   | 否    | \\-                 | 否  | 规则编码（唯一，自然键）               |\n| name             | VARCHAR         | 128                                                                                                  | 否    | \\-                 | 否  | 规则名称                       |\n| category         | ENUM            | ('integrity','accuracy','timeliness','consistency','uniqueness','completeness','profiling','custom') | 否    | 'integrity'       | 否  | 规则类别                       |\n| target_type      | ENUM            | ('database','schema','table','column','dataset','job')                                               | 否    | 'table'           | 否  | 适用目标类型                     |\n| datasource_types | JSON            | \\-                                                                                                    | 是    | NULL              | 否  | 适配数据源类型列表（如 MySQL/PG/Hive） |\n| domain           | VARCHAR         | 64                                                                                                   | 是    | NULL              | 否  | 业务域（用于筛选）                  |\n| severity         | ENUM            | ('info','low','medium','high','critical')                                                            | 否    | 'medium'          | 否  | 严重级别                       |\n| status           | ENUM            | ('enabled','disabled','deprecated')                                                                  | 否    | 'enabled'         | 否  | 状态                         |\n| version          | VARCHAR         | 32                                                                                                   | 否    | 'v1'              | 否  | 规则版本                       |\n| param_schema     | JSON            | \\-                                                                                                    | 否    | \\-                 | 否  | 参数模板（校验、默认、类型）             |\n| default_params   | JSON            | \\-                                                                                                    | 是    | NULL              | 否  | 默认运行参数                     |\n| description      | TEXT            | \\-                                                                                                    | 是    | NULL              | 否  | 规则说明                       |\n| owner            | VARCHAR         | 128                                                                                                  | 是    | NULL              | 否  | 负责人                        |\n| created_by       | VARCHAR         | 64                                                                                                   | 否    | 'system'          | 否  | 创建人                        |\n| created_at       | DATETIME        | \\-                                                                                                    | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                       |\n| updated_by       | VARCHAR         | 64                                                                                                   | 是    | NULL              | 否  | 更新人                        |\n| updated_at       | DATETIME        | \\-                                                                                                    | 是    | NULL              | 否  | 更新时间                       |\n\n- 唯一与约束： \n  - 唯一：code 唯一；(name, version) 组合建议唯一避免重名版本冲突。\n  - 外键：与标签域复用 tag 表，通过 rule_tag_map 进行多对多关联（见下表）。\n- 索引建议： \n  - uniq_code（code UNIQUE）；idx_category_status（category,status）；idx_target_type（target_type）；idx_owner（owner）。\n\n表：rule_tag_map（规则-标签，M:N）\n\n- 设计意图：规则贴标签，复用 6.3.6 中 tag 表，实现检索与运营维度。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                        |\n|------------|-----------------|----|------|-------------------|----|-----------------------------|\n| rule_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 规则ID（FK→validation_rule.id） |\n| tag_id     | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 标签ID（FK→tag.id）             |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                        |\n\n- 唯一与约束： \n  - 复合唯一：UNIQUE(rule_id, tag_id)。\n- 索引建议： \n  - idx_tag（tag_id），便于按标签反查规则。\n\n表：validation_rule_target（规则目标绑定）\n\n- 设计意图：预绑定规则适用的实体，缩短运行前的目标解析时间，支持模式/前缀匹配。\n\n| 字段名         | 数据类型            | 长度                                                     | 允许为空 | 默认值               | 自增 | 字段注释                          |\n|-------------|-----------------|--------------------------------------------------------|------|-------------------|----|-------------------------------|\n| id          | BIGINT UNSIGNED | \\-                                                      | 否    | \\-                 | 是  | 主键                            |\n| rule_id     | BIGINT UNSIGNED | \\-                                                      | 否    | \\-                 | 否  | 规则ID（FK→validation_rule.id）   |\n| entity_id   | BIGINT UNSIGNED | \\-                                                      | 否    | \\-                 | 否  | 目标实体ID（FK→metadata_entity.id） |\n| entity_type | ENUM            | ('database','schema','table','column','dataset','job') | 否    | 'table'           | 否  | 目标类型                          |\n| match_scope | JSON            | \\-                                                      | 是    | NULL              | 否  | 匹配范围（前缀/通配符/分区条件）             |\n| enabled     | TINYINT         | 1                                                      | 否    | 1                 | 否  | 是否启用                          |\n| created_at  | DATETIME        | \\-                                                      | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                          |\n\n- 唯一与约束： \n  - 复合唯一：UNIQUE(rule_id, entity_id)。\n- 索引建议： \n  - idx_entity（entity_id, entity_type），支持按实体快速定位规则绑定。\n\n表：quality_task（质量检查任务）\n\n- 设计意图：任务编排/调度配置，增加并发/重试与窗口参数，支撑 PRD 4.3.3 的分步创建与监控展示。\n\n| 字段名             | 数据类型            | 长度                                               | 允许为空 | 默认值               | 自增 | 字段注释                           |\n|-----------------|-----------------|--------------------------------------------------|------|-------------------|----|--------------------------------|\n| id              | BIGINT UNSIGNED | \\-                                                | 否    | \\-                 | 是  | 主键                             |\n| name            | VARCHAR         | 128                                              | 否    | \\-                 | 否  | 任务名称                           |\n| description     | TEXT            | \\-                                                | 是    | NULL              | 否  | 任务说明                           |\n| status          | ENUM            | ('draft','ready','running','paused','stopped')   | 否    | 'ready'           | 否  | 状态                             |\n| schedule_cron   | VARCHAR         | 128                                              | 是    | NULL              | 否  | 调度表达式（Cron）                    |\n| schedule_window | ENUM            | ('full','incremental','daily','hourly','custom') | 否    | 'daily'           | 否  | 运行窗口类型                         |\n| window_config   | JSON            | \\-                                                | 是    | NULL              | 否  | 窗口配置（offset/size/watermark）    |\n| concurrency     | INT             | \\-                                                | 否    | 1                 | 否  | 并发度                            |\n| retry_policy    | JSON            | \\-                                                | 是    | NULL              | 否  | 重试策略（次数/间隔/退避）                 |\n| priority        | INT             | \\-                                                | 否    | 5                 | 否  | 优先级（1-10）                      |\n| owner           | VARCHAR         | 128                                              | 是    | NULL              | 否  | 负责人                            |\n| last_run_id     | BIGINT UNSIGNED | \\-                                                | 是    | NULL              | 否  | 最近运行ID（FK→quality_task_run.id） |\n| created_by      | VARCHAR         | 64                                               | 否    | 'system'          | 否  | 创建人                            |\n| created_at      | DATETIME        | \\-                                                | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                           |\n| updated_by      | VARCHAR         | 64                                               | 是    | NULL              | 否  | 更新人                            |\n| updated_at      | DATETIME        | \\-                                                | 是    | NULL              | 否  | 更新时间                           |\n\n- 唯一与约束： \n  - 唯一：name 建议唯一（或结合 owner 保证唯一性）。\n- 索引建议： \n  - idx_status（status），idx_owner（owner），idx_last_run（last_run_id）。\n\n表：quality_task_rule（任务-规则，M:N）\n\n- 设计意图：任务引用规则，支持运行时参数与目标过滤覆盖。\n\n| 字段名             | 数据类型            | 长度 | 允许为空 | 默认值  | 自增 | 字段注释                        |\n|-----------------|-----------------|----|------|------|----|-----------------------------|\n| task_id         | BIGINT UNSIGNED | \\-  | 否    | \\-    | 否  | 任务ID（FK→quality_task.id）    |\n| rule_id         | BIGINT UNSIGNED | \\-  | 否    | \\-    | 否  | 规则ID（FK→validation_rule.id） |\n| params_override | JSON            | \\-  | 是    | NULL | 否  | 参数覆盖                        |\n| target_filter   | JSON            | \\-  | 是    | NULL | 否  | 目标过滤覆盖（可选）                  |\n| enabled         | TINYINT         | 1  | 否    | 1    | 否  | 是否启用                        |\n\n- 唯一与约束： \n  - 复合唯一：UNIQUE(task_id, rule_id)。\n- 索引建议： \n  - idx_rule（rule_id），便于按规则反查任务。\n\n表：quality_task_run（任务运行）\n\n- 设计意图：替代原 execution_result，细化运行维度与指标，便于仪表盘与趋势统计。\n\n| 字段名              | 数据类型            | 长度                                                            | 允许为空 | 默认值         | 自增 | 字段注释                     |\n|------------------|-----------------|---------------------------------------------------------------|------|-------------|----|--------------------------|\n| id               | BIGINT UNSIGNED | \\-                                                             | 否    | \\-           | 是  | 主键                       |\n| task_id          | BIGINT UNSIGNED | \\-                                                             | 否    | \\-           | 否  | 任务ID（FK→quality_task.id） |\n| started_at       | DATETIME        | \\-                                                             | 否    | \\-           | 否  | 开始时间                     |\n| finished_at      | DATETIME        | \\-                                                             | 是    | NULL        | 否  | 结束时间                     |\n| status           | ENUM            | ('running','success','failed','partial','canceled','timeout') | 否    | 'running'   | 否  | 运行状态                     |\n| run_type         | ENUM            | ('scheduled','manual','retry')                                | 否    | 'scheduled' | 否  | 运行类型                     |\n| triggered_by     | VARCHAR         | 64                                                            | 否    | 'system'    | 否  | 触发者                      |\n| duration_ms      | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 运行耗时（毫秒）                 |\n| entities_scanned | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 扫描实体数                    |\n| checked_count    | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 校验记录数                    |\n| violation_count  | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 违规数                      |\n| warning_count    | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 警告数                      |\n| severity_score   | DECIMAL         | (5,2)                                                         | 是    | NULL        | 否  | 严重度评分（0-100）             |\n| log_uri          | VARCHAR         | 256                                                           | 是    | NULL        | 否  | 日志/明细存储位置（对象存储/ELK）      |\n\n- 索引建议： \n  - idx_task_time（task_id, started_at DESC），idx_status（status），idx_run_type（run_type）。\n\n表：quality_violation（质量问题/违规）\n\n- 设计意图：记录违规明细与位置，支持工单闭环与批量操作。\n\n| 字段名             | 数据类型            | 长度                                                               | 允许为空 | 默认值               | 自增 | 字段注释                         |\n|-----------------|-----------------|------------------------------------------------------------------|------|-------------------|----|------------------------------|\n| id              | BIGINT UNSIGNED | \\-                                                                | 否    | \\-                 | 是  | 主键                           |\n| run_id          | BIGINT UNSIGNED | \\-                                                                | 否    | \\-                 | 否  | 运行ID（FK→quality_task_run.id） |\n| rule_id         | BIGINT UNSIGNED | \\-                                                                | 否    | \\-                 | 否  | 规则ID（FK→validation_rule.id）  |\n| entity_id       | BIGINT UNSIGNED | \\-                                                                | 否    | \\-                 | 否  | 关联实体（FK→metadata_entity.id）  |\n| entity_type     | ENUM            | ('table','column','dataset','job')                               | 否    | 'table'           | 否  | 实体类型                         |\n| partition_key   | VARCHAR         | 64                                                               | 是    | NULL              | 否  | 分区键（如 dt/pt）                 |\n| partition_value | VARCHAR         | 128                                                              | 是    | NULL              | 否  | 分区值                          |\n| location        | JSON            | \\-                                                                | 是    | NULL              | 否  | 位置（列名/偏移/索引）                 |\n| sample          | JSON            | \\-                                                                | 是    | NULL              | 否  | 取样（脱敏/摘要）                    |\n| message         | VARCHAR         | 512                                                              | 否    | \\-                 | 否  | 违规说明                         |\n| severity        | ENUM            | ('info','low','medium','high','critical')                        | 否    | 'medium'          | 否  | 严重级别                         |\n| status          | ENUM            | ('open','assigned','processing','resolved','rejected','ignored') | 否    | 'open'            | 否  | 闭环状态                         |\n| assignee        | VARCHAR         | 128                                                              | 是    | NULL              | 否  | 处理人                          |\n| created_at      | DATETIME        | \\-                                                                | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                         |\n| updated_at      | DATETIME        | \\-                                                                | 是    | NULL              | 否  | 更新时间                         |\n\n- 索引建议： \n  - idx_entity_status_time（entity_id, status, created_at DESC），idx_rule_run（rule_id, run_id）。\n\n表：remediation_action（整改动作）\n\n- 设计意图：闭环整改记录与状态流转，支撑“工单与整改→验证关闭”。\n\n| 字段名           | 数据类型            | 长度                                                             | 允许为空 | 默认值               | 自增 | 字段注释                          |\n|---------------|-----------------|----------------------------------------------------------------|------|-------------------|----|-------------------------------|\n| id            | BIGINT UNSIGNED | \\-                                                              | 否    | \\-                 | 是  | 主键                            |\n| violation_id  | BIGINT UNSIGNED | \\-                                                              | 否    | \\-                 | 否  | 违规ID（FK→quality_violation.id） |\n| action_type   | ENUM            | ('fix_data','update_rule','add_exclusion','recompute','other') | 否    | 'fix_data'        | 否  | 动作类型                          |\n| action_detail | JSON            | \\-                                                              | 否    | \\-                 | 否  | 动作详情（字段/范围/变更说明）              |\n| status        | ENUM            | ('planned','in_progress','completed','canceled')               | 否    | 'planned'         | 否  | 状态                            |\n| created_by    | VARCHAR         | 64                                                             | 否    | 'system'          | 否  | 创建人                           |\n| created_at    | DATETIME        | \\-                                                              | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                          |\n| updated_by    | VARCHAR         | 64                                                             | 是    | NULL              | 否  | 更新人                           |\n| updated_at    | DATETIME        | \\-                                                              | 是    | NULL              | 否  | 更新时间                          |\n\n- 索引建议： \n  - idx_violation_status（violation_id, status），支持按状态追踪。\n\n表：quality_alert（质量告警）\n\n- 设计意图：阈值触发的告警事件记录与发送状态，用于监控与通知回溯。\n\n| 字段名          | 数据类型            | 长度                                      | 允许为空 | 默认值       | 自增 | 字段注释                          |\n|--------------|-----------------|-----------------------------------------|------|-----------|----|-------------------------------|\n| id           | BIGINT UNSIGNED | \\-                                       | 否    | \\-         | 是  | 主键                            |\n| run_id       | BIGINT UNSIGNED | \\-                                       | 是    | NULL      | 否  | 运行ID（FK→quality_task_run.id）  |\n| violation_id | BIGINT UNSIGNED | \\-                                       | 是    | NULL      | 否  | 违规ID（FK→quality_violation.id） |\n| level        | ENUM            | ('info','warning','critical')           | 否    | 'warning' | 否  | 告警级别                          |\n| channel      | ENUM            | ('email','sms','webhook','slack','ops') | 否    | 'email'   | 否  | 通知渠道                          |\n| payload      | JSON            | \\-                                       | 是    | NULL      | 否  | 载荷（模板渲染结果）                    |\n| status       | ENUM            | ('pending','sent','failed')             | 否    | 'pending' | 否  | 发送状态                          |\n| retry_count  | INT             | \\-                                       | 否    | 0         | 否  | 重试次数                          |\n| sent_at      | DATETIME        | \\-                                       | 是    | NULL      | 否  | 发送时间                          |\n\n- 索引建议： \n  - idx_status_time（status, sent_at DESC），idx_level（level）。\n\n表：quality_metric_daily（质量监控指标-按日）\n\n- 设计意图：为“质量监控概览”提供时序指标，支持看板与趋势分析；避免重复聚合开销。\n\n| 字段名             | 数据类型            | 长度                                                                                          | 允许为空 | 默认值         | 自增 | 字段注释                        |\n|-----------------|-----------------|---------------------------------------------------------------------------------------------|------|-------------|----|-----------------------------|\n| id              | BIGINT UNSIGNED | \\-                                                                                           | 否    | \\-           | 是  | 主键                          |\n| entity_id       | BIGINT UNSIGNED | \\-                                                                                           | 否    | \\-           | 否  | 实体ID（FK→metadata_entity.id） |\n| stat_date       | DATE            | \\-                                                                                           | 否    | \\-           | 否  | 统计日期                        |\n| category        | ENUM            | ('integrity','accuracy','timeliness','consistency','uniqueness','completeness','profiling') | 否    | 'integrity' | 否  | 指标类别                        |\n| checked_count   | BIGINT UNSIGNED | \\-                                                                                           | 否    | 0           | 否  | 校验记录数                       |\n| violation_count | BIGINT UNSIGNED | \\-                                                                                           | 否    | 0           | 否  | 违规数                         |\n| warning_count   | BIGINT UNSIGNED | \\-                                                                                           | 否    | 0           | 否  | 警告数                         |\n| severity_score  | DECIMAL         | (5,2)                                                                                       | 是    | NULL        | 否  | 严重度评分                       |\n| quality_score   | DECIMAL         | (5,2)                                                                                       | 是    | NULL        | 否  | 质量评分（综合）                    |\n| updated_at      | DATETIME        | \\-                                                                                           | 是    | NULL        | 否  | 更新时间                        |\n\n- 唯一与约束： \n  - 复合唯一：UNIQUE(entity_id, stat_date, category)。\n- 索引建议： \n  - idx_entity_date（entity_id, stat_date DESC）。\n\n说明与对齐\n\n- 存储效率：将“运行摘要”与“违规明细”拆分为 run 与 violation 两级，避免在单表混存导致的热点与膨胀；明细样本采用脱敏/摘要存储，日志明细落对象存储/ELK，通过 log_uri 引用。\n- 查询性能： \n  - 运行列表与看板：quality_task_run 按 task_id+时间降序索引；质量概览走 quality_metric_daily 的预聚合数据；\n  - 违规工单：quality_violation 按实体+状态索引；支持按规则/运行快速过滤；\n  - 规则库检索：validation_rule 按类别/状态/目标类型复合索引，结合标签反查。\n- 功能覆盖： \n  - 质量规则库：validation_rule + rule_tag_map + rule_target 组合，满足创建/编辑/搜索/启停/导出；\n  - 质量检查任务：quality_task + quality_task_rule + quality_task_run 满足任务创建、执行监控与结果记录；\n  - 质量监控：quality_metric_daily 提供概览与趋势数据；quality_alert 支撑告警触发与回溯；\n  - 闭环治理：quality_violation + remediation_action 支撑工单整改与状态流转。\n- 安全与合规：不存敏感明文，所有关键操作（创建/编辑/执行/告警/整改）进入 audit_log（见通用审计域）；权限按“质量管理员/普通用户”细分，任务执行与规则编辑需管理员权限。\n\n#### 6.3.5 模型与主题域\n\n设计对齐与目标\n\n- 对齐 <mcfile name=\"PRD-数据资产管理平台.md\" path=\"d:\\\\工作文件\\\\产业大脑\\\\数据资产管理平台\\\\docs\\\\business-design\\\\PRD-数据资产管理平台.md\"></mcfile> 第4.7章节（数据架构），覆盖“4.7.1 数据仓库分层管理、4.7.2 主题域管理”的业务与技术规范，确保模型/版本与分层、主题域形成一致的治理闭环。\n- 目标：提升存储效率（树型与目录归档的规范化）、查询性能（分层+域的复合索引与路径物化）、功能覆盖（分层管理、域管理、模型目录与与元数据映射），并满足命名规则与目录生成的需求。\n\n表：warehouse_layer（数仓分层）\n\n- 设计意图：统一登记 ODS/STD/DWD/DWS/ADS/DIM/OTHER/TMP 等分层，维护上下游与顺序，支撑目录生成与权限治理。\n\n| 字段名               | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                                          |\n|-------------------|-----------------|----|------|-------------------|----|-----------------------------------------------|\n| id                | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 是  | 主键                                            |\n| code              | VARCHAR         | 16 | 否    | \\-                 | 否  | 分层编码（唯一；示例：ODS/DWD/DWS/ADS/DIM/STD/OTHER/TMP） |\n| name              | VARCHAR         | 64 | 否    | \\-                 | 否  | 分层名称                                          |\n| description       | TEXT            | \\-  | 是    | NULL              | 否  | 描述                                            |\n| seq               | INT             | \\-  | 否    | 0                 | 否  | 顺序（用于链路展示与排序）                                 |\n| upstream_layer_id | BIGINT UNSIGNED | \\-  | 是    | NULL              | 否  | 上游分层（FK→warehouse_layer.id）                   |\n| status            | VARCHAR         | 32 | 否    | 'enabled'         | 否  | 状态（enabled/disabled/deprecated）               |\n| created_at        | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                          |\n| updated_at        | DATETIME        | \\-  | 是    | NULL              | 否  | 更新时间                                          |\n\n- 唯一与索引：UNIQUE(code)；idx_seq（seq）；idx_upstream（upstream_layer_id）。\n\n表：theme_domain（主题域，树型）\n\n- 设计意图：主题域主/子域层级管理，提供树型导航与治理边界。引入层级与路径物化便于检索与展示。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|-------------|-----------------|-----|------|-------------------|----|--------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                       |\n| parent_id   | BIGINT UNSIGNED | \\-   | 是    | NULL              | 否  | 父域ID（FK→theme_domain.id） |\n| code        | VARCHAR         | 64  | 否    | \\-                 | 否  | 主题域编码（唯一）                |\n| name        | VARCHAR         | 128 | 否    | \\-                 | 否  | 主题域名称                    |\n| level       | INT             | \\-   | 否    | 1                 | 否  | 层级（主域=1，子域=2…）           |\n| path        | VARCHAR         | 512 | 是    | NULL              | 否  | 层级路径（如“客户/交易”）           |\n| owner       | VARCHAR         | 128 | 是    | NULL              | 否  | 负责人/团队                   |\n| status      | VARCHAR         | 32  | 否    | 'active'          | 否  | 状态（active/inactive）      |\n| description | TEXT            | \\-   | 是    | NULL              | 否  | 描述                       |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                     |\n| updated_at  | DATETIME        | \\-   | 是    | NULL              | 否  | 更新时间                     |\n\n- 唯一与索引：UNIQUE(code)；idx_parent（parent_id）；idx_level（level）；idx_path_prefix（path 前缀索引或全文索引按需）。\n\n表：domain_process（业务过程）\n\n- 设计意图：围绕主题域的核心业务过程（如客户注册、订单支付），用于过程治理与模型绑定。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                      |\n|-------------|-----------------|-----|------|-------------------|----|---------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                        |\n| domain_id   | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 主题域ID（FK→theme_domain.id） |\n| code        | VARCHAR         | 64  | 否    | \\-                 | 否  | 过程编码（域内唯一）                |\n| name        | VARCHAR         | 128 | 否    | \\-                 | 否  | 过程名称                      |\n| path        | VARCHAR         | 512 | 是    | NULL              | 否  | 面包屑路径（如“客户域/注册”）          |\n| sort_order  | INT             | \\-   | 否    | 0                 | 否  | 排序                        |\n| owner       | VARCHAR         | 128 | 是    | NULL              | 否  | 负责人/团队                    |\n| status      | VARCHAR         | 32  | 否    | 'active'          | 否  | 状态（active/inactive）       |\n| description | TEXT            | \\-   | 是    | NULL              | 否  | 描述                        |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                      |\n\n- 唯一与索引：UNIQUE(domain_id, code)；idx_domain（domain_id）。\n\n表：layer_domain_catalog（分层-主题域目录）\n\n- 设计意图：在分层与主题域维度下生成目录与命名规范绑定，支撑“目录名称自动生成与命名规则校验”。\n\n| 字段名            | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                        |\n|----------------|-----------------|-----|------|-------------------|----|-----------------------------|\n| id             | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                          |\n| layer_id       | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 分层ID（FK→warehouse_layer.id） |\n| domain_id      | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 主题域ID（FK→theme_domain.id）   |\n| directory_name | VARCHAR         | 128 | 否    | \\-                 | 否  | 目录名称（如“DWD > 客户域”）          |\n| naming_prefix  | VARCHAR         | 64  | 是    | NULL              | 否  | 命名前缀（如“dwd_kh”）             |\n| naming_pattern | VARCHAR         | 255 | 是    | NULL              | 否  | 命名规则模式（如“dwd_kh\\_[自定义]\\_di”）  |\n| description    | TEXT            | \\-   | 是    | NULL              | 否  | 描述                          |\n| created_at     | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                        |\n\n- 唯一与索引：UNIQUE(layer_id, domain_id)；idx_domain_layer（domain_id, layer_id）。\n\n#### 6.3.6 数据资产管理\n\n为严格对齐 PRD 4.1（数据资产目录）及其子章节（资产地图、类目级别管理、资产分类管理、资产标签管理、标签组管理、资产超市），本节对数据资产域的表结构进行系统性重构与优化，覆盖主数据、关系数据、运营与审计数据以及统计物化数据，确保扩展性、性能、一致性、完整性与安全性。\n\n表：category_level（类目级别定义）\n\n- 设计意图：统一平台分类层级的基线配置，支持启停与拖拽排序；一级级别必须存在（初始化保障）。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                |\n|-------------|-----------------|-----|------|-----------------------------------------------|----|---------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                  |\n| code        | VARCHAR         | 64  | 否    | \\-                                             | 否  | 级别编码（唯一，不可变）        |\n| name        | VARCHAR         | 128 | 否    | \\-                                             | 否  | 级别名称                |\n| level_order | INT             | \\-   | 否    | 1                                             | 否  | 层级序号（1 为顶层）         |\n| status      | VARCHAR         | 16  | 否    | 'active'                                      | 否  | 状态（active/disabled） |\n| description | TEXT            | \\-   | 是    | NULL                                          | 否  | 描述                  |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                |\n| updated_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                |\n\n- 约束与索引：UNIQUE(code)，UNIQUE(level_order)；idx_status(status)。\n\n表：tag_group（标签组）\n\n- 设计意图：标签分组与作用范围，支撑标签的分组管理与筛选。编码唯一且不可变（应用层约束）。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                |\n|-------------|-----------------|-----|------|-----------------------------------------------|----|---------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                  |\n| code        | VARCHAR         | 64  | 否    | \\-                                             | 否  | 标签组编码（唯一，不可变）       |\n| name        | VARCHAR         | 128 | 否    | \\-                                             | 否  | 标签组名称               |\n| description | TEXT            | \\-   | 是    | NULL                                          | 否  | 描述                  |\n| status      | VARCHAR         | 16  | 否    | 'active'                                      | 否  | 状态（active/disabled） |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                |\n| updated_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                |\n\n- 约束与索引：UNIQUE(code)；idx_status(status)。\n\n表：tag（标签）\n\n- 设计意图：资产/API/实体的多维打标；标签名称在标签组维度内唯一；支持标签组删除后标签转为未分组。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                                      |\n|-------------|-----------------|-----|------|-----------------------------------------------|----|-------------------------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                                        |\n| group_id    | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 标签组ID（FK→tag_group.id，ON DELETE SET NULL） |\n| code        | VARCHAR         | 64  | 否    | \\-                                             | 否  | 标签编码（全局唯一）                                |\n| name        | VARCHAR         | 128 | 否    | \\-                                             | 否  | 标签名称（在同组内唯一）                              |\n| description | TEXT            | \\-   | 是    | NULL                                          | 否  | 描述                                        |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                                      |\n| updated_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                      |\n\n- 约束与索引：UNIQUE(code)；UNIQUE(group_id, name)；idx_group(group_id)。\n\n表：asset_category（资产分类）\n\n- 设计意图：树型层级，自引用 parent_id；通过 level_id 对齐类目级别；冗余 path/sequence 优化检索与展示；支持负责人、可见范围与关联标签组（多对多）。\n\n| 字段名              | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                         |\n|------------------|-----------------|-----|------|-----------------------------------------------|----|------------------------------|\n| id               | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                           |\n| parent_id        | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 父分类ID（FK→asset_category.id）  |\n| level_id         | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 否  | 类目级别ID（FK→category_level.id） |\n| code             | VARCHAR         | 64  | 否    | \\-                                             | 否  | 分类编码（唯一）                     |\n| name             | VARCHAR         | 128 | 否    | \\-                                             | 否  | 分类名称                         |\n| description      | TEXT            | \\-   | 是    | NULL                                          | 否  | 描述                           |\n| path             | VARCHAR         | 255 | 是    | NULL                                          | 否  | 层级路径（如 /业务数据/客户信息）           |\n| sequence         | INT             | \\-   | 否    | 0                                             | 否  | 同级排序序号（拖拽调整）                 |\n| visibility_scope | VARCHAR         | 32  | 否    | 'public'                                      | 否  | 可见范围（public/org/project）     |\n| manager_user_id  | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 负责人（FK→user.id）              |\n| status           | VARCHAR         | 16  | 否    | 'active'                                      | 否  | 状态（active/disabled）          |\n| created_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                         |\n| updated_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                         |\n\n- 约束与索引：UNIQUE(code)；idx_parent(parent_id, sequence)；idx_level(level_id)；idx_status(status)；idx_path(path)；防循环引用（应用层校验）。\n\n表：category_tag_group（分类-标签组，M:N）\n\n- 设计意图：分类与标签组的多对多关联，用于在分类维度限定可用标签组。\n\n| 字段名          | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                                         |\n|--------------|-----------------|----|------|-------------------|----|----------------------------------------------|\n| category_id  | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 分类ID（FK→asset_category.id，ON DELETE CASCADE） |\n| tag_group_id | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 标签组ID（FK→tag_group.id，ON DELETE CASCADE）     |\n| created_at   | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                         |\n\n- 约束与索引：UNIQUE(category_id, tag_group_id)。\n\n表：asset（资产）\n\n- 设计意图：数据产品的编目实体，关联分类与来源实体；新增字段以支撑资产地图与资产超市的筛选与排序。\n\n| 字段名              | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                                            |\n|------------------|-----------------|-----|------|-----------------------------------------------|----|-------------------------------------------------|\n| id               | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                                              |\n| category_id      | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 否  | 分类ID（FK→asset_category.id）                      |\n| source_entity_id | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 元数据实体（FK→metadata_entity.id，ON DELETE SET NULL） |\n| code             | VARCHAR         | 64  | 否    | \\-                                             | 否  | 资产编码（唯一）                                        |\n| name             | VARCHAR         | 128 | 否    | \\-                                             | 否  | 资产名称                                            |\n| summary          | TEXT            | \\-   | 是    | NULL                                          | 否  | 摘要                                              |\n| spec             | JSON            | \\-   | 是    | NULL                                          | 否  | 技术规格（字段、格式、接口）                                  |\n| type             | VARCHAR         | 32  | 否    | 'table'                                       | 否  | 资产类型（table/file/api/metric/other）               |\n| biz_domain       | VARCHAR         | 64  | 是    | NULL                                          | 否  | 业务领域                                            |\n| update_cycle     | VARCHAR         | 32  | 是    | NULL                                          | 否  | 更新周期（如 daily/weekly/real_time）                  |\n| access_scope     | VARCHAR         | 32  | 否    | 'public'                                      | 否  | 访问权限（public/org/project/restricted）             |\n| last_updated_at  | DATETIME        | \\-   | 是    | NULL                                          | 否  | 最近更新时间                                          |\n| rating_avg       | DECIMAL         | 3,2 | 否    | 0.00                                          | 否  | 平均评分（缓存）                                        |\n| heat_score       | INT             | \\-   | 否    | 0                                             | 否  | 热度分（缓存）                                         |\n| owner            | VARCHAR         | 128 | 是    | NULL                                          | 否  | 归属团队                                            |\n| status           | VARCHAR         | 32  | 否    | 'draft'                                       | 否  | 状态（draft/review/published/deprecated）           |\n| created_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                                            |\n| updated_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                            |\n\n- 约束与索引：UNIQUE(code)；idx_category(category_id)；复合索引 idx_filter(type, biz_domain, update_cycle, access_scope, status, last_updated_at)。\n\n表：asset_tag（资产-标签，M:N）\n\n- 设计意图：资产与标签的多对多关系，复合唯一避免重复打标。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                                |\n|------------|-----------------|----|------|-------------------|----|-------------------------------------|\n| asset_id   | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 资产ID（FK→asset.id，ON DELETE CASCADE） |\n| tag_id     | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 标签ID（FK→tag.id，ON DELETE CASCADE）   |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                |\n\n- 约束与索引：UNIQUE(asset_id, tag_id)；idx_asset(asset_id)；idx_tag(tag_id)。\n\n表：market_listing（资产上架）\n\n- 设计意图：资产外部展示与交易配置；新增缓存指标以支撑资产超市推荐与排序。\n\n| 字段名              | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                                  |\n|------------------|-----------------|-----|------|-----------------------------------------------|----|---------------------------------------|\n| id               | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                                    |\n| asset_id         | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 否  | 资产ID（FK→asset.id）                     |\n| title            | VARCHAR         | 128 | 否    | \\-                                             | 否  | 上架标题                                  |\n| description      | TEXT            | \\-   | 是    | NULL                                          | 否  | 上架说明                                  |\n| pricing          | JSON            | \\-   | 是    | NULL                                          | 否  | 计费配置                                  |\n| status           | VARCHAR         | 32  | 否    | 'pending'                                     | 否  | 状态（pending/approved/rejected/offline） |\n| reviewer_user_id | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 审核人（FK→user.id）                       |\n| view_count       | INT             | \\-   | 否    | 0                                             | 否  | 浏览数（缓存）                               |\n| favorite_count   | INT             | \\-   | 否    | 0                                             | 否  | 收藏数（缓存）                               |\n| rating_avg       | DECIMAL         | 3,2 | 否    | 0.00                                          | 否  | 平均评分（缓存）                              |\n| heat_score       | INT             | \\-   | 否    | 0                                             | 否  | 热度分（缓存）                               |\n| created_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                                  |\n| updated_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                  |\n\n- 约束与索引：idx_asset_status(asset_id, status)；idx_heat(heat_score DESC)。\n\n表：subscription（订阅）\n\n- 设计意图：订阅关系与额度/到期管理；terms/quota 描述限制条款与配额。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值                                           | 自增 | 字段注释                        |\n|------------|-----------------|----|------|-----------------------------------------------|----|-----------------------------|\n| id         | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 是  | 主键                          |\n| listing_id | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 上架ID（FK→market_listing.id）  |\n| user_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 订阅用户（FK→user.id）            |\n| status     | VARCHAR         | 32 | 否    | 'active'                                      | 否  | 状态（active/canceled/expired） |\n| terms      | JSON            | \\-  | 是    | NULL                                          | 否  | 订阅条款/限制                     |\n| quota      | JSON            | \\-  | 是    | NULL                                          | 否  | 配额（调用次数/下载量等）               |\n| expires_at | DATETIME        | \\-  | 是    | NULL                                          | 否  | 到期时间                        |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                        |\n| updated_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                        |\n\n- 约束与索引：UNIQUE(listing_id, user_id)；idx_user_status(user_id, status)。\n\n表：asset_favorite（资产收藏）\n\n- 设计意图：记录用户收藏行为，用于资产超市“我的收藏”和热门统计。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                                |\n|------------|-----------------|----|------|-------------------|----|-------------------------------------|\n| id         | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 是  | 主键                                  |\n| asset_id   | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 资产ID（FK→asset.id，ON DELETE CASCADE） |\n| user_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 用户ID（FK→user.id，ON DELETE CASCADE）  |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 收藏时间                                |\n\n- 约束与索引：UNIQUE(asset_id, user_id)；idx_user(user_id)。\n\n表：asset_rating（资产评分/评价）\n\n- 设计意图：用户对资产的评分与评价内容，支撑评分排序与统计卡片。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值                                           | 自增 | 字段注释                                |\n|------------|-----------------|----|------|-----------------------------------------------|----|-------------------------------------|\n| id         | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 是  | 主键                                  |\n| asset_id   | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 资产ID（FK→asset.id，ON DELETE CASCADE） |\n| user_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 用户ID（FK→user.id，ON DELETE CASCADE）  |\n| score      | INT             | \\-  | 否    | 0                                             | 否  | 评分（1-5）                             |\n| comment    | TEXT            | \\-  | 是    | NULL                                          | 否  | 评价内容                                |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                                |\n| updated_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                |\n\n- 约束与索引：UNIQUE(asset_id, user_id)；idx_asset(asset_id)；idx_score(score)。\n\n表：asset_access_request（资产使用申请）\n\n- 设计意图：集中记录资产使用申请与审批流程，符合“申请流程与审批记录”的审计要求。\n\n| 字段名              | 数据类型            | 长度 | 允许为空 | 默认值                                           | 自增 | 字段注释                                   |\n|------------------|-----------------|----|------|-----------------------------------------------|----|----------------------------------------|\n| id               | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 是  | 主键                                     |\n| asset_id         | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 资产ID（FK→asset.id）                      |\n| listing_id       | BIGINT UNSIGNED | \\-  | 是    | NULL                                          | 否  | 上架ID（FK→market_listing.id）             |\n| user_id          | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 申请人（FK→user.id）                        |\n| status           | VARCHAR         | 32 | 否    | 'pending'                                     | 否  | 状态（pending/approved/rejected/canceled） |\n| reason           | TEXT            | \\-  | 是    | NULL                                          | 否  | 申请理由与用途说明                              |\n| reviewer_user_id | BIGINT UNSIGNED | \\-  | 是    | NULL                                          | 否  | 审批人（FK→user.id）                        |\n| created_at       | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP                             | 否  | 申请时间                                   |\n| updated_at       | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                   |\n\n- 约束与索引：idx_asset_status(asset_id, status)；idx_user_status(user_id, status)。\n\n表：asset_stat_daily（资产日统计）\n\n- 设计意图：按日汇总资产曝光、点击、收藏、申请、下载、评分与热度，用于资产地图统计卡片与超市推荐。\n\n| 字段名        | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                                |\n|------------|-----------------|-----|------|-------------------|----|-------------------------------------|\n| id         | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                                  |\n| asset_id   | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 资产ID（FK→asset.id，ON DELETE CASCADE） |\n| stat_date  | DATE            | \\-   | 否    | \\-                 | 否  | 统计日期                                |\n| views      | INT             | \\-   | 否    | 0                 | 否  | 浏览次数                                |\n| favorites  | INT             | \\-   | 否    | 0                 | 否  | 收藏次数                                |\n| applies    | INT             | \\-   | 否    | 0                 | 否  | 申请次数                                |\n| downloads  | INT             | \\-   | 否    | 0                 | 否  | 下载次数                                |\n| rating_avg | DECIMAL         | 3,2 | 否    | 0.00              | 否  | 平均评分                                |\n| heat_score | INT             | \\-   | 否    | 0                 | 否  | 热度分                                 |\n| created_at | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 统计入库时间                              |\n\n- 约束与索引：UNIQUE(asset_id, stat_date)；idx_date(stat_date)。\n\n一致性与安全约束（本节表）：\n\n- 外键动作：默认 ON DELETE RESTRICT；对允许“置空”的场景（tag.group_id、asset.source_entity_id）采用 ON DELETE SET NULL；对纯关联表（asset_tag、category_tag_group、asset_favorite、asset_stat_daily）采用 ON DELETE CASCADE。\n- 删除与迁移：禁止删除含受控资产的分类（应用层校验与事务保障）；分类拖拽移动需记录影响范围与变更说明（审计日志）。\n- 权限与审计：分类创建/调整需类目管理员权限；标签与标签组操作需标签管理员权限；上架、申请、评分、收藏等行为均记录至 audit_log（全局审计表，见系统审计章节）。\n- 索引与性能：高频过滤列（type/biz_domain/update_cycle/access_scope/status/last_updated_at）建立覆盖索引；分类树采用 path 物化并配合 idx_parent(parent_id, sequence) 实现懒加载与虚拟滚动；评分与热度排序通过缓存字段（asset.rating_avg/heat_score、market_listing.heat_score）与日统计表加速。\n- 生成列与 JSON 可检索（建议）： \n  - asset_format GENERATED COLUMN (JSON_EXTRACT(spec, '$.format')) 并索引(asset_format)；\n  - pricing_model GENERATED COLUMN (JSON_EXTRACT(pricing, '$.model')) 并索引(pricing_model)。\n\n表：tag_stat_daily（标签日统计）\n\n- 设计意图：按日聚合标签维度的资产数量与行为指标，用于标签排行、标签云权重与资产地图的标签筛选性能优化。\n\n| 字段名         | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                              |\n|-------------|-----------------|----|------|-------------------|----|-----------------------------------|\n| id          | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 是  | 主键                                |\n| tag_id      | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 标签ID（FK→tag.id，ON DELETE CASCADE） |\n| stat_date   | DATE            | \\-  | 否    | \\-                 | 否  | 统计日期                              |\n| asset_count | INT             | \\-  | 否    | 0                 | 否  | 标签下资产数量（当日快照）                     |\n| views       | INT             | \\-  | 否    | 0                 | 否  | 浏览次数                              |\n| favorites   | INT             | \\-  | 否    | 0                 | 否  | 收藏次数                              |\n| applies     | INT             | \\-  | 否    | 0                 | 否  | 申请次数                              |\n| downloads   | INT             | \\-  | 否    | 0                 | 否  | 下载次数                              |\n| heat_score  | INT             | \\-  | 否    | 0                 | 否  | 热度分                               |\n| created_at  | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 统计入库时间                            |\n\n- 约束与索引：UNIQUE(tag_id, stat_date)；idx_tag(tag_id)；idx_date(stat_date)。\n\n表：category_stat_daily（分类日统计）\n\n- 设计意图：按日汇总分类维度的资产数量与行为指标，用于资产地图分类卡片数据与分类概览页的性能优化。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                                         |\n|-------------|-----------------|-----|------|-------------------|----|----------------------------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                                           |\n| category_id | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 分类ID（FK→asset_category.id，ON DELETE CASCADE） |\n| stat_date   | DATE            | \\-   | 否    | \\-                 | 否  | 统计日期                                         |\n| asset_count | INT             | \\-   | 否    | 0                 | 否  | 分类下资产数量（当日快照）                                |\n| views       | INT             | \\-   | 否    | 0                 | 否  | 浏览次数                                         |\n| favorites   | INT             | \\-   | 否    | 0                 | 否  | 收藏次数                                         |\n| applies     | INT             | \\-   | 否    | 0                 | 否  | 申请次数                                         |\n| downloads   | INT             | \\-   | 否    | 0                 | 否  | 下载次数                                         |\n| rating_avg  | DECIMAL         | 3,2 | 否    | 0.00              | 否  | 平均评分                                         |\n| heat_score  | INT             | \\-   | 否    | 0                 | 否  | 热度分                                          |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 统计入库时间                                       |\n\n- 约束与索引：UNIQUE(category_id, stat_date)；idx_category(category_id)；idx_date(stat_date)。\n\n#### 6.3.7 数据服务\n\n本节给出“API管理与调用日志”的数据库表设计，确保原型页面 api-management.html 与 api-logs.html 的检索、筛选、排序、版本管理、状态切换、批量操作、监控图表与日志详情/导出等能力可落地。\n\n设计遵循：关系型数据库（MySQL/PostgreSQL）为主，日志表采用按时间分区策略，JSON字段用于请求/响应原始内容；关键查询字段建立覆盖索引；指标表用于支撑看板与图表的快速聚合查询。\n\n一、API服务主体表\n\n1. 表：api_service（API服务主档）\n\n- 作用：承载 API 的基础属性，并支持原型中的检索、筛选、排序、状态切换、批量操作与“导出API文档”所需的元信息。\n\n| 字段名         | 数据类型        | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                             |\n|-------------|-------------|-----|------|-------------------|----|----------------------------------|\n| id          | BIGINT/UUID | \\-   | 否    | \\-                 | 否  | 主键                               |\n| name        | VARCHAR     | 128 | 否    | \\-                 | 否  | API名称                            |\n| description | TEXT        | \\-   | 是    | \\-                 | 否  | 描述                               |\n| method      | VARCHAR     | 16  | 否    | \\-                 | 否  | HTTP方法（GET/POST/PUT/DELETE...）   |\n| path        | VARCHAR     | 255 | 否    | \\-                 | 否  | 路由路径，如 /v1/resource/1            |\n| version     | VARCHAR     | 32  | 否    | \\-                 | 否  | 版本号，如 v1.0.0（与 method+path 保持一致） |\n| status      | VARCHAR     | 16  | 否    | draft             | 否  | 状态：enabled/disabled/draft        |\n| domain_id   | BIGINT      | \\-   | 是    | \\-                 | 否  | 所属域（FK→biz_domain.id）            |\n| owner_id    | BIGINT      | \\-   | 是    | \\-                 | 否  | 负责人（FK→user_account.id）          |\n| tags_json   | JSON        | \\-   | 是    | \\-                 | 否  | 标签快照（真实标签见关联表）                   |\n| created_at  | TIMESTAMP   | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                             |\n| created_by  | BIGINT      | \\-   | 是    | \\-                 | 否  | 创建人（FK→user_account.id）          |\n| updated_at  | TIMESTAMP   | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                             |\n| updated_by  | BIGINT      | \\-   | 是    | \\-                 | 否  | 更新人（FK→user_account.id）          |\n| is_deleted  | BOOLEAN     | \\-   | 否    | FALSE             | 否  | 逻辑删除标记                           |\n\n- 约束与索引： \n  - UNIQUE(method, path, version)\n  - IDX(api_service.name)\n  - IDX(api_service.method, api_service.path)\n  - IDX(api_service.status)\n  - IDX(api_service.updated_at)\n  - IDX(api_service.domain_id), IDX(api_service.owner_id)\n\n1. 表：api_service_version（API版本档案）\n\n- 作用：管理 API 的版本信息、变更说明与规范文档（如 OpenAPI 片段），支撑原型中的版本显示与文档导出。\n\n| 字段名        | 数据类型        | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|------------|-------------|----|------|-------------------|----|--------------------------|\n| id         | BIGINT/UUID | \\-  | 否    | \\-                 | 否  | 主键                       |\n| api_id     | BIGINT      | \\-  | 否    | \\-                 | 否  | API主键（FK→api_service.id） |\n| version    | VARCHAR     | 32 | 否    | \\-                 | 否  | 版本号                      |\n| changelog  | TEXT        | \\-  | 是    | \\-                 | 否  | 版本变更说明                   |\n| spec_json  | JSON        | \\-  | 是    | \\-                 | 否  | 规范文档片段（请求/响应示例、参数定义等）    |\n| created_at | TIMESTAMP   | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                     |\n| created_by | BIGINT      | \\-  | 是    | \\-                 | 否  | 创建人（FK→user_account.id）  |\n\n- 约束与索引： \n  - UNIQUE(api_id, version)\n  - IDX(api_id, version)\n\n1. 表：api_tag（标签字典，可复用平台标签模块；如已有统一标签表则直接复用）\n\n| 字段名        | 数据类型      | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                |\n|------------|-----------|----|------|-------------------|----|---------------------|\n| id         | BIGINT    | \\-  | 否    | \\-                 | 否  | 主键                  |\n| name       | VARCHAR   | 64 | 否    | \\-                 | 否  | 标签名（如“订单/用户/库存/支付”） |\n| group_name | VARCHAR   | 64 | 是    | \\-                 | 否  | 标签组（可选）             |\n| created_at | TIMESTAMP | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                |\n\n- 约束与索引：UNIQUE(name)，IDX(group_name)\n\n1. 表：api_service_tag_rel（API与标签关联）\n\n- 作用：支持按标签筛选与标签展示。\n\n| 字段名        | 数据类型      | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|------------|-----------|----|------|-------------------|----|--------------------------|\n| api_id     | BIGINT    | \\-  | 否    | \\-                 | 否  | API主键（FK→api_service.id） |\n| tag_id     | BIGINT    | \\-  | 否    | \\-                 | 否  | 标签主键（FK→api_tag.id）      |\n| created_at | TIMESTAMP | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                     |\n\n- 约束与索引： \n  - PK(api_id, tag_id)\n  - IDX(tag_id, api_id)\n\n说明：若平台已有“主题域/用户/标签”等统一主数据，请将 domain_id/owner_id/tag 外键指向统一主数据表。\n\n—\n\n二、API调用日志与详情\n\n1. 表：api_call_log（调用日志，建议时间分区：按月/按日）\n\n- 作用：承载原型 api-logs.html 的列表/筛选/分页/导出字段；并支持详情页展示请求与响应。\n\n| 字段名           | 数据类型      | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|---------------|-----------|-----|------|-------------------|----|--------------------------|\n| id            | BIGINT    | \\-   | 否    | \\-                 | 是  | 主键（雪花/自增）                |\n| ts            | TIMESTAMP | \\-   | 否    | \\-                 | 否  | 日志时间戳（筛选与排序）             |\n| api_id        | BIGINT    | \\-   | 是    | \\-                 | 否  | 关联API（FK→api_service.id） |\n| service_name  | VARCHAR   | 128 | 是    | \\-                 | 否  | 服务名称快照（用于关键字筛选）          |\n| method        | VARCHAR   | 16  | 否    | \\-                 | 否  | HTTP方法                   |\n| path          | VARCHAR   | 255 | 否    | \\-                 | 否  | 请求路径                     |\n| status_code   | INT       | \\-   | 否    | \\-                 | 否  | HTTP状态码（精确筛选）            |\n| status_class  | CHAR      | 1   | 否    | \\-                 | 否  | 状态码分组（2/4/5，派生列）         |\n| latency_ms    | INT       | \\-   | 否    | \\-                 | 否  | 耗时（毫秒）                   |\n| client_ip     | VARCHAR   | 64  | 是    | \\-                 | 否  | 调用者IP                    |\n| tenant_id     | BIGINT    | \\-   | 是    | \\-                 | 否  | 租户ID（可选）                 |\n| user_id       | BIGINT    | \\-   | 是    | \\-                 | 否  | 调用用户/应用ID（可选）            |\n| trace_id      | VARCHAR   | 64  | 是    | \\-                 | 否  | 链路追踪ID                   |\n| span_id       | VARCHAR   | 64  | 是    | \\-                 | 否  | 链路SpanID                 |\n| req_headers   | JSON      | \\-   | 是    | \\-                 | 否  | 请求头原始内容                  |\n| req_body      | JSON/TEXT | \\-   | 是    | \\-                 | 否  | 请求体原始内容（按数据库类型选择）        |\n| resp_headers  | JSON      | \\-   | 是    | \\-                 | 否  | 响应头原始内容                  |\n| resp_body     | JSON/TEXT | \\-   | 是    | \\-                 | 否  | 响应体原始内容（按数据库类型选择）        |\n| error_message | TEXT      | \\-   | 是    | \\-                 | 否  | 异常信息快照                   |\n| created_at    | TIMESTAMP | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 写入时间                     |\n\n- 约束与索引： \n  - 分区键：ts（范围分区）\n  - IDX(ts DESC)\n  - IDX(method, path)\n  - IDX(status_code), IDX(status_class)\n  - IDX(api_id, ts DESC)\n  - IDX(client_ip, ts)\n  - 可选：path/req_body/resp_body 全文索引（按数据库能力）\n\n1. 表：api_call_log_archive（调用日志归档，可选）\n\n- 结构与 api_call_log 相同；用于按保留周期迁移历史分区至归档库或对象存储，降低主库压力。\n\n—\n\n三、API监控与统计\n\n1. 表：api_service_stat_daily（API日统计）\n\n- 作用：支撑 API管理页面左侧“状态监控”三个图表（调用量、错误率、响应耗时）与常用预设筛选（高调用量/低错误率/响应快）。\n\n| 字段名            | 数据类型      | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|----------------|-----------|----|------|-------------------|----|--------------------------|\n| stat_date      | DATE      | \\-  | 否    | \\-                 | 否  | 统计日期                     |\n| api_id         | BIGINT    | \\-  | 否    | \\-                 | 否  | API主键（FK→api_service.id） |\n| calls          | BIGINT    | \\-  | 否    | 0                 | 否  | 调用量                      |\n| error_count    | BIGINT    | \\-  | 否    | 0                 | 否  | 错误量（status_code>=400）    |\n| avg_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | 平均耗时                     |\n| p95_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | P95耗时                    |\n| max_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | 最大耗时                     |\n| updated_at     | TIMESTAMP | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                     |\n\n- 约束与索引： \n  - PK(stat_date, api_id)\n  - IDX(api_id, stat_date DESC)\n  - 可建近7/30日聚合视图以加速看板查询\n\n1. 表：api_service_stat_hourly（小时统计，可选）\n\n- 作用：更细粒度的波动分析与告警基础（若需要）。\n\n| 字段名            | 数据类型      | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|----------------|-----------|----|------|-------------------|----|--------------------------|\n| stat_hour      | TIMESTAMP | \\-  | 否    | \\-                 | 否  | 统计小时（整点）                 |\n| api_id         | BIGINT    | \\-  | 否    | \\-                 | 否  | API主键（FK→api_service.id） |\n| calls          | BIGINT    | \\-  | 否    | 0                 | 否  | 调用量                      |\n| error_count    | BIGINT    | \\-  | 否    | 0                 | 否  | 错误量                      |\n| avg_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | 平均耗时                     |\n| p95_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | P95耗时                    |\n| max_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | 最大耗时                     |\n| updated_at     | TIMESTAMP | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                     |\n\n—\n\n四、导出与文档\n\n- API文档导出：从 api_service 与 api_service_version.spec_json 汇总生成；必要时可增加 api_doc_export_task（导出任务）记录任务状态与生成文件元数据。\n\n表：api_doc_export_task（可选）\n\n| 字段名         | 数据类型      | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                                 |\n|-------------|-----------|-----|------|-------------------|----|--------------------------------------|\n| id          | BIGINT    | \\-   | 否    | \\-                 | 否  | 主键                                   |\n| api_id      | BIGINT    | \\-   | 是    | \\-                 | 否  | 单API导出时记录（FK→api_service.id）         |\n| format      | VARCHAR   | 32  | 否    | \\-                 | 否  | 导出格式（markdown/html/openapi-json）     |\n| status      | VARCHAR   | 16  | 否    | pending           | 否  | 任务状态（pending/running/success/failed） |\n| file_url    | VARCHAR   | 512 | 是    | \\-                 | 否  | 生成文档下载地址                             |\n| created_at  | TIMESTAMP | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                 |\n| finished_at | TIMESTAMP | \\-   | 是    | \\-                 | 否  | 完成时间                                 |\n| message     | TEXT      | \\-   | 是    | \\-                 | 否  | 任务信息/错误说明                            |\n\n—\n\n五、关键查询映射（与原型交互对齐）\n\n- API管理（列表）：\n  - 关键字搜索：name LIKE ? OR path LIKE ?（必要时引入全文索引）；索引覆盖 name/path。\n  - 筛选：status（IDX）、method（IDX）、tag（JOIN api_service_tag_rel）、domain_id（IDX）、owner_id（IDX）、updated_at（IDX）。\n  - 排序：name/status/updated_at/calls/created_at；calls 来自最近统计或实时聚合，推荐以 api_service_stat_daily 的近7/30日 calls 排序。\n  - 状态切换/批量操作：更新 api_service.status 或 is_deleted；记录审计日志（平台统一审计表）。\n- 调用日志（列表/详情/导出）：\n  - 关键字：service_name/path（IDX）；方法：method（IDX）；状态分组：status_class（2/4/5）；精确状态码：status_code；时间范围：ts BETWEEN ...\n  - 详情：根据 id 展示 req/resp headers/body 与 trace_id/span_id。\n  - 导出：基于筛选条件批量查询 api_call_log，按 CSV 格式输出。\n\n---\n\n### 6.4 关系约束\n\n本节明确各表之间的关系类型、外键约束与索引策略，解释跨表数据如何流动与通过 JOIN 进行关联查询；在减少数据冗余的同时，确保一致性与可追踪性。\n\n- 一对一（1:1）示例与实现方式：\n  - 通过唯一外键实现：例如可扩展 user_profile（profile.user_id UNIQUE FK→user.id）实现一对一用户详情；本设计当前未引入专门1:1表，但遵循此约束模式。\n- 一对多（1:N）：\n  - theme_domain（1）→ model（N），model（1）→ model_version（N）。\n  - asset_category（1）→ asset（N）。\n  - asset（1）→ market_listing（N），market_listing（1）→ subscription（N）。\n  - api（1）→ api_log（N）。\n  - data_source（1）→ metadata_entity（N），metadata_entity（1）→ change_log（N）。\n  - quality_task（1）→ execution_result（N），execution_result（1）→ quality_issue（N）。\n- 多对多（M:N）：\n  - user ↔ role，经 user_role 关联（复合唯一 user_id+role_id）；\n  - role ↔ permission，经 role_permission 关联（复合唯一 role_id+permission_id）；\n  - asset ↔ tag，经 asset_tag 关联（复合唯一 asset_id+tag_id）；\n  - quality_task ↔ validation_rule，经 quality_task_rule 关联（复合唯一 task_id+rule_id）。\n- 自引用与图关系：\n  - asset_category 的 parent_id 自引用实现树型层级；\n  - lineage_edge 以 src_entity_id 与 dst_entity_id 建模有向关系，用于血缘图谱的抽象索引。\n\n外键与索引策略（MySQL InnoDB）：\n\n- 所有外键字段建立 BTREE 索引（如 model_version.model_id、asset.category_id、api.asset_id、subscription.user_id）。\n- 约束动作建议： \n  - ON UPDATE CASCADE：模型版本引用模型、日志引用API等，保持更新一致传播；\n  - ON DELETE RESTRICT：默认限制删除，防止误删导致级联数据丢失；\n  - ON DELETE SET NULL：适用于可选引用（如 asset.source_entity_id），当来源移除时保留资产但清空引用。\n- 复合唯一与去重： \n  - 唯一自然键：user.username、role.code、permission.code、theme_domain.code、model.code、tag.code、asset.code、api.code、standard_item.code、validation_rule.code。\n  - 复合唯一：model_version（model_id, version）；关联表（user_role、role_permission、asset_tag、quality_task_rule）在（左FK, 右FK）上复合唯一以避免重复关联。\n\n跨表数据流与 JOIN 示例：\n\n- 资产检索（分类+标签）： \n  - asset JOIN asset_category ON asset.category_id = asset_category.id → 分类过滤；\n  - JOIN asset_tag ON asset.id = asset_tag.asset_id JOIN tag ON asset_tag.tag_id = tag.id → 标签筛选。\n- 模型版本定位： \n  - model JOIN model_version ON model.id = model_version.model_id，结合 version/status 精确定位；\n- 元数据血缘溯源： \n  - metadata_entity e JOIN lineage_edge le ON e.id = le.src_entity_id JOIN metadata_entity d ON le.dst_entity_id = d.id，结合 le.transform/confidence 展示依赖路径；\n- 质量问题闭环： \n  - quality_task JOIN execution_result ON ... JOIN quality_issue ON ...，再关联 metadata_entity 进行定位与整改；\n- API调用审计： \n  - api JOIN api_log ON api.id = api_log.api_id，按 status_code/duration_ms 聚合分析性能与稳定性。\n\n减少冗余与一致性保障：\n\n- 主数据规范化：用户、角色、权限、标签、分类、模型、标准与规则等主数据采用独立表与唯一编码，避免跨表重复存储。\n- 使用关联表实现 M:N，替代多值字段，确保扩展性与检索效率。\n- 可变结构用 JSON 承载（如 schema/config），同时保留核心可检索字段（code/name/type）与唯一/覆盖索引。\n- 通过变更记录（change_log）与执行摘要（execution_result）保持事件与状态的可追踪性，外键与时间戳确保时序一致。\n- 读优化的适度冗余：如 asset_category.path、model_version.status 作为物化属性，检索更优；其更新通过应用层事务保证一致。\n\n注：关系约束与索引策略需结合具体业务量级与访问模式调优，必要时引入分区（按时间/组织）、读写分离与物化视图（应用层维护）以保障性能。\n\n---\n\n### 6.5 数据存储及索引策略\n\n总体原则：以“查询驱动”的索引设计与“写读平衡”的数据布局为准则。所有主数据遵循规范化建模（3NF），高频查询场景采用适度反范式（冗余 path、状态物化）；对 JSON 字段采用“生成列+索引”的模式保障可检索性。\n\n索引类型与适用场景（MySQL 8.0 InnoDB）：\n\n- 主键索引（聚簇索引）：\n  - 设计：所有表以 BIGINT UNSIGNED AUTO_INCREMENT 作为主键（聚簇）。如需跨分片全局唯一ID，改用雪花算法（snowflake）或有序UUID，避免写入热点与页分裂的权衡。\n  - 原因与效果：保证主键范围检索与按主键排序的高效；追加插入的页分裂低、缓存命中高。大规模并发下避免随机主键导致的页分布碎片与二级索引膨胀。\n- 唯一索引：\n  - 表与字段：user.username，role.code，permission.code，theme_domain.code，model.code，standard_item.code，validation_rule.code，tag.code，asset.code，api.code 等。\n  - 原因与效果：确保主数据唯一性与幂等写入，避免应用层重复校验；配合 UPSERT（INSERT ... ON DUPLICATE KEY UPDATE）提升写入鲁棒性。\n- 复合索引（覆盖常见过滤与排序）：\n  - 典型索引： \n    - api_log(api_id, logged_at) → 按API与时间范围检索日志；\n    - api_log(status_code, logged_at) → 状态码维度的时间分析；\n    - market_listing(asset_id, status) → 上架状态筛选；\n    - subscription(user_id, status) → 用户订阅状态查询；\n    - model_version(model_id, version) → 版本精确定位（与唯一约束一致）；\n    - asset_tag(asset_id, tag_id) → 多对多关联去重与连接加速；\n    - metadata_entity(source_id, entity_type) → 来源与类型过滤；\n  - 原因与效果：提升多条件过滤下的索引选择与范围扫描效率；列顺序遵循“选择性高→过滤列→排序列”，优先构建覆盖索引减少回表。\n- 全文索引（FULLTEXT）：\n  - 表与字段：market_listing.title/description，metadata_entity.business_semantic，standard_item.name/content（如字典检索）。\n  - 原因与效果：支持模糊匹配与相关性排序；适用于中等规模描述类文本的快速定位。跨域复杂检索仍以 Elasticsearch 为主，关系库承担必要的子集检索与回查。\n- 前缀索引（Prefix Index）：\n  - 场景：对长VARCHAR（如 metadata_entity.full_name、request_id 等）选择足够区分度的前缀长度（如 32/64）。\n  - 原因与效果：降低索引体积与维护成本，同时保持较好的选择性；谨慎用于排序与覆盖查询以避免优化器退化。\n- 生成列 + 索引（JSON 可检索）：\n  - 示例： \n    - asset_spec_format GENERATED COLUMN (JSON_EXTRACT(spec, '$.format'))，索引(asset_spec_format)；\n    - api_auth_type GENERATED COLUMN (JSON_EXTRACT(auth, '$.type'))，索引(api_auth_type)；\n    - metadata_entity_type GENERATED COLUMN (JSON_EXTRACT(schema, '$.type'))，索引(metadata_entity_type)。\n  - 原因与效果：对可变结构进行“路径物化”，在不破坏灵活性的前提下实现高效过滤与统计；结合覆盖索引减少回表开销。\n- 空间索引（SPATIAL，按需）：\n  - 场景：如资产包含地理位置（POINT/GEOMETRY），为位置范围/邻近查询建立空间索引。\n  - 原因与效果：显著提升空间范围检索与距离计算性能；谨慎评估数据量与更新频次。\n\n索引维护与监控：\n\n- 定期 ANALYZE/OPTIMIZE，监测索引选择性与访问频次，淘汰“无效索引/冗余索引”。\n- 对热点写表（api_log、execution_result）控制索引数量，优先时间/主键维度，减少写放大。\n- 引入慢查询采样与可视化分析（如按 95/99 分位时延），迭代调整复合索引列序与覆盖列。\n- 针对倾斜键（如单一热门 tag_id），考虑打散写入（批处理随机化、异步聚合）或将分析查询迁移至 ES。\n\n分区/分表/分库策略：\n\n- 分区表（Partitioning）：\n  - 场景：api_log、execution_result 等时间序列高吞吐表按 RANGE（按月/周）或 INTERVAL 分区；避免与外键强依赖表混用，提升分区裁剪与冷热数据维护（ALTER TABLE ... DROP PARTITION）。\n  - 效果：提高范围检索与聚合性能，降低历史数据维护成本；结合仅保留近 N 分区策略实现滚动归档。\n- 分表（Sharding at Table Level）：\n  - 场景：超大表按业务键/租户键（tenant_id/user_id）水平拆分（asset、api_log等）；使用统一分片路由层（中间件/应用）进行读写定位。\n  - 效果：降低单表索引体积与锁竞争，提升并行度与扩展性；避免跨分片 JOIN，读多写少的聚合分析迁移至 ES/数仓。\n- 分库（Database-Level Sharding/读写分离）：\n  - 原则：主从复制实现读写分离（主写从读）；从库不承担强一致事务；跨分库事务采用 SAGA/Outbox，避免两阶段提交复杂度。\n  - 效果：显著提升查询并发与可用性；主库压力受控，故障时快速提升从库为主库实现业务连续。\n\n分布式设计与管理原则：\n\n- 分片键选择：稳定、离散度高且业务天然隔离（tenant_id、user_id、日期段）；避免使用高并发自增主键作为分片键导致热点。\n- 全局唯一ID：使用雪花ID或集中ID服务，确保跨分片唯一与时间有序。\n- 事务与一致性：尽量避免跨分片事务；必要场景采用 SAGA、Outbox、事件溯源与最终一致模型。\n- 跨分片查询：聚合查询由应用层分片路由并汇总；重分析计算下沉至数仓/ES，关系库保主数据一致与轻查询。\n- 运维与扩容：支持在线扩容与再平衡（按分片迁移/复制）；基于容量与负载阈值进行自动/半自动重分布。\n\n---\n\n### 6.6 备份与恢复策略\n\n目标：在保证数据安全与合规的前提下，实现可预测的恢复时间（RTO）与恢复点目标（RPO），并通过演练与监控确保策略有效。\n\n备份类型与方案：\n\n- 全量备份（Full Backup）：\n  - 方式：物理热备（在线、快照/页复制）或逻辑备份（导出架构与数据），优先物理备保证恢复速度。\n  - 周期与窗口：每周一次（周日 02:00），选择业务低峰窗口；对关键主库采用存储快照与冻结一致性窗口。\n  - 存储：本地临时缓存→对象存储（MinIO/S3）→异地冗余；备份加密（KMS管理密钥），写后校验与完整性校验（校验和）。\n- 增量备份（Incremental / Binlog 连续备份）：\n  - 方式：基于二进制日志（binlog）连续归档；或基于物理页的增量备（记录变更页）。\n  - 周期：每日一次增量快照（01:00）+ 实时 binlog 流归档；保留近 30 天滚动窗口。\n  - 存储与校验：与全量备同策略；对增量链进行一致性验证，避免链断导致恢复失败。\n- 元数据与配置备份：\n  - 内容：数据库用户/权限、参数配置（my.cnf）、DDL 版本、存储过程；与应用配置（连接串、路由规则）。\n  - 周期：随全量备同步，关键变更事件触发即时备份。\n- 备份验证与演练：\n  - 验证：每周进行备份可读性与完整性校验；每月进行恢复演练（沙箱环境），验证 RTO/RPO 达标与步骤可执行。\n  - 报告：出具演练报告与改进项，纳入变更管理与审计。\n\n恢复流程（PITR：时间点恢复）：\n\n- 标准流程： \n  1. 选择最近一次有效全量备份；\n  2. 依次应用增量备份（如有）；\n  3. 回放 binlog 至目标时间点（T），校验一致性；\n  4. 切换流量（灰度/只读→读写），观察指标与回退预案就绪。\n- 恢复校验： \n  - 数据一致性校验（主数据行数/校验和/抽样比对）、关键索引完整性、应用探针（健康检查与关键读写用例）。\n\nRTO/RPO 目标（参考值，按业务级别分层）：\n\n- 核心主数据（用户/权限、资产/API注册、标准规则）：RPO ≤ 5 分钟、RTO ≤ 30 分钟。\n- 日志与审计（api_log、execution_result）：RPO ≤ 15 分钟、RTO ≤ 60 分钟（允许短时降级）。\n- 报表与分析（度量汇总等）：RPO ≤ 60 分钟、RTO ≤ 120 分钟（可延后恢复）。\n\n故障场景与应对：\n\n- 主库故障：提升从库为主库（只读→读写），重建复制链；在后台进行故障主库的数据比对与修复。\n- 数据误删/错改：基于 PITR 恢复至误操作前时间点；必要时进行差异合并与审计回溯。\n- 存储故障/机房级故障：切换至异地备份或异地只读副本，恢复并提升为主库；确保跨可用区网络与权限预配置。\n- 大规模灾难：使用异地全量备+增量链快速重建集群；根据业务优先级分批恢复与放量。\n\n运维与合规：\n\n- 备份保留策略：全量备近 8 周、增量+binlog 近 30 天；合规归档（关键审计）保留 1 年以上。\n- 安全：备份加密、传输加密、访问控制（最小权限）；对敏感数据进行脱敏或子集备份策略。\n- 监控与告警：备份失败、耗时异常、校验失败、RPO 暴露时间超阈均告警；看板展示备份覆盖率与恢复演练达标率。\n- 文档与演练：建立可执行 Runbook，至少每季度演练一次并更新文档；指定责任人与值班体系，确保可追责与可持续改进。\n\n---\n\n## 7. 系统部署与集成设计\n\n本章以“部署架构图 + 文字说明”的方式，完整呈现系统的物理/逻辑分布、关键数据流、通信路径与安全边界。部署图如下：\n\n![部署架构图](images/deployment-architecture.svg)\n\n### 7.1 服务器角色与功能划分\n\n- 外网访问层（Internet/客户端）\n  - 用户浏览器/前端：通过 HTTPS 访问静态资源与业务接口。\n  - CDN/静态资源服务（Nginx）：分发 HTML/CSS/JS，降低源站压力与网络时延。\n- DMZ 安全边界层\n  - WAF（Web 应用防火墙）：策略过滤（SQLi、XSS、CSRF、Bot）、IP/UA黑白名单、速率限制、威胁情报联动。\n  - L7 负载均衡（LB）：TLS 终止、基于路径/主机头转发到 API 网关；健康检查与会话保持。\n- 公网子网（反向代理/网关）\n  - API 网关（Nginx/Envoy）：统一入口、路由转发、限流熔断、灰度发布、观测（Access Log、Metrics、Tracing）。\n  - 认证服务（SSO/OAuth2）：单点登录、令牌签发与校验、用户与权限数据对接（MySQL 主库）。\n- 私网子网（应用服务集群）\n  - 业务服务（Application Services）：实现资产、标准、质量、模型、标签、上架、API 等领域服务；与缓存/数据库交互。\n  - 后台任务与调度（Scheduler/Workers）：质量任务执行、数据血缘采集、索引同步（至 ES/Neo4j）、对象存储写入等。\n- 数据与观测层（私网）\n  - MySQL 主库：关系型事务库，承载主数据（用户、资产、标准、模型、API注册等）。\n  - MySQL 从库（只读）：读写分离，承载报表与查询；主从复制，支持提升为主库。\n  - Redis：缓存会话与热点数据、分布式锁。\n  - Elasticsearch：全文检索与多维分析，承载日志与文本索引。\n  - Neo4j：元数据血缘与图关系查询。\n  - MinIO/S3：对象存储，承载大文件与导出归档；与应用服务私网访问。\n  - 观测系统（Prometheus/Grafana/ELK）：指标、日志与告警统一采集与展现。\n\n### 7.2 组件的物理/逻辑分布\n\n- 逻辑分层：访问层（WAF/LB）→ 网关层（API 网关、认证） → 应用层（服务/任务） → 数据层（MySQL/Redis/ES/Neo4j/对象存储） → 观测层（监控/日志）。\n- 物理分布： \n  - DMZ 与公网子网承载对外入口组件（WAF、LB、网关），隔离于私网应用与数据资源。\n  - 私网子网承载应用服务与数据服务；数据库与缓存位于同一私网安全域，禁止公网直连。\n  - 观测组件与日志采集在私网内运行，外网仅暴露必要的只读看板（经网关鉴权）。\n- 伸缩与高可用： \n  - 网关与应用服务以无状态容器/实例部署，支持水平自动伸缩与滚动发布。\n  - MySQL 主从复制实现高可用；读写分离下游查询走从库；主库故障时自动/半自动提升从库。\n  - Redis/ES/Neo4j/对象存储根据规模采用集群或副本策略，确保数据冗余与可用性。\n\n### 7.3 关键数据流向与通信路径\n\n- 用户→CDN/静态资源：HTTPS 获取前端资源。\n- 用户→WAF→LB→API 网关：业务入口，进行策略过滤与路由。\n- 网关→应用服务：私网通信（mTLS 可选），按路由策略转发请求。\n- 应用服务→MySQL 主库：写事务与强一致读；→ MySQL 从库：只读查询与报表。\n- 应用服务→Redis：会话、热点键值、分布式锁；按需设置 TTL 与淘汰策略。\n- 应用服务→Elasticsearch：写入索引与日志文档；查询用于全文/聚合分析。\n- 应用服务→Neo4j：写入/查询血缘关系图；元数据与依赖路径分析。\n- 应用服务→MinIO/S3：上传/下载对象；数据导出与备份归档。\n- 观测： \n  - 应用与数据库→Prometheus：采集指标（QPS/RT/错误率/资源使用）。\n  - 应用/网关→ELK：采集访问日志与应用日志；失败重试与索引生命周期管理（ILM）。\n  - 告警→通知渠道：根据阈值与规则触发通知，形成闭环处置。\n\n通信协议与端口（示例）：\n\n- 外部访问均为 HTTPS（443），DMZ 内部转发至网关（HTTPS/HTTP 80/443）。\n- 私网应用与数据：MySQL 3306，Redis 6379，Elasticsearch 9200/9300，Neo4j 7687（Bolt），MinIO 9000/HTTPS。\n- 观测：Prometheus 9090，Grafana 3000，ELK 9200/5601 等。\n\n### 7.4 网络拓扑结构与安全边界\n\n- 网络分区：外网 → DMZ → 公网子网 → 私网子网 → 数据与观测子网；逐层隔离，最小暴露面。\n- 安全边界： \n  - WAF 与 LB 位于 DMZ，策略过滤后进入网关；对外仅暴露 80/443。\n  - 数据与观测仅在私网可达，禁止公网访问；管理接口经跳板机与细粒度权限控制。\n- 访问控制： \n  - 网关层鉴权（OAuth2/JWT），细粒度权限在应用层与数据库层（角色/权限表）。\n  - 安全组/ACL 限制跨子网访问；数据库白名单与最小权限账户；对象存储使用签名 URL。\n- 加密与合规： \n  - 传输层 TLS，内部可选 mTLS；静态数据加密（磁盘/对象）。\n  - 审计日志与配置变更纳入合规要求（留存与可追溯）。\n\n### 7.5 部署与集成要点\n\n- 部署流水线：CI/CD 进行构建、单元与集成测试、镜像签名、灰度发布与自动回滚；将数据库迁移脚本（DDL/DML）纳入版本控制与变更审批。\n- 配置管理：使用配置中心/密钥管理（KMS），区分环境（dev/test/stage/prod），敏感信息不入代码库。\n- 服务发现与路由：在网关配置服务路由，应用层使用健康检查与熔断重试；跨服务调用使用统一的 API 合同与版本策略。\n- 数据集成： \n  - 与 ES/Neo4j/对象存储的异步同步采用事件驱动（Outbox/CDC），保障最终一致性。\n  - 对接第三方接口经网关统一出口与限流策略；失败重试与死信队列治理。\n- 观测与SRE：预设 SLO/SLI（可用性/延迟/错误率），建立告警分级与值班机制；定期演练故障与恢复（结合第6.6节策略）。\n\n---\n\n## 8. 非功能性设计\n\n本章定义系统在性能、安全、可靠性与可扩展性方面的设计目标与实现方案，确保满足行业标准与项目要求，并与第6章（数据层设计）与第7章（部署与集成）保持一致。\n\n### 8.1 性能设计（Performance）\n\n- 目标与指标（示例目标值，可按业务分级细化）\n  - 页面首屏与静态资源：TTI ≤ 3s（国内网络），静态资源缓存命中率 ≥ 95%。\n  - 接口延迟（应用读写）：P50 ≤ 100ms，P95 ≤ 300ms，P99 ≤ 800ms；批处理/报表接口允许较高延迟（≤ 2s）。\n  - 吞吐与并发：核心服务在峰值（工作日 10:00/15:00）可承载平稳 QPS×3 的瞬时突发；连接并发稳定在服务配额范围（连接池与队列限流）。\n  - 资源利用率：在 SLA 工况下 CPU ≤ 70%，内存 ≤ 75%，存储与网络带宽留有 30% 以上安全余量。\n- 架构与实现策略\n  - 前端与网关：CDN 缓存、HTTP/2、Brotli/Gzip 压缩、长连接与连接复用；合理的 Cache-Control/ETag 策略降低源站压力。\n  - 应用层： \n    - 连接池与线程模型：合理配置数据库/缓存连接池（最大/最小/空闲）、非阻塞 I/O；避免同步阻塞链路。\n    - 异步化与削峰填谷：使用任务队列处理重/慢操作（索引同步、血缘计算、批量导出），接口快速返回任务 ID。\n    - 限流/降级/熔断：针对外部依赖（ES/Neo4j/第三方）设置限流与降级策略；开启超时与重试（指数退避+抖动），保障稳定性。\n    - 代码层优化：避免 N+1 查询；分页使用 SEEK/覆盖索引；幂等 API（幂等键）与批处理接口（批量插入/更新）。\n  - 数据层（MySQL 8.0）： \n    - 索引：遵循第6.5节索引策略（主键/唯一/复合/前缀/全文/生成列）；禁止低选择性冗余索引；慢 SQL 采集与治理闭环。\n    - 事务：短事务、合理隔离级别（生产默认 RR/RC 按需）；避免热点更新与大事务；分批提交与幂等补偿。\n    - 读写分离：主库承载写与强一致读，从库承载只读查询与报表；路由策略按业务场景配置。\n    - 批量与导入：批量写采用批次（如 500~1000 条），使用参数化与预编译；海量导入使用 bulk/load data + 索引/约束管理。\n  - 缓存层（Redis + 本地缓存）：读缓存与热点数据，防止穿透/击穿/雪崩（布隆/预热/隔离舱）；TTL 策略与一致性更新（消息/订阅）。\n  - 检索与图：Elasticsearch 分片/副本与查询优化（过滤优先、聚合合理）；Neo4j 查询使用限制与索引配置，避免全图扫描。\n- 性能测试与压测方法\n  - 类型：基准（baseline）、负载（load）、压力（stress）、稳定性（soak/长时间）、容量（capacity）。\n  - 数据集与场景：使用生产数据子集或合成数据；覆盖读写热点、深分页、复杂聚合、批量导入导出等最坏路径。\n  - 观测与诊断：统一指标（QPS/RT/错误率/资源）、分布式追踪、Profiling；形成瓶颈分析报告与优化清单。\n  - 准入门槛：性能回归不得劣化 > 5%；关键接口 P95 延迟与错误率必须满足 SLO；提交压测报告与对策。\n- SQL 优化清单（实践）\n  - 执行计划审查与提示（EXPLAIN/PROFILE）；慢 SQL 周期治理（采集→分析→整改→复盘）。\n  - 分页优化：覆盖索引 + SEEK；深分页使用游标/书签（search_after）或延迟聚合方案。\n  - 批处理与幂等：批量 UPSERT（如 INSERT ... ON DUPLICATE KEY UPDATE）；失败重试配合幂等键与去重表。\n\n### 8.2 安全设计（Security）\n\n- 身份与授权\n  - 认证：统一 OAuth2/OIDC + SSO，令牌签发/刷新/吊销；服务间可选 mTLS 与短期令牌。\n  - 授权：RBAC（角色-权限）+ ABAC（属性/资源级），细粒度到字段/资源；审计所有授权变更与高敏操作。\n- 数据安全\n  - 最小权限：数据库/对象存储/消息系统账户权限最小化，白名单与细粒度 ACL。\n  - 数据分级与脱敏：按数据敏感度分级；日志与备份中对敏感字段脱敏或子集化。\n  - 加密： \n    - 传输层 TLS（外网强制，内网可选 mTLS）。\n    - 静态加密：磁盘/对象存储/备份加密；密钥托管于 KMS，轮转与审计。\n- 应用安全\n  - 输入校验与编码：防 SQL 注入/命令注入；输出编码防 XSS；CSRF 防护（令牌/同源策略）。\n  - 文件上传安全：类型校验、大小限制、病毒扫描、隔离存储与下载鉴权（签名 URL）。\n  - 秘密管理：密钥不入库/不入代码；使用密钥管理服务与配置中心，按环境注入。\n  - 安全审计：登录/鉴权/权限变更/高敏读写均审计；不可篡改留存与检索。\n- 平台与网络安全\n  - WAF/IPS 与安全组/ACL 分层防护；跳板机与最小化管理访问；端口暴露最小化（仅必要 80/443）。\n  - 审计与合规：运维操作与配置变更全量留痕；定期基线扫描与漏洞修复（补丁管理）。\n- 开发安全与合规\n  - 安全开发流程：SAST/DAST/依赖扫描（SBOM）、安全 Code Review、变更审批与门禁。\n  - 合规框架：遵循等级保护 2.0、个人信息保护法（PIPL）与数据治理规范；隐私保护与数据出境合规按法务要求执行。\n- 安全事件响应\n  - 建立安全事件响应预案与演练：检测→分级→隔离→处置→通报→复盘；明确 RACI 与时限要求。\n\n### 8.3 可靠性与高可用设计（Reliability & HA）\n\n- 目标与指标\n  - 可用性：核心链路（认证/资产查询/API 注册）年度可用性 ≥ 99.9%；错误率 ≤ 0.1%。\n  - 与第6.6节 RTO/RPO 对齐，确保不同数据类型的恢复目标满足业务连贯性。\n- 高可用架构\n  - 无状态服务多实例与跨可用区部署；健康检查与自动故障转移（网关/负载均衡）。\n  - 数据层冗余：MySQL 主从复制 + 读写分离；Redis/ES/Neo4j 采用副本/集群与持久化策略。\n  - 配置与密钥：多副本存储与热备；变更可回滚与版本化管理。\n- 稳健性设计模式\n  - 重试（指数退避 + 抖动）与幂等（幂等键/去重表）；超时与隔离舱（Bulkhead）。\n  - 熔断与降级：对外部依赖启用熔断与降级策略，保障核心链路可用。\n- 数据一致性与补偿\n  - 事务边界：强一致操作在单库事务中完成；跨库/跨系统采用 Outbox/CDC + 补偿机制保障最终一致性。\n  - 幂等与去重：幂等键、业务唯一约束、重试去重表；必要时人工对账与修复流程。\n- 演练与验证\n  - Chaos 工程与故障注入（断网/延迟/节点故障），验证故障处置与恢复时间；形成改进清单。\n\n### 8.4 可扩展性与容量规划（Scalability & Capacity）\n\n- 横向扩展\n  - 网关与应用服务无状态，支持水平扩展与滚动发布；基于 HPA/自动伸缩策略按指标扩容。\n  - ES/Redis/Neo4j/对象存储按规模采用分片/副本与多节点部署，支持线性扩展。\n- 数据库扩展\n  - 读副本扩展查询能力；分区（时间/范围）与分库分表（按业务/租户/范围键）。\n  - 热点治理：热点键识别与拆分；自增主键与雪花/随机主键按场景选型，避免热点冲突。\n  - 连接池与路由：连接池多实例隔离；读写路由按业务策略与一致性需求选择。\n- 消息与事件流\n  - 事件总线与队列用于跨服务异步解耦；流式处理用于日志/指标与近实时分析。\n- 存储与数据生命周期\n  - 冷热分层存储与压缩；日志/索引生命周期管理（ILM），归档与清理策略按合规与成本优化执行。\n- 容量规划方法\n  - 基于业务增长模型预测资源需求；以 1.3~1.5 安全系数进行资源冗余；制定季度/年度容量评审与扩容里程碑。\n\n### 8.5 标准与合规（Standards & Compliance）\n\n- 安全标准与参考\n  - 参考行业最佳实践（如 OWASP、常见漏洞列表）建立安全基线；结合等级保护 2.0 要求覆盖身份鉴别、访问控制、审计、入侵防范与数据保护。\n- 运维与治理标准\n  - 参考 ITIL 的变更/事件/问题管理流程；备份与恢复遵循企业规程与审计要求。\n- 数据治理与隐私\n  - 数据质量（规则/度量）、血缘与主数据治理流程；隐私合规遵循最小必要原则、数据主体权利与留痕审计。\n- 文档与规范\n  - 安全编码规范、API 合同、运维 Runbook/Playbook、架构与设计文档的版本化维护与审计。\n\n### 8.6 非功能性指标与验收（NFR Metrics & Acceptance）\n\n- 指标体系\n  - 可用性、延迟（P50/P95/P99）、吞吐、错误率、资源利用率、缓存命中率、索引与搜索响应、图查询延迟等。\n- 验收与门禁\n  - 性能测试报告、渗透测试与安全扫描报告、灾备演练记录、监控看板与合规审计记录。\n  - 发布门禁：性能与稳定性不得劣化阈值（如 > 5%），关键安全项零高危；备份覆盖率 ≥ 95%。\n- 告警与处置 SLA\n  - 阈值设置原则与分级；告警联动至响应渠道，处置时限与升级路径明确。\n\n### 8.7 运维与持续优化（Ops & Continuous Improvement）\n\n- 观测与治理\n  - 统一日志/指标/追踪；Profiling 与慢 SQL 周报；索引与查询治理看板。\n- 成本与效率优化\n  - 实例规格与资源利用率优化；索引与存储治理（压缩/归档）；网络与出口优化。\n- 持续改进\n  - 事后复盘（Postmortem）、问题管理与容量回顾；SLO/错误预算与改进项跟踪闭环。",
  "size" : 343484,
  "modifiedAt" : 1764914929639,
  "id" : "技术案例/TDD-数据资产管理平台-详细设计.md",
  "content" : "# 数据资产管理平台 - 详细设计文档 (TDD)\n\n版本：v1.0  \n状态：草案  \n创建日期：2025-10-09  \n适用读者：产品经理、架构师、后端/前端开发、数据工程师、测试工程师、运维工程师、实施顾问、治理与合规人员\n\n---\n\n## 1. 文档概述\n\n### 1.1 编写目的\n\n本详细设计文档（TDD）在 BRD 与 PRD 的基础上，进一步明确“数据资产管理平台”的技术实现边界、架构路径与交付物清单，为研发、测试与运维团队提供统一的技术说明与可落地的设计依据。\n\n目标与产出：\n\n- 将业务需求转化为可实施的技术方案，细化到模块、接口、数据模型、状态机与关键流程。\n- 统一非功能需求（性能、可用性、安全、可观测性）及工程约束，形成可验证的验收标准。\n- 输出可复用的设计资产：接口规范（OpenAPI/GraphQL Schema）、领域事件与错误码、数据模型定义、序列/活动图、配置与部署说明、测试与验收用例框架。\n\n### 1.2 适用范围\n\n本文件适用于“数据资产管理平台”的整体系统与主要业务场景，范围与 PRD 的八个核心模块保持一致，并明确本期边界：\n\n- 数据资产模块（资产目录、资产详情、资产搜索、资产标签）。\n- 数据源管理（多源连接、采集、健康监控）。\n- 元数据管理（采集、目录与展示、血缘）。\n- 数据质量管理（规则库、任务编排、检测与报告）。\n- 数据标准管理（标准制定、映射与执行、规范校验）。\n- 数据服务管理（API 注册、白名单与限流、监控与日志）。\n- 系统管理（用户/角色/权限、系统配置与审计）。\n\n不在本期范围（Out of Scope）：\n\n- 非平台内的第三方商业数据治理套件的二次开发与深度集成。\n- 复杂离线大数据作业编排引擎的实现（采用外部调度/计算平台对接）。\n- BI 可视化报表产品内核开发（以资产接口/数据集导出与对接为主）。\n\n### 1.3 术语定义\n\n为避免歧义，本文对关键术语进行统一与约定：\n\n- 数据资产：对业务有价值的数据实体及其附属能力集合，通常包含数据集（表/视图/文件）、元数据（技术/业务/运维）、服务接口（API/SQL/报表）、质量度量与评估、访问策略等。\n- 元数据（Metadata）：用于描述数据的“数据”，按用途分为技术元数据、业务元数据与运维/可观测性元数据。\n- 技术元数据：与底层实现相关的元信息，如数据源、库/模式、表/视图、列/字段、类型、索引、约束、存储过程、作业任务、运行时属性等。\n- 业务元数据：与业务语义相关的元信息，如主题域/子域、业务对象、指标/维度、口径说明、流程/活动、数据解释、所有者与责任人等。\n- 数据血缘（Lineage）：数据在采集、加工、存储与服务化过程中的来源、流转与依赖关系的可视化与可追溯能力，支持上/下游、直接/间接依赖与变更影响分析。\n- 数据标准（Standard）：用于统一命名、编码、元素定义、结构与映射关系的规范集合，包含命名标准、编码标准、元素标准与规则库；支持规范校验与执行度量。\n- 数据质量（Data Quality）：围绕完整性、唯一性、一致性、准确性、及时性、可用性等维度进行规则定义、检测与报告的能力。\n- 主题域（Domain）：围绕业务主题组织的模型与数据边界，可包含子域与关联流程，是仓库分层与模型治理的基础。\n- 资产目录（Catalog）：以统一结构呈现资产实体（系统/库/表/字段、API、指标、标签等）的索引与检索视图，支持列表/卡片、条件检索、详情等。\n- 模型（Model）：数据的逻辑或物理结构化表示，包含实体、属性与关系。\n- 标准映射（Mapping）：将源数据与标准定义进行对齐的规则与关系集合，包括字段映射、编码转换与口径一致性校验。\n- 数据服务（Data Service）：通过 API 或其他接口暴露数据资产，支持白名单访问、限流与监控日志。\n\n### 1.4 参考资料\n\n- BRD-数据资产管理平台.md（版本：v1.0；路径：docs/business-design/BRD-数据资产管理平台.md）。\n- PRD-数据资产管理平台.md（版本：v1.0；路径：docs/business-design/PRD-数据资产管理平台.md）。\n- 技术架构与流程图（路径：docs/technical-design/images/）。\n- 开发规范与接口风格指引（统一错误码、分页/过滤、版本策略等）。\n\n### 1.5 文档读者与角色\n\n- 产品经理：需求澄清与验收标准对齐。\n- 架构师：架构方案审定与技术决策。\n- 后端/前端开发：模块实现与接口契约遵循。\n- 数据工程师：数据模型、采集/加工与质量规则落地。\n- 测试工程师：用例设计与验收验证。\n- 运维工程师：部署、监控与可观测性配置。\n- 治理与合规：权限策略、审计与合规要求对齐。\n\n### 1.6 文档结构与阅读指引\n\n- 2 章系统概述：背景与目标，总体设计思路。\n- 3 章总体设计：业务/技术架构、分层与服务边界。\n- 4 章模块设计：逐模块的接口、数据模型与流程。\n- 5 章接口设计：API 契约、错误码与示例。\n- 6 章数据模型：核心表/索引/约束与版本策略。\n- 7 章系统部署与集成设计：服务器角色、网络架构、安全策略。\n- 8 章非功能设计：性能、可用性、安全与可观测性指标。\n\n---\n\n## 2. 系统概述\n\n### 2.1 业务背景\n\n为支撑产业大脑建设与数据驱动决策，当前企业在数据资产管理方面普遍存在如下痛点：\n\n- 标准分散且执行弱：命名、编码与元素标准在不同系统与团队间不一致，落地校验不足，数据复用与治理成本高。\n- 元数据不透明：来源、口径、变更与血缘信息缺失或不可追溯，难以支撑跨域数据理解与问题定位。\n- 质量治理缺乏闭环：规则定义零散、检测与整改缺少统一平台与流程，问题响应慢、同类问题重复发生。\n- 模型与主题治理不足：模型版本管理与复用体系不健全，主题域边界模糊，影响数据一致性与共享效率。\n- 资产发现与运营弱：资产目录不全、检索与评估能力弱，服务上架与订阅流程不标准，资产价值难量化。\n- 接口与服务管理不统一：API发布、鉴权、监控与日志分散在各系统，出现性能与稳定性问题难以统一治理。\n- 可视化与度量不足：资产地图与运营指标缺少统一视图，治理成效难以量化，管理决策支撑不足。\n\n### 2.2 系统目标\n\n为解决上述痛点，平台设定以下概括性目标，作为架构与实现的指导纲领；具体量化指标将随实施阶段与业务反馈逐步细化与调整：\n\n- 核心功能目标（方向性）\n  - 建立覆盖主要数据源与模型的统一元数据体系，提供可追溯的血缘、变更与口径管理。\n  - 构建可落地的数据标准治理闭环，包括标准制定、映射、校验、度量与优化。\n  - 形成可持续运行的质量治理体系，支持规则管理、任务编排、检测报表。\n  - 建立模型与主题域治理能力，支持版本管理、复用与跨域协同。\n  - 推动数据资产服务化，完善资产登记、目录检索与使用评估。\n  - 实现统一的API管理与监控能力，并与网关协同保障鉴权、限流与可观测。\n- 技术目标（原则性）\n  - 以高可用、可扩展、可维护为设计原则，支持水平扩展与容错降级。\n  - 构建统一的安全与合规体系，涵盖数据分级、脱敏与审计追踪。\n  - 提供完善的可观测性，包括指标、日志与链路追踪的一体化。\n  - 通过插件化与标准化接口，兼容主流数据源与多种部署环境。\n  - 设计满足主流性能体验的交互与检索能力，并支持大规模图谱与关系查询。\n- 业务预期成果（价值导向）\n  - 提升数据资产的可发现、可理解、可复用与可服务化水平，促进跨团队协同。\n  - 降低数据治理与对齐成本，提升关键数据质量与治理效率。\n  - 增强标准执行与治理透明度，为管理决策提供统一的资产视图与度量看板。\n  - 通过持续迭代与反馈闭环，稳步提升用户体验与满意度。\n\n---\n\n## 3. 系统总体设计\n\n本章从业务架构、技术架构与数据流角度，对平台的整体设计进行描述，确保“需求-架构-实现-验收”链路可追踪、可落地。\n\n### 3.1 业务架构设计\n\n#### 3.1.1 目标与范围\n\n- 将 PRD 的业务需求转化为可实施的业务架构蓝图，明确能力域、核心流程、模块边界与交互契约，确保“需求-架构-实现-验收”链路一致。\n- 适用范围：覆盖数据资产管理平台所有核心业务流程与能力域，支撑资产化→标准化→服务化→价值化的价值链闭环。\n\n#### 3.1.2 设计原则\n\n- 用户中心：围绕数据分析师、数据管理员、技术用户的差异化需求设计视图与能力。\n- 流程驱动：以“数据发现、数据治理、数据使用、数据服务”四条主流程为主线，模块围绕流程节点协作。\n- 价值导向：以资产化→标准化→服务化→价值化的链条衡量架构取舍。\n- 模块化与可扩展：模块高内聚、低耦合，支持独立演进与横向扩展；交互采用契约与事件驱动。\n\n#### 3.1.3 业务能力与功能域\n\n| 能力域  | 业务目标      | 关键功能            | 对应 PRD 模块 |\n|------|-----------|-----------------|-----------|\n| 数据发现 | 快速定位可信数据  | 元数据目录、全局检索、血缘导航 | 元数据管理     |\n| 数据治理 | 提升数据质量与规范 | 质量规则、标准映射       | 质量管理、标准管理 |\n| 数据建模 | 统一业务与技术语义 | 主题域、分层模型        | 数据架构      |\n| 资产运营 | 最大化数据价值   | 资产目录            | 数据资产      |\n| 数据服务 | 安全可控地开放数据 | API 注册、发布、鉴权、监控 | 数据服务      |\n| 治理合规 | 满足审计与权限要求 | 用户/角色/权限、审计日志   | 系统管理      |\n\n#### 3.1.4 业务流程与泳道图\n\n##### 1. 数据发现流程\n\n- **目标**：帮助用户（数据分析师、技术用户）快速、准确地找到所需的数据资产。\n- **参与者**：数据分析师、技术用户。\n- **触发条件**：用户通过全局搜索入口或数据目录进行探索。\n- **核心步骤**： \n  1. **检索与筛选**：用户输入关键字，或通过数据源、主题域、标签、负责人等多维度进行筛选。\n  2. **详情查看**：用户点击感兴趣的资产，查看其技术元数据、业务属性、字段信息等。\n  3. **血缘分析**：用户查看资产的上下游依赖关系，理解数据来龙去脉。\n- **关键产出**： \n  - `用户检索行为日志`：用于后续的资产推荐与热度分析。\n- **图示**： \n\n  > ![数据发现流程泳道图](./images/swimlane-data-discovery.svg)\n\n##### 2. 数据治理流程\n\n- **目标**：识别并报告数据资产的质量与标准问题，为线下治理提供数据支持。\n- **参与者**：数据管理员、系统。\n- **触发条件**： \n  - 系统定时执行的数据质量稽核任务发现问题。\n  - 数据标准映射关系发生变更。\n  - 用户提交数据质量反馈。\n- **核心步骤**： \n  1. **问题识别与报告**：系统自动检测到数据质量问题（如空值、重复、不一致）或标准不合规，并生成数据质量报告。\n- **关键产出**： \n  - `数据质量报告`：包含质量评分、问题分布、趋势分析。\n- **图示**： \n\n  > ![数据治理流程泳道图](./images/swimlane-data-governance.svg)\n\n##### 4. 数据服务流程\n\n- **目标**：将数据资产封装为标准、可控的数据服务（API），实现数据价值变现。\n- **参与者**：技术用户、API网关/系统。\n- **触发条件**：技术用户希望将某个数据资产或查询能力发布为API。\n- **核心步骤**： \n  1. **API注册与发布**：用户在平台注册新的API，定义其请求参数、返回结构等，并直接发布。\n  2. **服务调用与鉴权**：应用方通过获取的凭证调用API。API网关负责统一的认证、鉴权、路由和限流。\n  3. **监控**：平台记录每次API调用的日志，包括调用方、延迟、成功率等。\n- **关键产出**： \n  - `API调用审计日志`：用于问题排查和安全审计。\n  - `API运营报表`：统计服务调用量、成功率、Top应用等。\n- **图示**： \n\n  > ![数据服务流程泳道图](./images/swimlane-data-service.svg)\n\n##### 5. 元数据采集流程\n\n- **目标**：自动发现和收集企业内各类数据源的元数据，构建统一的数据资产目录和血缘关系图谱。\n- **参与者**：数据源管理员、元数据采集引擎（Apache Atlas/DataHub）、系统。\n- **触发条件**： \n  - 新数据源注册到平台。\n  - 定时采集任务触发（如每日凌晨）。\n  - 数据源结构发生变更时主动推送。\n- **核心步骤**： \n  1. **数据源连接配置**：数据源管理员在平台中配置数据源连接信息（JDBC连接串、认证信息等）。\n  2. **元数据采集**：采集引擎通过JDBC、API等方式连接数据源，自动扫描库表结构、字段信息、分区信息等元数据。\n  3. **血缘关系构建**：通过SQL解析、ETL工具集成等方式，自动识别表与表之间的依赖关系，构建数据血缘图谱。\n  4. **元数据标准化**：将采集到的元数据按照平台标准进行清洗、转换和标准化处理。\n  5. **资产目录生成**：将标准化后的元数据注册到数据资产目录中，形成可检索的数据资产。\n- **技术实现**： \n  - **Apache Atlas方案**：利用Atlas的Hook机制，自动捕获Hive、HBase等大数据组件的元数据变更。\n  - **DataHub方案**：采用DataHub的Metadata Ingestion框架，支持多种数据源的批量和流式采集。\n  - **自定义采集器**：对于特殊数据源，开发自定义采集器，通过REST API将元数据推送到平台。\n- **关键产出**： \n  - `数据资产目录`：包含所有数据源的库表结构、字段信息、统计信息等。\n  - `数据血缘图谱`：展示数据从源系统到目标系统的完整流转路径。\n  - `元数据变更日志`：记录元数据的变更历史，支持版本追溯。\n- **图示**： \n\n  > ![元数据采集流程泳道图](./images/swimlane-metadata-collection.svg)\n\n#### 3.1.5 业务事件与契约\n\n#### 3.1.6 业务架构视图\n\n![业务架构图](./images/business-architecture.svg)\n\n**架构说明：**\n\n### 3.2 技术架构设计\n\n#### 3.2.1 架构目标与原则\n\n- 目标：支撑“发现→治理→标准化→服务化→价值化”的资产价值链闭环，确保高可用、可扩展、可观测与可审计。\n- 原则： \n  - 模块边界清晰，按领域拆分服务。\n  - 事件驱动与契约优先。\n  - API First/Contract First（OpenAPI），版本治理与向后兼容。\n  - 权限最小化与可审计。\n\n#### 3.2.2 技术栈与基础设施\n\n- 前端：Vue3 + TypeScript + Vite + Element Plus，统一组件与主题。\n- 网关：Spring Cloud Gateway，REST/GraphQL，统一鉴权、限流/熔断、灰度发布、路由与观测埋点。\n- 后端：Java 17 + Spring Boot 3；模块化微服务： \n  - metadata-service（元数据/血缘）\n  - quality-service（质量规则/任务/监控）\n  - standard-service（数据元/代码/命名/建模/映射）\n  - architecture-service（分层/主题域）\n  - api-service（API 管理/调用日志）\n  - asset-ops-service（资产运营）\n- 存储：MySQL（主库）、Neo4j（血缘图谱）、ElasticSearch（搜索与索引）、Redis（缓存/会话/分布式锁）、MinIO（对象存储）。\n- 消息：Kafka（事件总线，保障最终一致与异步处理）。\n- 身份与权限：Keycloak（OAuth2/OIDC + JWT），RBAC/ABAC 。\n- 可观测性：OpenTelemetry + Prometheus + Grafana + Loki/ELK，统一指标/日志/追踪与告警。\n- 部署：\n\n**系统技术架构图**\n\n![系统技术架构图](./images/system-architecture.svg)\n\n- 图例说明：网关路由至各领域服务；底层依赖 MySQL/Neo4j/ElasticSearch/Redis/Kafka/对象存储；安全与可观测为横切能力。\n\n#### 3.2.3 分层架构与服务边界\n\n- 展示层（Web 门户/控制台）：统一导航、检索、列表与详情、配置与审批。\n- 接入层（API 网关）：协议适配、鉴权与流控、审计埋点、灰度发布、统一错误码。\n- 领域服务层： \n  - discovery-service：元数据目录、全局检索、血缘导航、影响分析；存储 MySQL + Neo4j + ElasticSearch；对外 API：目录检索、血缘导航、影响分析。\n  - collector-service：Atlas/DataHub 接入、自动扫描、血缘与影响评估写入；存储 MySQL + Neo4j；对外 API：数据源接入、采集任务、扫描结果。\n  - governance-service：质量规则、标准映射、问题识别、报告生成、质量监控；存储 MySQL；对外 API：规则/任务/监控、报告。\n  - modeling-service：主题域、分层模型、物理模型、模型管理；存储 MySQL；对外 API：域/分层/物理模型设计与版本。\n  - api-service：API 注册/发布、鉴权与监控、服务编排、流量控制；存储 MySQL + ElasticSearch（日志索引）；对外 API：API CRUD、发布、调用统计与监控。\n  - asset-ops-service：资产目录、价值评估、使用统计、运营分析、优化建议；存储 MySQL + ElasticSearch；对外 API：资产检索、使用统计、运营建议。\n  - auth-service：统一认证授权、角色与策略、审计日志；与网关/各服务联动。\n- 基础设施层：RDBMS/图数据库/搜索/缓存/对象存储/消息队列；统一配置中心与服务发现。\n- 横切：安全（权限/审计/隐私）与可观测性（指标/日志/追踪）贯穿各层。\n\n#### 3.2.4 数据模型与存储设计\n\n- RDBMS（MySQL）：面向资产、元数据、质量、标准、架构、API、系统等核心实体，采用版本化、软删除；读写分离与索引按模块优化。\n- 图数据库（Neo4j）：覆盖 DataSource/Table/View/Field/Model/API 节点，支持血缘可视化、影响分析与路径计算。\n- 搜索索引（ElasticSearch）：对资产与元数据建立去范式索引（名称/标签/域/更新时间/热度/评分/所有者），统一分页/过滤/排序；字段映射与类型规范化。\n- 缓存（Redis）：热点列表与详情、统计概览、鉴权会话与限流令牌；TTL + 主动失效，防穿透/击穿/雪崩。\n- 对象存储（MinIO）：资产文件（如模型/映射/文档）、日志备份、临时文件存储；按资产类型/时间分片。\n\n#### 3.2.6 API 规范与网关策略\n\n- 统一规范：REST/JSON；/v1 版本路径；分页/过滤/排序统一；错误码/错误消息统一（含建议与文档链接）。\n- 幂等：PUT/DELETE/任务触发提供幂等键；重复消费与重试安全。\n- 限流与熔断：按租户/用户/接口限流；超时/重试与断路器策略；静默期与退避策略。\n- 鉴权与权限：OAuth2/OIDC + JWT；RBAC（角色）与 ABAC（属性）结合；细粒度到对象/字段级；审计事件全量记录。\n\n#### 3.2.7 安全与隐私\n\n- 脱敏与最小暴露：详情页与导出遵循脱敏策略；仅暴露必要字段与聚合指标。\n- 密钥与凭据：集中管理与轮换；最小权限访问；审计与告警。\n- 合规：日志留存策略、数据保留与删除、审批与留痕；外发文档水印与访问签名。\n\n#### 3.2.8 可观测性与运维\n\n- 指标：系统（CPU/内存/磁盘/带宽）、应用（QPS/延迟分位 P50/P95/P99/错误率）、业务（资产/模型/API 计数与增量）。\n- 日志：统一字段（traceId/spanId/tenantId/userId/module）；采样与聚合；慢查询与异常聚合面板。\n- 追踪：端到端分布式追踪；关键链路（搜索、发布、任务执行）必接入。\n\n### 3.3 数据流图设计\n\n- 完整数据流程（DFD）概述\n  - 从数据生产者（外部系统/数据仓库/日志/服务）进入平台，经“数据源接入→元数据采集与归一化→标准校验与映射→质量检测与整改→模型登记与版本管理→标签与分类治理→资产上架与目录发布→API 注册与网关发布→消费者使用与反馈”形成治理与价值闭环。\n  - 关键支撑存储与总线：MySQL（元数据/资产/标准/质量/模型等核心实体）、Neo4j（血缘图谱）、ElasticSearch（检索与规则索引）、Redis（缓存/会话/令牌）、Kafka（事件总线）、对象存储（导入包/报表/附件）。\n- 数据处理过程说明\n  - 数据源接入：注册连接与健康检测，触发采集任务。\n  - 元数据采集与归一化：自动扫描并解析技术/业务元数据，写入 MySQL 与 Neo4j；发布事件 `metadata.collected`。\n  - 标准校验与映射：根据命名/编码/元素标准进行校验，生成映射并入索引；发布事件 `standard.applied`。\n  - 质量检测与整改：按规则库编排检测任务，产出报告；发布事件 `quality.checked`。\n  - 模型登记与版本管理：登记逻辑/物理模型与变更，维护版本与影响分析。\n  - 标签与分类治理：为资产打标与分类，提升检索与导航能力。\n  - 资产上架与目录发布：审核后上架，目录与订阅可用；同步到 ElasticSearch。\n  - API 注册与发布：将服务化资产注册与发布，统一鉴权/限流/监控；调用日志写入 ELK/ElasticSearch。\n- 关键数据存储节点与流转描述\n  - MySQL：核心实体的结构化存储，版本化与审计支撑治理与查询。\n  - Neo4j：存储数据依赖与流转关系，支持血缘可视化与影响分析。\n  - ElasticSearch：索引资产与元数据、标准与规则，支持快速检索与聚合。\n  - Redis：缓存热点数据与会话，提升读性能与限流控制。\n  - Kafka：承载跨服务事件，驱动最终一致与异步处理。\n  - 对象存储：模板、导入包、导出文档与报表等文件。\n- 数据流图与说明\n  - 图示：\n\n    ![数据流图（时序）](./images/data-flow-sequence.svg)\n  - 说明：以参与者为横向、时间为纵向，使用实线表达主动调用/写入，虚线表达事件驱动；旁注标明对 MySQL/Neo4j/ElasticSearch/Redis/Kafka/对象存储的读写与事件，便于按时间维度追踪端到端交互。\n\n## 4. 功能模块设计\n\n### 4.1 功能模块划分\n\n模块划分：\n\n- MOD-SOURCE：数据源接入与采集。\n- MOD-METADATA：元数据采集与归一化、血缘构建。\n- MOD-STANDARD：标准项与映射下发、校验与映射。\n- MOD-QUALITY：质量规则执行、结果回写与监控。\n- MOD-ARCH：模型定义与版本管理。\n- MOD-ASSET：资产目录。\n- MOD-API：API 注册与发布。\n- MOD-SYS：系统管理与治理。\n\n跨模块主链路与协同\n\n- 采集→目录/血缘：数据源扫描/采集（MOD-SOURCE）→ 元数据入库与血缘构建（MOD-METADATA）。\n- 标准→校验与度量：标准项与映射下发（MOD-STANDARD）→ 元数据校验与 API 字段规范统一 → 合规度量事件回流。\n- 质量→报告与整改：质量规则执行（MOD-QUALITY）→ 结果回写元数据与服务监控 → 生成质量报告。\n- 建模→资产→服务：模型定义与版本（MOD-ARCH）→ 资产目录（MOD-ASSET）→ API 注册与发布（MOD-API）。\n- 运营回流：服务调用量与可用性（MOD-API）→ 回流资产运营视图（MOD-ASSET），支撑评估与优化。\n- 治理与合规横切：系统管理策略（MOD-SYS）贯穿各模块，权限/审计/合规策略统一生效。\n\n---\n\n### 4.2 模块详细设计\n\n为确保复杂模块设计清晰可落地，本章节按模块逐一给出：模块描述、功能组成、处理流程（配图）、数据流图（可选）、设计实现、关键算法（可选）与人机交互说明。\n\n#### 4.2.1 数据源管理\n\n##### 4.2.1.1 模块描述\n\n- 范围：提供对企业各类数据源的标准化接入与治理，包括数据源注册/配置、连接测试、发现扫描（库/模式/表/字段）等。\n- 目标：用于配置和管理平台所需的各类数据源连接，是数据采集、元数据获取、任务执行等功能的基础支撑模块。\n\n##### 4.2.1.2 功能组成\n\n- 数据源连接列表 - 展示所有已配置数据源的概要信息\n- 新增数据源 - 提供表单界面用于添加新的数据源配置\n- 测试连接 - 验证数据源配置的正确性和连通性\n- 数据源详情 - 显示选定数据源的完整配置信息\n- 修改数据源 - 允许编辑现有数据源的配置参数\n- 删除数据源 - 提供安全删除数据源配置的功能\n\n##### 4.2.1.3 处理流程\n\n![数据源管理流程图](./images/data-source-management-flowchart.svg)\n\n数据源管理流程采用严谨的多层验证机制，确保系统安全性和数据一致性：\n\n- **新增数据源**：权限验证 → 表单校验（必填项、格式、唯一性） → 连接测试（网络、认证、数据库） → 事务存储 → 审计日志记录\n- **连接测试**：权限验证 → 参数校验 → 网络连通性测试 → 身份认证验证 → 数据库连接测试 → 详细结果反馈\n- **修改数据源**：权限验证 → 数据源存在性检查 → 表单校验 → 名称唯一性检查 → 连接测试 → 事务更新 → 审计日志\n- **删除数据源**：权限验证 → 数据源存在性检查 → 引用关系检查 → 用户二次确认 → 事务删除 → 审计日志记录\n\n每个流程都包含完整的错误处理分支，确保异常情况下的系统稳定性和用户体验。\n\n##### 4.2.1.4 数据流图（可选）\n\n##### 4.2.1.5 设计实现\n\n- 新增数据源\n  - 表单元素（*为必填）：数据源名称*、数据源类型*、账号*、密码*、数据库IP*、端口号*、所属项目、数据源描述、备注、连接选项（随类型动态展示）。\n  - 校验规则： \n    - 必填校验：名称、类型、账号、密码、IP、端口。\n    - 唯一性：同项目下数据源名称唯一。\n    - 格式校验：IP 支持 IPv4/域名；端口 1–65535；名称≤64字符；描述/备注≤2000字符；去除首尾空格。\n    - 安全校验：密码不回显，强度≥中；仅在变更时传输；服务端加密存储（secret_ref）。\n    - 类型特定：如 Oracle 需 SID/ServiceName；Kafka 需 bootstrapServers；ClickHouse 需 database 可选等，按类型动态校验。\n  - 交互与流程：填写→实时校验→“测试连接”→展示分阶段结果→“确定”提交保存→跳转详情并记录审计。\n  - 后端实现：`POST /v1/datasources`→Service 验证与归一化→凭据写入 KMS/Vault→Repository 写入→发布事件 `ds.created`。\n- 测试连接\n  - 入口：新增/编辑表单中的“测试连接”按钮。\n  - 前置校验：必填字段与类型特定项齐全，否则阻断并给出提示。\n  - 测试阶段：网络连通（DNS/端口）→ TLS/证书 → 认证/授权 → 轻量查询（select 1 或等效）。\n  - 策略：指数退避重试（50ms×2^n，n≤5），单阶段超时≤3s；错误分类（网络/证书/鉴权/驱动）与修复建议。\n  - 返回结构：`{status: pass|fail|degraded, steps:[{name, result, latency, message}], suggestions:[]}`；结果写入健康状态与审计。\n  - 接口：`POST /v1/datasources/test`（新增态）或 `POST /v1/datasources/{id}/test`（编辑态）。\n- 编辑数据源\n  - 加载：`GET /v1/datasources/{id}` 返回基础信息，密码字段置空且不回显；提供最近健康与事件概览。\n  - 可编辑项：名称、账号/密码、IP/端口、选项/标签/环境、描述/备注；`type` 默认不可修改（避免兼容风险，如需变更建议新建）。\n  - 校验：同新增；名称唯一性忽略自身；若密码为空表示不变，若有值则轮换并更新 `secret_ref`。\n  - 提交：`PUT /v1/datasources/{id}`；并发控制使用 `If-Match`/版本号或 `updatedAt` 比较；审计事件 `ds.updated`。\n- 删除数据源\n  - 入口：列表/详情页操作区。\n  - 引用检查：采集任务、目录实体、权限 ACL 等；存在引用时阻断并给出解绑/迁移指引。\n  - 策略：默认逻辑删除（`status=deleted`）并保留审计；支持禁用替代；物理删除仅在无引用且管理员 `force=true`。\n  - 接口：`DELETE /v1/datasources/{id}?force=false`；成功后发布事件 `ds.deleted` 并刷新关联缓存。\n  - 回滚：提供最近删除项恢复入口（逻辑删除可迅速恢复）。\n- 校验规则汇总（前端/后端一致）\n  - 名称：必填，唯一，[a-zA-Z0-9\\_-]，长度 1–64。\n  - 类型：必填，枚举值 `mysql|postgres|sqlserver|oracle|clickhouse|hive|kafka|...`。\n  - 账号/密码：必填，长度 1–128；密码强度建议≥中。\n  - IP/主机：必填，IPv4 或域名；端口：必填，1–65535。\n  - 项目：按权限范围可选/必选；标签：0–20 个，单个长度≤32。\n  - 描述/备注：≤2000 字符；所有文本去除首尾空格。\n- 审计与权限\n  - 所有新增/编辑/测试/删除操作记录审计日志（actor、action、target、payload 摘要、结果）。\n  - 权限：仅具备项目权限与模块操作权限的用户可进行相应操作；凭据脱敏展示。\n\n##### 4.2.1.6 关键算法（可选）\n\n##### 4.2.1.7 人机交互\n\n---\n\n#### 4.2.2 元数据管理\n\n- 定位与范围：统一采集、管理与服务化企业级元数据，覆盖系统/库/模式/表/字段/作业、模型与指标等实体及其关系（血缘/版本/标签/所有者/权限）。\n- 目标与作用：构建“权威元数据源”，为检索与目录、血缘与影响分析、标准治理与质量治理、资产地图与数据服务提供一致的基础能力与接口。\n- 核心能力： \n  - 目录管理与检索：分层组织、全文/条件检索、左树右表视图；支持批量归档与导出。\n  - 元数据采集：数据源扫描、ETL/调度与SQL解析、外部工具导入与人工补录；增量/全量与版本对比。\n  - 版本与变更：快照、差异比对、变更审计与回溯；冲突检测与灰度发布。\n  - 血缘与影响分析：作业/SQL解析构图，支持上/下游遍历与影响域评估、路径高亮与截图导出。\n- 数据来源：连接测试与扫描（库/表/字段）、ETL与调度作业、SQL解析、外部工具（如 Apache Atlas/Glue）导入、人工补录与批量导入。\n\n---\n\n##### 4.2.2.1 元数据目录\n\n###### 4.2.2.1.1 模块描述\n\n- 定位与作用：作为企业级元数据的统一目录与导航入口，提供分层组织与高效检索，串联实体详情、血缘与影响分析、版本差异与导出能力，支撑跨模块协同与治理。\n- 视图与交互：左树右表结构+检索栏；支持列表/卡片视图切换、详情抽屉/页面、血缘弹窗、版本比对视图与批量导出。\n\n###### 4.2.2.1.2 功能组成\n\n- 元数据列表：支持列表/卡片视图、关键字/条件筛选（主题域/系统/库/表/类型/更新时间/负责人等）、分页与排序；行级快捷操作（查看详情/收藏/归档/导出）；状态标识（新/变更/下线）。\n- 元数据详情： \n  - 技术元数据：库/表/字段属性（类型/长度/主键/索引/是否可空/存储与统计信息等）。\n  - 业务元数据：中文名、业务口径、主题域、所属系统、负责人/所有者、标签、重要级别、保密级别、备注与变更记录。\n  - 字段详情：字段名、字段注释、数据类型、长度/精度、是否可空、默认值、是否主键。\n  - 交互形态：详情页/抽屉，Tabs（概览/技术/业务/字段/血缘/版本）。\n- 元数据编辑（业务元数据）：仅编辑业务元数据（中文名/业务口径/主题域/标签/负责人/重要级别/备注等）；变更二次确认与可回滚。\n- 血缘关系：展示上游/下游血缘与影响范围；支持层级/类型过滤、路径高亮、节点折叠与截图导出；从血缘节点跳转相关实体详情。\n- 导出：支持批量导出目录实体（库/表/字段）为 CSV/Excel 格式，包含所有元数据字段。\n\n###### 4.2.2.1.3 处理流程\n\n![元数据目录处理流程](./images/metadata-ingestion-flow.svg)\n\n- 元数据采集（技术元数据）：数据源 → Atlas/DataHub Connector → 解析/抽取（Schema/SQL/Job/Lineage/Stats） → 推送至元数据仓库。\n- 仓库入库与事件：统一技术元模型入库 → 构建索引/版本/血缘 → 发布事件 `metadata.created/updated`、`lineage.updated`。\n- 业务元数据维护：用户在“元数据编辑”提交 → 服务端校验 → 入库（审计记录与可回滚，不参与采集）。\n- 目录与详情展示：目录服务读取仓库 → 检索聚合/分页 → 前端列表/卡片 → 详情页按需拉取技术/业务/字段与血缘。\n\n###### 4.2.2.1.4 数据流图（可选）\n\n###### 4.2.2.1.5 关键算法\n\n###### 4.2.2.1.6 设计实现\n\n实现要点（按“列表/编辑/血缘/详情”展开，含展示元素、筛选与操作）\n\n- 元数据列表（展示元素 / 筛选条件 / 行级操作） \n  - 展示元素：名称（高亮命中）/类型/所属系统/数据源/主题域/更新时间/热度（引用次数或hot_score）/标签（Badge）/状态。\n  - 筛选条件：关键字（模糊命中 name/full_name/tags）/类型（多选）/主题域（多选）/所属系统/数据源/更新时间范围/状态/标签（多选）；排序：`hot_score|updated_at`；分页与每页条数；支持“清空筛选”“保存筛选方案”。\n  - 行级操作：查看详情、编辑业务元数据、查看血缘（上下游）、复制全名、快速添加/移除标签、导出实体。\n  - 接口：`GET /v1/metadata/catalog?keyword=&domain=&system=&datasource=&type=&updatedFrom=&updatedTo=&sort=hot|updated_at&page=1&pageSize=20`；返回 `{items,page,total}` 并包含高亮与分数。\n- 元数据编辑（业务元数据） \n  - 可编辑项：中文名、业务口径、主题域、标签（多选）、负责人、重要级别、备注、业务状态（在架/下架/归档）。\n  - 不可编辑：技术名称/类型/所属数据源/系统（源自采集的技术元数据，仅阅读）。\n  - 校验：必填与长度/字符集；主题域与标签存在性；负责人合法性；重复中文名提示但允许保存（与技术名解耦）。\n  - 接口：`PUT /v1/metadata/entities/{id}/business`（Body 携带编辑项与 `version`）；回滚：`POST /v1/metadata/entities/{id}/business/rollback`。\n- 元数据血缘（上下游） \n  - 视图：上下游切换（`upstream|downstream`）、深度 1..5、图/列表双视图；过滤节点类型（table/view/job）；路径高亮与节点折叠。\n  - 接口：`GET /v1/metadata/lineage/graph?entityId={id}&direction=up|down&depth=1..5&filter=table|job`；返回 `nodes/edges/stats`。\n- 元数据详情（技术/业务/字段属性） \n  - 技术元数据：类型、全名、所属系统/数据源、版本、更新时间、状态；采集信息（最近采集时间/任务ID/采集版本）；统计（行数/存储大小/分区信息，按类型可选）。\n  - 字段属性（技术）：字段名/类型/是否主键/是否敏感/注释；字段列表支持列筛选与排序。\n  - 业务元数据：中文名、业务口径、主题域、标签、负责人、重要级别、备注、业务状态；来源为“元数据编辑”记录，可审计与回滚。\n  - 接口：`GET /v1/metadata/entities/{id}?include=technical,fields,versions`、`GET /v1/metadata/entities/{id}/business`。\n- 导出与一致性 \n  - 导出：`POST /v1/metadata/catalog/export`（携带当前筛选）→ 异步任务；进度 `GET /v1/exports/{jobId}`；下载 `GET /v1/exports/{jobId}/download`（签名 URL）。\n  - 一致性：采集/编辑事件驱动索引刷新；读侧缓存命中则返回；收到相关事件失效缓存；最终一致可观测。\n\n###### 4.2.2.1.7人机交互\n\n---\n\n##### 4.2.2.2 元数据采集\n\n###### 4.2.2.2.1 模块描述\n\n元数据采集模块负责从配置的数据源中定期或手动提取技术元数据（如库/表/字段结构、统计信息、血缘关系等），并推送至元数据仓库，形成统一的元数据资产基础。支持多种数据源类型（关系型数据库、NoSQL、文件系统、大数据平台等），采用插件化架构以便扩展。采集过程强调增量采集、错误重试与监控告警，确保数据新鲜度和完整性。与元数据目录模块紧密协作，提供采集后的技术元数据供目录浏览与编辑使用。\n\n###### 4.2.2.2.2 功能组成\n\n- 采集任务管理：创建/编辑/删除采集任务，配置数据源、采集范围（库/表/字段级别）、调度策略（定时/手动/事件触发）、采集类型（全量/增量）。\n- 采集执行与监控：任务调度执行、进度监控、日志查看、错误重试与告警通知。\n- 插件扩展：支持多种数据源插件（JDBC、Kafka、HDFS等），插件注册与版本管理。\n- 增量检测：基于时间戳/变更日志的增量采集机制。\n- 集成与通知：采集完成后发布事件通知下游模块（如目录索引刷新、血缘分析）。\n\n###### 4.2.2.2.3 处理流程\n\n![元数据采集流程图](./images/metadata-collection-flow.svg)\n\n采用开源工具（如DataHub）后，处理流程简化如下：\n\n- 任务调度：使用DataHub调度器触发采集任务，校验数据源连接。\n- 元数据摄取：通过DataHub的Ingestion Framework从数据源提取元数据，支持全量或增量模式。\n- 数据同步：将采集的元数据转换为平台统一模型，并推送至元数据仓库。\n- 监控与异常处理：利用DataHub的监控工具跟踪进度，处理错误并发送告警。\n\n###### 4.2.2.2.4 数据流图\n\n（可选，可后续补充数据源 → 采集器 → 转换器 → 仓库的数据流向图，标注数据格式与转换点。）\n\n###### 4.2.2.2.5 关键算法\n\n- 增量采集算法：使用时间戳比较或变更日志订阅，实现 O(1) 变更检测；结合哈希校验避免重复推送。\n- 血缘解析算法：SQL解析（ANTLR/JSQLParser）提取表/字段依赖，构建DAG图；支持跨源血缘（Job调度日志）。\n\n###### 4.2.2.2.6 设计实现\n\n为提升元数据采集的灵活性和可扩展性，本模块将整合DataHub作为核心采集引擎，利用其流式架构和丰富的连接器生态来处理多种数据源。DataHub的选择基于其实时元数据处理能力、社区活跃度和与现代数据栈的兼容性（相较于Apache Atlas更侧重Hadoop生态）。整合策略包括：使用DataHub的Ingestion Framework替换自定义插件机制，通过自定义Source/Sink适配平台数据源和仓库；保留原有接口，但后端代理到DataHub的REST API或Python SDK；增量采集借助DataHub的Stateful Ingestion支持。\n\n- 任务管理接口：`POST /v1/ingestion/tasks` 创建任务（Body: datasourceId, scope, schedule, type），代理到DataHub的Recipe配置；`GET /v1/ingestion/tasks/{id}` 详情，从DataHub查询执行状态；`PUT /v1/ingestion/tasks/{id}` 编辑，更新DataHub Recipe；`DELETE /v1/ingestion/tasks/{id}` 删除（需无运行实例，调用DataHub删除Pipeline）。\n- 执行与监控：`POST /v1/ingestion/tasks/{id}/run` 手动触发，调用DataHub的Ingestion Run API；`GET /v1/ingestion/tasks/{id}/status` 进度（progress, logs, errors），从DataHub获取实时日志；`GET /v1/ingestion/tasks/{id}/history` 历史执行记录，查询DataHub的Run History。\n- 插件机制：借助DataHub的Source Connectors（JDBC、Kafka等）替换自定义IngestionPlugin；自定义Connector通过DataHub Python SDK开发并注册；版本管理集成DataHub的Pipeline版本控制。\n- 增量实现：利用DataHub的Stateful Ingestion维护状态（last_ingested_at, watermark），支持增量查询如 `WHERE updated_at > last_watermark`；与平台快照表同步。\n- 集成点：采集完成后，通过DataHub的Metadata Change Events（MCE）发布事件（metadata.ingested）携带 entityUrns；下游模块订阅DataHub的Kafka Topic刷新缓存/索引。\n- 性能与可靠性：异步执行借助DataHub的Airflow/DAG整合；重试机制配置DataHub的Retry Policy（maxAttempts=3, backoff=exponential）；监控指标（success_rate, duration, ingested_count）通过DataHub的Telemetry暴露到Prometheus。\n- 备选方案：若需Hadoop-centric治理，可切换到Apache Atlas，通过其Hook/Bridge机制采集元数据，并映射到平台模型；但优先推荐DataHub以支持更广泛的数据源。\n\n###### 4.2.2.2.7 人机交互\n\n---\n\n#### 4.2.3 数据标准管理\n\n本模块按照 PRD 4.5（数据标准管理）要求进行设计与实现，覆盖词根管理、字段级标准、模型命名标准、表命名标准以及标准建模五个子模块，形成“标准定义 → 标准执行 → 度量反馈 → 标准优化”的闭环治理能力。\n\n---\n\n##### 4.2.3.1 词根管理\n\n###### 4.2.3.1.1 模块描述\n\n- 功能描述：统一管理数据资产中的“词根”，作为命名规范的基础组成单元，支撑模型/表/字段命名生成与一致性治理。提供新增/编辑、导入/导出、搜索筛选、左侧树导航、右侧列表分页与影响分析。与命名标准、字段级标准形成内聚协同，确保口径一致与可追踪。\n\n###### 4.2.3.1.2 功能组成\n\n- 功能组成： \n  - 左侧类目树：按主题域/目录/类别分层导航与筛选。\n  - 词根列表：分页展示，支持批量选择与批量操作。\n  - 词根维护：支持新增、编辑、启用/禁用、删除全流程。\n  - 导入/导出：基于标准 Excel 模板，支持导入与导出。\n  - 影响分析：统计字段与数据元引用及影响范围。\n- 协同机制：词根变更 → 触发命名规则与依赖对象一致性校验 → 推送影响提示 → 审批通过后生效并记录审计。\n\n###### 4.2.3.1.3 处理流程\n\n- 输入：用户操作（新增/编辑/导入）、筛选条件；系统引用关系（命名规则、模型/表/字段）。\n- 流程：\n  1. 新增/编辑提交 → 服务端进行唯一性与规范校验 → 通过后入库；\n  2. 导入 Excel → 模板解析与逐条校验 → 通过项批量入库，失败项返回定位与重试指引；\n  3. 变更前触发影响分析 → 弹窗展示受影响对象与数量 → 二次确认；\n  4. 生效后更新缓存与索引，并推送审计日志。\n- 可视化：词根管理流程图（images/root-management-flow.svg）；状态机图（启用/禁用/删除与引用约束，images/root-state-machine.svg）。\n\n  配图：\n\n  ![词根管理流程图](./images/root-management-flow.svg)\n\n###### 4.2.3.1.4 数据流图（可选）\n\n###### 4.2.3.1.5 设计实现\n\n本节按“新增、编辑、启用禁用、删除、导出”五类操作阐述要素信息、约束规范、接口契约与处理逻辑，并补充并发一致性、审计事件、权限与性能策略。\n\n- 统一校验规范（后端与前端一致）\n  - 唯一性：编码全局唯一；中文名称在主题域范围内建议唯一（可配置）。\n  - 规范性：编码仅允许小写字母、数字与下划线，长度 2-32；中文名称 1-32；英文名称 2-64。\n  - 保留与冲突：禁止使用保留词（例如 db、tbl），同义词不能与其他词根的主名或同义词冲突。\n  - 引用约束：删除与归档需满足“无引用”守卫；禁用允许但需提示已有引用影响。\n  - 状态机：启用 ↔ 禁用；禁用 → 归档（需无引用）；归档 → 删除（需无引用且审批）。\n  - 版本与并发：采用版本号字段进行乐观锁；编辑需校验 If-Match（实体标签，ETag）或版本号。\n- 新增流程（POST /create）\n  - 输入要素：编码、中文名称、英文名称（可选）、主题域ID、类别ID、分隔符（可选）、同义词（可选）、描述、示例（可选）。 \n    - 处理步骤： \n      1. 规范与唯一性校验 → 保留词检查 → 同义词冲突检查；\n      2. 入库（默认状态为禁用）→ 写入变更日志；\n      3. 发布“词根创建”事件 → 刷新检索索引与缓存；\n      4. 返回详情与审计关联ID。\n  - 交互要点：成功后提供“立即启用”与“创建命名规则”引导。\n- 编辑流程（PUT /{id}）\n  - 可编辑字段：中文名称、英文名称、主题域ID、类别ID、分隔符、同义词、描述、示例；不支持修改编码。 \n    - 处理步骤： \n      1. 版本与并发校验 → 唯一与规范校验；\n      2. 影响分析（统计使用引用记录，提示受影响对象数量）→ 二次确认；\n      3. 更新入库 → 记录变更日志；\n      4. 发布“词根更新”事件 → 刷新索引与缓存。\n  - 交互要点：编辑提交前弹窗展示影响对象清单与数量，支持导出影响列表。\n- 启用与禁用流程（PATCH /{id}/status）\n  - 启用：校验状态不可为“已归档”或“已删除”；校验必填要素完整；通过后切换状态并发布“词根启用”事件。\n  - 禁用：允许存在引用，但需提示对命名生成与校验的影响；切换后发布“词根禁用”事件。\n  - 后置处理：刷新缓存与索引，更新启用度量（可选）。\n- 删除流程（DELETE /{id}，软删除）\n  - 守卫：需满足“无引用”才允许删除；否则引导“禁用或归档”，并提供解绑指引与批量替换建议。\n  - 处理步骤：标记删除时间并切换状态为删除 → 记录日志 → 发布“词根删除”事件 → 索引与缓存清理。\n  - 恢复策略：仅归档状态可恢复为禁用；已删除不支持直接恢复（需重新创建）。\n- 导出流程（POST /export）\n  - 输入要素：筛选条件（主题域ID、类别ID、状态、时间范围、关键词）、导出格式（CSV、XLSX）、列选项。\n  - 处理步骤：服务端按条件查询 → 流式导出（大数据量） → 字段值转义与规范化（分隔符、特殊字符） → 生成文件 → 审计记录。\n  - 输出列建议：编码、中文名称、英文名称、主题域、类别、分隔符、同义词、状态、更新时间、使用次数。\n  - 交互要点：提供“当前筛选导出”与“全部导出”，展示预计条数与耗时提示。\n- 异常处理与错误码（示例）\n  - 示例错误：编码已存在、名称冲突、保留词冲突、状态冲突、存在引用、版本不匹配、导出数据量过大、导入模板无效。\n  - 返回建议与定位信息：冲突对象、错误行号与列号、替代建议。\n\n###### 4.2.3.1.6 关键算法（可选）\n\n- 影响分析计算：对使用引用记录进行分组聚合与差异比较，复杂度 O(n)；对高并发变更采用批处理与队列削峰。\n\n###### 4.2.3.1.7 人机交互\n\n---\n\n##### 4.2.3.2 数据元标准\n\n###### 4.2.3.2.1 模块描述\n\n- 功能描述：统一管理数据元（编号、定义、类型、长度/精度、值域、命名标准、代码值、单位与状态），支撑字段层面的一致性与复用；提供新增、编辑、发布/撤销发布与删除的受控状态流转。\n\n###### 4.2.3.2.2 功能组成\n\n- 子功能：新建/编辑数据元、搜索与筛选（类型/发布状态）、列表分页、详情查看、导出。\n- 协同机制：数据元发布后可被模型/表/字段引用；撤销发布后触发依赖对象校验与提示。\n\n###### 4.2.3.2.3 处理流程\n\n本节提供“新增、编辑、发布/撤销发布、删除”的综合流程图与说明，作为产品设计与研发实现的统一参照。\n\n![数据元标准-综合流程图](./images/element-standard-operations-flow.svg)\n\n- 新增（创建）：填写表单 → 规范与唯一性校验（编码/名称/数据类型/长度/精度/值域） → 入库（默认“未发布+启用”） → 审计日志 → 刷新索引与缓存 → 返回详情与后续引导（发布/绑定引用）。\n- 编辑：加载详情 → 并发与版本校验（If-Match/版本号） → 修改项校验（唯一性/类型一致性/值域） → 影响分析（引用对象计数与清单） → 二次确认 → 入库更新 → 审计差异 → 刷新索引与缓存。\n- 发布：状态检查（仅启用可发布） → 完整性校验 → 切换为“已发布+启用” → 事件（element.published） → 刷新索引与缓存 → 通知引用方可用。\n- 撤销发布：检查当前状态（已发布） → 影响分析与二次确认 → 切换为“未发布+启用” → 事件（element.unpublished） → 通知引用方（替代或兼容策略）。\n- 删除：检查引用关系（必须“无引用”）与状态（仅禁用可删） → 二次确认 → 软删除（记录操作者与时间） → 事件（element.deleted） → 清理索引与缓存。\n\n注：如需状态机配图，可后续补充统一状态机图（启用/禁用/发布/撤销发布/归档/删除），此处暂以流程图为主。\n\n###### 4.2.3.2.4 数据流图（可选）\n\n###### 4.2.3.2.5 设计实现\n\n本节从“输入与输出、展示要素、约束与校验、并发与权限、索引与缓存、审计与事件、错误码与接口契约”七方面，给出数据元标准的可落地实现设计；流程参考 4.2.3.2.3 的综合流程图。\n\n- 输入与输出 \n  - 新增（创建） \n    - 输入（表单/接口）：编码`code`、中文名`name_cn`、定义`definition`、类型`data_type`、长度`length`、精度`precision`、值域（数值：`value_min`/`value_max`；枚举：`code_set_id`）、命名规则`naming_rule_id`、单位`unit`、备注`description`、启用状态`enable_status`。\n    - 约束：`code`唯一；类型-长度/精度矩阵合法；值域与定义语义一致；必填项完整。\n    - 输出：返回详情（含`id`、`publish_status=unpublished`、`enable_status=enabled`）、审计记录ID；刷新检索索引与缓存。\n  - 编辑 \n    - 输入：`id`、允许编辑项（除`code`外）、并发控制`version`或HTTP头`If-Match`（ETag）。\n    - 约束：已发布编辑需二次确认并出具影响分析报告（引用对象计数与清单）；类型/长度/精度与值域一致性校验。\n    - 输出：差异列表（before/after）、审计记录ID、索引与缓存刷新状态。\n  - 发布 \n    - 输入：`id`；前置条件：`enable_status=enabled`、要素完整（编码/中文名/类型/长度/精度/值域/单位/定义等）。\n    - 输出：状态切换为`published`；事件`element.published`；通知引用方可用（异步）。\n  - 撤销发布 \n    - 输入：`id`；前置条件：当前状态为`published`。\n    - 输出：状态切换为`unpublished`；事件`element.unpublished`；提示替代或兼容策略（版本锁/替代项建议）。\n  - 删除（软删除） \n    - 输入：`id`；前置条件：`enable_status=disabled`、引用计数为0。\n    - 输出：软删除（记录操作者与时间戳）、事件`element.deleted`；清理索引与缓存。\n- 展示要素与交互状态 \n  - 列表页（展示元素/筛选与排序/行级操作） \n    - 展示元素：编码、中文名、类型、长度/精度、值域摘要（范围/代码集）、发布状态、启用状态、更新时间、引用计数。\n    - 筛选条件：关键字、类型、发布状态、启用状态、主题域、代码集、更新时间范围；排序：更新时间/引用计数；分页与每页条数。\n    - 行级操作：查看详情、编辑、发布/撤销发布、启用/禁用、删除、导出影响清单。\n  - 详情页/抽屉（Tabs：概览/要素与约束/引用与影响/审计与事件/版本） \n    - 概览：名称/编码/定义/单位/类型/长度/精度/值域/状态；状态 Chips 与工具提示（不合法状态给出原因）。\n    - 要素与约束：类型-长度/精度矩阵、值域规则与代码集绑定、命名规则与单位说明。\n    - 引用与影响：引用对象列表（字段/模型/表）、引用计数、导出影响清单（CSV）。\n    - 审计与事件：时间线视图，支持动作筛选与导出。\n    - 版本：版本号与变更摘要，支持最近版本对比。\n  - 编辑表单 \n    - 字段分组：基本信息、类型与长度、值域、命名与单位、备注。\n    - 动态校验：跟随类型变化展示长度/精度与值域控件；枚举型显示代码集选择器；数值型显示最小/最大值。\n    - 引导：保存成功后引导“发布/绑定引用”。\n- 约束与校验 \n  - 唯一性：`code`全局唯一；重复提示包含定位信息与替代建议。\n  - 类型-长度/精度矩阵： \n    - 数值型：`length`/`precision`合规；`value_min`≤`value_max`。\n    - 字符型：`length`为正且符合字符集；不支持`precision`。\n    - 日期/时间型：不需要`length/precision`；格式说明与示例。\n    - 布尔/枚举：布尔无需长度；枚举必须绑定`code_set_id`。\n  - 值域一致性：定义与值域语义一致；枚举项与定义关键字匹配建议与提示。\n  - 状态机约束：仅允许合法路径（启用/禁用、发布/撤销发布、归档、删除），非法动作阻断并提示原因。\n  - 并发与版本：乐观锁（`version`/`If-Match`）；冲突返回`409 CONFLICT`并提示重试路径（刷新/合并）。\n  - 权限门禁：按角色/域配置细粒度动作权限（新增/编辑/发布/撤销/启用/禁用/删除/导出）。\n- 索引与缓存策略 \n  - 索引字段：编码、中文名、类型、主题域、更新时间、发布/启用状态、标签；支持拼音与同义词召回。\n  - 缓存：列表与详情缓存；TTL + 主动失效；按事件驱动刷新（published/unpublished/updated/deleted）。\n- 错误码与提示（示例） \n  - `STD_001` 编码已存在；`STD_002` 类型与长度/精度不合法；`STD_003` 值域不合法；`STD_004` 非启用状态不可发布；\n  - `STD_005` 已发布不可删除；`STD_006` 存在引用不可删除；`STD_007` 并发冲突请重试；`STD_008` 要素不完整不可发布。\n\n###### 4.2.3.2.6 关键算法（可选）\n\n###### 4.2.3.2.7 人机交互\n\n---\n\n##### 4.2.3.3 代码标准\n\n###### 4.2.3.3.1 模块描述\n\n- 功能描述：以“代码集-代码值”结构管理值域标准，支持左树右表、新增/编辑/删除、导入/导出、拖拽排序与分页浏览，确保跨系统编码一致与值域规范。\n\n###### 4.2.3.3.2 功能组成\n\n- 子功能：代码集维护、代码值维护（新增/编辑/删除/排序）、搜索与筛选、导入/导出、分页。\n- 协同机制：数据元引用代码集；代码集变更触发数据元合法性复核与通知。\n\n###### 4.2.3.3.3 处理流程\n\n- 可视化：\n\n  ![代码标准维护流程图](./images/code-standard-flow.svg)\n- 输入：用户操作（新增/编辑/删除/排序/导入/导出）与筛选条件；系统引用关系（数据元引用代码集）。\n- 流程说明\n  - 新增（代码集/代码值） \n    - 新建代码集：填写名称/域/描述 → 唯一性校验（`name+domain`）→ 入库（记录`sort_order`初始值）→ 事件`element.code_set.created` → 刷新索引与缓存。\n    - 新增代码值：选择代码集 → 填写`code/name/sort_order` → 唯一性校验（`set_id+code`）与排序合法性 → 入库 → 事件`element.code_value.created` → 刷新索引与缓存。\n  - 编辑（代码集/代码值） \n    - 编辑代码集：变更`name/description/domain/sort_order` → 冲突与唯一性校验 → 更新 → 事件`element.code_set.updated` → 索引与缓存刷新。\n    - 编辑代码值：允许变更`name/sort_order`（`code`如需变更，需唯一性复核与高风险提示）→ 更新 → 事件`element.code_value.updated` → 索引与缓存刷新。\n  - 删除（代码集/代码值） \n    - 删除代码值：二次确认 → 检查是否被数据元引用（存在引用则阻断并提示替代建议）→ 通过则删除 → 清理索引与缓存 → 事件`element.code_value.deleted`。\n    - 删除代码集：二次确认 → 检查是否包含代码值或被数据元引用 → 任一为真则阻断并提示；均为假则删除 → 清理索引与缓存 → 事件`element.code_set.deleted`。\n  - 排序与导入/导出 \n    - 导入/导出：Excel模板解析与字段校验（必填/类型/重复）→ 批量入库或拒绝（错误定位与行号提示）→ 索引与缓存刷新；导出按当前筛选或选中代码集。\n\n###### 4.2.3.3.4 数据流图（可选）\n\n###### 4.2.3.3.5 设计实现\n\n- 输入与输出 \n  - 接口分层：`/api/standards/code-sets`（代码集）与`/api/standards/code-values`（代码值）。 \n    - 查询：支持分页/排序/筛选（域`domain`、启用`enabled`、关键词）。\n    - 新增：代码集与代码值分别提供新增接口，返回资源`id`与`version`；批量导入支持一次性校验与事务写入。\n    - 编辑：基于乐观锁（`If-Match: <version>`）提交差异字段变更；支持代码值的重命名与排序调整。\n    - 删除：代码值可删除（需引用校验通过）；代码集删除需为空集且无外部引用。\n    - 排序：拖拽触发批量更新`sort_order`（稳定重排），返回新的版本戳。\n    - 导入/导出：Excel模板上传解析后进行字段/重复/引用校验；导出按当前筛选或选中集合生成文件。\n  - 关键字段（示例）： \n    - 代码集：`id, code, name, description, domain, version, enabled, sort_order, created_at, updated_at`。\n    - 代码值：`id, code_set_id, code, name, description, sort_order, enabled, metadata, version`。\n  - 事件输出：`element.code_set.created/updated/deleted`，`element.code_value.created/updated/deleted`；用于索引刷新与缓存失效。\n- 展示要素与交互状态 \n  - 左侧树：代码集列表（域/启用状态筛选、关键词搜索），支持新增/编辑/删除与排序；显示引用计数与启用标记。\n  - 右侧表：代码值列表（支持分页/排序/多选），列包含`code/name/sort_order/enabled/description`；行内编辑与拖拽排序。\n  - 表单： \n    - 代码集：`code`（只读或受控变更）、`name`、`domain`、`description`、`enabled`、`sort_order`。\n    - 代码值：`code`（默认不可变，需高风险确认才允许变更）、`name`、`description`、`enabled`、`sort_order`、`metadata`（JSON）。\n  - 状态提示：保存中/并发冲突/校验失败/存在引用不可删除/导入错误定位（行号与原因）。\n  - 交互守护：未保存变更离开提醒；批量操作进度与失败重试；权限不足指示与申请通道。\n- 约束条件与校验 \n  - 唯一性： \n    - 代码集：`(domain, code)`唯一。\n    - 代码值：`(code_set_id, code)`唯一。\n  - 引用完整性： \n    - 代码值删除需确认无数据元引用；代码集删除需无代码值且无数据元引用。\n  - 不变性策略： \n    - 默认`code`不可变；如需变更，走高风险流程（二次确认+引用影响分析+审计）。\n  - 字段校验：长度/字符集/必填/类型；`sort_order`为非负整数；`metadata`为JSON对象。\n  - 导入校验：模板必填列（`domain/code_set_code/code_set_name/code/code_name/sort_order`）、重复检测、非法字符、引用检测；错误按行号与字段返回。\n- 并发与版本控制 \n  - 乐观锁：资源携带`version`；编辑与排序批量提交头`If-Match`；冲突返回`409 CONFLICT`并附带最新`ETag`与合并建议。\n  - 幂等性：导入/排序批量接口通过请求幂等键（`Idempotency-Key`）避免重复提交；安全失败可重试。\n- 索引与缓存 \n  - 索引： \n    - 代码集：按`domain`、`enabled`、关键词（`code/name/description`）。\n    - 代码值：按`code_set_id`、关键词、`enabled`、`sort_order`。\n  - 缓存：常用代码集与其代码值聚合缓存（域级与集合级）；事件驱动失效与预热；分页列表采用只读短TTL缓存。\n- 错误码与提示（示例） \n  - `CST_001` 代码集重复；`CST_002` 代码值重复；`CST_003` 排序非法；`CST_004` 存在引用不可删除；`CST_005` 模板校验失败；`CST_006` 并发冲突；`CST_007` 权限不足。\n- 导入/导出模板 \n  - 列头：`domain, code_set_code, code_set_name, code, code_name, sort_order, enabled, description`。\n  - 校验：模板列完整、类型与范围正确、重复行与重复`code`检测、非法字符与长度限制、引用关系检查；失败逐行返回错误说明与列名。\n- 测试要点 \n  - 单元：唯一性校验、引用禁止删除、排序稳定性、模板解析与错误定位。\n  - 并发：版本冲突与幂等重试、批量排序一致性。\n  - 权限：不同角色操作覆盖与审计记录完整性。\n  - 性能：分页查询与缓存命中、批量导入写入与回滚路径。\n\n###### 4.2.3.3.6 关键算法\n\n###### 4.2.3.3.7 人机交互\n\n---\n\n##### 4.2.3.6 标准建模\n\n###### 4.2.3.6.1 模块描述\n\n- 核心逻辑：以建立“标准逻辑模型”（主题域/模型/表/字段）为主，沉淀可复用的逻辑模型库；支持物化能力，可基于逻辑模型一键生成或同步物理表/视图/数据集，并与标准映射、校验与差异报告联动，推动标准落地。\n\n###### 4.2.3.6.2 功能组成\n\n- 子功能： \n  - 模型管理（增删改查）：新建/编辑/删除/详情、启用/禁用、分页查询与筛选；\n  - 物化生成与同步：基于逻辑模型生成/更新物理表；可选择目标数据源与Schema；\n  - 标准映射：字段对齐、数据元/代码集绑定、命名规则绑定；\n\n###### 4.2.3.6.3 处理流程\n\n图示：\n![标准建模处理流程](./images/standard-modeling-flow.svg)\n\n###### 4.2.3.6.4 数据流图（可选）\n\n###### 4.2.3.6.5 设计实现\n\n- 输入与输出设计\n  - 输入（前端/用户）： \n    - 选择模型/表（模型目录与元数据详情）；\n    - 字段级标准映射（选择数据元/代码集，支持绑定/解绑/批量操作/智能推荐）；\n    - 命名规则绑定（选择分层/域规则，预校验命名一致性）；\n    - 批量校验触发（选择校验范围与策略）；\n    - 导入模板（CSV/Excel/JSON）批量映射；\n    - 版本标记/发布/撤销（含灰度与生效范围）。\n  - 输出（系统/页面）： \n    - 覆盖/合规进度、缺陷清单与建议；\n    - 字段级校验结果与高亮提示（类型/长度/代码集/命名一致性）；\n    - DDL 建议与重命名建议（预览与复制）；\n    - 差异报告（与上版对比，支持导出）；\n    - 审计事件与操作结果（成功/失败与错误码）。\n- 展示要素与交互状态\n  - 布局： \n    - 左侧筛选与选择区（模型/表选择、过滤条件、搜索关键字）；\n    - 中部字段映射区（字段列表 + 标准元素/代码集绑定控件 + 行级操作）；\n    - 右侧预览区（覆盖/合规进度、DDL 建议、校验摘要、发布操作）。\n  - 交互状态： \n    - 行级状态：未映射/已映射/校验通过/校验失败（类型/长度/代码集/命名）；\n    - 批量操作：全选/按条件选/智能推荐补齐；\n    - 预览联动：绑定/解绑、命名规则切换、类型映射策略变更后实时刷新；\n    - 发布状态：草稿/验证中/部分合规/合规/已发布；支持撤销与灰度窗口。\n- 处理流程（与 4.2.3.6.3 对齐）\n  1. 逻辑建模/模型登记 → 加载字段与上下文；\n  2. 字段标准映射（数据元/代码集）→ 绑定/解绑/批量/推荐；\n  3. 命名规则绑定 → 预校验命名一致性与冲突；\n  4. 批量校验执行 → 生成校验结果与度量；\n  5. 差异报告与优化建议 → 行级修复/批量补齐；\n  6. 映射版本存档与对比 → 版本标签/回滚；\n  7. 发布/撤销（灰度）→ 审计与联动整改闭环。\n- 校验与约束（规则清单）\n  - 类型兼容：源字段类型需与标准元素类型兼容（如 string↔varchar，int↔integer）；\n  - 长度/精度：字符长度与数值精度需满足标准元素声明的上限与范围；\n  - 代码集值域：绑定代码集时，需验证值域与枚举一致性（含别名与大小写策略）；\n  - 必填/可空：标准元素标记为必填时，字段不可为空（或需提供默认与修复策略）；\n  - 命名一致性：表/字段命名需与绑定的命名规则一致，冲突需提供替代建议；\n  - 唯一性：标准映射同一字段仅允许一个有效数据元绑定；\n  - 版本一致：不同版本规则在同一映射集内需保持可解释一致/隔离；\n  - DDL 生成：建议变更不得破坏现有索引/约束，需提供安全迁移脚本；\n  - 导入模板约束：列名/类型/枚举值需合法，重复映射需显式覆盖标记；\n  - 发布门槛：覆盖率与合规率需达到阈值（可配置），阻断项需清零。\n- 并发与一致性\n  - 乐观锁：mapping_set 与 mapping_entry 采用 entityVersion/ETag，防止并发覆盖；\n  - 幂等：绑定/解绑与发布操作支持幂等键（Idempotency-Key）；\n  - 行级锁：必要时对单字段映射采用短暂行锁，避免热点写入冲突；\n  - 事件一致：采用 Outbox + Kafka，校验结果与度量异步下发，保证最终一致；\n  - 去重与退避：批量导入时对重复项去重，失败按指数退避重试。\n- 索引与缓存\n  - 索引：ElasticSearch 建立字段/元素/代码集去范式索引（名称/标签/域/更新时间）；\n  - 缓存：映射上下文、命名规则编译产物、代码集值域；TTL + 主动失效；\n  - 失效策略：绑定/解绑/发布后主动失效相关缓存与索引片段；\n  - 分页与排序：统一分页（page/size），排序（更新时间/覆盖率/合规率）。\n- 错误码与消息（示例）\n  - STDMAP-4001 缺失映射项（MissingMapping）\n  - STDMAP-4201 类型不兼容（TypeMismatch）\n  - STDMAP-4202 代码集值域非法（CodeSetInvalid）\n  - STDMAP-4301 命名冲突（NamingConflict）\n  - STDMAP-4401 版本冲突（VersionConflict）\n  - STDMAP-4501 发布条件未满足（PublishForbidden）\n  - STDMAP-4091 重复请求（DuplicateRequest）\n  - STDMAP-5001 内部错误（InternalError）\n- 测试与验收点\n  - 单元测试：类型兼容、长度校验、代码集值域、命名规则一致性；\n  - 集成测试：绑定/解绑流程、批量校验/度量生成、版本存档/回滚、发布/撤销；\n  - 并发与幂等：多用户同时操作下的最终一致与无重复；\n  - 性能：索引检索 P95<200ms，批量校验可并行（队列削峰）；\n  - 可观测：指标/日志/追踪三件套接入，错误码与建议链接可检索；\n  - 安全与权限：对象/字段级权限生效，审计事件完整。\n\n###### 4.2.3.6.6 关键算法（可选）\n\n###### 4.2.3.6.7 人机交互\n\n---\n\n#### 4.2.4 数据质量治理\n\n本模块围绕“质量监控、质量规则库、质量检查任务”三大核心能力构建闭环的数据质量治理体系，严格对齐 PRD 4.3 的规格（质量监控概览、质量规则库、质量检查任务），形成从“规则→任务→执行→指标与评分→质量监控”的端到端治理链路。\n\n---\n\n##### 4.2.4.1 数据质量监控\n\n##### 4.2.4.1.1 模块描述\n\n- 核心功能：提供端到端质量监控大盘，围绕质量评分、异常概览、规则执行与趋势分析，支持快速筛选、图表分析、列表/卡片展示、报告导出与多渠道告警（站内/邮件/IM）。\n- 业务逻辑：汇聚任务执行产生的原子指标（空值率、重复率、延迟等），按源/库/表/字段/主题域/时间维进行聚合与评分；对异常项标注严重级别并提供处理入口；支持按筛选导出概览与明细报告。\n- 定位与作用：作为治理看板，支撑运维与治理决策，连接规则库与任务执行结果，是质量度量与异常处置的统一入口。\n\n###### 4.2.4.1.2 功能组成\n\n- 模块组织结构：\n\n  ![数据质量监控模块组织结构](./images/quality-monitoring-organization.svg)\n- 子功能组成（与协同关系）：\n\n  | 子功能        | 描述                         | 输入/输出           | 交互/协同               |\n  |------------|----------------------------|-----------------|---------------------|\n  | 概览仪表盘      | 规则总数、合格率、当日失败次数、告警数、DQ评分卡片 | 输入聚合指标；输出卡片与提示  | 点击卡片进入详情；与筛选联动      |\n  | 合格率趋势      | 折线展示过去7/30/90天合格率变化        | 输入时间序列指标；输出图表   | 区间切换、缩放、与筛选联动       |\n  | 失败规则次数（按域） | 柱状展示各域失败次数排名               | 输入域维度聚合数据；输出柱状图 | 点击域过滤异常列表与规则列表      |\n  | 快速筛选栏      | 时间范围、数据源、状态、关键字            | 输入筛选条件；输出过滤后的数据 | 驱动图表与列表联动更新；可重置     |\n  | 异常列表与处理    | 展示异常项并提供处理入口               | 输入异常事件集；输出处理动作  | 触发工单创建与状态更新；与告警关闭联动 |\n  | 质量监控规则列表   | 规则名称、类型、运行状态与行级操作          | 输入规则元数据与执行状态    | 管理规则、启/禁用、查看执行记录    |\n\n###### 4.2.4.1.3 处理流程\n\n- 流程图：\n\n  ![数据质量监控流程](./images/quality-monitoring-flow.svg)\n- 步骤说明：\n  1. 接收质量检查任务的原子指标与样本结果。\n  2. 指标聚合：按源/库/表/字段/域/时间维度聚合。\n  3. 质量评分：对完整性/准确性/一致性/及时性进行加权评分（可配置）。\n  4. 异常检测：采用阈值、分位数、滑动窗口/EWMA 检测异常并分级。\n  5. 输出监控大盘、异常列表、告警通知与报告导出。\n\n###### 4.2.4.1.4 数据流图（可选）\n\n- 引用总体 DFD 展示监控模块与指标/告警/报告服务之间的数据流。\n\n###### 4.2.4.1.5 设计实现\n\n- 展示元素（页面结构与组件） \n  - 顶部筛选栏：时间范围（相对/绝对）、数据源/库/表、域/主题、质量规则类型、告警状态、关键字；提供“重置”“应用”操作。\n  - 概览卡片：质量总分、当日检查次数、异常数与处理中数、规则覆盖率；支持趋势箭头、点击联动到对应列表或图表。\n  - 图表洞察： \n    - 趋势折线图（按日/小时质量分、异常计数）；\n    - 异常严重度分布柱状图（critical/high/medium/low）；\n    - 域/数据源维度分解（占比、Top N）。\n    - 交互：缩放、时间窗切换、点击筛选联动。\n  - 异常列表：字段包含来源库表/字段、指标类型（空值率、唯一性、值域等）、观测值/期望阈值、严重度、状态（新建/处理中/已解决/已忽略）、最近检查时间；操作包括“查看详情”“创建处理单”“静默”“关闭”。\n  - 规则运行列表：展示规则名称、类型、最近运行状态、成功/失败次数、平均耗时；支持启停、编辑、查看执行日志（联动质量规则模块）。\n- 流程说明（前后端与服务协作） \n  - 指标接入：离线/实时质量任务上报指标与异常事件，写入指标仓与事件流。\n  - 聚合服务：按筛选条件汇总指标、归档趋势、计算覆盖率，输出仪表盘数据切片并更新缓存。\n  - 评分服务：结合权重对各维度计算质量分（域/源/表/字段），生成总分与分解项。\n  - 异常检测：基于阈值/ EWMA / 分位数判定异常，分级严重度，写入事件流并触发告警。\n  - 仪表盘渲染：前端并行拉取“概览卡片、趋势、分布、列表”数据，Skeleton 与增量刷新，筛选联动触发重拉与局部更新。\n  - 告警触发与处置：达到策略阈值后推送到所选通道；页面支持确认、静默（时间窗）、关闭与备注，状态反写事件仓与审计日志。\n- 错误码（示例） \n  - `QMON-4001` 参数校验失败（时间窗口或筛选条件非法）。\n  - `QMON-4101` 指标数据缺失（可提示缩小时间窗或稍后重试）。\n  - `QMON-4201` 请求范围过大导致超时或被限流（建议分批查询）。\n  - `QMON-4301` 导出任务繁忙或超出并发限制（排队或稍后再试）。\n  - `QMON-4401` 告警策略不合法（参数或通道配置错误）。\n  - `QMON-5001` 服务器内部错误（展示故障页并记录审计）。\n- 测试与验收要点 \n  - 单元：聚合/评分/异常检测边界、阈值策略校验、缓存命中与失效。\n  - 接口：筛选组合正确性、分页一致性、SSE/轮询容错、导出任务生命周期。\n  - 前端：筛选联动、图表交互、虚拟滚动性能、Skeleton与错误态展示。\n  - 性能：热点仪表盘QPS压力、缓存命中率、导出并发下服务器负载与响应时间。\n  - 安全与权限：不同角色操作边界、审计日志完整性与可追溯性。\n\n###### 4.2.4.1.6 关键算法（可选）\n\n###### 4.2.4.1.7 人机交互\n\n---\n\n##### 4.2.4.2 质量规则库\n\n###### 4.2.4.2.1 模块描述\n\n- 核心功能：统一管理所有质量规则，支持规则的创建、编辑、搜索筛选、分页浏览、启用/禁用与导出，供质量检查任务引用。\n- 业务逻辑：以统一规则模型抽象不同类型（完整性/准确性/及时性/一致性/自定义）规则，提供参数模板与多源适配，校验兼容性与唯一性。\n- 定位与作用：作为规则资产的中心仓库，向任务模块提供可复用、可版本化的规则能力。\n\n###### 4.2.4.2.2 功能组成\n\n- 组织结构图：\n\n  ![质量规则库组织结构](./images/quality-rule-library-structure.svg)\n- 子功能组成：\n\n  | 子功能           | 描述                           | 输入/输出          | 交互/协同             |\n  |---------------|------------------------------|----------------|-------------------|\n  | 新增/编辑规则（抽屉表单） | 基础信息、规则类型、适用数据源、参数定义、状态开关、描述 | 输入表单；输出规则记录与版本 | 与唯一性校验、兼容性校验、审计联动 |\n  | 搜索与筛选         | 名称关键词、类型、状态                  | 输入筛选条件；输出规则列表  | 与分页与懒加载联动；行级操作    |\n  | 规则列表与分页       | 列：名称、类型、适用源、参数模板、状态、操作       | 输入规则元数据        | 查看/编辑/启禁/删除/导出    |\n  | 兼容性与适配        | 规则与数据源类型兼容性提示                | 输入源类型与规则类型     | 不支持即高亮标注与说明       |\n  | 导出            | 导出当前筛选的规则                    | 输入筛选视图；输出文件    | 二次确认与进度反馈；审计记录    |\n  | 权限与审计         | 角色权限控制与审计日志                  | 输入操作事件         | 输出审计日志与合规报告       |\n\n###### 4.2.4.2.3 处理流程\n\n**主要处理流程说明：**\n\n- **新增/编辑流程**：\n  - 用户在前端填写规则表单（名称、类型、适用数据源、参数定义等）→ 提交至规则服务\n  - 规则服务接收并解析表单数据 → 校验引擎执行唯一性校验（名称/英文名重复检查）\n  - 通过唯一性校验后 → 执行兼容性校验（规则类型与数据源类型匹配性）\n  - 校验通过 → 保存至 quality_rule 表，创建版本记录，构建搜索索引\n  - 同步记录审计日志，发布规则变更事件至事件总线\n  - 失败时返回具体校验错误信息并在前端定位显示\n- **搜索筛选流程**：\n  - 用户输入搜索条件（名称关键词、类型、状态筛选）→ 规则服务查询处理\n  - 利用索引引擎进行关键词匹配和条件筛选 → 从数据存储检索规则数据\n  - 应用分页排序逻辑 → 返回规则列表结果 → 前端展示\n- **启用/禁用流程**：\n  - 用户切换规则状态 → 规则服务处理状态更新请求\n  - 校验引擎执行影响分析，检查是否有任务依赖该规则\n  - 更新规则状态，记录版本变更 → 缓存状态信息\n  - 记录审计日志，发布状态变更事件，提示影响范围\n- **导出流程**：\n  - 用户触发导出操作 → 规则服务处理导出请求\n  - 校验引擎根据用户权限筛选可导出数据 → 生成导出文件\n  - 存储临时文件 → 返回下载链接 → 记录导出审计事件\n  - 支持进度反馈、失败重试与断点续传机制\n\n**异常处理与回退机制：**\n\n- 校验失败时提供明确错误信息和修改建议\n- 不兼容规则允许保存为禁用状态，并引导用户调整\n- 删除操作检查依赖关系，存在引用时阻止硬删除并提示影响范围\n- 所有关键操作支持审计追踪和必要时的回滚操作\n\n###### 4.2.4.2.4 数据流图（可选）\n\n- 与总体 DFD 的“规则库/规则表/版本”节点一致，支撑任务引用与执行器拉取规则。\n\n###### 4.2.4.2.5 设计实现\n\n- 算法设计： \n  - 表单校验：唯一性、必填、长度与字符集、兼容性矩阵校验。\n  - 规则 DSL → 执行计划：根据数据源类型适配生成 SQL/表达式，支持参数模板展开与校验。\n  - 索引与搜索：基于关键词与类型的倒排索引，分页与懒加载优化。\n- 异常处理： \n  - 名称重复与冲突：明确错误并给出改名建议。\n  - 不兼容规则：高亮提示并允许保存为禁用状态，或引导改为支持源。\n  - 删除与依赖：若被任务引用，阻止硬删除，改为禁用并提示影响范围。\n- 问题与方案： \n  - 多源适配复杂度：抽象统一执行接口与模板引擎，降低源适配耦合；引入单元测试覆盖常见源。\n\n###### 4.2.4.2.6 关键算法（可选）\n\n- 规则编译与适配：模板化 DSL 编译为各源可执行的语句；复杂度取决于参数展开（平均 O(k)），编译缓存提升命中率。\n\n###### 4.2.4.2.7 人机交互\n\n---\n\n##### 4.2.4.3 质量检查任务\n\n###### 4.2.4.3.1 模块描述\n\n- 核心功能：管理质量检查任务，支持任务创建（分步表单）、搜索筛选、列表查看、执行与监控，统一记录执行结果与状态流转，支持失败重试与日志查看。\n- 业务逻辑：任务绑定规则与目标对象范围（库/表/字段），配置执行策略（定时/手动/实时）、并发度与重试策略、失败告警与阈值；执行器拉取规则并编译计划，产出指标与异常事件。\n- 需求映射：完全对齐 PRD 4.3.3 的页面结构（统计卡片、筛选栏、列表与操作、分步弹窗）、权限与审计、性能与可用性（分页、懒加载、异步提示与进度反馈）。\n- 定位与作用：作为质量执行的载体连接规则库与监控大盘，支撑计划性与按需执行。\n\n###### 4.2.4.3.2 功能组成\n\n| 子功能            | 描述                                             | 输入/输出          | 交互/协同            |\n|----------------|------------------------------------------------|----------------|------------------|\n| 分步创建（步骤1：基础信息） | 名称、目标源与对象范围（库/表选择）、执行策略（定时/手动/实时）、并发度、重试、失败告警  | 输入表单；输出任务草稿    | 与规则选择与参数绑定联动     |\n| 分步创建（步骤2：选择规则） | 左侧规则列表（类型徽章、搜索与选择）、右侧参数输入区（模板生成控件）、已选规则汇总与校验提示 | 输入规则与参数；输出绑定关系 | 兼容性与参数校验；保存后更新列表 |\n| 任务列表与筛选        | 名称、数据源、执行状态（待执行/执行中/成功/失败）                     | 输入筛选条件；输出列表    | 行级操作（查看、编辑、执行）   |\n| 执行与监控          | 状态流转、最近执行时间、耗时、检查对象数、成功/失败统计                   | 输入运行记录；输出进度与日志 | 支持失败重试、暂停、恢复     |\n| 权限与审计          | 角色权限控制；审计新增、编辑、状态变更、执行与删除                      | 输入操作事件         | 输出审计日志           |\n\n###### 4.2.4.3.3 处理流程\n\n- 执行序列：\n\n  ![质量检查任务执行序列](./images/quality-task-sequence.svg)\n- 步骤说明：\n  1. 前端创建并保存任务；后端反馈成功或错误信息。\n  2. 调度器按策略下发至执行器，附带并发与重试配置。\n  3. 执行器拉取规则与参数，规则引擎编译与校验执行计划。\n  4. 执行产出指标与异常事件，更新监控与告警，前端查询展示。\n  5. 运行过程中上报进度与日志；支持失败重试、暂停与恢复。\n\n###### 4.2.4.3.4 数据流图（可选）\n\n- 与总体 DFD 的“任务服务/执行器/指标与异常库/报告服务/审计库”一致。\n\n###### 4.2.4.3.5 设计实现\n\n- 算法设计： \n  - 调度：支持 Cron/固定频率/立即执行；执行队列削峰与优先级；同源/同对象串并行策略。\n  - 重试与退避：固定/指数退避；幂等与断点续跑；失败快照与定位。\n  - 并发控制：基于连接池与资源配额的动态并发；限流与熔断。\n  - 日志与进度：统一结构化日志，实时上报进度与状态；支持日志检索与查看。\n- 异常处理： \n  - 连接失败/超时：快速失败与重试，告警通知与定位。\n  - 规则编译错误：回显具体错误，阻断执行并记录审计。\n  - 资源不足：熔断与降级；排队与延迟执行。\n- 问题与方案： \n  - 海量任务管理：分页/懒加载、批量操作与筛选一致性；异步提示与进度反馈。\n  - 任务与规则变更：版本化与兼容性校验，动态装载与热更新。\n\n###### 4.2.4.3.6 关键算法（可选）\n\n- 动态并发与优先级调度：根据任务大小、源负载与配额，动态调整并发与队列优先级；复杂度近似 O(n log n)。\n- 指标归并与压缩：结果写入采用列式/分区策略与压缩编码，降低存储与提升查询性能。\n\n###### 4.2.4.3.7 人机交互\n\n---\n\n#### 4.2.5 数据架构\n\n本章节对齐 PRD 4.7“数据架构”，拆分为两个分节：“数仓分层管理”与“主题域管理”。从模块描述、功能组成、处理流程、数据流（可选）、设计实现、关键算法（可选）、人机交互等维度进行完整阐述，确保技术实现与业务需求一致。\n\n##### 4.2.5.1 数仓分层管理\n\n###### 4.2.5.1.1 模块描述\n\n- 目标与定位：以卡片化列表清晰呈现 ODS/STD/DWD/DWS/ADS/DIM/OTHER/TMP 分层定位与主链路，支撑关键字与分层筛选、基础维护（新增/编辑/删除）与关联信息查看（血缘/版本对比/权限设置），提升数据架构一致性与导航效率。\n- 业务逻辑：结合元数据与标准治理，对分层对象的职责定义、上下游关系与并行维度（DIM）进行统一治理；TMP/OTHER 层以辅助策略管理，TMP需定期清理、OTHER用于特殊接入。\n- 需求映射：对齐 PRD 4.7.1 的标题区、关系总览、筛选区、分层卡片列表与模态框（版本对比/权限设置/元数据关联/新建分层）等要求。\n\n###### 4.2.5.1.2 功能组成\n\n- 结构概览： \n  - 标题与操作区：页面标题、副标题说明；“新建分层”“权限设置”。\n  - 关系总览：ODS → STD → DWD → DWS → ADS 主链路；DIM 并行；OTHER/TMP 辅助通道。\n  - 筛选区：关键字、分层下拉、筛选/重置按钮。\n  - 分层卡片列表：分层图标+名称+描述、分层短码（Badge）、示例模型 Chips、查看血缘/版本对比、编辑/删除。\n  - 模态框：版本对比、权限设置、元数据关联、新建分层。\n- 协同与数据依赖：与元数据目录/血缘、标准与质量校验、版本管理联动；筛选与统计联动更新，权限影响可见性与操作入口。\n\n###### 4.2.5.1.3 处理流程\n\n- 说明：初始化加载关系总览与卡片→设置筛选条件→检索分层及示例模型→返回列表与统计→用户交互（查看血缘/版本对比/编辑/删除）→权限与审计记录。\n- 流程图（嵌入）：\n\n  ![数仓分层管理-流程图](./images/warehouse-layers-flow.svg)\n\n###### 4.2.5.1.4 数据流图（可选）\n\n- 描述：筛选条件进入检索与聚合模块，输出分层卡片与统计结果；DIM 层并行为事实/汇总层提供维度一致支撑；TMP/OTHER 辅助对象参与特殊场景的数据流动。\n- 参考DFD：可与“data-flow-dfd.svg”结合，标注分层对象、血缘服务与权限模块的数据通路。\n\n###### 4.2.5.1.5 设计实现\n\n- 算法与策略： \n  - 检索与排序：关键字匹配（前缀/拼音/同义词）+ 分层过滤 + 卡片权重排序（最近更新/示例模型数量）。\n  - 版本对比：结构差异（新增/删除/变更）与影响分析（拓扑路径对比）。\n  - 血缘与影响：基于拓扑图的上游/下游计算与可视化呈现。\n- 异常处理： \n  - 删除拦截：存在绑定模型或引用关系时提示影响范围与二次确认。\n  - 唯一性校验：分层编码唯一且建议不变更，变更需提示影响。\n  - 并发与一致性：编辑冲突采用版本号与乐观锁，回滚支持。\n- 性能与可用性： \n  - 栅格响应式与虚拟滚动；筛选防抖与缓存；空/错状态与重置引导。\n  - 无障碍：键盘导航与高对比度支持。\n\n###### 4.2.5.1.6 关键算法（可选）\n\n- 差异比对：针对版本间分层下模型列表的 LCS/集合差分；复杂度 O(n log n)。\n- 拓扑影响计算：对血缘图做有向图遍历，限定层级深度与去环处理。\n\n###### 4.2.5.1.7 人机交互\n\n##### 4.2.5.2 主题域管理\n\n###### 4.2.5.2.1 模块描述\n\n- 目标与定位：管理主题域与子域结构，左侧树形导航+右侧域详情与过程管理，支持关键字搜索、选择与批量操作，配合面包屑与高亮反馈，提升业务语义组织与治理能力。\n- 业务逻辑：统一域层级、域实体与事件、指标口径、模型挂载与版本发布流程；提供血缘与影响分析、治理准入规则（命名/字段规范/口径一致）与权限审计。\n- 需求映射：对齐 PRD 4.7.2 的标题栏、面包屑、左侧树、右侧内容（搜索区/业务过程列表/操作）、选择与批量、搜索与重置、规则与约束、权限与审计、性能与可用性。\n\n###### 4.2.5.2.2 功能组成\n\n- 结构概览： \n  - 顶部标题栏与面包屑：默认选中与返回行为；“新建主题域”“设置”。\n  - 左侧主题域树：主域/子域节点展示、展开/收起、选中高亮与联动。\n  - 右侧域详情（标签页）：概览/实体/指标/模型/血缘/版本；支持搜索与重置。\n  - 业务过程列表：选择框（全选/单选）、新增/修改/删除、缩写计算与行高亮。\n- 协同与数据依赖：域层级变更联动模型与指标；血缘分析与影响评估覆盖变更范围；版本发布与权限审计贯穿过程。\n\n###### 4.2.5.2.3 处理流程\n\n- 说明：新建主题域→维护实体与事件→定义指标口径→挂载模型（维度/事实/汇总）→血缘与影响分析→版本管理与发布→治理规则校验与审计。\n- 流程图（嵌入）：\n\n  ![主题域管理-流程图](./images/domain-management-flow.svg)\n\n###### 4.2.5.2.4 数据流图（可选）\n\n- 描述：域/实体/指标/模型配置入库→血缘服务计算拓扑与影响→版本服务记录发布变更→权限审计记录关键操作与上下文。\n- 参考DFD：可结合“metadata-catalog-dfd.svg”“lineage-impact.svg”标注域内对象与服务的数据流动。\n\n###### 4.2.5.2.5 设计实现\n\n- 算法与策略： \n  - 缩写计算：按下划线分段取首字母并大写（如 TRADE_ORDER_CREATE → TOC）。\n  - 搜索过滤：关键字匹配域/实体/指标/过程；支持 Enter 快速查询与重置。\n  - 版本发布：草稿→评审→发布→归档的状态机控制与校验。\n- 异常处理： \n  - 删除/修改二次确认与影响提示（下游模型/指标/过程）。\n  - 唯一性与合法性校验（名称/编码/路径/描述）。\n  - 并发冲突：乐观锁与版本号控制。\n- 性能与可用性： \n  - 左树右表懒加载与滚动优化，批量选择稳态反馈；响应式布局与键盘可访问；空/错状态与重试引导；统一图标与主题色。\n\n###### 4.2.5.2.6 关键算法（可选）\n\n- 血缘影响评估：对域内对象构建有向图，计算受影响对象集合与变更路径；支持层级限制与缓存。\n\n###### 4.2.5.2.7 人机交互\n\n#### 4.2.6 数据资产管理\n\n- 模块总体说明\n  - 综合“资产地图、资产类目配置、资产标签配置、资产超市”四个子模块，形成从资产组织与标注→可视化地图→上架与目录→订阅与运营评估的端到端闭环能力。\n  - 目标：提升资产可发现性、可理解性与服务化能力，打通“标签/类目→地图视图→目录检索→订阅计量”的业务链路，并与元数据、标准与质量治理深度联动。\n- 模块间逻辑关联（优化）\n  - 标签/类目作为资产的组织与标注基础，为资产地图提供分组/聚合维度，并为资产超市的检索与排序提供特征信号（热度、关联度）。\n  - 资产上架审核通过后进入目录，同时在资产地图中以最新分组呈现，用户可从地图跳转到目录详情或订阅页；订阅与使用评估数据回流到标签/类目的运营看板，用于策略优化。\n  - 与元数据/质量联动：上架检查引用元数据实体与质量评分，地图与目录支持基于质量分数的过滤与标识。\n\n##### 4.2.6.1 资产地图\n\n###### 4.2.6.1.1 模块描述\n\n- 核心功能与业务逻辑：提供资产全景可视化与高效检索能力，页面包含标题与操作区（“资产地图”+“新增资产”）、四类统计卡片（资产总数/已发布/未发布/今日新增）、左侧资产分类树与右侧搜索筛选及资产列表/卡片视图，严格对齐PRD 4.1.1的布局与交互要求。\n- 需求满足：实现分类树联动筛选、卡片悬浮与快捷操作（详情/收藏/申请使用）、排序与视图切换、分页与移动端适配；权限与审计覆盖新增、查询/筛选、查看详情、收藏/申请使用等关键行为。\n- 关键功能点及业务价值：提高资产发现与导航效率，统一统计口径与联动反馈；作为目录与订阅的入口，促进资产复用与运营闭环。\n\n###### 4.2.6.1.2 功能组成\n\n- 子功能结构： \n  - 标题区与操作：页面标题、右侧“新增资产”。\n  - 统计卡片：资产总数、已发布、未发布、今日新增（联动筛选结果）。\n  - 资产分类树：展开/折叠、关键词过滤、节点计数与高亮选中。\n  - 搜索与筛选：名称、类型、业务领域、更新周期、访问权限、标签；查询/重置。\n  - 列表/卡片视图：资产基础信息、标签、更新时间、热度与评分；快捷操作（详情/收藏/申请）。\n  - 结果工具条：排序（最近更新/评分/热度）、视图切换（列表/卡片）。\n  - 分页组件：页码导航、每页条数、跳页、加载态与键盘可访问。\n- 协同机制与数据依赖：分类树与筛选条件双向联动；统计卡片基于查询结果实时聚合；权限控制影响可见性与操作入口；审计记录关键操作及参数。\n\n###### 4.2.6.1.3 处理流程\n\n- 流程说明：初始化加载分类树与基础统计→用户输入关键词/筛选条件→触发查询→服务端检索与聚合统计→返回列表/卡片数据与统计概览→前端渲染并联动更新→用户交互（排序、视图切换、分页、卡片操作）→跳转详情/收藏/申请使用→审计与权限校验。\n- 序列图（可选）：搜索发起→服务端检索→统计聚合→结果返回→渲染与交互（参考“metadata-search-sequence.svg”）。\n- 嵌入序列图：![资产地图-序列图](./images/assets-map-sequence.svg)\n\n###### 4.2.6.1.4 数据流图（可选）\n\n- 说明：数据从筛选条件进入检索与聚合模块，输出资产列表/卡片及统计结果，分类树与标签/类目作为过滤维度参与计算。\n- DFD示例：可参考模块级数据检索与聚合的DFD表示，关联分类/标签过滤与资产实体检索的处理节点。\n\n###### 4.2.6.1.5 设计实现\n\n- 核心数据结构：asset(id, key, name, type, domain, categories\\[\\], tags\\[\\], visibility, updated_at, popularity, rating)、category(id, name, level, parent_id, count)、search_filter(name, type, domain, period, visibility, tags\\[\\])、stats(total, published, unpublished, added_today)。\n- 关键算法选型：检索排序（BM25/向量召回）+ 特征加权（最近更新、评分、热度、可见性）；分类树过滤（树遍历与节点计数）；分页与懒加载。\n- 异常处理机制：空结果与错误提示（重试与条件建议）；权限拒绝的可见性回退；并发查询取消与结果一致性校验。\n- 性能优化策略：索引与缓存、虚拟滚动、视图切换的按需渲染、统计聚合预计算与增量更新、移动端响应式优化。\n- 技术风险与应对：大结果集分页与跳页体验；多维筛选组合的性能与一致性；跨维度统计联动延迟→采用异步加载与骨架屏。\n\n###### 4.2.6.1.6 关键算法（可选）\n\n- 排序融合：BM25得分与特征（更新时间、热度、评分）线性加权或学习排序；支持置顶与黑名单规则。\n- 分类树计数：前序/后序遍历与计数缓存；关键词过滤采用前缀索引。\n\n###### 4.2.6.1.7 人机交互\n\n---\n\n##### 4.2.6.2 资产类目配置\n\n###### 4.2.6.2.1 模块描述\n\n- 核心功能与业务逻辑：配置多级分类层级（级别管理）与分类树（资产分类管理），统一平台类目结构基线，管理分类属性与资产绑定，保障目录/地图的分组与治理一致性，对齐PRD 4.1.2与4.1.3。\n- 需求满足：级别管理支持新增/编辑/启停/拖拽排序与删除确认；分类树支持新增/编辑/删除/拖拽移动父子关系、批量导入/导出、搜索筛选与变更影响提示；字段唯一性与循环引用校验；权限与审计完整覆盖。\n- 关键功能点及业务价值：规范化层级与分类树，降低治理复杂度与变更风险，提升检索组织效率与联动运营度量。\n\n###### 4.2.6.2.2 功能组成\n\n- 子功能结构： \n  - 分类级别管理：级别列表、启停状态、拖拽排序、删除确认与影响提示。\n  - 资产分类管理：左侧分类树+右侧详情、搜索与筛选、节点新增/编辑/移动与批量导入/导出。\n  - 资产绑定与运营度量：分类与资产关联、资产计数、变更历史与运营看板。\n- 交互关系与数据依赖：级别变更影响分类树结构与资产归属；分类树变更影响目录/地图分组与统计；绑定关系驱动检索与度量更新。\n\n###### 4.2.6.2.3 处理流程\n\n- 流程说明：配置级别→维护分类树（新增/编辑/移动/删除）→资产绑定与计数更新→检索与筛选→策略下发与效果评估→变更日志与回滚。\n- 序列图（可选）：分类移动→影响分析→确认→结构更新→资产归属调整→目录/地图联动（可参考“category-management-sequence.svg”）。\n- 嵌入序列图（参考）：![资产类目配置-序列图](./images/category-management-sequence.svg)\n\n###### 4.2.6.2.4 数据流图（可选）\n\n- 说明：级别/分类配置数据经校验后入库；资产绑定更新驱动计数与度量；目录与地图消费分组数据进行展示与检索过滤。\n- DFD示例：参见“category-levels-flow.svg”“asset-categories-flow.svg”。\n\n###### 4.2.6.2.5 设计实现\n\n- 核心数据结构：category_level(id, name, code, order, status)、category(id, name, code, level, parent_id, owner, visibility, tags_group_id, status)、category_change_log(id, category_id, change_type, before, after, changed_by, changed_at)、asset_category_binding(asset_id, category_id, weight)。\n- 关键算法选型：层级遍历/路径缓存、拖拽排序持久化、批量导入/导出的结构校验与唯一性检查。\n- 异常处理机制：环路/越级校验、受控资产节点删除拦截与迁移指引、并发编辑冲突解决（版本号与乐观锁）。\n- 性能优化策略：大树懒加载与虚拟滚动、索引与缓存优化、批量绑定与解绑。\n- 技术风险与应对：结构变更影响广→预评估与回滚计划；跨团队协同→操作权限划分与审计追踪。\n\n###### 4.2.6.2.6 关键算法（可选）\n\n- 拖拽排序稳定性：O(n)重排与引用更新；路径缓存增量重建。\n\n###### 4.2.6.2.7 人机交互\n\n---\n\n##### 4.2.6.3 资产标签配置\n\n###### 4.2.6.3.1 模块描述\n\n- 核心功能与业务逻辑：管理资产标签与标签组，支持创建/编辑/删除/查询/导出，统计标签使用与关联资产数，提升检索与归类效率；对齐PRD 4.1.4（资产标签管理）与4.1.5（标签组管理）。\n- 需求满足：标签名称在标签组维度内唯一；标签组编码唯一且不可变；支持批量删除与批量关联；提供空状态/错误提示与并发冲突提示；权限与审计覆盖增删改查与导出。\n- 关键功能点及业务价值：标签体系规范化与可运营，支撑检索过滤、策略下发与地图着色分组。\n\n###### 4.2.6.3.2 功能组成\n\n- 子功能结构： \n  - 标签管理：新建/编辑/删除/查询与导出、分页展示与当前页描述。\n  - 标签组管理：新建/编辑/删除、统计每组标签数量与关联资产数。\n  - 使用统计与运营：热门标签聚合与排序、标签使用趋势、组内标签数量与资产关联数。\n- 交互关系与数据依赖：标签与标签组互相关联；标签绑定驱动检索过滤与运营度量；删除与变更需影响分析与提示。\n\n###### 4.2.6.3.3 处理流程\n\n- 流程说明：创建标签组→创建标签并绑定资产→查询与筛选→批量操作（导出/删除/批量关联）→运营统计与优化。\n- 状态机（可选）：标签/标签组（启用/停用/删除/归档）。\n- 嵌入状态机（参考）：![标签分类-状态机](./images/tags-categories-state-machine.svg)\n- 序列图（可选）：标签删除→影响确认→解绑资产→更新统计→日志记录。\n- 嵌入序列图：![资产标签配置-序列图](./images/asset-tags-sequence.svg)\n\n###### 4.2.6.3.4 数据流图（可选）\n\n- 说明：标签/标签组配置入库→资产绑定更新倒排索引→检索过滤与运营统计消费索引与度量。\n- DFD示例：参见“tags-categories-dfd.svg”“tags-categories-state-machine.svg”。\n\n###### 4.2.6.3.5 设计实现\n\n- 核心数据结构：tag(id, name, code, group_id, description, status, created_at)、tag_group(id, name, code, description, status, created_at)、asset_tag_binding(asset_id, tag_id, weight)、tag_usage_stats(tag_id, assets_count, usage_count, last_used_at)。\n- 关键算法选型：倒排索引/ES检索、热门标签聚合与排序（Top-N、时间衰减权重）。\n- 异常处理机制：唯一性与准入规则校验、删除确认与影响范围提示、并发编辑冲突（乐观锁）。\n- 性能优化策略：索引优化与缓存、分页与客户端筛选、批量绑定与批量删除。\n- 技术风险与应对：标签泛滥与质量下滑→治理策略与准入；标签组失衡→合并与迁移策略。\n\n###### 4.2.6.3.6 关键算法（可选）\n\n- 热门标签排序：基于使用频次、关联资产数与时间衰减的综合评分；支持黑名单与置顶。\n\n###### 4.2.6.3.7 人机交互\n\n---\n\n##### 4.2.6.4 资产超市\n\n###### 4.2.6.4.1 模块描述\n\n- 核心功能与业务逻辑：集中发现、筛选与获取全域数据资产，支持关键词搜索、分类筛选、评分/热度/最近更新排序，提供推荐与热门资产，支持网格/列表视图与快捷操作（查看详情、下载/申请、收藏、评价），严格对齐PRD 4.1.6的页面结构与交互。\n- 需求满足：全局搜索与筛选条（关键词、类型、领域、更新周期、权限、快速标签）；左侧分类与高级筛选（评分下限滑条、更新时间预设）；右侧推荐资产横滑与热门资产侧栏；结果工具条（排序/视图切换）；卡片快捷操作与状态反馈；权限与审计覆盖申请/下载/评价/收藏等行为。\n- 关键功能点及业务价值：提升资产曝光与转化，形成运营闭环（曝光-点击-收藏/申请-下载-评价），为推荐与排序提供埋点数据支持。\n\n###### 4.2.6.4.2 功能组成\n\n- 子功能结构： \n  - 全局搜索与筛选条：关键词、类型、领域、更新周期、访问权限、快速标签；查询/重置与联动更新。\n  - 左侧分类与高级筛选：数据类型、业务领域、评分下限（滑条）、更新时间（24h/7d/30d）。\n  - 推荐/热门区域：推荐资产横滑组件与热门资产侧栏（热度Top）。\n  - 结果列表与卡片：网格/列表视图切换、排序（最近更新/评分优先/热度优先）、卡片快捷操作（查看/下载或申请/评价/收藏）。\n  - 分页与懒加载：页码导航、每页条数、跳页、加载态与空状态提示。\n- 协同机制与数据依赖：筛选条件与结果联动；权限控制影响操作入口；埋点事件驱动推荐与排序特征更新；审计记录关键操作。\n\n###### 4.2.6.4.3 处理流程\n\n- 流程说明：初始化加载推荐与热门→用户设置搜索与筛选→服务端检索与排序→返回结果与统计→用户交互（视图切换、排序、分页、卡片操作）→申请/下载/评价/收藏→审计与埋点采集→推荐与排序特征更新。\n- 状态机（可选）：资产条目（草稿/待审/已发布/下架/冻结）、订阅（申请中/已批准/已拒绝/已取消/过期）。\n- 嵌入状态机：![资产超市-状态机](./images/asset-market-state-machine.svg)\n- 序列图（可选）：申请使用→权限校验→审批流→订阅创建→计量与限流→结果反馈与审计记录。\n- 嵌入序列图：![资产超市-序列图](./images/asset-market-sequence.svg)\n\n###### 4.2.6.4.4 数据流图（可选）\n\n- 说明：筛选条件流入检索与排序模块，结合推荐特征与权限过滤生成结果；用户行为（申请/下载/评价/收藏）写入审计与埋点服务，回流至推荐特征库。\n\n###### 4.2.6.4.5 设计实现\n\n- 核心数据结构：asset_item(id, key, name, owner, type, domain, categories\\[\\], tags\\[\\], visibility, updated_at, popularity, rating, status)、catalog_entry(item_id, visible, search_tokens, synonyms, pinyin)、subscription(id, item_id, user_id, quota, status)、download_log(id, item_id, user_id, ts)、rating_log(id, item_id, user_id, rating, ts)、favorite(id, item_id, user_id, ts)、recommend_feature(item_id, ctr, conversion, recency, tag_hot, category_hot)。\n- 关键算法选型：检索排序（BM25/向量召回）+ 特征加权（评分、热度、最近更新、可见性、推荐特征）；推荐与热门（曝光/点击/收藏/申请转化等埋点的加权与时间衰减）。\n- 异常处理机制：权限拒绝与限流反馈、空结果与错误提示、申请审批失败处理与回退、下载失败重试与审计标记。\n- 性能优化策略：索引与缓存、分页与懒加载、推荐与热门数据预聚合、前端虚拟滚动与骨架屏、移动端响应式与低带宽优化。\n- 技术风险与应对：特征偏置与“冷启动”→规则兜底与带宽采样；高并发申请与下载→限流与队列；跨维度排序一致性→异步更新与用户提示。\n\n###### 4.2.6.4.6 关键算法（可选）\n\n- 推荐特征融合：曝光/点击/收藏/申请/下载/评价的多事件加权评分，采用时间衰减与去噪处理；支持置顶/屏蔽策略。\n\n###### 4.2.6.4.7 人机交互\n\n---\n\n#### 4.2.7 数据服务\n\n为统一企业数据服务治理，数据服务模块，涵盖 API 管理与调用日志两个子章节，严格对齐 PRD 第4.6章节规范（4.6.1 与 4.6.2）。\n\n##### 4.2.7.1 API管理\n\n###### 4.2.7.1.1 模块描述\n\n- 核心功能：统一管理企业数据服务 API，支持检索、筛选、排序、批量操作与导出文档，并提供基础状态监控（调用量、错误率、延迟）。\n- 主要业务逻辑与功能点： \n  - 标题与操作区：新增 API、批量启停/删除、导出 API 文档（按筛选范围）。\n  - 搜索与高级筛选：关键词（名称/路径/描述）、状态（启用/停用/草稿）、方法（GET/POST/PUT/DELETE）、标签（订单/用户/库存/支付等）、所属域、负责人、更新时间（24h/7d/30d）、常用预设 Chips（最近更新/调用量高/错误率低）。\n  - 主体布局：左侧筛选器（快速过滤与重置、简易看板展示调用量/错误率/延迟）+ 右侧表格与分页。\n  - 表格交互：选择与批量、行内状态开关、列排序（名称/状态/更新时间/调用量/创建时间）、详情/修改/删除。\n- 需求满足说明：以上功能点与交互严格对应 PRD 4.6.1 的页面结构、交互与权限/审计/性能要求。\n\n###### 4.2.7.1.2 功能组成\n\n- 组织结构图：API目录管理→筛选与排序→批量操作→发布与状态→导出与监控（见 images/api-management-flow.svg）。\n- 子功能说明与协作： \n\n  | 子功能      | 能力项               | 说明                     | 关联数据对象                    |\n  |----------|-------------------|------------------------|---------------------------|\n  | 新增/编辑    | 基础信息/路径/方法/标签/负责人 | 字段校验与唯一性校验，支持版本信息展示    | api_service, api_version  |\n  | 启停/删除    | 行内开关/批量操作         | 需权限与审计；启停实时下发到网关策略     | api_policy, gateway_route |\n  | 检索/筛选/排序 | 多维条件与预设 Chips     | 条件联动更新列表与分页；排序稳定且状态保持  | api_index                 |\n  | 导出文档     | 按筛选范围导出           | 导出API清单与字段说明（CSV/JSON） | export_task               |\n  | 状态监控     | 调用量/错误率/延迟        | 简易看板读取监控索引，支持区间过滤      | api_metrics               |\n\n###### 4.2.7.1.3 处理流程\n\n- 流程图：![API 管理流程图](./images/api-management-flow.svg)\n\n###### 4.2.7.1.4 数据流图（可选）\n\n- 说明：API元数据经检索索引与监控指标流转；启停/发布动作经策略下发到网关；调用日志回流至监控与日志索引，供看板与审计使用。\n\n###### 4.2.7.1.5 设计实现\n\n- 算法与机制： \n  - 列表排序：稳定排序（字段+次级键），预设“调用量高”=按 call_count 降序，“错误率低”=按 error_rate 升序。\n  - 防抖与分页：前端查询防抖200-300ms，分页每页默认10条，上限100条。\n  - 权限与审计：管理员可新增/编辑/启停/删除/批量/导出；普通用户可查询与详情；审计记录上述所有行为。\n- 异常处理： \n  - 发布失败（校验/网关不可用）→回退至草稿或保留已发布但显示告警；策略冲突→提示并阻止提交。\n  - 启停失败→策略补偿与重试；删除需前置检查无路由引用与无活跃调用。\n- 性能优化： \n  - 路由缓存与策略预编译；鉴权令牌校验优化；限流就近策略；监控与日志异步处理。\n\n###### 4.2.7.1.6 关键算法（可选）\n\n- 限流算法：令牌桶/漏桶参数设定与就近生效策略，保证高并发下的平滑控制。\n\n###### 4.2.7.1.7 人机交互\n\n---\n\n##### 4.2.7.2 调用日志\n\n###### 4.2.7.2.1 模块描述\n\n- 核心功能：查看与分析数据服务的调用记录，支持多维筛选、分页、跳转与导出，便于定位问题与统计趋势。\n- 主要业务逻辑与功能点： \n  - 标题与操作区：导出 CSV（按当前筛选范围）。\n  - 筛选区：服务名称/路径关键词、请求方法（GET/POST/PUT/DELETE）、状态码分组（2xx/4xx/5xx）、精确状态码（200/404/500等）、时间范围选择、重置筛选按钮。\n  - 列表与操作：列（时间戳、服务名称、调用者IP、方法、路径、状态码、耗时ms、操作-详情），详情页展示请求/响应头与体示例。\n  - 分页与跳转：每页条数选择（10/20/50）、上一页/下一页与当前页/总页显示、页码跳转。\n- 需求满足说明：以上功能与交互对齐 PRD 4.6.2 的页面结构、权限与性能要求。\n\n###### 4.2.7.2.2 功能组成\n\n- 组织结构图：采集→存储与索引→查询筛选→分页与跳转→导出与详情（见 images/api-logs-flow.svg）。\n- 子功能说明与协作： \n\n  | 子功能   | 能力项                    | 说明            | 关联数据对象      |\n  |-------|------------------------|---------------|-------------|\n  | 多维筛选  | 关键词/方法/状态码(分组/精确)/时间范围 | 实时生效与重置恢复默认   | log_query   |\n  | 列表与排序 | 按时间倒序                  | 支持耗时/状态码辅助排序  | log_index   |\n  | 分页与跳转 | 每页条数选择/页码跳转            | 页码输入+GO，防误触校验 | page_state  |\n  | 导出CSV | 按当前筛选范围                | 后端生成CSV并提供下载  | export_task |\n  | 详情查看  | 请求/响应头/体示例             | 通过日志ID跳转详情页   | log_detail  |\n\n###### 4.2.7.2.3 处理流程\n\n- 流程图：![调用日志流程图](./images/api-logs-flow.svg)\n\n###### 4.2.7.2.4 数据流图（可选）\n\n- 说明：网关/服务采集→日志库/索引→查询与分页→导出到文件系统；详情页二次查询加载完整请求与响应示例。\n\n###### 4.2.7.2.5 设计实现\n\n- 算法与机制： \n  - 查询解析→构造检索DSL（时间范围/状态分组/方法/关键词），支持倒序与分页游标。\n  - 颜色区分：2xx绿色、4xx橙色、5xx红色；错误快速定位（状态分组+耗时阈值）。\n- 异常处理： \n  - 导出任务失败重试与错误反馈；详情加载失败显示简要错误并支持重试。\n- 性能优化： \n  - 客户端分页与筛选优化；索引预聚合（按时间桶与状态分组）；响应式布局与空/错提示优化体验。\n\n###### 4.2.7.2.6 关键算法（可选）\n\n- 索引与检索优化：倒排+时间桶+分组索引设计，保障在高吞吐日志下的快速查询与分页。\n\n###### 4.2.7.2.7 人机交互\n\n---\n\n## 5. 接口设计\n\n### 5.1 设计原则与规范\n\n- 风格与版本控制：全面采用RESTful风格，资源化命名，使用统一版本前缀 /api/v1/；后续演进以 /api/v2/ 进行兼容发布。\n- 资源与动作： \n  - GET（查询/读取）、POST（创建/执行）、PUT（更新整体）、PATCH（局部更新，可选）、DELETE（删除）。\n  - 动作型子资源以动词后缀表达（如 /publish、/remediation、/versions）。\n- 统一约定： \n  - 认证与授权：Authorization: Bearer <token>。\n  - Content-Type: application/json；所有请求/响应采用UTF-8编码。\n  - 分页参数：page（从1开始）、size（默认20，最大100）、sort（字段）、order（asc/desc）。\n  - 过滤参数：统一使用驼峰命名与明确取值范围，布尔型采用 true/false。\n  - 幂等性：PUT/DELETE需幂等，POST执行型端点返回202 Accepted或200 OK（视场景）。\n  - 状态码：200/201/202/204成功类；4xx客户端错误；5xx服务端错误。\n- 错误响应统一结构： \n  - { code: string, message: string, details?: object, requestId?: string, retryable?: boolean }\n- 成功响应示例（列表）： \n  - { items: [...], page: number, size: number, total: number }\n\n---\n\n### 5.2 接口清单（可检索表）\n\n| 接口编号     | 接口名称       | 接口类型 | 功能模块     | HTTP方法 | 接口端点                                    |\n|----------|------------|------|----------|--------|-----------------------------------------|\n| MET-001  | 查询元数据实体列表  | 查询   | 元数据管理    | GET    | /api/v1/metadata/entities               |\n| MET-002  | 获取元数据实体详情  | 查询   | 元数据管理    | GET    | /api/v1/metadata/entities/{id}          |\n| MET-003  | 创建元数据实体    | 创建   | 元数据管理    | POST   | /api/v1/metadata/entities               |\n| MET-004  | 查询数据血缘     | 查询   | 元数据管理    | GET    | /api/v1/metadata/lineage/{id}           |\n| STD-001  | 创建标准条目     | 创建   | 数据标准管理   | POST   | /api/v1/standards/items                 |\n| STD-002  | 查询标准映射规则列表 | 查询   | 数据标准管理   | GET    | /api/v1/standards/mappings              |\n| QLT-001  | 创建质量检测任务   | 执行   | 数据质量治理   | POST   | /api/v1/quality/tasks                   |\n| QLT-002  | 获取质量检测报表   | 查询   | 数据质量治理   | GET    | /api/v1/quality/reports/{taskId}        |\n| QLT-003  | 创建问题整改动作   | 执行   | 数据质量治理   | POST   | /api/v1/quality/issues/{id}/remediation |\n| ASM-001  | 发布资产到目录    | 发布   | 资产目录与市场  | POST   | /api/v1/assets/{id}/publish             |\n| CAT-001  | 查询资产目录     | 查询   | 资产目录与市场  | GET    | /api/v1/catalog                         |\n| API-001  | 发布API到网关   | 发布   | API管理    | POST   | /api/v1/apis/{id}/publish               |\n| API-002  | 查询API调用日志  | 查询   | API管理    | GET    | /api/v1/apis/{id}/logs                  |\n| TAG-001  | 绑定资产标签     | 更新   | 资产标签与分类  | POST   | /api/v1/assets/{id}/tags                |\n| MOD-001  | 创建模型版本     | 创建   | 模型与主题域   | POST   | /api/v1/models/{id}/versions            |\n| DASH-001 | 查询仪表盘指标    | 查询   | 仪表盘与资产地图 | GET    | /api/v1/metrics/dashboard               |\n| SEC-001  | 查询当前用户信息   | 查询   | 治理与合规    | GET    | /api/v1/auth/me                         |\n| SEC-002  | 评估权限策略     | 执行   | 治理与合规    | POST   | /api/v1/permissions/evaluate            |\n\n---\n\n### 5.3 接口详细说明\n\n#### MET-001 查询元数据实体列表\n\n- 接口说明： \n  - 功能模块归属：元数据管理\n  - 核心业务逻辑：按条件检索元数据实体，支持分页、排序与过滤。\n  - 系统级作用：提供统一的资产发现入口，为后续详情、血缘、版本操作提供基础。\n  - 使用场景说明：元数据目录页面检索、治理任务选择对象、运营看板汇总。\n- 接口端点： \n  - URL：/api/v1/metadata/entities\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数： \n\n  | 参数名称     | 数据类型   | 必填 | 默认值       | 取值范围                     | 示例                           |\n  |----------|--------|----|-----------|--------------------------|------------------------------|\n  | query    | string | 否  | \"\"        | 1-200字符                  | name:customer AND type:table |\n  | type     | string | 否  | all       | table/view/job/domain    | table                        |\n  | sourceId | string | 否  | \\-         | 任意合法ID                   | src_001                      |\n  | page     | number | 否  | 1         | \\>=1                      | 1                            |\n  | size     | number | 否  | 20        | 1-100                    | 20                           |\n  | sort     | string | 否  | updatedAt | name/createdAt/updatedAt | name                         |\n  | order    | string | 否  | desc      | asc/desc                 | asc                          |\n- 成功响应：200 OK \n  - JSON：{ \"items\": [{ \"id\": \"md_001\", \"name\": \"customer\", \"type\": \"table\", \"sourceId\": \"src_001\", \"createdAt\": \"2025-10-01T10:00:00Z\", \"updatedAt\": \"2025-10-08T12:00:00Z\" }], \"page\": 1, \"size\": 20, \"total\": 135 }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"size must be between 1 and 100\", \"requestId\": \"...\", \"retryable\": false }\n  - 401 Unauthorized：{ \"code\": \"UNAUTHORIZED\", \"message\": \"invalid token\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：检查分页与过滤参数；客户端提示并修正后重试。\n  - UNAUTHORIZED：引导重新登录或刷新令牌；不建议自动重试。\n\n#### MET-002 获取元数据实体详情\n\n- 接口说明： \n  - 功能模块归属：元数据管理\n  - 核心业务逻辑：根据ID返回实体的技术/业务属性与关联关系摘要。\n  - 系统级作用：为详情页与后续操作（血缘、版本、变更）提供数据基础。\n  - 使用场景说明：详情页、治理与分析任务上下文。\n- 接口端点： \n  - URL：/api/v1/metadata/entities/{id}\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：路径变量 \n\n  | 参数名称 | 数据类型   | 必填 | 默认值 | 取值范围 | 示例     |\n  |------|--------|----|-----|------|--------|\n  | id   | string | 是  | \\-   | 合法ID | md_001 |\n- 成功响应：200 OK \n  - JSON：{ \"id\": \"md_001\", \"name\": \"customer\", \"type\": \"table\", \"schema\": { \"columns\": [{\"name\":\"id\",\"type\":\"string\"}] }, \"business\": { \"domain\": \"客户域\" }, \"relations\": { \"upstream\": [\"src_001\"], \"downstream\": [\"dw_321\"] }, \"createdAt\": \"...\", \"updatedAt\": \"...\" }\n- 错误响应： \n  - 404 Not Found：{ \"code\": \"NOT_FOUND\", \"message\": \"metadata entity not found\" }\n- 错误码及处理： \n  - NOT_FOUND：提示资源不存在或已删除；客户端可引导返回列表。\n\n#### MET-003 创建元数据实体\n\n- 接口说明： \n  - 功能模块归属：元数据管理\n  - 核心业务逻辑：登记新元数据实体，写入技术/业务属性与初始关系。\n  - 系统级作用：支持手工登记与自动采集的补录；作为治理入口。\n  - 使用场景说明：人工登记、第三方接入脚本。\n- 接口端点： \n  - URL：/api/v1/metadata/entities\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body）： \n\n  | 参数名称     | 数据类型   | 必填 | 默认值 | 取值范围                  | 示例                                          |\n  |----------|--------|----|-----|-----------------------|---------------------------------------------|\n  | name     | string | 是  | \\-   | 1-100字符               | customer                                    |\n  | type     | string | 是  | \\-   | table/view/job/domain | table                                       |\n  | sourceId | string | 否  | \\-   | 合法ID                  | src_001                                     |\n  | schema   | object | 否  | {}  | JSON对象                | {\"columns\":[{\"name\":\"id\",\"type\":\"string\"}]} |\n  | business | object | 否  | {}  | JSON对象                | {\"domain\":\"客户域\"}                            |\n- 成功响应：201 Created \n  - JSON：{ \"id\": \"md_789\", \"name\": \"customer\", \"type\": \"table\", \"sourceId\": \"src_001\", \"createdAt\": \"...\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"name already exists in source\" }\n- 错误码及处理： \n  - CONFLICT：提示命名冲突；客户端建议修改名称或来源后重试。\n\n#### MET-004 查询数据血缘\n\n- 接口说明： \n  - 功能模块归属：元数据管理\n  - 核心业务逻辑：返回指定实体的血缘图（节点与边）。\n  - 系统级作用：用于可视化溯源与影响分析。\n  - 使用场景说明：血缘视图、变更影响分析。\n- 接口端点： \n  - URL：/api/v1/metadata/lineage/{id}\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：路径+查询 \n\n  | 参数名称      | 数据类型   | 必填 | 默认值  | 取值范围                     | 示例     |\n  |-----------|--------|----|------|--------------------------|--------|\n  | id        | string | 是  | \\-    | 合法ID                     | md_001 |\n  | depth     | number | 否  | 3    | 1-6                      | 3      |\n  | direction | string | 否  | both | upstream/downstream/both | both   |\n- 成功响应：200 OK \n  - JSON：{ \"nodes\": [{\"id\":\"md_001\",\"label\":\"customer\"}], \"edges\": [{\"from\":\"md_001\",\"to\":\"dw_321\",\"type\":\"ETL\"}] }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"depth out of range\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：提示参数纠正；修正后重试。\n\n#### STD-001 创建标准条目\n\n- 接口说明： \n  - 功能模块归属：数据标准管理\n  - 核心业务逻辑：创建命名/编码/元素标准条目并版本化。\n  - 系统级作用：作为标准治理的基础实体。\n  - 使用场景说明：标准目录维护、治理项目初始化。\n- 接口端点： \n  - URL：/api/v1/standards/items\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body）： \n\n  | 参数名称        | 数据类型   | 必填 | 默认值    | 取值范围                  | 示例             |\n  |-------------|--------|----|--------|-----------------------|----------------|\n  | code        | string | 是  | \\-      | 1-50字符                | STD_NAMING_001 |\n  | name        | string | 是  | \\-      | 1-100字符               | 表命名规范          |\n  | category    | string | 是  | \\-      | naming/codes/elements | naming         |\n  | description | string | 否  | \"\"     | 0-500字符               | \"统一表命名规则\"      |\n  | version     | string | 否  | \"v1.0\" | 1-20字符                | v1.0           |\n- 成功响应：201 Created \n  - JSON：{ \"id\": \"std_001\", \"code\": \"STD_NAMING_001\", \"name\": \"表命名规范\", \"category\": \"naming\", \"version\": \"v1.0\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"standard code already exists\" }\n- 错误码及处理： \n  - CONFLICT：提醒更换code或版本；修正后重试。\n\n#### STD-002 查询标准映射规则列表\n\n- 接口说明： \n  - 功能模块归属：数据标准管理\n  - 核心业务逻辑：检索标准与数据源之间的映射规则。\n  - 系统级作用：为校验执行与度量提供规则依据。\n  - 使用场景说明：标准映射页面、执行计划配置。\n- 接口端点： \n  - URL：/api/v1/standards/mappings\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数： \n\n  | 参数名称       | 数据类型   | 必填 | 默认值 | 取值范围  | 示例      |\n  |------------|--------|----|-----|-------|---------|\n  | standardId | string | 否  | \\-   | 合法ID  | std_001 |\n  | sourceId   | string | 否  | \\-   | 合法ID  | src_001 |\n  | page       | number | 否  | 1   | \\>=1   | 1       |\n  | size       | number | 否  | 20  | 1-100 | 20      |\n- 成功响应：200 OK \n  - JSON：{ \"items\": [{ \"id\": \"map_001\", \"standardId\": \"std_001\", \"sourceId\": \"src_001\", \"rule\": \"table_name -> naming\" }], \"page\": 1, \"size\": 20, \"total\": 45 }\n- 错误响应： \n  - 401 Unauthorized：{ \"code\": \"UNAUTHORIZED\", \"message\": \"invalid token\" }\n- 错误码及处理： \n  - UNAUTHORIZED：引导登录；不可自动重试。\n\n#### QLT-001 创建质量检测任务\n\n- 接口说明： \n  - 功能模块归属：数据质量治理\n  - 核心业务逻辑：创建/触发质量检测任务，支持立即执行或定时。\n  - 系统级作用：质量治理执行入口，产出报表与工单。\n  - 使用场景说明：规则页面发起执行、调度编排。\n- 接口端点： \n  - URL：/api/v1/quality/tasks\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body）： \n\n  | 参数名称         | 数据类型          | 必填 | 默认值  | 取值范围       | 示例                  |\n  |--------------|---------------|----|------|------------|---------------------|\n  | name         | string        | 是  | \\-    | 1-100字符    | \"客户数据完整性检测\"         |\n  | ruleIds      | array<string> | 是  | \\-    | 非空数组       | [\"qr_001\",\"qr_002\"] |\n  | scheduleCron | string        | 否  | \"\"   | Cron表达式    | \"0 0 * * *\"         |\n  | immediate    | boolean       | 否  | true | true/false | true                |\n- 成功响应：202 Accepted \n  - JSON：{ \"taskId\": \"qt_001\", \"status\": \"queued\" }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"ruleIds must not be empty\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：提示修正请求体；重试生效。\n\n#### QLT-002 获取质量检测报表\n\n- 接口说明： \n  - 功能模块归属：数据质量治理\n  - 核心业务逻辑：返回指定任务的执行状态与结果摘要。\n  - 系统级作用：供报表展示与治理决策使用。\n  - 使用场景说明：报表页面、仪表盘聚合。\n- 接口端点： \n  - URL：/api/v1/quality/reports/{taskId}\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：路径+查询 \n\n  | 参数名称              | 数据类型    | 必填 | 默认值   | 取值范围       | 示例     |\n  |-------------------|---------|----|-------|------------|--------|\n  | taskId            | string  | 是  | \\-     | 合法ID       | qt_001 |\n  | includeViolations | boolean | 否  | false | true/false | true   |\n- 成功响应：200 OK \n  - JSON：{ \"taskId\": \"qt_001\", \"status\": \"done\", \"summary\": { \"rules\": 2, \"violations\": 5 }, \"violations\": [{\"ruleId\":\"qr_001\",\"count\":3}] }\n- 错误响应： \n  - 404 Not Found：{ \"code\": \"NOT_FOUND\", \"message\": \"report not found\" }\n- 错误码及处理： \n  - NOT_FOUND：任务尚未完成或不存在；提示稍后刷新。\n\n#### QLT-003 创建问题整改动作\n\n- 接口说明： \n  - 功能模块归属：数据质量治理\n  - 核心业务逻辑：为指定问题创建整改任务并进入闭环流程。\n  - 系统级作用：闭环治理入口，串联整改与验证。\n  - 使用场景说明：工单页面发起整改。\n- 接口端点： \n  - URL：/api/v1/quality/issues/{id}/remediation\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称    | 数据类型   | 必填 | 默认值 | 取值范围      | 示例           |\n  |---------|--------|----|-----|-----------|--------------|\n  | id      | string | 是  | \\-   | 合法ID      | iq_001       |\n  | action  | string | 是  | \\-   | 1-200字符   | \"补齐缺失字段\"     |\n  | owner   | string | 是  | \\-   | 用户ID/名称   | \"u_123\"      |\n  | dueDate | string | 否  | \\-   | ISO8601日期 | \"2025-10-20\" |\n- 成功响应：201 Created \n  - JSON：{ \"issueId\": \"iq_001\", \"remediationId\": \"rm_777\", \"status\": \"in_progress\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"issue already in remediation\" }\n- 错误码及处理： \n  - CONFLICT：提示当前进度；避免重复提交。\n\n#### ASM-001 发布资产到目录\n\n- 接口说明： \n  - 功能模块归属：资产目录与市场\n  - 核心业务逻辑：将资产上架到目录，经过审核后发布可检索。\n  - 系统级作用：资产服务化入口，联动目录与订阅。\n  - 使用场景说明：资产上架审核通过后发起发布。\n- 接口端点： \n  - URL：/api/v1/assets/{id}/publish\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称       | 数据类型          | 必填 | 默认值      | 取值范围            | 示例            |\n  |------------|---------------|----|----------|-----------------|---------------|\n  | id         | string        | 是  | \\-        | 合法ID            | asset_001     |\n  | visibility | string        | 否  | internal | internal/public | public        |\n  | categories | array<string> | 否  | \\[\\]       | 分类ID数组          | [\"cat_sales\"] |\n- 成功响应：201 Created \n  - JSON：{ \"catalogId\": \"cat_001\", \"assetId\": \"asset_001\", \"status\": \"published\" }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"asset missing required metadata\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：提示完善元数据后重试。\n\n#### CAT-001 查询资产目录\n\n- 接口说明： \n  - 功能模块归属：资产目录与市场\n  - 核心业务逻辑：基于关键词、标签、分类检索目录条目。\n  - 系统级作用：资产发现与订阅入口。\n  - 使用场景说明：目录页面检索、订阅决策。\n- 接口端点： \n  - URL：/api/v1/catalog\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数： \n\n  | 参数名称     | 数据类型          | 必填 | 默认值 | 取值范围    | 示例          |\n  |----------|---------------|----|-----|---------|-------------|\n  | q        | string        | 否  | \"\"  | 0-200字符 | \"客户\"        |\n  | tags     | array<string> | 否  | \\[\\]  | 标签ID数组  | [\"t_vip\"]   |\n  | category | string        | 否  | \\-   | 分类ID    | \"cat_sales\" |\n  | page     | number        | 否  | 1   | \\>=1     | 1           |\n  | size     | number        | 否  | 20  | 1-100   | 20          |\n- 成功响应：200 OK \n  - JSON：{ \"items\": [{ \"catalogId\": \"cat_001\", \"assetId\": \"asset_001\", \"name\": \"客户画像\" }], \"page\": 1, \"size\": 20, \"total\": 12 }\n- 错误响应： \n  - 500 Internal Server Error：{ \"code\": \"INTERNAL_ERROR\", \"message\": \"search engine unavailable\" }\n- 错误码及处理： \n  - INTERNAL_ERROR：稍后重试；客户端可降级提示或回退本地缓存。\n\n#### API-001 发布API到网关\n\n- 接口说明： \n  - 功能模块归属：API管理\n  - 核心业务逻辑：根据API定义下发路由与策略至网关。\n  - 系统级作用：统一接入与治理的关键环节。\n  - 使用场景说明：API详情页发布操作，CI/CD自动发布。\n- 接口端点： \n  - URL：/api/v1/apis/{id}/publish\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称      | 数据类型   | 必填 | 默认值 | 取值范围          | 示例      |\n  |-----------|--------|----|-----|---------------|---------|\n  | id        | string | 是  | \\-   | 合法ID          | api_001 |\n  | env       | string | 是  | \\-   | dev/test/prod | prod    |\n  | rateLimit | number | 否  | 0   | \\>=0（0表示不限制）   | 1000    |\n- 成功响应：200 OK \n  - JSON：{ \"apiId\": \"api_001\", \"env\": \"prod\", \"status\": \"published\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"route conflict in gateway\" }\n- 错误码及处理： \n  - CONFLICT：调整路由或策略后重试；避免重复发布。\n\n#### API-002 查询API调用日志\n\n- 接口说明： \n  - 功能模块归属：API管理\n  - 核心业务逻辑：按时间范围与过滤条件返回调用日志。\n  - 系统级作用：可观测性与审计基础数据。\n  - 使用场景说明：日志页面、故障排查、审计。\n- 接口端点： \n  - URL：/api/v1/apis/{id}/logs\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：路径+查询 \n\n  | 参数名称   | 数据类型   | 必填 | 默认值 | 取值范围      | 示例                     |\n  |--------|--------|----|-----|-----------|------------------------|\n  | id     | string | 是  | \\-   | 合法ID      | api_001                |\n  | from   | string | 否  | \\-   | ISO8601时间 | \"2025-10-08T00:00:00Z\" |\n  | to     | string | 否  | \\-   | ISO8601时间 | \"2025-10-09T00:00:00Z\" |\n  | status | number | 否  | \\-   | 100-599   | 200                    |\n  | limit  | number | 否  | 100 | 1-1000    | 500                    |\n- 成功响应：200 OK \n  - JSON：{ \"items\": [{ \"ts\": \"2025-10-08T10:00:00Z\", \"status\": 200, \"latencyMs\": 45, \"path\": \"/customer/{id}\" }], \"count\": 500 }\n- 错误响应： \n  - 403 Forbidden：{ \"code\": \"FORBIDDEN\", \"message\": \"insufficient privilege\" }\n- 错误码及处理： \n  - FORBIDDEN：提示权限不足；引导申请权限或联系管理员。\n\n#### TAG-001 绑定资产标签\n\n- 接口说明： \n  - 功能模块归属：资产标签与分类\n  - 核心业务逻辑：为指定资产批量绑定标签。\n  - 系统级作用：支撑检索与运营策略。\n  - 使用场景说明：标签维护页面、资产运营。\n- 接口端点： \n  - URL：/api/v1/assets/{id}/tags\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称 | 数据类型          | 必填 | 默认值 | 取值范围 | 示例                      |\n  |------|---------------|----|-----|------|-------------------------|\n  | id   | string        | 是  | \\-   | 合法ID | asset_001               |\n  | tags | array<string> | 是  | \\-   | 非空数组 | [\"t_vip\",\"t_sensitive\"] |\n- 成功响应：200 OK \n  - JSON：{ \"assetId\": \"asset_001\", \"boundTags\": [\"t_vip\",\"t_sensitive\"] }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"tags must not be empty\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：修正请求后重试。\n\n#### MOD-001 创建模型版本\n\n- 接口说明： \n  - 功能模块归属：模型与主题域\n  - 核心业务逻辑：为指定模型创建新版本并记录变更摘要。\n  - 系统级作用：模型版本化与一致性治理。\n  - 使用场景说明：模型编辑后的版本发布。\n- 接口端点： \n  - URL：/api/v1/models/{id}/versions\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body+路径）： \n\n  | 参数名称          | 数据类型   | 必填 | 默认值 | 取值范围    | 示例                   |\n  |---------------|--------|----|-----|---------|----------------------|\n  | id            | string | 是  | \\-   | 合法ID    | model_001            |\n  | versionName   | string | 是  | \\-   | 1-50字符  | \"v1.1\"               |\n  | changeSummary | string | 否  | \"\"  | 0-500字符 | \"新增字段customer_level\" |\n- 成功响应：201 Created \n  - JSON：{ \"modelId\": \"model_001\", \"versionId\": \"ver_002\", \"versionName\": \"v1.1\" }\n- 错误响应： \n  - 409 Conflict：{ \"code\": \"CONFLICT\", \"message\": \"versionName already exists\" }\n- 错误码及处理： \n  - CONFLICT：调整版本名后重试。\n\n#### DASH-001 查询仪表盘指标\n\n- 接口说明： \n  - 功能模块归属：仪表盘与资产地图\n  - 核心业务逻辑：返回治理与运营指标的聚合结果。\n  - 系统级作用：管理看板与趋势分析数据源。\n  - 使用场景说明：首页仪表盘、运营看板加载。\n- 接口端点： \n  - URL：/api/v1/metrics/dashboard\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数： \n\n  | 参数名称           | 数据类型    | 必填 | 默认值   | 取值范围       | 示例   |\n  |----------------|---------|----|-------|------------|------|\n  | range          | string  | 否  | 7d    | 1d/7d/30d  | 30d  |\n  | includeDetails | boolean | 否  | false | true/false | true |\n- 成功响应：200 OK \n  - JSON：{ \"kpis\": { \"assets\": 1200, \"standards\": 80, \"qualityViolations\": 25 }, \"trends\": [{\"metric\":\"assets\",\"points\":[...] }] }\n- 错误响应： \n  - 503 Service Unavailable：{ \"code\": \"SERVICE_UNAVAILABLE\", \"message\": \"metrics backend busy\" }\n- 错误码及处理： \n  - SERVICE_UNAVAILABLE：建议稍后重试；客户端可做退避（指数回退）。\n\n#### SEC-001 查询当前用户信息\n\n- 接口说明： \n  - 功能模块归属：治理与合规\n  - 核心业务逻辑：返回当前登录用户基本信息与角色。\n  - 系统级作用：前端权限控制与审计上下文。\n  - 使用场景说明：登录后初始化、权限判断。\n- 接口端点： \n  - URL：/api/v1/auth/me\n  - 方法：GET\n  - 版本：/v1/\n- 请求参数：无\n- 成功响应：200 OK \n  - JSON：{ \"userId\": \"u_123\", \"name\": \"Alice\", \"roles\": [\"admin\",\"viewer\"], \"permissions\": [\"asset.read\",\"api.publish\"] }\n- 错误响应： \n  - 401 Unauthorized：{ \"code\": \"UNAUTHORIZED\", \"message\": \"token expired\" }\n- 错误码及处理： \n  - UNAUTHORIZED：刷新令牌或重新登录。\n\n#### SEC-002 评估权限策略\n\n- 接口说明： \n  - 功能模块归属：治理与合规\n  - 核心业务逻辑：对指定资源与动作进行策略评估，返回允许/拒绝与原因。\n  - 系统级作用：后端统一鉴权与解释性审计。\n  - 使用场景说明：敏感操作前置校验。\n- 接口端点： \n  - URL：/api/v1/permissions/evaluate\n  - 方法：POST\n  - 版本：/v1/\n- 请求参数（Body）： \n\n  | 参数名称     | 数据类型   | 必填 | 默认值  | 取值范围    | 示例                                   |\n  |----------|--------|----|------|---------|--------------------------------------|\n  | resource | string | 是  | \\-    | 1-100字符 | \"asset\"                              |\n  | action   | string | 是  | \\-    | 1-50字符  | \"publish\"                            |\n  | subject  | object | 否  | 当前用户 | JSON对象  | {\"userId\":\"u_123\",\"roles\":[\"admin\"]} |\n- 成功响应：200 OK \n  - JSON：{ \"decision\": \"allow\", \"reasons\": [\"role:admin\"], \"policyId\": \"pol_777\" }\n- 错误响应： \n  - 400 Bad Request：{ \"code\": \"INVALID_ARGUMENT\", \"message\": \"resource/action required\" }\n- 错误码及处理： \n  - INVALID_ARGUMENT：修正参数后重试。\n\n---\n\n### 5.4 标准错误码与处理建议\n\n| 错误码                 | HTTP状态码 | 错误信息示例          | 客户端处理建议      | 重试机制    |\n|---------------------|---------|-----------------|--------------|---------|\n| INVALID_ARGUMENT    | 400     | 参数非法或超出范围       | 提示用户修正参数     | 否，修正后重试 |\n| UNAUTHORIZED        | 401     | 认证失败或令牌过期       | 刷新令牌/重新登录    | 否       |\n| FORBIDDEN           | 403     | 权限不足            | 引导申请权限或联系管理员 | 否       |\n| NOT_FOUND           | 404     | 资源不存在           | 引导返回列表或刷新数据  | 否       |\n| CONFLICT            | 409     | 资源冲突（命名/版本/路由等） | 调整后重试        | 否       |\n| RATE_LIMITED        | 429     | 触发限流            | 等待后重试，建议退避   | 是（指数退避） |\n| INTERNAL_ERROR      | 500     | 服务器内部错误         | 友好提示，稍后重试    | 是       |\n| SERVICE_UNAVAILABLE | 503     | 服务不可用/后端繁忙      | 退避重试或降级显示    | 是       |\n| TIMEOUT             | 504     | 上游超时            | 稍后重试，优化请求    | 是       |\n\n- 统一错误响应结构： \n  - { \"code\": \"...\", \"message\": \"...\", \"details\": { ... }, \"requestId\": \"...\", \"retryable\": true|false }\n- 客户端重试建议： \n  - 对429/500/503/504实施指数回退（如base=500ms, factor=2, max=5次）。\n  - 对400/401/403/404不建议自动重试，需用户/权限/资源层面修正。\n\n---\n\n注：后续若需扩展PATCH端点、批量操作（/bulk）或导出下载（/export），应遵循上述RESTful与错误码规范，并在接口清单与详细说明中补充完整要素。\n\n## 6. 数据库设计\n\n### 6.1 设计概述\n\n- 数据库类型选型：\n  - MySQL（关系型事务库，核心业务库） \n    - 技术理由：支持ACID事务（InnoDB）、严格的主外键与约束、丰富索引（BTREE、FULLTEXT、SPATIAL）、分区与复制能力（主从/组复制）、原生JSON数据类型支持，适合多类型数据的统一治理与强一致写入场景。\n    - 应用场景：资产目录、元数据字典、标准规范、质量规则与任务、API发布与订阅、权限与审计等核心业务数据持久化。\n  - Neo4j（图数据库，关系/血缘管理） \n    - 技术理由：原生图存储与遍历，Cypher查询语义友好，适合复杂多跳的实体关系、血缘追踪与影响分析；支持关系版本化与属性化维护。\n    - 应用场景：元数据实体之间的血缘关系（上游/下游）、资产到模型/API的依赖关系、术语关联网络等。\n  - Elasticsearch（全文检索与聚合分析） \n    - 技术理由：倒排索引、中文分词、同义词与拼写纠错，支持聚合（terms、date_histogram）与排序，高并发查询性能优良。\n    - 应用场景：资产/标准/术语/API的统一搜索、目录筛选、标签/分类聚合、文档说明检索等。\n  - Redis（缓存与限流） \n    - 技术理由：内存Key-Value、高性能、支持TTL、布隆过滤器、发布/订阅与分布式锁；适合热数据与令牌/会话状态。\n    - 应用场景：鉴权缓存、热门资产/API缓存、速率限制计数、质量任务队列调度辅助等。\n  - MinIO/S3（对象存储） \n    - 技术理由：兼容S3协议，适合大对象与文件；支持版本控制与分层存储，低成本扩展。\n    - 应用场景：数据样例、数据字典附件、标准规范附件、API规格文档（OpenAPI/AsyncAPI）、模型文件与评估报告等。\n- 核心数据库设计目标：\n  - 数据完整性： \n    - 全面主键/外键约束、唯一性约束、非空约束与检查约束；通过事务确保跨表写入一致性。\n    - 版本化与审计字段（created_at/updated_at/created_by/updated_by），可追溯。\n  - 安全性： \n    - 行级/列级访问控制（资源+动作），最小权限原则；敏感字段加密/脱敏。\n    - 审计日志与请求链路ID，满足合规要求。\n  - 性能与可扩展性： \n    - 热路径索引设计（前缀、覆盖索引）、分区（时间/组织维度）、读写分离（必要时）。\n    - 缓存与异步化（Redis）、检索侧加速（Elasticsearch）。\n  - 大数据处理能力： \n    - 大表分区/归档策略、批量导入/导出流水线、异构索引构建与回填。\n    - 线索数据（日志、质量事件）按时间分区与生命周期管理。\n- 设计原则：\n  - 数据分层与域划分： \n    - 以“元数据/治理/交付/安全”四域划分业务库与对象存储；不同域内表按功能模块组织，降低耦合。\n  - 规范化与适度反规范化： \n    - 以第三范式为基准；对高频查询的聚合维度适度冗余（如资产统计字段、标签计数），同时保留来源事实。\n    - 利用JSONB承载可扩展属性，明确字段字典与校验规则。\n  - 事务与一致性管理： \n    - 单库内强一致交易；跨系统通过“Outbox事件+幂等消费+重试”的最终一致性模式。\n    - 写入接口要求幂等键（自然键或业务键），避免重复。\n  - 性能优化策略： \n    - 索引策略（选择性、覆盖度、维护成本）、合理分页与游标、批量接口（批处理大小与事务边界）。\n    - 观测性：慢查询采集、执行计划分析、容量与热点监控，定期优化。\n\n### 6.2 数据模型\n\n- 概念ER图：\n  - 见：![数据资产平台概念ER图](./images/er-conceptual.svg)\n  - 说明：该图将实体分为“来源与元数据”“标准/质量/模型”“资产/API/市场”“安全与权限”四类，展示主键、关键属性与主要关系。\n- 核心实体与关系（文本说明与约束）：\n  1. DataSource（数据源）\n  - 主键：id（UUID）\n  - 关键字段：code（唯一）、name、type（db/file/api）、conn_profile（JSONB）、owner_org、status\n  - 约束：code唯一；type枚举；状态校验；与资产/元数据建立外键引用。\n  - 用途：描述来源系统与连接信息，资产与元数据均可归属到数据源。\n  1. MetadataEntity（元数据实体）\n  - 主键：id（UUID）\n  - 外键：data_source_id → DataSource.id\n  - 字段：namespace、name、entity_type（table/view/file/api）、schema_json（JSONB）、version、description\n  - 约束：namespace+name唯一；entity_type枚举；版本递增。\n  - 用途：统一抽象物理/逻辑对象，供血缘、标准、术语链接。\n  1. BusinessGlossaryTerm（术语）\n  - 主键：id（UUID）\n  - 字段：term、definition、synonyms（JSONB）、owner_org、status\n  - 关系（N:N）：与MetadataEntity通过GlossaryTermLink（term_id, entity_id）关联。\n  - 约束：term唯一；状态枚举（draft/published/retired）。\n  - 用途：统一业务术语定义与实体映射，提升认知一致性。\n  1. LineageEdge（血缘边）\n  - 主键：id（UUID）或复合键（from_entity_id, to_entity_id, relation_type, version）\n  - 字段：from_entity_id → MetadataEntity.id，to_entity_id → MetadataEntity.id，relation_type（derive/consume/export），version，properties（JSONB）\n  - 约束：防止自环；版本与关系类型校验。\n  - 用途：描述上游/下游依赖，支持影响分析与可视化。\n  1. StandardItem（标准条目）\n  - 主键：id（UUID）\n  - 外键：entity_id → MetadataEntity.id（可选）\n  - 字段：code（唯一）、name、category（naming/schema/security/quality）、content（JSONB）、effective_from、effective_to\n  - 约束：时间有效性；category枚举；code唯一。\n  - 用途：定义治理标准（命名、模式、安全、质量等）。\n  1. ValidationRule（质量规则）\n  - 主键：id（UUID）\n  - 可引用：standard_item_id → StandardItem.id（可选）\n  - 字段：name、rule_type（not_null/range/regex/duplicate/custom）、expression（JSONB/SQL）、severity（info/warn/error）\n  - 用途：对资产或实体实施数据质量校验。\n  1. QualityTask（质量任务）\n  - 主键：id（UUID）\n  - 外键：asset_id → Asset.id（或entity_id → MetadataEntity.id）、rule_id → ValidationRule.id\n  - 字段：schedule（cron/once）、status（pending/running/succeeded/failed）、last_run_at、stats（JSONB）\n  - 用途：规则的调度与执行记录。\n  1. QualityIssue（质量问题）\n  - 主键：id（UUID）\n  - 外键：task_id → QualityTask.id\n  - 字段：occurred_at、sample_ref（对象存储Key）、details（JSONB）、status（open/triaged/resolved/ignored）\n  - 用途：保存质量异常与处置过程。\n  1. Model（数据/算法模型）\n  - 主键：id（UUID）\n  - 关系：input_asset_id → Asset.id（可选），或input_entity_id → MetadataEntity.id\n  - 字段：name、type（feature/etl/ml）、owner_org、description\n  - 用途：沉淀数据加工/机器学习等可复用模型。\n  1. ModelVersion（模型版本）\n  - 主键：id（UUID）\n  - 外键：model_id → Model.id\n  - 字段：version（语义化版本）、artifacts_ref（对象存储Key）、metrics（JSONB）、status\n  - 用途：版本化管理与效果评估。\n  1. Asset（数据资产）\n  - 主键：id（UUID）\n  - 外键：data_source_id → DataSource.id，category_id → AssetCategory.id\n  - 字段：code（唯一）、name、type（dataset/table/view/file/api）、schema_json（JSONB）、owner_org、lifecycle（draft/published/retired）、stats（JSONB）\n  - 关系： \n    - N:N 标签：通过AssetTag（asset_id, tag_id）与Tag关联。\n    - 1:N API：一个资产可暴露多个API。\n    - N:1 元数据：可映射到具体MetadataEntity。\n  - 用途：统一对可交付的数据产品进行编目与治理。\n  1. AssetCategory（资产分类）\n  - 主键：id（UUID）\n  - 字段：code（唯一）、name、parent_id（自关联）、path（冗余层级路径）\n  - 用途：目录树组织与权限/订阅范围控制。\n  1. TagGroup（标签组）与 Tag（标签）\n  - TagGroup主键：id（UUID）；字段：code、name、scope（asset/api/metadata）\n  - Tag主键：id（UUID）；外键：group_id → TagGroup.id；字段：code（唯一）、name、color\n  - 用途：主题化管理标签，支持资产/API/实体的多维打标。\n  1. API（服务接口）\n  - 主键：id（UUID）\n  - 外键：asset_id → Asset.id\n  - 字段：code（唯一）、name、version、spec_ref（对象存储Key，OpenAPI/GraphQL）、rate_limit、auth_type、status\n  - 用途：对外提供数据服务能力，支持发布/变更/下架。\n  1. APILog（接口访问日志）\n  - 主键：id（UUID）或复合键（api_id, occurred_at, request_id）\n  - 外键：api_id → API.id\n  - 字段：occurred_at、latency_ms、status_code、client_id、error_code、extra（JSONB）\n  - 用途：审计与性能分析，作为大表按时间分区。\n  1. MarketListing（数据市场上架）\n  - 主键：id（UUID）\n  - 外键：asset_id → Asset.id\n  - 字段：title、summary、pricing（JSONB）、visibility（public/internal/restricted）、status（draft/review/published/retired）\n  - 用途：资产对外展示与交易配置。\n  1. Subscription（订阅）\n  - 主键：id（UUID）\n  - 外键：listing_id → MarketListing.id，user_id → User.id\n  - 字段：subs_type（trial/purchase/quota）、quota、expired_at、status\n  - 用途：用户对上架资产的订阅与额度管理。\n  1. User（用户）、Role（角色）、Permission（权限）\n  - User主键：id（UUID）；字段：username（唯一）、display_name、email、org、status\n  - Role主键：id（UUID）；字段：code（唯一）、name、scope\n  - Permission主键：id（UUID）；字段：code（唯一）、name、resource、action\n  - 关系（N:N）： \n    - UserRole（user_id, role_id）\n    - RolePermission（role_id, permission_id）\n  - 用途：统一的RBAC权限与资源动作控制。\n- 主要关系汇总（与ER图一致）：\n  - DataSource 1:N MetadataEntity，DataSource 1:N Asset。\n  - MetadataEntity N:N BusinessGlossaryTerm（GlossaryTermLink）。\n  - MetadataEntity 通过 LineageEdge 形成有向血缘图（同库或Neo4j存储）。\n  - Asset 1:N API，Asset N:N Tag（AssetTag），Asset N:1 AssetCategory。\n  - API 1:N APILog；MarketListing N:1 Asset；Subscription N:1 MarketListing 与 N:1 User。\n  - User N:N Role（UserRole），Role N:N Permission（RolePermission）。\n- 一致性与约束策略：\n  - 所有外键默认RESTRICT删除，重要对象采用软删除（deleted=false），避免级联误删；日志类按分区与生命周期归档。\n  - 关键自然键（code/term/username）建立唯一索引；高频查询列建立覆盖索引，结合分区提高范围检索性能。\n  - 变更事件（资产发布、API更新、标准生效）通过Outbox事件异步分发到Elasticsearch与缓存层，确保最终一致。\n  - 敏感字段（邮箱、凭据、连接信息）按字段级加密与访问控制，审计日志全量保留。\n\n### 6.3 数据表设计（MySQL）\n\n说明与约定：\n\n- 数据库：MySQL 8.0（InnoDB，utf8mb4）。遵循第三范式（3NF）与键值分离原则，在高频检索场景下适度反范式（如冗余path、聚合统计摘要）。\n- 通用审计字段：id（BIGINT UNSIGNED，自增，PK）、created_at（DATETIME，默认 CURRENT_TIMESTAMP）、updated_at（DATETIME，默认 CURRENT_TIMESTAMP ON UPDATE）、created_by/updated_by（BIGINT UNSIGNED，可空）、is_deleted（TINYINT(1) 默认0）、deleted_at（DATETIME 可空）。为避免冗长，以下表格如无特别说明，均隐含上述审计字段。JSON 用于可变结构（schema/config/extra），并结合必要的覆盖索引保证检索能力。\n\n#### 6.3.1 基础与安全域\n\n表：user（用户）\n\n- 设计意图：承载平台登录与主体信息，username 唯一；password_hash 仅存散列；status 控制启用/禁用。\n\n| 字段名           | 数据类型            | 长度  | 允许为空 | 默认值      | 自增 | 字段注释                      |\n|---------------|-----------------|-----|------|----------|----|---------------------------|\n| id            | BIGINT UNSIGNED | \\-   | 否    | \\-        | 是  | 主键，自增ID                   |\n| username      | VARCHAR         | 64  | 否    | \\-        | 否  | 登录用户名（唯一）                 |\n| password_hash | VARCHAR         | 255 | 否    | \\-        | 否  | 密码哈希                      |\n| display_name  | VARCHAR         | 128 | 是    | NULL     | 否  | 显示名称                      |\n| email         | VARCHAR         | 255 | 是    | NULL     | 否  | 邮箱                        |\n| phone         | VARCHAR         | 32  | 是    | NULL     | 否  | 手机号                       |\n| status        | VARCHAR         | 32  | 否    | 'active' | 否  | 状态：active/locked/disabled |\n| org           | VARCHAR         | 128 | 是    | NULL     | 否  | 所属组织                      |\n| extra         | JSON            | \\-   | 是    | NULL     | 否  | 额外信息（头像、偏好等）              |\n\n表：role（角色）\n\n- 设计意图：系统角色，code 唯一，支持跨模块授权分配。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                |\n|-------------|-----------------|-----|------|------|----|---------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                  |\n| code        | VARCHAR         | 64  | 否    | \\-    | 否  | 角色编码（唯一）            |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 角色名称                |\n| scope       | VARCHAR         | 64  | 是    | NULL | 否  | 作用域（module/project） |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                  |\n\n表：permission（权限）\n\n- 设计意图：以资源+动作构成权限点，便于细粒度控制与审计。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                   |\n|-------------|-----------------|-----|------|------|----|------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                     |\n| code        | VARCHAR         | 64  | 否    | \\-    | 否  | 权限编码（唯一）               |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 权限名称                   |\n| resource    | VARCHAR         | 128 | 否    | \\-    | 否  | 资源标识（模块/接口）            |\n| action      | VARCHAR         | 32  | 否    | \\-    | 否  | 操作（read/write/execute） |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                     |\n\n表：user_role（用户-角色，M:N）\n\n- 设计意图：用户与角色多对多关联，复合唯一避免重复授权。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释             |\n|------------|-----------------|----|------|-------------------|----|------------------|\n| user_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 用户ID（FK→user.id） |\n| role_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 角色ID（FK→role.id） |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间             |\n\n表：role_permission（角色-权限，M:N）\n\n- 设计意图：角色绑定权限，支持按资源维度授权。\n\n| 字段名           | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                   |\n|---------------|-----------------|----|------|-------------------|----|------------------------|\n| role_id       | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 角色ID（FK→role.id）       |\n| permission_id | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 权限ID（FK→permission.id） |\n| created_at    | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                   |\n\n#### 6.3.2 数据源与元数据域\n\n设计对齐与目标\n\n- 严格对齐 <mcfile name=\"PRD-数据资产管理平台.md\" path=\"d:\\\\工作文件\\\\产业大脑\\\\数据资产管理平台\\\\docs\\\\business-design\\\\PRD-数据资产管理平台.md\"></mcfile> 第4.2章（4.2.1 元数据目录、4.2.2 数据源管理、4.2.3 元数据采集），覆盖“采集→登记→索引→检索/展示→变更/版本→血缘”的端到端能力。\n- 设计原则：减少JSON重字段存储的查询开销，采用规范化实体拆分与必要的索引；敏感信息不落库明文，采用密钥引用；面向检索与血缘的高频查询优化（BTREE/FullText/组合索引）。\n\n表：data_source（数据源）\n\n- 设计意图：统一管理数据源的连接/鉴权与运行状态，支撑连接测试与采集任务调度；避免明文凭据存储，采用密钥引用。\n\n| 字段名             | 数据类型            | 长度                                                                                  | 允许为空 | 默认值               | 自增 | 字段注释              |\n|-----------------|-----------------|-------------------------------------------------------------------------------------|------|-------------------|----|-------------------|\n| id              | BIGINT UNSIGNED | \\-                                                                                   | 否    | \\-                 | 是  | 主键                |\n| code            | VARCHAR         | 64                                                                                  | 否    | \\-                 | 否  | 数据源编码（唯一）         |\n| name            | VARCHAR         | 128                                                                                 | 否    | \\-                 | 否  | 数据源名称             |\n| type            | ENUM            | ('mysql','postgres','oracle','sqlserver','mongo','redis','es','hive','kafka','api') | 否    | \\-                 | 否  | 数据源类型             |\n| host            | VARCHAR         | 255                                                                                 | 是    | NULL              | 否  | 主机/地址（API可为空）     |\n| port            | INT UNSIGNED    | \\-                                                                                   | 是    | NULL              | 否  | 端口                |\n| database_name   | VARCHAR         | 128                                                                                 | 是    | NULL              | 否  | 数据库/仓库名           |\n| schema_name     | VARCHAR         | 128                                                                                 | 是    | NULL              | 否  | Schema（可选）        |\n| auth_type       | ENUM            | ('username_password','token','conn_string','key_ref')                               | 否    | \\-                 | 否  | 认证方式              |\n| secret_ref      | VARCHAR         | 255                                                                                 | 是    | NULL              | 否  | 密钥引用（外部秘密管理ID）    |\n| conn_config     | JSON            | \\-                                                                                   | 是    | NULL              | 否  | 连接配置（SSL/参数），脱敏展示 |\n| owner           | VARCHAR         | 128                                                                                 | 是    | NULL              | 否  | 所属业务/团队           |\n| status          | ENUM            | ('active','disabled','error')                                                       | 否    | 'active'          | 否  | 状态                |\n| connectivity    | TINYINT(1)      | \\-                                                                                   | 否    | 0                 | 否  | 可达性（0/1）          |\n| last_connect_at | DATETIME        | \\-                                                                                   | 是    | NULL              | 否  | 最近连接测试时间          |\n| last_sync_at    | DATETIME        | \\-                                                                                   | 是    | NULL              | 否  | 最近采集同步时间          |\n| created_by      | BIGINT UNSIGNED | \\-                                                                                   | 否    | \\-                 | 否  | 创建人（FK→user.id）   |\n| updated_by      | BIGINT UNSIGNED | \\-                                                                                   | 否    | \\-                 | 否  | 更新人（FK→user.id）   |\n| created_at      | DATETIME        | \\-                                                                                   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间              |\n| updated_at      | DATETIME        | \\-                                                                                   | 否    | CURRENT_TIMESTAMP | 否  | 更新时间（ON UPDATE）   |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；组合唯一（type, host, port, database_name, schema_name）可选。\n- 索引建议：type、status、owner、last_sync_at；连接测试/采集任务按 last_sync_at 倒序。\n- 安全约束：不存储明文凭据，secret_ref 仅保存外部密钥系统的引用。\n\n表：data_source_sync_task（数据源采集任务）\n\n- 设计意图：记录元数据采集任务与执行摘要，对齐 PRD 4.2.3 的采集与状态监控。\n\n| 字段名          | 数据类型            | 长度                                       | 允许为空 | 默认值       | 自增 | 字段注释                     |\n|--------------|-----------------|------------------------------------------|------|-----------|----|--------------------------|\n| id           | BIGINT UNSIGNED | \\-                                        | 否    | \\-         | 是  | 主键                       |\n| source_id    | BIGINT UNSIGNED | \\-                                        | 否    | \\-         | 否  | 数据源ID（FK→data_source.id） |\n| task_type    | ENUM            | ('full','incremental','heartbeat')       | 否    | \\-         | 否  | 任务类型                     |\n| status       | ENUM            | ('pending','running','success','failed') | 否    | 'pending' | 否  | 任务状态                     |\n| started_at   | DATETIME        | \\-                                        | 是    | NULL      | 否  | 开始时间                     |\n| finished_at  | DATETIME        | \\-                                        | 是    | NULL      | 否  | 完成时间                     |\n| summary      | JSON            | \\-                                        | 是    | NULL      | 否  | 采集摘要（表/列数量、耗时、错误）        |\n| triggered_by | BIGINT UNSIGNED | \\-                                        | 是    | NULL      | 否  | 触发人（FK→user.id）          |\n\n索引建议：\n\n- source_id+started_at（倒序）；status；task_type。\n\n表：metadata_database（数据库/仓库）\n\n- 设计意图：将“数据库/仓库”实体规范化，减少在 metadata_entity.schema 中的重数据存储，提升检索与过滤效率。\n\n| 字段名         | 数据类型            | 长度                      | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|-------------|-----------------|-------------------------|------|-------------------|----|--------------------------|\n| id          | BIGINT UNSIGNED | \\-                       | 否    | \\-                 | 是  | 主键                       |\n| source_id   | BIGINT UNSIGNED | \\-                       | 否    | \\-                 | 否  | 数据源ID（FK→data_source.id） |\n| name        | VARCHAR         | 128                     | 否    | \\-                 | 否  | 名称                       |\n| full_name   | VARCHAR         | 255                     | 是    | NULL              | 否  | 全名（系统/实例.库）              |\n| description | TEXT            | \\-                       | 是    | NULL              | 否  | 描述                       |\n| charset     | VARCHAR         | 64                      | 是    | NULL              | 否  | 字符集                      |\n| collate     | VARCHAR         | 64                      | 是    | NULL              | 否  | 排序规则                     |\n| status      | ENUM            | ('active','deprecated') | 否    | 'active'          | 否  | 状态                       |\n| created_at  | DATETIME        | \\-                       | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                     |\n| updated_at  | DATETIME        | \\-                       | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                     |\n\n唯一性与约束：\n\n- 复合唯一：source_id+name。\n- 索引建议：source_id、status。\n\n表：metadata_schema（Schema）\n\n- 设计意图：规范化 Schema，支撑“库/Schema/表/列”的层级过滤与目录构建。\n\n| 字段名         | 数据类型            | 长度                      | 允许为空 | 默认值               | 自增 | 字段注释                           |\n|-------------|-----------------|-------------------------|------|-------------------|----|--------------------------------|\n| id          | BIGINT UNSIGNED | \\-                       | 否    | \\-                 | 是  | 主键                             |\n| database_id | BIGINT UNSIGNED | \\-                       | 否    | \\-                 | 否  | 数据库ID（FK→metadata_database.id） |\n| name        | VARCHAR         | 128                     | 否    | \\-                 | 否  | 名称                             |\n| full_name   | VARCHAR         | 255                     | 是    | NULL              | 否  | 全名（库.Schema）                   |\n| description | TEXT            | \\-                       | 是    | NULL              | 否  | 描述                             |\n| status      | ENUM            | ('active','deprecated') | 否    | 'active'          | 否  | 状态                             |\n| created_at  | DATETIME        | \\-                       | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                           |\n| updated_at  | DATETIME        | \\-                       | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                           |\n\n唯一性与约束：\n\n- 复合唯一：database_id+name；索引：database_id、status。\n\n表：metadata_table（数据表/视图）\n\n- 设计意图：表级元数据的规范化实体，支撑列表/详情/比对/血缘与采集的高频查询；分离统计属性与结构属性。\n\n| 字段名                | 数据类型            | 长度                                 | 允许为空 | 默认值               | 自增 | 字段注释                            |\n|--------------------|-----------------|------------------------------------|------|-------------------|----|---------------------------------|\n| id                 | BIGINT UNSIGNED | \\-                                  | 否    | \\-                 | 是  | 主键                              |\n| schema_id          | BIGINT UNSIGNED | \\-                                  | 否    | \\-                 | 否  | SchemaID（FK→metadata_schema.id） |\n| name               | VARCHAR         | 128                                | 否    | \\-                 | 否  | 表/视图名称                          |\n| full_name          | VARCHAR         | 255                                | 是    | NULL              | 否  | 全名（库.Schema.表）                  |\n| table_type         | ENUM            | ('table','view','external')        | 否    | 'table'           | 否  | 类型                              |\n| row_count          | BIGINT UNSIGNED | \\-                                  | 是    | NULL              | 否  | 行数（采集统计）                        |\n| storage_size_bytes | BIGINT UNSIGNED | \\-                                  | 是    | NULL              | 否  | 存储大小（采集统计）                      |\n| last_ddl_time      | DATETIME        | \\-                                  | 是    | NULL              | 否  | 最近DDL时间                         |\n| business_semantic  | TEXT            | \\-                                  | 是    | NULL              | 否  | 业务语义说明                          |\n| lifecycle_status   | ENUM            | ('active','deprecated','archived') | 否    | 'active'          | 否  | 生命周期状态                          |\n| partition_info     | JSON            | \\-                                  | 是    | NULL              | 否  | 分区/分桶信息                         |\n| version_no         | VARCHAR         | 32                                 | 是    | NULL              | 否  | 版本编号（快照）                        |\n| created_at         | DATETIME        | \\-                                  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                            |\n| updated_at         | DATETIME        | \\-                                  | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                            |\n\n唯一性与约束：\n\n- 复合唯一：schema_id+name；索引：table_type、lifecycle_status、last_ddl_time、row_count、storage_size_bytes。\n\n表：metadata_column（字段）\n\n- 设计意图：字段级元数据的规范化实体，支撑详情展示、标准映射与检索筛选；与 PRD 的列表与详情字段一致。\n\n| 字段名              | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                                 |\n|------------------|-----------------|-----|------|-------------------|----|--------------------------------------|\n| id               | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                                   |\n| table_id         | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 表ID（FK→metadata_table.id）            |\n| name             | VARCHAR         | 128 | 否    | \\-                 | 否  | 字段名                                  |\n| data_type        | VARCHAR         | 64  | 否    | \\-                 | 否  | 数据类型                                 |\n| length           | INT UNSIGNED    | \\-   | 是    | NULL              | 否  | 长度（字符串）                              |\n| precision        | INT UNSIGNED    | \\-   | 是    | NULL              | 否  | 精度（数值）                               |\n| nullable         | TINYINT(1)      | \\-   | 否    | 1                 | 否  | 可为空（0/1）                             |\n| is_pk            | TINYINT(1)      | \\-   | 否    | 0                 | 否  | 主键（0/1）                              |\n| is_fk            | TINYINT(1)      | \\-   | 否    | 0                 | 否  | 外键（0/1）                              |\n| default_value    | VARCHAR         | 256 | 是    | NULL              | 否  | 默认值（脱敏展示）                            |\n| comment          | VARCHAR         | 512 | 是    | NULL              | 否  | 注释                                   |\n| order_no         | INT UNSIGNED    | \\-   | 是    | NULL              | 否  | 字段序号                                 |\n| std_element_id   | BIGINT UNSIGNED | \\-   | 是    | NULL              | 否  | 数据元标准ID（FK→standard_element.id）      |\n| code_set_id      | BIGINT UNSIGNED | \\-   | 是    | NULL              | 否  | 代码集ID（FK→code_set.id）                |\n| glossary_term_id | BIGINT UNSIGNED | \\-   | 是    | NULL              | 否  | 业务术语ID（FK→business_glossary_term.id） |\n| created_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                 |\n| updated_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                                 |\n\n索引建议：\n\n- 复合唯一：table_id+name；筛选索引：table_id、std_element_id、code_set_id、glossary_term_id、is_pk、is_fk、data_type。\n\n表：metadata_version（元数据版本快照）\n\n- 设计意图：记录实体的版本快照，用于版本比对与回溯，对齐 PRD 的“版本管理与比对”。\n\n| 字段名           | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释            |\n|---------------|-----------------|----------------------------------------|------|-------------------|----|-----------------|\n| id            | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键              |\n| entity_type   | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型            |\n| entity_id     | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID（对应类型FK）    |\n| version_no    | VARCHAR         | 32                                     | 否    | \\-                 | 否  | 版本号             |\n| snapshot_json | JSON            | \\-                                      | 否    | \\-                 | 否  | 快照内容            |\n| created_at    | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 创建时间            |\n| created_by    | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 创建人（FK→user.id） |\n\n唯一性与约束：\n\n- 复合唯一：entity_type+entity_id+version_no；索引：entity_type+entity_id（查询最近版本）。\n\n表：metadata_search_index（检索索引）\n\n- 设计意图：为目录检索提供倒排/全词索引，含拼音与同义词，支撑 PRD 4.2.1 的“关键字/条件检索与排序”。\n\n| 字段名            | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释            |\n|----------------|-----------------|----------------------------------------|------|-------------------|----|-----------------|\n| id             | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键              |\n| entity_type    | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型            |\n| entity_id      | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID            |\n| tokens         | TEXT            | \\-                                      | 否    | \\-                 | 否  | 分词索引（含别名/注释关键字） |\n| pinyin_tokens  | TEXT            | \\-                                      | 是    | NULL              | 否  | 拼音索引            |\n| synonyms       | TEXT            | \\-                                      | 是    | NULL              | 否  | 同义词索引           |\n| popularity     | INT UNSIGNED    | \\-                                      | 否    | 0                 | 否  | 热度（访问/引用次数）     |\n| last_access_at | DATETIME        | \\-                                      | 是    | NULL              | 否  | 最近访问时间          |\n| updated_at     | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 更新时间            |\n\n索引建议：\n\n- FullText：tokens（InnoDB FULLTEXT）；BTREE：popularity、last_access_at、entity_type+entity_id。\n\n表：business_glossary_term（业务术语）\n\n- 设计意图：术语/口径的标准化定义，支撑术语到实体的引用与同义关系管理。\n\n| 字段名        | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释   |\n|------------|-----------------|-----|------|------|----|--------|\n| id         | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键     |\n| term       | VARCHAR         | 128 | 否    | \\-    | 否  | 术语（唯一） |\n| definition | TEXT            | \\-   | 否    | \\-    | 否  | 术语定义   |\n| domain     | VARCHAR         | 64  | 是    | NULL | 否  | 主题域    |\n| owner      | VARCHAR         | 128 | 是    | NULL | 否  | 维护人/团队 |\n| synonyms   | JSON            | \\-   | 是    | NULL | 否  | 同义词集合  |\n| extra      | JSON            | \\-   | 是    | NULL | 否  | 扩展属性   |\n\n唯一性与约束：\n\n- 唯一索引：term；可选全文索引：definition。\n\n表：glossary_term_entity_map（术语↔实体映射）\n\n- 设计意图：管理术语与元数据实体的关联，用于详情展示与检索增强。\n\n| 字段名           | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释                               |\n|---------------|-----------------|----------------------------------------|------|-------------------|----|------------------------------------|\n| term_id       | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 术语ID（FK→business_glossary_term.id） |\n| entity_type   | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型                               |\n| entity_id     | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID                               |\n| relation_type | ENUM            | ('defines','alias_of','related_to')    | 否    | 'defines'         | 否  | 关系类型                               |\n| created_at    | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                               |\n\n唯一性与约束：\n\n- 复合唯一：term_id+entity_type+entity_id；索引：entity_type+entity_id。\n\n表：metadata_entity_tag（实体标签映射）\n\n- 设计意图：将标签结构化为键值映射，替代 JSON tags 的查询瓶颈，支撑 PRD 的筛选与统计。\n\n| 字段名         | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释 |\n|-------------|-----------------|----------------------------------------|------|-------------------|----|------|\n| id          | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键   |\n| entity_type | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型 |\n| entity_id   | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID |\n| tag_key     | VARCHAR         | 64                                     | 否    | \\-                 | 否  | 标签键  |\n| tag_value   | VARCHAR         | 128                                    | 否    | \\-                 | 否  | 标签值  |\n| bound_at    | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 绑定时间 |\n\n唯一性与约束：\n\n- 复合唯一：entity_type+entity_id+tag_key；索引：tag_key+tag_value（筛选）。\n\n表：lineage_edge（血缘边）\n\n- 设计意图：抽象血缘关系，优化查询与去重；支撑上下游追踪与影响分析。\n\n| 字段名             | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释            |\n|-----------------|-----------------|----------------------------------------|------|-------------------|----|-----------------|\n| id              | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键              |\n| src_entity_type | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 源实体类型           |\n| src_entity_id   | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 源实体ID           |\n| dst_entity_type | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 目标实体类型          |\n| dst_entity_id   | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 目标实体ID          |\n| edge_type       | ENUM            | ('process','map','derive')             | 否    | 'process'         | 否  | 边类型             |\n| transform       | JSON            | \\-                                      | 是    | NULL              | 否  | 变换规则/SQL摘要      |\n| confidence      | DECIMAL         | 5,2                                    | 否    | 1.00              | 否  | 置信度             |\n| created_at      | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 创建时间            |\n| created_by      | BIGINT UNSIGNED | \\-                                      | 是    | NULL              | 否  | 创建人（FK→user.id） |\n\n唯一性与约束：\n\n- 复合唯一：src_entity_type+src_entity_id+dst_entity_type+dst_entity_id+edge_type（避免重复边）。\n- 索引建议：src_entity_type+src_entity_id、dst_entity_type+dst_entity_id、edge_type。\n\n表：change_log（变更记录）\n\n- 设计意图：记录实体变更前后快照，用于差异比对与审计追踪；支持按时间与类型检索。\n\n| 字段名             | 数据类型            | 长度                                     | 允许为空 | 默认值               | 自增 | 字段注释              |\n|-----------------|-----------------|----------------------------------------|------|-------------------|----|-------------------|\n| id              | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 是  | 主键                |\n| entity_type     | ENUM            | ('database','schema','table','column') | 否    | \\-                 | 否  | 实体类型              |\n| entity_id       | BIGINT UNSIGNED | \\-                                      | 否    | \\-                 | 否  | 实体ID              |\n| change_type     | ENUM            | ('add','update','delete')              | 否    | \\-                 | 否  | 变更类型              |\n| before_snapshot | JSON            | \\-                                      | 是    | NULL              | 否  | 变更前快照             |\n| after_snapshot  | JSON            | \\-                                      | 是    | NULL              | 否  | 变更后快照             |\n| diff_summary    | JSON            | \\-                                      | 是    | NULL              | 否  | 差异摘要（字段新增/删除/变更等） |\n| operated_by     | BIGINT UNSIGNED | \\-                                      | 是    | NULL              | 否  | 操作人（FK→user.id）   |\n| operated_at     | DATETIME        | \\-                                      | 否    | CURRENT_TIMESTAMP | 否  | 操作时间              |\n\n索引建议：\n\n- entity_type+entity_id+operated_at（倒序）；change_type；operated_by。\n\n说明与对齐\n\n- 存储效率：通过实体规范化（database/schema/table/column）与标签/术语映射表，减少 JSON 结构的重复存储与横表扫描；字段层面按需建立筛选索引，满足 PRD 的列表/筛选/排序要求。\n- 查询性能：为血缘与检索提供组合索引与FullText索引（tokens），上下游追踪按 src/dst 维度建立覆盖索引；版本与变更按时间与实体维度提供高效检索。\n- 采集闭环：data_source + data_source_sync_task 支撑连接测试与采集任务，metadata\\_* 表承载采集产出；change_log/metadata_version用于回溯与比对；search_index用于目录检索增强。\n- 安全与合规：data_source 不存储明文凭据，统一采用 secret_ref；所有变更与采集任务记录操作者与时间戳，满足审计要求。\n\n#### 6.3.3 标准治理域\n\n表设计清单（汇总）：\n\n| 表名                                     | 设计意图                         | 主键 | 唯一约束                                   | 外键(FK)                                                                                                            | 索引建议                                                                                                     | 对齐PRD章节      | 备注                 |\n|----------------------------------------|------------------------------|----|----------------------------------------|-------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|--------------|--------------------|\n| word_root（词根主表）                        | 统一词根规范，支撑跨域命名与组合引用           | id | code 唯一                                | category_id → word_root_category.id                                                                               | code（唯一）                                                                                                 | 4.5.1 词根管理   | 状态/用途/域等属性         |\n| word_root_category（词根类别）               | 词根层级分类管理                     | id | code 唯一；可选 parent_id+name 层内唯一         | parent_id 自关联 → word_root_category.id                                                                             | parent_id+name（建议）                                                                                       | 4.5.1 词根管理   | 支撑目录化治理            |\n| word_root_usage_constraint（词根使用约束）     | 词根在 model/table/column 的使用规则 | id | root_id+scope 复合唯一                     | root_id → word_root.id                                                                                            | root_id+scope（唯一）                                                                                        | 4.5.1 词根管理   | 位置/大小写/重复等规则       |\n| standard_element（数据元标准）                | 数据元编号/定义/类型/值域与发布状态          | id | code 唯一                                | code_set_id → code_set.id；published_by/revoked_by → user.id                                                       | data_type、publish_status、enabled 组合索引（建议）                                                                | 4.5.2 数据标准   | 发布/撤销与值域约束         |\n| code_set（代码集标准）                        | 可枚举代码值集合及版本管理                | id | code 唯一；建议 code+version 唯一             | created_by/updated_by → user.id                                                                                   | code+version（唯一，建议）                                                                                      | 4.5.2 数据标准   | 版本/启用/发布           |\n| code_set_item（代码集条目）                   | 代码集的具体可选值                    | id | set_id+item_code 复合唯一                  | set_id → code_set.id                                                                                              | set_id（筛选）                                                                                               | 4.5.2 数据标准   | 枚举值条目              |\n| model_naming_refresh_freq（刷新频率标准）      | 模型命名中的刷新频率标准库                | id | code 唯一                                | created_by/updated_by → user.id                                                                                   | code（唯一）                                                                                                 | 4.5.5.1 逻辑建模 | 统一频率（h/d/w/m 等）    |\n| model_naming_stat_cycle（统计周期标准）        | 模型命名中的统计周期标准库                | id | code 唯一                                | created_by/updated_by → user.id                                                                                   | code（唯一）                                                                                                 | 4.5.5.1 逻辑建模 | 统一周期（小时/日/周 等）     |\n| model_naming_load_strategy（增量/全量）      | 模型命名中的加载策略标准库                | id | category+code 复合唯一                     | created_by/updated_by → user.id                                                                                   | category+code（唯一）                                                                                        | 4.5.5.1 逻辑建模 | 启用/禁用受控            |\n| table_naming_standard（表命名标准）           | 分层+主题域的表命名规则文本与启用状态          | id | layer+domain_id+standard_name 复合唯一     | domain_id → theme_domain.id；created_by/updated_by → user.id                                                       | layer+domain_id+enabled（筛选，建议）                                                                           | 4.5.4 表命名标准  | 用于“使用表数量”统计        |\n| table_naming_standard_ref（表命名标准引用）     | 记录命名标准被表/模型引用                | id | standard_id+ref_type+ref_id 复合唯一       | standard_id → table_naming_standard.id                                                                            | standard_id（筛选）                                                                                          | 4.5.4 表命名标准  | 删除/禁用前依赖校验         |\n| logical_model（逻辑模型）                    | 列表/新增/编辑/物化的核心实体             | id | name_en 全局唯一；domain_id+layer+name 复合唯一 | domain_id → theme_domain.id                                                                                       | domain_id+layer；status；is_materialized；created_at                                                        | 4.5.5.1 逻辑建模 | 刷新频率/策略枚举；目录只读     |\n| logical_model_materialization（物化任务）    | 记录模型物化任务与结果摘要                | id | \\-                                      | model_id → logical_model.id                                                                                       | model_id；status；triggered_at                                                                             | 4.5.5.1 逻辑建模 | 批量物化与审计            |\n| logical_model_field（逻辑模型-属性字段）         | 模型详情的字段明细与标准/代码集引用           | id | model_id+field_name_en 复合唯一            | model_id → logical_model.id；std_element_id → standard_element.id；code_set_id → code_set.id                        | model_id；std_element_id；code_set_id；order_no                                                             | 4.5.5.1 逻辑建模 | 主键不可为空；类型/语义一致性校验  |\n| field_standard_mapping（字段级标准映射）        | 数据表字段 ↔ 数据元 的有效绑定            | id | 业务唯一：同一字段仅允许一个 status='valid' 绑定       | source_id → data_source.id；table_entity_id/column_entity_id → metadata_entity.id；element_id → standard_element.id | uniq_active（column_entity_id,status）；idx_source/idx_table/idx_column/idx_element/idx_status/idx_bound_at | 4.5.5.2 标准映射 | 列表与映射管理双视角；批量操作与审计 |\n| field_standard_mapping_history（标准映射历史） | 保留绑定/解绑/状态变更快照               | id | \\-                                      | mapping_id → field_standard_mapping.id；source_id/table_entity_id/column_entity_id/element_id                      | mapping_id；column_entity_id；element_id；operated_at；operation                                             | 4.5.5.2 标准映射 | 历史不删除，回溯合规         |\n\n表：word_root（词根主表）\n\n- 设计意图：承载标准词根的规范化定义，保证跨域统一命名与组合引用；code 作为唯一业务主键。\n\n| 字段名          | 数据类型            | 长度 | 允许为空 | 默认值      | 自增 | 字段注释                           |\n|--------------|-----------------|----|------|----------|----|--------------------------------|\n| id           | BIGINT UNSIGNED | \\-  | 否    | \\-        | 是  | 主键                             |\n| code         | VARCHAR         | 64 | 否    | \\-        | 否  | 词根编码（唯一）                       |\n| root         | VARCHAR         | 64 | 否    | \\-        | 否  | 词根正文（标准形）                      |\n| en_root      | VARCHAR         | 64 | 是    | NULL     | 否  | 英文词根（可选）                       |\n| pos          | VARCHAR         | 16 | 是    | NULL     | 否  | 词性（noun/verb/adj/…）            |\n| usage        | VARCHAR         | 32 | 否    | 'token'  | 否  | 用途（prefix/stem/suffix/token）   |\n| domain       | VARCHAR         | 64 | 是    | NULL     | 否  | 主题域（如订单/用户）                    |\n| category_id  | BIGINT UNSIGNED | \\-  | 是    | NULL     | 否  | 类别ID（FK→word_root_category.id） |\n| abbreviation | VARCHAR         | 32 | 是    | NULL     | 否  | 缩写（如 qty）                      |\n| is_reserved  | TINYINT(1)      | \\-  | 否    | 0        | 否  | 是否保留字（0/1）                     |\n| status       | VARCHAR         | 32 | 否    | 'active' | 否  | 状态（active/deprecated）          |\n| source       | VARCHAR         | 32 | 是    | NULL     | 否  | 来源（manual/import）              |\n| remark       | TEXT            | \\-  | 是    | NULL     | 否  | 备注                             |\n| extra        | JSON            | \\-  | 是    | NULL     | 否  | 扩展属性（形态规则/拆分等）                 |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；。\n- 外键：category_id → word_root_category.id（RESTRICT 删除）。\n\n表：word_root_category（词根类别）\n\n- 设计意图：为词根提供层级化分类，支撑按业务域或使用场景的筛选与治理。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                                |\n|-------------|-----------------|-----|------|------|----|-------------------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                                  |\n| code        | VARCHAR         | 64  | 否    | \\-    | 否  | 类别编码（唯一）                            |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 类别名称                                |\n| parent_id   | BIGINT UNSIGNED | \\-   | 是    | NULL | 否  | 父类别ID（自关联 FK→word_root_category.id） |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                                  |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；可建立 parent_id+name 层内唯一。\n- 外键：parent_id 自关联（RESTRICT 删除）。\n\n表：word_root_usage_constraint（词根使用约束）\n\n- 设计意图：限定词根在不同对象命名中的使用规则，用于标准化校验与自动生成。\n\n| 字段名                 | 数据类型            | 长度 | 允许为空 | 默认值     | 自增 | 字段注释                              |\n|---------------------|-----------------|----|------|---------|----|-----------------------------------|\n| id                  | BIGINT UNSIGNED | \\-  | 否    | \\-       | 是  | 主键                                |\n| root_id             | BIGINT UNSIGNED | \\-  | 否    | \\-       | 否  | 词根ID（FK→word_root.id）             |\n| scope               | VARCHAR         | 32 | 否    | 'model' | 否  | 适用范围（model/table/column）          |\n| position_constraint | VARCHAR         | 32 | 否    | 'any'   | 否  | 位置约束（prefix-only/suffix-only/any） |\n| repeat_limit        | INT UNSIGNED    | \\-  | 否    | 1       | 否  | 最大重复次数                            |\n| case_rule           | VARCHAR         | 32 | 否    | 'lower' | 否  | 大小写规则（lower/upper/capitalized）    |\n| max_length          | INT UNSIGNED    | \\-  | 是    | NULL    | 否  | 最大长度（可选）                          |\n| extra               | JSON            | \\-  | 是    | NULL    | 否  | 其他约束（正则/黑白名单）                     |\n\n唯一性与约束：\n\n- 复合唯一：root_id+scope；外键：root_id → word_root.id（RESTRICT 删除）。\n\n表：standard_element（数据元标准）\n\n- 设计意图：对齐 PRD 4.5.2.1“数据元标准”，统一管理数据元的编号、定义、类型、长度/精度、单位、值域约束与发布/启用状态；支撑模型/表/字段的引用与校验，并与词根/命名标准联动。\n\n| 字段名                    | 数据类型            | 长度                                | 允许为空 | 默认值           | 自增 | 字段注释                    |\n|------------------------|-----------------|-----------------------------------|------|---------------|----|-------------------------|\n| id                     | BIGINT UNSIGNED | \\-                                 | 否    | \\-             | 是  | 主键                      |\n| code                   | VARCHAR         | 64                                | 否    | \\-             | 否  | 数据元编号（唯一）               |\n| name                   | VARCHAR         | 128                               | 否    | \\-             | 否  | 中文名称                    |\n| name_en                | VARCHAR         | 128                               | 是    | NULL          | 否  | 英文名称（可选）                |\n| definition             | TEXT            | \\-                                 | 否    | \\-             | 否  | 定义/业务含义                 |\n| data_type              | ENUM            | ('string','number','date','bool') | 否    | \\-             | 否  | 数据类型（字符串/数值/日期/布尔）      |\n| length                 | INT UNSIGNED    | \\-                                 | 是    | NULL          | 否  | 长度（适用于字符串）              |\n| precision              | INT UNSIGNED    | \\-                                 | 是    | NULL          | 否  | 精度（适用于数值）               |\n| unit                   | VARCHAR         | 32                                | 是    | NULL          | 否  | 单位（可选）                  |\n| value_domain           | JSON            | \\-                                 | 是    | NULL          | 否  | 值域（min/max/说明），用于非枚举型约束 |\n| code_set_id            | BIGINT UNSIGNED | \\-                                 | 是    | NULL          | 否  | 代码集标准ID（FK→code_set.id） |\n| naming_standard_config | JSON            | \\-                                 | 是    | NULL          | 否  | 命名标准配置（词根组合code + 正则）   |\n| publish_status         | ENUM            | ('unpublished','published')       | 否    | 'unpublished' | 否  | 发布状态                    |\n| enabled                | TINYINT(1)      | \\-                                 | 否    | 1             | 否  | 启用状态（1启用/0禁用）           |\n| published_at           | DATETIME        | \\-                                 | 是    | NULL          | 否  | 发布时间（已发布时填充）            |\n| published_by           | BIGINT UNSIGNED | \\-                                 | 是    | NULL          | 否  | 发布人（FK→user.id，可选）      |\n| revoked_at             | DATETIME        | \\-                                 | 是    | NULL          | 否  | 撤销发布时间（撤销时填充）           |\n| revoked_by             | BIGINT UNSIGNED | \\-                                 | 是    | NULL          | 否  | 撤销发布人（FK→user.id，可选）    |\n| extra                  | JSON            | \\-                                 | 是    | NULL          | 否  | 扩展属性（示例/参考链接/校验提示）      |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；推荐建立 data_type、publish_status、enabled 组合索引以提升检索性能。\n- 外键：code_set_id → code_set.id（RESTRICT 删除）；published_by/revoked_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）： \n  1. 仅启用（enabled=1）状态允许发布；发布后不可编辑；撤销发布后方可编辑；\n  2. 已发布（published）状态可被引用；未发布（unpublished）不可被引用；\n  3. 长度/精度与数据类型的合法组合（如 date 不配置长度/精度）。\n- 值域约束：当 data_type='number' 时，value_domain 中 min≤max；当选择代码集时，code_set_id 非空。\n\n表：code_set（代码集标准）\n\n- 设计意图：管理可枚举的代码值集合，供数据元值域为“枚举型”时引用；支持版本与发布/启用状态，保障跨系统一致性。\n\n| 字段名            | 数据类型            | 长度                          | 允许为空 | 默认值           | 自增 | 字段注释            |\n|----------------|-----------------|-----------------------------|------|---------------|----|-----------------|\n| id             | BIGINT UNSIGNED | \\-                           | 否    | \\-             | 是  | 主键              |\n| code           | VARCHAR         | 64                          | 否    | \\-             | 否  | 代码集编码（唯一）       |\n| name           | VARCHAR         | 128                         | 否    | \\-             | 否  | 代码集名称           |\n| version        | VARCHAR         | 32                          | 否    | 'v1'          | 否  | 版本号             |\n| description    | TEXT            | \\-                           | 是    | NULL          | 否  | 描述              |\n| domain         | VARCHAR         | 64                          | 是    | NULL          | 否  | 主题域（如订单/用户）     |\n| publish_status | ENUM            | ('unpublished','published') | 否    | 'unpublished' | 否  | 发布状态            |\n| enabled        | TINYINT(1)      | \\-                           | 否    | 1             | 否  | 启用状态            |\n| extra          | JSON            | \\-                           | 是    | NULL          | 否  | 扩展属性            |\n| created_by     | BIGINT UNSIGNED | \\-                           | 否    | \\-             | 否  | 创建人（FK→user.id） |\n| created_at     | DATETIME        | \\-                           | 否    | \\-             | 否  | 创建时间            |\n| updated_by     | BIGINT UNSIGNED | \\-                           | 是    | NULL          | 否  | 更新人（FK→user.id） |\n| updated_at     | DATETIME        | \\-                           | 是    | NULL          | 否  | 更新时间            |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；推荐建立 code+version 复合唯一以支持多版本。\n- 外键：created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束：仅启用状态允许发布；发布后条目不可编辑；撤销发布后可编辑。\n\n表：code_set_item（代码集条目）\n\n- 设计意图：承载代码集的具体可选值条目，供数据元枚举值域引用与校验。\n\n| 字段名        | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                  |\n|------------|-----------------|-----|------|------|----|-----------------------|\n| id         | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                    |\n| set_id     | BIGINT UNSIGNED | \\-   | 否    | \\-    | 否  | 代码集ID（FK→code_set.id） |\n| item_code  | VARCHAR         | 64  | 否    | \\-    | 否  | 条目编码                  |\n| item_label | VARCHAR         | 128 | 否    | \\-    | 否  | 条目名称/标签               |\n| item_order | INT UNSIGNED    | \\-   | 否    | 0    | 否  | 排序                    |\n| enabled    | TINYINT(1)      | \\-   | 否    | 1    | 否  | 启用状态                  |\n| extra      | JSON            | \\-   | 是    | NULL | 否  | 扩展属性                  |\n\n唯一性与约束：\n\n- 复合唯一：set_id+item_code 唯一；\n- 外键：set_id → code_set.id（RESTRICT 删除）。\n\n<!-- 表：standard_element_ref（数据元引用关系）\n\n- 设计意图：记录数据元被模型/表/字段等对象的引用关系，保障删除/撤销发布时的依赖校验与提示。\n\n| 字段名          | 数据类型            | 长度                        | 允许为空 | 默认值  | 自增 | 字段注释                          |\n|--------------|-----------------|---------------------------|------|------|----|-------------------------------|\n| id           | BIGINT UNSIGNED | \\-                         | 否    | \\-    | 是  | 主键                            |\n| element_id   | BIGINT UNSIGNED | \\-                         | 否    | \\-    | 否  | 数据元ID（FK→standard_element.id） |\n| ref_type     | ENUM            | ('field','model','table') | 否    | \\-    | 否  | 引用类型                          |\n| ref_id       | BIGINT UNSIGNED | \\-                         | 否    | \\-    | 否  | 引用对象ID（对应域内对象主键）              |\n| ref_snapshot | JSON            | \\-                         | 是    | NULL | 否  | 引用对象快照（名称/版本等）                |\n| created_at   | DATETIME        | \\-                         | 否    | \\-    | 否  | 创建时间                          |\n\n唯一性与约束：\n\n- 复合唯一：element_id+ref_type+ref_id 唯一；\n- 外键：element_id → standard_element.id（RESTRICT 删除）。\n- 业务约束：存在引用记录时禁止删除数据元；撤销发布需二次确认并通知引用方。 -->\n\n表：model_naming_refresh_freq（模型命名-刷新频率）\n\n- 设计意图：管理模型命名中的“刷新频率”标准项，用于统一表示模型的更新频率（如小时/日/周/月），在命名与逻辑建模中引用。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                   |\n|-------------|-----------------|-----|------|------|----|------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                     |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 刷新频率名称（如：小时刷新/日刷新/月刷新） |\n| code        | VARCHAR         | 8   | 否    | \\-    | 否  | 标识（如：h/d/w/m）          |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                     |\n| created_by  | BIGINT UNSIGNED | \\-   | 否    | \\-    | 否  | 创建人（FK→user.id）        |\n| created_at  | DATETIME        | \\-   | 否    | \\-    | 否  | 创建时间                   |\n| updated_by  | BIGINT UNSIGNED | \\-   | 是    | NULL | 否  | 更新人（FK→user.id）        |\n| updated_at  | DATETIME        | \\-   | 是    | NULL | 否  | 更新时间                   |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；\n- 外键：created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）：标识仅允许小写字母，长度 1-4；删除需二次确认；不可禁用（状态开关不适用）。\n\n表：model_naming_stat_cycle（模型命名-统计周期）\n\n- 设计意图：管理模型命名中的“统计周期”标准项，用于统一表示统计口径（如小时/日/周），在命名与逻辑建模中引用。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值  | 自增 | 字段注释                   |\n|-------------|-----------------|-----|------|------|----|------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-    | 是  | 主键                     |\n| name        | VARCHAR         | 128 | 否    | \\-    | 否  | 统计周期名称（如：小时统计/日统计/周统计） |\n| code        | VARCHAR         | 8   | 否    | \\-    | 否  | 标识（如：ht/dt/wt）         |\n| description | TEXT            | \\-   | 是    | NULL | 否  | 描述                     |\n| created_by  | BIGINT UNSIGNED | \\-   | 否    | \\-    | 否  | 创建人（FK→user.id）        |\n| created_at  | DATETIME        | \\-   | 否    | \\-    | 否  | 创建时间                   |\n| updated_by  | BIGINT UNSIGNED | \\-   | 是    | NULL | 否  | 更新人（FK→user.id）        |\n| updated_at  | DATETIME        | \\-   | 是    | NULL | 否  | 更新时间                   |\n\n唯一性与约束：\n\n- 唯一索引：code 唯一；\n- 外键：created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）：标识仅允许小写字母，长度 1-4；删除需二次确认；不可禁用（状态开关不适用）。\n\n表：model_naming_load_strategy（模型命名-增量/全量）\n\n- 设计意图：管理模型命名中的“增量/全量”标准项，用于统一表示加载方式；支持启用/禁用状态开关，并记录审计。\n\n| 字段名         | 数据类型            | 长度                     | 允许为空 | 默认值  | 自增 | 字段注释            |\n|-------------|-----------------|------------------------|------|------|----|-----------------|\n| id          | BIGINT UNSIGNED | \\-                      | 否    | \\-    | 是  | 主键              |\n| category    | ENUM            | ('incremental','full') | 否    | \\-    | 否  | 分类（增量/全量）       |\n| code        | VARCHAR         | 8                      | 否    | \\-    | 否  | 标识（如：i/f）       |\n| name        | VARCHAR         | 128                    | 否    | \\-    | 否  | 名称（如：增量/全量）     |\n| description | TEXT            | \\-                      | 是    | NULL | 否  | 描述              |\n| enabled     | TINYINT(1)      | \\-                      | 否    | 1    | 否  | 启用状态（1启用/0禁用）   |\n| created_by  | BIGINT UNSIGNED | \\-                      | 否    | \\-    | 否  | 创建人（FK→user.id） |\n| created_at  | DATETIME        | \\-                      | 否    | \\-    | 否  | 创建时间            |\n| updated_by  | BIGINT UNSIGNED | \\-                      | 是    | NULL | 否  | 更新人（FK→user.id） |\n| updated_at  | DATETIME        | \\-                      | 是    | NULL | 否  | 更新时间            |\n\n唯一性与约束：\n\n- 复合唯一：category+code 唯一（同一分类内标识唯一）；\n- 外键：created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）：仅该表支持启用/禁用状态开关；禁用后保留历史引用但不再提供新引用；删除需二次确认并记录审计。\n\n表：table_naming_standard（表命名标准）\n\n- 设计意图：对齐 PRD 4.5.4“表命名标准”，统一管理按“数仓分层+主题域”的表命名规则文本与启用状态，支持列表查询、状态切换、使用表数量统计与行级编辑/删除。\n\n| 字段名              | 数据类型            | 长度                                    | 允许为空 | 默认值  | 自增 | 字段注释                                    |\n|------------------|-----------------|---------------------------------------|------|------|----|-----------------------------------------|\n| id               | BIGINT UNSIGNED | \\-                                     | 否    | \\-    | 是  | 主键                                      |\n| layer            | ENUM            | ('STG','ODS','DWD','DWS','DIM','ADS') | 否    | \\-    | 否  | 数仓分层                                    |\n| domain_id        | BIGINT UNSIGNED | \\-                                     | 否    | \\-    | 否  | 主题域ID（FK→theme_domain.id）               |\n| directory_name   | VARCHAR         | 128                                   | 否    | \\-    | 否  | 目录名称（如：DWD > 客户域；由 layer 与主题域生成，存储用于展示） |\n| standard_name    | VARCHAR         | 128                                   | 否    | \\-    | 否  | 命名标准名称（如：客户交易增量日表命名标准）                  |\n| naming_rule      | VARCHAR         | 256                                   | 否    | \\-    | 否  | 命名规则（如：dwd_kh_jy\\_[自定义]\\_di；统一下划线分隔）      |\n| enabled          | TINYINT(1)      | \\-                                     | 否    | 1    | 否  | 启用状态（1启用/0禁用）                           |\n| used_table_count | INT UNSIGNED    | \\-                                     | 否    | 0    | 否  | 使用表数量（展示用，来自引用关系计数）                     |\n| rule_desc        | TEXT            | \\-                                     | 是    | NULL | 否  | 规则说明（可选）                                |\n| created_by       | BIGINT UNSIGNED | \\-                                     | 否    | \\-    | 否  | 创建人（FK→user.id）                         |\n| created_at       | DATETIME        | \\-                                     | 否    | \\-    | 否  | 创建时间                                    |\n| updated_by       | BIGINT UNSIGNED | \\-                                     | 是    | NULL | 否  | 更新人（FK→user.id）                         |\n| updated_at       | DATETIME        | \\-                                     | 是    | NULL | 否  | 更新时间                                    |\n\n唯一性与约束：\n\n- 复合唯一：layer+domain_id+standard_name 唯一；推荐建立 layer+domain_id+enabled 索引，支撑筛选。\n- 外键：domain_id → theme_domain.id（RESTRICT 删除）；created_by/updated_by → user.id（RESTRICT 删除）。\n- 业务约束（由服务层实现）： \n  1. 必填：layer、domain_id、standard_name、naming_rule；\n  2. 命名规则规范：统一使用小写英文字母、数字与下划线，避免空格与特殊符号；\n  3. directory_name 按“<layer> > <主题域名称>”生成并只读展示；\n  4. 启用状态切换即时生效并记录审计；删除需二次确认；\n  5. 命名规则建议由“分层前缀 + 域缩写 + 可自定义片段 + 时效后缀”等组成，但不强制校验结构。\n\n表：table_naming_standard_ref（表命名标准引用关系）\n\n- 设计意图：记录表命名标准被“物理表/模型”等对象的引用，用于计算“使用表数量”与删除/禁用前的依赖校验与提示。\n\n| 字段名          | 数据类型            | 长度                | 允许为空 | 默认值     | 自增 | 字段注释                                |\n|--------------|-----------------|-------------------|------|---------|----|-------------------------------------|\n| id           | BIGINT UNSIGNED | \\-                 | 否    | \\-       | 是  | 主键                                  |\n| standard_id  | BIGINT UNSIGNED | \\-                 | 否    | \\-       | 否  | 命名标准ID（FK→table_naming_standard.id） |\n| ref_type     | ENUM            | ('table','model') | 否    | 'table' | 否  | 引用类型（默认 table）                      |\n| ref_id       | BIGINT UNSIGNED | \\-                 | 否    | \\-       | 否  | 引用对象ID（对应域内对象主键）                    |\n| ref_snapshot | JSON            | \\-                 | 是    | NULL    | 否  | 引用对象快照（库/表/模型名称、分层、域缩写等）            |\n| created_at   | DATETIME        | \\-                 | 否    | \\-       | 否  | 创建时间                                |\n\n唯一性与约束：\n\n- 复合唯一：standard_id+ref_type+ref_id 唯一；\n- 外键：standard_id → table_naming_standard.id（RESTRICT 删除）。\n- 业务约束：存在引用记录时禁止删除命名标准；禁用需二次确认并提示影响范围。\n\n表：logical_model（逻辑模型）\n\n- 设计意图：对齐 PRD 4.5.5.1“逻辑建模”列表与新增/编辑/物化/删除操作所需的核心实体，统一存储模型的基本属性、分层与目录、刷新频率与加载策略、状态与物化标识，并支撑分页查询与筛选。\n\n| 字段名             | 数据类型            | 长度                           | 允许为空 | 默认值               | 自增 | 字段注释                           |\n|-----------------|-----------------|------------------------------|------|-------------------|----|--------------------------------|\n| id              | BIGINT UNSIGNED | \\-                            | 否    | \\-                 | 是  | 主键                             |\n| name_en         | VARCHAR         | 128                          | 否    | \\-                 | 否  | 英文名称（大写字母与下划线；禁止非法字符）          |\n| name            | VARCHAR         | 128                          | 否    | \\-                 | 否  | 中文名称                           |\n| layer           | ENUM            | ('DWD','DWS','ADS','DIM')    | 否    | \\-                 | 否  | 数仓分层（限定值域）                     |\n| domain_id       | BIGINT UNSIGNED | \\-                            | 否    | \\-                 | 否  | 主题域ID（FK→theme_domain.id）      |\n| directory_name  | VARCHAR         | 128                          | 否    | \\-                 | 否  | 主题域目录（由 layer 与主题域生成，展示用，不可编辑） |\n| refresh_freq    | ENUM            | ('daily','weekly','monthly') | 否    | \\-                 | 否  | 刷新频率（日/周/月）                    |\n| strategy        | ENUM            | ('incremental','full')       | 否    | \\-                 | 否  | 策略（增量/全量）                      |\n| status          | ENUM            | ('enabled','disabled')       | 否    | 'enabled'         | 否  | 状态（启用/禁用）                      |\n| is_materialized | ENUM            | ('yes','no')                 | 否    | 'no'              | 否  | 是否物化（是/否）                      |\n| description     | TEXT            | \\-                            | 是    | NULL              | 否  | 描述（可选）                         |\n| created_at      | DATETIME        | \\-                            | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                           |\n| updated_at      | DATETIME        | \\-                            | 否    | CURRENT_TIMESTAMP | 否  | 最近更新时间                         |\n\n- 唯一性与约束： \n  - name_en 全局唯一；避免重复创建逻辑模型（唯一索引：uniq_logical_model_name_en）。\n  - 组合约束：在同一主题域与分层下，name 的复合唯一（domain_id, layer, name）（唯一索引：uniq_domain_layer_name）。\n  - 值域约束：layer 仅限 DWD/DWS/ADS/DIM；refresh_freq 仅限 daily/weekly/monthly；strategy 仅限 incremental/full；status 仅限 enabled/disabled；is_materialized 仅限 yes/no（应用层校验与DDL枚举共同约束）。\n  - 业务约束：directory_name 由分层与主题域自动生成，不允许编辑；删除需二次确认。\n- 索引建议： \n  - idx_domain_layer（domain_id, layer）：筛选与分页；\n  - idx_status（status）：按启用/禁用筛选；\n  - idx_materialized（is_materialized）：按是否物化筛选；\n  - idx_created_at（created_at）：时间排序。\n\n表：logical_model_materialization（逻辑模型物化任务）\n\n- 设计意图：记录“物化”操作的任务、状态与结果摘要，支撑批量物化与审计。\n\n| 字段名            | 数据类型            | 长度                                      | 允许为空 | 默认值               | 自增 | 字段注释                        |\n|----------------|-----------------|-----------------------------------------|------|-------------------|----|-----------------------------|\n| id             | BIGINT UNSIGNED | \\-                                       | 否    | \\-                 | 是  | 主键                          |\n| model_id       | BIGINT UNSIGNED | \\-                                       | 否    | \\-                 | 否  | 逻辑模型ID（FK→logical_model.id） |\n| triggered_by   | VARCHAR         | 128                                     | 否    | \\-                 | 否  | 触发人                         |\n| triggered_at   | DATETIME        | \\-                                       | 否    | CURRENT_TIMESTAMP | 否  | 触发时间                        |\n| status         | ENUM            | ('queued','running','success','failed') | 否    | 'queued'          | 否  | 任务状态                        |\n| result_summary | JSON            | \\-                                       | 是    | NULL              | 否  | 结果摘要（行数/目标表/错误信息等）          |\n| job_ref        | VARCHAR         | 128                                     | 是    | NULL              | 否  | 任务引用（外部调度/作业ID）             |\n\n- 唯一性与约束： \n  - FK：model_id 引用 logical_model.id；逻辑删除不影响历史任务查询。\n  - 任务执行前需存在已选项（批量校验在应用层实现）。\n- 索引建议： \n  - idx_model（model_id）：按模型查看任务；\n  - idx_status（status）：状态筛选；\n  - idx_triggered_at（triggered_at）：时间排序。\n\n表：logical_model_field（逻辑模型-属性字段）\n\n- 设计意图：支撑“逻辑模型详情”页面中字段明细的展示与维护，记录每个逻辑模型的属性字段（名称、类型、长度/精度、是否为空、默认值、主键等），并可选引用数据元与代码集以实现标准化与值域约束。\n\n| 字段名            | 数据类型            | 长度                                   | 允许为空 | 默认值               | 自增 | 字段注释                          |\n|----------------|-----------------|--------------------------------------|------|-------------------|----|-------------------------------|\n| id             | BIGINT UNSIGNED | \\-                                    | 否    | \\-                 | 是  | 主键                            |\n| model_id       | BIGINT UNSIGNED | \\-                                    | 否    | \\-                 | 否  | 逻辑模型ID（FK→logical_model.id）   |\n| field_name_en  | VARCHAR         | 128                                  | 否    | \\-                 | 否  | 属性英文名（大写字母与下划线；模型内唯一）         |\n| field_name     | VARCHAR         | 128                                  | 否    | \\-                 | 否  | 属性中文名                         |\n| data_type      | ENUM            | ('string','number','date','boolean') | 否    | \\-                 | 否  | 数据类型（与数据元标准一致）                |\n| length         | INT             | \\-                                    | 是    | NULL              | 否  | 长度（非负整数；仅字符串/数值适用）            |\n| precision      | INT             | \\-                                    | 是    | NULL              | 否  | 精度（非负整数；仅数值适用）                |\n| nullable       | ENUM            | ('yes','no')                         | 否    | 'yes'             | 否  | 允许为空                          |\n| default_value  | VARCHAR         | 256                                  | 是    | NULL              | 否  | 默认值（可选）                       |\n| is_primary_key | ENUM            | ('yes','no')                         | 否    | 'no'              | 否  | 是否主键                          |\n| std_element_id | BIGINT UNSIGNED | \\-                                    | 是    | NULL              | 否  | 引用数据元（FK→standard_element.id） |\n| code_set_id    | BIGINT UNSIGNED | \\-                                    | 是    | NULL              | 否  | 引用代码集（FK→code_set.id）         |\n| order_no       | INT             | \\-                                    | 否    | 0                 | 否  | 展示排序（行序）                      |\n| description    | TEXT            | \\-                                    | 是    | NULL              | 否  | 字段描述                          |\n| created_at     | DATETIME        | \\-                                    | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                          |\n| updated_at     | DATETIME        | \\-                                    | 否    | CURRENT_TIMESTAMP | 否  | 最近更新时间                        |\n\n- 唯一性与约束： \n  - 复合唯一：同一模型内属性英文名唯一（唯一索引：uniq_model_field_en → (model_id, field_name_en)）。\n  - 值域约束：data_type 仅限 string/number/date/boolean；length/precision 为非负整数且类型适用；nullable/is_primary_key 仅限 yes/no。\n  - 语义一致性：若 std_element_id 引用的数据元的类型与 data_type 不一致需警示并二次确认；code_set_id 存在时的枚举值需与字段语义合理（应用层校验）。\n  - 业务约束：主键字段（is_primary_key='yes'）不允许 nullable='yes'；删除需二次确认。\n- 索引建议： \n  - idx_model（model_id）：按模型查询字段；\n  - idx_std_element（std_element_id）：按数据元引用筛选；\n  - idx_code_set（code_set_id）：按代码集筛选；\n  - idx_order（model_id, order_no）：详情展示排序。\n\n表：field_standard_mapping（标准映射：数据表字段 ↔ 数据元）\n\n- 设计意图：对齐 PRD 4.5.5.2“标准映射”，统一维护“数据表字段 ↔ 标准元数据（数据元）”的绑定关系，支撑列表视角与映射管理视角的检索、筛选、排序与批量操作，并与审计服务联动记录绑定/解绑/状态变更与导出行为。\n\n| 字段名              | 数据类型            | 长度                  | 是否为空 | 默认值               | 自增 | 字段注释                                               |\n|------------------|-----------------|---------------------|------|-------------------|----|----------------------------------------------------|\n| id               | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 是  | 主键ID                                               |\n| source_id        | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 否  | 数据源ID（FK→data_source.id；用于筛选与统计）                   |\n| table_entity_id  | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 否  | 表实体ID（FK→metadata_entity.id，entity_type='table'）   |\n| column_entity_id | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 否  | 字段实体ID（FK→metadata_entity.id，entity_type='column'） |\n| element_id       | BIGINT UNSIGNED | \\-                   | 否    | \\-                 | 否  | 数据元ID（FK→standard_element.id）                      |\n| status           | ENUM            | ('valid','invalid') | 否    | 'valid'           | 否  | 绑定状态（有效/失效）                                        |\n| bound_by         | VARCHAR         | 64                  | 否    | 'system'          | 否  | 绑定人（操作账号或用户编码）                                     |\n| bound_at         | DATETIME        | \\-                   | 否    | CURRENT_TIMESTAMP | 否  | 绑定时间                                               |\n| updated_by       | VARCHAR         | 64                  | 是    | NULL              | 否  | 最近变更人                                              |\n| updated_at       | DATETIME        | \\-                   | 是    | NULL              | 否  | 最近变更时间                                             |\n| unbound_reason   | VARCHAR         | 256                 | 是    | NULL              | 否  | 解绑原因（可选）                                           |\n| remark           | VARCHAR         | 256                 | 是    | NULL              | 否  | 备注（可选）                                             |\n\n- 唯一与约束：\n  - 业务唯一：同一“数据源-表-字段”在“有效”状态下仅允许绑定一个数据元；重新绑定时需先将现有绑定置为“失效”。\n  - 外键：source_id → data_source.id；table_entity_id/column_entity_id → metadata_entity.id（分别要求 entity_type='table'/'column'，由应用层校验）；element_id → standard_element.id（RESTRICT 删除）。\n  - 一致性校验：绑定的数据元的数据类型需与字段语义与类型合理；不一致时前端需警示并二次确认（保留审计）。\n  - 解绑限制：执行解绑需二次确认；unbound_reason 可选填写并写入审计。\n  - 检索与分页：列表支持按数据源/表名/字段/数据元名称/编码/状态/绑定人/绑定时间排序与筛选（配合索引）。\n- 索引建议：\n  - uniq_active（column_entity_id, status）+ 业务规约：仅允许一个 status='valid' 的记录；若需保留多条历史“失效”记录，依赖审计日志与历史表；\n  - idx_source（source_id）、idx_table（table_entity_id）、idx_column（column_entity_id）、idx_element（element_id）、idx_status（status）、idx_bound_at（bound_at）。\n\n表：field_standard_mapping_history（标准映射历史）\n\n- 设计意图：保留映射关系的历史变更与失效记录，满足“失效不删除历史绑定关系”的要求；与审计日志协同支持回溯与合规检查。\n\n| 字段名              | 数据类型            | 长度                                | 是否为空 | 默认值               | 自增 | 字段注释                                      |\n|------------------|-----------------|-----------------------------------|------|-------------------|----|-------------------------------------------|\n| id               | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 是  | 主键ID                                      |\n| mapping_id       | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 当前映射ID（FK→field_standard_mapping.id；快照来源） |\n| source_id        | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 数据源ID（FK→data_source.id）                  |\n| table_entity_id  | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 表实体ID（FK→metadata_entity.id）              |\n| column_entity_id | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 字段实体ID（FK→metadata_entity.id）             |\n| element_id       | BIGINT UNSIGNED | \\-                                 | 否    | \\-                 | 否  | 数据元ID（FK→standard_element.id）             |\n| status           | ENUM            | ('valid','invalid')               | 否    | 'valid'           | 否  | 当时状态（有效/失效）                               |\n| operation        | ENUM            | ('bind','unbind','status_change') | 否    | 'bind'            | 否  | 操作类型（绑定/解绑/状态变更）                          |\n| operated_by      | VARCHAR         | 64                                | 否    | 'system'          | 否  | 操作人                                       |\n| operated_at      | DATETIME        | \\-                                 | 否    | CURRENT_TIMESTAMP | 否  | 操作时间                                      |\n| reason           | VARCHAR         | 256                               | 是    | NULL              | 否  | 原因（如解绑/失效原因）                              |\n\n- 唯一与约束：\n  - 外键：mapping_id → field_standard_mapping.id（RESTRICT 删除）；source_id → data_source.id；table_entity_id/column_entity_id → metadata_entity.id；element_id → standard_element.id。\n  - 历史保留：每次绑定、解绑或状态切换均追加一条快照记录，不做唯一性限制，用于全量回溯。\n- 索引建议：\n  - idx_mapping（mapping_id）、idx_column（column_entity_id）、idx_element（element_id）、idx_operated_at（operated_at）、idx_operation（operation）。\n- 审计与权限：\n  - 行为审计：所有绑定/解绑/状态切换与导出行为统一写入 audit_log 表（已在通用审计域定义），包含上下文：字段标识、数据元ID/编码、操作人、时间、来源视图等；本历史表用于领域内便捷回溯与统计。\n  - 权限：标准管理员/域管理员可执行绑定、解绑、状态切换与导出；普通用户仅可查询与查看详情。\n\n#### 6.3.4 质量治理域\n\n设计对齐与目标\n\n- 对齐业务规格：严格对应 <PRD 4.3 数据质量管理> 的三大能力域——质量监控概览、质量规则库、质量检查任务（原型：quality-rules.html、quality-tasks.html）。\n- 设计目标：以“规则→任务→运行→指标/评分→异常/告警→工单整改→验证关闭”的闭环为主线，优化存储与索引，支撑高并发查询与监控渲染；避免结果冗余，提升聚合与过滤性能。\n- 安全与合规：不落地明文敏感数据样本；通过审计与权限域统一管控（见 6.3.1）。\n\n表：validation_rule（质量规则库）\n\n- 设计意图：统一沉淀质量规则的定义、分类与参数模板，供任务引用与检索。\n\n| 字段名              | 数据类型            | 长度                                                                                                   | 允许为空 | 默认值               | 自增 | 字段注释                       |\n|------------------|-----------------|------------------------------------------------------------------------------------------------------|------|-------------------|----|----------------------------|\n| id               | BIGINT UNSIGNED | \\-                                                                                                    | 否    | \\-                 | 是  | 主键                         |\n| code             | VARCHAR         | 64                                                                                                   | 否    | \\-                 | 否  | 规则编码（唯一，自然键）               |\n| name             | VARCHAR         | 128                                                                                                  | 否    | \\-                 | 否  | 规则名称                       |\n| category         | ENUM            | ('integrity','accuracy','timeliness','consistency','uniqueness','completeness','profiling','custom') | 否    | 'integrity'       | 否  | 规则类别                       |\n| target_type      | ENUM            | ('database','schema','table','column','dataset','job')                                               | 否    | 'table'           | 否  | 适用目标类型                     |\n| datasource_types | JSON            | \\-                                                                                                    | 是    | NULL              | 否  | 适配数据源类型列表（如 MySQL/PG/Hive） |\n| domain           | VARCHAR         | 64                                                                                                   | 是    | NULL              | 否  | 业务域（用于筛选）                  |\n| severity         | ENUM            | ('info','low','medium','high','critical')                                                            | 否    | 'medium'          | 否  | 严重级别                       |\n| status           | ENUM            | ('enabled','disabled','deprecated')                                                                  | 否    | 'enabled'         | 否  | 状态                         |\n| version          | VARCHAR         | 32                                                                                                   | 否    | 'v1'              | 否  | 规则版本                       |\n| param_schema     | JSON            | \\-                                                                                                    | 否    | \\-                 | 否  | 参数模板（校验、默认、类型）             |\n| default_params   | JSON            | \\-                                                                                                    | 是    | NULL              | 否  | 默认运行参数                     |\n| description      | TEXT            | \\-                                                                                                    | 是    | NULL              | 否  | 规则说明                       |\n| owner            | VARCHAR         | 128                                                                                                  | 是    | NULL              | 否  | 负责人                        |\n| created_by       | VARCHAR         | 64                                                                                                   | 否    | 'system'          | 否  | 创建人                        |\n| created_at       | DATETIME        | \\-                                                                                                    | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                       |\n| updated_by       | VARCHAR         | 64                                                                                                   | 是    | NULL              | 否  | 更新人                        |\n| updated_at       | DATETIME        | \\-                                                                                                    | 是    | NULL              | 否  | 更新时间                       |\n\n- 唯一与约束： \n  - 唯一：code 唯一；(name, version) 组合建议唯一避免重名版本冲突。\n  - 外键：与标签域复用 tag 表，通过 rule_tag_map 进行多对多关联（见下表）。\n- 索引建议： \n  - uniq_code（code UNIQUE）；idx_category_status（category,status）；idx_target_type（target_type）；idx_owner（owner）。\n\n表：rule_tag_map（规则-标签，M:N）\n\n- 设计意图：规则贴标签，复用 6.3.6 中 tag 表，实现检索与运营维度。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                        |\n|------------|-----------------|----|------|-------------------|----|-----------------------------|\n| rule_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 规则ID（FK→validation_rule.id） |\n| tag_id     | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 标签ID（FK→tag.id）             |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                        |\n\n- 唯一与约束： \n  - 复合唯一：UNIQUE(rule_id, tag_id)。\n- 索引建议： \n  - idx_tag（tag_id），便于按标签反查规则。\n\n表：validation_rule_target（规则目标绑定）\n\n- 设计意图：预绑定规则适用的实体，缩短运行前的目标解析时间，支持模式/前缀匹配。\n\n| 字段名         | 数据类型            | 长度                                                     | 允许为空 | 默认值               | 自增 | 字段注释                          |\n|-------------|-----------------|--------------------------------------------------------|------|-------------------|----|-------------------------------|\n| id          | BIGINT UNSIGNED | \\-                                                      | 否    | \\-                 | 是  | 主键                            |\n| rule_id     | BIGINT UNSIGNED | \\-                                                      | 否    | \\-                 | 否  | 规则ID（FK→validation_rule.id）   |\n| entity_id   | BIGINT UNSIGNED | \\-                                                      | 否    | \\-                 | 否  | 目标实体ID（FK→metadata_entity.id） |\n| entity_type | ENUM            | ('database','schema','table','column','dataset','job') | 否    | 'table'           | 否  | 目标类型                          |\n| match_scope | JSON            | \\-                                                      | 是    | NULL              | 否  | 匹配范围（前缀/通配符/分区条件）             |\n| enabled     | TINYINT         | 1                                                      | 否    | 1                 | 否  | 是否启用                          |\n| created_at  | DATETIME        | \\-                                                      | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                          |\n\n- 唯一与约束： \n  - 复合唯一：UNIQUE(rule_id, entity_id)。\n- 索引建议： \n  - idx_entity（entity_id, entity_type），支持按实体快速定位规则绑定。\n\n表：quality_task（质量检查任务）\n\n- 设计意图：任务编排/调度配置，增加并发/重试与窗口参数，支撑 PRD 4.3.3 的分步创建与监控展示。\n\n| 字段名             | 数据类型            | 长度                                               | 允许为空 | 默认值               | 自增 | 字段注释                           |\n|-----------------|-----------------|--------------------------------------------------|------|-------------------|----|--------------------------------|\n| id              | BIGINT UNSIGNED | \\-                                                | 否    | \\-                 | 是  | 主键                             |\n| name            | VARCHAR         | 128                                              | 否    | \\-                 | 否  | 任务名称                           |\n| description     | TEXT            | \\-                                                | 是    | NULL              | 否  | 任务说明                           |\n| status          | ENUM            | ('draft','ready','running','paused','stopped')   | 否    | 'ready'           | 否  | 状态                             |\n| schedule_cron   | VARCHAR         | 128                                              | 是    | NULL              | 否  | 调度表达式（Cron）                    |\n| schedule_window | ENUM            | ('full','incremental','daily','hourly','custom') | 否    | 'daily'           | 否  | 运行窗口类型                         |\n| window_config   | JSON            | \\-                                                | 是    | NULL              | 否  | 窗口配置（offset/size/watermark）    |\n| concurrency     | INT             | \\-                                                | 否    | 1                 | 否  | 并发度                            |\n| retry_policy    | JSON            | \\-                                                | 是    | NULL              | 否  | 重试策略（次数/间隔/退避）                 |\n| priority        | INT             | \\-                                                | 否    | 5                 | 否  | 优先级（1-10）                      |\n| owner           | VARCHAR         | 128                                              | 是    | NULL              | 否  | 负责人                            |\n| last_run_id     | BIGINT UNSIGNED | \\-                                                | 是    | NULL              | 否  | 最近运行ID（FK→quality_task_run.id） |\n| created_by      | VARCHAR         | 64                                               | 否    | 'system'          | 否  | 创建人                            |\n| created_at      | DATETIME        | \\-                                                | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                           |\n| updated_by      | VARCHAR         | 64                                               | 是    | NULL              | 否  | 更新人                            |\n| updated_at      | DATETIME        | \\-                                                | 是    | NULL              | 否  | 更新时间                           |\n\n- 唯一与约束： \n  - 唯一：name 建议唯一（或结合 owner 保证唯一性）。\n- 索引建议： \n  - idx_status（status），idx_owner（owner），idx_last_run（last_run_id）。\n\n表：quality_task_rule（任务-规则，M:N）\n\n- 设计意图：任务引用规则，支持运行时参数与目标过滤覆盖。\n\n| 字段名             | 数据类型            | 长度 | 允许为空 | 默认值  | 自增 | 字段注释                        |\n|-----------------|-----------------|----|------|------|----|-----------------------------|\n| task_id         | BIGINT UNSIGNED | \\-  | 否    | \\-    | 否  | 任务ID（FK→quality_task.id）    |\n| rule_id         | BIGINT UNSIGNED | \\-  | 否    | \\-    | 否  | 规则ID（FK→validation_rule.id） |\n| params_override | JSON            | \\-  | 是    | NULL | 否  | 参数覆盖                        |\n| target_filter   | JSON            | \\-  | 是    | NULL | 否  | 目标过滤覆盖（可选）                  |\n| enabled         | TINYINT         | 1  | 否    | 1    | 否  | 是否启用                        |\n\n- 唯一与约束： \n  - 复合唯一：UNIQUE(task_id, rule_id)。\n- 索引建议： \n  - idx_rule（rule_id），便于按规则反查任务。\n\n表：quality_task_run（任务运行）\n\n- 设计意图：替代原 execution_result，细化运行维度与指标，便于仪表盘与趋势统计。\n\n| 字段名              | 数据类型            | 长度                                                            | 允许为空 | 默认值         | 自增 | 字段注释                     |\n|------------------|-----------------|---------------------------------------------------------------|------|-------------|----|--------------------------|\n| id               | BIGINT UNSIGNED | \\-                                                             | 否    | \\-           | 是  | 主键                       |\n| task_id          | BIGINT UNSIGNED | \\-                                                             | 否    | \\-           | 否  | 任务ID（FK→quality_task.id） |\n| started_at       | DATETIME        | \\-                                                             | 否    | \\-           | 否  | 开始时间                     |\n| finished_at      | DATETIME        | \\-                                                             | 是    | NULL        | 否  | 结束时间                     |\n| status           | ENUM            | ('running','success','failed','partial','canceled','timeout') | 否    | 'running'   | 否  | 运行状态                     |\n| run_type         | ENUM            | ('scheduled','manual','retry')                                | 否    | 'scheduled' | 否  | 运行类型                     |\n| triggered_by     | VARCHAR         | 64                                                            | 否    | 'system'    | 否  | 触发者                      |\n| duration_ms      | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 运行耗时（毫秒）                 |\n| entities_scanned | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 扫描实体数                    |\n| checked_count    | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 校验记录数                    |\n| violation_count  | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 违规数                      |\n| warning_count    | BIGINT UNSIGNED | \\-                                                             | 是    | NULL        | 否  | 警告数                      |\n| severity_score   | DECIMAL         | (5,2)                                                         | 是    | NULL        | 否  | 严重度评分（0-100）             |\n| log_uri          | VARCHAR         | 256                                                           | 是    | NULL        | 否  | 日志/明细存储位置（对象存储/ELK）      |\n\n- 索引建议： \n  - idx_task_time（task_id, started_at DESC），idx_status（status），idx_run_type（run_type）。\n\n表：quality_violation（质量问题/违规）\n\n- 设计意图：记录违规明细与位置，支持工单闭环与批量操作。\n\n| 字段名             | 数据类型            | 长度                                                               | 允许为空 | 默认值               | 自增 | 字段注释                         |\n|-----------------|-----------------|------------------------------------------------------------------|------|-------------------|----|------------------------------|\n| id              | BIGINT UNSIGNED | \\-                                                                | 否    | \\-                 | 是  | 主键                           |\n| run_id          | BIGINT UNSIGNED | \\-                                                                | 否    | \\-                 | 否  | 运行ID（FK→quality_task_run.id） |\n| rule_id         | BIGINT UNSIGNED | \\-                                                                | 否    | \\-                 | 否  | 规则ID（FK→validation_rule.id）  |\n| entity_id       | BIGINT UNSIGNED | \\-                                                                | 否    | \\-                 | 否  | 关联实体（FK→metadata_entity.id）  |\n| entity_type     | ENUM            | ('table','column','dataset','job')                               | 否    | 'table'           | 否  | 实体类型                         |\n| partition_key   | VARCHAR         | 64                                                               | 是    | NULL              | 否  | 分区键（如 dt/pt）                 |\n| partition_value | VARCHAR         | 128                                                              | 是    | NULL              | 否  | 分区值                          |\n| location        | JSON            | \\-                                                                | 是    | NULL              | 否  | 位置（列名/偏移/索引）                 |\n| sample          | JSON            | \\-                                                                | 是    | NULL              | 否  | 取样（脱敏/摘要）                    |\n| message         | VARCHAR         | 512                                                              | 否    | \\-                 | 否  | 违规说明                         |\n| severity        | ENUM            | ('info','low','medium','high','critical')                        | 否    | 'medium'          | 否  | 严重级别                         |\n| status          | ENUM            | ('open','assigned','processing','resolved','rejected','ignored') | 否    | 'open'            | 否  | 闭环状态                         |\n| assignee        | VARCHAR         | 128                                                              | 是    | NULL              | 否  | 处理人                          |\n| created_at      | DATETIME        | \\-                                                                | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                         |\n| updated_at      | DATETIME        | \\-                                                                | 是    | NULL              | 否  | 更新时间                         |\n\n- 索引建议： \n  - idx_entity_status_time（entity_id, status, created_at DESC），idx_rule_run（rule_id, run_id）。\n\n表：remediation_action（整改动作）\n\n- 设计意图：闭环整改记录与状态流转，支撑“工单与整改→验证关闭”。\n\n| 字段名           | 数据类型            | 长度                                                             | 允许为空 | 默认值               | 自增 | 字段注释                          |\n|---------------|-----------------|----------------------------------------------------------------|------|-------------------|----|-------------------------------|\n| id            | BIGINT UNSIGNED | \\-                                                              | 否    | \\-                 | 是  | 主键                            |\n| violation_id  | BIGINT UNSIGNED | \\-                                                              | 否    | \\-                 | 否  | 违规ID（FK→quality_violation.id） |\n| action_type   | ENUM            | ('fix_data','update_rule','add_exclusion','recompute','other') | 否    | 'fix_data'        | 否  | 动作类型                          |\n| action_detail | JSON            | \\-                                                              | 否    | \\-                 | 否  | 动作详情（字段/范围/变更说明）              |\n| status        | ENUM            | ('planned','in_progress','completed','canceled')               | 否    | 'planned'         | 否  | 状态                            |\n| created_by    | VARCHAR         | 64                                                             | 否    | 'system'          | 否  | 创建人                           |\n| created_at    | DATETIME        | \\-                                                              | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                          |\n| updated_by    | VARCHAR         | 64                                                             | 是    | NULL              | 否  | 更新人                           |\n| updated_at    | DATETIME        | \\-                                                              | 是    | NULL              | 否  | 更新时间                          |\n\n- 索引建议： \n  - idx_violation_status（violation_id, status），支持按状态追踪。\n\n表：quality_alert（质量告警）\n\n- 设计意图：阈值触发的告警事件记录与发送状态，用于监控与通知回溯。\n\n| 字段名          | 数据类型            | 长度                                      | 允许为空 | 默认值       | 自增 | 字段注释                          |\n|--------------|-----------------|-----------------------------------------|------|-----------|----|-------------------------------|\n| id           | BIGINT UNSIGNED | \\-                                       | 否    | \\-         | 是  | 主键                            |\n| run_id       | BIGINT UNSIGNED | \\-                                       | 是    | NULL      | 否  | 运行ID（FK→quality_task_run.id）  |\n| violation_id | BIGINT UNSIGNED | \\-                                       | 是    | NULL      | 否  | 违规ID（FK→quality_violation.id） |\n| level        | ENUM            | ('info','warning','critical')           | 否    | 'warning' | 否  | 告警级别                          |\n| channel      | ENUM            | ('email','sms','webhook','slack','ops') | 否    | 'email'   | 否  | 通知渠道                          |\n| payload      | JSON            | \\-                                       | 是    | NULL      | 否  | 载荷（模板渲染结果）                    |\n| status       | ENUM            | ('pending','sent','failed')             | 否    | 'pending' | 否  | 发送状态                          |\n| retry_count  | INT             | \\-                                       | 否    | 0         | 否  | 重试次数                          |\n| sent_at      | DATETIME        | \\-                                       | 是    | NULL      | 否  | 发送时间                          |\n\n- 索引建议： \n  - idx_status_time（status, sent_at DESC），idx_level（level）。\n\n表：quality_metric_daily（质量监控指标-按日）\n\n- 设计意图：为“质量监控概览”提供时序指标，支持看板与趋势分析；避免重复聚合开销。\n\n| 字段名             | 数据类型            | 长度                                                                                          | 允许为空 | 默认值         | 自增 | 字段注释                        |\n|-----------------|-----------------|---------------------------------------------------------------------------------------------|------|-------------|----|-----------------------------|\n| id              | BIGINT UNSIGNED | \\-                                                                                           | 否    | \\-           | 是  | 主键                          |\n| entity_id       | BIGINT UNSIGNED | \\-                                                                                           | 否    | \\-           | 否  | 实体ID（FK→metadata_entity.id） |\n| stat_date       | DATE            | \\-                                                                                           | 否    | \\-           | 否  | 统计日期                        |\n| category        | ENUM            | ('integrity','accuracy','timeliness','consistency','uniqueness','completeness','profiling') | 否    | 'integrity' | 否  | 指标类别                        |\n| checked_count   | BIGINT UNSIGNED | \\-                                                                                           | 否    | 0           | 否  | 校验记录数                       |\n| violation_count | BIGINT UNSIGNED | \\-                                                                                           | 否    | 0           | 否  | 违规数                         |\n| warning_count   | BIGINT UNSIGNED | \\-                                                                                           | 否    | 0           | 否  | 警告数                         |\n| severity_score  | DECIMAL         | (5,2)                                                                                       | 是    | NULL        | 否  | 严重度评分                       |\n| quality_score   | DECIMAL         | (5,2)                                                                                       | 是    | NULL        | 否  | 质量评分（综合）                    |\n| updated_at      | DATETIME        | \\-                                                                                           | 是    | NULL        | 否  | 更新时间                        |\n\n- 唯一与约束： \n  - 复合唯一：UNIQUE(entity_id, stat_date, category)。\n- 索引建议： \n  - idx_entity_date（entity_id, stat_date DESC）。\n\n说明与对齐\n\n- 存储效率：将“运行摘要”与“违规明细”拆分为 run 与 violation 两级，避免在单表混存导致的热点与膨胀；明细样本采用脱敏/摘要存储，日志明细落对象存储/ELK，通过 log_uri 引用。\n- 查询性能： \n  - 运行列表与看板：quality_task_run 按 task_id+时间降序索引；质量概览走 quality_metric_daily 的预聚合数据；\n  - 违规工单：quality_violation 按实体+状态索引；支持按规则/运行快速过滤；\n  - 规则库检索：validation_rule 按类别/状态/目标类型复合索引，结合标签反查。\n- 功能覆盖： \n  - 质量规则库：validation_rule + rule_tag_map + rule_target 组合，满足创建/编辑/搜索/启停/导出；\n  - 质量检查任务：quality_task + quality_task_rule + quality_task_run 满足任务创建、执行监控与结果记录；\n  - 质量监控：quality_metric_daily 提供概览与趋势数据；quality_alert 支撑告警触发与回溯；\n  - 闭环治理：quality_violation + remediation_action 支撑工单整改与状态流转。\n- 安全与合规：不存敏感明文，所有关键操作（创建/编辑/执行/告警/整改）进入 audit_log（见通用审计域）；权限按“质量管理员/普通用户”细分，任务执行与规则编辑需管理员权限。\n\n#### 6.3.5 模型与主题域\n\n设计对齐与目标\n\n- 对齐 <mcfile name=\"PRD-数据资产管理平台.md\" path=\"d:\\\\工作文件\\\\产业大脑\\\\数据资产管理平台\\\\docs\\\\business-design\\\\PRD-数据资产管理平台.md\"></mcfile> 第4.7章节（数据架构），覆盖“4.7.1 数据仓库分层管理、4.7.2 主题域管理”的业务与技术规范，确保模型/版本与分层、主题域形成一致的治理闭环。\n- 目标：提升存储效率（树型与目录归档的规范化）、查询性能（分层+域的复合索引与路径物化）、功能覆盖（分层管理、域管理、模型目录与与元数据映射），并满足命名规则与目录生成的需求。\n\n表：warehouse_layer（数仓分层）\n\n- 设计意图：统一登记 ODS/STD/DWD/DWS/ADS/DIM/OTHER/TMP 等分层，维护上下游与顺序，支撑目录生成与权限治理。\n\n| 字段名               | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                                          |\n|-------------------|-----------------|----|------|-------------------|----|-----------------------------------------------|\n| id                | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 是  | 主键                                            |\n| code              | VARCHAR         | 16 | 否    | \\-                 | 否  | 分层编码（唯一；示例：ODS/DWD/DWS/ADS/DIM/STD/OTHER/TMP） |\n| name              | VARCHAR         | 64 | 否    | \\-                 | 否  | 分层名称                                          |\n| description       | TEXT            | \\-  | 是    | NULL              | 否  | 描述                                            |\n| seq               | INT             | \\-  | 否    | 0                 | 否  | 顺序（用于链路展示与排序）                                 |\n| upstream_layer_id | BIGINT UNSIGNED | \\-  | 是    | NULL              | 否  | 上游分层（FK→warehouse_layer.id）                   |\n| status            | VARCHAR         | 32 | 否    | 'enabled'         | 否  | 状态（enabled/disabled/deprecated）               |\n| created_at        | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                          |\n| updated_at        | DATETIME        | \\-  | 是    | NULL              | 否  | 更新时间                                          |\n\n- 唯一与索引：UNIQUE(code)；idx_seq（seq）；idx_upstream（upstream_layer_id）。\n\n表：theme_domain（主题域，树型）\n\n- 设计意图：主题域主/子域层级管理，提供树型导航与治理边界。引入层级与路径物化便于检索与展示。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|-------------|-----------------|-----|------|-------------------|----|--------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                       |\n| parent_id   | BIGINT UNSIGNED | \\-   | 是    | NULL              | 否  | 父域ID（FK→theme_domain.id） |\n| code        | VARCHAR         | 64  | 否    | \\-                 | 否  | 主题域编码（唯一）                |\n| name        | VARCHAR         | 128 | 否    | \\-                 | 否  | 主题域名称                    |\n| level       | INT             | \\-   | 否    | 1                 | 否  | 层级（主域=1，子域=2…）           |\n| path        | VARCHAR         | 512 | 是    | NULL              | 否  | 层级路径（如“客户/交易”）           |\n| owner       | VARCHAR         | 128 | 是    | NULL              | 否  | 负责人/团队                   |\n| status      | VARCHAR         | 32  | 否    | 'active'          | 否  | 状态（active/inactive）      |\n| description | TEXT            | \\-   | 是    | NULL              | 否  | 描述                       |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                     |\n| updated_at  | DATETIME        | \\-   | 是    | NULL              | 否  | 更新时间                     |\n\n- 唯一与索引：UNIQUE(code)；idx_parent（parent_id）；idx_level（level）；idx_path_prefix（path 前缀索引或全文索引按需）。\n\n表：domain_process（业务过程）\n\n- 设计意图：围绕主题域的核心业务过程（如客户注册、订单支付），用于过程治理与模型绑定。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                      |\n|-------------|-----------------|-----|------|-------------------|----|---------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                        |\n| domain_id   | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 主题域ID（FK→theme_domain.id） |\n| code        | VARCHAR         | 64  | 否    | \\-                 | 否  | 过程编码（域内唯一）                |\n| name        | VARCHAR         | 128 | 否    | \\-                 | 否  | 过程名称                      |\n| path        | VARCHAR         | 512 | 是    | NULL              | 否  | 面包屑路径（如“客户域/注册”）          |\n| sort_order  | INT             | \\-   | 否    | 0                 | 否  | 排序                        |\n| owner       | VARCHAR         | 128 | 是    | NULL              | 否  | 负责人/团队                    |\n| status      | VARCHAR         | 32  | 否    | 'active'          | 否  | 状态（active/inactive）       |\n| description | TEXT            | \\-   | 是    | NULL              | 否  | 描述                        |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                      |\n\n- 唯一与索引：UNIQUE(domain_id, code)；idx_domain（domain_id）。\n\n表：layer_domain_catalog（分层-主题域目录）\n\n- 设计意图：在分层与主题域维度下生成目录与命名规范绑定，支撑“目录名称自动生成与命名规则校验”。\n\n| 字段名            | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                        |\n|----------------|-----------------|-----|------|-------------------|----|-----------------------------|\n| id             | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                          |\n| layer_id       | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 分层ID（FK→warehouse_layer.id） |\n| domain_id      | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 主题域ID（FK→theme_domain.id）   |\n| directory_name | VARCHAR         | 128 | 否    | \\-                 | 否  | 目录名称（如“DWD > 客户域”）          |\n| naming_prefix  | VARCHAR         | 64  | 是    | NULL              | 否  | 命名前缀（如“dwd_kh”）             |\n| naming_pattern | VARCHAR         | 255 | 是    | NULL              | 否  | 命名规则模式（如“dwd_kh\\_[自定义]\\_di”）  |\n| description    | TEXT            | \\-   | 是    | NULL              | 否  | 描述                          |\n| created_at     | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                        |\n\n- 唯一与索引：UNIQUE(layer_id, domain_id)；idx_domain_layer（domain_id, layer_id）。\n\n#### 6.3.6 数据资产管理\n\n为严格对齐 PRD 4.1（数据资产目录）及其子章节（资产地图、类目级别管理、资产分类管理、资产标签管理、标签组管理、资产超市），本节对数据资产域的表结构进行系统性重构与优化，覆盖主数据、关系数据、运营与审计数据以及统计物化数据，确保扩展性、性能、一致性、完整性与安全性。\n\n表：category_level（类目级别定义）\n\n- 设计意图：统一平台分类层级的基线配置，支持启停与拖拽排序；一级级别必须存在（初始化保障）。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                |\n|-------------|-----------------|-----|------|-----------------------------------------------|----|---------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                  |\n| code        | VARCHAR         | 64  | 否    | \\-                                             | 否  | 级别编码（唯一，不可变）        |\n| name        | VARCHAR         | 128 | 否    | \\-                                             | 否  | 级别名称                |\n| level_order | INT             | \\-   | 否    | 1                                             | 否  | 层级序号（1 为顶层）         |\n| status      | VARCHAR         | 16  | 否    | 'active'                                      | 否  | 状态（active/disabled） |\n| description | TEXT            | \\-   | 是    | NULL                                          | 否  | 描述                  |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                |\n| updated_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                |\n\n- 约束与索引：UNIQUE(code)，UNIQUE(level_order)；idx_status(status)。\n\n表：tag_group（标签组）\n\n- 设计意图：标签分组与作用范围，支撑标签的分组管理与筛选。编码唯一且不可变（应用层约束）。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                |\n|-------------|-----------------|-----|------|-----------------------------------------------|----|---------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                  |\n| code        | VARCHAR         | 64  | 否    | \\-                                             | 否  | 标签组编码（唯一，不可变）       |\n| name        | VARCHAR         | 128 | 否    | \\-                                             | 否  | 标签组名称               |\n| description | TEXT            | \\-   | 是    | NULL                                          | 否  | 描述                  |\n| status      | VARCHAR         | 16  | 否    | 'active'                                      | 否  | 状态（active/disabled） |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                |\n| updated_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                |\n\n- 约束与索引：UNIQUE(code)；idx_status(status)。\n\n表：tag（标签）\n\n- 设计意图：资产/API/实体的多维打标；标签名称在标签组维度内唯一；支持标签组删除后标签转为未分组。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                                      |\n|-------------|-----------------|-----|------|-----------------------------------------------|----|-------------------------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                                        |\n| group_id    | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 标签组ID（FK→tag_group.id，ON DELETE SET NULL） |\n| code        | VARCHAR         | 64  | 否    | \\-                                             | 否  | 标签编码（全局唯一）                                |\n| name        | VARCHAR         | 128 | 否    | \\-                                             | 否  | 标签名称（在同组内唯一）                              |\n| description | TEXT            | \\-   | 是    | NULL                                          | 否  | 描述                                        |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                                      |\n| updated_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                      |\n\n- 约束与索引：UNIQUE(code)；UNIQUE(group_id, name)；idx_group(group_id)。\n\n表：asset_category（资产分类）\n\n- 设计意图：树型层级，自引用 parent_id；通过 level_id 对齐类目级别；冗余 path/sequence 优化检索与展示；支持负责人、可见范围与关联标签组（多对多）。\n\n| 字段名              | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                         |\n|------------------|-----------------|-----|------|-----------------------------------------------|----|------------------------------|\n| id               | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                           |\n| parent_id        | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 父分类ID（FK→asset_category.id）  |\n| level_id         | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 否  | 类目级别ID（FK→category_level.id） |\n| code             | VARCHAR         | 64  | 否    | \\-                                             | 否  | 分类编码（唯一）                     |\n| name             | VARCHAR         | 128 | 否    | \\-                                             | 否  | 分类名称                         |\n| description      | TEXT            | \\-   | 是    | NULL                                          | 否  | 描述                           |\n| path             | VARCHAR         | 255 | 是    | NULL                                          | 否  | 层级路径（如 /业务数据/客户信息）           |\n| sequence         | INT             | \\-   | 否    | 0                                             | 否  | 同级排序序号（拖拽调整）                 |\n| visibility_scope | VARCHAR         | 32  | 否    | 'public'                                      | 否  | 可见范围（public/org/project）     |\n| manager_user_id  | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 负责人（FK→user.id）              |\n| status           | VARCHAR         | 16  | 否    | 'active'                                      | 否  | 状态（active/disabled）          |\n| created_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                         |\n| updated_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                         |\n\n- 约束与索引：UNIQUE(code)；idx_parent(parent_id, sequence)；idx_level(level_id)；idx_status(status)；idx_path(path)；防循环引用（应用层校验）。\n\n表：category_tag_group（分类-标签组，M:N）\n\n- 设计意图：分类与标签组的多对多关联，用于在分类维度限定可用标签组。\n\n| 字段名          | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                                         |\n|--------------|-----------------|----|------|-------------------|----|----------------------------------------------|\n| category_id  | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 分类ID（FK→asset_category.id，ON DELETE CASCADE） |\n| tag_group_id | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 标签组ID（FK→tag_group.id，ON DELETE CASCADE）     |\n| created_at   | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                         |\n\n- 约束与索引：UNIQUE(category_id, tag_group_id)。\n\n表：asset（资产）\n\n- 设计意图：数据产品的编目实体，关联分类与来源实体；新增字段以支撑资产地图与资产超市的筛选与排序。\n\n| 字段名              | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                                            |\n|------------------|-----------------|-----|------|-----------------------------------------------|----|-------------------------------------------------|\n| id               | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                                              |\n| category_id      | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 否  | 分类ID（FK→asset_category.id）                      |\n| source_entity_id | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 元数据实体（FK→metadata_entity.id，ON DELETE SET NULL） |\n| code             | VARCHAR         | 64  | 否    | \\-                                             | 否  | 资产编码（唯一）                                        |\n| name             | VARCHAR         | 128 | 否    | \\-                                             | 否  | 资产名称                                            |\n| summary          | TEXT            | \\-   | 是    | NULL                                          | 否  | 摘要                                              |\n| spec             | JSON            | \\-   | 是    | NULL                                          | 否  | 技术规格（字段、格式、接口）                                  |\n| type             | VARCHAR         | 32  | 否    | 'table'                                       | 否  | 资产类型（table/file/api/metric/other）               |\n| biz_domain       | VARCHAR         | 64  | 是    | NULL                                          | 否  | 业务领域                                            |\n| update_cycle     | VARCHAR         | 32  | 是    | NULL                                          | 否  | 更新周期（如 daily/weekly/real_time）                  |\n| access_scope     | VARCHAR         | 32  | 否    | 'public'                                      | 否  | 访问权限（public/org/project/restricted）             |\n| last_updated_at  | DATETIME        | \\-   | 是    | NULL                                          | 否  | 最近更新时间                                          |\n| rating_avg       | DECIMAL         | 3,2 | 否    | 0.00                                          | 否  | 平均评分（缓存）                                        |\n| heat_score       | INT             | \\-   | 否    | 0                                             | 否  | 热度分（缓存）                                         |\n| owner            | VARCHAR         | 128 | 是    | NULL                                          | 否  | 归属团队                                            |\n| status           | VARCHAR         | 32  | 否    | 'draft'                                       | 否  | 状态（draft/review/published/deprecated）           |\n| created_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                                            |\n| updated_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                            |\n\n- 约束与索引：UNIQUE(code)；idx_category(category_id)；复合索引 idx_filter(type, biz_domain, update_cycle, access_scope, status, last_updated_at)。\n\n表：asset_tag（资产-标签，M:N）\n\n- 设计意图：资产与标签的多对多关系，复合唯一避免重复打标。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                                |\n|------------|-----------------|----|------|-------------------|----|-------------------------------------|\n| asset_id   | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 资产ID（FK→asset.id，ON DELETE CASCADE） |\n| tag_id     | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 标签ID（FK→tag.id，ON DELETE CASCADE）   |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                |\n\n- 约束与索引：UNIQUE(asset_id, tag_id)；idx_asset(asset_id)；idx_tag(tag_id)。\n\n表：market_listing（资产上架）\n\n- 设计意图：资产外部展示与交易配置；新增缓存指标以支撑资产超市推荐与排序。\n\n| 字段名              | 数据类型            | 长度  | 允许为空 | 默认值                                           | 自增 | 字段注释                                  |\n|------------------|-----------------|-----|------|-----------------------------------------------|----|---------------------------------------|\n| id               | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 是  | 主键                                    |\n| asset_id         | BIGINT UNSIGNED | \\-   | 否    | \\-                                             | 否  | 资产ID（FK→asset.id）                     |\n| title            | VARCHAR         | 128 | 否    | \\-                                             | 否  | 上架标题                                  |\n| description      | TEXT            | \\-   | 是    | NULL                                          | 否  | 上架说明                                  |\n| pricing          | JSON            | \\-   | 是    | NULL                                          | 否  | 计费配置                                  |\n| status           | VARCHAR         | 32  | 否    | 'pending'                                     | 否  | 状态（pending/approved/rejected/offline） |\n| reviewer_user_id | BIGINT UNSIGNED | \\-   | 是    | NULL                                          | 否  | 审核人（FK→user.id）                       |\n| view_count       | INT             | \\-   | 否    | 0                                             | 否  | 浏览数（缓存）                               |\n| favorite_count   | INT             | \\-   | 否    | 0                                             | 否  | 收藏数（缓存）                               |\n| rating_avg       | DECIMAL         | 3,2 | 否    | 0.00                                          | 否  | 平均评分（缓存）                              |\n| heat_score       | INT             | \\-   | 否    | 0                                             | 否  | 热度分（缓存）                               |\n| created_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                                  |\n| updated_at       | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                  |\n\n- 约束与索引：idx_asset_status(asset_id, status)；idx_heat(heat_score DESC)。\n\n表：subscription（订阅）\n\n- 设计意图：订阅关系与额度/到期管理；terms/quota 描述限制条款与配额。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值                                           | 自增 | 字段注释                        |\n|------------|-----------------|----|------|-----------------------------------------------|----|-----------------------------|\n| id         | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 是  | 主键                          |\n| listing_id | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 上架ID（FK→market_listing.id）  |\n| user_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 订阅用户（FK→user.id）            |\n| status     | VARCHAR         | 32 | 否    | 'active'                                      | 否  | 状态（active/canceled/expired） |\n| terms      | JSON            | \\-  | 是    | NULL                                          | 否  | 订阅条款/限制                     |\n| quota      | JSON            | \\-  | 是    | NULL                                          | 否  | 配额（调用次数/下载量等）               |\n| expires_at | DATETIME        | \\-  | 是    | NULL                                          | 否  | 到期时间                        |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                        |\n| updated_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                        |\n\n- 约束与索引：UNIQUE(listing_id, user_id)；idx_user_status(user_id, status)。\n\n表：asset_favorite（资产收藏）\n\n- 设计意图：记录用户收藏行为，用于资产超市“我的收藏”和热门统计。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                                |\n|------------|-----------------|----|------|-------------------|----|-------------------------------------|\n| id         | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 是  | 主键                                  |\n| asset_id   | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 资产ID（FK→asset.id，ON DELETE CASCADE） |\n| user_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 用户ID（FK→user.id，ON DELETE CASCADE）  |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 收藏时间                                |\n\n- 约束与索引：UNIQUE(asset_id, user_id)；idx_user(user_id)。\n\n表：asset_rating（资产评分/评价）\n\n- 设计意图：用户对资产的评分与评价内容，支撑评分排序与统计卡片。\n\n| 字段名        | 数据类型            | 长度 | 允许为空 | 默认值                                           | 自增 | 字段注释                                |\n|------------|-----------------|----|------|-----------------------------------------------|----|-------------------------------------|\n| id         | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 是  | 主键                                  |\n| asset_id   | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 资产ID（FK→asset.id，ON DELETE CASCADE） |\n| user_id    | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 用户ID（FK→user.id，ON DELETE CASCADE）  |\n| score      | INT             | \\-  | 否    | 0                                             | 否  | 评分（1-5）                             |\n| comment    | TEXT            | \\-  | 是    | NULL                                          | 否  | 评价内容                                |\n| created_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP                             | 否  | 创建时间                                |\n| updated_at | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                |\n\n- 约束与索引：UNIQUE(asset_id, user_id)；idx_asset(asset_id)；idx_score(score)。\n\n表：asset_access_request（资产使用申请）\n\n- 设计意图：集中记录资产使用申请与审批流程，符合“申请流程与审批记录”的审计要求。\n\n| 字段名              | 数据类型            | 长度 | 允许为空 | 默认值                                           | 自增 | 字段注释                                   |\n|------------------|-----------------|----|------|-----------------------------------------------|----|----------------------------------------|\n| id               | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 是  | 主键                                     |\n| asset_id         | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 资产ID（FK→asset.id）                      |\n| listing_id       | BIGINT UNSIGNED | \\-  | 是    | NULL                                          | 否  | 上架ID（FK→market_listing.id）             |\n| user_id          | BIGINT UNSIGNED | \\-  | 否    | \\-                                             | 否  | 申请人（FK→user.id）                        |\n| status           | VARCHAR         | 32 | 否    | 'pending'                                     | 否  | 状态（pending/approved/rejected/canceled） |\n| reason           | TEXT            | \\-  | 是    | NULL                                          | 否  | 申请理由与用途说明                              |\n| reviewer_user_id | BIGINT UNSIGNED | \\-  | 是    | NULL                                          | 否  | 审批人（FK→user.id）                        |\n| created_at       | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP                             | 否  | 申请时间                                   |\n| updated_at       | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 否  | 更新时间                                   |\n\n- 约束与索引：idx_asset_status(asset_id, status)；idx_user_status(user_id, status)。\n\n表：asset_stat_daily（资产日统计）\n\n- 设计意图：按日汇总资产曝光、点击、收藏、申请、下载、评分与热度，用于资产地图统计卡片与超市推荐。\n\n| 字段名        | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                                |\n|------------|-----------------|-----|------|-------------------|----|-------------------------------------|\n| id         | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                                  |\n| asset_id   | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 资产ID（FK→asset.id，ON DELETE CASCADE） |\n| stat_date  | DATE            | \\-   | 否    | \\-                 | 否  | 统计日期                                |\n| views      | INT             | \\-   | 否    | 0                 | 否  | 浏览次数                                |\n| favorites  | INT             | \\-   | 否    | 0                 | 否  | 收藏次数                                |\n| applies    | INT             | \\-   | 否    | 0                 | 否  | 申请次数                                |\n| downloads  | INT             | \\-   | 否    | 0                 | 否  | 下载次数                                |\n| rating_avg | DECIMAL         | 3,2 | 否    | 0.00              | 否  | 平均评分                                |\n| heat_score | INT             | \\-   | 否    | 0                 | 否  | 热度分                                 |\n| created_at | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 统计入库时间                              |\n\n- 约束与索引：UNIQUE(asset_id, stat_date)；idx_date(stat_date)。\n\n一致性与安全约束（本节表）：\n\n- 外键动作：默认 ON DELETE RESTRICT；对允许“置空”的场景（tag.group_id、asset.source_entity_id）采用 ON DELETE SET NULL；对纯关联表（asset_tag、category_tag_group、asset_favorite、asset_stat_daily）采用 ON DELETE CASCADE。\n- 删除与迁移：禁止删除含受控资产的分类（应用层校验与事务保障）；分类拖拽移动需记录影响范围与变更说明（审计日志）。\n- 权限与审计：分类创建/调整需类目管理员权限；标签与标签组操作需标签管理员权限；上架、申请、评分、收藏等行为均记录至 audit_log（全局审计表，见系统审计章节）。\n- 索引与性能：高频过滤列（type/biz_domain/update_cycle/access_scope/status/last_updated_at）建立覆盖索引；分类树采用 path 物化并配合 idx_parent(parent_id, sequence) 实现懒加载与虚拟滚动；评分与热度排序通过缓存字段（asset.rating_avg/heat_score、market_listing.heat_score）与日统计表加速。\n- 生成列与 JSON 可检索（建议）： \n  - asset_format GENERATED COLUMN (JSON_EXTRACT(spec, '$.format')) 并索引(asset_format)；\n  - pricing_model GENERATED COLUMN (JSON_EXTRACT(pricing, '$.model')) 并索引(pricing_model)。\n\n表：tag_stat_daily（标签日统计）\n\n- 设计意图：按日聚合标签维度的资产数量与行为指标，用于标签排行、标签云权重与资产地图的标签筛选性能优化。\n\n| 字段名         | 数据类型            | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                              |\n|-------------|-----------------|----|------|-------------------|----|-----------------------------------|\n| id          | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 是  | 主键                                |\n| tag_id      | BIGINT UNSIGNED | \\-  | 否    | \\-                 | 否  | 标签ID（FK→tag.id，ON DELETE CASCADE） |\n| stat_date   | DATE            | \\-  | 否    | \\-                 | 否  | 统计日期                              |\n| asset_count | INT             | \\-  | 否    | 0                 | 否  | 标签下资产数量（当日快照）                     |\n| views       | INT             | \\-  | 否    | 0                 | 否  | 浏览次数                              |\n| favorites   | INT             | \\-  | 否    | 0                 | 否  | 收藏次数                              |\n| applies     | INT             | \\-  | 否    | 0                 | 否  | 申请次数                              |\n| downloads   | INT             | \\-  | 否    | 0                 | 否  | 下载次数                              |\n| heat_score  | INT             | \\-  | 否    | 0                 | 否  | 热度分                               |\n| created_at  | DATETIME        | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 统计入库时间                            |\n\n- 约束与索引：UNIQUE(tag_id, stat_date)；idx_tag(tag_id)；idx_date(stat_date)。\n\n表：category_stat_daily（分类日统计）\n\n- 设计意图：按日汇总分类维度的资产数量与行为指标，用于资产地图分类卡片数据与分类概览页的性能优化。\n\n| 字段名         | 数据类型            | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                                         |\n|-------------|-----------------|-----|------|-------------------|----|----------------------------------------------|\n| id          | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 是  | 主键                                           |\n| category_id | BIGINT UNSIGNED | \\-   | 否    | \\-                 | 否  | 分类ID（FK→asset_category.id，ON DELETE CASCADE） |\n| stat_date   | DATE            | \\-   | 否    | \\-                 | 否  | 统计日期                                         |\n| asset_count | INT             | \\-   | 否    | 0                 | 否  | 分类下资产数量（当日快照）                                |\n| views       | INT             | \\-   | 否    | 0                 | 否  | 浏览次数                                         |\n| favorites   | INT             | \\-   | 否    | 0                 | 否  | 收藏次数                                         |\n| applies     | INT             | \\-   | 否    | 0                 | 否  | 申请次数                                         |\n| downloads   | INT             | \\-   | 否    | 0                 | 否  | 下载次数                                         |\n| rating_avg  | DECIMAL         | 3,2 | 否    | 0.00              | 否  | 平均评分                                         |\n| heat_score  | INT             | \\-   | 否    | 0                 | 否  | 热度分                                          |\n| created_at  | DATETIME        | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 统计入库时间                                       |\n\n- 约束与索引：UNIQUE(category_id, stat_date)；idx_category(category_id)；idx_date(stat_date)。\n\n#### 6.3.7 数据服务\n\n本节给出“API管理与调用日志”的数据库表设计，确保原型页面 api-management.html 与 api-logs.html 的检索、筛选、排序、版本管理、状态切换、批量操作、监控图表与日志详情/导出等能力可落地。\n\n设计遵循：关系型数据库（MySQL/PostgreSQL）为主，日志表采用按时间分区策略，JSON字段用于请求/响应原始内容；关键查询字段建立覆盖索引；指标表用于支撑看板与图表的快速聚合查询。\n\n一、API服务主体表\n\n1. 表：api_service（API服务主档）\n\n- 作用：承载 API 的基础属性，并支持原型中的检索、筛选、排序、状态切换、批量操作与“导出API文档”所需的元信息。\n\n| 字段名         | 数据类型        | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                             |\n|-------------|-------------|-----|------|-------------------|----|----------------------------------|\n| id          | BIGINT/UUID | \\-   | 否    | \\-                 | 否  | 主键                               |\n| name        | VARCHAR     | 128 | 否    | \\-                 | 否  | API名称                            |\n| description | TEXT        | \\-   | 是    | \\-                 | 否  | 描述                               |\n| method      | VARCHAR     | 16  | 否    | \\-                 | 否  | HTTP方法（GET/POST/PUT/DELETE...）   |\n| path        | VARCHAR     | 255 | 否    | \\-                 | 否  | 路由路径，如 /v1/resource/1            |\n| version     | VARCHAR     | 32  | 否    | \\-                 | 否  | 版本号，如 v1.0.0（与 method+path 保持一致） |\n| status      | VARCHAR     | 16  | 否    | draft             | 否  | 状态：enabled/disabled/draft        |\n| domain_id   | BIGINT      | \\-   | 是    | \\-                 | 否  | 所属域（FK→biz_domain.id）            |\n| owner_id    | BIGINT      | \\-   | 是    | \\-                 | 否  | 负责人（FK→user_account.id）          |\n| tags_json   | JSON        | \\-   | 是    | \\-                 | 否  | 标签快照（真实标签见关联表）                   |\n| created_at  | TIMESTAMP   | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                             |\n| created_by  | BIGINT      | \\-   | 是    | \\-                 | 否  | 创建人（FK→user_account.id）          |\n| updated_at  | TIMESTAMP   | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                             |\n| updated_by  | BIGINT      | \\-   | 是    | \\-                 | 否  | 更新人（FK→user_account.id）          |\n| is_deleted  | BOOLEAN     | \\-   | 否    | FALSE             | 否  | 逻辑删除标记                           |\n\n- 约束与索引： \n  - UNIQUE(method, path, version)\n  - IDX(api_service.name)\n  - IDX(api_service.method, api_service.path)\n  - IDX(api_service.status)\n  - IDX(api_service.updated_at)\n  - IDX(api_service.domain_id), IDX(api_service.owner_id)\n\n1. 表：api_service_version（API版本档案）\n\n- 作用：管理 API 的版本信息、变更说明与规范文档（如 OpenAPI 片段），支撑原型中的版本显示与文档导出。\n\n| 字段名        | 数据类型        | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|------------|-------------|----|------|-------------------|----|--------------------------|\n| id         | BIGINT/UUID | \\-  | 否    | \\-                 | 否  | 主键                       |\n| api_id     | BIGINT      | \\-  | 否    | \\-                 | 否  | API主键（FK→api_service.id） |\n| version    | VARCHAR     | 32 | 否    | \\-                 | 否  | 版本号                      |\n| changelog  | TEXT        | \\-  | 是    | \\-                 | 否  | 版本变更说明                   |\n| spec_json  | JSON        | \\-  | 是    | \\-                 | 否  | 规范文档片段（请求/响应示例、参数定义等）    |\n| created_at | TIMESTAMP   | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                     |\n| created_by | BIGINT      | \\-  | 是    | \\-                 | 否  | 创建人（FK→user_account.id）  |\n\n- 约束与索引： \n  - UNIQUE(api_id, version)\n  - IDX(api_id, version)\n\n1. 表：api_tag（标签字典，可复用平台标签模块；如已有统一标签表则直接复用）\n\n| 字段名        | 数据类型      | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                |\n|------------|-----------|----|------|-------------------|----|---------------------|\n| id         | BIGINT    | \\-  | 否    | \\-                 | 否  | 主键                  |\n| name       | VARCHAR   | 64 | 否    | \\-                 | 否  | 标签名（如“订单/用户/库存/支付”） |\n| group_name | VARCHAR   | 64 | 是    | \\-                 | 否  | 标签组（可选）             |\n| created_at | TIMESTAMP | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                |\n\n- 约束与索引：UNIQUE(name)，IDX(group_name)\n\n1. 表：api_service_tag_rel（API与标签关联）\n\n- 作用：支持按标签筛选与标签展示。\n\n| 字段名        | 数据类型      | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|------------|-----------|----|------|-------------------|----|--------------------------|\n| api_id     | BIGINT    | \\-  | 否    | \\-                 | 否  | API主键（FK→api_service.id） |\n| tag_id     | BIGINT    | \\-  | 否    | \\-                 | 否  | 标签主键（FK→api_tag.id）      |\n| created_at | TIMESTAMP | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                     |\n\n- 约束与索引： \n  - PK(api_id, tag_id)\n  - IDX(tag_id, api_id)\n\n说明：若平台已有“主题域/用户/标签”等统一主数据，请将 domain_id/owner_id/tag 外键指向统一主数据表。\n\n—\n\n二、API调用日志与详情\n\n1. 表：api_call_log（调用日志，建议时间分区：按月/按日）\n\n- 作用：承载原型 api-logs.html 的列表/筛选/分页/导出字段；并支持详情页展示请求与响应。\n\n| 字段名           | 数据类型      | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|---------------|-----------|-----|------|-------------------|----|--------------------------|\n| id            | BIGINT    | \\-   | 否    | \\-                 | 是  | 主键（雪花/自增）                |\n| ts            | TIMESTAMP | \\-   | 否    | \\-                 | 否  | 日志时间戳（筛选与排序）             |\n| api_id        | BIGINT    | \\-   | 是    | \\-                 | 否  | 关联API（FK→api_service.id） |\n| service_name  | VARCHAR   | 128 | 是    | \\-                 | 否  | 服务名称快照（用于关键字筛选）          |\n| method        | VARCHAR   | 16  | 否    | \\-                 | 否  | HTTP方法                   |\n| path          | VARCHAR   | 255 | 否    | \\-                 | 否  | 请求路径                     |\n| status_code   | INT       | \\-   | 否    | \\-                 | 否  | HTTP状态码（精确筛选）            |\n| status_class  | CHAR      | 1   | 否    | \\-                 | 否  | 状态码分组（2/4/5，派生列）         |\n| latency_ms    | INT       | \\-   | 否    | \\-                 | 否  | 耗时（毫秒）                   |\n| client_ip     | VARCHAR   | 64  | 是    | \\-                 | 否  | 调用者IP                    |\n| tenant_id     | BIGINT    | \\-   | 是    | \\-                 | 否  | 租户ID（可选）                 |\n| user_id       | BIGINT    | \\-   | 是    | \\-                 | 否  | 调用用户/应用ID（可选）            |\n| trace_id      | VARCHAR   | 64  | 是    | \\-                 | 否  | 链路追踪ID                   |\n| span_id       | VARCHAR   | 64  | 是    | \\-                 | 否  | 链路SpanID                 |\n| req_headers   | JSON      | \\-   | 是    | \\-                 | 否  | 请求头原始内容                  |\n| req_body      | JSON/TEXT | \\-   | 是    | \\-                 | 否  | 请求体原始内容（按数据库类型选择）        |\n| resp_headers  | JSON      | \\-   | 是    | \\-                 | 否  | 响应头原始内容                  |\n| resp_body     | JSON/TEXT | \\-   | 是    | \\-                 | 否  | 响应体原始内容（按数据库类型选择）        |\n| error_message | TEXT      | \\-   | 是    | \\-                 | 否  | 异常信息快照                   |\n| created_at    | TIMESTAMP | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 写入时间                     |\n\n- 约束与索引： \n  - 分区键：ts（范围分区）\n  - IDX(ts DESC)\n  - IDX(method, path)\n  - IDX(status_code), IDX(status_class)\n  - IDX(api_id, ts DESC)\n  - IDX(client_ip, ts)\n  - 可选：path/req_body/resp_body 全文索引（按数据库能力）\n\n1. 表：api_call_log_archive（调用日志归档，可选）\n\n- 结构与 api_call_log 相同；用于按保留周期迁移历史分区至归档库或对象存储，降低主库压力。\n\n—\n\n三、API监控与统计\n\n1. 表：api_service_stat_daily（API日统计）\n\n- 作用：支撑 API管理页面左侧“状态监控”三个图表（调用量、错误率、响应耗时）与常用预设筛选（高调用量/低错误率/响应快）。\n\n| 字段名            | 数据类型      | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|----------------|-----------|----|------|-------------------|----|--------------------------|\n| stat_date      | DATE      | \\-  | 否    | \\-                 | 否  | 统计日期                     |\n| api_id         | BIGINT    | \\-  | 否    | \\-                 | 否  | API主键（FK→api_service.id） |\n| calls          | BIGINT    | \\-  | 否    | 0                 | 否  | 调用量                      |\n| error_count    | BIGINT    | \\-  | 否    | 0                 | 否  | 错误量（status_code>=400）    |\n| avg_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | 平均耗时                     |\n| p95_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | P95耗时                    |\n| max_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | 最大耗时                     |\n| updated_at     | TIMESTAMP | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                     |\n\n- 约束与索引： \n  - PK(stat_date, api_id)\n  - IDX(api_id, stat_date DESC)\n  - 可建近7/30日聚合视图以加速看板查询\n\n1. 表：api_service_stat_hourly（小时统计，可选）\n\n- 作用：更细粒度的波动分析与告警基础（若需要）。\n\n| 字段名            | 数据类型      | 长度 | 允许为空 | 默认值               | 自增 | 字段注释                     |\n|----------------|-----------|----|------|-------------------|----|--------------------------|\n| stat_hour      | TIMESTAMP | \\-  | 否    | \\-                 | 否  | 统计小时（整点）                 |\n| api_id         | BIGINT    | \\-  | 否    | \\-                 | 否  | API主键（FK→api_service.id） |\n| calls          | BIGINT    | \\-  | 否    | 0                 | 否  | 调用量                      |\n| error_count    | BIGINT    | \\-  | 否    | 0                 | 否  | 错误量                      |\n| avg_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | 平均耗时                     |\n| p95_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | P95耗时                    |\n| max_latency_ms | INT       | \\-  | 是    | \\-                 | 否  | 最大耗时                     |\n| updated_at     | TIMESTAMP | \\-  | 否    | CURRENT_TIMESTAMP | 否  | 更新时间                     |\n\n—\n\n四、导出与文档\n\n- API文档导出：从 api_service 与 api_service_version.spec_json 汇总生成；必要时可增加 api_doc_export_task（导出任务）记录任务状态与生成文件元数据。\n\n表：api_doc_export_task（可选）\n\n| 字段名         | 数据类型      | 长度  | 允许为空 | 默认值               | 自增 | 字段注释                                 |\n|-------------|-----------|-----|------|-------------------|----|--------------------------------------|\n| id          | BIGINT    | \\-   | 否    | \\-                 | 否  | 主键                                   |\n| api_id      | BIGINT    | \\-   | 是    | \\-                 | 否  | 单API导出时记录（FK→api_service.id）         |\n| format      | VARCHAR   | 32  | 否    | \\-                 | 否  | 导出格式（markdown/html/openapi-json）     |\n| status      | VARCHAR   | 16  | 否    | pending           | 否  | 任务状态（pending/running/success/failed） |\n| file_url    | VARCHAR   | 512 | 是    | \\-                 | 否  | 生成文档下载地址                             |\n| created_at  | TIMESTAMP | \\-   | 否    | CURRENT_TIMESTAMP | 否  | 创建时间                                 |\n| finished_at | TIMESTAMP | \\-   | 是    | \\-                 | 否  | 完成时间                                 |\n| message     | TEXT      | \\-   | 是    | \\-                 | 否  | 任务信息/错误说明                            |\n\n—\n\n五、关键查询映射（与原型交互对齐）\n\n- API管理（列表）：\n  - 关键字搜索：name LIKE ? OR path LIKE ?（必要时引入全文索引）；索引覆盖 name/path。\n  - 筛选：status（IDX）、method（IDX）、tag（JOIN api_service_tag_rel）、domain_id（IDX）、owner_id（IDX）、updated_at（IDX）。\n  - 排序：name/status/updated_at/calls/created_at；calls 来自最近统计或实时聚合，推荐以 api_service_stat_daily 的近7/30日 calls 排序。\n  - 状态切换/批量操作：更新 api_service.status 或 is_deleted；记录审计日志（平台统一审计表）。\n- 调用日志（列表/详情/导出）：\n  - 关键字：service_name/path（IDX）；方法：method（IDX）；状态分组：status_class（2/4/5）；精确状态码：status_code；时间范围：ts BETWEEN ...\n  - 详情：根据 id 展示 req/resp headers/body 与 trace_id/span_id。\n  - 导出：基于筛选条件批量查询 api_call_log，按 CSV 格式输出。\n\n---\n\n### 6.4 关系约束\n\n本节明确各表之间的关系类型、外键约束与索引策略，解释跨表数据如何流动与通过 JOIN 进行关联查询；在减少数据冗余的同时，确保一致性与可追踪性。\n\n- 一对一（1:1）示例与实现方式：\n  - 通过唯一外键实现：例如可扩展 user_profile（profile.user_id UNIQUE FK→user.id）实现一对一用户详情；本设计当前未引入专门1:1表，但遵循此约束模式。\n- 一对多（1:N）：\n  - theme_domain（1）→ model（N），model（1）→ model_version（N）。\n  - asset_category（1）→ asset（N）。\n  - asset（1）→ market_listing（N），market_listing（1）→ subscription（N）。\n  - api（1）→ api_log（N）。\n  - data_source（1）→ metadata_entity（N），metadata_entity（1）→ change_log（N）。\n  - quality_task（1）→ execution_result（N），execution_result（1）→ quality_issue（N）。\n- 多对多（M:N）：\n  - user ↔ role，经 user_role 关联（复合唯一 user_id+role_id）；\n  - role ↔ permission，经 role_permission 关联（复合唯一 role_id+permission_id）；\n  - asset ↔ tag，经 asset_tag 关联（复合唯一 asset_id+tag_id）；\n  - quality_task ↔ validation_rule，经 quality_task_rule 关联（复合唯一 task_id+rule_id）。\n- 自引用与图关系：\n  - asset_category 的 parent_id 自引用实现树型层级；\n  - lineage_edge 以 src_entity_id 与 dst_entity_id 建模有向关系，用于血缘图谱的抽象索引。\n\n外键与索引策略（MySQL InnoDB）：\n\n- 所有外键字段建立 BTREE 索引（如 model_version.model_id、asset.category_id、api.asset_id、subscription.user_id）。\n- 约束动作建议： \n  - ON UPDATE CASCADE：模型版本引用模型、日志引用API等，保持更新一致传播；\n  - ON DELETE RESTRICT：默认限制删除，防止误删导致级联数据丢失；\n  - ON DELETE SET NULL：适用于可选引用（如 asset.source_entity_id），当来源移除时保留资产但清空引用。\n- 复合唯一与去重： \n  - 唯一自然键：user.username、role.code、permission.code、theme_domain.code、model.code、tag.code、asset.code、api.code、standard_item.code、validation_rule.code。\n  - 复合唯一：model_version（model_id, version）；关联表（user_role、role_permission、asset_tag、quality_task_rule）在（左FK, 右FK）上复合唯一以避免重复关联。\n\n跨表数据流与 JOIN 示例：\n\n- 资产检索（分类+标签）： \n  - asset JOIN asset_category ON asset.category_id = asset_category.id → 分类过滤；\n  - JOIN asset_tag ON asset.id = asset_tag.asset_id JOIN tag ON asset_tag.tag_id = tag.id → 标签筛选。\n- 模型版本定位： \n  - model JOIN model_version ON model.id = model_version.model_id，结合 version/status 精确定位；\n- 元数据血缘溯源： \n  - metadata_entity e JOIN lineage_edge le ON e.id = le.src_entity_id JOIN metadata_entity d ON le.dst_entity_id = d.id，结合 le.transform/confidence 展示依赖路径；\n- 质量问题闭环： \n  - quality_task JOIN execution_result ON ... JOIN quality_issue ON ...，再关联 metadata_entity 进行定位与整改；\n- API调用审计： \n  - api JOIN api_log ON api.id = api_log.api_id，按 status_code/duration_ms 聚合分析性能与稳定性。\n\n减少冗余与一致性保障：\n\n- 主数据规范化：用户、角色、权限、标签、分类、模型、标准与规则等主数据采用独立表与唯一编码，避免跨表重复存储。\n- 使用关联表实现 M:N，替代多值字段，确保扩展性与检索效率。\n- 可变结构用 JSON 承载（如 schema/config），同时保留核心可检索字段（code/name/type）与唯一/覆盖索引。\n- 通过变更记录（change_log）与执行摘要（execution_result）保持事件与状态的可追踪性，外键与时间戳确保时序一致。\n- 读优化的适度冗余：如 asset_category.path、model_version.status 作为物化属性，检索更优；其更新通过应用层事务保证一致。\n\n注：关系约束与索引策略需结合具体业务量级与访问模式调优，必要时引入分区（按时间/组织）、读写分离与物化视图（应用层维护）以保障性能。\n\n---\n\n### 6.5 数据存储及索引策略\n\n总体原则：以“查询驱动”的索引设计与“写读平衡”的数据布局为准则。所有主数据遵循规范化建模（3NF），高频查询场景采用适度反范式（冗余 path、状态物化）；对 JSON 字段采用“生成列+索引”的模式保障可检索性。\n\n索引类型与适用场景（MySQL 8.0 InnoDB）：\n\n- 主键索引（聚簇索引）：\n  - 设计：所有表以 BIGINT UNSIGNED AUTO_INCREMENT 作为主键（聚簇）。如需跨分片全局唯一ID，改用雪花算法（snowflake）或有序UUID，避免写入热点与页分裂的权衡。\n  - 原因与效果：保证主键范围检索与按主键排序的高效；追加插入的页分裂低、缓存命中高。大规模并发下避免随机主键导致的页分布碎片与二级索引膨胀。\n- 唯一索引：\n  - 表与字段：user.username，role.code，permission.code，theme_domain.code，model.code，standard_item.code，validation_rule.code，tag.code，asset.code，api.code 等。\n  - 原因与效果：确保主数据唯一性与幂等写入，避免应用层重复校验；配合 UPSERT（INSERT ... ON DUPLICATE KEY UPDATE）提升写入鲁棒性。\n- 复合索引（覆盖常见过滤与排序）：\n  - 典型索引： \n    - api_log(api_id, logged_at) → 按API与时间范围检索日志；\n    - api_log(status_code, logged_at) → 状态码维度的时间分析；\n    - market_listing(asset_id, status) → 上架状态筛选；\n    - subscription(user_id, status) → 用户订阅状态查询；\n    - model_version(model_id, version) → 版本精确定位（与唯一约束一致）；\n    - asset_tag(asset_id, tag_id) → 多对多关联去重与连接加速；\n    - metadata_entity(source_id, entity_type) → 来源与类型过滤；\n  - 原因与效果：提升多条件过滤下的索引选择与范围扫描效率；列顺序遵循“选择性高→过滤列→排序列”，优先构建覆盖索引减少回表。\n- 全文索引（FULLTEXT）：\n  - 表与字段：market_listing.title/description，metadata_entity.business_semantic，standard_item.name/content（如字典检索）。\n  - 原因与效果：支持模糊匹配与相关性排序；适用于中等规模描述类文本的快速定位。跨域复杂检索仍以 Elasticsearch 为主，关系库承担必要的子集检索与回查。\n- 前缀索引（Prefix Index）：\n  - 场景：对长VARCHAR（如 metadata_entity.full_name、request_id 等）选择足够区分度的前缀长度（如 32/64）。\n  - 原因与效果：降低索引体积与维护成本，同时保持较好的选择性；谨慎用于排序与覆盖查询以避免优化器退化。\n- 生成列 + 索引（JSON 可检索）：\n  - 示例： \n    - asset_spec_format GENERATED COLUMN (JSON_EXTRACT(spec, '$.format'))，索引(asset_spec_format)；\n    - api_auth_type GENERATED COLUMN (JSON_EXTRACT(auth, '$.type'))，索引(api_auth_type)；\n    - metadata_entity_type GENERATED COLUMN (JSON_EXTRACT(schema, '$.type'))，索引(metadata_entity_type)。\n  - 原因与效果：对可变结构进行“路径物化”，在不破坏灵活性的前提下实现高效过滤与统计；结合覆盖索引减少回表开销。\n- 空间索引（SPATIAL，按需）：\n  - 场景：如资产包含地理位置（POINT/GEOMETRY），为位置范围/邻近查询建立空间索引。\n  - 原因与效果：显著提升空间范围检索与距离计算性能；谨慎评估数据量与更新频次。\n\n索引维护与监控：\n\n- 定期 ANALYZE/OPTIMIZE，监测索引选择性与访问频次，淘汰“无效索引/冗余索引”。\n- 对热点写表（api_log、execution_result）控制索引数量，优先时间/主键维度，减少写放大。\n- 引入慢查询采样与可视化分析（如按 95/99 分位时延），迭代调整复合索引列序与覆盖列。\n- 针对倾斜键（如单一热门 tag_id），考虑打散写入（批处理随机化、异步聚合）或将分析查询迁移至 ES。\n\n分区/分表/分库策略：\n\n- 分区表（Partitioning）：\n  - 场景：api_log、execution_result 等时间序列高吞吐表按 RANGE（按月/周）或 INTERVAL 分区；避免与外键强依赖表混用，提升分区裁剪与冷热数据维护（ALTER TABLE ... DROP PARTITION）。\n  - 效果：提高范围检索与聚合性能，降低历史数据维护成本；结合仅保留近 N 分区策略实现滚动归档。\n- 分表（Sharding at Table Level）：\n  - 场景：超大表按业务键/租户键（tenant_id/user_id）水平拆分（asset、api_log等）；使用统一分片路由层（中间件/应用）进行读写定位。\n  - 效果：降低单表索引体积与锁竞争，提升并行度与扩展性；避免跨分片 JOIN，读多写少的聚合分析迁移至 ES/数仓。\n- 分库（Database-Level Sharding/读写分离）：\n  - 原则：主从复制实现读写分离（主写从读）；从库不承担强一致事务；跨分库事务采用 SAGA/Outbox，避免两阶段提交复杂度。\n  - 效果：显著提升查询并发与可用性；主库压力受控，故障时快速提升从库为主库实现业务连续。\n\n分布式设计与管理原则：\n\n- 分片键选择：稳定、离散度高且业务天然隔离（tenant_id、user_id、日期段）；避免使用高并发自增主键作为分片键导致热点。\n- 全局唯一ID：使用雪花ID或集中ID服务，确保跨分片唯一与时间有序。\n- 事务与一致性：尽量避免跨分片事务；必要场景采用 SAGA、Outbox、事件溯源与最终一致模型。\n- 跨分片查询：聚合查询由应用层分片路由并汇总；重分析计算下沉至数仓/ES，关系库保主数据一致与轻查询。\n- 运维与扩容：支持在线扩容与再平衡（按分片迁移/复制）；基于容量与负载阈值进行自动/半自动重分布。\n\n---\n\n### 6.6 备份与恢复策略\n\n目标：在保证数据安全与合规的前提下，实现可预测的恢复时间（RTO）与恢复点目标（RPO），并通过演练与监控确保策略有效。\n\n备份类型与方案：\n\n- 全量备份（Full Backup）：\n  - 方式：物理热备（在线、快照/页复制）或逻辑备份（导出架构与数据），优先物理备保证恢复速度。\n  - 周期与窗口：每周一次（周日 02:00），选择业务低峰窗口；对关键主库采用存储快照与冻结一致性窗口。\n  - 存储：本地临时缓存→对象存储（MinIO/S3）→异地冗余；备份加密（KMS管理密钥），写后校验与完整性校验（校验和）。\n- 增量备份（Incremental / Binlog 连续备份）：\n  - 方式：基于二进制日志（binlog）连续归档；或基于物理页的增量备（记录变更页）。\n  - 周期：每日一次增量快照（01:00）+ 实时 binlog 流归档；保留近 30 天滚动窗口。\n  - 存储与校验：与全量备同策略；对增量链进行一致性验证，避免链断导致恢复失败。\n- 元数据与配置备份：\n  - 内容：数据库用户/权限、参数配置（my.cnf）、DDL 版本、存储过程；与应用配置（连接串、路由规则）。\n  - 周期：随全量备同步，关键变更事件触发即时备份。\n- 备份验证与演练：\n  - 验证：每周进行备份可读性与完整性校验；每月进行恢复演练（沙箱环境），验证 RTO/RPO 达标与步骤可执行。\n  - 报告：出具演练报告与改进项，纳入变更管理与审计。\n\n恢复流程（PITR：时间点恢复）：\n\n- 标准流程： \n  1. 选择最近一次有效全量备份；\n  2. 依次应用增量备份（如有）；\n  3. 回放 binlog 至目标时间点（T），校验一致性；\n  4. 切换流量（灰度/只读→读写），观察指标与回退预案就绪。\n- 恢复校验： \n  - 数据一致性校验（主数据行数/校验和/抽样比对）、关键索引完整性、应用探针（健康检查与关键读写用例）。\n\nRTO/RPO 目标（参考值，按业务级别分层）：\n\n- 核心主数据（用户/权限、资产/API注册、标准规则）：RPO ≤ 5 分钟、RTO ≤ 30 分钟。\n- 日志与审计（api_log、execution_result）：RPO ≤ 15 分钟、RTO ≤ 60 分钟（允许短时降级）。\n- 报表与分析（度量汇总等）：RPO ≤ 60 分钟、RTO ≤ 120 分钟（可延后恢复）。\n\n故障场景与应对：\n\n- 主库故障：提升从库为主库（只读→读写），重建复制链；在后台进行故障主库的数据比对与修复。\n- 数据误删/错改：基于 PITR 恢复至误操作前时间点；必要时进行差异合并与审计回溯。\n- 存储故障/机房级故障：切换至异地备份或异地只读副本，恢复并提升为主库；确保跨可用区网络与权限预配置。\n- 大规模灾难：使用异地全量备+增量链快速重建集群；根据业务优先级分批恢复与放量。\n\n运维与合规：\n\n- 备份保留策略：全量备近 8 周、增量+binlog 近 30 天；合规归档（关键审计）保留 1 年以上。\n- 安全：备份加密、传输加密、访问控制（最小权限）；对敏感数据进行脱敏或子集备份策略。\n- 监控与告警：备份失败、耗时异常、校验失败、RPO 暴露时间超阈均告警；看板展示备份覆盖率与恢复演练达标率。\n- 文档与演练：建立可执行 Runbook，至少每季度演练一次并更新文档；指定责任人与值班体系，确保可追责与可持续改进。\n\n---\n\n## 7. 系统部署与集成设计\n\n本章以“部署架构图 + 文字说明”的方式，完整呈现系统的物理/逻辑分布、关键数据流、通信路径与安全边界。部署图如下：\n\n![部署架构图](images/deployment-architecture.svg)\n\n### 7.1 服务器角色与功能划分\n\n- 外网访问层（Internet/客户端）\n  - 用户浏览器/前端：通过 HTTPS 访问静态资源与业务接口。\n  - CDN/静态资源服务（Nginx）：分发 HTML/CSS/JS，降低源站压力与网络时延。\n- DMZ 安全边界层\n  - WAF（Web 应用防火墙）：策略过滤（SQLi、XSS、CSRF、Bot）、IP/UA黑白名单、速率限制、威胁情报联动。\n  - L7 负载均衡（LB）：TLS 终止、基于路径/主机头转发到 API 网关；健康检查与会话保持。\n- 公网子网（反向代理/网关）\n  - API 网关（Nginx/Envoy）：统一入口、路由转发、限流熔断、灰度发布、观测（Access Log、Metrics、Tracing）。\n  - 认证服务（SSO/OAuth2）：单点登录、令牌签发与校验、用户与权限数据对接（MySQL 主库）。\n- 私网子网（应用服务集群）\n  - 业务服务（Application Services）：实现资产、标准、质量、模型、标签、上架、API 等领域服务；与缓存/数据库交互。\n  - 后台任务与调度（Scheduler/Workers）：质量任务执行、数据血缘采集、索引同步（至 ES/Neo4j）、对象存储写入等。\n- 数据与观测层（私网）\n  - MySQL 主库：关系型事务库，承载主数据（用户、资产、标准、模型、API注册等）。\n  - MySQL 从库（只读）：读写分离，承载报表与查询；主从复制，支持提升为主库。\n  - Redis：缓存会话与热点数据、分布式锁。\n  - Elasticsearch：全文检索与多维分析，承载日志与文本索引。\n  - Neo4j：元数据血缘与图关系查询。\n  - MinIO/S3：对象存储，承载大文件与导出归档；与应用服务私网访问。\n  - 观测系统（Prometheus/Grafana/ELK）：指标、日志与告警统一采集与展现。\n\n### 7.2 组件的物理/逻辑分布\n\n- 逻辑分层：访问层（WAF/LB）→ 网关层（API 网关、认证） → 应用层（服务/任务） → 数据层（MySQL/Redis/ES/Neo4j/对象存储） → 观测层（监控/日志）。\n- 物理分布： \n  - DMZ 与公网子网承载对外入口组件（WAF、LB、网关），隔离于私网应用与数据资源。\n  - 私网子网承载应用服务与数据服务；数据库与缓存位于同一私网安全域，禁止公网直连。\n  - 观测组件与日志采集在私网内运行，外网仅暴露必要的只读看板（经网关鉴权）。\n- 伸缩与高可用： \n  - 网关与应用服务以无状态容器/实例部署，支持水平自动伸缩与滚动发布。\n  - MySQL 主从复制实现高可用；读写分离下游查询走从库；主库故障时自动/半自动提升从库。\n  - Redis/ES/Neo4j/对象存储根据规模采用集群或副本策略，确保数据冗余与可用性。\n\n### 7.3 关键数据流向与通信路径\n\n- 用户→CDN/静态资源：HTTPS 获取前端资源。\n- 用户→WAF→LB→API 网关：业务入口，进行策略过滤与路由。\n- 网关→应用服务：私网通信（mTLS 可选），按路由策略转发请求。\n- 应用服务→MySQL 主库：写事务与强一致读；→ MySQL 从库：只读查询与报表。\n- 应用服务→Redis：会话、热点键值、分布式锁；按需设置 TTL 与淘汰策略。\n- 应用服务→Elasticsearch：写入索引与日志文档；查询用于全文/聚合分析。\n- 应用服务→Neo4j：写入/查询血缘关系图；元数据与依赖路径分析。\n- 应用服务→MinIO/S3：上传/下载对象；数据导出与备份归档。\n- 观测： \n  - 应用与数据库→Prometheus：采集指标（QPS/RT/错误率/资源使用）。\n  - 应用/网关→ELK：采集访问日志与应用日志；失败重试与索引生命周期管理（ILM）。\n  - 告警→通知渠道：根据阈值与规则触发通知，形成闭环处置。\n\n通信协议与端口（示例）：\n\n- 外部访问均为 HTTPS（443），DMZ 内部转发至网关（HTTPS/HTTP 80/443）。\n- 私网应用与数据：MySQL 3306，Redis 6379，Elasticsearch 9200/9300，Neo4j 7687（Bolt），MinIO 9000/HTTPS。\n- 观测：Prometheus 9090，Grafana 3000，ELK 9200/5601 等。\n\n### 7.4 网络拓扑结构与安全边界\n\n- 网络分区：外网 → DMZ → 公网子网 → 私网子网 → 数据与观测子网；逐层隔离，最小暴露面。\n- 安全边界： \n  - WAF 与 LB 位于 DMZ，策略过滤后进入网关；对外仅暴露 80/443。\n  - 数据与观测仅在私网可达，禁止公网访问；管理接口经跳板机与细粒度权限控制。\n- 访问控制： \n  - 网关层鉴权（OAuth2/JWT），细粒度权限在应用层与数据库层（角色/权限表）。\n  - 安全组/ACL 限制跨子网访问；数据库白名单与最小权限账户；对象存储使用签名 URL。\n- 加密与合规： \n  - 传输层 TLS，内部可选 mTLS；静态数据加密（磁盘/对象）。\n  - 审计日志与配置变更纳入合规要求（留存与可追溯）。\n\n### 7.5 部署与集成要点\n\n- 部署流水线：CI/CD 进行构建、单元与集成测试、镜像签名、灰度发布与自动回滚；将数据库迁移脚本（DDL/DML）纳入版本控制与变更审批。\n- 配置管理：使用配置中心/密钥管理（KMS），区分环境（dev/test/stage/prod），敏感信息不入代码库。\n- 服务发现与路由：在网关配置服务路由，应用层使用健康检查与熔断重试；跨服务调用使用统一的 API 合同与版本策略。\n- 数据集成： \n  - 与 ES/Neo4j/对象存储的异步同步采用事件驱动（Outbox/CDC），保障最终一致性。\n  - 对接第三方接口经网关统一出口与限流策略；失败重试与死信队列治理。\n- 观测与SRE：预设 SLO/SLI（可用性/延迟/错误率），建立告警分级与值班机制；定期演练故障与恢复（结合第6.6节策略）。\n\n---\n\n## 8. 非功能性设计\n\n本章定义系统在性能、安全、可靠性与可扩展性方面的设计目标与实现方案，确保满足行业标准与项目要求，并与第6章（数据层设计）与第7章（部署与集成）保持一致。\n\n### 8.1 性能设计（Performance）\n\n- 目标与指标（示例目标值，可按业务分级细化）\n  - 页面首屏与静态资源：TTI ≤ 3s（国内网络），静态资源缓存命中率 ≥ 95%。\n  - 接口延迟（应用读写）：P50 ≤ 100ms，P95 ≤ 300ms，P99 ≤ 800ms；批处理/报表接口允许较高延迟（≤ 2s）。\n  - 吞吐与并发：核心服务在峰值（工作日 10:00/15:00）可承载平稳 QPS×3 的瞬时突发；连接并发稳定在服务配额范围（连接池与队列限流）。\n  - 资源利用率：在 SLA 工况下 CPU ≤ 70%，内存 ≤ 75%，存储与网络带宽留有 30% 以上安全余量。\n- 架构与实现策略\n  - 前端与网关：CDN 缓存、HTTP/2、Brotli/Gzip 压缩、长连接与连接复用；合理的 Cache-Control/ETag 策略降低源站压力。\n  - 应用层： \n    - 连接池与线程模型：合理配置数据库/缓存连接池（最大/最小/空闲）、非阻塞 I/O；避免同步阻塞链路。\n    - 异步化与削峰填谷：使用任务队列处理重/慢操作（索引同步、血缘计算、批量导出），接口快速返回任务 ID。\n    - 限流/降级/熔断：针对外部依赖（ES/Neo4j/第三方）设置限流与降级策略；开启超时与重试（指数退避+抖动），保障稳定性。\n    - 代码层优化：避免 N+1 查询；分页使用 SEEK/覆盖索引；幂等 API（幂等键）与批处理接口（批量插入/更新）。\n  - 数据层（MySQL 8.0）： \n    - 索引：遵循第6.5节索引策略（主键/唯一/复合/前缀/全文/生成列）；禁止低选择性冗余索引；慢 SQL 采集与治理闭环。\n    - 事务：短事务、合理隔离级别（生产默认 RR/RC 按需）；避免热点更新与大事务；分批提交与幂等补偿。\n    - 读写分离：主库承载写与强一致读，从库承载只读查询与报表；路由策略按业务场景配置。\n    - 批量与导入：批量写采用批次（如 500~1000 条），使用参数化与预编译；海量导入使用 bulk/load data + 索引/约束管理。\n  - 缓存层（Redis + 本地缓存）：读缓存与热点数据，防止穿透/击穿/雪崩（布隆/预热/隔离舱）；TTL 策略与一致性更新（消息/订阅）。\n  - 检索与图：Elasticsearch 分片/副本与查询优化（过滤优先、聚合合理）；Neo4j 查询使用限制与索引配置，避免全图扫描。\n- 性能测试与压测方法\n  - 类型：基准（baseline）、负载（load）、压力（stress）、稳定性（soak/长时间）、容量（capacity）。\n  - 数据集与场景：使用生产数据子集或合成数据；覆盖读写热点、深分页、复杂聚合、批量导入导出等最坏路径。\n  - 观测与诊断：统一指标（QPS/RT/错误率/资源）、分布式追踪、Profiling；形成瓶颈分析报告与优化清单。\n  - 准入门槛：性能回归不得劣化 > 5%；关键接口 P95 延迟与错误率必须满足 SLO；提交压测报告与对策。\n- SQL 优化清单（实践）\n  - 执行计划审查与提示（EXPLAIN/PROFILE）；慢 SQL 周期治理（采集→分析→整改→复盘）。\n  - 分页优化：覆盖索引 + SEEK；深分页使用游标/书签（search_after）或延迟聚合方案。\n  - 批处理与幂等：批量 UPSERT（如 INSERT ... ON DUPLICATE KEY UPDATE）；失败重试配合幂等键与去重表。\n\n### 8.2 安全设计（Security）\n\n- 身份与授权\n  - 认证：统一 OAuth2/OIDC + SSO，令牌签发/刷新/吊销；服务间可选 mTLS 与短期令牌。\n  - 授权：RBAC（角色-权限）+ ABAC（属性/资源级），细粒度到字段/资源；审计所有授权变更与高敏操作。\n- 数据安全\n  - 最小权限：数据库/对象存储/消息系统账户权限最小化，白名单与细粒度 ACL。\n  - 数据分级与脱敏：按数据敏感度分级；日志与备份中对敏感字段脱敏或子集化。\n  - 加密： \n    - 传输层 TLS（外网强制，内网可选 mTLS）。\n    - 静态加密：磁盘/对象存储/备份加密；密钥托管于 KMS，轮转与审计。\n- 应用安全\n  - 输入校验与编码：防 SQL 注入/命令注入；输出编码防 XSS；CSRF 防护（令牌/同源策略）。\n  - 文件上传安全：类型校验、大小限制、病毒扫描、隔离存储与下载鉴权（签名 URL）。\n  - 秘密管理：密钥不入库/不入代码；使用密钥管理服务与配置中心，按环境注入。\n  - 安全审计：登录/鉴权/权限变更/高敏读写均审计；不可篡改留存与检索。\n- 平台与网络安全\n  - WAF/IPS 与安全组/ACL 分层防护；跳板机与最小化管理访问；端口暴露最小化（仅必要 80/443）。\n  - 审计与合规：运维操作与配置变更全量留痕；定期基线扫描与漏洞修复（补丁管理）。\n- 开发安全与合规\n  - 安全开发流程：SAST/DAST/依赖扫描（SBOM）、安全 Code Review、变更审批与门禁。\n  - 合规框架：遵循等级保护 2.0、个人信息保护法（PIPL）与数据治理规范；隐私保护与数据出境合规按法务要求执行。\n- 安全事件响应\n  - 建立安全事件响应预案与演练：检测→分级→隔离→处置→通报→复盘；明确 RACI 与时限要求。\n\n### 8.3 可靠性与高可用设计（Reliability & HA）\n\n- 目标与指标\n  - 可用性：核心链路（认证/资产查询/API 注册）年度可用性 ≥ 99.9%；错误率 ≤ 0.1%。\n  - 与第6.6节 RTO/RPO 对齐，确保不同数据类型的恢复目标满足业务连贯性。\n- 高可用架构\n  - 无状态服务多实例与跨可用区部署；健康检查与自动故障转移（网关/负载均衡）。\n  - 数据层冗余：MySQL 主从复制 + 读写分离；Redis/ES/Neo4j 采用副本/集群与持久化策略。\n  - 配置与密钥：多副本存储与热备；变更可回滚与版本化管理。\n- 稳健性设计模式\n  - 重试（指数退避 + 抖动）与幂等（幂等键/去重表）；超时与隔离舱（Bulkhead）。\n  - 熔断与降级：对外部依赖启用熔断与降级策略，保障核心链路可用。\n- 数据一致性与补偿\n  - 事务边界：强一致操作在单库事务中完成；跨库/跨系统采用 Outbox/CDC + 补偿机制保障最终一致性。\n  - 幂等与去重：幂等键、业务唯一约束、重试去重表；必要时人工对账与修复流程。\n- 演练与验证\n  - Chaos 工程与故障注入（断网/延迟/节点故障），验证故障处置与恢复时间；形成改进清单。\n\n### 8.4 可扩展性与容量规划（Scalability & Capacity）\n\n- 横向扩展\n  - 网关与应用服务无状态，支持水平扩展与滚动发布；基于 HPA/自动伸缩策略按指标扩容。\n  - ES/Redis/Neo4j/对象存储按规模采用分片/副本与多节点部署，支持线性扩展。\n- 数据库扩展\n  - 读副本扩展查询能力；分区（时间/范围）与分库分表（按业务/租户/范围键）。\n  - 热点治理：热点键识别与拆分；自增主键与雪花/随机主键按场景选型，避免热点冲突。\n  - 连接池与路由：连接池多实例隔离；读写路由按业务策略与一致性需求选择。\n- 消息与事件流\n  - 事件总线与队列用于跨服务异步解耦；流式处理用于日志/指标与近实时分析。\n- 存储与数据生命周期\n  - 冷热分层存储与压缩；日志/索引生命周期管理（ILM），归档与清理策略按合规与成本优化执行。\n- 容量规划方法\n  - 基于业务增长模型预测资源需求；以 1.3~1.5 安全系数进行资源冗余；制定季度/年度容量评审与扩容里程碑。\n\n### 8.5 标准与合规（Standards & Compliance）\n\n- 安全标准与参考\n  - 参考行业最佳实践（如 OWASP、常见漏洞列表）建立安全基线；结合等级保护 2.0 要求覆盖身份鉴别、访问控制、审计、入侵防范与数据保护。\n- 运维与治理标准\n  - 参考 ITIL 的变更/事件/问题管理流程；备份与恢复遵循企业规程与审计要求。\n- 数据治理与隐私\n  - 数据质量（规则/度量）、血缘与主数据治理流程；隐私合规遵循最小必要原则、数据主体权利与留痕审计。\n- 文档与规范\n  - 安全编码规范、API 合同、运维 Runbook/Playbook、架构与设计文档的版本化维护与审计。\n\n### 8.6 非功能性指标与验收（NFR Metrics & Acceptance）\n\n- 指标体系\n  - 可用性、延迟（P50/P95/P99）、吞吐、错误率、资源利用率、缓存命中率、索引与搜索响应、图查询延迟等。\n- 验收与门禁\n  - 性能测试报告、渗透测试与安全扫描报告、灾备演练记录、监控看板与合规审计记录。\n  - 发布门禁：性能与稳定性不得劣化阈值（如 > 5%），关键安全项零高危；备份覆盖率 ≥ 95%。\n- 告警与处置 SLA\n  - 阈值设置原则与分级；告警联动至响应渠道，处置时限与升级路径明确。\n\n### 8.7 运维与持续优化（Ops & Continuous Improvement）\n\n- 观测与治理\n  - 统一日志/指标/追踪；Profiling 与慢 SQL 周报；索引与查询治理看板。\n- 成本与效率优化\n  - 实例规格与资源利用率优化；索引与存储治理（压缩/归档）；网络与出口优化。\n- 持续改进\n  - 事后复盘（Postmortem）、问题管理与容量回顾；SLO/错误预算与改进项跟踪闭环。",
  "lastModified" : 1764914929639
}, {
  "filePath" : "技术案例/TDD-数据资产管理平台-详细设计评审报告.md",
  "fileName" : "TDD-数据资产管理平台-详细设计评审报告.md",
  "parentDir" : "技术案例",
  "fileType" : "MD",
  "title" : "TDD-数据资产管理平台-详细设计评审报告.md",
  "contentText" : "# 数据资产管理平台 - 详细设计文档评审报告\n\n## 评审概述\n\n**被评审文档**：数据资产管理平台-详细设计文档 (TDD)\n**版本**：v1.0\n**评审人**：伍志勇\n**评审时间**：12月5日\n**评审类型**：全面技术评审\n**评审重点**：从可落地实施角度评估设计方案的可行性、完整性和技术合理性\n\n## 评审结果\n\n|问题序号|所在章节|问题类型|评审意见|评审人|评审时间|\n|-|-|-|-|-|-|\n|1|3.2.2 技术栈与基础设施|技术选型|文档中提到后端采用模块化微服务架构（metadata-service、quality-service等），但未明确是否采用Spring Cloud等微服务框架。建议补充微服务治理方案（服务注册与发现、配置中心等），确保服务间通信和管理的可落地性。|伍志勇|12月5日|\n|2|3.2.3 分层架构与服务边界|架构设计|服务划分较为细致，但未明确服务间的依赖关系和调用方式。建议补充服务依赖图和调用关系说明，避免服务间耦合度过高导致的部署和维护困难。|伍志勇|12月5日|\n|3|3.2.4 数据模型与存储设计|架构设计|存储选型包含MySQL、Neo4j、ElasticSearch、Redis和MinIO，技术栈较为复杂。建议补充各存储系统的使用边界和数据同步机制，确保数据一致性和系统可维护性。|伍志勇|12月5日|\n|4|4.2.2.2 元数据采集|技术选型|文档同时提到Apache Atlas和DataHub两种元数据采集方案，但未明确选择标准和实施路径。建议根据项目实际需求（如数据源类型、实时性要求等）明确主推方案，并提供迁移路径。|伍志勇|12月5日|\n|5|4.2.3.2.5 设计实现|实现复杂度|数据元标准模块的状态流转（启用/禁用/发布/撤销发布/归档/删除）逻辑较为复杂，建议简化状态机或提供清晰的状态转换流程图，降低开发和测试难度。|伍志勇|12月5日|\n|6|5.0 接口设计|文档完整性|文档中提到统一API规范，但未提供完整的接口定义（如OpenAPI规范）。建议补充核心模块的接口文档，包括请求/响应格式、参数说明和错误码定义，确保前后端开发的一致性。|伍志勇|12月5日|\n|7|6.0 数据模型|数据一致性|多个表之间存在外键关系（如field_standard_mapping与metadata_entity），但未明确事务管理策略。建议补充分布式事务或最终一致性方案，确保跨表操作的数据完整性。|伍志勇|12月5日|\n|8|7.0 系统部署与集成设计|文档完整性|未提供详细的部署架构图和集成方案。建议补充服务器配置要求、网络拓扑、部署流程和集成测试方案，确保系统能够顺利部署和运行。|伍志勇|12月5日|\n|9|8.0 非功能设计|性能瓶颈|未明确系统的性能指标和优化策略。建议补充QPS、响应时间、并发用户数等关键性能指标，以及针对大数据量场景的优化方案（如分库分表、缓存策略等）。|伍志勇|12月5日|\n|10|各模块设计|可扩展性|部分模块（如元数据采集、质量检测）未提供插件化或扩展机制。建议设计插件框架，支持新数据源、新规则类型的快速接入，提高系统的可扩展性。|伍志勇|12月5日|\n\n## 总体评价\n\n### 优点\n1. **文档结构完整**：涵盖了业务架构、技术架构、功能模块、数据模型等关键部分，为开发提供了较为全面的指导。\n2. **技术栈选择合理**：前端采用Vue3 + TypeScript，后端采用Java 17 + Spring Boot 3，符合当前主流技术趋势。\n3. **数据模型设计细致**：核心业务表的字段定义、约束和索引设计较为完善，考虑了数据一致性和查询性能。\n4. **功能模块划分清晰**：按照业务域划分模块，边界较为明确，便于团队协作开发。\n\n### 不足\n1. **微服务架构设计不够详细**：服务间的依赖关系、通信方式和治理方案需要进一步明确。\n2. **技术选型存在不确定性**：部分模块（如元数据采集）同时提到多种方案，但未明确最终选择。\n3. **非功能需求考虑不足**：性能、可用性、可扩展性等非功能指标需要进一步量化和明确。\n4. **部署和集成方案缺失**：缺少详细的部署架构和集成测试方案，可能影响系统的顺利实施。\n\n### 改进建议\n1. **明确技术选型**：针对元数据采集等存在多种方案的模块，明确最终选择并提供实施路径。\n2. **补充架构细节**：完善微服务治理方案、服务依赖图和数据同步机制，确保架构的可落地性。\n3. **量化非功能指标**：明确系统的性能、可用性等非功能需求，并提供相应的优化方案。\n4. **完善部署文档**：补充详细的部署架构图、服务器配置要求和集成测试方案，降低部署风险。\n5. **简化复杂流程**：对数据元标准等模块的复杂状态流转逻辑进行简化，提高开发效率。\n\n## 结论\n\n该详细设计文档为数据资产管理平台的开发提供了较为全面的指导，但在微服务架构设计、技术选型明确性、非功能需求和部署方案等方面仍需要进一步完善。建议在实施前补充上述内容，确保设计方案的可落地性和技术合理性。",
  "size" : 5297,
  "modifiedAt" : 1764915765292,
  "id" : "技术案例/TDD-数据资产管理平台-详细设计评审报告.md",
  "content" : "# 数据资产管理平台 - 详细设计文档评审报告\n\n## 评审概述\n\n**被评审文档**：数据资产管理平台-详细设计文档 (TDD)\n**版本**：v1.0\n**评审人**：伍志勇\n**评审时间**：12月5日\n**评审类型**：全面技术评审\n**评审重点**：从可落地实施角度评估设计方案的可行性、完整性和技术合理性\n\n## 评审结果\n\n|问题序号|所在章节|问题类型|评审意见|评审人|评审时间|\n|-|-|-|-|-|-|\n|1|3.2.2 技术栈与基础设施|技术选型|文档中提到后端采用模块化微服务架构（metadata-service、quality-service等），但未明确是否采用Spring Cloud等微服务框架。建议补充微服务治理方案（服务注册与发现、配置中心等），确保服务间通信和管理的可落地性。|伍志勇|12月5日|\n|2|3.2.3 分层架构与服务边界|架构设计|服务划分较为细致，但未明确服务间的依赖关系和调用方式。建议补充服务依赖图和调用关系说明，避免服务间耦合度过高导致的部署和维护困难。|伍志勇|12月5日|\n|3|3.2.4 数据模型与存储设计|架构设计|存储选型包含MySQL、Neo4j、ElasticSearch、Redis和MinIO，技术栈较为复杂。建议补充各存储系统的使用边界和数据同步机制，确保数据一致性和系统可维护性。|伍志勇|12月5日|\n|4|4.2.2.2 元数据采集|技术选型|文档同时提到Apache Atlas和DataHub两种元数据采集方案，但未明确选择标准和实施路径。建议根据项目实际需求（如数据源类型、实时性要求等）明确主推方案，并提供迁移路径。|伍志勇|12月5日|\n|5|4.2.3.2.5 设计实现|实现复杂度|数据元标准模块的状态流转（启用/禁用/发布/撤销发布/归档/删除）逻辑较为复杂，建议简化状态机或提供清晰的状态转换流程图，降低开发和测试难度。|伍志勇|12月5日|\n|6|5.0 接口设计|文档完整性|文档中提到统一API规范，但未提供完整的接口定义（如OpenAPI规范）。建议补充核心模块的接口文档，包括请求/响应格式、参数说明和错误码定义，确保前后端开发的一致性。|伍志勇|12月5日|\n|7|6.0 数据模型|数据一致性|多个表之间存在外键关系（如field_standard_mapping与metadata_entity），但未明确事务管理策略。建议补充分布式事务或最终一致性方案，确保跨表操作的数据完整性。|伍志勇|12月5日|\n|8|7.0 系统部署与集成设计|文档完整性|未提供详细的部署架构图和集成方案。建议补充服务器配置要求、网络拓扑、部署流程和集成测试方案，确保系统能够顺利部署和运行。|伍志勇|12月5日|\n|9|8.0 非功能设计|性能瓶颈|未明确系统的性能指标和优化策略。建议补充QPS、响应时间、并发用户数等关键性能指标，以及针对大数据量场景的优化方案（如分库分表、缓存策略等）。|伍志勇|12月5日|\n|10|各模块设计|可扩展性|部分模块（如元数据采集、质量检测）未提供插件化或扩展机制。建议设计插件框架，支持新数据源、新规则类型的快速接入，提高系统的可扩展性。|伍志勇|12月5日|\n\n## 总体评价\n\n### 优点\n1. **文档结构完整**：涵盖了业务架构、技术架构、功能模块、数据模型等关键部分，为开发提供了较为全面的指导。\n2. **技术栈选择合理**：前端采用Vue3 + TypeScript，后端采用Java 17 + Spring Boot 3，符合当前主流技术趋势。\n3. **数据模型设计细致**：核心业务表的字段定义、约束和索引设计较为完善，考虑了数据一致性和查询性能。\n4. **功能模块划分清晰**：按照业务域划分模块，边界较为明确，便于团队协作开发。\n\n### 不足\n1. **微服务架构设计不够详细**：服务间的依赖关系、通信方式和治理方案需要进一步明确。\n2. **技术选型存在不确定性**：部分模块（如元数据采集）同时提到多种方案，但未明确最终选择。\n3. **非功能需求考虑不足**：性能、可用性、可扩展性等非功能指标需要进一步量化和明确。\n4. **部署和集成方案缺失**：缺少详细的部署架构和集成测试方案，可能影响系统的顺利实施。\n\n### 改进建议\n1. **明确技术选型**：针对元数据采集等存在多种方案的模块，明确最终选择并提供实施路径。\n2. **补充架构细节**：完善微服务治理方案、服务依赖图和数据同步机制，确保架构的可落地性。\n3. **量化非功能指标**：明确系统的性能、可用性等非功能需求，并提供相应的优化方案。\n4. **完善部署文档**：补充详细的部署架构图、服务器配置要求和集成测试方案，降低部署风险。\n5. **简化复杂流程**：对数据元标准等模块的复杂状态流转逻辑进行简化，提高开发效率。\n\n## 结论\n\n该详细设计文档为数据资产管理平台的开发提供了较为全面的指导，但在微服务架构设计、技术选型明确性、非功能需求和部署方案等方面仍需要进一步完善。建议在实施前补充上述内容，确保设计方案的可落地性和技术合理性。",
  "lastModified" : 1764915765292
}, {
  "filePath" : "README.md",
  "fileName" : "README.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "README.md",
  "contentText" : "# 测试文档\n\n这是一个测试文档，用于验证文件预览功能。\n\n## 功能说明\n\n- 文件预览\n- 目录树显示\n- 搜索功能\n\n## 使用说明\n\n1. 启动后端服务\n2. 启动前端服务\n3. 访问 http://localhost:5187",
  "size" : 236,
  "modifiedAt" : 1764659818133,
  "id" : "README.md",
  "content" : "# 测试文档\n\n这是一个测试文档，用于验证文件预览功能。\n\n## 功能说明\n\n- 文件预览\n- 目录树显示\n- 搜索功能\n\n## 使用说明\n\n1. 启动后端服务\n2. 启动前端服务\n3. 访问 http://localhost:5187",
  "lastModified" : 1764659818133
}, {
  "filePath" : "sample.md",
  "fileName" : "sample.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "sample.md",
  "contentText" : "# 示例文档\n\n这是一个示例Markdown文档。\n\n## 章节1\n\n这里是章节1的内容。\n\n## 章节2\n\n这里是章节2的内容。\n\n### 子章节\n\n- 列表项1\n- 列表项2\n- 列表项3",
  "size" : 190,
  "modifiedAt" : 1764659823901,
  "id" : "sample.md",
  "content" : "# 示例文档\n\n这是一个示例Markdown文档。\n\n## 章节1\n\n这里是章节1的内容。\n\n## 章节2\n\n这里是章节2的内容。\n\n### 子章节\n\n- 列表项1\n- 列表项2\n- 列表项3",
  "lastModified" : 1764659823901
}, {
  "filePath" : "深度调研报告.html",
  "fileName" : "深度调研报告.html",
  "parentDir" : "",
  "fileType" : "HTML",
  "title" : "商业地产与公寓租赁认证体系详解及中国市场成功案例",
  "contentText" : "商业地产与公寓租赁认证体系详解及中国市场成功案例 目录 引言 LEED认证体系官方标准 LEED v5 核心变革 四大核心支柱 生命周期评估 性能导向方法 认证等级与评分体系 总分与等级 评估维度 官方标准文档 BOMA COE认证 认证核心目标 五项核心评估指标 官方标准文档 中国市场公寓租赁案例 城市更新与旧改公寓 高端服务式公寓 学生公寓与早期探索 其他商业地产案例 总结与展望 商业地产与公寓租赁 认证体系详解 深度解析LEED v5与BOMA COE认证标准，探索中国绿色地产成功案例 核心洞察 LEED v5将\"脱碳\"作为核心，强制要求全生命周期碳评估 BOMA COE认证要求五大领域均达到90分高标准 中国多个项目成功获得双重铂金级认证 研究范围 认证体系： LEED v5, BOMA COE, 及中国市场实践 案例覆盖： 北上广深等一线城市成功项目 时间跨度： 2013-2025年发展历程 引言 在可持续发展的全球浪潮下，商业地产与公寓租赁领域的绿色建筑及运营管理认证正成为提升资产价值、吸引优质租户和实现可持续发展的关键战略工具。随着环境法规日趋严格和投资者ESG意识的增强，LEED和BOMA COE等国际认证标准不仅成为建筑品质的权威背书，更是连接国际资本市场、提升融资优势的重要桥梁。 \"LEED v5版本将'脱碳'作为核心，强制要求对建筑全生命周期的碳排放进行评估，标志着绿色建筑认证进入了一个以性能为导向、全面关注建筑全生命周期影响的新阶段。\" 与此同时，BOMA COE认证通过评估建筑运营、营销、能源、培训和环境五大领域的90分高标准，确保卓越的资产管理水平。在中国市场上，已成功涌现出大量典型案例，如上海COZI可遇·虹桥通过旧改获得LEED金级认证，广州IFC服务式公寓同时获得LEED铂金级和BOMA全优认证，这些项目不仅提升了自身的市场竞争力，也为行业树立了绿色、高效运营的标杆。 商业地产认证体系官方标准详解 LEED认证体系 (能源与环境设计先锋) 最新标准：LEED v5 核心变革 LEED（能源与环境设计先锋）认证体系由美国绿色建筑委员会（USGBC）制定，是全球公认的绿色建筑评估标准。其最新版本LEED v5于2025年发布，标志着该体系进入了一个以性能为导向、全面关注建筑全生命周期影响的新阶段[358]。此次更新不仅是对现有标准的迭代，更是对全球气候变化、社会公平和生态系统退化等紧迫挑战的积极回应。 四大核心支柱：去碳化、生活质量、生态保护与恢复、公平性 graph TD A[\"LEED v5 四大核心支柱\"] --> B[\"去碳化 50%权重\"] A --> C[\"生活质量 25%权重\"] A --> D[\"生态保护与恢复 25%权重\"] A --> E[\"公平性 交叉主题\"] B --> B1[\"运营碳减排\"] B --> B2[\"隐含碳管理\"] B --> B3[\"能源效率提升\"] B --> B4[\"100%可再生能源\"] C --> C1[\"室内空气质量\"] C --> C2[\"亲生命性设计\"] C --> C3[\"无障碍通行\"] C --> C4[\"健康与福祉\"] D --> D1[\"生态系统保护\"] D --> D2[\"生物多样性\"] D --> D3[\"水资源管理\"] D --> D4[\"材料循环利用\"] E --> E1[\"社会包容性\"] E --> E2[\"社区影响\"] E --> E3[\"经济可及性\"] E --> E4[\"文化敏感性\"] style A fill:#2D5016,color:#ffffff,stroke:#87A96B,stroke-width:3px style B fill:#87A96B,color:#ffffff,stroke:#2D5016,stroke-width:2px style C fill:#F5F2E8,color:#2D5016,stroke:#87A96B,stroke-width:2px style D fill:#ffffff,color:#2D5016,stroke:#87A96B,stroke-width:2px style E fill:#2C2C2C,color:#ffffff,stroke:#87A96B,stroke-width:2px LEED v5的体系架构建立在四大核心支柱之上，旨在全面应对21世纪建筑行业面临的复杂挑战。\"去碳化\"作为首要支柱，占据了评分体系中高达50%的权重 [258] [278]，明确要求项目必须采取系统性措施来降低运营碳和隐含碳，推动建筑实现净零排放甚至负碳目标。 生命周期评估（LCA）：将隐含碳和运营碳纳入强制性评估 LEED v5在方法论上的一个重大突破是强制性地将生命周期评估（Life Cycle Assessment, LCA）纳入认证流程。新版标准引入了\"碳评估（Carbon Assessment）\"作为所有项目必须满足的先决条件，要求项目团队在设计早期就必须对建筑的运营碳排放和隐含碳排放进行量化估算和规划[253]。 LEED v5 碳评估新要求： 强制性生命周期评估 - 所有项目必须进行运营碳和隐含碳评估 隐含碳量化 - 使用符合ISO 14040/44标准的方法进行碳清查 碳减排策略 - 通过材料替代、设计优化等方式减少内含碳 持续监测 - 建立长期碳排放监测和管理机制 性能导向：强调建筑的实际运行性能而非仅设计指标 LEED v5的一个显著趋势是更加强调建筑的实际运行性能，而非仅仅停留在设计阶段的预测和承诺。新版标准鼓励并越来越多地要求使用基于性能的监测和验证方法[260]。 对于既有建筑，LEED O+M（运营与维护）体系更是完全基于实际运营数据来进行评估。这种向性能导向的转变，不仅提升了认证的公信力，也为建筑业主和运营商提供了持续改进的工具。 认证等级与评分体系 总分与等级 LEED认证的评分体系以110分为满分 [250] [252]，项目通过满足各项先决条件和选择性地完成得分项来累积分数。 认证级（Certified） 40-49分 银级（Silver） 50-59分 金级（Gold） 60-79分 铂金级（Platinum） ≥80分 *LEED v5对铂金级认证提出更高要求：必须实现100%可再生能源使用，消除现场化石燃料燃烧[278] 主要评估维度 LEED认证的评分体系围绕多个核心维度展开，全面评估建筑在环境、社会和经济方面的综合表现[252]。 整合过程（Integrative Process） 选址与交通（Location & Transportation） 可持续场地（Sustainable Sites） 节水效率（Water Efficiency） 能源与大气（Energy & Atmosphere） 材料与资源（Materials & Resources） 室内环境质量（Indoor Environmental Quality） 创新（Innovation） 区域优先（Regional Priority） *LEED v5将\"创新\"和\"区域优先\"合并为\"项目优先级（Project Priorities）\"[260] 官方标准文档与资源 官方参考指南 USGBC为每一种LEED评级系统都发布了详尽的官方参考指南，这是项目团队进行LEED认证的最核心、最权威的技术文件[247]。 • LEED v5 BD+C 参考指南 • LEED v5 ID+C 参考指南 • LEED v5 O+M 参考指南 评分卡（Scorecard） USGBC提供官方的评分卡，以表格形式清晰地列出每个评级系统下的所有先决条件和得分项，并标注相应分值[246]。 • 交互式在线评分工具 • PDF版本评分卡下载 • 实时总分计算功能 官方资源库 USGBC官网建立了庞大的在线资源库，包括LEED信用库和项目优先级库等[259]。 • LEED信用库查询 • 项目优先级库 • 试点信用和创新策略 BOMA COE认证 (建筑管理卓越认证) BOMA建筑管理卓越认证（Certificate of Excellence, COE）是由国际建筑业主与管理者协会（BOMA）推出的一项针对商业地产运营管理的专业认证。该认证旨在通过一套国际公认的、基于最佳实践的管理标准，全面评估和提升商业建筑在运营、管理、营销、能源及环境等方面的综合表现。 认证核心目标 提升资产价值 通过优化建筑运营管理、能源管理和环境管理等关键领域，认证项目能够显著降低运营成本，提高能源效率，从而直接增加净营业收入（NOI），最终反映为资产价值的提升。 • 降低运营成本 • 提高能源效率 • 增加净营业收入 • 提升租户满意度 风险管理 将风险管理理念融入到日常运营的各个环节，要求建立精细化和常态化的风险管理机制，提前识别和规避潜在风险。 • 预防性维护计划 • 应急预案制定 • 能源系统监控 • 合规性管理 五项核心评估指标与90分要求 BOMA COE认证的评估体系围绕商业地产运营管理的五个核心维度展开。根据BOMA中国的官方介绍，申请认证的项目必须在这五个方面的评估中，每一项的得分都达到90%或以上，才能获得最终的COE认证证书[218]。 评估维度 英文名称 核心内容 建筑运营管理 Building Operations and Management 评估建筑的日常运营效率，包括预防性维护计划、设备设施管理、安全与安保体系、清洁与保洁标准等。 营销与沟通 Marketing and Communications 评估管理团队与现有租户及潜在市场的沟通策略和效果，包括租户关系管理、市场推广活动、沟通渠道的多样性和有效性等。 能源管理 Energy Management 评估建筑的能源使用效率和管理策略，包括能源审计、节能改造、能源监控系统的应用以及节能目标的设定与达成。 培训管理 Training and Management 评估管理团队的专业能力和持续学习计划，包括员工培训体系、职业发展路径、应急预案培训以及对行业最佳实践的了解和应用。 环境管理 Environmental Management 评估建筑在环境保护和可持续发展方面的表现，包括废弃物管理与回收、室内空气质量监控、绿色采购政策以及对环境法规的遵守。 数据来源：[218] 官方标准文档与资源 官方指南 (Guidebook) BOMA发布针对特定年份和建筑类型的认证指南，如2025年的《Certificate of Excellence Guidebook for Office Buildings》[218]。 • 详细认证流程说明 • 五项核心评估指标要求 • 评分标准解释 • 证明材料清单 GRESB认可 BOMA中国COE认证获得了全球房地产可持续评估体系（GRESB）的认可 [218]，这是其国际影响力的重要体现。 • 提升ESG评级 • 增强融资优势 • 国际资本市场认可 • 投资者信心提升 中国市场公寓租赁场景认证成功案例 城市更新与旧改公寓案例 COZI可遇·虹桥 (上海) COZI可遇·虹桥项目是城市更新背景下，将存量商业资产改造为高品质长租公寓的典范之作。该项目由领盛投资主导，其前身是一处空置多年的旧商场。通过创新的改造理念和精细化的绿色设计，项目成功地将一个低效的城市空间转变为集舒适居住、绿色建筑、公共社交和商业配套于一体的现代化长租社区[359]。 认证成就 获得LEED v4.1住宅体系的金级认证，成为上海首个获此殊荣的长租公寓项目 [359]。 关键成功因素 绿色改造策略 • 优化建筑围护结构 • 高效节能机电设备 • 节水器具安装 • 环保本地装修材料 创新亮点 • 绿色金融支持城市更新 • 保留原有建筑主体结构 • 创造健康舒适室内环境 • 提升城市空间利用效率 高端服务式公寓与综合体内公寓案例 深圳前海嘉里中心公寓 深圳前海嘉里中心公寓是高端服务式公寓领域践行可持续发展理念的杰出代表。该项目位于深圳前海深港现代服务业合作区，凭借其创新的可持续设计、卓越的建造品质和对居住者体验的深度关注，成为中国首个入围USGBC年度LEED住宅大奖的项目 [361]。 认证等级：LEED金级认证 • 社区型LEED住宅项目 • 高效空调系统 • 节水器具应用 • 绿色建材选择 广州国际金融中心（IFC）服务式公寓 广州国际金融中心（IFC）作为华南地区的地标性超高层建筑，其服务式公寓部分在运营管理方面达到了国际顶尖水平。项目致力于将国际标准与本地实践相结合，通过精细化的管理和持续的技术创新，为租户提供卓越的服务和健康的室内环境[352]。 认证成就：LEED V4.1 O+M铂金级认证 + BOMA全优认证 • BOMA租户满意度高达89% • 双铂金级认证 • 以绿引商策略成功 • 超高层建筑标杆 学生公寓与早期探索案例 中欧国际工商学院学生公寓 (上海) 中欧国际工商学院（CEIBS）上海校区的学生公寓，是中国在教育建筑领域探索绿色可持续发展的早期先行者之一。该公寓建于2013年，从策划、设计到施工的全过程，都严格遵循了美国LEED认证标准[349]。 认证成就：LEED金奖认证，中国商学院首个获此殊荣的项目 设计特色 • 自然采光和通风优化 • 高效节能设备应用 • 环保材料选择 • 独立卫浴和24小时空调 创新意义 • 教育建筑绿色标杆 • 提升学院品牌形象 • 国际一流商学院标准 • 校园吸引力增强 深圳泰格公寓 深圳泰格公寓在中国绿色建筑发展史上占有重要地位，它是中国第一栋获得LEED认证的住宅建筑，由招商地产于2000年代初期开发[362]。 认证成就：LEED-NC (V2) 银级认证，总分37分（满分69分） 技术创新 • 被动式设计策略 • 建筑遮阳优化 • 自然通风系统 • 空气源热泵热水器 成本管理 • 生命周期成本分析 • 初投资增加挑战克服 • 长期运营成本节约 • \"特批\"创新管理模式 其他商业地产认证成功案例 北京嘉铭中心 北京嘉铭中心是位于北京核心商务区的高端商业办公楼，总建筑面积达90,504平方米。项目成为中国首个获得BOMA COE五项卓越证书的项目[351]。 认证成就：BOMA COE五项卓越证书 • 建筑运营管理 >90分 • 能源管理 >90分 • 培训管理 >90分 • 营销与沟通 >90分 • 环境管理 >90分 上海中心大厦 作为中国最高的建筑和上海的标志性摩天大楼，上海中心大厦成功获得了LEED铂金级认证和BOMA卓越管理认证[326]。 租户满意度：96分（远超行业平均水平） • 先进楼宇自控系统 • 精细化能源管理 • 优质租户服务 • 健康室内环境 武汉越秀财富中心 武汉越秀财富中心成功获得了LEED V4.1 O+M铂金级认证和\"净零碳建筑卓越级\"认证，在运营阶段实现了碳排放的显著降低。 双重认证：LEED铂金级 + 净零碳建筑 • 节能改造持续优化 • 智能化管理平台 • 绿色运营计划 • 低碳高效运营 总结与展望 关键趋势与洞察 脱碳成为核心焦点 LEED v5将生命周期评估作为强制性要求，推动建筑行业向净零碳目标迈进 性能导向评估 从设计指标向实际运行性能转变，确保认证建筑真正实现可持续目标 运营管理重要性提升 BOMA COE认证通过90分高标准，推动卓越资产管理实践 中国市场实践成果 双重认证项目涌现 广州IFC等项目同时获得LEED铂金级和BOMA全优认证，树立行业标杆 城市更新成功案例 上海COZI可遇·虹桥等项目通过旧改获得LEED金级认证，实现多方效益统一 教育建筑绿色探索 中欧国际工商学院学生公寓等早期项目为中国绿色建筑发展提供宝贵经验 未来发展展望 随着全球气候变化挑战日益严峻，绿色建筑认证体系将继续演进，更加注重建筑的全生命周期影响和实际运行性能。在中国市场，随着ESG投资理念的普及和政策法规的完善，LEED和BOMA等国际认证将发挥更加重要的作用，成为连接国际资本市场、提升资产价值的关键工具。 未来，我们预期将看到更多创新性的绿色技术和管理实践在中国商业地产领域得到应用，特别是在城市更新、既有建筑改造和高端服务式公寓等细分市场。同时，随着认证标准的不断细化和本土化，中国项目在国际认证中的表现将更加出色，为全球绿色建筑发展贡献中国智慧和方案。 \"绿色建筑认证不仅是技术标准的体现，更是可持续发展理念的实践。通过严格的认证标准和卓越的运营管理，商业地产项目能够实现环境效益、社会效益和经济效益的统一，为构建更加可持续的城市未来贡献力量。\"",
  "size" : 70638,
  "modifiedAt" : 1764746916793,
  "id" : "深度调研报告.html",
  "content" : "商业地产与公寓租赁认证体系详解及中国市场成功案例 目录 引言 LEED认证体系官方标准 LEED v5 核心变革 四大核心支柱 生命周期评估 性能导向方法 认证等级与评分体系 总分与等级 评估维度 官方标准文档 BOMA COE认证 认证核心目标 五项核心评估指标 官方标准文档 中国市场公寓租赁案例 城市更新与旧改公寓 高端服务式公寓 学生公寓与早期探索 其他商业地产案例 总结与展望 商业地产与公寓租赁 认证体系详解 深度解析LEED v5与BOMA COE认证标准，探索中国绿色地产成功案例 核心洞察 LEED v5将\"脱碳\"作为核心，强制要求全生命周期碳评估 BOMA COE认证要求五大领域均达到90分高标准 中国多个项目成功获得双重铂金级认证 研究范围 认证体系： LEED v5, BOMA COE, 及中国市场实践 案例覆盖： 北上广深等一线城市成功项目 时间跨度： 2013-2025年发展历程 引言 在可持续发展的全球浪潮下，商业地产与公寓租赁领域的绿色建筑及运营管理认证正成为提升资产价值、吸引优质租户和实现可持续发展的关键战略工具。随着环境法规日趋严格和投资者ESG意识的增强，LEED和BOMA COE等国际认证标准不仅成为建筑品质的权威背书，更是连接国际资本市场、提升融资优势的重要桥梁。 \"LEED v5版本将'脱碳'作为核心，强制要求对建筑全生命周期的碳排放进行评估，标志着绿色建筑认证进入了一个以性能为导向、全面关注建筑全生命周期影响的新阶段。\" 与此同时，BOMA COE认证通过评估建筑运营、营销、能源、培训和环境五大领域的90分高标准，确保卓越的资产管理水平。在中国市场上，已成功涌现出大量典型案例，如上海COZI可遇·虹桥通过旧改获得LEED金级认证，广州IFC服务式公寓同时获得LEED铂金级和BOMA全优认证，这些项目不仅提升了自身的市场竞争力，也为行业树立了绿色、高效运营的标杆。 商业地产认证体系官方标准详解 LEED认证体系 (能源与环境设计先锋) 最新标准：LEED v5 核心变革 LEED（能源与环境设计先锋）认证体系由美国绿色建筑委员会（USGBC）制定，是全球公认的绿色建筑评估标准。其最新版本LEED v5于2025年发布，标志着该体系进入了一个以性能为导向、全面关注建筑全生命周期影响的新阶段[358]。此次更新不仅是对现有标准的迭代，更是对全球气候变化、社会公平和生态系统退化等紧迫挑战的积极回应。 四大核心支柱：去碳化、生活质量、生态保护与恢复、公平性 graph TD A[\"LEED v5 四大核心支柱\"] --> B[\"去碳化 50%权重\"] A --> C[\"生活质量 25%权重\"] A --> D[\"生态保护与恢复 25%权重\"] A --> E[\"公平性 交叉主题\"] B --> B1[\"运营碳减排\"] B --> B2[\"隐含碳管理\"] B --> B3[\"能源效率提升\"] B --> B4[\"100%可再生能源\"] C --> C1[\"室内空气质量\"] C --> C2[\"亲生命性设计\"] C --> C3[\"无障碍通行\"] C --> C4[\"健康与福祉\"] D --> D1[\"生态系统保护\"] D --> D2[\"生物多样性\"] D --> D3[\"水资源管理\"] D --> D4[\"材料循环利用\"] E --> E1[\"社会包容性\"] E --> E2[\"社区影响\"] E --> E3[\"经济可及性\"] E --> E4[\"文化敏感性\"] style A fill:#2D5016,color:#ffffff,stroke:#87A96B,stroke-width:3px style B fill:#87A96B,color:#ffffff,stroke:#2D5016,stroke-width:2px style C fill:#F5F2E8,color:#2D5016,stroke:#87A96B,stroke-width:2px style D fill:#ffffff,color:#2D5016,stroke:#87A96B,stroke-width:2px style E fill:#2C2C2C,color:#ffffff,stroke:#87A96B,stroke-width:2px LEED v5的体系架构建立在四大核心支柱之上，旨在全面应对21世纪建筑行业面临的复杂挑战。\"去碳化\"作为首要支柱，占据了评分体系中高达50%的权重 [258] [278]，明确要求项目必须采取系统性措施来降低运营碳和隐含碳，推动建筑实现净零排放甚至负碳目标。 生命周期评估（LCA）：将隐含碳和运营碳纳入强制性评估 LEED v5在方法论上的一个重大突破是强制性地将生命周期评估（Life Cycle Assessment, LCA）纳入认证流程。新版标准引入了\"碳评估（Carbon Assessment）\"作为所有项目必须满足的先决条件，要求项目团队在设计早期就必须对建筑的运营碳排放和隐含碳排放进行量化估算和规划[253]。 LEED v5 碳评估新要求： 强制性生命周期评估 - 所有项目必须进行运营碳和隐含碳评估 隐含碳量化 - 使用符合ISO 14040/44标准的方法进行碳清查 碳减排策略 - 通过材料替代、设计优化等方式减少内含碳 持续监测 - 建立长期碳排放监测和管理机制 性能导向：强调建筑的实际运行性能而非仅设计指标 LEED v5的一个显著趋势是更加强调建筑的实际运行性能，而非仅仅停留在设计阶段的预测和承诺。新版标准鼓励并越来越多地要求使用基于性能的监测和验证方法[260]。 对于既有建筑，LEED O+M（运营与维护）体系更是完全基于实际运营数据来进行评估。这种向性能导向的转变，不仅提升了认证的公信力，也为建筑业主和运营商提供了持续改进的工具。 认证等级与评分体系 总分与等级 LEED认证的评分体系以110分为满分 [250] [252]，项目通过满足各项先决条件和选择性地完成得分项来累积分数。 认证级（Certified） 40-49分 银级（Silver） 50-59分 金级（Gold） 60-79分 铂金级（Platinum） ≥80分 *LEED v5对铂金级认证提出更高要求：必须实现100%可再生能源使用，消除现场化石燃料燃烧[278] 主要评估维度 LEED认证的评分体系围绕多个核心维度展开，全面评估建筑在环境、社会和经济方面的综合表现[252]。 整合过程（Integrative Process） 选址与交通（Location & Transportation） 可持续场地（Sustainable Sites） 节水效率（Water Efficiency） 能源与大气（Energy & Atmosphere） 材料与资源（Materials & Resources） 室内环境质量（Indoor Environmental Quality） 创新（Innovation） 区域优先（Regional Priority） *LEED v5将\"创新\"和\"区域优先\"合并为\"项目优先级（Project Priorities）\"[260] 官方标准文档与资源 官方参考指南 USGBC为每一种LEED评级系统都发布了详尽的官方参考指南，这是项目团队进行LEED认证的最核心、最权威的技术文件[247]。 • LEED v5 BD+C 参考指南 • LEED v5 ID+C 参考指南 • LEED v5 O+M 参考指南 评分卡（Scorecard） USGBC提供官方的评分卡，以表格形式清晰地列出每个评级系统下的所有先决条件和得分项，并标注相应分值[246]。 • 交互式在线评分工具 • PDF版本评分卡下载 • 实时总分计算功能 官方资源库 USGBC官网建立了庞大的在线资源库，包括LEED信用库和项目优先级库等[259]。 • LEED信用库查询 • 项目优先级库 • 试点信用和创新策略 BOMA COE认证 (建筑管理卓越认证) BOMA建筑管理卓越认证（Certificate of Excellence, COE）是由国际建筑业主与管理者协会（BOMA）推出的一项针对商业地产运营管理的专业认证。该认证旨在通过一套国际公认的、基于最佳实践的管理标准，全面评估和提升商业建筑在运营、管理、营销、能源及环境等方面的综合表现。 认证核心目标 提升资产价值 通过优化建筑运营管理、能源管理和环境管理等关键领域，认证项目能够显著降低运营成本，提高能源效率，从而直接增加净营业收入（NOI），最终反映为资产价值的提升。 • 降低运营成本 • 提高能源效率 • 增加净营业收入 • 提升租户满意度 风险管理 将风险管理理念融入到日常运营的各个环节，要求建立精细化和常态化的风险管理机制，提前识别和规避潜在风险。 • 预防性维护计划 • 应急预案制定 • 能源系统监控 • 合规性管理 五项核心评估指标与90分要求 BOMA COE认证的评估体系围绕商业地产运营管理的五个核心维度展开。根据BOMA中国的官方介绍，申请认证的项目必须在这五个方面的评估中，每一项的得分都达到90%或以上，才能获得最终的COE认证证书[218]。 评估维度 英文名称 核心内容 建筑运营管理 Building Operations and Management 评估建筑的日常运营效率，包括预防性维护计划、设备设施管理、安全与安保体系、清洁与保洁标准等。 营销与沟通 Marketing and Communications 评估管理团队与现有租户及潜在市场的沟通策略和效果，包括租户关系管理、市场推广活动、沟通渠道的多样性和有效性等。 能源管理 Energy Management 评估建筑的能源使用效率和管理策略，包括能源审计、节能改造、能源监控系统的应用以及节能目标的设定与达成。 培训管理 Training and Management 评估管理团队的专业能力和持续学习计划，包括员工培训体系、职业发展路径、应急预案培训以及对行业最佳实践的了解和应用。 环境管理 Environmental Management 评估建筑在环境保护和可持续发展方面的表现，包括废弃物管理与回收、室内空气质量监控、绿色采购政策以及对环境法规的遵守。 数据来源：[218] 官方标准文档与资源 官方指南 (Guidebook) BOMA发布针对特定年份和建筑类型的认证指南，如2025年的《Certificate of Excellence Guidebook for Office Buildings》[218]。 • 详细认证流程说明 • 五项核心评估指标要求 • 评分标准解释 • 证明材料清单 GRESB认可 BOMA中国COE认证获得了全球房地产可持续评估体系（GRESB）的认可 [218]，这是其国际影响力的重要体现。 • 提升ESG评级 • 增强融资优势 • 国际资本市场认可 • 投资者信心提升 中国市场公寓租赁场景认证成功案例 城市更新与旧改公寓案例 COZI可遇·虹桥 (上海) COZI可遇·虹桥项目是城市更新背景下，将存量商业资产改造为高品质长租公寓的典范之作。该项目由领盛投资主导，其前身是一处空置多年的旧商场。通过创新的改造理念和精细化的绿色设计，项目成功地将一个低效的城市空间转变为集舒适居住、绿色建筑、公共社交和商业配套于一体的现代化长租社区[359]。 认证成就 获得LEED v4.1住宅体系的金级认证，成为上海首个获此殊荣的长租公寓项目 [359]。 关键成功因素 绿色改造策略 • 优化建筑围护结构 • 高效节能机电设备 • 节水器具安装 • 环保本地装修材料 创新亮点 • 绿色金融支持城市更新 • 保留原有建筑主体结构 • 创造健康舒适室内环境 • 提升城市空间利用效率 高端服务式公寓与综合体内公寓案例 深圳前海嘉里中心公寓 深圳前海嘉里中心公寓是高端服务式公寓领域践行可持续发展理念的杰出代表。该项目位于深圳前海深港现代服务业合作区，凭借其创新的可持续设计、卓越的建造品质和对居住者体验的深度关注，成为中国首个入围USGBC年度LEED住宅大奖的项目 [361]。 认证等级：LEED金级认证 • 社区型LEED住宅项目 • 高效空调系统 • 节水器具应用 • 绿色建材选择 广州国际金融中心（IFC）服务式公寓 广州国际金融中心（IFC）作为华南地区的地标性超高层建筑，其服务式公寓部分在运营管理方面达到了国际顶尖水平。项目致力于将国际标准与本地实践相结合，通过精细化的管理和持续的技术创新，为租户提供卓越的服务和健康的室内环境[352]。 认证成就：LEED V4.1 O+M铂金级认证 + BOMA全优认证 • BOMA租户满意度高达89% • 双铂金级认证 • 以绿引商策略成功 • 超高层建筑标杆 学生公寓与早期探索案例 中欧国际工商学院学生公寓 (上海) 中欧国际工商学院（CEIBS）上海校区的学生公寓，是中国在教育建筑领域探索绿色可持续发展的早期先行者之一。该公寓建于2013年，从策划、设计到施工的全过程，都严格遵循了美国LEED认证标准[349]。 认证成就：LEED金奖认证，中国商学院首个获此殊荣的项目 设计特色 • 自然采光和通风优化 • 高效节能设备应用 • 环保材料选择 • 独立卫浴和24小时空调 创新意义 • 教育建筑绿色标杆 • 提升学院品牌形象 • 国际一流商学院标准 • 校园吸引力增强 深圳泰格公寓 深圳泰格公寓在中国绿色建筑发展史上占有重要地位，它是中国第一栋获得LEED认证的住宅建筑，由招商地产于2000年代初期开发[362]。 认证成就：LEED-NC (V2) 银级认证，总分37分（满分69分） 技术创新 • 被动式设计策略 • 建筑遮阳优化 • 自然通风系统 • 空气源热泵热水器 成本管理 • 生命周期成本分析 • 初投资增加挑战克服 • 长期运营成本节约 • \"特批\"创新管理模式 其他商业地产认证成功案例 北京嘉铭中心 北京嘉铭中心是位于北京核心商务区的高端商业办公楼，总建筑面积达90,504平方米。项目成为中国首个获得BOMA COE五项卓越证书的项目[351]。 认证成就：BOMA COE五项卓越证书 • 建筑运营管理 >90分 • 能源管理 >90分 • 培训管理 >90分 • 营销与沟通 >90分 • 环境管理 >90分 上海中心大厦 作为中国最高的建筑和上海的标志性摩天大楼，上海中心大厦成功获得了LEED铂金级认证和BOMA卓越管理认证[326]。 租户满意度：96分（远超行业平均水平） • 先进楼宇自控系统 • 精细化能源管理 • 优质租户服务 • 健康室内环境 武汉越秀财富中心 武汉越秀财富中心成功获得了LEED V4.1 O+M铂金级认证和\"净零碳建筑卓越级\"认证，在运营阶段实现了碳排放的显著降低。 双重认证：LEED铂金级 + 净零碳建筑 • 节能改造持续优化 • 智能化管理平台 • 绿色运营计划 • 低碳高效运营 总结与展望 关键趋势与洞察 脱碳成为核心焦点 LEED v5将生命周期评估作为强制性要求，推动建筑行业向净零碳目标迈进 性能导向评估 从设计指标向实际运行性能转变，确保认证建筑真正实现可持续目标 运营管理重要性提升 BOMA COE认证通过90分高标准，推动卓越资产管理实践 中国市场实践成果 双重认证项目涌现 广州IFC等项目同时获得LEED铂金级和BOMA全优认证，树立行业标杆 城市更新成功案例 上海COZI可遇·虹桥等项目通过旧改获得LEED金级认证，实现多方效益统一 教育建筑绿色探索 中欧国际工商学院学生公寓等早期项目为中国绿色建筑发展提供宝贵经验 未来发展展望 随着全球气候变化挑战日益严峻，绿色建筑认证体系将继续演进，更加注重建筑的全生命周期影响和实际运行性能。在中国市场，随着ESG投资理念的普及和政策法规的完善，LEED和BOMA等国际认证将发挥更加重要的作用，成为连接国际资本市场、提升资产价值的关键工具。 未来，我们预期将看到更多创新性的绿色技术和管理实践在中国商业地产领域得到应用，特别是在城市更新、既有建筑改造和高端服务式公寓等细分市场。同时，随着认证标准的不断细化和本土化，中国项目在国际认证中的表现将更加出色，为全球绿色建筑发展贡献中国智慧和方案。 \"绿色建筑认证不仅是技术标准的体现，更是可持续发展理念的实践。通过严格的认证标准和卓越的运营管理，商业地产项目能够实现环境效益、社会效益和经济效益的统一，为构建更加可持续的城市未来贡献力量。\"",
  "lastModified" : 1764746916793
}, {
  "filePath" : "mermaid-test.md",
  "fileName" : "mermaid-test.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "mermaid-test.md",
  "contentText" : "# Mermaid 图表测试\n\n## 流程图\n\n```mermaid\ngraph TD\n    A[开始] --> B{判断}\n    B -- 是 --> C[执行操作]\n    B -- 否 --> D[结束]\n    C --> D\n```\n\n## 时序图\n\n```mermaid\nsequenceDiagram\n    participant Alice\n    participant Bob\n    Alice->>John: Hello John, how are you?\n    loop Healthcheck\n        John->>John: Fight against hypochondria\n    end\n    Note right of John: Rational thoughts <br/>prevail!\n    John-->>Alice: Great!\n    John->>Bob: How about you?\n    Bob-->>John: Jolly good!\n```\n",
  "size" : 512,
  "modifiedAt" : 1764767278130,
  "id" : "mermaid-test.md",
  "content" : "# Mermaid 图表测试\n\n## 流程图\n\n```mermaid\ngraph TD\n    A[开始] --> B{判断}\n    B -- 是 --> C[执行操作]\n    B -- 否 --> D[结束]\n    C --> D\n```\n\n## 时序图\n\n```mermaid\nsequenceDiagram\n    participant Alice\n    participant Bob\n    Alice->>John: Hello John, how are you?\n    loop Healthcheck\n        John->>John: Fight against hypochondria\n    end\n    Note right of John: Rational thoughts <br/>prevail!\n    John-->>Alice: Great!\n    John->>Bob: How about you?\n    Bob-->>John: Jolly good!\n```\n",
  "lastModified" : 1764767278130
}, {
  "filePath" : "mermaid-test-plan.md",
  "fileName" : "mermaid-test-plan.md",
  "parentDir" : "",
  "fileType" : "MD",
  "title" : "mermaid-test-plan.md",
  "contentText" : "# Mermaid 交互功能测试计划\n\n## 1. 测试目标\n验证 Mermaid 图表组件的交互功能修复情况，包括：\n- 按钮功能（全屏、缩放、重置）\n- 全屏模式下的交互（拖拽、缩放、事件隔离）\n- 跨浏览器兼容性\n\n## 2. 测试环境\n- 浏览器：Chrome (Latest), Firefox (Latest), Safari (Latest)\n- 操作系统：当前开发环境 (Linux)\n- 测试文件：`docs/mermaid-test.md`\n\n## 3. 测试用例\n\n### 3.1 基础功能测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 图表渲染 | 打开 `docs/mermaid-test.md` | 流程图和时序图正确渲染，无报错 | 待测 |\n| 鼠标悬停 | 鼠标悬停在节点或连线上 | 出现高亮效果，光标变为手型 | 待测 |\n| 节点点击 | 点击任意节点 | 节点高亮，控制台无错误 | 待测 |\n\n### 3.2 普通模式交互测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 滚轮缩放 | 按住 Ctrl + 滚轮滚动 | 图表缩放，页面不滚动 | 待测 |\n| 滚轮平移 | 直接使用滚轮滚动 | 图表**不**平移，页面正常滚动（已禁用滚轮平移） | 待测 |\n| 鼠标拖拽 | 按住左键拖拽图表 | 图表跟随鼠标移动，有平滑动画，不超过边界 | 待测 |\n| 双击重置 | 双击图表区域 | 图表恢复初始位置和缩放比例 | 待测 |\n| 顶部按钮 | 点击放大/缩小按钮 | 图表缩放正常 | 待测 |\n\n### 3.3 全屏模式交互测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 进入全屏 | 点击\"全屏查看\"按钮 | 进入全屏模式，背景黑色不透明，覆盖所有内容 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"放大\"按钮 | 控制台输出日志 `[Mermaid] Zoom In clicked`，图表放大 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"缩小\"按钮 | 控制台输出日志 `[Mermaid] Zoom Out clicked`，图表缩小 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"重置\"按钮 | 控制台输出日志 `[Mermaid] Reset Zoom clicked`，图表重置 | 待测 |\n| 拖拽交互 | 在全屏模式下拖拽图表 | 图表平滑移动，不触发底层页面滚动 | 待测 |\n| 滚轮交互 | 全屏模式下滚动滚轮 | 底层页面**不**滚动（事件被阻止） | 待测 |\n| 退出全屏 | 点击\"退出全屏\"按钮 | 退出全屏模式，恢复原状 | 待测 |\n| ESC退出 | 按下 ESC 键 | 退出全屏模式 | 待测 |\n\n### 3.4 触摸屏交互测试（模拟）\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 单指拖拽 | 模拟单指触摸移动 | 图表跟随移动 | 待测 |\n| 双指缩放 | 模拟双指捏合 | 图表缩放 | 待测 |\n\n## 4. 验证记录\n请在执行测试后记录结果。\n",
  "size" : 2813,
  "modifiedAt" : 1764767278130,
  "id" : "mermaid-test-plan.md",
  "content" : "# Mermaid 交互功能测试计划\n\n## 1. 测试目标\n验证 Mermaid 图表组件的交互功能修复情况，包括：\n- 按钮功能（全屏、缩放、重置）\n- 全屏模式下的交互（拖拽、缩放、事件隔离）\n- 跨浏览器兼容性\n\n## 2. 测试环境\n- 浏览器：Chrome (Latest), Firefox (Latest), Safari (Latest)\n- 操作系统：当前开发环境 (Linux)\n- 测试文件：`docs/mermaid-test.md`\n\n## 3. 测试用例\n\n### 3.1 基础功能测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 图表渲染 | 打开 `docs/mermaid-test.md` | 流程图和时序图正确渲染，无报错 | 待测 |\n| 鼠标悬停 | 鼠标悬停在节点或连线上 | 出现高亮效果，光标变为手型 | 待测 |\n| 节点点击 | 点击任意节点 | 节点高亮，控制台无错误 | 待测 |\n\n### 3.2 普通模式交互测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 滚轮缩放 | 按住 Ctrl + 滚轮滚动 | 图表缩放，页面不滚动 | 待测 |\n| 滚轮平移 | 直接使用滚轮滚动 | 图表**不**平移，页面正常滚动（已禁用滚轮平移） | 待测 |\n| 鼠标拖拽 | 按住左键拖拽图表 | 图表跟随鼠标移动，有平滑动画，不超过边界 | 待测 |\n| 双击重置 | 双击图表区域 | 图表恢复初始位置和缩放比例 | 待测 |\n| 顶部按钮 | 点击放大/缩小按钮 | 图表缩放正常 | 待测 |\n\n### 3.3 全屏模式交互测试\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 进入全屏 | 点击\"全屏查看\"按钮 | 进入全屏模式，背景黑色不透明，覆盖所有内容 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"放大\"按钮 | 控制台输出日志 `[Mermaid] Zoom In clicked`，图表放大 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"缩小\"按钮 | 控制台输出日志 `[Mermaid] Zoom Out clicked`，图表缩小 | 待测 |\n| 按钮响应 | 点击全屏模式下的\"重置\"按钮 | 控制台输出日志 `[Mermaid] Reset Zoom clicked`，图表重置 | 待测 |\n| 拖拽交互 | 在全屏模式下拖拽图表 | 图表平滑移动，不触发底层页面滚动 | 待测 |\n| 滚轮交互 | 全屏模式下滚动滚轮 | 底层页面**不**滚动（事件被阻止） | 待测 |\n| 退出全屏 | 点击\"退出全屏\"按钮 | 退出全屏模式，恢复原状 | 待测 |\n| ESC退出 | 按下 ESC 键 | 退出全屏模式 | 待测 |\n\n### 3.4 触摸屏交互测试（模拟）\n| 测试项 | 操作步骤 | 预期结果 | 状态 |\n|-------|---------|---------|------|\n| 单指拖拽 | 模拟单指触摸移动 | 图表跟随移动 | 待测 |\n| 双指缩放 | 模拟双指捏合 | 图表缩放 | 待测 |\n\n## 4. 验证记录\n请在执行测试后记录结果。\n",
  "lastModified" : 1764767278130
}, {
  "filePath" : "HKT Company Profile EN.pdf",
  "fileName" : "HKT Company Profile EN.pdf",
  "parentDir" : "",
  "fileType" : "PDF",
  "title" : "HKT Company Profile EN.pdf",
  "contentText" : "IOT Smart Future \nSharing A Better \nLife\n21+ YEARS EXPERIENCE IOT INTEGRATED SOLUTION \nPROVIDER\nInternet of Things (IOT) Integrated Solution Provider \nHunan HKT Technology Co., \nLtd. \nAbout \nus\nHunan HKT Technology Co., Ltd.(Stock Code:832849) founded in 2010,is a high-tech company which specializing in the research, \ndevelopment, manufacturing, and sales of LoRaWAN IoT products and solutions in China. The company's products satisfy a variety of IoT \napplication needs across multiple scenarios, widely used in multiple professional fields, such as Smart City, Smart Building, Smart \nApartment, Smart Hotel, Smart Agriculture, and Digital Livestock Farming etc., aiding customers to achieve intelligent transformation and \nupgrading.\nHKT owns a smart demonstration base which covers an area of 5 acres, with a construction area of more than 50,000㎡. The demonstration \nbase implements its comprehensive service support around R&D innovation, technology demonstration, talents training and other aspects.\nHunan HKT Technology Co., \nLtd. \nHistory\n2023\n2021\nRecognized as \n2019\nRecognized as “Hunan Province \n2018 Recognized as “Little Giant of Industrial Internet \n“Provincial Enterprise Professional and Platform”.“Top 10 \nRecognized  as \n2017 Technology Superior Innovative Internet \n“ Demonstration \nCenter” ,”Little Giant of Innovation Companies in \nRecognized  as Patform for Enterprise \nthe Industry and Enterprise Of Hunan Province”\n2015 “ M u n i c i p a l Technological \nInformation Technology Hunan Province”\nInternet of Things Innovation”,\nof Changsha” by the \nListed in the” “Excellent Software \n2010 E n t e r p r i s e government· \nN e w  T h i r d T e c h n o l o g y Enterprise of Hunan \n \nBoard” , stock Province” by the \nEstablished Cen te r ”  by  t he \ncode: 832849 government government.\nHunan HKT Technology Co., \nLtd. \nComprehensive ICT Service Capabilities\nSoftware Service Hardware Service System Integration Service Solution\n Application software development  Multi-protocol device access  Platform docking  Problem diagnosis\n IoT software development  Intelligent hardware deployment  Software docking  Feasibility analysis\n Big data business development  Device management  Network construction  Initial planning\n Digital twin project development  Device operation and maintenance  Weak current construction  Solution design\nHunan HKT Technology Co., \nLtd. \nLoRaWAN IoT Products\n...\nHunan HKT Technology Co., \nLtd. \nEnd-to-End System Integration and \nConstruction \nVisual Presentation \nUser\nAPP/Mini Program PC Management Platform IOC Operation Center\nData Analysis\nApplic\n……\nation  Integration\nSmart Buildings Smart Campus Smart Community Smart Scenic Spot Smart Industrial Park\nIoT Platform Big Data Digital Twin CIM Visual BIM \nData Center Platform Platform Software Integration\nInternet WI- NB-IoT 5G Zigbee GPRS\nFI Network Building\nDevice\nTerminal Integration \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHKT’s business covers more than100 countries and regions on 5 continents.\nRussia\nGermany\nSwitzerland Kazakhstan\nKorea\nUSA Spain\nItaly Japan\nGreece Pakistan\nTunisia Thailand Changsha\nMartinique Vietnam\nUAE India\nPhilippines\nNigeria MaldivesSingapore\nBrazil Botswana\nAustralia\nChile South Africa\nHunan HKT Technology Co., \nLtd. \nThank you\n21+ YEARS EXPERIENCE IOT INTEGRATED SOLUTION \nPROVIDER\nInternet of Things (IOT) Integrated Solution Provider \nHunan HKT Technology Co., \nLtd. \n",
  "size" : 7444371,
  "modifiedAt" : 1765532826390,
  "id" : "HKT Company Profile EN.pdf",
  "content" : "IOT Smart Future \nSharing A Better \nLife\n21+ YEARS EXPERIENCE IOT INTEGRATED SOLUTION \nPROVIDER\nInternet of Things (IOT) Integrated Solution Provider \nHunan HKT Technology Co., \nLtd. \nAbout \nus\nHunan HKT Technology Co., Ltd.(Stock Code:832849) founded in 2010,is a high-tech company which specializing in the research, \ndevelopment, manufacturing, and sales of LoRaWAN IoT products and solutions in China. The company's products satisfy a variety of IoT \napplication needs across multiple scenarios, widely used in multiple professional fields, such as Smart City, Smart Building, Smart \nApartment, Smart Hotel, Smart Agriculture, and Digital Livestock Farming etc., aiding customers to achieve intelligent transformation and \nupgrading.\nHKT owns a smart demonstration base which covers an area of 5 acres, with a construction area of more than 50,000㎡. The demonstration \nbase implements its comprehensive service support around R&D innovation, technology demonstration, talents training and other aspects.\nHunan HKT Technology Co., \nLtd. \nHistory\n2023\n2021\nRecognized as \n2019\nRecognized as “Hunan Province \n2018 Recognized as “Little Giant of Industrial Internet \n“Provincial Enterprise Professional and Platform”.“Top 10 \nRecognized  as \n2017 Technology Superior Innovative Internet \n“ Demonstration \nCenter” ,”Little Giant of Innovation Companies in \nRecognized  as Patform for Enterprise \nthe Industry and Enterprise Of Hunan Province”\n2015 “ M u n i c i p a l Technological \nInformation Technology Hunan Province”\nInternet of Things Innovation”,\nof Changsha” by the \nListed in the” “Excellent Software \n2010 E n t e r p r i s e government· \nN e w  T h i r d T e c h n o l o g y Enterprise of Hunan \n \nBoard” , stock Province” by the \nEstablished Cen te r ”  by  t he \ncode: 832849 government government.\nHunan HKT Technology Co., \nLtd. \nComprehensive ICT Service Capabilities\nSoftware Service Hardware Service System Integration Service Solution\n Application software development  Multi-protocol device access  Platform docking  Problem diagnosis\n IoT software development  Intelligent hardware deployment  Software docking  Feasibility analysis\n Big data business development  Device management  Network construction  Initial planning\n Digital twin project development  Device operation and maintenance  Weak current construction  Solution design\nHunan HKT Technology Co., \nLtd. \nLoRaWAN IoT Products\n...\nHunan HKT Technology Co., \nLtd. \nEnd-to-End System Integration and \nConstruction \nVisual Presentation \nUser\nAPP/Mini Program PC Management Platform IOC Operation Center\nData Analysis\nApplic\n……\nation  Integration\nSmart Buildings Smart Campus Smart Community Smart Scenic Spot Smart Industrial Park\nIoT Platform Big Data Digital Twin CIM Visual BIM \nData Center Platform Platform Software Integration\nInternet WI- NB-IoT 5G Zigbee GPRS\nFI Network Building\nDevice\nTerminal Integration \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHunan HKT Technology Co., \nLtd. \nHKT’s business covers more than100 countries and regions on 5 continents.\nRussia\nGermany\nSwitzerland Kazakhstan\nKorea\nUSA Spain\nItaly Japan\nGreece Pakistan\nTunisia Thailand Changsha\nMartinique Vietnam\nUAE India\nPhilippines\nNigeria MaldivesSingapore\nBrazil Botswana\nAustralia\nChile South Africa\nHunan HKT Technology Co., \nLtd. \nThank you\n21+ YEARS EXPERIENCE IOT INTEGRATED SOLUTION \nPROVIDER\nInternet of Things (IOT) Integrated Solution Provider \nHunan HKT Technology Co., \nLtd. \n",
  "lastModified" : 1765532826390
} ]